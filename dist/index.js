import*as e from"../../../../power-user.js";import*as t from"../../../../../script.js";import*as n from"../../../../world-info.js";import*as r from"../../../../slash-commands.js";import*as o from"../../../../personas.js";import*as i from"../../../../instruct-mode.js";import*as a from"../../../../chats.js";import*as s from"../../../../openai.js";import*as l from"../../../../authors-note.js";import*as u from"../../../../group-chats.js";import*as c from"../../../regex/engine.js";import*as d from"../../../../utils.js";import*as f from"../../../../slash-commands/SlashCommandCommonEnumsProvider.js";import*as h from"../../../../slash-commands/SlashCommandEnumValue.js";import*as p from"../../../../popup.js";import*as m from"../../../../../lib/dialog-polyfill.esm.js";var g={27:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.parseWithoutProcessing=u,t.parse=function(e,t){var n=u(e,t);return new i.default(t).accept(n)};var o=r(n(201)),i=r(n(915)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(425)),s=n(849);t.parser=o.default;var l={};function u(e,t){return"Program"===e.type?e:(o.default.yy=l,l.locInfo=function(e){return new l.SourceLocation(t&&t.srcName,e)},o.default.parse(e))}s.extend(l,a)},97:(e,t,n)=>{t.__esModule=!0;var r=n(849);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var o=n.inverse,i=n.fn;if(!0===t)return i(this);if(!1===t||null==t)return o(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):o(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return i(t,n)})},e.exports=t.default},127:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Compiler=l,t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var r=n.parse(e,t),i=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(i,t)},t.compile=function(e,t,n){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=i.extend({},t))||(t.data=!0);t.compat&&(t.useDepths=!0);var r=void 0;function a(){var r=n.parse(e,t),o=(new n.Compiler).compile(r,t),i=(new n.JavaScriptCompiler).compile(o,t,void 0,!0);return n.template(i)}function s(e,t){return r||(r=a()),r.call(this,e,t)}return s._setup=function(e){return r||(r=a()),r._setup(e)},s._child=function(e,t,n,o){return r||(r=a()),r._child(e,t,n,o)},s};var o=r(n(769)),i=n(849),a=r(n(919)),s=[].slice;function l(){}function u(e,t){if(e===t)return!0;if(i.isArray(e)&&i.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!u(e[n],t[n]))return!1;return!0}}function c(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}l.prototype={compiler:l,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],o=e.opcodes[n];if(r.opcode!==o.opcode||!u(r.args,o.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=i.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){c(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),r=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new o.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var a=e.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a=""),this.opcode("invokePartial",i,r,a),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){c(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,o=r.parts[0],i=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",o,i)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.path,s=i.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new o.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",r.length,i.original,a.default.helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=a.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length;for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:s.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=a.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&a.default.helpers.helperExpression(e),o=!n&&(r||t);if(o&&!r){var i=e.path.parts[0],s=this.options;s.knownHelpers[i]?r=!0:s.knownHelpersOnly&&(o=!1)}return r?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||a.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),o},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],o=r&&i.indexOf(r,e);if(r&&o>=0)return[t,o]}}}},148:(e,t)=>{t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},162:(e,t,n)=>{
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540),o=n(888);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=u(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,o]);var h=a(e,d[0],d[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},201:(e,t)=>{t.__esModule=!0;var n=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,r,o,i,a){var s=i.length-1;switch(o){case 1:return i[s-1];case 2:this.$=r.prepareProgram(i[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=i[s];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(i[s]),strip:r.stripFlags(i[s],i[s]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:i[s],value:i[s],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(i[s-2],i[s-1],i[s],this._$);break;case 12:this.$={path:i[s-3],params:i[s-2],hash:i[s-1]};break;case 13:this.$=r.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!1,this._$);break;case 14:this.$=r.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!0,this._$);break;case 15:this.$={open:i[s-5],path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:r.stripFlags(i[s-5],i[s])};break;case 16:case 17:this.$={path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:r.stripFlags(i[s-5],i[s])};break;case 18:this.$={strip:r.stripFlags(i[s-1],i[s-1]),program:i[s]};break;case 19:var l=r.prepareBlock(i[s-2],i[s-1],i[s],i[s],!1,this._$),u=r.prepareProgram([l],i[s-1].loc);u.chained=!0,this.$={strip:i[s-2].strip,program:u,chain:!0};break;case 21:this.$={path:i[s-1],strip:r.stripFlags(i[s-2],i[s])};break;case 22:case 23:this.$=r.prepareMustache(i[s-3],i[s-2],i[s-1],i[s-4],r.stripFlags(i[s-4],i[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:i[s-3],params:i[s-2],hash:i[s-1],indent:"",strip:r.stripFlags(i[s-4],i[s]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(i[s-2],i[s-1],i[s],this._$);break;case 26:this.$={path:i[s-3],params:i[s-2],hash:i[s-1],strip:r.stripFlags(i[s-4],i[s])};break;case 29:this.$={type:"SubExpression",path:i[s-3],params:i[s-2],hash:i[s-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:i[s],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(i[s-2]),value:i[s],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(i[s-1]);break;case 35:this.$={type:"StringLiteral",value:i[s],original:i[s],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(i[s]),original:Number(i[s]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===i[s],original:"true"===i[s],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 42:this.$=r.preparePath(!0,i[s],this._$);break;case 43:this.$=r.preparePath(!1,i[s],this._$);break;case 44:i[s-2].push({part:r.id(i[s]),original:i[s],separator:i[s-1]}),this.$=i[s-2];break;case 45:this.$=[{part:r.id(i[s]),original:i[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:i[s-1].push(i[s]);break;case 98:case 100:this.$=[i[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],o=[],i=this.table,a="",s=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;o.push(c);var d=this.lexer.options&&this.lexer.options.ranges;function f(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,p,m,g,v,y,b,O,w,S={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null==h&&(h=f()),g=i[m]&&i[m][h]),void 0===g||!g.length||!g[0]){var x="";if(!u){for(y in w=[],i[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");x=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+h);switch(g[0]){case 1:n.push(h),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(g[1]),h=null,p?(h=p,p=null):(l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[g[1]][1],S.$=r[r.length-b],S._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(S._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.call(S,a,l,s,this.yy,g[1],r,o)))return v;b&&(n=n.slice(0,-1*b*2),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),r.push(S.$),o.push(S._$),O=i[n[n.length-2]][n[n.length-1]],n.push(O);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length&&(!(n=this._input.match(this.rules[i[a]]))||t&&!(n[0].length>t[0].length)||(t=n,r=a,this.options.flex));a++);return t?((o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){function o(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(o(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=n,e.exports=t.default},221:(e,t,n)=>{
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(o(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,i="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:i,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=u(t.as,t.crossOrigin);a.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},242:(e,t,n)=>{e.exports=n(162)},247:(e,t,n)=>{var r=n(982),o=n(540),i=n(961);
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var $=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===j?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case x:return"Suspense";case k:return"SuspenseList";case E:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case O:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return N(e(t))}catch(e){}}return null}var A=Array.isArray,I=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},R=[],Q=-1;function z(e){return{current:e}}function L(e){0>Q||(e.current=R[Q],R[Q]=null,Q--)}function Z(e,t){Q++,R[Q]=e.current,e.current=t}var F=z(null),U=z(null),V=z(null),G=z(null);function B(e,t){switch(Z(V,t),Z(U,e),Z(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?od(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=od(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(F),Z(F,e)}function X(){L(F),L(U),L(V)}function Y(e){null!==e.memoizedState&&Z(G,e);var t=F.current,n=id(t,e.type);t!==n&&(Z(U,e),Z(F,n))}function W(e){U.current===e&&(L(F),L(U)),G.current===e&&(L(G),Yd._currentValue=D)}var q=Object.prototype.hasOwnProperty,H=r.unstable_scheduleCallback,K=r.unstable_cancelCallback,J=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,oe=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function fe(e){if("function"==typeof le&&ue(e),de&&"function"==typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(e){}}var he=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?o=ye(r):0!==(a&=s)?o=ye(a):n||0!==(n=s&~e)&&(o=ye(n)):0!==(s=r&~i)?o=ye(s):0!==a?o=ye(a):n||0!==(n=r&~e)&&(o=ye(n)),0===o?0:0!==t&&t!==o&&0===(t&i)&&((i=o&-o)>=(n=t&-t)||32===i&&4194048&n)?t:o}function Oe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return!(4194048&(ge<<=1))&&(ge=256),e}function xe(){var e=ve;return!(62914560&(ve<<=1))&&(ve=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-he(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-he(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function $e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ce(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:cf(e.type)}var je=Math.random().toString(36).slice(2),Ne="__reactFiber$"+je,Ae="__reactProps$"+je,Ie="__reactContainer$"+je,Me="__reactEvents$"+je,De="__reactListeners$"+je,Re="__reactHandles$"+je,Qe="__reactResources$"+je,ze="__reactMarker$"+je;function Le(e){delete e[Ne],delete e[Ae],delete e[Me],delete e[De],delete e[Re]}function Ze(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ie]||n[Ne]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Ne])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Fe(e){if(e=e[Ne]||e[Ie]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ve(e){var t=e[Qe];return t||(t=e[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[ze]=!0}var Be=new Set,Xe={};function Ye(e,t){We(e,t),We(e+"Capture",t)}function We(e,t){for(Xe[e]=t,e=0;e<t.length;e++)Be.add(t[e])}var qe,He,Ke=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},et={};function tt(e,t,n){if(o=t,q.call(et,o)||!q.call(Je,o)&&(Ke.test(o)?et[o]=!0:(Je[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ot(e){if(void 0===qe)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);qe=t&&t[1]||"",He=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+qe+e+He}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],s=i[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(o=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;o<u.length&&!u[o].includes("DetermineComponentFrameRoot");)o++;if(r===l.length||o===u.length)for(r=l.length-1,o=u.length-1;1<=r&&0<=o&&l[r]!==u[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==u[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==u[o]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=o);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ot(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return ot("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ht(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,o,i,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ut(t)):null!=n?yt(e,a,ut(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!=typeof o&&"symbol"!=typeof o),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+ut(s):e.removeAttribute("name")}function vt(e,t,n,r,o,i,a,s){if(null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.type=i),null!=t||null!=n){if(("submit"===i||"reset"===i)&&null==t)return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:o)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&ht(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Ot(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(A(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&kt(e,o,r)}else for(var i in t)t.hasOwnProperty(i)&&kt(e,i,t[i])}function Pt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return $t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ct=null;function jt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,At=null;function It(e){var t=Fe(e);if(t&&(e=t.stateNode)){var n=e[Ae]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[Ae]||null;if(!o)throw Error(a(90));gt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":Ot(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Dt(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Nt||null!==At)&&(Zu(),Nt&&(t=Nt,e=At,At=Nt=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Rt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ae]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Qt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),zt=!1;if(Qt)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(e){zt=!1}var Zt=null,Ft=null,Ut=null;function Vt(){if(Ut)return Ut;var e,t,n=Ft,r=n.length,o="value"in Zt?Zt.value:Zt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Ut=o.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Bt(){return!0}function Xt(){return!1}function Yt(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Bt:Xt,this.isPropagationStopped=Xt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Bt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Bt)},persist:function(){},isPersistent:Bt}),t}var Wt,qt,Ht,Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=Yt(Kt),en=f({},Kt,{view:0,detail:0}),tn=Yt(en),nn=f({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ht&&(Ht&&"mousemove"===e.type?(Wt=e.screenX-Ht.screenX,qt=e.screenY-Ht.screenY):qt=Wt=0,Ht=e),Wt)},movementY:function(e){return"movementY"in e?e.movementY:qt}}),rn=Yt(nn),on=Yt(f({},nn,{dataTransfer:0})),an=Yt(f({},en,{relatedTarget:0})),sn=Yt(f({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(f({},Kt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Yt(f({},Kt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function pn(){return hn}var mn=Yt(f({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(f({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(f({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Yt(f({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Yt(f({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),On=Yt(f({},Kt,{newState:0,oldState:0})),wn=[9,13,27,32],Sn=Qt&&"CompositionEvent"in window,xn=null;Qt&&"documentMode"in document&&(xn=document.documentMode);var kn=Qt&&"TextEvent"in window&&!xn,_n=Qt&&(!Sn||xn&&8<xn&&11>=xn),Pn=String.fromCharCode(32),En=!1;function $n(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Cn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function An(e,t,n,r){Nt?At?At.push(r):At=[r]:Nt=r,0<(t=Vc(t,"onChange")).length&&(n=new Jt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var In=null,Mn=null;function Dn(e){Dc(e,0)}function Rn(e){if(ft(Ue(e)))return e}function Qn(e,t){if("change"===e)return t}var zn=!1;if(Qt){var Ln;if(Qt){var Zn="oninput"in document;if(!Zn){var Fn=document.createElement("div");Fn.setAttribute("oninput","return;"),Zn="function"==typeof Fn.oninput}Ln=Zn}else Ln=!1;zn=Ln&&(!document.documentMode||9<document.documentMode)}function Un(){In&&(In.detachEvent("onpropertychange",Vn),Mn=In=null)}function Vn(e){if("value"===e.propertyName&&Rn(Mn)){var t=[];An(t,Mn,e,jt(e)),Dt(Dn,t)}}function Gn(e,t,n){"focusin"===e?(Un(),Mn=n,(In=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Un()}function Bn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rn(Mn)}function Xn(e,t){if("click"===e)return Rn(t)}function Yn(e,t){if("input"===e||"change"===e)return Rn(t)}var Wn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function qn(e,t){if(Wn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!q.call(t,o)||!Wn(e[o],t[o]))return!1}return!0}function Hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kn(e,t){var n,r=Hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hn(r)}}function Jn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ht((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ht((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Qt&&"documentMode"in document&&11>=document.documentMode,rr=null,or=null,ir=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ht(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&qn(ir,r)||(ir=r,0<(r=Vc(or,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},dr={};function fr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}Qt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var hr=fr("animationend"),pr=fr("animationiteration"),mr=fr("animationstart"),gr=fr("transitionrun"),vr=fr("transitionstart"),yr=fr("transitioncancel"),br=fr("transitionend"),Or=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Or.set(e,t),Ye(t,[e])}wr.push("scrollEnd");var xr=new WeakMap;function kr(e,t){if("object"==typeof e&&null!==e){var n=xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},xr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var _r=[],Pr=0,Er=0;function $r(){for(var e=Pr,t=Er=Pr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var o=_r[t];_r[t++]=null;var i=_r[t];if(_r[t++]=null,null!==r&&null!==o){var a=r.pending;null===a?o.next=o:(o.next=a.next,a.next=o),r.pending=o}0!==i&&Nr(n,o,i)}}function Tr(e,t,n,r){_r[Pr++]=e,_r[Pr++]=t,_r[Pr++]=n,_r[Pr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Cr(e,t,n,r){return Tr(e,t,n,r),Ar(e)}function jr(e,t){return Tr(e,null,null,t),Ar(e)}function Nr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,o&&null!==t&&(o=31-he(n),null===(r=(e=i.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),i):null}function Ar(e){if(50<Nu)throw Nu=0,Au=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ir={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new Mr(e,t,n,r)}function Rr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Qr(e,t){var n=e.alternate;return null===n?((n=Dr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Lr(e,t,n,r,o,i){var s=0;if(r=e,"function"==typeof e)Rr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,F.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Dr(31,n,t,o)).elementType=E,e.lanes=i,e;case g:return Zr(n.children,o,i,t);case v:s=8,o|=24;break;case y:return(e=Dr(12,n,t,2|o)).elementType=y,e.lanes=i,e;case x:return(e=Dr(13,n,t,o)).elementType=x,e.lanes=i,e;case k:return(e=Dr(19,n,t,o)).elementType=k,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case w:s=10;break e;case O:s=9;break e;case S:s=11;break e;case _:s=14;break e;case P:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Dr(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Zr(e,t,n,r){return(e=Dr(7,e,r,t)).lanes=n,e}function Fr(e,t,n){return(e=Dr(6,e,null,t)).lanes=n,e}function Ur(e,t,n){return(t=Dr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Gr=0,Br=null,Xr=0,Yr=[],Wr=0,qr=null,Hr=1,Kr="";function Jr(e,t){Vr[Gr++]=Xr,Vr[Gr++]=Br,Br=e,Xr=t}function eo(e,t,n){Yr[Wr++]=Hr,Yr[Wr++]=Kr,Yr[Wr++]=qr,qr=e;var r=Hr;e=Kr;var o=32-he(r)-1;r&=~(1<<o),n+=1;var i=32-he(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Hr=1<<32-he(t)+o|n<<o|r,Kr=i+e}else Hr=1<<i|n<<o|r,Kr=e}function to(e){null!==e.return&&(Jr(e,1),eo(e,1,0))}function no(e){for(;e===Br;)Br=Vr[--Gr],Vr[Gr]=null,Xr=Vr[--Gr],Vr[Gr]=null;for(;e===qr;)qr=Yr[--Wr],Yr[Wr]=null,Kr=Yr[--Wr],Yr[Wr]=null,Hr=Yr[--Wr],Yr[Wr]=null}var ro=null,oo=null,io=!1,ao=null,so=!1,lo=Error(a(519));function uo(e){throw go(kr(Error(a(418,"")),e)),lo}function co(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ne]=e,t[Ae]=r,n){case"dialog":Rc("cancel",t),Rc("close",t);break;case"iframe":case"object":case"embed":Rc("load",t);break;case"video":case"audio":for(n=0;n<Ic.length;n++)Rc(Ic[n],t);break;case"source":Rc("error",t);break;case"img":case"image":case"link":Rc("error",t),Rc("load",t);break;case"details":Rc("toggle",t);break;case"input":Rc("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Rc("invalid",t);break;case"textarea":Rc("invalid",t),wt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||qc(t.textContent,n)?(null!=r.popover&&(Rc("beforetoggle",t),Rc("toggle",t)),null!=r.onScroll&&Rc("scroll",t),null!=r.onScrollEnd&&Rc("scrollend",t),null!=r.onClick&&(t.onclick=Hc),t=!0):t=!1,t||uo(e)}function fo(e){for(ro=e.return;ro;)switch(ro.tag){case 5:case 13:return void(so=!1);case 27:case 3:return void(so=!0);default:ro=ro.return}}function ho(e){if(e!==ro)return!1;if(!io)return fo(e),io=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&oo&&uo(e),fo(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){oo=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}oo=null}}else 27===n?(n=oo,hd(e.type)?(e=yd,yd=null,oo=e):oo=n):oo=ro?vd(e.stateNode.nextSibling):null;return!0}function po(){oo=ro=null,io=!1}function mo(){var e=ao;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),ao=null),e}function go(e){null===ao?ao=[e]:ao.push(e)}var vo=z(null),yo=null,bo=null;function Oo(e,t,n){Z(vo,t._currentValue),t._currentValue=n}function wo(e){e._currentValue=vo.current,L(vo)}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xo(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var s=o.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=o;for(var u=0;u<t.length;u++)if(l.context===t[u]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),So(i.return,n,e),r||(s=null);break e}i=l.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),So(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function ko(e,t,n,r){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(524288&o.flags)i=!0;else if(262144&o.flags)break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var l=o.type;Wn(o.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(o===G.current){if(null===(s=o.alternate))throw Error(a(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}o=o.return}null!==e&&xo(t,e,n,r),t.flags|=262144}function _o(e){for(e=e.firstContext;null!==e;){if(!Wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Po(e){yo=e,bo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Eo(e){return To(yo,e)}function $o(e,t){return null===yo&&Po(e),To(e,t)}function To(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bo){if(null===e)throw Error(a(308));bo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bo=bo.next=t;return n}var Co="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},jo=r.unstable_scheduleCallback,No=r.unstable_NormalPriority,Ao={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Io(){return{controller:new Co,data:new Map,refCount:0}}function Mo(e){e.refCount--,0===e.refCount&&jo(No,function(){e.controller.abort()})}var Do=null,Ro=0,Qo=0,zo=null;function Lo(){if(0===--Ro&&null!==Do){null!==zo&&(zo.status="fulfilled");var e=Do;Do=null,Qo=0,zo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Zo=I.S;I.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Do){var n=Do=[];Ro=0,Qo=Tc(),zo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ro++,t.then(Lo,Lo)}(0,t),null!==Zo&&Zo(e,t)};var Fo=z(null);function Uo(){var e=Fo.current;return null!==e?e:ru.pooledCache}function Vo(e,t){Z(Fo,null===t?Fo.current:t.pool)}function Go(){var e=Uo();return null===e?null:{parent:Ao._currentValue,pool:e}}var Bo=Error(a(460)),Xo=Error(a(474)),Yo=Error(a(542)),Wo={then:function(){}};function qo(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ho(){}function Ko(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ho,Ho),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ti(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ho,Ho);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ti(e=t.reason),e}throw Jo=t,Bo}}var Jo=null;function ei(){if(null===Jo)throw Error(a(459));var e=Jo;return Jo=null,e}function ti(e){if(e===Bo||e===Yo)throw Error(a(483))}var ni=!1;function ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ii(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ai(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&nu){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Ar(e),Nr(e,null,n),t}return Tr(e,r,t,n),Ar(e)}function si(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function li(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ui=!1;function ci(){if(ui){if(null!==zo)throw zo}}function di(e,t,n,r){ui=!1;var o=e.updateQueue;ni=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?i=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,c=u=l=null,s=i;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(iu&h)===h:(r&h)===h){0!==h&&h===Qo&&(ui=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;h=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(v,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=g.payload)?m.call(v,d,h):m))break e;d=f({},d,h);break e;case 2:ni=!0}}null!==(h=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=o.callbacks)?o.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(p=s).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}null===c&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null===i&&(o.shared.lanes=0),hu|=a,e.lanes=a,e.memoizedState=d}}function fi(e,t){if("function"!=typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fi(n[e],t)}var pi=z(null),mi=z(0);function gi(e,t){Z(mi,e=du),Z(pi,t),du=e|t.baseLanes}function vi(){Z(mi,du),Z(pi,pi.current)}function yi(){du=mi.current,L(pi),L(mi)}var bi=0,Oi=null,wi=null,Si=null,xi=!1,ki=!1,_i=!1,Pi=0,Ei=0,$i=null,Ti=0;function Ci(){throw Error(a(321))}function ji(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wn(e[n],t[n]))return!1;return!0}function Ni(e,t,n,r,o,i){return bi=i,Oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Ba:Xa,_i=!1,i=n(r,o),_i=!1,ki&&(i=Ii(t,n,r,o)),Ai(e),i}function Ai(e){I.H=Ga;var t=null!==wi&&null!==wi.next;if(bi=0,Si=wi=Oi=null,xi=!1,Ei=0,$i=null,t)throw Error(a(300));null===e||Es||null!==(e=e.dependencies)&&_o(e)&&(Es=!0)}function Ii(e,t,n,r){Oi=e;var o=0;do{if(ki&&($i=null),Ei=0,ki=!1,25<=o)throw Error(a(301));if(o+=1,Si=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}I.H=Ya,i=t(n,r)}while(ki);return i}function Mi(){var e=I.H,t=e.useState()[0];return t="function"==typeof t.then?Zi(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(Oi.flags|=1024),t}function Di(){var e=0!==Pi;return Pi=0,e}function Ri(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Qi(e){if(xi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xi=!1}bi=0,Si=wi=Oi=null,ki=!1,Ei=Pi=0,$i=null}function zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Si?Oi.memoizedState=Si=e:Si=Si.next=e,Si}function Li(){if(null===wi){var e=Oi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===Si?Oi.memoizedState:Si.next;if(null!==t)Si=t,wi=e;else{if(null===e){if(null===Oi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===Si?Oi.memoizedState=Si=e:Si=Si.next=e}return Si}function Zi(e){var t=Ei;return Ei+=1,null===$i&&($i=[]),e=Ko($i,e,t),t=Oi,null===(null===Si?t.memoizedState:Si.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Ba:Xa),e}function Fi(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Zi(e);if(e.$$typeof===w)return Eo(e)}throw Error(a(438,String(e)))}function Ui(e){var t=null,n=Oi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Oi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Oi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=$;return t.index++,n}function Vi(e,t){return"function"==typeof t?t(e):t}function Gi(e){return Bi(Li(),wi,e)}function Bi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var o=e.baseQueue,i=r.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}t.baseQueue=o=i,r.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var l=s=null,u=null,c=t=o.next,d=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(iu&f)===f:(bi&f)===f){var h=c.revertLane;if(0===h)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Qo&&(d=!0);else{if((bi&h)===h){c=c.next,h===Qo&&(d=!0);continue}f={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=i):u=u.next=f,Oi.lanes|=h,hu|=h}f=c.action,_i&&n(i,f),i=c.hasEagerState?c.eagerState:n(i,f)}else h={lane:f,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=i):u=u.next=h,Oi.lanes|=f,hu|=f;c=c.next}while(null!==c&&c!==t);if(null===u?s=i:u.next=l,!Wn(i,e.memoizedState)&&(Es=!0,d&&null!==(n=zo)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=u,r.lastRenderedState=i}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Xi(e){var t=Li(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);Wn(i,t.memoizedState)||(Es=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Yi(e,t,n){var r=Oi,o=Li(),i=io;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Wn((wi||o).memoizedState,n);if(s&&(o.memoizedState=n,Es=!0),o=o.queue,va(2048,8,Hi.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==Si&&1&Si.memoizedState.tag){if(r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},qi.bind(null,r,o,n,t),null),null===ru)throw Error(a(349));i||124&bi||Wi(r,t,n)}return n}function Wi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Oi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Oi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function qi(e,t,n,r){t.value=n,t.getSnapshot=r,Ki(t)&&Ji(e)}function Hi(e,t,n){return n(function(){Ki(t)&&Ji(e)})}function Ki(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wn(e,n)}catch(e){return!0}}function Ji(e){var t=jr(e,2);null!==t&&Du(t,e,2)}function ea(e){var t=zi();if("function"==typeof e){var n=e;if(e=n(),_i){fe(!0);try{n()}finally{fe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Bi(e,wi,"function"==typeof r?r:Vi)}function na(e,t,n,r,o){if(Fa(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==I.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,ra(t,i)):(i.next=n.next,t.pending=n.next=i)}}function ra(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=I.T,a={};I.T=a;try{var s=n(o,r),l=I.S;null!==l&&l(a,s),oa(e,t,s)}catch(n){aa(e,t,n)}finally{I.T=i}}else try{oa(e,t,i=n(o,r))}catch(n){aa(e,t,n)}}function oa(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return aa(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ua(e,t){if(io){var n=ru.formState;if(null!==n){e:{var r=Oi;if(io){if(oo){t:{for(var o=oo,i=so;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=vd(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){oo=vd(o.nextSibling),r="F!"===o.data;break e}}uo(r)}r=!1}r&&(t=n[0])}}return(n=zi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=za.bind(null,Oi,r),r.dispatch=n,r=ea(!1),i=Za.bind(null,Oi,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=zi()).queue=o,n=na.bind(null,Oi,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return da(Li(),wi,e)}function da(e,t,n){if(t=Bi(e,t,la)[0],e=Gi(Vi)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Zi(t)}catch(e){if(e===Bo)throw Yo;throw e}else r=t;var o=(t=Li()).queue,i=o.dispatch;return n!==t.memoizedState&&(Oi.flags|=2048,pa(9,{destroy:void 0,resource:void 0},fa.bind(null,o,n),null)),[r,i,e]}function fa(e,t){e.action=t}function ha(e){var t=Li(),n=wi;if(null!==n)return da(t,n,e);Li(),t=t.memoizedState;var r=(n=Li()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Oi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Oi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(){return Li().memoizedState}function ga(e,t,n,r){var o=zi();r=void 0===r?null:r,Oi.flags|=e,o.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function va(e,t,n,r){var o=Li();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==wi&&null!==r&&ji(r,wi.memoizedState.deps)?o.memoizedState=pa(t,i,n,r):(Oi.flags|=e,o.memoizedState=pa(1|t,i,n,r))}function ya(e,t){ga(8390656,8,e,t)}function ba(e,t){va(2048,8,e,t)}function Oa(e,t){return va(4,2,e,t)}function wa(e,t){return va(4,4,e,t)}function Sa(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function xa(e,t,n){n=null!=n?n.concat([e]):null,va(4,4,Sa.bind(null,t,e),n)}function ka(){}function _a(e,t){var n=Li();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pa(e,t){var n=Li();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ji(t,r[1]))return r[0];if(r=e(),_i){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[r,t],r}function Ea(e,t,n){return void 0===n||1073741824&bi?e.memoizedState=t:(e.memoizedState=n,e=Mu(),Oi.lanes|=e,hu|=e,n)}function $a(e,t,n,r){return Wn(n,t)?n:null!==pi.current?(e=Ea(e,n,r),Wn(e,t)||(Es=!0),e):42&bi?(e=Mu(),Oi.lanes|=e,hu|=e,t):(Es=!0,e.memoizedState=n)}function Ta(e,t,n,r,o){var i=M.p;M.p=0!==i&&8>i?i:8;var a,s,l,u=I.T,c={};I.T=c,Za(e,!1,t,n);try{var d=o(),f=I.S;if(null!==f&&f(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var h=(a=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l);La(e,t,h,Iu())}else La(e,t,r,Iu())}catch(n){La(e,t,{then:function(){},status:"rejected",reason:n},Iu())}finally{M.p=i,I.T=u}}function Ca(){}function ja(e,t,n,r){if(5!==e.tag)throw Error(a(476));var o=Na(e).queue;Ta(e,o,t,D,null===n?Ca:function(){return Aa(e),n(r)})}function Na(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Aa(e){La(e,Na(e).next.queue,{},Iu())}function Ia(){return Eo(Yd)}function Ma(){return Li().memoizedState}function Da(){return Li().memoizedState}function Ra(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Iu(),r=ai(t,e=ii(n),n);return null!==r&&(Du(r,t,n),si(r,t,n)),t={cache:Io()},void(e.payload=t)}t=t.return}}function Qa(e,t,n){var r=Iu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Fa(e)?Ua(t,n):null!==(n=Cr(e,t,n,r))&&(Du(n,e,r),Va(n,t,r))}function za(e,t,n){La(e,t,n,Iu())}function La(e,t,n,r){var o={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fa(e))Ua(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,Wn(s,a))return Tr(e,t,o,0),null===ru&&$r(),!1}catch(e){}if(null!==(n=Cr(e,t,o,r)))return Du(n,e,r),Va(n,t,r),!0}return!1}function Za(e,t,n,r){if(r={lane:2,revertLane:Tc(),action:r,hasEagerState:!1,eagerState:null,next:null},Fa(e)){if(t)throw Error(a(479))}else null!==(t=Cr(e,n,r,2))&&Du(t,e,2)}function Fa(e){var t=e.alternate;return e===Oi||null!==t&&t===Oi}function Ua(e,t){ki=xi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Va(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Ga={readContext:Eo,use:Fi,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useLayoutEffect:Ci,useInsertionEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useSyncExternalStore:Ci,useId:Ci,useHostTransitionStatus:Ci,useFormState:Ci,useActionState:Ci,useOptimistic:Ci,useMemoCache:Ci,useCacheRefresh:Ci},Ba={readContext:Eo,use:Fi,useCallback:function(e,t){return zi().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:ya,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,ga(4194308,4,Sa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=zi();t=void 0===t?null:t;var r=e();if(_i){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zi();if(void 0!==n){var o=n(t);if(_i){fe(!0);try{n(t)}finally{fe(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=Qa.bind(null,Oi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zi().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=za.bind(null,Oi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ka,useDeferredValue:function(e,t){return Ea(zi(),e,t)},useTransition:function(){var e=ea(!1);return e=Ta.bind(null,Oi,e.queue,!0,!1),zi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Oi,o=zi();if(io){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ru)throw Error(a(349));124&iu||Wi(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,ya(Hi.bind(null,r,i,e),[e]),r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},qi.bind(null,r,i,n,t),null),n},useId:function(){var e=zi(),t=ru.identifierPrefix;if(io){var n=Kr;t=""+t+"R"+(n=(Hr&~(1<<32-he(Hr)-1)).toString(32)+n),0<(n=Pi++)&&(t+="H"+n.toString(32)),t+=""}else t=""+t+"r"+(n=Ti++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Ia,useFormState:ua,useActionState:ua,useOptimistic:function(e){var t=zi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Za.bind(null,Oi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ui,useCacheRefresh:function(){return zi().memoizedState=Ra.bind(null,Oi)}},Xa={readContext:Eo,use:Fi,useCallback:_a,useContext:Eo,useEffect:ba,useImperativeHandle:xa,useInsertionEffect:Oa,useLayoutEffect:wa,useMemo:Pa,useReducer:Gi,useRef:ma,useState:function(){return Gi(Vi)},useDebugValue:ka,useDeferredValue:function(e,t){return $a(Li(),wi.memoizedState,e,t)},useTransition:function(){var e=Gi(Vi)[0],t=Li().memoizedState;return["boolean"==typeof e?e:Zi(e),t]},useSyncExternalStore:Yi,useId:Ma,useHostTransitionStatus:Ia,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ta(Li(),0,e,t)},useMemoCache:Ui,useCacheRefresh:Da},Ya={readContext:Eo,use:Fi,useCallback:_a,useContext:Eo,useEffect:ba,useImperativeHandle:xa,useInsertionEffect:Oa,useLayoutEffect:wa,useMemo:Pa,useReducer:Xi,useRef:ma,useState:function(){return Xi(Vi)},useDebugValue:ka,useDeferredValue:function(e,t){var n=Li();return null===wi?Ea(n,e,t):$a(n,wi.memoizedState,e,t)},useTransition:function(){var e=Xi(Vi)[0],t=Li().memoizedState;return["boolean"==typeof e?e:Zi(e),t]},useSyncExternalStore:Yi,useId:Ma,useHostTransitionStatus:Ia,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Li();return null!==wi?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ui,useCacheRefresh:Da},Wa=null,qa=0;function Ha(e){var t=qa;return qa+=1,null===Wa&&(Wa=[]),Ko(Wa,e,t)}function Ka(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ja(e,t){if(t.$$typeof===h)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Qr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===P&&es(i)===t.type)?(Ka(t=o(t,n.props),n),t.return=e,t):(Ka(t=Lr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Zr(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Fr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return Ka(n=Lr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Ur(t,e.mode,n)).return=e,t;case P:return f(e,t=(0,t._init)(t._payload),n)}if(A(t)||C(t))return(t=Zr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return f(e,Ha(t),n);if(t.$$typeof===w)return f(e,$o(e,t),n);Ja(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===o?u(e,t,n,r):null;case m:return n.key===o?c(e,t,n,r):null;case P:return h(e,t,n=(o=n._init)(n._payload),r)}if(A(n)||C(n))return null!==o?null:d(e,t,n,r,null);if("function"==typeof n.then)return h(e,t,Ha(n),r);if(n.$$typeof===w)return h(e,t,$o(e,n),r);Ja(e,n)}return null}function v(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case P:return v(e,t,n,r=(0,r._init)(r._payload),o)}if(A(r)||C(r))return d(t,e=e.get(n)||null,r,o,null);if("function"==typeof r.then)return v(e,t,n,Ha(r),o);if(r.$$typeof===w)return v(e,t,n,$o(t,r),o);Ja(t,r)}return null}function y(l,u,c,d){if("object"==typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===g){if(7===u.tag){n(l,u.sibling),(d=o(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===P&&es(b)===u.type){n(l,u.sibling),Ka(d=o(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===g?((d=Zr(c.props.children,l.mode,d,c.key)).return=l,l=d):(Ka(d=Lr(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return s(l);case m:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=o(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=Ur(c,l.mode,d)).return=l,l=d}return s(l);case P:return y(l,u,c=(b=c._init)(c._payload),d)}if(A(c))return function(o,a,s,l){for(var u=null,c=null,d=a,p=a=0,m=null;null!==d&&p<s.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=h(o,d,s[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(o,d),a=i(g,a,p),null===c?u=g:c.sibling=g,c=g,d=m}if(p===s.length)return n(o,d),io&&Jr(o,p),u;if(null===d){for(;p<s.length;p++)null!==(d=f(o,s[p],l))&&(a=i(d,a,p),null===c?u=d:c.sibling=d,c=d);return io&&Jr(o,p),u}for(d=r(d);p<s.length;p++)null!==(m=v(d,o,p,s[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=i(m,a,p),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(o,e)}),io&&Jr(o,p),u}(l,u,c,d);if(C(c)){if("function"!=typeof(b=C(c)))throw Error(a(150));return function(o,s,l,u){if(null==l)throw Error(a(151));for(var c=null,d=null,p=s,m=s=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=h(o,p,y.value,u);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(o,p),s=i(b,s,m),null===d?c=b:d.sibling=b,d=b,p=g}if(y.done)return n(o,p),io&&Jr(o,m),c;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=f(o,y.value,u))&&(s=i(y,s,m),null===d?c=y:d.sibling=y,d=y);return io&&Jr(o,m),c}for(p=r(p);!y.done;m++,y=l.next())null!==(y=v(p,o,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),s=i(y,s,m),null===d?c=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(o,e)}),io&&Jr(o,m),c}(l,u,c=b.call(c),d)}if("function"==typeof c.then)return y(l,u,Ha(c),d);if(c.$$typeof===w)return y(l,u,$o(l,c),d);Ja(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=o(u,c)).return=l,l=d):(n(l,u),(d=Fr(c,l.mode,d)).return=l,l=d),s(l)):n(l,u)}return function(e,t,n,r){try{qa=0;var o=y(e,t,n,r);return Wa=null,o}catch(t){if(t===Bo||t===Yo)throw t;var i=Dr(29,t,null,e.mode);return i.lanes=r,i.return=e,i}}}var ns=ts(!0),rs=ts(!1),os=z(null),is=null;function as(e){var t=e.alternate;Z(cs,1&cs.current),Z(os,e),null===is&&(null===t||null!==pi.current||null!==t.memoizedState)&&(is=e)}function ss(e){if(22===e.tag){if(Z(cs,cs.current),Z(os,e),null===is){var t=e.alternate;null!==t&&null!==t.memoizedState&&(is=e)}}else ls()}function ls(){Z(cs,cs.current),Z(os,os.current)}function us(e){L(os),is===e&&(is=null),L(cs)}var cs=z(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Iu(),o=ii(r);o.payload=t,null!=n&&(o.callback=n),null!==(t=ai(e,o,r))&&(Du(t,e,r),si(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Iu(),o=ii(r);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=ai(e,o,r))&&(Du(t,e,r),si(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Iu(),r=ii(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ai(e,r,n))&&(Du(t,e,n),si(t,e,n))}};function ps(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!qn(n,r)||!qn(o,i))}function ms(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hs.enqueueReplaceState(t,t.state,null)}function gs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=f({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}var vs="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ys(e){vs(e)}function bs(e){console.error(e)}function Os(e){vs(e)}function ws(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Ss(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function xs(e,t,n){return(n=ii(n)).tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function ks(e){return(e=ii(e)).tag=3,e}function _s(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"==typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){Ss(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Ss(t,n,r),"function"!=typeof o&&(null===ku?ku=new Set([this]):ku.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ps=Error(a(461)),Es=!1;function $s(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function Ts(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Po(t),r=Ni(e,t,n,a,i,o),s=Di(),null===e||Es?(io&&s&&to(t),t.flags|=1,$s(e,t,r,o),t.child):(Ri(e,t,o),Ws(e,t,o))}function Cs(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||Rr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Lr(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,js(e,t,i,r,o))}if(i=e.child,!qs(e,o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:qn)(a,r)&&e.ref===t.ref)return Ws(e,t,o)}return t.flags|=1,(e=Qr(i,r)).ref=t.ref,e.return=t,t.child=e}function js(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(qn(i,r)&&e.ref===t.ref){if(Es=!1,t.pendingProps=r=i,!qs(e,o))return t.lanes=e.lanes,Ws(e,t,o);131072&e.flags&&(Es=!0)}}return Ms(e,t,n,r,o)}function Ns(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==i?i.baseLanes|n:n,null!==e){for(o=t.child=e.child,i=0;null!==o;)i=i|o.lanes|o.childLanes,o=o.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return As(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,As(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Vo(0,null!==i?i.cachePool:null),null!==i?gi(t,i):vi(),ss(t)}else null!==i?(Vo(0,i.cachePool),gi(t,i),ls(),t.memoizedState=null):(null!==e&&Vo(0,null),vi(),ls());return $s(e,t,o,n),t.child}function As(e,t,n,r){var o=Uo();return o=null===o?null:{parent:Ao._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Vo(0,null),vi(),ss(t),null!==e&&ko(e,t,r,!0),null}function Is(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ms(e,t,n,r,o){return Po(t),n=Ni(e,t,n,r,void 0,o),r=Di(),null===e||Es?(io&&r&&to(t),t.flags|=1,$s(e,t,n,o),t.child):(Ri(e,t,o),Ws(e,t,o))}function Ds(e,t,n,r,o,i){return Po(t),t.updateQueue=null,n=Ii(t,r,n,o),Ai(e),r=Di(),null===e||Es?(io&&r&&to(t),t.flags|=1,$s(e,t,n,i),t.child):(Ri(e,t,i),Ws(e,t,i))}function Rs(e,t,n,r,o){if(Po(t),null===t.stateNode){var i=Ir,a=n.contextType;"object"==typeof a&&null!==a&&(i=Eo(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=hs,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ri(t),a=n.contextType,i.context="object"==typeof a&&null!==a?Eo(a):Ir,i.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(fs(t,n,a,r),i.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(a=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&hs.enqueueReplaceState(i,i.state,null),di(t,r,i,o),ci(),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,l=gs(n,s);i.props=l;var u=i.context,c=n.contextType;a=Ir,"object"==typeof c&&null!==c&&(a=Eo(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s||u!==a)&&ms(t,i,r,a),ni=!1;var f=t.memoizedState;i.state=f,di(t,r,i,o),ci(),u=t.memoizedState,s||f!==u||ni?("function"==typeof d&&(fs(t,n,d,r),u=t.memoizedState),(l=ni||ps(t,n,l,r,f,u,a))?(c||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=a,r=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,oi(e,t),c=gs(n,a=t.memoizedProps),i.props=c,d=t.pendingProps,f=i.context,u=n.contextType,l=Ir,"object"==typeof u&&null!==u&&(l=Eo(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(a!==d||f!==l)&&ms(t,i,r,l),ni=!1,f=t.memoizedState,i.state=f,di(t,r,i,o),ci();var h=t.memoizedState;a!==d||f!==h||ni||null!==e&&null!==e.dependencies&&_o(e.dependencies)?("function"==typeof s&&(fs(t,n,s,r),h=t.memoizedState),(c=ni||ps(t,n,c,r,f,h,l)||null!==e&&null!==e.dependencies&&_o(e.dependencies))?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Is(e,t),r=!!(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,o),t.child=ns(t,null,n,o)):$s(e,t,n,o),t.memoizedState=i.state,e=t.child):e=Ws(e,t,o),e}function Qs(e,t,n,r){return po(),t.flags|=256,$s(e,t,n,r),t.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ls(e){return{baseLanes:e,cachePool:Go()}}function Zs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gu),e}function Fs(e,t,n){var r,o=t.pendingProps,i=!1,s=!!(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&!!(2&cs.current)),r&&(i=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(io){if(i?as(t):ls(),io){var l,u=oo;if(l=u){e:{for(l=u,u=so;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=vd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==qr?{id:Hr,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},(l=Dr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ro=t,oo=null,l=!0):l=!1}l||uo(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return gd(u)?t.lanes=32:t.lanes=536870912,null;us(t)}return u=o.children,o=o.fallback,i?(ls(),u=Vs({mode:"hidden",children:u},i=t.mode),o=Zr(o,i,n,null),u.return=t,o.return=t,u.sibling=o,t.child=u,(i=t.child).memoizedState=Ls(n),i.childLanes=Zs(e,r,n),t.memoizedState=zs,o):(as(t),Us(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Gs(e,t,n)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),i=o.fallback,u=t.mode,o=Vs({mode:"visible",children:o.children},u),(i=Zr(i,u,n,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,ns(t,e.child,null,n),(o=t.child).memoizedState=Ls(n),o.childLanes=Zs(e,r,n),t.memoizedState=zs,t=i);else if(as(t),gd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(o=Error(a(419))).stack="",o.digest=r,go({value:o,source:null,stack:null}),t=Gs(e,t,n)}else if(Es||ko(e,t,n,!1),r=0!==(n&e.childLanes),Es||r){if(null!==(r=ru)&&(0!==(o=0!==((o=42&(o=n&-n)?1:$e(o))&(r.suspendedLanes|n))?0:o)&&o!==l.retryLane))throw l.retryLane=o,jr(e,o),Du(r,e,o),Ps;"$?"===u.data||Xu(),t=Gs(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,oo=vd(u.nextSibling),ro=t,io=!0,ao=null,so=!1,null!==e&&(Yr[Wr++]=Hr,Yr[Wr++]=Kr,Yr[Wr++]=qr,Hr=e.id,Kr=e.overflow,qr=t),(t=Us(t,o.children)).flags|=4096);return t}return i?(ls(),i=o.fallback,u=t.mode,c=(l=e.child).sibling,(o=Qr(l,{mode:"hidden",children:o.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?i=Qr(c,i):(i=Zr(i,u,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,null===(u=e.child.memoizedState)?u=Ls(n):(null!==(l=u.cachePool)?(c=Ao._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Go(),u={baseLanes:u.baseLanes|n,cachePool:l}),i.memoizedState=u,i.childLanes=Zs(e,r,n),t.memoizedState=zs,o):(as(t),e=(n=e.child).sibling,(n=Qr(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Us(e,t){return(t=Vs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vs(e,t){return(e=Dr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gs(e,t,n){return ns(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function Xs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Ys(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if($s(e,t,r.children,n),2&(r=cs.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Z(cs,r),o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Xs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ds(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Xs(t,!0,n,null,i);break;case"together":Xs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),hu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ko(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Qr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Qr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_o(e))}function Hs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Es=!0;else{if(!(qs(e,n)||128&t.flags))return Es=!1,function(e,t,n){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),Oo(0,Ao,e.memoizedState.cache),po();break;case 27:case 5:Y(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:Oo(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(as(t),null!==(e=Ws(e,t,n))?e.sibling:null);as(t);break;case 19:var o=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(ko(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return Ys(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Z(cs,cs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n);case 24:Oo(0,Ao,e.memoizedState.cache)}return Ws(e,t,n)}(e,t,n);Es=!!(131072&e.flags)}else Es=!1,io&&1048576&t.flags&&eo(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((o=r.$$typeof)===S){t.tag=11,t=Ts(null,t,r,e,n);break e}if(o===_){t.tag=14,t=Cs(null,t,r,e,n);break e}}throw t=N(r)||r,Error(a(306,t,""))}Rr(r)?(e=gs(r,e),t.tag=1,t=Rs(null,t,r,e,n)):(t.tag=0,t=Ms(null,t,r,e,n))}return t;case 0:return Ms(e,t,t.type,t.pendingProps,n);case 1:return Rs(e,t,r=t.type,o=gs(r,t.pendingProps),n);case 3:e:{if(B(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;o=i.element,oi(e,t),di(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Oo(0,Ao,r),r!==i.cache&&xo(t,[Ao],n,!0),ci(),r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Qs(e,t,r,n);break e}if(r!==o){go(o=kr(Error(a(424)),t)),t=Qs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(oo=vd(e.firstChild),ro=t,io=!0,ao=null,so=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===o){t=Ws(e,t,n);break e}$s(e,t,r,n)}t=t.child}return t;case 26:return Is(e,t),null===e?(n=$d(t.type,null,t.pendingProps,null))?t.memoizedState=n:io||(n=t.type,e=t.pendingProps,(r=rd(V.current).createElement(n))[Ne]=t,r[Ae]=e,ed(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=$d(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&io&&(r=t.stateNode=Od(t.type,t.pendingProps,V.current),ro=t,so=!0,o=oo,hd(t.type)?(yd=o,oo=vd(r.firstChild)):oo=o),$s(e,t,t.pendingProps.children,n),Is(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&io&&((o=r=oo)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,so))?(t.stateNode=r,ro=t,oo=vd(r.firstChild),so=!1,o=!0):o=!1),o||uo(t)),Y(t),o=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,ad(o,i)?r=null:null!==s&&ad(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=Ni(e,t,Mi,null,null,n),Yd._currentValue=o),Is(e,t),$s(e,t,r,n),t.child;case 6:return null===e&&io&&((e=n=oo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,so))?(t.stateNode=n,ro=t,oo=null,e=!0):e=!1),e||uo(t)),null;case 13:return Fs(e,t,n);case 4:return B(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):$s(e,t,r,n),t.child;case 11:return Ts(e,t,t.type,t.pendingProps,n);case 7:return $s(e,t,t.pendingProps,n),t.child;case 8:case 12:return $s(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Oo(0,t.type,r.value),$s(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Po(t),r=r(o=Eo(o)),t.flags|=1,$s(e,t,r,n),t.child;case 14:return Cs(e,t,t.type,t.pendingProps,n);case 15:return js(e,t,t.type,t.pendingProps,n);case 19:return Ys(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Vs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Qr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ns(e,t,n);case 24:return Po(t),r=Eo(Ao),null===e?(null===(o=Uo())&&(o=ru,i=Io(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:r,cache:o},ri(t),Oo(0,Ao,o)):(0!==(e.lanes&n)&&(oi(e,t),di(t,null,null,n),ci()),o=e.memoizedState,i=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Oo(0,Ao,r)):(r=i.cache,Oo(0,Ao,r),r!==o.cache&&xo(t,[Ao],n,!0))),$s(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Ks(e){e.flags|=4}function Js(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Zd(t)){if(null!==(t=os.current)&&((4194048&iu)===iu?null!==is:(62914560&iu)!==iu&&!(536870912&iu)||t!==is))throw Jo=Wo,Xo;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,vu|=t)}function tl(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wo(Ao),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ho(t)?Ks(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,mo())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ks(t),null!==n?(nl(t),Js(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ks(t),nl(t),Js(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ks(t),nl(t),t.flags&=-16777217),null;case 27:W(t),n=V.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=F.current,ho(t)?co(t):(e=Od(o,r,n),t.stateNode=e,Ks(t))}return nl(t),null;case 5:if(W(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=F.current,ho(t))co(t);else{switch(o=rd(V.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?o.createElement(n,{is:r.is}):o.createElement(n)}}e[Ne]=t,e[Ae]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ks(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(e=V.current,ho(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=ro))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Ne]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||qc(e.nodeValue,n)))||uo(t)}else(e=rd(e).createTextNode(r))[Ne]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[Ne]=t}else po(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),o=!1}else o=mo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(us(t),t):(us(t),null)}if(us(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return X(),null===e&&Lc(t.stateNode.containerInfo),nl(t),null;case 10:return wo(t.type),nl(t),null;case 19:if(L(cs),null===(o=t.memoizedState))return nl(t),null;if(r=!!(128&t.flags),null===(i=o.rendering))if(r)tl(o,!1);else{if(0!==fu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=ds(e))){for(t.flags|=128,tl(o,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return Z(cs,1&cs.current|2),t.child}e=e.sibling}null!==o.tail&&te()>Su&&(t.flags|=128,r=!0,tl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!io)return nl(t),null}else 2*te()-o.renderingStartTime>Su&&536870912!==n&&(t.flags|=128,r=!0,tl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=o.last)?e.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=te(),t.sibling=null,e=cs.current,Z(cs,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return us(t),yi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&L(Fo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wo(Ao),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function ol(e,t){switch(no(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wo(Ao),X(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return W(t),null;case 13:if(us(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return L(cs),null;case 4:return X(),null;case 10:return wo(t.type),null;case 22:case 23:return us(t),yi(),null!==e&&L(Fo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wo(Ao),null;default:return null}}function il(e,t){switch(no(t),t.tag){case 3:wo(Ao),X();break;case 26:case 27:case 5:W(t);break;case 4:X();break;case 13:us(t);break;case 19:L(cs);break;case 10:wo(t.type);break;case 22:case 23:us(t),yi(),null!==e&&L(Fo);break;case 24:wo(Ao)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==o)}}catch(e){cc(t,t.return,e)}}function sl(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,o=t;var l=n,u=s;try{u()}catch(e){cc(o,l,e)}}}r=r.next}while(r!==i)}}catch(e){cc(t,t.return,e)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(t){cc(e,e.return,t)}}}function ul(e,t,n){n.props=gs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){cc(e,t,n)}}function cl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){cc(e,t,n)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){cc(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){cc(e,t,n)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){cc(e,e.return,t)}}function hl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,s=null,l=null,u=null,c=null,d=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&null!=f)switch(p){case"checked":case"value":break;case"defaultValue":u=f;default:r.hasOwnProperty(p)||Kc(e,t,p,null,r,f)}}for(var h in r){var p=r[h];if(f=n[h],r.hasOwnProperty(h)&&(null!=p||null!=f))switch(h){case"type":i=p;break;case"name":o=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==f&&Kc(e,t,h,p,r,f)}}return void gt(e,s,l,u,c,d,i,o);case"select":for(i in p=s=l=h=null,n)if(u=n[i],n.hasOwnProperty(i)&&null!=u)switch(i){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(i)||Kc(e,t,i,null,r,u)}for(o in r)if(i=r[o],u=n[o],r.hasOwnProperty(o)&&(null!=i||null!=u))switch(o){case"value":h=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==u&&Kc(e,t,o,i,r,u)}return t=l,n=s,r=p,void(null!=h?bt(e,!!n,h,!1):!!r!=!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=h=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Kc(e,t,l,null,r,o)}for(s in r)if(o=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=o||null!=i))switch(s){case"value":h=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(a(91));break;default:o!==i&&Kc(e,t,s,o,r,i)}return void Ot(e,h,p);case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&null!=h&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Kc(e,t,m,null,r,h);for(u in r)if(h=r[u],p=n[u],r.hasOwnProperty(u)&&h!==p&&(null!=h||null!=p))if("selected"===u)e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h;else Kc(e,t,u,h,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)h=n[g],n.hasOwnProperty(g)&&null!=h&&!r.hasOwnProperty(g)&&Kc(e,t,g,null,r,h);for(c in r)if(h=r[c],p=n[c],r.hasOwnProperty(c)&&h!==p&&(null!=h||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:Kc(e,t,c,h,r,p)}return;default:if(Pt(t)){for(var v in n)h=n[v],n.hasOwnProperty(v)&&void 0!==h&&!r.hasOwnProperty(v)&&Jc(e,t,v,void 0,r,h);for(d in r)h=r[d],p=n[d],!r.hasOwnProperty(d)||h===p||void 0===h&&void 0===p||Jc(e,t,d,h,r,p);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&null!=h&&!r.hasOwnProperty(y)&&Kc(e,t,y,null,r,h);for(f in r)h=r[f],p=n[f],!r.hasOwnProperty(f)||h===p||null==h&&null==p||Kc(e,t,f,h,r,p)}(r,e.type,n,t),r[Ae]=t}catch(t){cc(e,e.return,t)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&hd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&hd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Hc));else if(4!==r&&(27===r&&hd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&hd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ed(t,r,n),t[Ne]=e,t[Ae]=n}catch(t){cc(e,e.return,t)}}var bl=!1,Ol=!1,wl=!1,Sl="function"==typeof WeakSet?WeakSet:Set,xl=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Rl(e,n),4&r&&al(5,n);break;case 1:if(Rl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){cc(n,n.return,e)}else{var o=gs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){cc(n,n.return,e)}}64&r&&ll(n),512&r&&cl(n,n.return);break;case 3:if(Rl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(e){cc(n,n.return,e)}}break;case 27:null===t&&4&r&&yl(n);case 26:case 5:Rl(e,n),null===t&&4&r&&fl(n),512&r&&cl(n,n.return);break;case 12:Rl(e,n);break;case 13:Rl(e,n),4&r&&Cl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||Ol,o=bl;var i=Ol;bl=r,(Ol=t)&&!i?zl(e,n,!!(8772&n.subtreeFlags)):Rl(e,n),bl=o,Ol=i}break;case 30:break;default:Rl(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Le(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pl=null,El=!1;function $l(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(de&&"function"==typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(e){}switch(n.tag){case 26:Ol||dl(n,t),$l(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ol||dl(n,t);var r=Pl,o=El;hd(n.type)&&(Pl=n.stateNode,El=!1),$l(e,t,n),wd(n.stateNode),Pl=r,El=o;break;case 5:Ol||dl(n,t);case 6:if(r=Pl,o=El,Pl=null,$l(e,t,n),El=o,null!==(Pl=r))if(El)try{(9===Pl.nodeType?Pl.body:"HTML"===Pl.nodeName?Pl.ownerDocument.body:Pl).removeChild(n.stateNode)}catch(e){cc(n,t,e)}else try{Pl.removeChild(n.stateNode)}catch(e){cc(n,t,e)}break;case 18:null!==Pl&&(El?(pd(9===(e=Pl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),$f(e)):pd(Pl,n.stateNode));break;case 4:r=Pl,o=El,Pl=n.stateNode.containerInfo,El=!0,$l(e,t,n),Pl=r,El=o;break;case 0:case 11:case 14:case 15:Ol||sl(2,n,t),Ol||sl(4,n,t),$l(e,t,n);break;case 1:Ol||(dl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),$l(e,t,n);break;case 21:$l(e,t,n);break;case 22:Ol=(r=Ol)||null!==n.memoizedState,$l(e,t,n),Ol=r;break;default:$l(e,t,n)}}function Cl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{$f(e)}catch(e){cc(t,t.return,e)}}function jl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Nl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(hd(l.type)){Pl=l.stateNode,El=!1;break e}break;case 5:Pl=l.stateNode,El=!1;break e;case 3:case 4:Pl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Pl)throw Error(a(160));Tl(i,s,o),Pl=null,El=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Al=null;function Il(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nl(t,e),Ml(e),4&r&&(sl(3,e,e.return),al(3,e),sl(5,e,e.return));break;case 1:Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Al;if(Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(i=o.getElementsByTagName("title")[0])||i[ze]||i[Ne]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),ed(i,r,n),i[Ne]=e,Ge(i),r=i;break e;case"link":var s=zd("link","href",o).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((i=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ed(i=o.createElement(r),r,n),o.head.appendChild(i);break;case"meta":if(s=zd("meta","content",o).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((i=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ed(i=o.createElement(r),r,n),o.head.appendChild(i);break;default:throw Error(a(468,r))}i[Ne]=e,Ge(i),r=i}e.stateNode=r}else Ld(o,e.type,e.stateNode);else e.stateNode=Id(o,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Ld(o,e.type,e.stateNode):Id(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&hl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),null!==n&&4&r&&hl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),32&e.flags){o=e.stateNode;try{St(o,"")}catch(t){cc(e,e.return,t)}}4&r&&null!=e.stateNode&&hl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(wl=!0);break;case 6:if(Nl(t,e),Ml(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){cc(e,e.return,t)}}break;case 3:if(Qd=null,o=Al,Al=kd(t.containerInfo),Nl(t,e),Al=o,Ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$f(t.containerInfo)}catch(t){cc(e,e.return,t)}wl&&(wl=!1,Dl(e));break;case 4:r=Al,Al=kd(e.stateNode.containerInfo),Nl(t,e),Ml(e),Al=r;break;case 12:default:Nl(t,e),Ml(e);break;case 13:Nl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(wu=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));break;case 22:o=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=bl,d=Ol;if(bl=c||o,Ol=d||u,Nl(t,e),Ol=d,bl=c,Ml(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||u||bl||Ol||Ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(i=u.stateNode,o)"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var f=u.memoizedProps.style,h=null!=f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(e){cc(u,u.return,e)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(e){cc(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,jl(e,n))));break;case 19:Nl(t,e),Ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var o=n.stateNode;vl(e,ml(e),o);break;case 5:var i=n.stateNode;32&n.flags&&(St(i,""),n.flags&=-33),vl(e,ml(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;gl(e,ml(e),s);break;default:throw Error(a(161))}}catch(t){cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Ql(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&ul(t,t.return,n),Ql(t);break;case 27:wd(t.stateNode);case 26:case 5:dl(t,t.return),Ql(t);break;case 22:null===t.memoizedState&&Ql(t);break;default:Ql(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:zl(o,i,n),al(4,i);break;case 1:if(zl(o,i,n),"function"==typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(e){cc(r,r.return,e)}if(null!==(o=(r=i).updateQueue)){var s=r.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)fi(l[o],s)}catch(e){cc(r,r.return,e)}}n&&64&a&&ll(i),cl(i,i.return);break;case 27:yl(i);case 26:case 5:zl(o,i,n),n&&null===r&&4&a&&fl(i),cl(i,i.return);break;case 12:zl(o,i,n);break;case 13:zl(o,i,n),n&&4&a&&Cl(o,i);break;case 22:null===i.memoizedState&&zl(o,i,n),cl(i,i.return);break;case 30:break;default:zl(o,i,n)}t=t.sibling}}function Ll(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Mo(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Mo(e))}function Fl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,r),t=t.sibling}function Ul(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Fl(e,t,n,r),2048&o&&al(9,t);break;case 1:case 13:default:Fl(e,t,n,r);break;case 3:Fl(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Mo(e)));break;case 12:if(2048&o){Fl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,s=i.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){cc(t,t.return,e)}}else Fl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Fl(e,t,n,r):Gl(e,t):2&i._visibility?Fl(e,t,n,r):(i._visibility|=2,Vl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&o&&Ll(a,t);break;case 24:Fl(e,t,n,r),2048&o&&Zl(t.alternate,t)}}function Vl(e,t,n,r,o){for(o=o&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,s=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(i,a,s,l,o),al(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?Vl(i,a,s,l,o):Gl(i,a):(c._visibility|=2,Vl(i,a,s,l,o)),o&&2048&u&&Ll(a.alternate,a);break;case 24:Vl(i,a,s,l,o),o&&2048&u&&Zl(a.alternate,a);break;default:Vl(i,a,s,l,o)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:Gl(n,r),2048&o&&Ll(r.alternate,r);break;case 24:Gl(n,r),2048&o&&Zl(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Bl=8192;function Xl(e){if(e.subtreeFlags&Bl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Xl(e),e.flags&Bl&&null!==e.memoizedState&&function(e,t,n){if(null===Fd)throw Error(a(475));var r=Fd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var o=Td(n.href),i=e.querySelector(Cd(o));if(i)return null!==(e=i._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=Vd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,n=jd(n),(o=Sd.get(o))&&Dd(n,o),Ge(i=i.createElement("link"));var s=i;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=Vd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Al,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Al;Al=kd(e.stateNode.containerInfo),Xl(e),Al=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Bl,Bl=16777216,Xl(e),Bl=t):Xl(e))}}function Wl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ql(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,Jl(r,e)}Wl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Hl(e),e=e.sibling}function Hl(e){switch(e.tag){case 0:case 11:case 15:ql(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Kl(e)):ql(e)}}function Kl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,Jl(r,e)}Wl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),Kl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Kl(t));break;default:Kl(t)}e=e.sibling}}function Jl(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Mo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,xl=r;else e:for(n=e;null!==xl;){var o=(r=xl).sibling,i=r.return;if(_l(r),r===n){xl=null;break e}if(null!==o){o.return=i,xl=o;break e}xl=i}}}var eu={getCacheForType:function(e){var t=Eo(Ao),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"==typeof WeakMap?WeakMap:Map,nu=0,ru=null,ou=null,iu=0,au=0,su=null,lu=!1,uu=!1,cu=!1,du=0,fu=0,hu=0,pu=0,mu=0,gu=0,vu=0,yu=null,bu=null,Ou=!1,wu=0,Su=1/0,xu=null,ku=null,_u=0,Pu=null,Eu=null,$u=0,Tu=0,Cu=null,ju=null,Nu=0,Au=null;function Iu(){if(2&nu&&0!==iu)return iu&-iu;if(null!==I.T){return 0!==Qo?Qo:Tc()}return Ce()}function Mu(){0===gu&&(gu=536870912&iu&&!io?536870912:Se());var e=os.current;return null!==e&&(e.flags|=32),gu}function Du(e,t,n){(e!==ru||2!==au&&9!==au)&&null===e.cancelPendingCommit||(Uu(e,0),Lu(e,iu,gu,!1)),_e(e,n),2&nu&&e===ru||(e===ru&&(!(2&nu)&&(pu|=n),4===fu&&Lu(e,iu,gu,!1)),Sc(e))}function Ru(e,t,n){if(6&nu)throw Error(a(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||Oe(e,t),o=r?function(e,t){var n=nu;nu|=2;var r=Gu(),o=Bu();ru!==e||iu!==t?(xu=null,Su=te()+500,Uu(e,t)):uu=Oe(e,t);e:for(;;)try{if(0!==au&&null!==ou){t=ou;var i=su;t:switch(au){case 1:au=0,su=null,Ju(e,t,i,1);break;case 2:case 9:if(qo(i)){au=0,su=null,Ku(t);break}t=function(){2!==au&&9!==au||ru!==e||(au=7),Sc(e)},i.then(t,t);break e;case 3:au=7;break e;case 4:au=5;break e;case 7:qo(i)?(au=0,su=null,Ku(t)):(au=0,su=null,Ju(e,t,i,7));break;case 5:var s=null;switch(ou.tag){case 26:s=ou.memoizedState;case 5:case 27:var l=ou;if(!s||Zd(s)){au=0,su=null;var u=l.sibling;if(null!==u)ou=u;else{var c=l.return;null!==c?(ou=c,ec(c)):ou=null}break t}}au=0,su=null,Ju(e,t,i,5);break;case 6:au=0,su=null,Ju(e,t,i,6);break;case 8:Fu(),fu=6;break e;default:throw Error(a(462))}}qu();break}catch(t){Vu(e,t)}return bo=yo=null,I.H=r,I.A=o,nu=n,null!==ou?0:(ru=null,iu=0,$r(),fu)}(e,t):Yu(e,t,!0),i=r;;){if(0===o){uu&&!r&&Lu(e,t,0,!1);break}if(n=e.current.alternate,!i||zu(n)){if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;o=yu;var u=l.current.memoizedState.isDehydrated;if(u&&(Uu(l,s).flags|=256),2!==(s=Yu(l,s,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=i,pu|=i,o=4;break e}i=bu,bu=o,null!==i&&(null===bu?bu=i:bu.push.apply(bu,i))}o=s}if(i=!1,2!==o)continue}}if(1===o){Uu(e,0),Lu(e,t,0,!0);break}e:{switch(r=e,i=o){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Lu(r,t,gu,!lu);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(o=wu+300-te())){if(Lu(r,t,gu,!lu),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Qu.bind(null,r,n,bu,xu,Ou,t,gu,pu,vu,lu,i,2,-0,0),o)}else Qu(r,n,bu,xu,Ou,t,gu,pu,vu,lu,i,0,-0,0)}break}o=Yu(e,t,!1),i=!1}Sc(e)}function Qu(e,t,n,r,o,i,s,l,u,c,d,f,h,p){if(e.timeoutHandle=-1,(8192&(f=t.subtreeFlags)||!(16785408&~f))&&(Fd={stylesheets:null,count:0,unsuspend:Ud},Yl(t),null!==(f=function(){if(null===Fd)throw Error(a(475));var e=Fd;return e.stylesheets&&0===e.count&&Bd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Bd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=f(nc.bind(null,e,t,i,n,r,o,s,l,u,d,1,h,p)),void Lu(e,i,s,!c);nc(e,t,i,n,r,o,s,l,u)}function zu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Wn(i(),o))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lu(e,t,n,r){t&=~mu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-he(o),a=1<<i;r[i]=-1,o&=~a}0!==n&&Pe(e,n,t)}function Zu(){return!!(6&nu)||(xc(0,!1),!1)}function Fu(){if(null!==ou){if(0===au)var e=ou.return;else bo=yo=null,Qi(e=ou),Wa=null,qa=0,e=ou;for(;null!==e;)il(e.alternate,e),e=e.return;ou=null}}function Uu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Fu(),ru=e,ou=n=Qr(e.current,null),iu=t,au=0,su=null,lu=!1,uu=Oe(e,t),cu=!1,vu=gu=mu=pu=hu=fu=0,bu=yu=null,Ou=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-he(r),i=1<<o;t|=e[o],r&=~i}return du=t,$r(),n}function Vu(e,t){Oi=null,I.H=Ga,t===Bo||t===Yo?(t=ei(),au=3):t===Xo?(t=ei(),au=4):au=t===Ps?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,su=t,null===ou&&(fu=1,ws(e,kr(t,e.current)))}function Gu(){var e=I.H;return I.H=Ga,null===e?Ga:e}function Bu(){var e=I.A;return I.A=eu,e}function Xu(){fu=4,lu||(4194048&iu)!==iu&&null!==os.current||(uu=!0),!(134217727&hu)&&!(134217727&pu)||null===ru||Lu(ru,iu,gu,!1)}function Yu(e,t,n){var r=nu;nu|=2;var o=Gu(),i=Bu();ru===e&&iu===t||(xu=null,Uu(e,t)),t=!1;var a=fu;e:for(;;)try{if(0!==au&&null!==ou){var s=ou,l=su;switch(au){case 8:Fu(),a=6;break e;case 3:case 2:case 9:case 6:null===os.current&&(t=!0);var u=au;if(au=0,su=null,Ju(e,s,l,u),n&&uu){a=0;break e}break;default:u=au,au=0,su=null,Ju(e,s,l,u)}}Wu(),a=fu;break}catch(t){Vu(e,t)}return t&&e.shellSuspendCounter++,bo=yo=null,nu=r,I.H=o,I.A=i,null===ou&&(ru=null,iu=0,$r()),a}function Wu(){for(;null!==ou;)Hu(ou)}function qu(){for(;null!==ou&&!J();)Hu(ou)}function Hu(e){var t=Hs(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):ou=t}function Ku(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ds(n,t,t.pendingProps,t.type,void 0,iu);break;case 11:t=Ds(n,t,t.pendingProps,t.type.render,t.ref,iu);break;case 5:Qi(t);default:il(n,t),t=Hs(n,t=ou=zr(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):ou=t}function Ju(e,t,n,r){bo=yo=null,Qi(t),Wa=null,qa=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&ko(t,n,o,!0),null!==(n=os.current)){switch(n.tag){case 13:return null===is?Xu():null===n.alternate&&0===fu&&(fu=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===Wo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),dc(e,r,o)),!1;case 22:return n.flags|=65536,r===Wo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),dc(e,r,o)),!1}throw Error(a(435,n.tag))}return dc(e,r,o),Xu(),!1}if(io)return null!==(t=os.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==lo&&go(kr(e=Error(a(422),{cause:r}),n))):(r!==lo&&go(kr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=kr(r,n),li(e,o=xs(e.stateNode,r,o)),4!==fu&&(fu=2)),!1;var i=Error(a(520),{cause:r});if(i=kr(i,n),null===yu?yu=[i]:yu.push(i),4!==fu&&(fu=2),null===t)return!0;r=kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,li(n,e=xs(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==ku&&ku.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,_s(o=ks(o),e,n,r),li(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,iu))return fu=1,ws(e,kr(n,e.current)),void(ou=null)}catch(t){if(null!==o)throw ou=o,t;return fu=1,ws(e,kr(n,e.current)),void(ou=null)}32768&t.flags?(io||1===r?e=!0:uu||536870912&iu?e=!1:(lu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=os.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(32768&t.flags)return void tc(t,lu);e=t.return;var n=rl(t.alternate,t,du);if(null!==n)return void(ou=n);if(null!==(t=t.sibling))return void(ou=t);ou=t=e}while(null!==t);0===fu&&(fu=5)}function tc(e,t){do{var n=ol(e.alternate,e);if(null!==n)return n.flags&=32767,void(ou=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ou=e);ou=e=n}while(null!==e);fu=6,ou=null}function nc(e,t,n,r,o,i,s,l,u){e.cancelPendingCommit=null;do{sc()}while(0!==_u);if(6&nu)throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,o,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-he(n),d=1<<c;s[c]=0,l[c]=-1;var f=u[c];if(null!==f)for(u[c]=null,c=0;c<f.length;c++){var h=f[c];null!==h&&(h.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Er,s,l,u),e===ru&&(ou=ru=null,iu=0),Eu=t,Pu=e,$u=n,Tu=i,Cu=o,ju=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,H(ie,function(){return lc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=I.T,I.T=null,o=M.p,M.p=2,s=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,td=nf,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(e){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==o&&3!==f.nodeType||(l=s+o),f!==i||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++c===o&&(l=s),h===i&&++d===r&&(u=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nf=!1,xl=t;null!==xl;)if(e=(t=xl).child,1024&t.subtreeFlags&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(i=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=gs(n.type,o,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){cc(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{nu=s,M.p=o,I.T=r}}_u=1,rc(),oc(),ic()}}function rc(){if(1===_u){_u=0;var e=Pu,t=Eu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=I.T,I.T=null;var r=M.p;M.p=2;var o=nu;nu|=4;try{Il(t,e);var i=nd,a=er(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(a!==s&&s&&s.ownerDocument&&Jn(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var h=f.getSelection(),p=s.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!h.extend&&m>g&&(a=g,g=m,m=a);var v=Kn(s,m),y=Kn(s,g);if(v&&y&&(1!==h.rangeCount||h.anchorNode!==v.node||h.anchorOffset!==v.offset||h.focusNode!==y.node||h.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),h.removeAllRanges(),m>g?(h.addRange(b),h.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),h.addRange(b))}}}}for(d=[],h=s;h=h.parentNode;)1===h.nodeType&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var O=d[s];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}nf=!!td,nd=td=null}finally{nu=o,M.p=r,I.T=n}}e.current=t,_u=2}}function oc(){if(2===_u){_u=0;var e=Pu,t=Eu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=I.T,I.T=null;var r=M.p;M.p=2;var o=nu;nu|=4;try{kl(e,t.alternate,t)}finally{nu=o,M.p=r,I.T=n}}_u=3}}function ic(){if(4===_u||3===_u){_u=0,ee();var e=Pu,t=Eu,n=$u,r=ju;10256&t.subtreeFlags||10256&t.flags?_u=5:(_u=0,Eu=Pu=null,ac(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(ku=null),Te(n),t=t.stateNode,de&&"function"==typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=I.T,o=M.p,M.p=2,I.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];i(s.value,{componentStack:s.stack})}}finally{I.T=t,M.p=o}}3&$u&&sc(),Sc(e),o=e.pendingLanes,4194090&n&&42&o?e===Au?Nu++:(Nu=0,Au=e):Nu=0,xc(0,!1)}}function ac(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Mo(t)))}function sc(e){return rc(),oc(),ic(),lc()}function lc(){if(5!==_u)return!1;var e=Pu,t=Tu;Tu=0;var n=Te($u),r=I.T,o=M.p;try{M.p=32>n?32:n,I.T=null,n=Cu,Cu=null;var i=Pu,s=$u;if(_u=0,Eu=Pu=null,$u=0,6&nu)throw Error(a(331));var l=nu;if(nu|=4,Hl(i.current),Ul(i,i.current,s,n),nu=l,xc(0,!1),de&&"function"==typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,i)}catch(e){}return!0}finally{M.p=o,I.T=r,ac(e,t)}}function uc(e,t,n){t=kr(n,t),null!==(e=ai(e,t=xs(e.stateNode,t,2),2))&&(_e(e,2),Sc(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ku||!ku.has(r))){e=kr(n,e),null!==(r=ai(t,n=ks(2),2))&&(_s(n,r,t,e),_e(r,2),Sc(r));break}}t=t.return}}function dc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(cu=!0,o.add(n),e=fc.bind(null,e,t,n),t.then(e,e))}function fc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(iu&n)===n&&(4===fu||3===fu&&(62914560&iu)===iu&&300>te()-wu?!(2&nu)&&Uu(e,0):mu|=n,vu===iu&&(vu=0)),Sc(e)}function hc(e,t){0===t&&(t=xe()),null!==(e=jr(e,t))&&(_e(e,t),Sc(e))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),hc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),hc(e,n)}var gc=null,vc=null,yc=!1,bc=!1,Oc=!1,wc=0;function Sc(e){e!==vc&&null===e.next&&(null===vc?gc=vc=e:vc=vc.next=e),bc=!0,yc||(yc=!0,dd(function(){6&nu?H(re,kc):_c()}))}function xc(e,t){if(!Oc&&bc){Oc=!0;do{for(var n=!1,r=gc;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var a=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-he(42|e)+1)-1,i=201326741&(i&=o&~(a&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,$c(r,i))}else i=iu,!(3&(i=be(r,r===ru?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Oe(r,i)||(n=!0,$c(r,i));r=r.next}}while(n);Oc=!1}}function kc(){_c()}function _c(){bc=yc=!1;var e=0;0!==wc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=wc),wc=0);for(var t=te(),n=null,r=gc;null!==r;){var o=r.next,i=Pc(r,t);0===i?(r.next=null,null===n?gc=o:n.next=o,null===o&&(vc=n)):(n=r,(0!==e||3&i)&&(bc=!0)),r=o}xc(e,!1)}function Pc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-he(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=we(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(n=iu,n=be(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===au||9===au)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&K(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Oe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&K(r),Te(n)){case 2:case 8:n=oe;break;case 32:default:n=ie;break;case 268435456:n=se}return r=Ec.bind(null,e),n=H(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&K(r),e.callbackPriority=2,e.callbackNode=null,2}function Ec(e,t){if(0!==_u&&5!==_u)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sc()&&e.callbackNode!==n)return null;var r=iu;return 0===(r=be(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ru(e,r,t),Pc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ec.bind(null,e):null)}function $c(e,t){if(sc())return null;Ru(e,t,!0)}function Tc(){return 0===wc&&(wc=Se()),wc}function Cc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Tt(""+e)}function jc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Nc=0;Nc<wr.length;Nc++){var Ac=wr[Nc];Sr(Ac.toLowerCase(),"on"+(Ac[0].toUpperCase()+Ac.slice(1)))}Sr(hr,"onAnimationEnd"),Sr(pr,"onAnimationIteration"),Sr(mr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(gr,"onTransitionRun"),Sr(vr,"onTransitionStart"),Sr(yr,"onTransitionCancel"),Sr(br,"onTransitionEnd"),We("onMouseEnter",["mouseout","mouseover"]),We("onMouseLeave",["mouseout","mouseover"]),We("onPointerEnter",["pointerout","pointerover"]),We("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function Dc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=u;try{i(o)}catch(e){vs(e)}o.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=u;try{i(o)}catch(e){vs(e)}o.currentTarget=null,i=l}}}}function Rc(e,t){var n=t[Me];void 0===n&&(n=t[Me]=new Set);var r=e+"__bubble";n.has(r)||(Zc(t,e,2,!1),n.add(r))}function Qc(e,t,n){var r=0;t&&(r|=4),Zc(n,e,r,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Lc(e){if(!e[zc]){e[zc]=!0,Be.forEach(function(t){"selectionchange"!==t&&(Mc.has(t)||Qc(t,!1,e),Qc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zc]||(t[zc]=!0,Qc("selectionchange",!1,t))}}function Zc(e,t,n,r){switch(cf(t)){case 2:var o=rf;break;case 8:o=of;break;default:o=af}n=o.bind(null,t,n,e),o=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Fc(e,t,n,r,o){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&a.stateNode.containerInfo===o)return;a=a.return}for(;null!==s;){if(null===(a=Ze(s)))return;if(5===(u=a.tag)||6===u||26===u||27===u){r=i=a;continue e}s=s.parentNode}}r=r.return}Dt(function(){var r=i,o=jt(n),a=[];e:{var s=Or.get(e);if(void 0!==s){var u=Jt,c=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":u=mn;break;case"focusin":c="focus",u=an;break;case"focusout":c="blur",u=an;break;case"beforeblur":case"afterblur":u=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=vn;break;case hr:case pr:case mr:u=sn;break;case br:u=yn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=gn;break;case"toggle":case"beforetoggle":u=On}var d=!!(4&t),f=!d&&("scroll"===e||"scrollend"===e),h=d?null!==s?s+"Capture":null:s;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===h||null!=(g=Rt(m,h))&&d.push(Uc(m,g,p)),f)break;m=m.return}0<d.length&&(s=new u(s,c,null,n,o),a.push({event:s,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ct||!(c=n.relatedTarget||n.fromElement)||!Ze(c)&&!c[Ie])&&(u||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ze(c):null)&&(f=l(c),d=c.tag,c!==f||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=rn,g="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",h="onPointerEnter",m="pointer"),f=null==u?s:Ue(u),p=null==c?s:Ue(c),(s=new d(g,m+"leave",u,n,o)).target=f,s.relatedTarget=p,g=null,Ze(o)===r&&((d=new d(h,m+"enter",c,n,o)).target=p,d.relatedTarget=f,g=d),f=g,u&&c)e:{for(h=c,m=0,p=d=u;p;p=Gc(p))m++;for(p=0,g=h;g;g=Gc(g))p++;for(;0<m-p;)d=Gc(d),m--;for(;0<p-m;)h=Gc(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gc(d),h=Gc(h)}d=null}else d=null;null!==u&&Bc(a,s,u,d,!1),null!==c&&null!==f&&Bc(a,f,c,d,!0)}if("select"===(u=(s=r?Ue(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Qn;else if(Nn(s))if(zn)v=Yn;else{v=Bn;var y=Gn}else!(u=s.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Pt(r.elementType)&&(v=Qn):v=Xn;switch(v&&(v=v(e,r))?An(a,v,n,o):(y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&yt(s,"number",s.value)),y=r?Ue(r):window,e){case"focusin":(Nn(y)||"true"===y.contentEditable)&&(rr=y,or=r,ir=null);break;case"focusout":ir=or=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,o);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,o)}var b;if(Sn)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Cn?$n(e,n)&&(O="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(O="onCompositionStart");O&&(_n&&"ko"!==n.locale&&(Cn||"onCompositionStart"!==O?"onCompositionEnd"===O&&Cn&&(b=Vt()):(Ft="value"in(Zt=o)?Zt.value:Zt.textContent,Cn=!0)),0<(y=Vc(r,O)).length&&(O=new un(O,e,null,n,o),a.push({event:O,listeners:y}),b?O.data=b:null!==(b=Tn(n))&&(O.data=b))),(b=kn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(En=!0,Pn);case"textInput":return(e=t.data)===Pn&&En?null:e;default:return null}}(e,n):function(e,t){if(Cn)return"compositionend"===e||!Sn&&$n(e,t)?(e=Vt(),Ut=Ft=Zt=null,Cn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(O=Vc(r,"onBeforeInput")).length&&(y=new un("onBeforeInput","beforeinput",null,n,o),a.push({event:y,listeners:O}),y.data=b)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=Cc((o[Ae]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ae]||null)?Cc(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var s=new Jt("action","action",null,r,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wc){var e=a?jc(o,a):new FormData(o);ja(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"==typeof i&&(s.preventDefault(),e=a?jc(o,a):new FormData(o),ja(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(a,e,r,n,o)}Dc(a,t)})}function Uc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vc(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=Rt(e,n))&&r.unshift(Uc(e,o,i)),null!=(o=Rt(e,t))&&r.push(Uc(e,o,i))),3===e.tag)return r;e=e.return}return[]}function Gc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Bc(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,o?null!=(u=Rt(n,i))&&a.unshift(Uc(n,u,l)):o||null!=(u=Rt(n,i))&&a.push(Uc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xc=/\r\n?/g,Yc=/\u0000|\uFFFD/g;function Wc(e){return("string"==typeof e?e:""+e).replace(Xc,"\n").replace(Yc,"")}function qc(e,t){return t=Wc(t),Wc(e)===t}function Hc(){}function Kc(e,t,n,r,o,i){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===n?("input"!==t&&Kc(e,t,"name",o.name,o,null),Kc(e,t,"formEncType",o.formEncType,o,null),Kc(e,t,"formMethod",o.formMethod,o,null),Kc(e,t,"formTarget",o.formTarget,o,null)):(Kc(e,t,"encType",o.encType,o,null),Kc(e,t,"method",o.method,o,null),Kc(e,t,"target",o.target,o,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Hc);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Rc("beforetoggle",e),Rc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,r)}}function Jc(e,t,n,r,o,i){switch(n){case"style":_t(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"==typeof r?St(e,r):("number"==typeof r||"bigint"==typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Xe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(i=null!=(i=e[Ae]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!=typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rc("error",e),Rc("load",e);var r,o=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Kc(e,t,r,s,n,null)}}return i&&Kc(e,t,"srcSet",n.srcSet,n,null),void(o&&Kc(e,t,"src",n.src,n,null));case"input":Rc("invalid",e);var l=r=s=i=null,u=null,c=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Kc(e,t,o,d,n,null)}}return vt(e,r,l,u,c,s,i,!1),void dt(e);case"select":for(i in Rc("invalid",e),o=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":o=l;default:Kc(e,t,i,l,n,null)}return t=r,n=s,e.multiple=!!o,void(null!=t?bt(e,!!o,t,!1):null!=n&&bt(e,!!o,n,!0));case"textarea":for(s in Rc("invalid",e),r=i=o=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":o=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Kc(e,t,s,l,n,null)}return wt(e,o,i,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))if("selected"===u)e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o;else Kc(e,t,u,o,n,null);return;case"dialog":Rc("beforetoggle",e),Rc("toggle",e),Rc("cancel",e),Rc("close",e);break;case"iframe":case"object":Rc("load",e);break;case"video":case"audio":for(o=0;o<Ic.length;o++)Rc(Ic[o],e);break;case"image":Rc("error",e),Rc("load",e);break;case"details":Rc("toggle",e);break;case"embed":case"source":case"link":Rc("error",e),Rc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Kc(e,t,c,o,n,null)}return;default:if(Pt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&Jc(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&Kc(e,t,l,o,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function od(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ld="function"==typeof setTimeout?setTimeout:void 0,ud="function"==typeof clearTimeout?clearTimeout:void 0,cd="function"==typeof Promise?Promise:void 0,dd="function"==typeof queueMicrotask?queueMicrotask:void 0!==cd?function(e){return cd.resolve(null).then(e).catch(fd)}:ld;function fd(e){setTimeout(function(){throw e})}function hd(e){return"head"===e}function pd(e,t){var n=t,r=0,o=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&wd(a.documentElement),2&n&&wd(a.body),4&n)for(wd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[ze]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===o)return e.removeChild(i),void $f(t);o--}else"$"===n||"$?"===n||"$!"===n?o++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);$f(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),Le(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Od(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Le(e)}var Sd=new Map,xd=new Set;function kd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=M.d;M.d={f:function(){var e=_d.f(),t=Zu();return e||t},r:function(e){var t=Fe(e);null!==t&&5===t.tag&&"form"===t.type?Aa(t):_d.r(e)},D:function(e){_d.D(e),Ed("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Ed("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=Pd;if(r&&e&&t){var o='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(o+='[imagesizes="'+mt(n.imageSizes)+'"]')):o+='[href="'+mt(e)+'"]';var i=o;switch(t){case"style":i=Td(e);break;case"script":i=Nd(e)}Sd.has(i)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Cd(i))||"script"===t&&r.querySelector(Ad(i))||(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=Pd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Nd(e)}if(!Sd.has(i)&&(e=f({rel:"modulepreload",href:e},t),Sd.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ad(i)))return}ed(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=Pd;if(n&&e){var r=Ve(n).hoistableScripts,o=Nd(e),i=r.get(o);i||((i=n.querySelector(Ad(o)))||(e=f({src:e,async:!0},t),(t=Sd.get(o))&&Rd(e,t),Ge(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){_d.S(e,t,n);var r=Pd;if(r&&e){var o=Ve(r).hoistableStyles,i=Td(e);t=t||"default";var a=o.get(i);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Cd(i)))s.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(i))&&Dd(e,n);var l=a=r.createElement("link");Ge(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Md(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},o.set(i,a)}}},M:function(e,t){_d.M(e,t);var n=Pd;if(n&&e){var r=Ve(n).hoistableScripts,o=Nd(e),i=r.get(o);i||((i=n.querySelector(Ad(o)))||(e=f({src:e,async:!0,type:"module"},t),(t=Sd.get(o))&&Rd(e,t),Ge(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var Pd="undefined"==typeof document?null:document;function Ed(e,t,n){var r=Pd;if(r&&"string"==typeof t&&t){var o=mt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"==typeof n&&(o+='[crossorigin="'+n+'"]'),xd.has(o)||(xd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function $d(e,t,n,r){var o,i,s,l,u=(u=V.current)?kd(u):null;if(!u)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Td(n.href),(r=(n=Ve(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Td(n.href);var c=Ve(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Cd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),c||(o=u,i=e,s=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=o.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ed(i,"link",s),Ge(i),o.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Nd(n),(r=(n=Ve(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Td(e){return'href="'+mt(e)+'"'}function Cd(e){return'link[rel="stylesheet"]['+e+"]"}function jd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Nd(e){return'[src="'+mt(e)+'"]'}function Ad(e){return"script[async]"+e}function Id(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var o=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",o),Md(r,n.precedence,e),t.instance=r;case"stylesheet":o=Td(n.href);var i=e.querySelector(Cd(o));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;r=jd(n),(o=Sd.get(o))&&Dd(r,o),Ge(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(i,"link",r),t.state.loading|=4,Md(i,n.precedence,e),t.instance=i;case"script":return i=Nd(n.src),(o=e.querySelector(Ad(i)))?(t.instance=o,Ge(o),o):(r=n,(o=Sd.get(i))&&Rd(r=f({},n),o),Ge(o=(e=e.ownerDocument||e).createElement("script")),ed(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Md(r,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)i=s;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Rd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Qd=null;function zd(e,t,n){if(null===Qd){var r=new Map,o=Qd=new Map;o.set(n,r)}else(r=(o=Qd).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[ze]||i[Ne]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(i):r.set(a,[i])}}return r}function Ld(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Zd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Fd=null;function Ud(){}function Vd(){if(this.count--,0===this.count)if(this.stylesheets)Bd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Bd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Xd,e),Gd=null,Vd.call(e))}function Xd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var a=o[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(o=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,o),n.set(a,o),this.count++,r=Vd.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Wd(e,t,n,r,o,i,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function qd(e,t,n,r,o,i,a,s,l,u,c,d){return e=new Wd(e,t,n,a,s,l,u,d),t=1,!0===i&&(t|=24),i=Dr(3,null,null,t),e.current=i,i.stateNode=e,(t=Io()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ri(i),e}function Hd(e){return e?e=Ir:Ir}function Kd(e,t,n,r,o,i){o=Hd(o),null===r.context?r.context=o:r.pendingContext=o,(r=ii(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ai(e,r,t))&&(Du(n,0,t),si(n,e,t))}function Jd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ef(e,t){Jd(e,t),(e=e.alternate)&&Jd(e,t)}function tf(e){if(13===e.tag){var t=jr(e,67108864);null!==t&&Du(t,0,67108864),ef(e,67108864)}}var nf=!0;function rf(e,t,n,r){var o=I.T;I.T=null;var i=M.p;try{M.p=2,af(e,t,n,r)}finally{M.p=i,I.T=o}}function of(e,t,n,r){var o=I.T;I.T=null;var i=M.p;try{M.p=8,af(e,t,n,r)}finally{M.p=i,I.T=o}}function af(e,t,n,r){if(nf){var o=sf(r);if(null===o)Fc(e,t,r,lf,n),bf(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return ff=Of(ff,e,t,n,r,o),!0;case"dragenter":return hf=Of(hf,e,t,n,r,o),!0;case"mouseover":return pf=Of(pf,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return mf.set(i,Of(mf.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,gf.set(i,Of(gf.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(bf(e,r),4&t&&-1<yf.indexOf(e)){for(;null!==o;){var i=Fe(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ye(i.pendingLanes);if(0!==a){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-he(a);s.entanglements[1]|=l,a&=~l}Sc(i),!(6&nu)&&(Su=te()+500,xc(0,!1))}}break;case 13:null!==(s=jr(i,2))&&Du(s,0,2),Zu(),ef(i,2)}if(null===(i=sf(r))&&Fc(e,t,r,lf,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Fc(e,t,r,null,n)}}function sf(e){return uf(e=jt(e))}var lf=null;function uf(e){if(lf=null,null!==(e=Ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lf=e,null}function cf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case oe:return 8;case ie:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var df=!1,ff=null,hf=null,pf=null,mf=new Map,gf=new Map,vf=[],yf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bf(e,t){switch(e){case"focusin":case"focusout":ff=null;break;case"dragenter":case"dragleave":hf=null;break;case"mouseover":case"mouseout":pf=null;break;case"pointerover":case"pointerout":mf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(t.pointerId)}}function Of(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Fe(t))&&tf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function wf(e){var t=Ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}(e.priority,function(){if(13===n.tag){var e=Iu();e=$e(e);var t=jr(n,e);null!==t&&Du(t,0,e),ef(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sf(e.nativeEvent);if(null!==n)return null!==(t=Fe(n))&&tf(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ct=r,n.target.dispatchEvent(r),Ct=null,t.shift()}return!0}function xf(e,t,n){Sf(e)&&n.delete(t)}function kf(){df=!1,null!==ff&&Sf(ff)&&(ff=null),null!==hf&&Sf(hf)&&(hf=null),null!==pf&&Sf(pf)&&(pf=null),mf.forEach(xf),gf.forEach(xf)}function _f(e,t){e.blockedOn===t&&(e.blockedOn=null,df||(df=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kf)))}var Pf=null;function Ef(e){Pf!==e&&(Pf=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Pf===e&&(Pf=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!=typeof r){if(null===uf(r||n))continue;break}var i=Fe(n);null!==i&&(e.splice(t,3),t-=3,ja(i,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function $f(e){function t(t){return _f(t,e)}null!==ff&&_f(ff,e),null!==hf&&_f(hf,e),null!==pf&&_f(pf,e),mf.forEach(t),gf.forEach(t);for(var n=0;n<vf.length;n++){var r=vf[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vf.length&&null===(n=vf[0]).blockedOn;)wf(n),null===n.blockedOn&&vf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],a=o[Ae]||null;if("function"==typeof i)a||Ef(n);else if(a){var s=null;if(i&&i.hasAttribute("formAction")){if(o=i,a=i[Ae]||null)s=a.formAction;else if(null!==uf(o))continue}else s=a.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Ef(n)}}}function Tf(e){this._internalRoot=e}function Cf(e){this._internalRoot=e}Cf.prototype.render=Tf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kd(t.current,Iu(),e,t,null,null)},Cf.prototype.unmount=Tf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Kd(e.current,2,null,e,null,null),Zu(),t[Ie]=null}},Cf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ce();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vf.length&&0!==t&&t<vf[n].priority;n++);vf.splice(n,0,e),0===n&&wf(e)}};var jf=o.version;if("19.1.1"!==jf)throw Error(a(527,jf,"19.1.1"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return c(o),e;if(i===r)return c(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Nf={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{ce=Af.inject(Nf),de=Af}catch(e){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",o=ys,i=bs,l=Os;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=qd(e,1,!1,null,0,n,r,o,i,l,0,null),e[Ie]=t.current,Lc(e),new Tf(t)}},261:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var i=o(n(871)),a=r(n(613)),s=r(n(769)),l=o(n(849)),u=o(n(624)),c=r(n(148));function d(){var e=new i.HandlebarsEnvironment;return l.extend(e,i),e.SafeString=a.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var f=d();f.create=d,c.default(f),f.default=f,t.default=f,e.exports=t.default},277:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){o.default(e),i.default(e),a.default(e),s.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var o=r(n(97)),i=r(n(785)),a=r(n(353)),s=r(n(355)),l=r(n(300)),u=r(n(466)),c=r(n(908))},300:(e,t)=>{t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),t[0]=o,e.log.apply(e,t)})},e.exports=t.default},338:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(247)},350:(e,t,n)=>{t.__esModule=!0;var r,o=n(769),i=(r=o)&&r.__esModule?r:{default:r};function a(){this.parents=[]}function s(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function l(e){s.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function u(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}a.prototype={constructor:a,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!a.prototype[n.type])throw new i.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new i.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new i.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:s,Decorator:s,BlockStatement:l,DecoratorBlock:l,PartialStatement:u,PartialBlockStatement:function(e){u.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:s,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=a,e.exports=t.default},353:(e,t,n)=>{t.__esModule=!0;var r,o=n(769),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},355:(e,t,n)=>{t.__esModule=!0;var r,o=n(849),i=n(769),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new a.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){if(2!=arguments.length)throw new a.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},425:(e,t,n)=>{t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",o=[],a=0,s=0,l=t.length;s<l;s++){var u=t[s].part,c=t[s].original!==u;if(r+=(t[s].separator||"")+u,c||".."!==u&&"."!==u&&"this"!==u)o.push(u);else{if(o.length>0)throw new i.default("Invalid path: "+r,{loc:n});".."===u&&a++}}return{type:"PathExpression",data:e,depth:a,parts:o,original:r,loc:n}},t.prepareMustache=function(e,t,n,r,o,i){var a=r.charAt(3)||r.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:s,strip:o,loc:this.locInfo(i)}},t.prepareRawBlock=function(e,t,n,r){a(e,n),r=this.locInfo(r);var o={type:"Program",body:t,strip:{},loc:r};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}},t.prepareBlock=function(e,t,n,r,o,s){r&&r.path&&a(e,r);var l=/\*/.test(e.open);t.blockParams=e.blockParams;var u=void 0,c=void 0;if(n){if(l)throw new i.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),c=n.strip,u=n.program}o&&(o=u,u=t,t=o);return{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:u,openStrip:e.strip,inverseStrip:c,closeStrip:r&&r.strip,loc:this.locInfo(s)}},t.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,r=e[e.length-1].loc;n&&r&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,n,r){return a(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}};var r,o=n(769),i=(r=o)&&r.__esModule?r:{default:r};function a(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new i.default(e.path.original+" doesn't match "+t,n)}}},430:(e,t,n)=>{t.__esModule=!0;var r=n(849);t.default=function(e){e.registerDecorator("inline",function(e,t,n,o){var i=e;return t.partials||(t.partials={},i=function(o,i){var a=n.partials;n.partials=r.extend({},a,t.partials);var s=e(o,i);return n.partials=a,s}),t.partials[o.args[0]]=o.fn,i})},e.exports=t.default},466:(e,t)=>{t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,n){return e?n.lookupProperty(e,t):e})},e.exports=t.default},477:(e,t)=>{
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>i(l,n))u<o&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<o&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,O="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,k||(k=!0,x());else{var t=r(c);null!==t&&N(S,t.startTime-e)}}var x,k=!1,_=-1,P=5,E=-1;function $(){return!!v||!(t.unstable_now()-E<P)}function T(){if(v=!1,k){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(_),_=-1),p=!0;var i=h;try{t:{for(w(e),f=r(u);null!==f&&!(f.expirationTime>e&&$());){var a=f.callback;if("function"==typeof a){f.callback=null,h=f.priorityLevel;var s=a(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof s){f.callback=s,w(e),n=!0;break t}f===r(u)&&o(u),w(e)}else o(u);f=r(u)}if(null!==f)n=!0;else{var l=r(c);null!==l&&N(S,l.startTime-e),n=!1}}break e}finally{f=null,h=i,p=!1}n=void 0}}finally{n?x():k=!1}}}if("function"==typeof O)x=function(){O(T)};else if("undefined"!=typeof MessageChannel){var C=new MessageChannel,j=C.port2;C.port1.onmessage=T,x=function(){j.postMessage(null)}}else x=function(){y(T,0)};function N(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"==typeof i&&null!==i?i="number"==typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(c,e),null===r(u)&&e===r(c)&&(g?(b(_),_=-1):g=!0,N(S,i-a))):(e.sortIndex=s,n(u,e),m||p||(m=!0,k||(k=!0,x()))),e},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},493:(e,t,n)=>{
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return s(function(){o.value=n,o.getSnapshot=t,u(o)&&c({inst:o})},[e,n,t]),a(function(){return u(o)&&c({inst:o}),e(function(){u(o)&&c({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},540:(e,t,n)=>{e.exports=n(869)},566:(e,t,n)=>{t.__esModule=!0;var r=n(849),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console[t].apply(console,r)}}};t.default=o,e.exports=t.default},613:(e,t)=>{function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},614:(e,t)=>{t.__esModule=!0,t.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},624:(e,t,n)=>{t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t>=s.LAST_COMPATIBLE_COMPILER_REVISION&&t<=s.COMPILER_REVISION)return;if(t<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[n],o=s.REVISION_CHANGES[t];throw new a.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+o+").")}throw new a.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new a.default("No environment passed to template");if(!e||!e.main)throw new a.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!e||!(t in e))throw new a.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||c.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,o=0;o<n;o++){if(null!=(e[o]&&r.lookupProperty(e[o],t)))return e[o][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:o.escapeExpression,invokePartial:function(n,r,i){i.hash&&(r=o.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,i);var s=o.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,r,s);if(null==l&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),l=i.partials[i.name](r,s)),null!=l){if(i.indent){for(var u=l.split("\n"),c=0,d=u.length;c<d&&(u[c]||c+1!==d);c++)u[c]=i.indent+u[c];l=u.join("\n")}return l}throw new a.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,o){var i=this.programs[e],a=this.fn(e);return t||o||r||n?i=d(this,e,a,t,n,r,o):i||(i=this.programs[e]=d(this,e,a)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=o.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function i(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=n.data;i._setup(n),!n.partial&&e.useData&&(o=function(e,t){t&&"root"in t||((t=t?s.createFrame(t):{}).root=e);return t}(t,o));var a=void 0,l=e.useBlockParams?[]:void 0;function u(t){return""+e.main(r,t,r.helpers,r.partials,o,l,a)}return e.useDepths&&(a=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(u=h(e.main,u,r,n.depths||[],o,l))(t,n)}return i.isTop=!0,i._setup=function(i){if(i.partial)r.protoAccessControl=i.protoAccessControl,r.helpers=i.helpers,r.partials=i.partials,r.decorators=i.decorators,r.hooks=i.hooks;else{var a=o.extend({},t.helpers,i.helpers);!function(e,t){Object.keys(e).forEach(function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return u.wrapHelper(e,function(e){return o.extend({lookupProperty:n},e)})}(r,t)})}(a,r),r.helpers=a,e.usePartial&&(r.partials=r.mergeIfNeeded(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=o.extend({},t.decorators,i.decorators)),r.hooks={},r.protoAccessControl=c.createProtoAccessControl(i);var s=i.allowCallsToHelperMissing||n;l.moveHelperToHooks(r,"helperMissing",s),l.moveHelperToHooks(r,"blockHelperMissing",s)}},i._child=function(t,n,o,i){if(e.useBlockParams&&!o)throw new a.default("must pass block params");if(e.useDepths&&!i)throw new a.default("must pass parent depths");return d(r,t,e[t],n,0,o,i)},i},t.wrapProgram=d,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;n.fn&&n.fn!==f&&function(){n.data=s.createFrame(n.data);var e=n.fn;i=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=o.extend({},n.partials,e.partials))}();void 0===e&&i&&(e=i);if(void 0===e)throw new a.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=f;var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(849)),i=n(769),a=(r=i)&&r.__esModule?r:{default:r},s=n(871),l=n(277),u=n(614),c=n(865);function d(e,t,n,r,o,i,a){function s(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),n(e,t,e.helpers,e.partials,o.data||r,i&&[o.blockParams].concat(i),s)}return(s=h(n,s,e,a,r,i)).program=t,s.depth=a?a.length:0,s.blockParams=o||0,s}function f(){return""}function h(e,t,n,r,i,a){if(e.decorator){var s={};t=e.decorator(t,s,n,r&&r[0],i,a,r),o.extend(t,s)}return t}},632:(e,t,n)=>{t.__esModule=!0;var r=n(849),o=void 0;try{}catch(e){}function i(e,t,n){if(r.isArray(e)){for(var o=[],i=0,a=e.length;i<a;i++)o.push(t.wrap(e[i],n));return o}return"boolean"==typeof e||"number"==typeof e?e+"":e}function a(e){this.srcFile=e,this.source=[]}o||((o=function(e,t,n,r){this.src="",r&&this.add(r)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new o(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof o?e:(e=i(e,this,t),new o(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach(function(r){var o=i(e[r],t);"undefined"!==o&&n.push([t.quotedString(r),":",o])});var r=this.generateList(n);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),n=0,r=e.length;n<r;n++)n&&t.add(","),t.add(i(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=a,e.exports=t.default},639:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(n(261)),i=r(n(919)),a=n(27),s=n(127),l=r(n(727)),u=r(n(350)),c=r(n(148)),d=o.default.create;function f(){var e=d();return e.compile=function(t,n){return s.compile(t,n,e)},e.precompile=function(t,n){return s.precompile(t,n,e)},e.AST=i.default,e.Compiler=s.Compiler,e.JavaScriptCompiler=l.default,e.Parser=a.parser,e.parse=a.parse,e.parseWithoutProcessing=a.parseWithoutProcessing,e}var h=f();h.create=f,c.default(h),h.Visitor=u.default,h.default=h,t.default=h,e.exports=t.default},698:(e,t)=>{
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},726:(e,t,n)=>{t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=n(849)},727:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(871),i=r(n(769)),a=n(849),s=r(n(632));function l(e){this.value=e}function u(){}u.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=o.COMPILER_REVISION;return[e,o.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return a.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,a=void 0,s=void 0,l=void 0,u=void 0;for(l=0,u=o.length;l<u;l++)a=o[l],this.source.currentLocation=a.loc,s=s||a.loc,this[a.opcode].apply(this,a.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(r);if(this.isChild)return c;var d={compiler:this.compilerInfo(),main:c};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var f=this.context,h=f.programs,p=f.decorators;for(l=0,u=h.length;l<u;l++)h[l]&&(d[l]=h[l],p[l]&&(d[l+"_d"]=p[l],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),r?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new s.default(this.options.srcName),this.decorators=new s.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",r=this.stackVars.concat(this.registers.list);r.length>0&&(n+=", "+r.join(", "));var o=0;Object.keys(this.aliases).forEach(function(e){var r=t.aliases[e];r.children&&r.referenceCount>1&&(n+=", alias"+ ++o+"="+e,r.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var i=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths");var a=this.mergeSource(n);return e?(i.push(a),Function.apply(this,i)):this.source.wrap(["function(",i.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,o=void 0,i=void 0,a=void 0;return this.source.each(function(e){e.appendToBuffer?(i?e.prepend("  + "):i=e,a=e):(i&&(o?i.prepend("buffer += "):r=!0,a.add(";"),i=a=void 0),o=!0,t||(n=!1))}),n?i?(i.prepend("return "),a.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),i?(i.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,r){var o=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,r,o){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,r,o){var i=t.popStack(),a=n.length;e&&a--;for(;r<a;r++)i=t.nameLookup(i,n[r],o);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(n[r]),", ",JSON.stringify(t.source.currentLocation)," )"]:i}(this.options.strict&&o,this,t,n,e));else for(var a=t.length;n<a;n++)this.replaceStack(function(o){var a=i.nameLookup(o,t[n],e);return r?[" && ",a]:[" != null ? ",a," : ",o]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,n){var r=this.popStack(),o=this.setupHelper(e,t),i=[];n&&i.push(o.name),i.push(r),this.options.strict||i.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(i,"||"),")"],s=this.source.functionCall(a,"call",o.callParams);this.push(s)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var r=1;r<e.length;r++)n.push(t,e[r]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),o=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],o=this.setupParams(t,1,r);e&&(t=this.popStack(),delete o.name),n&&(o.indent=JSON.stringify(n)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),r.push(o),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&(i.contexts[e]=n),r&&(i.types[e]=r),o&&(i.ids[e]=o),i.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(e,t){for(var n=e.children,r=void 0,o=void 0,i=0,a=n.length;i<a;i++){r=n[i],o=new this.compiler;var s=this.matchExistingProgram(r);if(null==s){this.context.programs.push("");var l=this.context.programs.length;r.index=l,r.name="program"+l,this.context.programs[l]=o.compile(r,t,this.context,!this.precompile),this.context.decorators[l]=o.decorators,this.context.environments[l]=r,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=s.index,r.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof l||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new l(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,o=void 0;if(!this.isInline())throw new i.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof l)t=["(",n=[a.value]],o=!0;else{r=!0;var s=this.incrStack();t=["((",this.push(s)," = ",a,")"],n=this.topStack()}var u=e.call(this,n);o||this.popStack(),r&&this.stackSlot--,this.push(t.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof l)this.compileStack.push(r);else{var o=this.incrStack();this.pushSource([o," = ",r,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof l)return n.value;if(!t){if(!this.stackSlot)throw new i.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof l?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[];return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(e,t,n){var r={},o=[],i=[],a=[],s=!n,l=void 0;s&&(n=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(r.fn=c||"container.noop",r.inverse=u||"container.noop");for(var d=t;d--;)l=this.popStack(),n[d]=l,this.trackIds&&(a[d]=this.popStack()),this.stringParams&&(i[d]=this.popStack(),o[d]=this.popStack());return s&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(a)),this.stringParams&&(r.types=this.source.generateArray(i),r.contexts=this.source.generateArray(o)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var o=this.setupParams(e,t,n);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),r?(this.useRegister("options"),n.push("options"),["options=",o]):n?(n.push(o),""):o}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=u.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=u,e.exports=t.default},769:(e,t)=>{t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){var o=t&&t.loc,i=void 0,a=void 0,s=void 0,l=void 0;o&&(i=o.start.line,a=o.end.line,s=o.start.column,l=o.end.column,e+=" - "+i+":"+s);for(var u=Error.prototype.constructor.call(this,e),c=0;c<n.length;c++)this[n[c]]=u[n[c]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{o&&(this.lineNumber=i,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=s,this.endColumn=l))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},785:(e,t,n)=>{t.__esModule=!0;var r,o=n(849),i=n(769),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var n,r=t.fn,i=t.inverse,s=0,l="",u=void 0,c=void 0;function d(t,n,i){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!i,c&&(u.contextPath=c+t)),l+=r(e[t],{data:u,blockParams:o.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),o.isFunction(e)&&(e=e.call(this)),t.data&&(u=o.createFrame(t.data)),e&&"object"==typeof e)if(o.isArray(e))for(var f=e.length;s<f;s++)s in e&&d(s,s,s===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var h=[],p=e[Symbol.iterator](),m=p.next();!m.done;m=p.next())h.push(m.value);for(f=(e=h).length;s<f;s++)d(s,s,s===e.length-1)}else n=void 0,Object.keys(e).forEach(function(e){void 0!==n&&d(n,s-1),n=e,s++}),void 0!==n&&d(n,s-1,!0);return 0===s&&(l=i(this)),l})},e.exports=t.default},848:(e,t,n)=>{e.exports=n(698)},849:(e,t)=>{t.__esModule=!0,t.extend=a,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!o.test(e))return e;return e.replace(r,i)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=a({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,o=/[&<>"'`=]/;function i(e){return n[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var s=Object.prototype.toString;t.toString=s;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};t.isArray=u},865:(e,t,n)=>{t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:o.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:o.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return l("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(s).forEach(function(e){delete s[e]})};var r,o=n(726),i=n(566),a=(r=i)&&r.__esModule?r:{default:r},s=Object.create(null);function l(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==s[e]&&(s[e]=!0,a.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},869:(e,t)=>{
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var O=b.prototype=new y;O.constructor=b,m(O,v.prototype),O.isPureReactComponent=!0;var w=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function k(e,t,r,o,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function $(){}function T(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case f:return T((c=e._init)(e._payload),t,o,i,a)}}if(c)return a=a(e),c=""===i?"."+E(e,0):i,w(a)?(o="",null!=c&&(o=c.replace(P,"$&/")+"/"),T(a,t,o,"",function(e){return e})):null!=a&&(_(a)&&(l=a,u=o+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+c,a=k(l.type,u,void 0,0,0,l.props)),t.push(a)),1;c=0;var d,p=""===i?".":i+":";if(w(e))for(var m=0;m<e.length;m++)c+=T(i=e[m],t,o,s=p+E(i,m),a);else if("function"==typeof(m=null===(d=e)||"object"!=typeof d?null:"function"==typeof(d=h&&d[h]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)c+=T(i=i.value,t,o,s=p+E(i,m++),a);else if("object"===s){if("function"==typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then($,$):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function C(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",function(e){return t.call(n,e,o++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function A(){}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!x.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),s=0;s<i;s++)a[s]=arguments[s+2];r.children=a}return k(e.type,o,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)x.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];o.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===o[r]&&(o[r]=a[r]);return k(e,i,void 0,0,0,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),o=S.S;null!==o&&o(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(A,N)}catch(e){N(e)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},871:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=d;var o=n(849),i=r(n(769)),a=n(277),s=n(940),l=r(n(566)),u=n(865);t.VERSION="4.7.8";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function d(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},a.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}d.prototype={constructor:d,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(o.toString.call(e)===c){if(t)throw new i.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===c)o.extend(this.partials,e);else{if(void 0===t)throw new i.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===c){if(t)throw new i.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var f=l.default.log;t.log=f,t.createFrame=o.createFrame,t.logger=l.default},888:(e,t,n)=>{e.exports=n(493)},908:(e,t,n)=>{t.__esModule=!0;var r,o=n(849),i=n(769),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new a.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:o.blockParams([e],[r&&r.contextPath])})})},e.exports=t.default},915:(e,t,n)=>{t.__esModule=!0;var r,o=n(350),i=(r=o)&&r.__esModule?r:{default:r};function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function s(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],o=e[t-2];return r?"ContentStatement"===r.type?(o||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function l(e,t,n){void 0===t&&(t=-1);var r=e[t+1],o=e[t+2];return r?"ContentStatement"===r.type?(o||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function u(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var o=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==o}}function c(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var o=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==o,r.leftStripped}}a.prototype=new i.default,a.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,o=0,i=r.length;o<i;o++){var a=r[o],d=this.accept(a);if(d){var f=s(r,o,n),h=l(r,o,n),p=d.openStandalone&&f,m=d.closeStandalone&&h,g=d.inlineStandalone&&f&&h;d.close&&u(r,o,!0),d.open&&c(r,o,!0),t&&g&&(u(r,o),c(r,o)&&"PartialStatement"===a.type&&(a.indent=/([ \t]+$)/.exec(r[o-1].original)[1])),t&&p&&(u((a.program||a.inverse).body),c(r,o)),t&&m&&(u(r,o),c((a.inverse||a.program).body))}}return e},a.prototype.BlockStatement=a.prototype.DecoratorBlock=a.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,o=n;if(n&&n.chained)for(r=n.body[0].program;o.chained;)o=o.body[o.body.length-1].program;var i={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:l(t.body),closeStandalone:s((r||t).body)};if(e.openStrip.close&&u(t.body,null,!0),n){var a=e.inverseStrip;a.open&&c(t.body,null,!0),a.close&&u(r.body,null,!0),e.closeStrip.open&&c(o.body,null,!0),!this.options.ignoreStandalone&&s(t.body)&&l(r.body)&&(c(t.body),u(r.body))}else e.closeStrip.open&&c(t.body,null,!0);return i},a.prototype.Decorator=a.prototype.MustacheStatement=function(e){return e.strip},a.prototype.PartialStatement=a.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=a,e.exports=t.default},919:(e,t)=>{t.__esModule=!0;var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};t.default=n,e.exports=t.default},940:(e,t,n)=>{t.__esModule=!0,t.registerDefaultDecorators=function(e){i.default(e)};var r,o=n(430),i=(r=o)&&r.__esModule?r:{default:r}},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(221)},982:(e,t,n)=>{e.exports=n(477)}},v={};function y(e){var t=v[e];if(void 0!==t)return t.exports;var n=v[e]={exports:{}};return g[e](n,n.exports,y),n.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var n in t)y.o(t,n)&&!y.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var b={};y.r(b),y.d(b,{BIGINT_FORMAT_RANGES:()=>pm,Class:()=>Dm,NUMBER_FORMAT_RANGES:()=>hm,aborted:()=>Sm,allowsEval:()=>em,assert:()=>Ip,assertEqual:()=>Cp,assertIs:()=>Np,assertNever:()=>Ap,assertNotEqual:()=>jp,assignProp:()=>Gp,base64ToUint8Array:()=>Cm,base64urlToUint8Array:()=>Nm,cached:()=>Qp,captureStackTrace:()=>Kp,cleanEnum:()=>Tm,cleanRegex:()=>Lp,clone:()=>lm,cloneDef:()=>Xp,createTransparentProxy:()=>cm,defineLazy:()=>Up,esc:()=>Hp,escapeRegex:()=>sm,extend:()=>vm,finalizeIssue:()=>_m,floatSafeRemainder:()=>Zp,getElementAtPath:()=>Yp,getEnumValues:()=>Mp,getLengthableOrigin:()=>Em,getParsedType:()=>om,getSizableOrigin:()=>Pm,hexToUint8Array:()=>Im,isObject:()=>Jp,isPlainObject:()=>tm,issue:()=>$m,joinValues:()=>Dp,jsonStringifyReplacer:()=>Rp,merge:()=>bm,mergeDefs:()=>Bp,normalizeParams:()=>um,nullish:()=>zp,numKeys:()=>rm,objectClone:()=>Vp,omit:()=>gm,optionalKeys:()=>fm,partial:()=>Om,pick:()=>mm,prefixIssues:()=>xm,primitiveTypes:()=>am,promiseAllObject:()=>Wp,propertyKeyTypes:()=>im,randomString:()=>qp,required:()=>wm,safeExtend:()=>ym,shallowClone:()=>nm,stringifyPrimitive:()=>dm,uint8ArrayToBase64:()=>jm,uint8ArrayToBase64url:()=>Am,uint8ArrayToHex:()=>Mm,unwrapMessage:()=>km});var O={};y.r(O),y.d(O,{base64:()=>Lg,base64url:()=>Zg,bigint:()=>Hg,boolean:()=>ev,browserEmail:()=>Ag,cidrv4:()=>Qg,cidrv6:()=>zg,cuid:()=>mg,cuid2:()=>gg,date:()=>Bg,datetime:()=>Wg,domain:()=>Ug,duration:()=>wg,e164:()=>Vg,email:()=>$g,emoji:()=>Mg,extendedDuration:()=>Sg,guid:()=>xg,hex:()=>iv,hostname:()=>Fg,html5Email:()=>Tg,idnEmail:()=>Ng,integer:()=>Kg,ipv4:()=>Dg,ipv6:()=>Rg,ksuid:()=>bg,lowercase:()=>rv,md5_base64:()=>uv,md5_base64url:()=>cv,md5_hex:()=>lv,nanoid:()=>Og,null:()=>tv,number:()=>Jg,rfc5322Email:()=>Cg,sha1_base64:()=>fv,sha1_base64url:()=>hv,sha1_hex:()=>dv,sha256_base64:()=>mv,sha256_base64url:()=>gv,sha256_hex:()=>pv,sha384_base64:()=>yv,sha384_base64url:()=>bv,sha384_hex:()=>vv,sha512_base64:()=>wv,sha512_base64url:()=>Sv,sha512_hex:()=>Ov,string:()=>qg,time:()=>Yg,ulid:()=>vg,undefined:()=>nv,unicodeEmail:()=>jg,uppercase:()=>ov,uuid:()=>kg,uuid4:()=>_g,uuid6:()=>Pg,uuid7:()=>Eg,xid:()=>yg});var w={};y.r(w),y.d(w,{ar:()=>Ab,az:()=>Mb,be:()=>Qb,ca:()=>Lb,cs:()=>Fb,da:()=>Vb,de:()=>Bb,en:()=>Yb,eo:()=>qb,es:()=>Kb,fa:()=>eO,fi:()=>nO,fr:()=>oO,frCA:()=>aO,he:()=>lO,hu:()=>cO,id:()=>fO,is:()=>pO,it:()=>gO,ja:()=>yO,ka:()=>OO,kh:()=>xO,km:()=>SO,ko:()=>_O,lt:()=>CO,mk:()=>NO,ms:()=>IO,nl:()=>DO,no:()=>QO,ota:()=>LO,pl:()=>VO,ps:()=>FO,pt:()=>BO,ru:()=>WO,sl:()=>HO,sv:()=>JO,ta:()=>tw,th:()=>rw,tr:()=>iw,ua:()=>lw,uk:()=>sw,ur:()=>cw,vi:()=>fw,yo:()=>yw,zhCN:()=>pw,zhTW:()=>gw});var S={};y.r(S);var x={};y.r(x),y.d(x,{$ZodAny:()=>Ay,$ZodArray:()=>zy,$ZodAsyncError:()=>Pp,$ZodBase64:()=>yy,$ZodBase64URL:()=>Oy,$ZodBigInt:()=>$y,$ZodBigIntFormat:()=>Ty,$ZodBoolean:()=>Ey,$ZodCIDRv4:()=>my,$ZodCIDRv6:()=>gy,$ZodCUID:()=>oy,$ZodCUID2:()=>iy,$ZodCatch:()=>vb,$ZodCheck:()=>xv,$ZodCheckBigIntFormat:()=>Tv,$ZodCheckEndsWith:()=>Fv,$ZodCheckGreaterThan:()=>Pv,$ZodCheckIncludes:()=>Lv,$ZodCheckLengthEquals:()=>Mv,$ZodCheckLessThan:()=>_v,$ZodCheckLowerCase:()=>Qv,$ZodCheckMaxLength:()=>Av,$ZodCheckMaxSize:()=>Cv,$ZodCheckMimeType:()=>Gv,$ZodCheckMinLength:()=>Iv,$ZodCheckMinSize:()=>jv,$ZodCheckMultipleOf:()=>Ev,$ZodCheckNumberFormat:()=>$v,$ZodCheckOverwrite:()=>Bv,$ZodCheckProperty:()=>Vv,$ZodCheckRegex:()=>Rv,$ZodCheckSizeEquals:()=>Nv,$ZodCheckStartsWith:()=>Zv,$ZodCheckStringFormat:()=>Dv,$ZodCheckUpperCase:()=>zv,$ZodCodec:()=>wb,$ZodCustom:()=>Cb,$ZodCustomStringFormat:()=>ky,$ZodDate:()=>Ry,$ZodDefault:()=>db,$ZodDiscriminatedUnion:()=>Xy,$ZodE164:()=>wy,$ZodEmail:()=>ey,$ZodEmoji:()=>ny,$ZodEncodeError:()=>Ep,$ZodEnum:()=>ob,$ZodError:()=>Qm,$ZodFile:()=>ab,$ZodFunction:()=>Eb,$ZodGUID:()=>Kv,$ZodIPv4:()=>hy,$ZodIPv6:()=>py,$ZodISODate:()=>cy,$ZodISODateTime:()=>uy,$ZodISODuration:()=>fy,$ZodISOTime:()=>dy,$ZodIntersection:()=>Yy,$ZodJWT:()=>xy,$ZodKSUID:()=>ly,$ZodLazy:()=>Tb,$ZodLiteral:()=>ib,$ZodMap:()=>eb,$ZodNaN:()=>yb,$ZodNanoID:()=>ry,$ZodNever:()=>My,$ZodNonOptional:()=>pb,$ZodNull:()=>Ny,$ZodNullable:()=>cb,$ZodNumber:()=>_y,$ZodNumberFormat:()=>Py,$ZodObject:()=>Uy,$ZodObjectJIT:()=>Vy,$ZodOptional:()=>ub,$ZodPipe:()=>bb,$ZodPrefault:()=>hb,$ZodPromise:()=>$b,$ZodReadonly:()=>kb,$ZodRealError:()=>zm,$ZodRecord:()=>Jy,$ZodRegistry:()=>ww,$ZodSet:()=>nb,$ZodString:()=>qv,$ZodStringFormat:()=>Hv,$ZodSuccess:()=>gb,$ZodSymbol:()=>Cy,$ZodTemplateLiteral:()=>Pb,$ZodTransform:()=>sb,$ZodTuple:()=>Hy,$ZodType:()=>Wv,$ZodULID:()=>ay,$ZodURL:()=>ty,$ZodUUID:()=>Jv,$ZodUndefined:()=>jy,$ZodUnion:()=>By,$ZodUnknown:()=>Iy,$ZodVoid:()=>Dy,$ZodXID:()=>sy,$brand:()=>_p,$constructor:()=>kp,$input:()=>Ow,$output:()=>bw,Doc:()=>Xv,JSONSchema:()=>S,JSONSchemaGenerator:()=>Px,NEVER:()=>xp,TimePrecision:()=>Yw,_any:()=>mS,_array:()=>qS,_base64:()=>Vw,_base64url:()=>Gw,_bigint:()=>lS,_boolean:()=>aS,_catch:()=>px,_check:()=>xx,_cidrv4:()=>Fw,_cidrv6:()=>Uw,_coercedBigint:()=>uS,_coercedBoolean:()=>sS,_coercedDate:()=>OS,_coercedNumber:()=>eS,_coercedString:()=>_w,_cuid:()=>Mw,_cuid2:()=>Dw,_custom:()=>Ox,_date:()=>bS,_decode:()=>tg,_decodeAsync:()=>ig,_default:()=>dx,_discriminatedUnion:()=>KS,_e164:()=>Bw,_email:()=>Pw,_emoji:()=>Aw,_encode:()=>Jm,_encodeAsync:()=>rg,_endsWith:()=>FS,_enum:()=>ox,_file:()=>sx,_float32:()=>nS,_float64:()=>rS,_gt:()=>kS,_gte:()=>_S,_guid:()=>Ew,_includes:()=>LS,_int:()=>tS,_int32:()=>oS,_int64:()=>cS,_intersection:()=>JS,_ipv4:()=>Lw,_ipv6:()=>Zw,_isoDate:()=>qw,_isoDateTime:()=>Ww,_isoDuration:()=>Kw,_isoTime:()=>Hw,_jwt:()=>Xw,_ksuid:()=>zw,_lazy:()=>yx,_length:()=>DS,_literal:()=>ax,_lowercase:()=>QS,_lt:()=>SS,_lte:()=>xS,_map:()=>nx,_max:()=>xS,_maxLength:()=>IS,_maxSize:()=>jS,_mime:()=>VS,_min:()=>_S,_minLength:()=>MS,_minSize:()=>NS,_multipleOf:()=>CS,_nan:()=>wS,_nanoid:()=>Iw,_nativeEnum:()=>ix,_negative:()=>ES,_never:()=>vS,_nonnegative:()=>TS,_nonoptional:()=>fx,_nonpositive:()=>$S,_normalize:()=>BS,_null:()=>pS,_nullable:()=>cx,_number:()=>Jw,_optional:()=>ux,_overwrite:()=>GS,_parse:()=>Gm,_parseAsync:()=>Xm,_pipe:()=>mx,_positive:()=>PS,_promise:()=>bx,_property:()=>US,_readonly:()=>gx,_record:()=>tx,_refine:()=>wx,_regex:()=>RS,_safeDecode:()=>ug,_safeDecodeAsync:()=>hg,_safeEncode:()=>sg,_safeEncodeAsync:()=>dg,_safeParse:()=>Wm,_safeParseAsync:()=>Hm,_set:()=>rx,_size:()=>AS,_startsWith:()=>ZS,_string:()=>kw,_stringFormat:()=>_x,_stringbool:()=>kx,_success:()=>hx,_superRefine:()=>Sx,_symbol:()=>fS,_templateLiteral:()=>vx,_toLowerCase:()=>YS,_toUpperCase:()=>WS,_transform:()=>lx,_trim:()=>XS,_tuple:()=>ex,_uint32:()=>iS,_uint64:()=>dS,_ulid:()=>Rw,_undefined:()=>hS,_union:()=>HS,_unknown:()=>gS,_uppercase:()=>zS,_url:()=>Nw,_uuid:()=>$w,_uuidv4:()=>Tw,_uuidv6:()=>Cw,_uuidv7:()=>jw,_void:()=>yS,_xid:()=>Qw,clone:()=>lm,config:()=>Tp,decode:()=>ng,decodeAsync:()=>ag,encode:()=>eg,encodeAsync:()=>og,flattenError:()=>Lm,formatError:()=>Zm,globalConfig:()=>$p,globalRegistry:()=>xw,isValidBase64:()=>vy,isValidBase64URL:()=>by,isValidJWT:()=>Sy,locales:()=>w,parse:()=>Bm,parseAsync:()=>Ym,prettifyError:()=>Vm,regexes:()=>O,registry:()=>Sw,safeDecode:()=>cg,safeDecodeAsync:()=>pg,safeEncode:()=>lg,safeEncodeAsync:()=>fg,safeParse:()=>qm,safeParseAsync:()=>Km,toDotPath:()=>Um,toJSONSchema:()=>Ex,treeifyError:()=>Fm,util:()=>b,version:()=>Yv});var k={};y.r(k),y.d(k,{ZodISODate:()=>jx,ZodISODateTime:()=>Tx,ZodISODuration:()=>Mx,ZodISOTime:()=>Ax,date:()=>Nx,datetime:()=>Cx,duration:()=>Dx,time:()=>Ix});var _={};y.r(_),y.d(_,{bigint:()=>KP,boolean:()=>HP,date:()=>JP,number:()=>qP,string:()=>WP});var P={};y.r(P),y.d(P,{$brand:()=>_p,$input:()=>Ow,$output:()=>bw,NEVER:()=>xp,TimePrecision:()=>Yw,ZodAny:()=>v_,ZodArray:()=>E_,ZodBase64:()=>Rk,ZodBase64URL:()=>zk,ZodBigInt:()=>a_,ZodBigIntFormat:()=>l_,ZodBoolean:()=>o_,ZodCIDRv4:()=>Ak,ZodCIDRv6:()=>Mk,ZodCUID:()=>bk,ZodCUID2:()=>wk,ZodCatch:()=>vP,ZodCodec:()=>xP,ZodCustom:()=>MP,ZodCustomStringFormat:()=>Gk,ZodDate:()=>__,ZodDefault:()=>uP,ZodDiscriminatedUnion:()=>D_,ZodE164:()=>Zk,ZodEmail:()=>rk,ZodEmoji:()=>mk,ZodEnum:()=>W_,ZodError:()=>Qx,ZodFile:()=>eP,ZodFirstPartyTypeKind:()=>XP,ZodFunction:()=>AP,ZodGUID:()=>ik,ZodIPv4:()=>Tk,ZodIPv6:()=>jk,ZodISODate:()=>jx,ZodISODateTime:()=>Tx,ZodISODuration:()=>Mx,ZodISOTime:()=>Ax,ZodIntersection:()=>Q_,ZodIssueCode:()=>VP,ZodJWT:()=>Uk,ZodKSUID:()=>Ek,ZodLazy:()=>TP,ZodLiteral:()=>K_,ZodMap:()=>G_,ZodNaN:()=>bP,ZodNanoID:()=>vk,ZodNever:()=>w_,ZodNonOptional:()=>hP,ZodNull:()=>m_,ZodNullable:()=>aP,ZodNumber:()=>qk,ZodNumberFormat:()=>Kk,ZodObject:()=>C_,ZodOptional:()=>oP,ZodPipe:()=>wP,ZodPrefault:()=>dP,ZodPromise:()=>jP,ZodReadonly:()=>_P,ZodRealError:()=>zx,ZodRecord:()=>F_,ZodSet:()=>X_,ZodString:()=>ek,ZodStringFormat:()=>nk,ZodSuccess:()=>mP,ZodSymbol:()=>d_,ZodTemplateLiteral:()=>EP,ZodTransform:()=>nP,ZodTuple:()=>L_,ZodType:()=>Kx,ZodULID:()=>xk,ZodURL:()=>fk,ZodUUID:()=>sk,ZodUndefined:()=>h_,ZodUnion:()=>I_,ZodUnknown:()=>b_,ZodVoid:()=>x_,ZodXID:()=>_k,_ZodString:()=>Jx,_default:()=>cP,_function:()=>IP,any:()=>y_,array:()=>$_,base64:()=>Qk,base64url:()=>Lk,bigint:()=>s_,boolean:()=>i_,catch:()=>yP,check:()=>DP,cidrv4:()=>Ik,cidrv6:()=>Dk,clone:()=>lm,codec:()=>kP,coerce:()=>_,config:()=>Tp,core:()=>x,cuid:()=>Ok,cuid2:()=>Sk,custom:()=>RP,date:()=>P_,decode:()=>Gx,decodeAsync:()=>Xx,discriminatedUnion:()=>R_,e164:()=>Fk,email:()=>ok,emoji:()=>gk,encode:()=>Vx,encodeAsync:()=>Bx,endsWith:()=>FS,enum:()=>q_,file:()=>tP,flattenError:()=>Lm,float32:()=>e_,float64:()=>t_,formatError:()=>Zm,function:()=>IP,getErrorMap:()=>BP,globalRegistry:()=>xw,gt:()=>kS,gte:()=>_S,guid:()=>ak,hash:()=>Wk,hex:()=>Yk,hostname:()=>Xk,httpUrl:()=>pk,includes:()=>LS,instanceof:()=>LP,int:()=>Jk,int32:()=>n_,int64:()=>u_,intersection:()=>z_,ipv4:()=>Ck,ipv6:()=>Nk,iso:()=>k,json:()=>FP,jwt:()=>Vk,keyof:()=>T_,ksuid:()=>$k,lazy:()=>CP,length:()=>DS,literal:()=>J_,locales:()=>w,looseObject:()=>A_,lowercase:()=>QS,lt:()=>SS,lte:()=>xS,map:()=>B_,maxLength:()=>IS,maxSize:()=>jS,mime:()=>VS,minLength:()=>MS,minSize:()=>NS,multipleOf:()=>CS,nan:()=>OP,nanoid:()=>yk,nativeEnum:()=>H_,negative:()=>ES,never:()=>S_,nonnegative:()=>TS,nonoptional:()=>pP,nonpositive:()=>$S,normalize:()=>BS,null:()=>g_,nullable:()=>sP,nullish:()=>lP,number:()=>Hk,object:()=>j_,optional:()=>iP,overwrite:()=>GS,parse:()=>Lx,parseAsync:()=>Zx,partialRecord:()=>V_,pipe:()=>SP,positive:()=>PS,prefault:()=>fP,preprocess:()=>UP,prettifyError:()=>Vm,promise:()=>NP,property:()=>US,readonly:()=>PP,record:()=>U_,refine:()=>QP,regex:()=>RS,regexes:()=>O,registry:()=>Sw,safeDecode:()=>Wx,safeDecodeAsync:()=>Hx,safeEncode:()=>Yx,safeEncodeAsync:()=>qx,safeParse:()=>Fx,safeParseAsync:()=>Ux,set:()=>Y_,setErrorMap:()=>GP,size:()=>AS,startsWith:()=>ZS,strictObject:()=>N_,string:()=>tk,stringFormat:()=>Bk,stringbool:()=>ZP,success:()=>gP,superRefine:()=>zP,symbol:()=>f_,templateLiteral:()=>$P,toJSONSchema:()=>Ex,toLowerCase:()=>YS,toUpperCase:()=>WS,transform:()=>rP,treeifyError:()=>Fm,trim:()=>XS,tuple:()=>Z_,uint32:()=>r_,uint64:()=>c_,ulid:()=>kk,undefined:()=>p_,union:()=>M_,unknown:()=>O_,uppercase:()=>zS,url:()=>hk,util:()=>b,uuid:()=>lk,uuidv4:()=>uk,uuidv6:()=>ck,uuidv7:()=>dk,void:()=>k_,xid:()=>Pk});var E=y(848),$=y(540),T=y(338);const C=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const o=(0,$.useMemo)(()=>{const e=[];return n||e.push("menu_button","interactable"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,E.jsx)("button",{className:o,...r,children:e})},j=({label:e,className:t,overrideDefaults:n=!1,type:r="text",...o})=>{const i=(0,$.useMemo)(()=>{const e=[];return n||("text"===r||"number"===r||"password"===r||"email"===r||"search"===r)&&e.push("text_pole"),e.push(t),e.filter(Boolean).join(" ")},[n,t,r]);if("checkbox"===r){const r=n?t:`checkbox_label ${t??""}`.trim();return(0,E.jsxs)("label",{className:r,children:[(0,E.jsx)("input",{type:"checkbox",...o}),e&&(0,E.jsx)("span",{children:e})]})}return(0,E.jsx)("input",{type:r,className:i,...o})},N=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const o=(0,$.useMemo)(()=>{const e=[];return n||e.push("text_pole"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,E.jsx)("select",{className:o,...r,children:e})},A=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const o=(0,$.useMemo)(()=>{const e=[];return n||e.push("text_pole","textarea_compact"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,E.jsx)("textarea",{className:o,...r,children:e})};var I=y(961),M=(e=>(e[e.TEXT=1]="TEXT",e[e.CONFIRM=2]="CONFIRM",e[e.INPUT=3]="INPUT",e[e.DISPLAY=4]="DISPLAY",e))(M||{}),D=(e=>(e[e.AFFIRMATIVE=1]="AFFIRMATIVE",e[e.NEGATIVE=0]="NEGATIVE",e[e.CANCELLED=null]="CANCELLED",e))(D||{});const R=(e=>{var t={};return y.d(t,e),t})({persona_description_positions:()=>e.persona_description_positions,renderStoryString:()=>e.renderStoryString});const Q=(e=>{var t={};return y.d(t,e),t})({baseChatReplace:()=>t.baseChatReplace,chat_metadata:()=>t.chat_metadata,depth_prompt_depth_default:()=>t.depth_prompt_depth_default,depth_prompt_role_default:()=>t.depth_prompt_role_default,extension_prompt_types:()=>t.extension_prompt_types,getMaxContextSize:()=>t.getMaxContextSize,name1:()=>t.name1,name2:()=>t.name2,parseMesExamples:()=>t.parseMesExamples,sendMessageAsUser:()=>t.sendMessageAsUser,this_chid:()=>t.this_chid,updateMessageBlock:()=>t.updateMessageBlock});const z=(e=>{var t={};return y.d(t,e),t})({METADATA_KEY:()=>n.METADATA_KEY,createNewWorldInfo:()=>n.createNewWorldInfo,createWorldInfoEntry:()=>n.createWorldInfoEntry,selected_world_info:()=>n.selected_world_info,wi_anchor_position:()=>n.wi_anchor_position,world_info:()=>n.world_info,world_info_include_names:()=>n.world_info_include_names,world_names:()=>n.world_names});const L=(e=>{var t={};return y.d(t,e),t})({sendMessageAs:()=>r.sendMessageAs,sendNarratorMessage:()=>r.sendNarratorMessage});const Z=(e=>{var t={};return y.d(t,e),t})({user_avatar:()=>o.user_avatar});const F=(e=>{var t={};return y.d(t,e),t})({formatInstructModeExamples:()=>i.formatInstructModeExamples,formatInstructModeSystemPrompt:()=>i.formatInstructModeSystemPrompt});const U=(e=>{var t={};return y.d(t,e),t})({appendFileContent:()=>a.appendFileContent,hideChatMessageRange:()=>a.hideChatMessageRange});const V=(e=>{var t={};return y.d(t,e),t})({formatWorldInfo:()=>s.formatWorldInfo,getPromptPosition:()=>s.getPromptPosition,getPromptRole:()=>s.getPromptRole,prepareOpenAIMessages:()=>s.prepareOpenAIMessages,setOpenAIMessageExamples:()=>s.setOpenAIMessageExamples,setOpenAIMessages:()=>s.setOpenAIMessages});const G=(e=>{var t={};return y.d(t,e),t})({metadata_keys:()=>l.metadata_keys});const B=(e=>{var t={};return y.d(t,e),t})({getGroupDepthPrompts:()=>u.getGroupDepthPrompts,selected_group:()=>u.selected_group});const X=(e=>{var t={};return y.d(t,e),t})({getRegexedString:()=>c.getRegexedString,regex_placement:()=>c.regex_placement,runRegexScript:()=>c.runRegexScript});const Y=(e=>{var t={};return y.d(t,e),t})({getCharaFilename:()=>d.getCharaFilename,removeFromArray:()=>d.removeFromArray,runAfterAnimation:()=>d.runAfterAnimation});(e=>{var t={};y.d(t,e)})({});(e=>{var t={};y.d(t,e)})({});const W=(e=>{var t={};return y.d(t,e),t})({Popup:()=>p.Popup,fixToastrForDialogs:()=>p.fixToastrForDialogs});const q=(e=>{var t={};return y.d(t,e),t})({default:()=>m.default}),H=SillyTavern.getContext(),K=({content:e,type:t,inputValue:n="",options:r={},preventEscape:o=!1,onComplete:i})=>{var a;const s=(0,$.useRef)(null),l=(0,$.useRef)(null),[u,c]=(0,$.useState)(!1),[d,f]=(0,$.useState)(null),h=(0,$.useRef)(H.uuidv4()),p=(0,$.useRef)({id:h.current,type:t,dlg:null,mainInput:null,lastFocus:null,value:void 0,result:void 0,inputResults:void 0});(0,$.useEffect)(()=>{const e=s.current;if(!e)return;const t=e=>{e.preventDefault(),o||m(D.CANCELLED)};return e.addEventListener("cancel",t),p.current.dlg=e,p.current.mainInput=l.current,W.Popup.util.popups.push(p.current),e.showModal||(e.classList.add("poly_dialog"),q.default.registerDialog(e),new ResizeObserver(e=>{for(const t of e)q.default.reposition(t.target)}).observe(e)),e.showModal(),(0,W.fixToastrForDialogs)(),()=>{(0,Y.removeFromArray)(W.Popup.util.popups,p.current),(0,W.fixToastrForDialogs)(),e.removeEventListener("cancel",t)}},[]);const m=async e=>{var n,o;let a=e;if(t===M.INPUT&&(a=e>=D.AFFIRMATIVE?null==(n=l.current)?void 0:n.value:e!==D.NEGATIVE&&(e===D.CANCELLED&&null)),null!=(o=r.customInputs)&&o.length){const e=new Map(r.customInputs.map(e=>{var t;const n=null==(t=s.current)?void 0:t.querySelector(`#${e.id}`);return[n.id,n.checked]}));p.current.inputResults=e}if(p.current.result=e,p.current.value=a,r.onClosing&&!await r.onClosing(p.current))return c(!0),p.current.value=void 0,p.current.result=void 0,void(p.current.inputResults=void 0);c(!1),W.Popup.util.lastResult={value:a,result:e,inputResults:p.current.inputResults};const u=s.current;u&&(u.setAttribute("closing",""),(0,W.fixToastrForDialogs)(),(0,Y.runAfterAnimation)(u,async()=>{var e;if(u.close(),r.onClose&&await r.onClose(p.current),(0,Y.removeFromArray)(W.Popup.util.popups,p.current),W.Popup.util.popups.length>0){const t=null==(e=document.activeElement)?void 0:e.closest(".popup"),n=null==t?void 0:t.getAttribute("data-id"),r=W.Popup.util.popups.find(e=>e.id===n);r&&r.lastFocus&&r.lastFocus.focus()}i(a)}))};return(0,I.createPortal)((0,E.jsx)("dialog",{ref:s,className:(()=>{const e=["popup"];return r.wide&&e.push("wide_dialogue_popup"),r.wider&&e.push("wider_dialogue_popup"),r.large&&e.push("large_dialogue_popup"),r.transparent&&e.push("transparent_dialogue_popup"),r.allowHorizontalScrolling&&e.push("horizontal_scrolling_dialogue_popup"),r.allowVerticalScrolling&&e.push("vertical_scrolling_dialogue_popup"),r.animation&&e.push(`popup--animation-${r.animation}`),e.join(" ")})(),"data-id":h.current,onKeyDown:async e=>{},onFocus:e=>{e.target instanceof HTMLElement&&e.target!==s.current&&(f(e.target),p.current.lastFocus=e.target)},children:(0,E.jsxs)("div",{className:"popup-body",children:[(0,E.jsx)("div",{className:"popup-content",children:e}),t===M.INPUT&&(0,E.jsx)("textarea",{ref:l,className:"popup-input text_pole result-control auto-select",rows:r.rows??1,defaultValue:n,"data-result":"1","data-result-event":"submit"}),r.customInputs&&(0,E.jsx)("div",{className:"popup-inputs",children:r.customInputs.map(e=>(0,E.jsxs)("label",{className:"checkbox_label justifyCenter",htmlFor:e.id,children:[(0,E.jsx)("input",{type:"checkbox",id:e.id,defaultChecked:e.defaultState}),(0,E.jsx)("span",{"data-i18n":e.label,children:e.label}),e.tooltip&&(0,E.jsx)("div",{className:"fa-solid fa-circle-info opacity50p",title:e.tooltip,"data-i18n":`[title]${e.tooltip}`})]},e.id))}),t!==M.DISPLAY&&(0,E.jsxs)("div",{className:"popup-controls",children:[null==(a=r.customButtons)?void 0:a.map((e,t)=>{const n="string"==typeof e?{text:e,result:t+2}:e;return(0,E.jsx)("div",{className:`menu_button popup-button-custom result-control ${n.classes??""}`,"data-result":n.result,onClick:()=>{var e;null==(e=n.action)||e.call(n),m(n.result??t+2)},"data-i18n":n.text,children:n.text},t)}),t!==M.DISPLAY&&!1!==r.okButton&&(0,E.jsx)("div",{className:"popup-button-ok menu_button result-control",onClick:()=>m(D.AFFIRMATIVE),"data-result":"1",children:"string"==typeof r.okButton?r.okButton:"OK"}),t!==M.DISPLAY&&!1!==r.cancelButton&&(0,E.jsx)("div",{className:"popup-button-cancel menu_button result-control",onClick:()=>m(D.NEGATIVE),"data-result":"0",children:"string"==typeof r.cancelButton?r.cancelButton:"Cancel"})]}),t===M.DISPLAY&&(0,E.jsx)("div",{className:"popup-button-close right_menu_button fa-solid fa-circle-xmark",onClick:()=>m(D.CANCELLED),"data-result":"0",title:"Close popup","data-i18n":"[title]Close popup"})]})}),document.body)},J=(e,t,n)=>{if(!e||!e.api)return!1;const r=n[e.api];if(!r||!Object.hasOwn(t,r.selected))return!1;switch(r.selected){case"openai":return!!r.source;case"textgenerationwebui":return!!r.type}return!1},ee=SillyTavern.getContext(),te=({initialSelectedProfileId:e,allowedTypes:t={openai:"Chat Completion",textgenerationwebui:"Text Completion"},placeholder:n="Select a Connection Profile",onChange:r,onCreate:o,onUpdate:i,onDelete:a})=>{const[s,l]=(0,$.useState)(e??""),[u,c]=(0,$.useState)(Date.now()),{isEnabled:d,profiles:f,connectApiMap:h}=(0,$.useMemo)(()=>{var e,t;return(null==(e=ee.extensionSettings.disabledExtensions)?void 0:e.includes("connection-manager"))?(console.error("Connection Manager extension is disabled."),{isEnabled:!1,profiles:[],connectApiMap:{}}):{isEnabled:!0,profiles:(null==(t=ee.extensionSettings.connectionManager)?void 0:t.profiles)??[],connectApiMap:ee.CONNECT_API_MAP}},[u]);(0,$.useEffect)(()=>{if(!d)return;const e=e=>{J(e,t,h)&&(c(Date.now()),null==o||o(e))},n=(e,n)=>{const o=J(e,t,h),a=J(n,t,h);(o||a)&&c(Date.now()),null==i||i(e,n),s===e.id&&!a&&(l(""),null==r||r(void 0))},u=e=>{J(e,t,h)&&(c(Date.now()),null==a||a(e),s===e.id&&(l(""),null==r||r(void 0)))};return ee.eventSource.on("CONNECTION_PROFILE_CREATED",e),ee.eventSource.on("CONNECTION_PROFILE_UPDATED",n),ee.eventSource.on("CONNECTION_PROFILE_DELETED",u),()=>{ee.eventSource.removeListener("CONNECTION_PROFILE_CREATED",e),ee.eventSource.removeListener("CONNECTION_PROFILE_UPDATED",n),ee.eventSource.removeListener("CONNECTION_PROFILE_DELETED",u)}},[d,s,t,h,r,o,i,a]);const p=(0,$.useMemo)(()=>{if(!d)return[];const e=f.filter(e=>J(e,t,h)),n={};for(const[e,r]of Object.entries(t))n[e]={label:r,profiles:[]};for(const t of e){const e=h[t.api];n[e.selected]&&n[e.selected].profiles.push(t)}for(const e of Object.values(n))e.profiles.sort((e,t)=>(e.name??"").localeCompare(t.name??""));return Object.values(n).filter(e=>e.profiles.length>0)},[d,f,t,h]),m=(0,$.useCallback)(e=>{const t=e.target.value;l(t);const n=f.find(e=>e.id===t);null==r||r(n)},[f,r]);return d?(0,E.jsxs)(N,{value:s,onChange:m,children:[(0,E.jsx)("option",{value:"",children:n}),p.map(e=>(0,E.jsx)("optgroup",{label:e.label,children:e.profiles.map(e=>(0,E.jsx)("option",{value:e.id,children:e.name},e.id))},e.label))]}):(0,E.jsx)(N,{disabled:!0,value:"",children:(0,E.jsx)("option",{children:"Connection Manager disabled"})})};
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach(function(t){ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function se(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function le(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var ue=le(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ce=le(/Edge/i),de=le(/firefox/i),fe=le(/safari/i)&&!le(/chrome/i)&&!le(/android/i),he=le(/iP(ad|od|hone)/i),pe=le(/chrome/i)&&le(/android/i),me={capture:!1,passive:!1};function ge(e,t,n){e.addEventListener(t,n,!ue&&me)}function ve(e,t,n){e.removeEventListener(t,n,!ue&&me)}function ye(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function be(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Oe(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ye(e,t):ye(e,t))||r&&e===n)return e;if(e===n)break}while(e=be(e))}return null}var we,Se=/\s+/g;function xe(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Se," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Se," ")}}function ke(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function _e(e,t){var n="";if("string"==typeof e)n=e;else do{var r=ke(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Pe(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function Ee(){var e=document.scrollingElement;return e||document.documentElement}function $e(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var i,a,s,l,u,c,d;if(e!==window&&e.parentNode&&e!==Ee()?(a=(i=e.getBoundingClientRect()).top,s=i.left,l=i.bottom,u=i.right,c=i.height,d=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!ue))do{if(o&&o.getBoundingClientRect&&("none"!==ke(o,"transform")||n&&"static"!==ke(o,"position"))){var f=o.getBoundingClientRect();a-=f.top+parseInt(ke(o,"border-top-width")),s-=f.left+parseInt(ke(o,"border-left-width")),l=a+i.height,u=s+i.width;break}}while(o=o.parentNode);if(r&&e!==window){var h=_e(o||e),p=h&&h.a,m=h&&h.d;h&&(l=(a/=m)+(c/=m),u=(s/=p)+(d/=p))}return{top:a,left:s,bottom:l,right:u,width:d,height:c}}}function Te(e,t,n){for(var r=Ie(e,!0),o=$e(e)[t];r;){var i=$e(r)[n];if(!("top"===n||"left"===n?o>=i:o<=i))return r;if(r===Ee())break;r=Ie(r,!1)}return!1}function Ce(e,t,n,r){for(var o=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==zt.ghost&&(r||a[i]!==zt.dragged)&&Oe(a[i],n.draggable,e,!1)){if(o===t)return a[i];o++}i++}return null}function je(e,t){for(var n=e.lastElementChild;n&&(n===zt.ghost||"none"===ke(n,"display")||t&&!ye(n,t));)n=n.previousElementSibling;return n||null}function Ne(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===zt.clone||t&&!ye(e,t)||n++;return n}function Ae(e){var t=0,n=0,r=Ee();if(e)do{var o=_e(e),i=o.a,a=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function Ie(e,t){if(!e||!e.getBoundingClientRect)return Ee();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=ke(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Ee();if(r||t)return n;r=!0}}}while(n=n.parentNode);return Ee()}function Me(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function De(e,t){return function(){if(!we){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),we=setTimeout(function(){we=void 0},t)}}}function Re(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Qe(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function ze(e,t,n){var r={};return Array.from(e.children).forEach(function(o){var i,a,s,l;if(Oe(o,t.draggable,e,!1)&&!o.animated&&o!==n){var u=$e(o);r.left=Math.min(null!==(i=r.left)&&void 0!==i?i:1/0,u.left),r.top=Math.min(null!==(a=r.top)&&void 0!==a?a:1/0,u.top),r.right=Math.max(null!==(s=r.right)&&void 0!==s?s:-1/0,u.right),r.bottom=Math.max(null!==(l=r.bottom)&&void 0!==l?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Le="Sortable"+(new Date).getTime();function Ze(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==ke(e,"display")&&e!==zt.ghost){t.push({target:e,rect:$e(e)});var n=re({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=_e(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,i=0;t.forEach(function(e){var t=0,n=e.target,a=n.fromRect,s=$e(n),l=n.prevFromRect,u=n.prevToRect,c=e.rect,d=_e(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&Me(l,s)&&!Me(a,s)&&(c.top-s.top)/(c.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,l,u,r.options)),Me(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,c,s,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(e),o?e=setTimeout(function(){"function"==typeof n&&n()},i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){ke(e,"transition",""),ke(e,"transform","");var o=_e(this.el),i=o&&o.a,a=o&&o.d,s=(t.left-n.left)/(i||1),l=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,ke(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),ke(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),ke(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){ke(e,"transition",""),ke(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}var Fe=[],Ue={initializeByDefault:!0},Ve={mount:function(e){for(var t in Ue)Ue.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ue[t]);Fe.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Fe.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";Fe.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][o]&&t[r.pluginName][o](re({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](re({sortable:t},n)))})},initializePlugins:function(e,t,n,r){for(var o in Fe.forEach(function(r){var o=r.pluginName;if(e.options[o]||r.initializeByDefault){var i=new r(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,ae(n,i.defaults)}}),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);void 0!==i&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return Fe.forEach(function(r){"function"==typeof r.eventProperties&&ae(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return Fe.forEach(function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(r=o.optionListeners[t].call(e[o.pluginName],n))}),r}};function Ge(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,i=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[Le]){var m,g=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||ue||ce?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=s||n,m.item=o||n,m.clone=i,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=h?h.lastPutMode:void 0;var y=re(re({},p),Ve.getEventProperties(r,t));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}var Be=["evt"],Xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=se(n,Be);Ve.pluginEvent.bind(zt)(e,t,re({dragEl:We,parentEl:qe,ghostEl:He,rootEl:Ke,nextEl:Je,lastDownEl:et,cloneEl:tt,cloneHidden:nt,dragStarted:mt,putSortable:lt,activeSortable:zt.active,originalEvent:r,oldIndex:rt,oldDraggableIndex:it,newIndex:ot,newDraggableIndex:at,hideGhostForTarget:Mt,unhideGhostForTarget:Dt,cloneNowHidden:function(){nt=!0},cloneNowShown:function(){nt=!1},dispatchSortableEvent:function(e){Ye({sortable:t,name:e,originalEvent:r})}},o))};function Ye(e){Ge(re({putSortable:lt,cloneEl:tt,targetEl:We,rootEl:Ke,oldIndex:rt,oldDraggableIndex:it,newIndex:ot,newDraggableIndex:at},e))}var We,qe,He,Ke,Je,et,tt,nt,rt,ot,it,at,st,lt,ut,ct,dt,ft,ht,pt,mt,gt,vt,yt,bt,Ot=!1,wt=!1,St=[],xt=!1,kt=!1,_t=[],Pt=!1,Et=[],$t="undefined"!=typeof document,Tt=he,Ct=ce||ue?"cssFloat":"float",jt=$t&&!pe&&!he&&"draggable"in document.createElement("div"),Nt=function(){if($t){if(ue)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),At=function(e,t){var n=ke(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Ce(e,0,t),i=Ce(e,1,t),a=o&&ke(o),s=i&&ke(i),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+$e(o).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+$e(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!i||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=r&&"none"===n[Ct]||i&&"none"===n[Ct]&&l+u>r)?"vertical":"horizontal"},It=function(e){function t(e,n){return function(r,o,i,a){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,o,i,a),n)(r,o,i,a);var l=(n?r:o).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;r&&"object"==oe(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Mt=function(){!Nt&&He&&ke(He,"display","none")},Dt=function(){!Nt&&He&&ke(He,"display","")};$t&&!pe&&document.addEventListener("click",function(e){if(wt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),wt=!1,!1},!0);var Rt=function(e){if(We){var t=function(e,t){var n;return St.some(function(r){var o=r[Le].options.emptyInsertThreshold;if(o&&!je(r)){var i=$e(r),a=e>=i.left-o&&e<=i.right+o,s=t>=i.top-o&&t<=i.bottom+o;return a&&s?n=r:void 0}}),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Le]._onDragOver(n)}}},Qt=function(e){We&&We.parentNode[Le]._isOutsideThisEl(e.target)};function zt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ae({},t),e[Le]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return At(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==zt.supportPointer&&"PointerEvent"in window&&(!fe||he),emptyInsertThreshold:5};for(var r in Ve.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var o in It(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&jt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ge(e,"pointerdown",this._onTapStart):(ge(e,"mousedown",this._onTapStart),ge(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ge(e,"dragover",this),ge(e,"dragenter",this)),St.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ae(this,Ze())}function Lt(e,t,n,r,o,i,a,s){var l,u,c=e[Le],d=c.options.onMove;return!window.CustomEvent||ue||ce?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=o||t,l.relatedRect=i||$e(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(u=d.call(c,l,a)),u}function Zt(e){e.draggable=!1}function Ft(){Pt=!1}function Ut(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Vt(e){return setTimeout(e,0)}function Gt(e){return clearTimeout(e)}zt.prototype={constructor:zt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(gt=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,We):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,o=r.preventOnFilter,i=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=r.filter;if(function(e){Et.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&Et.push(r)}}(n),!We&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!fe||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=Oe(s,r.draggable,n,!1))&&s.animated||et===s)){if(rt=Ne(s),it=Ne(s,r.draggable),"function"==typeof u){if(u.call(this,e,s,this))return Ye({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),Xe("filter",t,{evt:e}),void(o&&e.preventDefault())}else if(u&&(u=u.split(",").some(function(r){if(r=Oe(l,r.trim(),n,!1))return Ye({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),Xe("filter",t,{evt:e}),!0})))return void(o&&e.preventDefault());r.handle&&!Oe(l,r.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var r,o=this,i=o.el,a=o.options,s=i.ownerDocument;if(n&&!We&&n.parentNode===i){var l=$e(n);if(Ke=i,qe=(We=n).parentNode,Je=We.nextSibling,et=n,st=a.group,zt.dragged=We,ut={target:We,clientX:(t||e).clientX,clientY:(t||e).clientY},ht=ut.clientX-l.left,pt=ut.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,We.style["will-change"]="all",r=function(){Xe("delayEnded",o,{evt:e}),zt.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!de&&o.nativeDraggable&&(We.draggable=!0),o._triggerDragStart(e,t),Ye({sortable:o,name:"choose",originalEvent:e}),xe(We,a.chosenClass,!0))},a.ignore.split(",").forEach(function(e){Pe(We,e.trim(),Zt)}),ge(s,"dragover",Rt),ge(s,"mousemove",Rt),ge(s,"touchmove",Rt),a.supportPointer?(ge(s,"pointerup",o._onDrop),!this.nativeDraggable&&ge(s,"pointercancel",o._onDrop)):(ge(s,"mouseup",o._onDrop),ge(s,"touchend",o._onDrop),ge(s,"touchcancel",o._onDrop)),de&&this.nativeDraggable&&(this.options.touchStartThreshold=4,We.draggable=!0),Xe("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(ce||ue))r();else{if(zt.eventCanceled)return void this._onDrop();a.supportPointer?(ge(s,"pointerup",o._disableDelayedDrag),ge(s,"pointercancel",o._disableDelayedDrag)):(ge(s,"mouseup",o._disableDelayedDrag),ge(s,"touchend",o._disableDelayedDrag),ge(s,"touchcancel",o._disableDelayedDrag)),ge(s,"mousemove",o._delayedDragTouchMoveHandler),ge(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&ge(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){We&&Zt(We),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ve(e,"mouseup",this._disableDelayedDrag),ve(e,"touchend",this._disableDelayedDrag),ve(e,"touchcancel",this._disableDelayedDrag),ve(e,"pointerup",this._disableDelayedDrag),ve(e,"pointercancel",this._disableDelayedDrag),ve(e,"mousemove",this._delayedDragTouchMoveHandler),ve(e,"touchmove",this._delayedDragTouchMoveHandler),ve(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?ge(document,"pointermove",this._onTouchMove):ge(document,t?"touchmove":"mousemove",this._onTouchMove):(ge(We,"dragend",this),ge(Ke,"dragstart",this._onDragStart));try{document.selection?Vt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Ot=!1,Ke&&We){Xe("dragStarted",this,{evt:t}),this.nativeDraggable&&ge(document,"dragover",Qt);var n=this.options;!e&&xe(We,n.dragClass,!1),xe(We,n.ghostClass,!0),zt.active=this,e&&this._appendGhost(),Ye({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ct){this._lastX=ct.clientX,this._lastY=ct.clientY,Mt();for(var e=document.elementFromPoint(ct.clientX,ct.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ct.clientX,ct.clientY))!==t;)t=e;if(We.parentNode[Le]._isOutsideThisEl(e),t)do{if(t[Le]){if(t[Le]._onDragOver({clientX:ct.clientX,clientY:ct.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=be(t));Dt()}},_onTouchMove:function(e){if(ut){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=He&&_e(He,!0),a=He&&i&&i.a,s=He&&i&&i.d,l=Tt&&bt&&Ae(bt),u=(o.clientX-ut.clientX+r.x)/(a||1)+(l?l[0]-_t[0]:0)/(a||1),c=(o.clientY-ut.clientY+r.y)/(s||1)+(l?l[1]-_t[1]:0)/(s||1);if(!zt.active&&!Ot){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(He){i?(i.e+=u-(dt||0),i.f+=c-(ft||0)):i={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");ke(He,"webkitTransform",d),ke(He,"mozTransform",d),ke(He,"msTransform",d),ke(He,"transform",d),dt=u,ft=c,ct=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!He){var e=this.options.fallbackOnBody?document.body:Ke,t=$e(We,!0,Tt,!0,e),n=this.options;if(Tt){for(bt=e;"static"===ke(bt,"position")&&"none"===ke(bt,"transform")&&bt!==document;)bt=bt.parentNode;bt!==document.body&&bt!==document.documentElement?(bt===document&&(bt=Ee()),t.top+=bt.scrollTop,t.left+=bt.scrollLeft):bt=Ee(),_t=Ae(bt)}xe(He=We.cloneNode(!0),n.ghostClass,!1),xe(He,n.fallbackClass,!0),xe(He,n.dragClass,!0),ke(He,"transition",""),ke(He,"transform",""),ke(He,"box-sizing","border-box"),ke(He,"margin",0),ke(He,"top",t.top),ke(He,"left",t.left),ke(He,"width",t.width),ke(He,"height",t.height),ke(He,"opacity","0.8"),ke(He,"position",Tt?"absolute":"fixed"),ke(He,"zIndex","100000"),ke(He,"pointerEvents","none"),zt.ghost=He,e.appendChild(He),ke(He,"transform-origin",ht/parseInt(He.style.width)*100+"% "+pt/parseInt(He.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;Xe("dragStart",this,{evt:e}),zt.eventCanceled?this._onDrop():(Xe("setupClone",this),zt.eventCanceled||((tt=Qe(We)).removeAttribute("id"),tt.draggable=!1,tt.style["will-change"]="",this._hideClone(),xe(tt,this.options.chosenClass,!1),zt.clone=tt),n.cloneId=Vt(function(){Xe("clone",n),zt.eventCanceled||(n.options.removeCloneOnHide||Ke.insertBefore(tt,We),n._hideClone(),Ye({sortable:n,name:"clone"}))}),!t&&xe(We,o.dragClass,!0),t?(wt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ve(document,"mouseup",n._onDrop),ve(document,"touchend",n._onDrop),ve(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,We)),ge(document,"drop",n),ke(We,"transform","translateZ(0)")),Ot=!0,n._dragStartId=Vt(n._dragStarted.bind(n,t,e)),ge(document,"selectstart",n),mt=!0,window.getSelection().removeAllRanges(),fe&&ke(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,o,i=this.el,a=e.target,s=this.options,l=s.group,u=zt.active,c=st===l,d=s.sort,f=lt||u,h=this,p=!1;if(!Pt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Oe(a,s.draggable,i,!0),T("dragOver"),zt.eventCanceled)return p;if(We.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return j(!1);if(wt=!1,u&&!s.disabled&&(c?d||(r=qe!==Ke):lt===this||(this.lastPutMode=st.checkPull(this,u,We,e))&&l.checkPut(this,u,We,e))){if(o="vertical"===this._getDirection(e,a),t=$e(We),T("dragOverValid"),zt.eventCanceled)return p;if(r)return qe=Ke,C(),this._hideClone(),T("revert"),zt.eventCanceled||(Je?Ke.insertBefore(We,Je):Ke.appendChild(We)),j(!0);var m=je(i,s.draggable);if(!m||function(e,t,n){var r=$e(je(n.el,n.options.draggable)),o=ze(n.el,n.options,He),i=10;return t?e.clientX>o.right+i||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>o.bottom+i||e.clientX>r.right&&e.clientY>r.top}(e,o,this)&&!m.animated){if(m===We)return j(!1);if(m&&i===e.target&&(a=m),a&&(n=$e(a)),!1!==Lt(Ke,i,We,t,a,n,e,!!a))return C(),m&&m.nextSibling?i.insertBefore(We,m.nextSibling):i.appendChild(We),qe=i,N(),j(!0)}else if(m&&function(e,t,n){var r=$e(Ce(n.el,0,n.options,!0)),o=ze(n.el,n.options,He),i=10;return t?e.clientX<o.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<o.top-i||e.clientY<r.bottom&&e.clientX<r.left}(e,o,this)){var g=Ce(i,0,s,!0);if(g===We)return j(!1);if(n=$e(a=g),!1!==Lt(Ke,i,We,t,a,n,e,!1))return C(),i.insertBefore(We,g),qe=i,N(),j(!0)}else if(a.parentNode===i){n=$e(a);var v,y,b,O=We.parentNode!==i,w=!function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===a||o===s||r+i/2===a+l/2}(We.animated&&We.toRect||t,a.animated&&a.toRect||n,o),S=o?"top":"left",x=Te(a,"top","top")||Te(We,"top","top"),k=x?x.scrollTop:void 0;if(gt!==a&&(y=n[S],xt=!1,kt=!w&&s.invertSwap||O),v=function(e,t,n,r,o,i,a,s){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!a)if(s&&yt<u*o){if(!xt&&(1===vt?l>c+u*i/2:l<d-u*i/2)&&(xt=!0),xt)f=!0;else if(1===vt?l<c+yt:l>d-yt)return-vt}else if(l>c+u*(1-o)/2&&l<d-u*(1-o)/2)return function(e){return Ne(We)<Ne(e)?1:-1}(t);if((f=f||a)&&(l<c+u*i/2||l>d-u*i/2))return l>c+u/2?1:-1;return 0}(e,a,n,o,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,kt,gt===a),0!==v){var _=Ne(We);do{_-=v,b=qe.children[_]}while(b&&("none"===ke(b,"display")||b===He))}if(0===v||b===a)return j(!1);gt=a,vt=v;var P=a.nextElementSibling,E=!1,$=Lt(Ke,i,We,t,a,n,e,E=1===v);if(!1!==$)return 1!==$&&-1!==$||(E=1===$),Pt=!0,setTimeout(Ft,30),C(),E&&!P?i.appendChild(We):a.parentNode.insertBefore(We,E?P:a),x&&Re(x,0,k-x.scrollTop),qe=We.parentNode,void 0===y||kt||(yt=Math.abs(y-$e(a)[S])),N(),j(!0)}if(i.contains(We))return j(!1)}return!1}function T(s,l){Xe(s,h,re({evt:e,isOwner:c,axis:o?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:a,completed:j,onMove:function(n,r){return Lt(Ke,i,We,t,n,$e(n),e,r)},changed:N},l))}function C(){T("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function j(t){return T("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(h),h!==f&&(xe(We,lt?lt.options.ghostClass:u.options.ghostClass,!1),xe(We,s.ghostClass,!0)),lt!==h&&h!==zt.active?lt=h:h===zt.active&&lt&&(lt=null),f===h&&(h._ignoreWhileAnimating=a),h.animateAll(function(){T("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===We&&!We.animated||a===i&&!a.animated)&&(gt=null),s.dragoverBubble||e.rootEl||a===document||(We.parentNode[Le]._isOutsideThisEl(e.target),!t&&Rt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function N(){ot=Ne(We),at=Ne(We,s.draggable),Ye({sortable:h,name:"change",toEl:i,newIndex:ot,newDraggableIndex:at,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ve(document,"mousemove",this._onTouchMove),ve(document,"touchmove",this._onTouchMove),ve(document,"pointermove",this._onTouchMove),ve(document,"dragover",Rt),ve(document,"mousemove",Rt),ve(document,"touchmove",Rt)},_offUpEvents:function(){var e=this.el.ownerDocument;ve(e,"mouseup",this._onDrop),ve(e,"touchend",this._onDrop),ve(e,"pointerup",this._onDrop),ve(e,"pointercancel",this._onDrop),ve(e,"touchcancel",this._onDrop),ve(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ot=Ne(We),at=Ne(We,n.draggable),Xe("drop",this,{evt:e}),qe=We&&We.parentNode,ot=Ne(We),at=Ne(We,n.draggable),zt.eventCanceled||(Ot=!1,kt=!1,xt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(ve(document,"drop",this),ve(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),fe&&ke(document.body,"user-select",""),ke(We,"transform",""),e&&(mt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),He&&He.parentNode&&He.parentNode.removeChild(He),(Ke===qe||lt&&"clone"!==lt.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),We&&(this.nativeDraggable&&ve(We,"dragend",this),Zt(We),We.style["will-change"]="",mt&&!Ot&&xe(We,lt?lt.options.ghostClass:this.options.ghostClass,!1),xe(We,this.options.chosenClass,!1),Ye({sortable:this,name:"unchoose",toEl:qe,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ke!==qe?(ot>=0&&(Ye({rootEl:qe,name:"add",toEl:qe,fromEl:Ke,originalEvent:e}),Ye({sortable:this,name:"remove",toEl:qe,originalEvent:e}),Ye({rootEl:qe,name:"sort",toEl:qe,fromEl:Ke,originalEvent:e}),Ye({sortable:this,name:"sort",toEl:qe,originalEvent:e})),lt&&lt.save()):ot!==rt&&ot>=0&&(Ye({sortable:this,name:"update",toEl:qe,originalEvent:e}),Ye({sortable:this,name:"sort",toEl:qe,originalEvent:e})),zt.active&&(null!=ot&&-1!==ot||(ot=rt,at=it),Ye({sortable:this,name:"end",toEl:qe,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Xe("nulling",this),Ke=We=qe=He=Je=tt=et=nt=ut=ct=mt=ot=at=rt=it=gt=vt=lt=st=zt.dragged=zt.ghost=zt.clone=zt.active=null,Et.forEach(function(e){e.checked=!0}),Et.length=dt=ft=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":We&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,i=this.options;r<o;r++)Oe(e=n[r],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Ut(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(e,t){var o=r.children[t];Oe(o,this.options.draggable,r,!1)&&(n[e]=o)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Oe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=Ve.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&It(n)},destroy:function(){Xe("destroy",this);var e=this.el;e[Le]=null,ve(e,"mousedown",this._onTapStart),ve(e,"touchstart",this._onTapStart),ve(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ve(e,"dragover",this),ve(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),St.splice(St.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!nt){if(Xe("hideClone",this),zt.eventCanceled)return;ke(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),nt=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(nt){if(Xe("showClone",this),zt.eventCanceled)return;We.parentNode!=Ke||this.options.group.revertClone?Je?Ke.insertBefore(tt,Je):Ke.appendChild(tt):Ke.insertBefore(tt,We),this.options.group.revertClone&&this.animate(We,tt),ke(tt,"display",""),nt=!1}}else this._hideClone()}},$t&&ge(document,"touchmove",function(e){(zt.active||Ot)&&e.cancelable&&e.preventDefault()}),zt.utils={on:ge,off:ve,css:ke,find:Pe,is:function(e,t){return!!Oe(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:De,closest:Oe,toggleClass:xe,clone:Qe,index:Ne,nextTick:Vt,cancelNextTick:Gt,detectDirection:At,getChild:Ce,expando:Le},zt.get=function(e){return e[Le]},zt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(zt.utils=re(re({},zt.utils),e.utils)),Ve.mount(e)})},zt.create=function(e,t){return new zt(e,t)},zt.version="1.15.6";var Bt,Xt,Yt,Wt,qt,Ht,Kt=[],Jt=!1;function en(){Kt.forEach(function(e){clearInterval(e.pid)}),Kt=[]}function tn(){clearInterval(Ht)}var nn=De(function(e,t,n,r){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=Ee(),c=!1;Xt!==n&&(Xt=n,en(),Bt=t.scroll,o=t.scrollFn,!0===Bt&&(Bt=Ie(n,!0)));var d=0,f=Bt;do{var h=f,p=$e(h),m=p.top,g=p.bottom,v=p.left,y=p.right,b=p.width,O=p.height,w=void 0,S=void 0,x=h.scrollWidth,k=h.scrollHeight,_=ke(h),P=h.scrollLeft,E=h.scrollTop;h===u?(w=b<x&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),S=O<k&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(w=b<x&&("auto"===_.overflowX||"scroll"===_.overflowX),S=O<k&&("auto"===_.overflowY||"scroll"===_.overflowY));var $=w&&(Math.abs(y-i)<=s&&P+b<x)-(Math.abs(v-i)<=s&&!!P),T=S&&(Math.abs(g-a)<=s&&E+O<k)-(Math.abs(m-a)<=s&&!!E);if(!Kt[d])for(var C=0;C<=d;C++)Kt[C]||(Kt[C]={});Kt[d].vx==$&&Kt[d].vy==T&&Kt[d].el===h||(Kt[d].el=h,Kt[d].vx=$,Kt[d].vy=T,clearInterval(Kt[d].pid),0==$&&0==T||(c=!0,Kt[d].pid=setInterval(function(){r&&0===this.layer&&zt.active._onTouchMove(qt);var t=Kt[this.layer].vy?Kt[this.layer].vy*l:0,n=Kt[this.layer].vx?Kt[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(zt.dragged.parentNode[Le],n,t,e,qt,Kt[this.layer].el)||Re(Kt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==u&&(f=Ie(f,!1)));Jt=c}},30),rn=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||o;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(i("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function on(){}function an(){}on.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Ce(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:rn},ae(on,{pluginName:"revertOnSpill"}),an.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:rn},ae(an,{pluginName:"removeOnSpill"});zt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?ge(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ge(document,"pointermove",this._handleFallbackAutoScroll):t.touches?ge(document,"touchmove",this._handleFallbackAutoScroll):ge(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?ve(document,"dragover",this._handleAutoScroll):(ve(document,"pointermove",this._handleFallbackAutoScroll),ve(document,"touchmove",this._handleFallbackAutoScroll),ve(document,"mousemove",this._handleFallbackAutoScroll)),tn(),en(),clearTimeout(we),we=void 0},nulling:function(){qt=Xt=Bt=Jt=Ht=Yt=Wt=null,Kt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(r,o);if(qt=e,t||this.options.forceAutoScrollFallback||ce||ue||fe){nn(e,this.options,i,t);var a=Ie(i,!0);!Jt||Ht&&r===Yt&&o===Wt||(Ht&&tn(),Ht=setInterval(function(){var i=Ie(document.elementFromPoint(r,o),!0);i!==a&&(a=i,en()),nn(e,n.options,i,t)},10),Yt=r,Wt=o)}else{if(!this.options.bubbleScroll||Ie(i,!0)===Ee())return void en();nn(e,this.options,Ie(i,!1),!1)}}},ae(e,{pluginName:"scroll",initializeByDefault:!0})}),zt.mount(an,on);$.memo(({item:e,showToggleButton:t,showDeleteButton:n,showSelectInput:r,onToggle:o,onDelete:i,onSelectChange:a})=>{const{id:s,label:l,enabled:u,canDelete:c=!0,canToggle:d=!0,showSelect:f=!0,canSelect:h=!0,selectOptions:p=[],selectValue:m}=e,g={display:"flex",alignItems:"center",padding:"8px 12px",border:"1px solid var(--SmartThemeBorderColor, #ccc)",color:"var(--SmartThemeBodyColor, #333)",marginBottom:"2px",opacity:t&&!u?.6:1},v={cursor:"pointer",flexShrink:0},y={display:"inline-block",flexShrink:0,marginRight:"10px"};return(0,E.jsxs)("li",{className:"sortable-list-item",style:g,"data-id":s,children:[(0,E.jsx)("span",{className:"drag-handle fas fa-bars",style:{cursor:"grab",marginRight:"10px",color:"var(--SmartThemeBodyColor, #555)",flexShrink:0}}),(0,E.jsx)("span",{className:"item-label",style:{flexGrow:1,marginRight:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l}),r&&f&&h&&(0,E.jsx)(N,{value:m,onChange:e=>a(s,e.target.value),disabled:!u,style:{marginRight:"10px",flexShrink:0,width:"unset"},children:0===p.length?(0,E.jsx)("option",{disabled:!0,children:"--"}):p.map(e=>(0,E.jsx)("option",{value:e.value,children:e.label},e.value))}),r&&(!f||!h)&&(0,E.jsx)("span",{style:y}),t&&d&&(0,E.jsx)(C,{overrideDefaults:!0,className:"toggle-button fas "+(u?"fa-toggle-on":"fa-toggle-off"),style:{...v,marginRight:"10px",fontSize:"1.2em",color:u?"var(--success-color, #4CAF50)":"var(--SmartThemeBodyColor, #555)",backgroundColor:"transparent",border:"none"},onClick:()=>o(s)}),t&&!d&&(0,E.jsx)("span",{style:y}),n&&c&&(0,E.jsx)(C,{overrideDefaults:!0,className:"delete-button fas fa-trash-can",style:{...v,color:"var(--error-color, #f44336)",backgroundColor:"transparent",border:"none"},onClick:()=>i(s)}),n&&!c&&(0,E.jsx)("span",{style:{...y,marginRight:0}})]})});function sn(e){return Array.isArray?Array.isArray(e):"[object Array]"===pn(e)}function ln(e){return"string"==typeof e}function un(e){return"number"==typeof e}function cn(e){return!0===e||!1===e||function(e){return dn(e)&&null!==e}(e)&&"[object Boolean]"==pn(e)}function dn(e){return"object"==typeof e}function fn(e){return null!=e}function hn(e){return!e.trim().length}function pn(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const mn=Object.prototype.hasOwnProperty;class gn{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=vn(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function vn(e){let t=null,n=null,r=null,o=1,i=null;if(ln(e)||sn(e))r=e,t=yn(e),n=bn(e);else{if(!mn.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const a=e.name;if(r=a,mn.call(e,"weight")&&(o=e.weight,o<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(a));t=yn(a),n=bn(a),i=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:i}}function yn(e){return sn(e)?e:e.split(".")}function bn(e){return sn(e)?e.join("."):e}const On={useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const o=(e,t,i)=>{if(fn(e))if(t[i]){const a=e[t[i]];if(!fn(a))return;if(i===t.length-1&&(ln(a)||un(a)||cn(a)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(sn(a)){r=!0;for(let e=0,n=a.length;e<n;e+=1)o(a[e],t,i+1)}else t.length&&o(a,t,i+1)}else n.push(e)};return o(e,ln(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var wn={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...On};const Sn=/[^ ]+/g;class xn{constructor({getFn:e=wn.getFn,fieldNormWeight:t=wn.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(t){const o=t.match(Sn).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*e),a=parseFloat(Math.round(i*r)/r);return n.set(o,a),a},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,ln(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();ln(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!fn(e)||hn(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,r)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(fn(o))if(sn(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(fn(r))if(ln(r)&&!hn(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else sn(r)&&r.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[r]=e}else if(ln(o)&&!hn(o)){let e={v:o,n:this.norm.get(o)};n.$[r]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function kn(e,t,{getFn:n=wn.getFn,fieldNormWeight:r=wn.fieldNormWeight}={}){const o=new xn({getFn:n,fieldNormWeight:r});return o.setKeys(e.map(vn)),o.setSources(t),o.create(),o}function _n(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=wn.distance,ignoreLocation:i=wn.ignoreLocation}={}){const a=t/e.length;if(i)return a;const s=Math.abs(r-n);return o?a+s/o:s?1:a}const Pn=32;function En(e,t,n,{location:r=wn.location,distance:o=wn.distance,threshold:i=wn.threshold,findAllMatches:a=wn.findAllMatches,minMatchCharLength:s=wn.minMatchCharLength,includeMatches:l=wn.includeMatches,ignoreLocation:u=wn.ignoreLocation}={}){if(t.length>Pn)throw new Error(`Pattern length exceeds max of ${Pn}.`);const c=t.length,d=e.length,f=Math.max(0,Math.min(r,d));let h=i,p=f;const m=s>1||l,g=m?Array(d):[];let v;for(;(v=e.indexOf(t,p))>-1;){let e=_n(t,{currentLocation:v,expectedLocation:f,distance:o,ignoreLocation:u});if(h=Math.min(e,h),p=v+c,m){let e=0;for(;e<c;)g[v+e]=1,e+=1}}p=-1;let y=[],b=1,O=c+d;const w=1<<c-1;for(let r=0;r<c;r+=1){let i=0,s=O;for(;i<s;){_n(t,{errors:r,currentLocation:f+s,expectedLocation:f,distance:o,ignoreLocation:u})<=h?i=s:O=s,s=Math.floor((O-i)/2+i)}O=s;let l=Math.max(1,f-s+1),v=a?d:Math.min(f+s,d)+c,S=Array(v+2);S[v+1]=(1<<r)-1;for(let i=v;i>=l;i-=1){let a=i-1,s=n[e.charAt(a)];if(m&&(g[a]=+!!s),S[i]=(S[i+1]<<1|1)&s,r&&(S[i]|=(y[i+1]|y[i])<<1|1|y[i+1]),S[i]&w&&(b=_n(t,{errors:r,currentLocation:a,expectedLocation:f,distance:o,ignoreLocation:u}),b<=h)){if(h=b,p=a,p<=f)break;l=Math.max(1,2*f-p)}}if(_n(t,{errors:r+1,currentLocation:f,expectedLocation:f,distance:o,ignoreLocation:u})>h)break;y=S}const S={isMatch:p>=0,score:Math.max(.001,b)};if(m){const e=function(e=[],t=wn.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let a=e.length;i<a;i+=1){let a=e[i];a&&-1===r?r=i:a||-1===r||(o=i-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}(g,s);e.length?l&&(S.indices=e):S.isMatch=!1}return S}function $n(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}const Tn=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Cn{constructor(e,{location:t=wn.location,threshold:n=wn.threshold,distance:r=wn.distance,includeMatches:o=wn.includeMatches,findAllMatches:i=wn.findAllMatches,minMatchCharLength:a=wn.minMatchCharLength,isCaseSensitive:s=wn.isCaseSensitive,ignoreDiacritics:l=wn.ignoreDiacritics,ignoreLocation:u=wn.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:u},e=s?e:e.toLowerCase(),e=l?Tn(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:$n(e),startIndex:t})},d=this.pattern.length;if(d>Pn){let e=0;const t=d%Pn,n=d-t;for(;e<n;)c(this.pattern.substr(e,Pn),e),e+=Pn;if(t){const e=d-Pn;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=t?e:e.toLowerCase(),e=n?Tn(e):e,this.pattern===e){let t={isMatch:!0,score:0};return r&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:i,threshold:a,findAllMatches:s,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],d=0,f=!1;this.chunks.forEach(({pattern:t,alphabet:n,startIndex:h})=>{const{isMatch:p,score:m,indices:g}=En(e,t,n,{location:o+h,distance:i,threshold:a,findAllMatches:s,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});p&&(f=!0),d+=m,p&&g&&(c=[...c,...g])});let h={isMatch:f,score:f?d/this.chunks.length:1};return f&&r&&(h.indices=c),h}}class jn{constructor(e){this.pattern=e}static isMultiMatch(e){return Nn(e,this.multiRegex)}static isSingleMatch(e){return Nn(e,this.singleRegex)}search(){}}function Nn(e,t){const n=e.match(t);return n?n[1]:null}class An extends jn{constructor(e,{location:t=wn.location,threshold:n=wn.threshold,distance:r=wn.distance,includeMatches:o=wn.includeMatches,findAllMatches:i=wn.findAllMatches,minMatchCharLength:a=wn.minMatchCharLength,isCaseSensitive:s=wn.isCaseSensitive,ignoreDiacritics:l=wn.ignoreDiacritics,ignoreLocation:u=wn.ignoreLocation}={}){super(e),this._bitapSearch=new Cn(e,{location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class In extends jn{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,r.push([t,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const Mn=[class extends jn{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},In,class extends jn{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends jn{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends jn{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends jn{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends jn{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},An],Dn=Mn.length,Rn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Qn=new Set([An.type,In.type]);class zn{constructor(e,{isCaseSensitive:t=wn.isCaseSensitive,ignoreDiacritics:n=wn.ignoreDiacritics,includeMatches:r=wn.includeMatches,minMatchCharLength:o=wn.minMatchCharLength,ignoreLocation:i=wn.ignoreLocation,findAllMatches:a=wn.findAllMatches,location:s=wn.location,threshold:l=wn.threshold,distance:u=wn.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:o,findAllMatches:a,ignoreLocation:i,location:s,threshold:l,distance:u},e=t?e:e.toLowerCase(),e=n?Tn(e):e,this.pattern=e,this.query=function(e,t={}){return e.split("|").map(e=>{let n=e.trim().split(Rn).filter(e=>e&&!!e.trim()),r=[];for(let e=0,o=n.length;e<o;e+=1){const o=n[e];let i=!1,a=-1;for(;!i&&++a<Dn;){const e=Mn[a];let n=e.isMultiMatch(o);n&&(r.push(new e(n,t)),i=!0)}if(!i)for(a=-1;++a<Dn;){const e=Mn[a];let n=e.isSingleMatch(o);if(n){r.push(new e(n,t));break}}}return r})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:o}=this.options;e=r?e:e.toLowerCase(),e=o?Tn(e):e;let i=0,a=[],s=0;for(let r=0,o=t.length;r<o;r+=1){const o=t[r];a.length=0,i=0;for(let t=0,r=o.length;t<r;t+=1){const r=o[t],{isMatch:l,indices:u,score:c}=r.search(e);if(!l){s=0,i=0,a.length=0;break}if(i+=1,s+=c,n){const e=r.constructor.type;Qn.has(e)?a=[...a,...u]:a.push(u)}}if(i){let e={isMatch:!0,score:s/i};return n&&(e.indices=a),e}}return{isMatch:!1,score:1}}}const Ln=[];function Zn(e,t){for(let n=0,r=Ln.length;n<r;n+=1){let r=Ln[n];if(r.condition(e,t))return new r(e,t)}return new Cn(e,t)}const Fn="$and",Un="$or",Vn="$path",Gn="$val",Bn=e=>!(!e[Fn]&&!e[Un]),Xn=e=>({[Fn]:Object.keys(e).map(t=>({[t]:e[t]}))});function Yn(e,t,{auto:n=!0}={}){const r=e=>{let o=Object.keys(e);const i=(e=>!!e[Vn])(e);if(!i&&o.length>1&&!Bn(e))return r(Xn(e));if((e=>!sn(e)&&dn(e)&&!Bn(e))(e)){const r=i?e[Vn]:o[0],a=i?e[Gn]:e[r];if(!ln(a))throw new Error((e=>`Invalid value for key ${e}`)(r));const s={keyId:bn(r),pattern:a};return n&&(s.searcher=Zn(a,t)),s}let a={children:[],operator:o[0]};return o.forEach(t=>{const n=e[t];sn(n)&&n.forEach(e=>{a.children.push(r(e))})}),a};return Bn(e)||(e=Xn(e)),r(e)}function Wn(e,t){const n=e.matches;t.matches=[],fn(n)&&n.forEach(e=>{if(!fn(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let o={indices:n,value:r};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)})}function qn(e,t){t.score=e.score}class Hn{constructor(e,t={},n){this.options={...wn,...t},this.options.useExtendedSearch,this._keyStore=new gn(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof xn))throw new Error("Incorrect 'index' type");this._myIndex=t||kn(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){fn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:a}=this.options;let s=ln(e)?ln(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=wn.ignoreFieldNorm}){e.forEach(e=>{let n=1;e.matches.forEach(({key:e,norm:r,score:o})=>{const i=e?e.weight:null;n*=Math.pow(0===o&&i?Number.EPSILON:o,(i||1)*(t?1:r))}),e.score=n})}(s,{ignoreFieldNorm:a}),o&&s.sort(i),un(t)&&t>-1&&(s=s.slice(0,t)),function(e,t,{includeMatches:n=wn.includeMatches,includeScore:r=wn.includeScore}={}){const o=[];return n&&o.push(Wn),r&&o.push(qn),e.map(e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return o.length&&o.forEach(t=>{t(e,r)}),r})}(s,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=Zn(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:e,i:n,n:o})=>{if(!fn(e))return;const{isMatch:i,score:a,indices:s}=t.searchIn(e);i&&r.push({item:e,idx:n,matches:[{score:a,value:e,norm:o,indices:s}]})}),r}_searchLogical(e){const t=Yn(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:o}=e,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return i&&i.length?[{idx:r,item:t,matches:i}]:[]}const o=[];for(let i=0,a=e.children.length;i<a;i+=1){const a=e.children[i],s=n(a,t,r);if(s.length)o.push(...s);else if(e.operator===Fn)return[]}return o},r=this._myIndex.records,o={},i=[];return r.forEach(({$:e,i:r})=>{if(fn(e)){let a=n(t,e,r);a.length&&(o[r]||(o[r]={idx:r,item:e,matches:[]},i.push(o[r])),a.forEach(({matches:e})=>{o[r].matches.push(...e)}))}}),i}_searchObjectList(e){const t=Zn(e,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(({$:e,i:r})=>{if(!fn(e))return;let i=[];n.forEach((n,r)=>{i.push(...this._findMatches({key:n,value:e[r],searcher:t}))}),i.length&&o.push({idx:r,item:e,matches:i})}),o}_findMatches({key:e,value:t,searcher:n}){if(!fn(t))return[];let r=[];if(sn(t))t.forEach(({v:t,i:o,n:i})=>{if(!fn(t))return;const{isMatch:a,score:s,indices:l}=n.searchIn(t);a&&r.push({score:s,key:e,value:t,idx:o,norm:i,indices:l})});else{const{v:o,n:i}=t,{isMatch:a,score:s,indices:l}=n.searchIn(o);a&&r.push({score:s,key:e,value:o,norm:i,indices:l})}return r}}Hn.version="7.1.0",Hn.createIndex=kn,Hn.parseIndex=function(e,{getFn:t=wn.getFn,fieldNormWeight:n=wn.fieldNormWeight}={}){const{keys:r,records:o}=e,i=new xn({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(o),i},Hn.config=wn,Hn.parseQuery=Yn,function(...e){Ln.push(...e)}(zn);const Kn=({items:e,value:t,onChange:n,placeholder:r="Select items...",closeOnSelect:o=!1,multiple:i=!0,disabled:a=!1,onBeforeSelection:s,enableSearch:l=!1,searchPlaceholder:u="Search...",searchNoResultsText:c="No results found",searchFuseOptions:d,inputClasses:f,containerClasses:h})=>{const[p,m]=(0,$.useState)(!1),[g,v]=(0,$.useState)(""),y=(0,$.useRef)(null);(0,$.useEffect)(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,$.useEffect)(()=>{p||v("")},[p]);const b=(0,$.useMemo)(()=>{if(!l)return null;const t={includeScore:!1,threshold:.4,keys:["label","value"],...d};return new Hn(e,t)},[e,l,d]),O=(0,$.useMemo)(()=>l&&g.trim()&&b?b.search(g.trim()).map(e=>e.item):e,[e,g,l,b]),w=async e=>{let r;r=i?t.includes(e)?t.filter(t=>t!==e):[...t,e]:t.includes(e)?[]:[e],(!s||await Promise.resolve(s(t,r)))&&(n(r),o&&m(!1))},S=(0,$.useMemo)(()=>{var n;return 0===t.length?r:1===t.length?(null==(n=e.find(e=>e.value===t[0]))?void 0:n.label)??t[0]:`${t.length} items selected`},[t,e,r]);return(0,E.jsxs)("div",{ref:y,className:`fancy-dropdown-container ${h??""}`,style:{position:"relative",userSelect:"none",opacity:a?.6:1,pointerEvents:a?"none":"auto"},children:[(0,E.jsxs)("div",{className:"fancy-dropdown-trigger",onClick:()=>!a&&m(!p),style:{padding:"8px 12px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-color)",color:"var(--text-color)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,E.jsx)("span",{className:"fancy-dropdown-trigger-text",children:S}),(0,E.jsx)("i",{className:"fas "+(p?"fa-chevron-up":"fa-chevron-down"),style:{marginLeft:"8px"}})]}),p&&(0,E.jsxs)("div",{className:"fancy-dropdown-list",style:{position:"absolute",top:"100%",left:"0",right:"0",maxHeight:"300px",zIndex:1050,border:"1px solid var(--border-color)",borderTop:"none",backgroundColor:"var(--bg-color-popup, var(--bg-color-secondary, var(--greyCAIbg, var(--grey30))))",color:"var(--text-color)",borderRadius:"0 0 4px 4px",boxShadow:"0 4px 8px var(--black50a)",overflowY:"auto",display:"flex",flexDirection:"column"},children:[l&&(0,E.jsx)("div",{style:{padding:"8px",borderBottom:"1px solid var(--border-color)",position:"sticky",top:0,backgroundColor:"inherit"},children:(0,E.jsx)(j,{type:"text",placeholder:u,value:g,onChange:e=>v(e.target.value),autoFocus:!0,className:f})}),(0,E.jsx)("ul",{style:{listStyle:"none",margin:0,padding:0},children:O.length>0?O.map(e=>(0,E.jsx)(Jn,{item:e,isSelected:t.includes(e.value),onClick:w},e.value)):(0,E.jsx)("div",{style:{padding:"8px 12px",textAlign:"center",color:"var(--text-color-secondary, var(--grey50))"},children:c})})]})]})},Jn=$.memo(({item:e,isSelected:t,onClick:n})=>{const[r,o]=(0,$.useState)(!1);return(0,E.jsxs)("li",{onClick:()=>n(e.value),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),style:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:t?"var(--accent-color-bg, var(--link-color))":r?"var(--hover-color, var(--white20a))":"transparent"},children:[(0,E.jsx)("span",{children:e.label}),t&&(0,E.jsx)("i",{className:"checkmark fa-solid fa-check",style:{marginLeft:"8px"}})]})});async function er(e,t,{escapeHtml:n=!0}={}){await async function(e,...t){await SillyTavern.getContext().SlashCommandParser.commands[e].callback(...t)}("echo",{severity:e,escapeHtml:(!!n).toString()},t)}function tr(e){return(0,Q.getMaxContextSize)(e)}function nr(e,t){return(0,Q.parseMesExamples)(e,t)}function rr(e,t,n){return(0,Q.baseChatReplace)(e,t,n)}function or(e){return(0,V.getPromptRole)(e)}function ir(e,{wiFormat:t}={}){return(0,V.formatWorldInfo)(e,{wiFormat:t})}function ar(e){return(0,V.getPromptPosition)(e)}const sr=SillyTavern.getContext(),lr=({value:e,items:t,readOnlyValues:n=[],label:r,onChange:o,onItemsChange:i,enableCreate:a=!1,enableRename:s=!1,enableDelete:l=!1,onCreate:u,onRename:c,onDelete:d,buttons:f})=>{const h=(0,$.useMemo)(()=>t.find(t=>t.value===e),[t,e]),p=(0,$.useCallback)(e=>!!e&&n.includes(e),[n]);return(0,E.jsxs)("div",{className:"preset-select-container",style:{display:"flex",alignItems:"center"},children:[(0,E.jsx)(N,{value:e??"",onChange:t=>o(t.target.value,e),children:t.map(e=>(0,E.jsx)("option",{value:e.value,children:e.label},e.value))}),a&&(0,E.jsx)(C,{className:"fa-solid fa-file-circle-plus",title:`Create a new ${r}`,onClick:async()=>{const n=await sr.Popup.show.input(`Create a new ${r}`,`Please enter a name for the new ${r}:`,"");if(!n||""===n.trim())return;const a=n.trim();if(t.some(e=>e.value===a))return void await er("warning",`A ${r} with this name already exists.`);let s={value:a,label:a};if(u){const e=await Promise.resolve(u(a));if(!e.confirmed)return;e.value&&(s="string"==typeof e.value?{value:e.value,label:e.value}:e.value)}i([...t,s]),o(s.value,e)},"data-i18n":`[title]Create a new ${r}`}),s&&(0,E.jsx)(C,{className:"fa-solid fa-pencil",title:`Rename selected ${r}`,onClick:async()=>{if(!h)return void await er("warning",`Please select a ${r} to rename.`);if(p(h.value))return void await er("warning",`This ${r} cannot be renamed as it is read-only.`);const n=await sr.Popup.show.input(`Rename ${r}`,`Please enter a new name for "${h.label}":`,h.label);if(!n||""===n.trim()||n.trim()===h.value)return;const a=n.trim();if(t.some(e=>e.value===a))return void await er("warning",`A ${r} with this name already exists.`);let s={value:a,label:a};if(c){const e=await Promise.resolve(c(h.value,a));if(!e.confirmed)return;e.value&&(s="string"==typeof e.value?{value:e.value,label:e.value}:e.value)}const l=t.map(e=>e.value===h.value?s:e);i(l),o(s.value,e)},disabled:!h,"data-i18n":`[title]Rename selected ${r}`}),l&&(0,E.jsx)(C,{className:"fa-solid fa-trash-can",title:`Delete selected ${r}`,onClick:async()=>{var n;if(!h)return void await er("warning",`Please select a ${r} to delete.`);if(p(h.value))return void await er("warning",`This ${r} cannot be deleted as it is read-only.`);if(!await sr.Popup.show.confirm(`Delete ${r}`,`Are you sure you want to delete "${h.label}"?`)||d&&!await Promise.resolve(d(h.value)))return;const a=t.findIndex(e=>e.value===h.value),s=t.filter(e=>e.value!==h.value);let l;if(i(s),s.length>0){l=null==(n=s[Math.min(a,s.length-1)])?void 0:n.value}o(l,e)},disabled:!h,"data-i18n":`[title]Delete selected ${r}`}),null==f?void 0:f.map(e=>(0,E.jsx)(C,{className:e.icon,title:e.title,onClick:e.onClick,disabled:e.disabled,"data-i18n":e.i18n?`[title]${e.i18n}`:void 0},e.key))]})};var ur="flow-run",cr="flow-stop",dr=Object.defineProperty,fr=(e,t,n)=>((e,t,n)=>t in e?dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class hr extends Error{constructor(e,t){super(e),fr(this,"data"),this.data=t}toString(){return this.message}}async function pr(e,t){const n=SillyTavern.getContext(),r=new FormData;r.append("avatar",new Blob([JSON.stringify(e)],{type:"application/json"}),"character.json"),r.append("file_type","json");const o=n.getRequestHeaders();delete o["Content-Type"];const i=await fetch("/api/characters/import",{method:"POST",headers:o,body:r,cache:"no-cache"});if(!i.ok)throw new hr(i.statusText,i);t&&await n.getCharacters()}var mr=Object.defineProperty,gr=(e,t,n)=>((e,t,n)=>t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var vr=Object.defineProperty,yr=(e,t,n)=>((e,t,n)=>t in e?vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class br{encode(e){const t=Math.ceil(e.length/4);return new Array(t).fill(" ")}decode(e){return e.join("")}}var Or=Object.defineProperty,wr=(e,t,n)=>((e,t,n)=>t in e?Or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Sr{constructor(e){wr(this,"messages",[]),wr(this,"tokenizer"),wr(this,"maxContext"),wr(this,"currentTokenCount",0),this.tokenizer=new br,this.maxContext=e}getTokenCount(e){var t,n;return e.content?(null==(n=null==(t=e.source)?void 0:t.extra)?void 0:n.token_count)??this.tokenizer.encode(e.content).length:0}canFit(e){return this.currentTokenCount+this.getTokenCount(e)<=this.maxContext}add(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.push(e),this.currentTokenCount+=t,!0)}addFront(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.unshift(e),this.currentTokenCount+=t,!0)}addMany(e){const t=e.filter(e=>e.content),n=t.map(e=>this.getTokenCount(e)),r=n.reduce((e,t)=>e+t,0);if(this.currentTokenCount+r<=this.maxContext)return this.messages.push(...t),this.currentTokenCount+=r,!0;let o=0;const i=[];for(let e=t.length-1;e>=0;e--){const r=t[e],a=n[e];if(!(this.currentTokenCount+o+a<=this.maxContext))break;i.unshift(r),o+=a}return i.length>0&&(this.messages.push(...i),this.currentTokenCount+=o),i.length===t.length}insert(e,t){if(!t.content)return!0;const n=this.getTokenCount(t);return!(this.currentTokenCount+n>this.maxContext)&&(this.messages.splice(e,0,t),this.currentTokenCount+=n,!0)}getMessages(){return this.messages}}async function xr(e,{targetCharacterId:t,presetName:n,instructName:r,contextName:o,syspromptName:i,maxContext:a,includeNames:s,ignoreCharacterFields:l,ignoreAuthorNote:u,ignoreWorldInfo:c,messageIndexesBetween:d}={}){var f,h,p,m,g,v,y,b,O,w,S,x,k,_;if(!["textgenerationwebui","openai"].includes(e))throw new Error("Unsupported API");const P=SillyTavern.getContext();let{description:E,personality:$,persona:T,scenario:C,mesExamples:j,system:N,jailbreak:A}=l?{description:"",personality:"",persona:"",scenario:"",mesExamples:"",system:"",jailbreak:""}:P.getCharacterCardFields({chid:t});const I="textgenerationwebui"===e?null==(f=P.getPresetManager("instruct"))?void 0:f.getCompletionPresetByName(r):void 0,M=!(null==I||!I.enabled);let D=nr(j,M);let L=[];const Z=function(){var t,r;if("number"==typeof a)return a;if(!a)return tr();if("active"===a||!n)return tr();if("number"==typeof a)return a;let o;if("textgenerationwebui"===e){const e=null==(t=P.getPresetManager("textgenerationwebui"))?void 0:t.getCompletionPresetByName(n);o=null==e?void 0:e.max_length}else{const e=null==(r=P.getPresetManager("openai"))?void 0:r.getCompletionPresetByName(n);o=null==e?void 0:e.openai_max_context}return"number"==typeof o?o:tr()}();if(Z<=0)return{result:[],warnings:L};const Y=new Sr(Z),W=P.ToolManager.isToolCallingSupported(),q=(null==d?void 0:d.start)??0,H=null!=d&&d.end?d.end+1:void 0;let K=-1===q&&0===H?[]:P.chat.slice(q,H).filter(e=>{var t;return!e.is_system||W&&Array.isArray(null==(t=e.extra)?void 0:t.tool_invocations)});K=await Promise.all(K.map(async(e,t)=>{var n,r;let o=function(e,t,{characterOverride:n,isMarkdown:r,isPrompt:o,isEdit:i,depth:a}){return(0,X.getRegexedString)(e,t,{characterOverride:n,isMarkdown:r,isPrompt:o,isEdit:i,depth:a})}(e.mes,e.is_user?X.regex_placement.USER_INPUT:X.regex_placement.AI_OUTPUT,{isPrompt:!0,depth:K.length-t-1});return o=await async function(e,t){return await(0,U.appendFileContent)(e,t)}(e,o),null!=(n=null==e?void 0:e.extra)&&n.append_title&&null!=(r=null==e?void 0:e.extra)&&r.title&&(o=`${o}\n\n${e.extra.title}`),{...e,mes:o,index:t}}));const J=K.map(e=>z.world_info_include_names?`${e.name}: ${e.mes}`:e.mes).reverse(),{worldInfoString:ee,worldInfoBefore:te,worldInfoAfter:ne,worldInfoExamples:re,worldInfoDepth:oe,anBefore:ie,anAfter:ae}=c?{worldInfoString:"",worldInfoBefore:"",worldInfoAfter:"",worldInfoExamples:[],worldInfoDepth:[],anBefore:[],anAfter:[]}:await P.getWorldInfoPrompt(J,Z,!1);for(const ce of re){const de=ce.content;if(0===de.length)continue;const fe=nr(rr(de,Q.name1,Q.name2),M);ce.position===z.wi_anchor_position.before?D.unshift(...fe):D.push(...fe)}function se(){const e=[];for(let t=K.length-1;t>=0;t--){const n=K[t],r="System"!==n.name||n.is_user?n.is_user?"user":"assistant":"system";e.unshift({role:r,content:s&&"system"!=r?`${n.name}: ${n.mes}`:n.mes,source:n})}Y.addMany(e)}if("textgenerationwebui"===e){const he=[...D];D&&(D=function(e,t,n){return(0,F.formatInstructModeExamples)(e,t,n)}(D,Q.name1,Q.name2));const pe=null==(h=P.getPresetManager("sysprompt"))?void 0:h.getCompletionPresetByName(i);pe&&(N=P.powerUserSettings.prefer_character_prompt&&N?N:rr(pe.content,Q.name1,Q.name2),N=M?function(e,t){return(0,F.formatInstructModeSystemPrompt)(e,t)}(P.substituteParams(N,Q.name1,Q.name2,pe.content),I):N);const me={description:E,personality:$,persona:P.powerUserSettings.persona_description_position==R.persona_description_positions.IN_PROMPT?T:"",scenario:C,system:N,char:Q.name2,user:Q.name1,wiBefore:te,wiAfter:ne,loreBefore:te,loreAfter:ne,mesExamples:D.join(""),mesExamplesRaw:he.join("")},ge=null==(p=P.getPresetManager("context"))?void 0:p.getCompletionPresetByName(o);let ve=function(e,{customStoryString:t,customInstructSettings:n}={}){return(0,R.renderStoryString)(e,{customStoryString:t,customInstructSettings:n})}(me,{customInstructSettings:I,customStoryString:null==ge?void 0:ge.story_string});ve&&Y.add({role:"system",content:ve,ignoreInstruct:!0}),se()}else{let ye=function(e){const t=$e.find(t=>t.identifier===e);if(t)return t;const n=Se.prompts.find(t=>t.identifier===e);return n||void 0},be=function(e){return(0,V.setOpenAIMessages)(e)}(K),Oe=function(e){return(0,V.setOpenAIMessageExamples)(e)}(D);async function we(){let[e,t]=await function({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:o,worldInfoAfter:i,bias:a,type:s,quietPrompt:l,quietImage:u,extensionPrompts:c,cyclePrompt:d,systemPromptOverride:f,jailbreakPromptOverride:h,personaDescription:p,messages:m,messageExamples:g},v){return(0,V.prepareOpenAIMessages)({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:o,worldInfoAfter:i,bias:a,type:s,quietPrompt:l,quietImage:u,cyclePrompt:d,systemPromptOverride:f,jailbreakPromptOverride:h,personaDescription:p,extensionPrompts:c,messages:m,messageExamples:g},v)}({name2:Q.name2,charDescription:E,charPersonality:$,Scenario:C,worldInfoBefore:te,worldInfoAfter:ne,extensionPrompts:P.extensionPrompts,bias:"",type:"normal",quietPrompt:void 0,quietImage:void 0,cyclePrompt:"",systemPromptOverride:N,jailbreakPromptOverride:A,personaDescription:T,messages:be,messageExamples:Oe},!1);Y.addMany(e)}if(!n)return L.push("No preset name provided. Using default preset."),await we(),{result:Y.getMessages(),warnings:L};const Se=null==(m=P.getPresetManager("openai"))?void 0:m.getCompletionPresetByName(n);if(!Se)return console.warn(`Preset not found: ${n}. Using current preset.`),L.push(`Preset not found: ${n}. Using current preset.`),we(),{result:Y.getMessages(),warnings:L};let xe=null==(g=Se.prompt_order)?void 0:g.find(e=>e.character_id===Q.this_chid);if(!xe&&Se.prompt_order&&Se.prompt_order.length>0&&(xe=Se.prompt_order[0]),!xe)return console.warn(`No prompt order found for preset: ${n}. Using current preset.`),L.push(`No prompt order found for preset: ${n}. Using current preset.`),we(),{result:Y.getMessages(),warnings:L};const ke=C&&Se.scenario_format?P.substituteParams(Se.scenario_format):"",_e=$&&Se.personality_format?P.substituteParams(Se.personality_format):"",Pe=P.substituteParams(Se.group_nudge_prompt),Ee=Se.impersonation_prompt?P.substituteParams(Se.impersonation_prompt):"",$e=[];c||$e.push({role:"system",content:ir(te,{wiFormat:Se.wi_format}),identifier:"worldInfoBefore"},{role:"system",content:ir(ne,{wiFormat:Se.wi_format}),identifier:"worldInfoAfter"}),l||$e.push({role:"system",content:E,identifier:"charDescription"},{role:"system",content:_e,identifier:"charPersonality"},{role:"system",content:ke,identifier:"scenario"}),$e.push({role:"system",content:Ee,identifier:"impersonate"},{role:"system",content:Pe,identifier:"groupNudge"});const Te=P.extensionPrompts["1_memory"];Te&&Te.value&&$e.push({role:or(Te.role),content:Te.value,identifier:"summary",position:ar(Te.position)});const Ce=P.extensionPrompts["2_floating_prompt"];!u&&Ce&&Ce.value&&$e.push({role:or(Ce.role),content:Ce.value,identifier:"authorsNote",position:ar(Ce.position)});const je=P.extensionPrompts["3_vectors"];je&&je.value&&$e.push({role:"system",content:je.value,identifier:"vectorsMemory",position:ar(je.position)});const Ne=P.extensionPrompts["4_vectors_data_bank"];Ne&&Ne.value&&$e.push({role:or(Ne.role),content:Ne.value,identifier:"vectorsDataBank",position:ar(Ne.position)});const Ae=P.extensionPrompts.chromadb;Ae&&Ae.value&&$e.push({role:"system",content:Ae.value,identifier:"smartContext",position:ar(Ae.position)}),!l&&P.powerUserSettings.persona_description&&P.powerUserSettings.persona_description_position===R.persona_description_positions.IN_PROMPT&&$e.push({role:"system",content:P.powerUserSettings.persona_description,identifier:"personaDescription"}),xe.order.forEach(e=>{if(!e.enabled)return;const t=ye(e.identifier);t&&t.content?Y.add({role:t.role??"system",content:P.substituteParams(t.content)}):"chatHistory"===e.identifier&&se()})}const le=["1_memory","2_floating_prompt","3_vectors","4_vectors_data_bank","chromadb","PERSONA_DESCRIPTION","QUIET_PROMPT","DEPTH_PROMPT"];for(const Ie in P.extensionPrompts)if(Object.hasOwn(P.extensionPrompts,Ie)){const Me=P.extensionPrompts[Ie];if(le.includes(Ie)||!P.extensionPrompts[Ie].value||![Q.extension_prompt_types.BEFORE_PROMPT,Q.extension_prompt_types.IN_PROMPT].includes(Me.position)||"function"==typeof Me.filter&&!await Me.filter())continue;const De={role:or(Me.role)??"system",content:Me.value};if(Me.position===Q.extension_prompt_types.BEFORE_PROMPT)Y.insert(Me.depth,De);else if(Me.position===Q.extension_prompt_types.IN_PROMPT){const Re=Y.getMessages();Y.insert(Re.length-Me.depth,De)}}for(const Qe of oe){const ze=Y.getMessages();Y.insert(ze.length-Qe.depth,{role:or(Qe.role),content:Qe.entries.join("\n")})}if(!l){const Le=function(e,t){return(0,B.getGroupDepthPrompts)(e,t)}(B.selected_group,Number(Q.this_chid));if(B.selected_group&&Array.isArray(Le)&&Le.length>0)Le.filter(e=>e.text).forEach((e,t)=>{const n=Y.getMessages();Y.insert(n.length-e.depth,{role:e.role,content:e.text})});else{const Ze=rr(null==(w=null==(O=null==(b=null==(y=null==(v=P.characters[Q.this_chid])?void 0:v.data)?void 0:y.extensions)?void 0:b.depth_prompt)?void 0:O.prompt)?void 0:w.trim(),Q.name1,Q.name2)||"";if(Ze){const Fe=Q.depth_prompt_depth_default,Ue=(null==(_=null==(k=null==(x=null==(S=P.characters[Q.this_chid])?void 0:S.data)?void 0:x.extensions)?void 0:k.depth_prompt)?void 0:_.role)??Q.depth_prompt_role_default,Ve=Y.getMessages();Y.insert(Ve.length-Fe,{role:or(Ue),content:Ze})}}}let ue=-1;if(!u){const Ge={prompt:Q.chat_metadata[G.metadata_keys.prompt],interval:Q.chat_metadata[G.metadata_keys.interval],position:Q.chat_metadata[G.metadata_keys.position],depth:Q.chat_metadata[G.metadata_keys.depth],role:Q.chat_metadata[G.metadata_keys.role]};if(Ge.prompt){Ge.prompt=rr(Ge.prompt,Q.name1,Q.name2);const Be={role:or(Ge.role),content:Ge.prompt};switch(Ge.position){case Q.extension_prompt_types.IN_PROMPT:Y.insert(1,Be),ue=1;break;case Q.extension_prompt_types.IN_CHAT:ue=Y.getMessages().length-Ge.depth,Y.insert(ue,Be);break;case Q.extension_prompt_types.BEFORE_PROMPT:Y.addFront(Be),ue=0}}}return ue>=0&&(ie.length>0&&(Y.insert(ue,{role:"system",content:ie.join("\n")}),ue++),ae.length>0&&Y.insert(ue+1,{role:"system",content:ae.join("\n")})),{result:Y.getMessages(),warnings:L}}async function kr(e,t,n){var r,o,i;function a(t){return e.includes("all")||e.includes(t)}const s=SillyTavern.getContext();let l={};const u=t?z.selected_world_info:z.world_names;if(a("global")&&null!=u&&u.length)for(const e of u){const t=await Pr(e);t&&(l[e]||(l[e]=[]),Object.values(t).forEach(t=>{l[e].push(t)}))}if(a("chat")){const e=s.chatMetadata[z.METADATA_KEY];if(e&&!l[e]){l[e]=[];const t=await s.loadWorldInfo(e);t&&Object.values(t.entries).forEach(t=>{l[e].push(t)})}}if(a("character")&&n){const e=s.characters[n];let t=new Set;const a=null==(o=null==(r=null==e?void 0:e.data)?void 0:r.extensions)?void 0:o.world;a&&t.add(a);const u=function(e,{manualAvatarKey:t}={}){return(0,Y.getCharaFilename)(e,{manualAvatarKey:t})}(n),c=null==(i=z.world_info.charLore)?void 0:i.find(e=>e.name===u);c&&(t=new Set([...t,...c.extraBooks]));for(const e of t){const t=await s.loadWorldInfo(e);!t||l[e]||(l[e]=[],Object.values(t.entries).forEach(t=>{l[e].push(t)}))}}if(a("persona")){const e=s.powerUserSettings.persona_description_lorebook;if(e&&!l[e]){l[e]=[];const t=await s.loadWorldInfo(e);t&&Object.values(t.entries).forEach(t=>{l[e].push(t)})}}return l}async function _r({entry:e,selectedWorldName:t,skipSave:n=!1,skipReload:r=!1,operation:o="auto"}){const i=SillyTavern.getContext(),a=await i.loadWorldInfo(t);if(!a)throw new Error("Failed to load world info");const s=Object.values(a.entries),l=s.length>0?s[s.length-1]:void 0;let u;if("update"===o||"auto"===o){const t=Object.values(a.entries).find(t=>t.uid===e.uid);if(t)("auto"===o||"update"===o)&&(u=t);else if("update"===o)throw new Error("Entry not found for update operation")}const c=u?"update":"add";if(!u){if(u=function(e,t){return(0,z.createWorldInfoEntry)(e,t)}(t,a),!u)throw new Error("Failed to create entry");if(l){const e=u.uid;Object.assign(u,l),u.uid=e}}return u.key=e.key,u.content=e.content,u.comment=e.comment,n||await i.saveWorldInfo(t,a),r||i.reloadWorldInfoEditor(t,!0),{entry:u,operation:c}}async function Pr(e){const t=await SillyTavern.getContext().loadWorldInfo(e);return t?Object.values(t.entries):null}function Er(e){return function(e){if(Array.isArray(e))return $r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Tr,Cr,jr,Nr,Ar="1.0",Ir=Ar,Mr={};function Dr(e,t,n){var r=t||Ar;if(r===n)return e;var o=function(e,t){if(e===t)return[];for(var n=new Set,r=[{version:e,path:[e]}];r.length>0;){var o=r.shift(),i=o.version,a=o.path;if(i===t)return a;if(!n.has(i)){n.add(i);var s=Mr[i];if(s)for(var l in s)n.has(l)||r.push({version:l,path:[].concat(Er(a),[l])})}}return null}(r,n);if(!o)return console.warn("[Flowchart] No migration path found from ".concat(r," to ").concat(n,". Flow may not work correctly.")),e;for(var i=e,a=0;a<o.length-1;a++){var s,l=o[a],u=o[a+1],c=null===(s=Mr[l])||void 0===s?void 0:s[u];if(!c){console.warn("[Flowchart] No migration function found for ".concat(l," -> ").concat(u));break}try{i=c(i),console.log("[Flowchart] Migrated flow from ".concat(l," to ").concat(u))}catch(e){console.error("[Flowchart] Failed to migrate flow from ".concat(l," to ").concat(u,":"),e);break}}return i}function Rr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Qr(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Qr(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Qr(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Qr(d,"constructor",u),Qr(u,"constructor",l),l.displayName="GeneratorFunction",Qr(u,o,"GeneratorFunction"),Qr(d),Qr(d,o,"Generator"),Qr(d,r,function(){return this}),Qr(d,"toString",function(){return"[object Generator]"}),(Rr=function(){return{w:i,m:f}})()}function Qr(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Qr=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Qr(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Qr(e,t,n,r)}function zr(e){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zr(e)}function Lr(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function Zr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=zr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Cr=Ar,jr=function(e){return e},Mr[Tr=Ar]||(Mr[Tr]={}),Mr[Tr][Cr]=jr,function(e){e.NATIVE="native",e.JSON="json",e.XML="xml"}(Nr||(Nr={}));var Fr="json";var Ur="default",Vr={version:"0.3.0",formatVersion:"F_1.0",enabled:!0,prompts:Zr(Zr({},Fr,"You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid JSON object that strictly adheres to the provided JSON schema.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire JSON object in a markdown code block (```json\\n...\\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The JSON object inside the code block MUST be valid and conform to the schema.\n\n**TASK:**\n{{instructions}}\n\n**JSON SCHEMA TO FOLLOW:**\n```json\n{{schema}}\n```\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```json\n{{example_response}}\n```"),"xml","You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid XML structure that strictly adheres to the provided example.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire XML object in a markdown code block (```xml\\n...\\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The XML object inside the code block MUST be valid.\n\n**TASK:**\n{{instructions}}\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```xml\n<root>\n{{example_response}}\n</root>\n```"),activeFlow:Ur,flows:[{id:Ur,name:"default",flow:{nodes:[],edges:[]},flowVersion:Ir,allowDangerousExecution:!1,enabled:!0}],isPaletteCollapsed:!1,showExecutionNotifications:!0,qrGroupOrder:["default"]},Gr=new class{constructor(e,t){gr(this,"settingsKey"),gr(this,"defaultSettings"),this.settingsKey=e,this.defaultSettings=t}async initializeSettings(e={}){const{strategy:t="recursive"}=e,n=this.defaultSettings.version,r=this.defaultSettings.formatVersion,o=SillyTavern.getContext().extensionSettings[this.settingsKey],i={version:{changed:!1,new:n??""},formatVersion:{changed:!1,new:r??""},oldSettings:null,newSettings:this.defaultSettings};if(!o)return SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings(),i;const a={...i,oldSettings:structuredClone(o),version:{changed:!1,old:o.version,new:o.version},formatVersion:{changed:!1,old:o.formatVersion,new:o.formatVersion}};if("recursive"===t){let e=function(t,n){let r=!1;for(const o of Object.keys(n))void 0===t[o]?(t[o]=n[o],r=!0):"object"==typeof n[o]&&null!==n[o]&&(t[o]=t[o]||{},e(t[o],n[o])&&(r=!0));return r};n&&o.version!==n&&(a.version.changed=!0,a.version.new=n,o.version=n),r&&"*"!==r&&o.formatVersion!==r&&(a.formatVersion.changed=!0,a.formatVersion.new=r,o.formatVersion=r),(e(o,this.defaultSettings)||a.version.changed||a.formatVersion.changed)&&this.saveSettings()}else if(Array.isArray(t)){n&&!o.version&&(o.version=n,a.version.changed=!0,a.version.new=n),r&&!o.formatVersion&&(o.formatVersion=r,a.formatVersion.changed=!0,a.formatVersion.new=r);let e=structuredClone(o),i=o.formatVersion;try{let n;do{n=!1;let r=t.find(e=>e.from===i);if(r&&r.to>i)e=await r.action(e),i=r.to,e.formatVersion=r.to,n=!0;else for(const r of t)if("*"===r.from&&r.to>i&&i!==r.to){e=await r.action(e),i=r.to,e.formatVersion=r.to,n=!0;break}}while(n);if(i!==o.formatVersion){a.formatVersion.changed=!0,a.formatVersion.new=i;const t=this.defaultSettings.version;t&&(e.version=t)}if(a.formatVersion.changed){for(const e of Object.keys(o))delete o[e];Object.assign(o,e),this.saveSettings()}}catch(e){throw console.error("Failed to apply version changes:",e),new Error(`Version migration failed: ${e instanceof Error?e.message:e}`,{cause:e})}}return a.newSettings=o,a}getSettings(){return SillyTavern.getContext().extensionSettings[this.settingsKey]}updateSetting(e,t){SillyTavern.getContext().extensionSettings[this.settingsKey][e]=t,this.saveSettings()}saveSettings(){SillyTavern.getContext().saveSettingsDebounced()}resetSettings(){SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings()}}("flowchart",Vr);function Br(e,t,n){return Xr.apply(this,arguments)}function Xr(){return Xr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Lr(i,r,o,a,s,"next",e)}function s(e){Lr(i,r,o,a,s,"throw",e)}a(void 0)})}}(Rr().m(function e(t,n,r){return Rr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,U.hideChatMessageRange)(t,n,r);case 1:return e.a(2)}},e)})),Xr.apply(this,arguments)}function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qr(){var e=Yr((0,$.useState)(0),2)[1];return(0,$.useCallback)(function(){return e(function(e){return e+1})},[])}function Hr(e,t,n){var r=Gr.getSettings();("info"!==e||"execution"!==n||r.showExecutionNotifications)&&er(e,t)}function Kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t){var n=Kr((0,$.useState)(e),2),r=n[0],o=n[1];return(0,$.useEffect)(function(){var n=setTimeout(function(){o(e)},t);return function(){clearTimeout(n)}},[e,t]),r}function to(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return no(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?no(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ro=[Fr,"xml"],oo=function(){var e=qr(),t=Gr.getSettings(),n=eo(t.prompts,500);(0,$.useEffect)(function(){Gr.saveSettings()},[n]);return(0,E.jsxs)("div",{className:"flowchart-popup-section",children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,E.jsx)("h3",{children:"Prompt Templates"}),(0,E.jsx)(C,{onClick:function(){for(var n="new_prompt",r=1;t.prompts[n];)n="new_prompt_".concat(r++);t.prompts[n]="Your new prompt template here. Use {{handlebars}} for variables.",e()},children:"Add New Prompt"})]}),Object.entries(t.prompts).map(function(n){var r=to(n,2),o=r[0],i=r[1],a=ro.includes(o);return(0,E.jsxs)("div",{className:"setting-row",style:{border:"1px solid #555",padding:"10px",borderRadius:"4px"},children:[(0,E.jsxs)("div",{className:"title_restorable",children:[a?(0,E.jsx)("label",{style:{textTransform:"capitalize"},children:o.replace(/([A-Z])/g," $1")}):(0,E.jsx)(j,{defaultValue:o,onBlur:function(n){n.target.value!==o&&function(n,r){if(!r||ro.includes(r)||t.prompts[r])return Hr("error","Invalid or duplicate prompt name: ".concat(r),"ui_action"),void e();var o=t.prompts[n];delete t.prompts[n],t.prompts[r]=o,e()}(o,n.target.value)},title:"Rename prompt and press Enter or click away"}),(0,E.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[a&&(0,E.jsx)("button",{className:"fa-solid fa-undo",title:"Restore ".concat(o," to default"),onClick:function(){return n=o,t.prompts[n]=Vr.prompts[n],void e();var n}}),!a&&(0,E.jsx)(C,{color:"danger",onClick:function(){return n=o,void(ro.includes(n)||(delete t.prompts[n],e()));var n},children:"Delete"})]})]}),(0,E.jsx)(A,{value:i,onChange:function(n){return function(n,r){t.prompts[n]=r,e()}(o,n.target.value)},rows:8})]},o)})]})};function io(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=io(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ao={value:()=>{}};function so(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new lo(r)}function lo(e){this._=e}function uo(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function co(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=ao,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}lo.prototype=so.prototype={constructor:lo,on:function(e,t){var n,r=this._,o=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<a;)if(n=(e=o[i]).type)r[n]=co(r[n],e.name,t);else if(null==t)for(n in r)r[n]=co(r[n],e.name,null);return this}for(;++i<a;)if((n=(e=o[i]).type)&&(n=uo(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lo(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const fo=so;function ho(){}function po(e){return null==e?ho:function(){return this.querySelector(e)}}function mo(){return[]}function go(e){return null==e?mo:function(){return this.querySelectorAll(e)}}function vo(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function yo(e){return function(){return this.matches(e)}}function bo(e){return function(t){return t.matches(e)}}var Oo=Array.prototype.find;function wo(){return this.firstElementChild}var So=Array.prototype.filter;function xo(){return Array.from(this.children)}function ko(e){return new Array(e.length)}function _o(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Po(e,t,n,r,o,i){for(var a,s=0,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new _o(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function Eo(e,t,n,r,o,i,a){var s,l,u,c=new Map,d=t.length,f=i.length,h=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(h[s]=u=a.call(l,l.__data__,s,t)+"",c.has(u)?o[s]=l:c.set(u,l));for(s=0;s<f;++s)u=a.call(e,i[s],s,i)+"",(l=c.get(u))?(r[s]=l,l.__data__=i[s],c.delete(u)):n[s]=new _o(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(h[s])===l&&(o[s]=l)}function $o(e){return e.__data__}function To(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Co(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}_o.prototype={constructor:_o,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var jo="http://www.w3.org/1999/xhtml";const No={svg:"http://www.w3.org/2000/svg",xhtml:jo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ao(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),No.hasOwnProperty(t)?{space:No[t],local:e}:e}function Io(e){return function(){this.removeAttribute(e)}}function Mo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Do(e,t){return function(){this.setAttribute(e,t)}}function Ro(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qo(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function zo(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Lo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zo(e){return function(){this.style.removeProperty(e)}}function Fo(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Uo(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Vo(e,t){return e.style.getPropertyValue(t)||Lo(e).getComputedStyle(e,null).getPropertyValue(t)}function Go(e){return function(){delete this[e]}}function Bo(e,t){return function(){this[e]=t}}function Xo(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Yo(e){return e.trim().split(/^|\s+/)}function Wo(e){return e.classList||new qo(e)}function qo(e){this._node=e,this._names=Yo(e.getAttribute("class")||"")}function Ho(e,t){for(var n=Wo(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Ko(e,t){for(var n=Wo(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Jo(e){return function(){Ho(this,e)}}function ei(e){return function(){Ko(this,e)}}function ti(e,t){return function(){(t.apply(this,arguments)?Ho:Ko)(this,e)}}function ni(){this.textContent=""}function ri(e){return function(){this.textContent=e}}function oi(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ii(){this.innerHTML=""}function ai(e){return function(){this.innerHTML=e}}function si(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function li(){this.nextSibling&&this.parentNode.appendChild(this)}function ui(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ci(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===jo&&t.documentElement.namespaceURI===jo?t.createElement(e):t.createElementNS(n,e)}}function di(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fi(e){var t=Ao(e);return(t.local?di:ci)(t)}function hi(){return null}function pi(){var e=this.parentNode;e&&e.removeChild(this)}function mi(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gi(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vi(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function yi(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function bi(e,t,n){var r=Lo(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Oi(e,t){return function(){return bi(this,e,t)}}function wi(e,t){return function(){return bi(this,e,t.apply(this,arguments))}}qo.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Si=[null];function xi(e,t){this._groups=e,this._parents=t}function ki(){return new xi([[document.documentElement]],Si)}xi.prototype=ki.prototype={constructor:xi,select:function(e){"function"!=typeof e&&(e=po(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],l=s.length,u=r[o]=new Array(l),c=0;c<l;++c)(i=s[c])&&(a=e.call(i,i.__data__,c,s))&&("__data__"in i&&(a.__data__=i.__data__),u[c]=a);return new xi(r,this._parents)},selectAll:function(e){e="function"==typeof e?vo(e):go(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),o.push(a));return new xi(r,o)},selectChild:function(e){return this.select(null==e?wo:function(e){return function(){return Oo.call(this.children,e)}}("function"==typeof e?e:bo(e)))},selectChildren:function(e){return this.selectAll(null==e?xo:function(e){return function(){return So.call(this.children,e)}}("function"==typeof e?e:bo(e)))},filter:function(e){"function"!=typeof e&&(e=yo(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],u=0;u<s;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&l.push(i);return new xi(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,$o);var n=t?Eo:Po,r=this._parents,o=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=r[u],d=o[u],f=d.length,h=To(e.call(c,c&&c.__data__,u,r)),p=h.length,m=s[u]=new Array(p),g=a[u]=new Array(p);n(c,d,m,g,l[u]=new Array(f),h,t);for(var v,y,b=0,O=0;b<p;++b)if(v=m[b]){for(b>=O&&(O=b+1);!(y=g[O])&&++O<p;);v._next=y||null}}return(a=new xi(a,r))._enter=s,a._exit=l,a},enter:function(){return new xi(this._enter||this._groups.map(ko),this._parents)},exit:function(){return new xi(this._exit||this._groups.map(ko),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var u,c=n[l],d=r[l],f=c.length,h=s[l]=new Array(f),p=0;p<f;++p)(u=c[p]||d[p])&&(h[p]=u);for(;l<o;++l)s[l]=n[l];return new xi(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Co);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,u=o[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new xi(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=Ao(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Mo:Io:"function"==typeof t?n.local?zo:Qo:n.local?Ro:Do)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Zo:"function"==typeof t?Uo:Fo)(e,t,null==n?"":n)):Vo(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Go:"function"==typeof t?Xo:Bo)(e,t)):this.node()[e]},classed:function(e,t){var n=Yo(e+"");if(arguments.length<2){for(var r=Wo(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?ti:t?Jo:ei)(n,t))},text:function(e){return arguments.length?this.each(null==e?ni:("function"==typeof e?oi:ri)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ii:("function"==typeof e?si:ai)(e)):this.node().innerHTML},raise:function(){return this.each(li)},lower:function(){return this.each(ui)},append:function(e){var t="function"==typeof e?e:fi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:fi(e),r=null==t?hi:"function"==typeof t?t:po(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(pi)},clone:function(e){return this.select(e?gi:mi)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?yi:vi,r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?wi:Oi)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const _i=ki;function Pi(e){return"string"==typeof e?new xi([[document.querySelector(e)]],[document.documentElement]):new xi([[e]],Si)}function Ei(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const $i={passive:!1},Ti={capture:!0,passive:!1};function Ci(e){e.stopImmediatePropagation()}function ji(e){e.preventDefault(),e.stopImmediatePropagation()}function Ni(e){var t=e.document.documentElement,n=Pi(e).on("dragstart.drag",ji,Ti);"onselectstart"in t?n.on("selectstart.drag",ji,Ti):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ai(e,t){var n=e.document.documentElement,r=Pi(e).on("dragstart.drag",null);t&&(r.on("click.drag",ji,Ti),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ii=e=>()=>e;function Mi(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function Di(e){return!e.ctrlKey&&!e.button}function Ri(){return this.parentNode}function Qi(e,t){return null==t?{x:e.x,y:e.y}:t}function zi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Li(){var e,t,n,r,o=Di,i=Ri,a=Qi,s=zi,l={},u=fo("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,$i).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,s){if(!r&&o.call(this,a,s)){var l=b(this,i.call(this,a,s),a,s,"mouse");l&&(Pi(a.view).on("mousemove.drag",p,Ti).on("mouseup.drag",m,Ti),Ni(a.view),Ci(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function p(r){if(ji(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}l.mouse("drag",r)}function m(e){Pi(e.view).on("mousemove.drag mouseup.drag",null),Ai(e.view,n),ji(e),l.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,a=e.changedTouches,s=i.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=b(this,s,e,t,a[n].identifier,a[n]))&&(Ci(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(ji(e),n("drag",e,r[t]))}function y(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=l[o[t].identifier])&&(Ci(e),n("end",e,o[t]))}function b(e,t,n,r,o,i){var s,d,h,p=u.copy(),m=Ei(i||n,t);if(null!=(h=a.call(e,new Mi("beforestart",{sourceEvent:n,target:f,identifier:o,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=h.x-m[0]||0,d=h.y-m[1]||0,function n(i,a,u){var g,v=m;switch(i){case"start":l[o]=n,g=c++;break;case"end":delete l[o],--c;case"drag":m=Ei(u||a,t),g=c}p.call(i,e,new Mi(i,{sourceEvent:a,subject:h,target:f,identifier:o,active:g,x:m[0]+s,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:Ii(!!e),f):o},f.container=function(e){return arguments.length?(i="function"==typeof e?e:Ii(e),f):i},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:Ii(e),f):a},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Ii(!!e),f):s},f.on=function(){var e=u.on.apply(u,arguments);return e===u?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}Mi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Zi(e){return((e=Math.exp(e))+1/e)/2}const Fi=function e(t,n,r){function o(e,o){var i,a,s=e[0],l=e[1],u=e[2],c=o[0],d=o[1],f=o[2],h=c-s,p=d-l,m=h*h+p*p;if(m<1e-12)a=Math.log(f/u)/t,i=function(e){return[s+e*h,l+e*p,u*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),v=(f*f-u*u+r*m)/(2*u*n*g),y=(f*f-u*u-r*m)/(2*f*n*g),b=Math.log(Math.sqrt(v*v+1)-v),O=Math.log(Math.sqrt(y*y+1)-y);a=(O-b)/t,i=function(e){var r=e*a,o=Zi(b),i=u/(n*g)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+i*h,l+i*p,u*o/Zi(t*r+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var Ui,Vi,Gi=0,Bi=0,Xi=0,Yi=0,Wi=0,qi=0,Hi="object"==typeof performance&&performance.now?performance:Date,Ki="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ji(){return Wi||(Ki(ea),Wi=Hi.now()+qi)}function ea(){Wi=0}function ta(){this._call=this._time=this._next=null}function na(e,t,n){var r=new ta;return r.restart(e,t,n),r}function ra(){Wi=(Yi=Hi.now())+qi,Gi=Bi=0;try{!function(){Ji(),++Gi;for(var e,t=Ui;t;)(e=Wi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Gi}()}finally{Gi=0,function(){var e,t,n=Ui,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ui=t);Vi=e,ia(r)}(),Wi=0}}function oa(){var e=Hi.now(),t=e-Yi;t>1e3&&(qi-=t,Yi=e)}function ia(e){Gi||(Bi&&(Bi=clearTimeout(Bi)),e-Wi>24?(e<1/0&&(Bi=setTimeout(ra,e-Hi.now()-qi)),Xi&&(Xi=clearInterval(Xi))):(Xi||(Yi=Hi.now(),Xi=setInterval(oa,1e3)),Gi=1,Ki(ra)))}function aa(e,t,n){var r=new ta;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}ta.prototype=na.prototype={constructor:ta,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Ji():+n)+(null==t?0:+t),this._next||Vi===this||(Vi?Vi._next=this:Ui=this,Vi=this),this._call=e,this._time=n,ia()},stop:function(){this._call&&(this._call=null,this._time=1/0,ia())}};var sa=fo("start","end","cancel","interrupt"),la=[];function ua(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var u,c,d,f;if(1!==n.state)return l();for(u in o)if((f=o[u]).name===n.name){if(3===f.state)return aa(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[u])}if(aa(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=na(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:sa,tween:la,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function ca(e,t){var n=fa(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function da(e,t){var n=fa(e,t);if(n.state>3)throw new Error("too late; already running");return n}function fa(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ha(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}function pa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ma,ga=180/Math.PI,va={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ya(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*ga,skewX:Math.atan(l)*ga,scaleX:a,scaleY:s}}function ba(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,r,o,i,a,s){if(e!==o||r!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:pa(e,o)},{i:l-2,x:pa(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:pa(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:pa(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,s,l),function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:pa(e,n)},{i:s-2,x:pa(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var Oa=ba(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?va:ya(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),wa=ba(function(e){return null==e?va:(ma||(ma=document.createElementNS("http://www.w3.org/2000/svg","g")),ma.setAttribute("transform",e),(e=ma.transform.baseVal.consolidate())?ya((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):va)},", ",")",")");function Sa(e,t){var n,r;return function(){var o=da(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function xa(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=da(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=s;break}l===u&&o.push(s)}i.tween=o}}function ka(e,t,n){var r=e._id;return e.each(function(){var e=da(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return fa(e,r).value[t]}}function _a(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ea(){}var $a=.7,Ta=1/$a,Ca="\\s*([+-]?\\d+)\\s*",ja="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Aa=/^#([0-9a-f]{3,8})$/,Ia=new RegExp(`^rgb\\(${Ca},${Ca},${Ca}\\)$`),Ma=new RegExp(`^rgb\\(${Na},${Na},${Na}\\)$`),Da=new RegExp(`^rgba\\(${Ca},${Ca},${Ca},${ja}\\)$`),Ra=new RegExp(`^rgba\\(${Na},${Na},${Na},${ja}\\)$`),Qa=new RegExp(`^hsl\\(${ja},${Na},${Na}\\)$`),za=new RegExp(`^hsla\\(${ja},${Na},${Na},${ja}\\)$`),La={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Za(){return this.rgb().formatHex()}function Fa(){return this.rgb().formatRgb()}function Ua(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Aa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Va(t):3===n?new Xa(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ga(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ga(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ia.exec(e))?new Xa(t[1],t[2],t[3],1):(t=Ma.exec(e))?new Xa(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Da.exec(e))?Ga(t[1],t[2],t[3],t[4]):(t=Ra.exec(e))?Ga(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Qa.exec(e))?Ja(t[1],t[2]/100,t[3]/100,1):(t=za.exec(e))?Ja(t[1],t[2]/100,t[3]/100,t[4]):La.hasOwnProperty(e)?Va(La[e]):"transparent"===e?new Xa(NaN,NaN,NaN,0):null}function Va(e){return new Xa(e>>16&255,e>>8&255,255&e,1)}function Ga(e,t,n,r){return r<=0&&(e=t=n=NaN),new Xa(e,t,n,r)}function Ba(e,t,n,r){return 1===arguments.length?((o=e)instanceof Ea||(o=Ua(o)),o?new Xa((o=o.rgb()).r,o.g,o.b,o.opacity):new Xa):new Xa(e,t,n,null==r?1:r);var o}function Xa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ya(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}`}function Wa(){const e=qa(this.opacity);return`${1===e?"rgb(":"rgba("}${Ha(this.r)}, ${Ha(this.g)}, ${Ha(this.b)}${1===e?")":`, ${e})`}`}function qa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ha(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ka(e){return((e=Ha(e))<16?"0":"")+e.toString(16)}function Ja(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ts(e,t,n,r)}function es(e){if(e instanceof ts)return new ts(e.h,e.s,e.l,e.opacity);if(e instanceof Ea||(e=Ua(e)),!e)return new ts;if(e instanceof ts)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new ts(a,s,l,e.opacity)}function ts(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ns(e){return(e=(e||0)%360)<0?e+360:e}function rs(e){return Math.max(0,Math.min(1,e||0))}function os(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function is(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}_a(Ea,Ua,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Za,formatHex:Za,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return es(this).formatHsl()},formatRgb:Fa,toString:Fa}),_a(Xa,Ba,Pa(Ea,{brighter(e){return e=null==e?Ta:Math.pow(Ta,e),new Xa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?$a:Math.pow($a,e),new Xa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xa(Ha(this.r),Ha(this.g),Ha(this.b),qa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ya,formatHex:Ya,formatHex8:function(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}${Ka(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Wa,toString:Wa})),_a(ts,function(e,t,n,r){return 1===arguments.length?es(e):new ts(e,t,n,null==r?1:r)},Pa(Ea,{brighter(e){return e=null==e?Ta:Math.pow(Ta,e),new ts(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?$a:Math.pow($a,e),new ts(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Xa(os(e>=240?e-240:e+120,o,r),os(e,o,r),os(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new ts(ns(this.h),rs(this.s),rs(this.l),qa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qa(this.opacity);return`${1===e?"hsl(":"hsla("}${ns(this.h)}, ${100*rs(this.s)}%, ${100*rs(this.l)}%${1===e?")":`, ${e})`}`}}));const as=e=>()=>e;function ss(e,t){return function(n){return e+n*t}}function ls(e){return 1===(e=+e)?us:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):as(isNaN(t)?n:t)}}function us(e,t){var n=t-e;return n?ss(e,n):as(isNaN(e)?t:e)}const cs=function e(t){var n=ls(t);function r(e,t){var r=n((e=Ba(e)).r,(t=Ba(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=us(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function ds(e){return function(t){var n,r,o=t.length,i=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=Ba(t[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=e(i),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=s(e),r+""}}}ds(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],a=r>0?e[r-1]:2*o-i,s=r<t-1?e[r+2]:2*i-o;return is((n-r/t)*t,a,o,i,s)}}),ds(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return is((n-r/t)*t,o,i,a,s)}});var fs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hs=new RegExp(fs.source,"g");function ps(e,t){var n,r,o,i=fs.lastIndex=hs.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=fs.exec(e))&&(r=hs.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:pa(n,r)})),i=hs.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function ms(e,t){var n;return("number"==typeof t?pa:t instanceof Ua?cs:(n=Ua(t))?(t=n,cs):ps)(e,t)}function gs(e){return function(){this.removeAttribute(e)}}function vs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ys(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function bs(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Os(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttribute(e)}}function ws(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function Ss(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function xs(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function ks(e,t){return function(){ca(this,e).delay=+t.apply(this,arguments)}}function _s(e,t){return t=+t,function(){ca(this,e).delay=t}}function Ps(e,t){return function(){da(this,e).duration=+t.apply(this,arguments)}}function Es(e,t){return t=+t,function(){da(this,e).duration=t}}var $s=_i.prototype.constructor;function Ts(e){return function(){this.style.removeProperty(e)}}var Cs=0;function js(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ns(){return++Cs}var As=_i.prototype;js.prototype=function(e){return _i().transition(e)}.prototype={constructor:js,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=po(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,l,u=r[a],c=u.length,d=i[a]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=e.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),d[f]=l,ua(d[f],t,n,f,d,fa(s,n)));return new js(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=go(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var f,h=e.call(l,l.__data__,d,u),p=fa(l,n),m=0,g=h.length;m<g;++m)(f=h[m])&&ua(f,t,n,m,h,p);i.push(h),a.push(l)}return new js(i,a,t,n)},selectChild:As.selectChild,selectChildren:As.selectChildren,filter:function(e){"function"!=typeof e&&(e=yo(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],u=0;u<s;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&l.push(i);return new js(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,u=t[s],c=n[s],d=u.length,f=a[s]=new Array(d),h=0;h<d;++h)(l=u[h]||c[h])&&(f[h]=l);for(;s<r;++s)a[s]=t[s];return new js(a,this._parents,this._name,this._id)},selection:function(){return new $s(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Ns(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=fa(a,t);ua(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new js(r,this._parents,e,n)},call:As.call,nodes:As.nodes,node:As.node,size:As.size,empty:As.empty,each:As.each,on:function(e,t){var n=this._id;return arguments.length<2?fa(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?ca:da;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=Ao(e),r="transform"===n?wa:ms;return this.attrTween(e,"function"==typeof t?(n.local?ws:Os)(n,r,ka(this,"attr."+e,t)):null==t?(n.local?vs:gs)(n):(n.local?bs:ys)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Ao(e);return this.tween(n,(r.local?Ss:xs)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Oa:ms;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=Vo(this,e),a=(this.style.removeProperty(e),Vo(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,Ts(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var a=Vo(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Vo(this,e)),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}(e,r,ka(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var l=da(this,e),u=l.on,c=null==l.value[a]?i||(i=Ts(t)):void 0;u===n&&o===c||(r=(n=u).copy()).on(s,o=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var a=Vo(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ka(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=fa(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?Sa:xa)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ks:_s)(t,e)):fa(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Ps:Es)(t,e)):fa(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){da(this,e).ease=t}}(t,e)):fa(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;da(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){0===--o&&i()}};n.each(function(){var n=da(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===o&&i()})},[Symbol.iterator]:As[Symbol.iterator]};var Is={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ms(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}_i.prototype.interrupt=function(e){return this.each(function(){ha(this,e)})},_i.prototype.transition=function(e){var t,n;e instanceof js?(t=e._id,e=e._name):(t=Ns(),(n=Is).time=Ji(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)(a=s[u])&&ua(a,e,t,u,s,n||Ms(a,t));return new js(r,this._parents,e,t)};const Ds=e=>()=>e;function Rs(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Qs(e,t,n){this.k=e,this.x=t,this.y=n}Qs.prototype={constructor:Qs,scale:function(e){return 1===e?this:new Qs(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Qs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zs=new Qs(1,0,0);function Ls(e){for(;!e.__zoom;)if(!(e=e.parentNode))return zs;return e.__zoom}function Zs(e){e.stopImmediatePropagation()}function Fs(e){e.preventDefault(),e.stopImmediatePropagation()}function Us(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Vs(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Gs(){return this.__zoom||zs}function Bs(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Xs(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ys(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Ws(){var e,t,n,r=Us,o=Vs,i=Ys,a=Bs,s=Xs,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Fi,f=fo("start","zoom","end"),h=0,p=10;function m(e){e.property("__zoom",Gs).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",_).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Qs(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Qs(e.k,r,o)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",function(){O(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,i=arguments,a=O(e,i).event(r),s=o.apply(e,i),l=null==n?y(s):"function"==typeof n?n.apply(e,i):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,i):t,h=d(c.invert(l).concat(u/c.k),f.invert(l).concat(u/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=u/t[2];e=new Qs(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}})}function O(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var n=O(this,t).event(e),o=this.__zoom,s=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,a.apply(this,arguments)))),c=Ei(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=o.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(o.k===s)return;n.mouse=[c,o.invert(c)],ha(this),n.start()}Fs(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",i(v(g(o,s),n.mouse[0],n.mouse[1]),n.extent,u))}}function x(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,a=O(this,t,!0).event(e),s=Pi(e.view).on("mousemove.zoom",function(e){if(Fs(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>h}a.event(e).zoom("mouse",i(v(a.that.__zoom,a.mouse[0]=Ei(e,o),a.mouse[1]),a.extent,u))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),Ai(e.view,a.moved),Fs(e),a.event(e).end()},!0),l=Ei(e,o),c=e.clientX,d=e.clientY;Ni(e.view),Zs(e),a.mouse=[l,this.__zoom.invert(l)],ha(this),a.start()}}function k(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,a=Ei(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),d=i(v(g(n,l),a,s),o.apply(this,t),u);Fs(e),c>0?Pi(this).transition().duration(c).call(b,d,a,e):Pi(this).call(m.transform,d,a,e)}}function _(n,...o){if(r.apply(this,arguments)){var i,a,s,l,u=n.touches,c=u.length,d=O(this,o,n.changedTouches.length===c).event(n);for(Zs(n),a=0;a<c;++a)l=[l=Ei(s=u[a],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),ha(this),d.start())}}function P(e,...t){if(this.__zooming){var n,r,o,a,s=O(this,t).event(e),l=e.changedTouches,c=l.length;for(Fs(e),n=0;n<c;++n)o=Ei(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=o:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=o);if(r=s.that.__zoom,s.touch1){var d=s.touch0[0],f=s.touch0[1],h=s.touch1[0],p=s.touch1[1],m=(m=h[0]-d[0])*m+(m=h[1]-d[1])*m,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;r=g(r,Math.sqrt(m/y)),o=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;o=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(v(r,o,a),s.extent,u))}}function E(e,...r){if(this.__zooming){var o,i,a=O(this,r).event(e),s=e.changedTouches,l=s.length;for(Zs(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<l;++o)i=s[o],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Ei(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<p)){var u=Pi(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Gs),e!==o?b(e,t,n,r):o.interrupt().each(function(){O(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return i(v(g(r,l),a,s),e,u)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),u)},null,r)},m.translateTo=function(e,t,n,r,a){m.transform(e,function(){var e=o.apply(this,arguments),a=this.__zoom,s=null==r?y(e):"function"==typeof r?r.apply(this,arguments):r;return i(zs.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)},r,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Pi(this.that).datum();f.call(e,this.that,new Rs(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Ds(+e),m):a},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ds(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Ds(!!e),m):s},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:Ds([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}function qs(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=el(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=i[n](e);return a}}function Hs(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ks(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=el(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}function Js(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(n=0;n<r;++n)o[n]=e[n]*(1-i)+t[n]*i;return o}}function el(e,t){var n,r=typeof t;return null==t||"boolean"===r?as(t):("number"===r?pa:"string"===r?(n=Ua(t))?(t=n,cs):ps:t instanceof Ua?cs:t instanceof Date?Hs:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Js:Array.isArray(t)?qs:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ks:pa)(e,t)}Ls.prototype=Qs.prototype;const tl=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",nl=e=>`Node type "${e}" not found. Using fallback type "default".`,rl=()=>"The React Flow parent container needs a width and a height to render the graph.",ol=()=>"Only child nodes can use a parent extent.",il=()=>"Can't create edge. An edge needs a source and a target.",al=e=>`Marker type "${e}" doesn't exist.`,sl=(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,ll=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",ul=e=>`Edge type "${e}" not found. Using fallback type "default".`,cl=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,dl=()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",fl=()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.",hl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],pl=["Enter"," ","Escape"],ml={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var gl,vl,yl;!function(e){e.Strict="strict",e.Loose="loose"}(gl||(gl={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(vl||(vl={})),function(e){e.Partial="partial",e.Full="full"}(yl||(yl={}));const bl={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ol,wl,Sl;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(Ol||(Ol={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(wl||(wl={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Sl||(Sl={}));const xl={[Sl.Left]:Sl.Right,[Sl.Right]:Sl.Left,[Sl.Top]:Sl.Bottom,[Sl.Bottom]:Sl.Top};function kl(e){return null===e?null:e?"valid":"invalid"}const _l=e=>"id"in e&&"source"in e&&"target"in e,Pl=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),El=(e,t=[0,0])=>{const{width:n,height:r}=nu(e),o=e.origin??t,i=n*o[0],a=r*o[1];return{x:e.position.x-i,y:e.position.y-a}},$l=(e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const r="string"==typeof n;let o=t.nodeLookup||r?void 0:n;t.nodeLookup&&(o=r?t.nodeLookup.get(n):Pl(n)?n:t.nodeLookup.get(n.id));const i=o?Ul(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return zl(e,i)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Zl(n)},Tl=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){const t=Ul(e);n=zl(n,t)}}),Zl(n)},Cl=(e,t,[n,r,o]=[0,0,1],i=!1,a=!1)=>{const s={...ql(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:r=!1}=t;if(a&&!n||r)continue;const o=e.width??t.width??t.initialWidth??null,u=e.height??t.height??t.initialHeight??null,c=Gl(s,Fl(t)),d=(o??0)*(u??0),f=i&&c>0;(!t.internals.handleBounds||f||c>=d||t.dragging)&&l.push(t)}return l};async function jl({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},a){if(0===e.size)return Promise.resolve(!0);const s=function(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{!e.measured.width||!e.measured.height||!t?.includeHiddenNodes&&e.hidden||r&&!r.has(e.id)||n.set(e.id,e)}),n}(e,a),l=Tl(s),u=Jl(l,t,n,a?.minZoom??o,a?.maxZoom??i,a?.padding??.1);return await r.setViewport(u,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function Nl({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:u}=s?s.internals.positionAbsolute:{x:0,y:0},c=a.origin??r;let d=a.extent||o;if("parent"!==a.extent||a.expandParent)s&&tu(a.extent)&&(d=[[a.extent[0][0]+l,a.extent[0][1]+u],[a.extent[1][0]+l,a.extent[1][1]+u]]);else if(s){const e=s.measured.width,t=s.measured.height;e&&t&&(d=[[l,u],[l+e,u+t]])}else i?.("005",ol());const f=tu(d)?Ml(t,d,a.measured):t;return void 0!==a.measured.width&&void 0!==a.measured.height||i?.("015",fl()),{position:{x:f.x-l+(a.measured.width??0)*c[0],y:f.y-u+(a.measured.height??0)*c[1]},positionAbsolute:f}}async function Al({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(e=>e.id)),a=[];for(const e of n){if(!1===e.deletable)continue;const t=i.has(e.id),n=!t&&e.parentId&&a.find(t=>t.id===e.parentId);(t||n)&&a.push(e)}const s=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),u=((e,t)=>{const n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))})(a,l),c=u;for(const e of l){s.has(e.id)&&!c.find(t=>t.id===e.id)&&c.push(e)}if(!o)return{edges:c,nodes:a};const d=await o({nodes:a,edges:c});return"boolean"==typeof d?d?{edges:c,nodes:a}:{edges:[],nodes:[]}:d}const Il=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ml=(e={x:0,y:0},t,n)=>({x:Il(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Il(e.y,t[0][1],t[1][1]-(n?.height??0))});function Dl(e,t,n){const{width:r,height:o}=nu(n),{x:i,y:a}=n.internals.positionAbsolute;return Ml(e,[[i,a],[i+r,a+o]],t)}const Rl=(e,t,n)=>e<t?Il(Math.abs(e-t),1,t)/t:e>n?-Il(Math.abs(e-n),1,t)/t:0,Ql=(e,t,n=15,r=40)=>[Rl(e.x,r,t.width-r)*n,Rl(e.y,r,t.height-r)*n],zl=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ll=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Zl=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Fl=(e,t=[0,0])=>{const{x:n,y:r}=Pl(e)?e.internals.positionAbsolute:El(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ul=(e,t=[0,0])=>{const{x:n,y:r}=Pl(e)?e.internals.positionAbsolute:El(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},Vl=(e,t)=>Zl(zl(Ll(e),Ll(t))),Gl=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Bl=e=>Xl(e.width)&&Xl(e.height)&&Xl(e.x)&&Xl(e.y),Xl=e=>!isNaN(e)&&isFinite(e),Yl=(e,t)=>{0},Wl=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ql=({x:e,y:t},[n,r,o],i=!1,a=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return i?Wl(s,a):s},Hl=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function Kl(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const Jl=(e,t,n,r,o,i)=>{const a=function(e,t,n){if("string"==typeof e||"number"==typeof e){const r=Kl(e,n),o=Kl(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){const r=Kl(e.top??e.y??0,n),o=Kl(e.bottom??e.y??0,n),i=Kl(e.left??e.x??0,t),a=Kl(e.right??e.x??0,t);return{top:r,right:a,bottom:o,left:i,x:i+a,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=(t-a.x)/e.width,l=(n-a.y)/e.height,u=Math.min(s,l),c=Il(u,r,o),d=t/2-(e.x+e.width/2)*c,f=n/2-(e.y+e.height/2)*c,h=function(e,t,n,r,o,i){const{x:a,y:s}=Hl(e,[t,n,r]),{x:l,y:u}=Hl({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=o-l,d=i-u;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}(e,d,f,c,t,n),p=Math.min(h.left-a.left,0),m=Math.min(h.top-a.top,0);return{x:d-p+Math.min(h.right-a.right,0),y:f-m+Math.min(h.bottom-a.bottom,0),zoom:c}},eu=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function tu(e){return null!=e&&"parent"!==e}function nu(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function ru(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function ou(e,t={width:0,height:0},n,r,o){const i={...e},a=r.get(n);if(a){const e=a.origin||o;i.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function iu(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function au(e){return{...ml,...e||{}}}function su(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:a}=hu(e),s=ql({x:i-(o?.left??0),y:a-(o?.top??0)},r),{x:l,y:u}=n?Wl(s,t):s;return{xSnapped:l,ySnapped:u,...s}}const lu=e=>({width:e.offsetWidth,height:e.offsetHeight}),uu=e=>e?.getRootNode?.()||window?.document,cu=["INPUT","SELECT","TEXTAREA"];function du(e){const t=e.composedPath?.()?.[0]||e.target;if(1!==t?.nodeType)return!1;return cu.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const fu=e=>"clientX"in e,hu=(e,t)=>{const n=fu(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},pu=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...lu(t)}}):null};function mu({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=.125*e+.375*o+.375*a+.125*n,u=.125*t+.375*i+.375*s+.125*r;return[l,u,Math.abs(l-e),Math.abs(u-t)]}function gu(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function vu({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case Sl.Left:return[t-gu(t-r,i),n];case Sl.Right:return[t+gu(r-t,i),n];case Sl.Top:return[t,n-gu(n-o,i)];case Sl.Bottom:return[t,n+gu(o-n,i)]}}function yu({sourceX:e,sourceY:t,sourcePosition:n=Sl.Bottom,targetX:r,targetY:o,targetPosition:i=Sl.Top,curvature:a=.25}){const[s,l]=vu({pos:n,x1:e,y1:t,x2:r,y2:o,c:a}),[u,c]=vu({pos:i,x1:r,y1:o,x2:e,y2:t,c:a}),[d,f,h,p]=mu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${l} ${u},${c} ${r},${o}`,d,f,h,p]}function bu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,a=Math.abs(r-t)/2;return[i,r<t?r+a:r-a,o,a]}function Ou({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=zl(Ul(e),Ul(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Gl(a,Zl(i))>0}const wu=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Su=(e,t)=>{if(!e.source||!e.target)return Yl(0,il()),t;let n;return n=_l(e)?{...e}:{...e,id:wu(e)},((e,t)=>t.some(t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function xu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,a,s]=bu({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,a,s]}const ku={[Sl.Left]:{x:-1,y:0},[Sl.Right]:{x:1,y:0},[Sl.Top]:{x:0,y:-1},[Sl.Bottom]:{x:0,y:1}},_u=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Pu({source:e,sourcePosition:t=Sl.Bottom,target:n,targetPosition:r=Sl.Top,center:o,offset:i,stepPosition:a}){const s=ku[t],l=ku[r],u={x:e.x+s.x*i,y:e.y+s.y*i},c={x:n.x+l.x*i,y:n.y+l.y*i},d=(({source:e,sourcePosition:t=Sl.Bottom,target:n})=>t===Sl.Left||t===Sl.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:u,sourcePosition:t,target:c}),f=0!==d.x?"x":"y",h=d[f];let p,m,g=[];const v={x:0,y:0},y={x:0,y:0},[,,b,O]=bu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*l[f]===-1){"x"===f?(p=o.x??u.x+(c.x-u.x)*a,m=o.y??(u.y+c.y)/2):(p=o.x??(u.x+c.x)/2,m=o.y??u.y+(c.y-u.y)*a);const e=[{x:p,y:u.y},{x:p,y:c.y}],t=[{x:u.x,y:m},{x:c.x,y:m}];g=s[f]===h?"x"===f?e:t:"x"===f?t:e}else{const o=[{x:u.x,y:c.y}],a=[{x:c.x,y:u.y}];if(g="x"===f?s.x===h?a:o:s.y===h?o:a,t===r){const t=Math.abs(e[f]-n[f]);if(t<=i){const r=Math.min(i-1,i-t);s[f]===h?v[f]=(u[f]>e[f]?-1:1)*r:y[f]=(c[f]>n[f]?-1:1)*r}}if(t!==r){const e="x"===f?"y":"x",t=s[f]===l[e],n=u[e]>c[e],r=u[e]<c[e];(1===s[f]&&(!t&&n||t&&r)||1!==s[f]&&(!t&&r||t&&n))&&(g="x"===f?o:a)}const d={x:u.x+v.x,y:u.y+v.y},b={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(d.x-g[0].x),Math.abs(b.x-g[0].x))>=Math.max(Math.abs(d.y-g[0].y),Math.abs(b.y-g[0].y))?(p=(d.x+b.x)/2,m=g[0].y):(p=g[0].x,m=(d.y+b.y)/2)}return[[e,{x:u.x+v.x,y:u.y+v.y},...g,{x:c.x+y.x,y:c.y+y.y},n],p,m,b,O]}function Eu({sourceX:e,sourceY:t,sourcePosition:n=Sl.Bottom,targetX:r,targetY:o,targetPosition:i=Sl.Top,borderRadius:a=5,centerX:s,centerY:l,offset:u=20,stepPosition:c=.5}){const[d,f,h,p,m]=Pu({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:s,y:l},offset:u,stepPosition:c}),g=d.reduce((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const o=Math.min(_u(e,t)/2,_u(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+o*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+o*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${i},${a+o*(e.y<n.y?-1:1)}Q ${i},${a} ${i+o*s},${a}`}(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=r},"");return[g,f,h,p,m]}function $u(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Tu(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function Cu(e,t,n=Sl.Left,r=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??nu(e);if(r)return{x:o+a/2,y:i+s/2};switch(t?.position??n){case Sl.Top:return{x:o+a/2,y:i};case Sl.Right:return{x:o+a,y:i+s/2};case Sl.Bottom:return{x:o+a/2,y:i+s};case Sl.Left:return{x:o,y:i+s/2}}}function ju(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function Nu(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}const Au={nodeOrigin:[0,0],nodeExtent:hl,elevateNodesOnSelect:!0,defaults:{}},Iu={...Au,checkEquality:!0};function Mu(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function Du(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const t of e.handles){const o={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(o):"target"===t.type&&r.push(o)}return{source:n,target:r}}function Ru(e,t,n,r){const o=Mu(Iu,r);let i=e.length>0;const a=new Map(t),s=o?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let e=a.get(l.id);if(o.checkEquality&&l===e?.internals.userNode)t.set(l.id,e);else{const n=El(l,o.nodeOrigin),r=tu(l.extent)?l.extent:o.nodeExtent,i=Ml(n,r,nu(l));e={...o.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:i,handleBounds:Du(l,e),z:zu(l,s),userNode:l}},t.set(l.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),l.parentId&&Qu(e,t,n,r)}return i}function Qu(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:a}=Mu(Au,r),s=e.parentId,l=t.get(s);if(!l)return void console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const u=o?1e3:0,{x:c,y:d,z:f}=function(e,t,n,r,o){const{x:i,y:a}=t.internals.positionAbsolute,s=nu(e),l=El(e,n),u=tu(e.extent)?Ml(l,e.extent,s):l;let c=Ml({x:i+u.x,y:a+u.y},r,s);"parent"===e.extent&&(c=Dl(c,s,t));const d=zu(e,o),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>=d?f+1:d}}(e,l,i,a,u),{positionAbsolute:h}=e.internals,p=c!==h.x||d!==h.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:c,y:d}:h,z:f}})}function zu(e,t){return(Xl(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Lu(e,t,n,r=[0,0]){const o=[],i=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const r=i.get(n.parentId)?.expandedRect??Fl(e),o=Vl(r,n.rect);i.set(n.parentId,{expandedRect:o,parent:e})}return i.size>0&&i.forEach(({expandedRect:t,parent:i},a)=>{const s=i.internals.positionAbsolute,l=nu(i),u=i.origin??r,c=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,d=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,f=Math.max(l.width,Math.round(t.width)),h=Math.max(l.height,Math.round(t.height)),p=(f-l.width)*u[0],m=(h-l.height)*u[1];(c>0||d>0||p||m)&&(o.push({id:a,type:"position",position:{x:i.position.x-c+p,y:i.position.y-d+m}}),n.get(a)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+c,y:t.position.y+d}})})),(l.width<t.width||l.height<t.height||c||d)&&o.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:f+(c?u[0]*c-p:0),height:h+(d?u[1]*d-m:0)}})}),o}function Zu(e,t,n,r,o,i){let a=o;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${o}-${e}`;const l=r.get(a)||new Map;if(r.set(a,l.set(n,t)),i){a=`${o}-${e}-${i}`;const s=r.get(a)||new Map;r.set(a,s.set(n,t))}}function Fu(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:o,sourceHandle:i=null,targetHandle:a=null}=r,s={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:a},l=`${n}-${i}--${o}-${a}`;Zu("source",s,`${o}-${a}--${n}-${i}`,e,n,i),Zu("target",s,l,e,o,a),t.set(r.id,r)}}function Uu(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Uu(n,t))}function Vu(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Gu({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const o=[];for(const[e,i]of t){const t=n.get(e)?.internals.userNode;t&&o.push({...t,position:i.position,dragging:r})}if(!e)return[o[0],o];const i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:r}:o[0],o]}function Bu({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},a=0,s=new Map,l=!1,u={x:0,y:0},c=null,d=!1,f=null,h=!1,p=!1,m=null;return{update:function({noDragClassName:g,handleSelector:v,domNode:y,isSelectable:b,nodeId:O,nodeClickDistance:w=0}){function S({x:e,y:n}){const{nodeLookup:o,nodeExtent:a,snapGrid:l,snapToGrid:u,nodeOrigin:c,onNodeDrag:d,onSelectionDrag:f,onError:h,updateNodePositions:g}=t();i={x:e,y:n};let v=!1;const y=s.size>1,b=y&&a?Ll(Tl(s)):null,w=y&&u?function({dragItems:e,snapGrid:t,x:n,y:r}){const o=e.values().next().value;if(!o)return null;const i={x:n-o.distance.x,y:r-o.distance.y},a=Wl(i,t);return{x:a.x-i.x,y:a.y-i.y}}({dragItems:s,snapGrid:l,x:e,y:n}):null;for(const[t,r]of s){if(!o.has(t))continue;let i={x:e-r.distance.x,y:n-r.distance.y};u&&(i=w?{x:Math.round(i.x+w.x),y:Math.round(i.y+w.y)}:Wl(i,l));let s=null;if(y&&a&&!r.extent&&b){const{positionAbsolute:e}=r.internals,t=e.x-b.x+a[0][0],n=e.x+r.measured.width-b.x2+a[1][0];s=[[t,e.y-b.y+a[0][1]],[n,e.y+r.measured.height-b.y2+a[1][1]]]}const{position:d,positionAbsolute:f}=Nl({nodeId:t,nextPosition:i,nodeLookup:o,nodeExtent:s||a,nodeOrigin:c,onError:h});v=v||r.position.x!==d.x||r.position.y!==d.y,r.position=d,r.internals.positionAbsolute=f}if(p=p||v,v&&(g(s,!0),m&&(r||d||!O&&f))){const[e,t]=Gu({nodeId:O,dragItems:s,nodeLookup:o});r?.(m,s,e,t),d?.(m,e,t),O||f?.(m,t)}}async function x(){if(!c)return;const{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o)return l=!1,void cancelAnimationFrame(a);const[s,d]=Ql(u,c,r);0===s&&0===d||(i.x=(i.x??0)-s/e[2],i.y=(i.y??0)-d/e[2],await n({x:s,y:d})&&S(i)),a=requestAnimationFrame(x)}function k(r){const{nodeLookup:o,multiSelectionActive:a,nodesDraggable:l,transform:u,snapGrid:f,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:m,onSelectionDragStart:g,unselectNodesAndEdges:v}=t();d=!0,p&&b||a||!O||o.get(O)?.selected||v(),b&&p&&O&&e?.(O);const y=su(r.sourceEvent,{transform:u,snapGrid:f,snapToGrid:h,containerBounds:c});if(i=y,s=function(e,t,n,r){const o=new Map;for(const[i,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!Uu(a,e))&&(a.draggable||t&&void 0===a.draggable)){const t=e.get(i);t&&o.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,l,y,O),s.size>0&&(n||m||!O&&g)){const[e,t]=Gu({nodeId:O,dragItems:s,nodeLookup:o});n?.(r.sourceEvent,s,e,t),m?.(r.sourceEvent,e,t),O||g?.(r.sourceEvent,t)}}f=Pi(y);const _=Li().clickDistance(w).on("start",e=>{const{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:a,snapToGrid:s}=t();c=n?.getBoundingClientRect()||null,h=!1,p=!1,m=e.sourceEvent,0===r&&k(e);const l=su(e.sourceEvent,{transform:o,snapGrid:a,snapToGrid:s,containerBounds:c});i=l,u=hu(e.sourceEvent,c)}).on("drag",e=>{const{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:a,nodeDragThreshold:f,nodeLookup:p}=t(),g=su(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:a,containerBounds:c});if(m=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||O&&!p.has(O))&&(h=!0),!h){if(!l&&n&&d&&(l=!0,x()),!d){const t=hu(e.sourceEvent,c),n=t.x-u.x,r=t.y-u.y;Math.sqrt(n*n+r*r)>f&&k(e)}(i.x!==g.xSnapped||i.y!==g.ySnapped)&&s&&d&&(u=hu(e.sourceEvent,c),S(g))}}).on("end",e=>{if(d&&!h&&(l=!1,d=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:n,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:a}=t();if(p&&(r(s,!1),p=!1),o||i||!O&&a){const[t,r]=Gu({nodeId:O,dragItems:s,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,s,t,r),i?.(e.sourceEvent,t,r),O||a?.(e.sourceEvent,r)}}}).filter(e=>{const t=e.target;return!e.button&&(!g||!Vu(t,`.${g}`,y))&&(!v||Vu(t,v,y))});f.call(_)},destroy:function(){f?.on(".drag",null)}}}function Xu(e,t,n,r){let o=[],i=1/0;const a=function(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())Gl(o,Fl(e))>0&&r.push(e);return r}(e,n,t+250);for(const n of a){const a=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const s of a){if(r.nodeId===s.nodeId&&r.type===s.type&&r.id===s.id)continue;const{x:a,y:l}=Cu(n,s,s.position,!0),u=Math.sqrt(Math.pow(a-e.x,2)+Math.pow(l-e.y,2));u>t||(u<i?(o=[{...s,x:a,y:l}],i=u):u===i&&o.push({...s,x:a,y:l}))}}if(!o.length)return null;if(o.length>1){const e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}function Yu(e,t,n,r,o,i=!1){const a=r.get(e);if(!a)return null;const s="strict"===o?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],l=(n?s?.find(e=>e.id===n):s?.[0])??null;return l&&i?{...l,...Cu(a,l,l.position,!0)}:l}function Wu(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const qu=()=>!0;function Hu(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:u=qu,nodeLookup:c}){const d="target"===i,f=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:p}=hu(e),m=a.elementFromPoint(h,p),g=m?.classList.contains(`${s}-flow__handle`)?m:f,v={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const e=Wu(void 0,g),t=g.getAttribute("data-nodeid"),i=g.getAttribute("data-handleid"),a=g.classList.contains("connectable"),s=g.classList.contains("connectableend");if(!t||!e)return v;const l={source:d?t:r,sourceHandle:d?i:o,target:d?r:t,targetHandle:d?o:i};v.connection=l;const f=a&&s&&(n===gl.Strict?d&&"source"===e||!d&&"target"===e:t!==r||i!==o);v.isValid=f&&u(l),v.toHandle=Yu(t,e,i,c,n,!0)}return v}const Ku={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:m,onConnectEnd:g,isValidConnection:v=qu,onReconnectEnd:y,updateConnection:b,getTransform:O,getFromHandle:w,autoPanSpeed:S,dragThreshold:x=1,handleDomNode:k}){const _=uu(e.target);let P,E=0;const{x:$,y:T}=hu(e),C=Wu(i,k),j=s?.getBoundingClientRect();let N=!1;if(!j||!C)return;const A=Yu(o,C,r,l,t);if(!A)return;let I=hu(e,j),M=!1,D=null,R=!1,Q=null;function z(){if(!c||!j)return;const[e,t]=Ql(I,j,S);f({x:e,y:t}),E=requestAnimationFrame(z)}const L={...A,nodeId:o,type:C,position:A.position},Z=l.get(o);let F={inProgress:!0,isValid:null,from:Cu(Z,L,Sl.Left,!0),fromHandle:L,fromPosition:L.position,fromNode:Z,to:I,toHandle:null,toPosition:xl[L.position],toNode:null};function U(){N=!0,b(F),p?.(e,{nodeId:o,handleId:r,handleType:C})}function V(e){if(!N){const{x:t,y:n}=hu(e),r=t-$,o=n-T;if(!(r*r+o*o>x*x))return;U()}if(!w()||!L)return void G(e);const i=O();I=hu(e,j),P=Xu(ql(I,i,!1,[1,1]),n,l,L),M||(z(),M=!0);const s=Hu(e,{handle:P,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:a?"target":"source",isValidConnection:v,doc:_,lib:u,flowId:d,nodeLookup:l});Q=s.handleDomNode,D=s.connection,R=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!P,s.isValid);const c={...F,isValid:R,to:s.toHandle&&R?Hl({x:s.toHandle.x,y:s.toHandle.y},i):I,toHandle:s.toHandle,toPosition:R&&s.toHandle?s.toHandle.position:xl[L.position],toNode:s.toHandle?l.get(s.toHandle.nodeId):null};R&&P&&F.toHandle&&c.toHandle&&F.toHandle.type===c.toHandle.type&&F.toHandle.nodeId===c.toHandle.nodeId&&F.toHandle.id===c.toHandle.id&&F.to.x===c.to.x&&F.to.y===c.to.y||(b(c),F=c)}function G(e){if(!("touches"in e&&e.touches.length>0)){if(N){(P||Q)&&D&&R&&m?.(D);const{inProgress:t,...n}=F,r={...n,toPosition:F.toHandle?F.toPosition:null};g?.(e,r),i&&y?.(e,r)}h(),cancelAnimationFrame(E),M=!1,R=!1,D=null,Q=null,_.removeEventListener("mousemove",V),_.removeEventListener("mouseup",G),_.removeEventListener("touchmove",V),_.removeEventListener("touchend",G)}}0===x&&U(),_.addEventListener("mousemove",V),_.addEventListener("mouseup",G),_.addEventListener("touchmove",V),_.addEventListener("touchend",G)},isValid:Hu};const Ju=e=>({x:e.x,y:e.y,zoom:e.k}),ec=({x:e,y:t,zoom:n})=>zs.translate(e,t).scale(n),tc=(e,t)=>e.target.closest(`.${t}`),nc=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),rc=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,oc=(e,t=0,n=rc,r=()=>{})=>{const o="number"==typeof t&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},ic=e=>{const t=e.ctrlKey&&eu()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function ac({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Ws().clickDistance(!Xl(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),h=Pi(e).call(f);y({x:i.x,y:i.y,zoom:Il(i.zoom,t,n)},[[0,0],[d.width,d.height]],o);const p=h.on("wheel.zoom"),m=h.on("dblclick.zoom");function g(e,t){return h?new Promise(n=>{f?.interpolate("linear"===t?.interpolate?el:Fi).transform(oc(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function v(){f.on("zoom",null)}async function y(e,t,n){const r=ec(e),o=f?.constrain()(r,t,n);return o&&await g(o),new Promise(e=>e(o))}return f.wheelDelta(ic),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:i,panOnScrollMode:d,panOnScrollSpeed:g,preventScrolling:y,zoomOnPinch:b,zoomOnScroll:O,zoomOnDoubleClick:w,zoomActivationKeyPressed:S,lib:x,onTransformChange:k,connectionInProgress:_}){r&&!c.isZoomingOrPanning&&v();const P=o&&!S&&!r?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(tc(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&a){const e=Ei(c),t=ic(c),o=d*Math.pow(2,t);return void r.scaleTo(n,o,e,c)}const f=1===c.deltaMode?20:1;let h=o===vl.Vertical?0:c.deltaX*f,p=o===vl.Horizontal?0:c.deltaY*f;!eu()&&c.shiftKey&&o!==vl.Vertical&&(h=c.deltaY*f,p=0),r.translateBy(n,-h/d*i,-p/d*i,{internal:!0});const m=Ju(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s?.(c,m)),e.isPanScrolling&&(l?.(c,m),e.panScrollTimeout=setTimeout(()=>{u?.(c,m),e.isPanScrolling=!1},150))}}({zoomPanValues:c,noWheelClassName:e,d3Selection:h,d3Zoom:f,panOnScrollMode:d,panOnScrollSpeed:g,zoomOnPinch:b,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const i="wheel"===r.type,a=!t&&i&&!r.ctrlKey,s=tc(r,e);if(r.ctrlKey&&i&&s&&r.preventDefault(),a||s)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:y,d3ZoomHandler:p});if(h.on("wheel.zoom",P,{passive:!1}),!r){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const o=Ju(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,"mousedown"===r.sourceEvent?.type&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});f.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{e.usedRightMouseButton=!(!n||!nc(t,e.mouseButton??0)),i.sourceEvent?.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!i.sourceEvent?.internal&&o?.(i.sourceEvent,Ju(i.transform))}}({zoomPanValues:c,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:k});f.on("zoom",t);const r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return a=>{var s,l;if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&nc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&(s=e.prevViewport,l=a.transform,s.x!==l.x||s.y!==l.y||s.zoom!==l.k))){const t=Ju(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(a.sourceEvent,t)},n?150:0)}}}({zoomPanValues:c,panOnDrag:i,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:u});f.on("end",r)}const E=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:u,connectionInProgress:c}){return d=>{const f=e||t,h=n&&d.ctrlKey,p="wheel"===d.type;if(1===d.button&&"mousedown"===d.type&&(tc(d,`${u}-flow__node`)||tc(d,`${u}-flow__edge`)))return!0;if(!(r||f||o||i||n))return!1;if(a)return!1;if(c&&!p)return!1;if(tc(d,s)&&p)return!1;if(tc(d,l)&&(!p||o&&p&&!e))return!1;if(!n&&d.ctrlKey&&p)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!o&&!h&&p)return!1;if(!r&&("mousedown"===d.type||"touchstart"===d.type))return!1;if(Array.isArray(r)&&!r.includes(d.button)&&"mousedown"===d.type)return!1;const m=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||p)&&m}}({zoomActivationKeyPressed:S,panOnDrag:i,zoomOnScroll:O,panOnScroll:o,zoomOnDoubleClick:w,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:x,connectionInProgress:_});f.filter(E),w?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)},destroy:v,setViewport:async function(e,t){const n=ec(e);return await g(n,t),new Promise(e=>e(n))},setViewportConstrained:y,getViewport:function(){const e=h?Ls(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise(n=>{f?.interpolate("linear"===t?.interpolate?el:Fi).scaleTo(oc(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise(n=>{f?.interpolate("linear"===t?.interpolate?el:Fi).scaleBy(oc(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(h){const t=ec(e),n=h.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||f?.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Xl(e)||e<0?0:e;f?.clickDistance(t)}}}var sc;!function(e){e.Line="line",e.Handle="handle"}(sc||(sc={}));const lc=["top-left","top-right","bottom-left","bottom-right"],uc=["top","right","bottom","left"];function cc(e,t){return Math.max(0,t-e)}function dc(e,t){return Math.max(0,e-t)}function fc(e,t,n){return Math.max(0,t-e,e-n)}function hc(e,t){return e?!t:t}const pc={width:0,height:0,x:0,y:0},mc={...pc,pointerX:0,pointerY:0,aspectRatio:1};function gc(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,s=n[0]*i,l=n[1]*a;return[[r-s,o-l],[r+i-s,o+a-l]]}function vc({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Pi(e);return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:s,resizeDirection:l,onResizeStart:u,onResize:c,onResizeEnd:d,shouldResize:f}){let h={...pc},p={...mc};const m=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let g,v,y,b,O=null,w=[],S=!1;const x=Li().on("start",e=>{const{nodeLookup:r,transform:o,snapGrid:i,snapToGrid:a,nodeOrigin:s,paneDomNode:l}=n();if(g=r.get(t),!g)return;O=l?.getBoundingClientRect()??null;const{xSnapped:c,ySnapped:d}=su(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:a,containerBounds:O});h={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},p={...h,pointerX:c,pointerY:d,aspectRatio:h.width/h.height},v=void 0,g.parentId&&("parent"===g.extent||g.expandParent)&&(v=r.get(g.parentId),y=v&&"parent"===g.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(v):void 0),w=[],b=void 0;for(const[e,n]of r)if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=gc(n,g,n.origin??s);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}u?.(e,{...h})}).on("drag",e=>{const{transform:t,snapGrid:o,snapToGrid:i,nodeOrigin:u}=n(),d=su(e.sourceEvent,{transform:t,snapGrid:o,snapToGrid:i,containerBounds:O}),x=[];if(!g)return;const{x:k,y:_,width:P,height:E}=h,$={},T=g.origin??u,{width:C,height:j,x:N,y:A}=function(e,t,n,r,o,i,a,s){let{affectsX:l,affectsY:u}=t;const{isHorizontal:c,isVertical:d}=t,f=c&&d,{xSnapped:h,ySnapped:p}=n,{minWidth:m,maxWidth:g,minHeight:v,maxHeight:y}=r,{x:b,y:O,width:w,height:S,aspectRatio:x}=e;let k=Math.floor(c?h-e.pointerX:0),_=Math.floor(d?p-e.pointerY:0);const P=w+(l?-k:k),E=S+(u?-_:_),$=-i[0]*w,T=-i[1]*S;let C=fc(P,m,g),j=fc(E,v,y);if(a){let e=0,t=0;l&&k<0?e=cc(b+k+$,a[0][0]):!l&&k>0&&(e=dc(b+P+$,a[1][0])),u&&_<0?t=cc(O+_+T,a[0][1]):!u&&_>0&&(t=dc(O+E+T,a[1][1])),C=Math.max(C,e),j=Math.max(j,t)}if(s){let e=0,t=0;l&&k>0?e=dc(b+k,s[0][0]):!l&&k<0&&(e=cc(b+P,s[1][0])),u&&_>0?t=dc(O+_,s[0][1]):!u&&_<0&&(t=cc(O+E,s[1][1])),C=Math.max(C,e),j=Math.max(j,t)}if(o){if(c){const e=fc(P/x,v,y)*x;if(C=Math.max(C,e),a){let e=0;e=!l&&!u||l&&!u&&f?dc(O+T+P/x,a[1][1])*x:cc(O+T+(l?k:-k)/x,a[0][1])*x,C=Math.max(C,e)}if(s){let e=0;e=!l&&!u||l&&!u&&f?cc(O+P/x,s[1][1])*x:dc(O+(l?k:-k)/x,s[0][1])*x,C=Math.max(C,e)}}if(d){const e=fc(E*x,m,g)/x;if(j=Math.max(j,e),a){let e=0;e=!l&&!u||u&&!l&&f?dc(b+E*x+$,a[1][0])/x:cc(b+(u?_:-_)*x+$,a[0][0])/x,j=Math.max(j,e)}if(s){let e=0;e=!l&&!u||u&&!l&&f?cc(b+E*x,s[1][0])/x:dc(b+(u?_:-_)*x,s[0][0])/x,j=Math.max(j,e)}}}_+=_<0?j:-j,k+=k<0?C:-C,o&&(f?P>E*x?_=(hc(l,u)?-k:k)/x:k=(hc(l,u)?-_:_)*x:c?(_=k/x,u=l):(k=_*x,l=u));const N=l?b+k:b,A=u?O+_:O;return{width:w+(l?-k:k),height:S+(u?-_:_),x:i[0]*k*(l?-1:1)+N,y:i[1]*_*(u?-1:1)+A}}(p,m,d,a,s,T,y,b),I=C!==P,M=j!==E,D=N!==k&&I,R=A!==_&&M;if(!(D||R||I||M))return;if((D||R||1===T[0]||1===T[1])&&($.x=D?N:h.x,$.y=R?A:h.y,h.x=$.x,h.y=$.y,w.length>0)){const e=N-k,t=A-_;for(const n of w)n.position={x:n.position.x-e+T[0]*(C-P),y:n.position.y-t+T[1]*(j-E)},x.push(n)}if((I||M)&&($.width=!I||l&&"horizontal"!==l?h.width:C,$.height=!M||l&&"vertical"!==l?h.height:j,h.width=$.width,h.height=$.height),v&&g.expandParent){const e=T[0]*($.width??0);$.x&&$.x<e&&(h.x=e,p.x=p.x-($.x-e));const t=T[1]*($.height??0);$.y&&$.y<t&&(h.y=t,p.y=p.y-($.y-t))}const Q=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const a=e-t,s=n-r,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&o&&(l[0]=-1*l[0]),s&&i&&(l[1]=-1*l[1]),l}({width:h.width,prevWidth:P,height:h.height,prevHeight:E,affectsX:m.affectsX,affectsY:m.affectsY}),z={...h,direction:Q},L=f?.(e,z);!1!==L&&(S=!0,c?.(e,z),r($,x))}).on("end",e=>{S&&(d?.(e,{...h}),o?.({...h}),S=!1)});i.call(x)},destroy:function(){i.on(".drag",null)}}}var yc=y(242);const bc=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,i);return i},Oc=e=>e?bc(e):bc;const{useDebugValue:wc}=$,{useSyncExternalStoreWithSelector:Sc}=yc,xc=e=>e;function kc(e,t=xc,n){const r=Sc(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return wc(r),r}const _c=(e,t)=>{const n=Oc(e),r=(e,r=t)=>kc(n,e,r);return Object.assign(r,n),r};function Pc(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Ec=(0,$.createContext)(null),$c=Ec.Provider,Tc=tl();function Cc(e,t){const n=(0,$.useContext)(Ec);if(null===n)throw new Error(Tc);return kc(n,e,t)}function jc(){const e=(0,$.useContext)(Ec);if(null===e)throw new Error(Tc);return(0,$.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Nc={display:"none"},Ac={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ic="react-flow__node-desc",Mc="react-flow__edge-desc",Dc=e=>e.ariaLiveMessage,Rc=e=>e.ariaLabelConfig;function Qc({rfId:e}){const t=Cc(Dc);return(0,E.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ac,children:t})}function zc({rfId:e,disableKeyboardA11y:t}){const n=Cc(Rc);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{id:`${Ic}-${e}`,style:Nc,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,E.jsx)("div",{id:`${Mc}-${e}`,style:Nc,children:n["edge.a11yDescription.default"]}),!t&&(0,E.jsx)(Qc,{rfId:e})]})}const Lc=(0,$.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const a=`${e}`.split("-");return(0,E.jsx)("div",{className:io(["react-flow__panel",n,...a]),style:r,ref:i,...o,children:t})});function Zc({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,E.jsx)(Lc,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,E.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}Lc.displayName="Panel";const Fc=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},Uc=e=>e.id;function Vc(e,t){return Pc(e.selectedNodes.map(Uc),t.selectedNodes.map(Uc))&&Pc(e.selectedEdges.map(Uc),t.selectedEdges.map(Uc))}function Gc({onSelectionChange:e}){const t=jc(),{selectedNodes:n,selectedEdges:r}=Cc(Fc,Vc);return(0,$.useEffect)(()=>{const o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(e=>e(o))},[n,r,e]),null}const Bc=e=>!!e.onSelectionChangeHandlers;function Xc({onSelectionChange:e}){const t=Cc(Bc);return e||t?(0,E.jsx)(Gc,{onSelectionChange:e}):null}const Yc=[0,0],Wc={x:0,y:0,zoom:1},qc=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],Hc=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Kc={translateExtent:hl,nodeOrigin:Yc,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Jc(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:l,setPaneClickDistance:u}=Cc(Hc,Pc),c=jc();(0,$.useEffect)(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=Kc,s()}),[]);const d=(0,$.useRef)(Kc);return(0,$.useEffect)(()=>{for(const s of qc){const l=e[s];l!==d.current[s]&&(void 0!==e[s]&&("nodes"===s?t(l):"edges"===s?n(l):"minZoom"===s?r(l):"maxZoom"===s?o(l):"translateExtent"===s?i(l):"nodeExtent"===s?a(l):"paneClickDistance"===s?u(l):"ariaLabelConfig"===s?c.setState({ariaLabelConfig:au(l)}):"fitView"===s?c.setState({fitViewQueued:l}):"fitViewOptions"===s?c.setState({fitViewOptions:l}):c.setState({[s]:l})))}d.current=e},qc.map(t=>e[t])),null}function ed(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const td="undefined"!=typeof document?document:null;function nd(e=null,t={target:td,actInsideInputWithModifier:!0}){const[n,r]=(0,$.useState)(!1),o=(0,$.useRef)(!1),i=(0,$.useRef)(new Set([])),[a,s]=(0,$.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,$.useEffect)(()=>{const n=t?.target??td,l=t?.actInsideInputWithModifier??!0;if(null!==e){const e=e=>{o.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!o.current||o.current&&!l)&&du(e))return!1;const n=od(e.code,s);if(i.current.add(e[n]),rd(a,i.current,!1)){const n=e.composedPath?.()?.[0]||e.target,i="BUTTON"===n?.nodeName||"A"===n?.nodeName;!1===t.preventDefault||!o.current&&i||e.preventDefault(),r(!0)}},u=e=>{const t=od(e.code,s);rd(a,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(e[t]),"Meta"===e.key&&i.current.clear(),o.current=!1},c=()=>{i.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",u),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",u),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}},[e,r]),n}function rd(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function od(e,t){return t.includes(e)?"code":"key"}function id(e,t){const n=[],r=new Map,o=[];for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{const e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}else o.push(t);for(const e of t){const t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const o={...e};for(const e of t)ad(e,o);n.push(o)}return o.length&&o.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function ad(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function sd(e,t){return id(e,t)}function ld(e,t){return id(e,t)}function ud(e,t){return{id:e,type:"select",selected:t}}function cd(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const e=t.has(o);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),r.push(ud(i.id,e)))}return r}function dd({items:e=[],lookup:t}){const n=[],r=new Map(e.map(e=>[e.id,e]));for(const[r,o]of e.entries()){const e=t.get(o.id),i=e?.internals?.userNode??e;void 0!==i&&i!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===i&&n.push({item:o,type:"add",index:r})}for(const[e]of t){void 0===r.get(e)&&n.push({id:e,type:"remove"})}return n}function fd(e){return{id:e.id,type:"remove"}}const hd=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function pd(e){return(0,$.forwardRef)(e)}const md="undefined"!=typeof window?$.useLayoutEffect:$.useEffect;function gd(e){const[t,n]=(0,$.useState)(BigInt(0)),[r]=(0,$.useState)(()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}(()=>n(e=>e+BigInt(1))));return md(()=>{const t=r.get();t.length&&(e(t),r.reset())},[t]),r}const vd=(0,$.createContext)(null);function yd({children:e}){const t=jc(),n=(0,$.useCallback)(e=>{const{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:a,fitViewQueued:s}=t.getState();let l=n;for(const t of e)l="function"==typeof t?t(l):t;const u=dd({items:l,lookup:a});o&&r(l),u.length>0?i?.(u):s&&window.requestAnimationFrame(()=>{const{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[]),r=gd(n),o=gd((0,$.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:a}=t.getState();let s=n;for(const t of e)s="function"==typeof t?t(s):t;o?r(s):i&&i(dd({items:s,lookup:a}))},[])),i=(0,$.useMemo)(()=>({nodeQueue:r,edgeQueue:o}),[]);return(0,E.jsx)(vd.Provider,{value:i,children:e})}const bd=e=>!!e.panZoom;function Od(){const e=(()=>{const e=jc();return(0,$.useMemo)(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),l=Jl(t,r,o,i,a,n?.padding??.1);return s?(await s.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:i,domNode:a}=e.getState();if(!a)return t;const{x:s,y:l}=a.getBoundingClientRect(),u={x:t.x-s,y:t.y-l},c=n.snapGrid??o,d=n.snapToGrid??i;return ql(u,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),a=Hl(t,n);return{x:a.x+o,y:a.y+i}}}),[])})(),t=jc(),n=function(){const e=(0,$.useContext)(vd);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),r=Cc(bd),o=(0,$.useMemo)(()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},i=e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState(),o=hd(e)?e:n.get(e.id),i=o.parentId?ou(o.position,o.measured,o.parentId,n,r):o.position,a={...o,position:i,width:o.measured?.width??o.width,height:o.measured?.height??o.height};return Fl(a)},a=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&hd(e)?e:{...r,...e}}return r}))},s=(e,t,n={replace:!1})=>{o(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&_l(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,i,a]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:i,zoom:a}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:r,edges:o,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:u,onBeforeDelete:c}=t.getState(),{nodes:d,edges:f}=await Al({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:o,onBeforeDelete:c}),h=f.length>0,p=d.length>0;if(h){const e=f.map(fd);a?.(f),l(e)}if(p){const e=d.map(fd);i?.(d),s(e)}return(p||h)&&u?.({nodes:d,edges:f}),{deletedNodes:d,deletedEdges:f}},getIntersectingNodes:(e,n=!0,r)=>{const o=Bl(e),a=o?e:i(e),s=void 0!==r;return a?(r||t.getState().nodes).filter(r=>{const i=t.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;const l=Fl(s?r:i),u=Gl(l,a);return n&&u>0||u>=l.width*l.height||u>=a.width*a.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{const r=Bl(e)?e:i(e);if(!r)return!1;const o=Gl(r,t);return n&&o>0||o>=t.width*t.height||o>=r.width*r.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return $l(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{const r=t.getState().fitViewResolver??function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:r}),n.nodeQueue.push(e=>[...e]),r.promise}}},[]);return(0,$.useMemo)(()=>({...o,...e,viewportInitialized:r}),[r])}const wd=e=>e.selected,Sd="undefined"!=typeof window?window:void 0;const xd={position:"absolute",width:"100%",height:"100%",top:0,left:0},kd=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function _d({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=vl.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:h=!0,children:p,noWheelClassName:m,noPanClassName:g,onViewportChange:v,isControlledViewport:y,paneClickDistance:b}){const O=jc(),w=(0,$.useRef)(null),{userSelectionActive:S,lib:x,connectionInProgress:k}=Cc(kd,Pc),_=nd(f),P=(0,$.useRef)();!function(e){const t=jc();(0,$.useEffect)(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??1))return!1;const n=lu(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",rl()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(w);const T=(0,$.useCallback)(e=>{v?.({x:e[0],y:e[1],zoom:e[2]}),y||O.setState({transform:e})},[v,y]);return(0,$.useEffect)(()=>{if(w.current){P.current=ac({domNode:w.current,minZoom:c,maxZoom:d,translateExtent:u,viewport:l,paneClickDistance:b,onDraggingChange:e=>O.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=O.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=O.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=O.getState();r?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=P.current.getViewport();return O.setState({panZoom:P.current,transform:[e,t,n],domNode:w.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),(0,$.useEffect)(()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:_,preventScrolling:h,noPanClassName:g,userSelectionActive:S,noWheelClassName:m,lib:x,onTransformChange:T,connectionInProgress:k})},[e,t,n,r,o,i,a,s,_,h,g,S,m,x,T,k]),(0,E.jsx)("div",{className:"react-flow__renderer",ref:w,style:xd,children:p})}const Pd=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ed(){const{userSelectionActive:e,userSelectionRect:t}=Cc(Pd,Pc);return e&&t?(0,E.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const $d=(e,t)=>n=>{n.target===t.current&&e?.(n)},Td=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Cd({isSelecting:e,selectionKeyPressed:t,selectionMode:n=yl.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:f,children:h}){const p=jc(),{userSelectionActive:m,elementsSelectable:g,dragging:v,connectionInProgress:y}=Cc(Td,Pc),b=g&&(e||m),O=(0,$.useRef)(null),w=(0,$.useRef)(),S=(0,$.useRef)(new Set),x=(0,$.useRef)(new Set),k=(0,$.useRef)(!1),_=(0,$.useRef)(!1),P=e=>{k.current||y?k.current=!1:(s?.(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1}))},T=u?e=>u(e):void 0,C=!0===r||Array.isArray(r)&&r.includes(0);return(0,E.jsxs)("div",{className:io(["react-flow__pane",{draggable:C,dragging:v,selection:e}]),onClick:b?void 0:$d(P,O),onContextMenu:$d(e=>{Array.isArray(r)&&r?.includes(2)?e.preventDefault():l?.(e)},O),onWheel:$d(T,O),onPointerEnter:b?void 0:c,onPointerDown:b?t=>{const{resetSelectedElements:n,domNode:r}=p.getState();if(w.current=r?.getBoundingClientRect(),!g||!e||0!==t.button||t.target!==O.current||!w.current)return;t.target?.setPointerCapture?.(t.pointerId),_.current=!0,k.current=!1;const{x:o,y:a}=hu(t.nativeEvent,w.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:o,startY:a,x:o,y:a}}),i?.(t)}:d,onPointerMove:b?e=>{const{userSelectionRect:t,transform:r,nodeLookup:o,edgeLookup:i,connectionLookup:a,triggerNodeChanges:s,triggerEdgeChanges:l,defaultEdgeOptions:u}=p.getState();if(!w.current||!t)return;k.current=!0;const{x:c,y:d}=hu(e.nativeEvent,w.current),{startX:f,startY:h}=t,m={startX:f,startY:h,x:c<f?c:f,y:d<h?d:h,width:Math.abs(c-f),height:Math.abs(d-h)},g=S.current,v=x.current;S.current=new Set(Cl(o,m,r,n===yl.Partial,!0).map(e=>e.id)),x.current=new Set;const y=u?.selectable??!0;for(const e of S.current){const t=a.get(e);if(t)for(const{edgeId:e}of t.values()){const t=i.get(e);t&&(t.selectable??y)&&x.current.add(e)}}if(!iu(g,S.current)){s(cd(o,S.current,!0))}if(!iu(v,x.current)){l(cd(i,x.current))}p.setState({userSelectionRect:m,userSelectionActive:!0,nodesSelectionActive:!1})}:d,onPointerUp:b?e=>{if(0!==e.button||!_.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:n}=p.getState();!m&&n&&e.target===O.current&&P?.(e),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:S.current.size>0}),a?.(e),(t||o)&&(k.current=!1),_.current=!1}:void 0,onPointerLeave:f,ref:O,style:xd,children:[h,(0,E.jsx)(Ed,{})]})}function jd({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),u=s.get(e);u?(t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&a)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])):l?.("012",cl(e))}function Nd({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:a}){const s=jc(),[l,u]=(0,$.useState)(!1),c=(0,$.useRef)();return(0,$.useEffect)(()=>{c.current=Bu({getStoreItems:()=>s.getState(),onNodeMouseDown:t=>{jd({id:t,store:s,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),(0,$.useEffect)(()=>{if(t)c.current?.destroy();else if(e.current)return c.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:a}),()=>{c.current?.destroy()}},[n,r,t,i,e,o]),l}function Ad(){const e=jc(),t=(0,$.useCallback)(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:u}=e.getState(),c=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(i),f=r?o[0]:5,h=r?o[1]:5,p=t.direction.x*f*t.factor,m=t.direction.y*h*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+m};r&&(t=Wl(t,o));const{position:i,positionAbsolute:s}=Nl({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:u,onError:a});e.position=i,e.internals.positionAbsolute=s,c.set(e.id,e)}s(c)},[]);return t}const Id=(0,$.createContext)(null),Md=Id.Provider;Id.Consumer;const Dd=()=>(0,$.useContext)(Id),Rd=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Qd=(0,$.memo)(pd(function({type:e="source",position:t=Sl.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:a,onConnect:s,children:l,className:u,onMouseDown:c,onTouchStart:d,...f},h){const p=a||null,m="target"===e,g=jc(),v=Dd(),{connectOnClick:y,noPanClassName:b,rfId:O}=Cc(Rd,Pc),{connectingFrom:w,connectingTo:S,clickConnecting:x,isPossibleEndHandle:k,connectionInProcess:_,clickConnectionInProcess:P,valid:$}=Cc(((e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:a}=r,{fromHandle:s,toHandle:l,isValid:u}=a,c=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:s?.nodeId===e&&s?.id===t&&s?.type===n,connectingTo:c,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:i===gl.Strict?s?.type!==n:e!==s?.nodeId||t!==s?.id,connectionInProcess:!!s,clickConnectionInProcess:!!o,valid:c&&u}})(v,p,e),Pc);v||g.getState().onError?.("010",ll());const T=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=g.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=g.getState();t(Su(o,e))}n?.(o),s?.(o)},C=e=>{if(!v)return;const t=fu(e.nativeEvent);if(o&&(t&&0===e.button||!t)){const t=g.getState();Ku.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:m,handleId:p,nodeId:v,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:T,isValidConnection:n||t.isValidConnection,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?c?.(e):d?.(e)};return(0,E.jsx)("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${O}-${v}-${p}-${e}`,className:io(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,u,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:i,clickconnecting:x,connectingfrom:w,connectingto:S,valid:$,connectionindicator:r&&(!_||k)&&(_||P?i:o)}]),onMouseDown:C,onTouchStart:C,onClick:y?t=>{const{onClickConnectStart:r,onClickConnectEnd:i,connectionClickStartHandle:a,connectionMode:s,isValidConnection:l,lib:u,rfId:c,nodeLookup:d,connection:f}=g.getState();if(!v||!a&&!o)return;if(!a)return r?.(t.nativeEvent,{nodeId:v,handleId:p,handleType:e}),void g.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});const h=uu(t.target),m=n||l,{connection:y,isValid:b}=Ku.isValid(t.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:s,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:m,flowId:c,doc:h,lib:u,nodeLookup:d});b&&y&&T(y);const O=structuredClone(f);delete O.inProgress,O.toPosition=O.toHandle?O.toHandle.position:null,i?.(t,O),g.setState({connectionClickStartHandle:null})}:void 0,ref:h,...f,children:l})}));const zd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Ld={input:function({data:e,isConnectable:t,sourcePosition:n=Sl.Bottom}){return(0,E.jsxs)(E.Fragment,{children:[e?.label,(0,E.jsx)(Qd,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=Sl.Top,sourcePosition:r=Sl.Bottom}){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Qd,{type:"target",position:n,isConnectable:t}),e?.label,(0,E.jsx)(Qd,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=Sl.Top}){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Qd,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}};const Zd=e=>{const{width:t,height:n,x:r,y:o}=Tl(e.nodeLookup,{filter:e=>!!e.selected});return{width:Xl(t)?t:null,height:Xl(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function Fd({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=jc(),{width:o,height:i,transformString:a,userSelectionActive:s}=Cc(Zd,Pc),l=Ad(),u=(0,$.useRef)(null);if((0,$.useEffect)(()=>{n||u.current?.focus({preventScroll:!0})},[n]),Nd({nodeRef:u}),s||!o||!i)return null;const c=e?t=>{const n=r.getState().nodes.filter(e=>e.selected);e(t,n)}:void 0;return(0,E.jsx)("div",{className:io(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:(0,E.jsx)("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(zd,e.key)&&(e.preventDefault(),l({direction:zd[e.key],factor:e.shiftKey?4:1}))},style:{width:o,height:i}})})}const Ud="undefined"!=typeof window?window:void 0,Vd=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Gd({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:O,panOnScrollSpeed:w,panOnScrollMode:S,zoomOnDoubleClick:x,panOnDrag:k,defaultViewport:_,translateExtent:P,minZoom:T,maxZoom:C,preventScrolling:j,onSelectionContextMenu:N,noWheelClassName:A,noPanClassName:I,disableKeyboardA11y:M,onViewportChange:D,isControlledViewport:R}){const{nodesSelectionActive:Q,userSelectionActive:z}=Cc(Vd),L=nd(u,{target:Ud}),Z=nd(m,{target:Ud}),F=Z||k,U=Z||O,V=c&&!0!==F,G=L||z||V;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=jc(),{deleteElements:r}=Od(),o=nd(e,{actInsideInputWithModifier:!1}),i=nd(t,{target:Sd});(0,$.useEffect)(()=>{if(o){const{edges:e,nodes:t}=n.getState();r({nodes:t.filter(wd),edges:e.filter(wd)}),n.setState({nodesSelectionActive:!1})}},[o]),(0,$.useEffect)(()=>{n.setState({multiSelectionActive:i})},[i])}({deleteKeyCode:l,multiSelectionKeyCode:p}),(0,E.jsx)(_d,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:U,panOnScrollSpeed:w,panOnScrollMode:S,zoomOnDoubleClick:x,panOnDrag:!L&&F,defaultViewport:_,translateExtent:P,minZoom:T,maxZoom:C,zoomActivationKeyCode:g,preventScrolling:j,noWheelClassName:A,noPanClassName:I,onViewportChange:D,isControlledViewport:R,paneClickDistance:s,children:(0,E.jsxs)(Cd,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:F,isSelecting:!!G,selectionMode:d,selectionKeyPressed:L,selectionOnDrag:V,children:[e,Q&&(0,E.jsx)(Fd,{onSelectionContextMenu:N,noPanClassName:I,disableKeyboardA11y:M})]})})}Gd.displayName="FlowRenderer";const Bd=(0,$.memo)(Gd);function Xd(e){const t=Cc((0,$.useCallback)((e=>t=>e?Cl(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()))(e),[e]),Pc);return t}const Yd=e=>e.updateNodeInternals;function Wd({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:a,nodesDraggable:s,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:p,rfId:m,nodeTypes:g,nodeClickDistance:v,onError:y}){const{node:b,internals:O,isParent:w}=Cc(t=>{const n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},Pc);let S=b.type||"default",x=g?.[S]||Ld[S];void 0===x&&(y?.("003",nl(S)),S="default",x=g?.default||Ld.default);const k=!!(b.draggable||s&&void 0===b.draggable),_=!!(b.selectable||l&&void 0===b.selectable),P=!!(b.connectable||u&&void 0===b.connectable),T=!!(b.focusable||c&&void 0===b.focusable),C=jc(),j=ru(b),N=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=jc(),i=(0,$.useRef)(null),a=(0,$.useRef)(null),s=(0,$.useRef)(e.sourcePosition),l=(0,$.useRef)(e.targetPosition),u=(0,$.useRef)(t),c=n&&!!e.internals.handleBounds;return(0,$.useEffect)(()=>{!i.current||e.hidden||c&&a.current===i.current||(a.current&&r?.unobserve(a.current),r?.observe(i.current),a.current=i.current)},[c,e.hidden]),(0,$.useEffect)(()=>()=>{a.current&&(r?.unobserve(a.current),a.current=null)},[]),(0,$.useEffect)(()=>{if(i.current){const n=u.current!==t,r=s.current!==e.sourcePosition,a=l.current!==e.targetPosition;(n||r||a)&&(u.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}({node:b,nodeType:S,hasDimensions:j,resizeObserver:d}),A=Nd({nodeRef:N,disabled:b.hidden||!k,noDragClassName:f,handleSelector:b.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:v}),I=Ad();if(b.hidden)return null;const M=nu(b),D=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(b),R=_||k||t||n||r||o,Q=n?e=>n(e,{...O.userNode}):void 0,z=r?e=>r(e,{...O.userNode}):void 0,L=o?e=>o(e,{...O.userNode}):void 0,Z=i?e=>i(e,{...O.userNode}):void 0,F=a?e=>a(e,{...O.userNode}):void 0;return(0,E.jsx)("div",{className:io(["react-flow__node",`react-flow__node-${S}`,{[h]:k},b.className,{selected:b.selected,selectable:_,parent:w,draggable:k,dragging:A}]),ref:N,style:{zIndex:O.z,transform:`translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:j?"visible":"hidden",...b.style,...D},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Q,onMouseMove:z,onMouseLeave:L,onContextMenu:Z,onClick:n=>{const{selectNodesOnDrag:r,nodeDragThreshold:o}=C.getState();_&&(!r||!k||o>0)&&jd({id:e,store:C,nodeRef:N}),t&&t(n,{...O.userNode})},onDoubleClick:F,onKeyDown:T?t=>{if(!du(t.nativeEvent)&&!p)if(pl.includes(t.key)&&_){const n="Escape"===t.key;jd({id:e,store:C,unselect:n,nodeRef:N})}else if(k&&b.selected&&Object.prototype.hasOwnProperty.call(zd,t.key)){t.preventDefault();const{ariaLabelConfig:e}=C.getState();C.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~O.positionAbsolute.x,y:~~O.positionAbsolute.y})}),I({direction:zd[t.key],factor:t.shiftKey?4:1})}}:void 0,tabIndex:T?0:void 0,onFocus:T?()=>{if(p||!N.current?.matches(":focus-visible"))return;const{transform:t,width:n,height:r,autoPanOnNodeFocus:o,setCenter:i}=C.getState();if(!o)return;Cl(new Map([[e,b]]),{x:0,y:0,width:n,height:r},t,!0).length>0||i(b.position.x+M.width/2,b.position.y+M.height/2,{zoom:t[2]})}:void 0,role:b.ariaRole??(T?"group":void 0),"aria-roledescription":"node","aria-describedby":p?void 0:`${Ic}-${m}`,"aria-label":b.ariaLabel,...b.domAttributes,children:(0,E.jsx)(Md,{value:e,children:(0,E.jsx)(x,{id:e,data:b.data,type:S,positionAbsoluteX:O.positionAbsolute.x,positionAbsoluteY:O.positionAbsolute.y,selected:b.selected??!1,selectable:_,draggable:k,deletable:b.deletable??!0,isConnectable:P,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:A,dragHandle:b.dragHandle,zIndex:O.z,parentId:b.parentId,...M})})})}const qd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Hd(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=Cc(qd,Pc),a=Xd(e.onlyRenderVisibleElements),s=function(){const e=Cc(Yd),[t]=(0,$.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{const n=new Map;t.forEach(e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,$.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,E.jsx)("div",{className:"react-flow__nodes",style:xd,children:a.map(a=>(0,E.jsx)(Wd,{id:a,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},a))})}Hd.displayName="NodeRenderer";const Kd=(0,$.memo)(Hd);const Jd={[wl.Arrow]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return(0,E.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[wl.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,E.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const ef=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const l=function(e){const t=jc();return(0,$.useMemo)(()=>Object.prototype.hasOwnProperty.call(Jd,e)?Jd[e]:(t.getState().onError?.("009",al(e)),null),[e])}(t);return l?(0,E.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:(0,E.jsx)(l,{color:n,strokeWidth:a})}):null},tf=({defaultColor:e,rfId:t})=>{const n=Cc(e=>e.edges),r=Cc(e=>e.defaultEdgeOptions),o=(0,$.useMemo)(()=>{const o=function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((e,a)=>([a.markerStart||r,a.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){const o=Nu(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd});return o},[n,r,t,e]);return o.length?(0,E.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,E.jsx)("defs",{children:o.map(e=>(0,E.jsx)(ef,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};tf.displayName="MarkerDefinitions";var nf=(0,$.memo)(tf);function rf({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:l,className:u,...c}){const[d,f]=(0,$.useState)({x:1,y:0,width:0,height:0}),h=io(["react-flow__edge-textwrapper",u]),p=(0,$.useRef)(null);return(0,$.useEffect)(()=>{if(p.current){const e=p.current.getBBox();f({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n?(0,E.jsxs)("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[o&&(0,E.jsx)("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),(0,E.jsx)("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:p,style:r,children:n}),l]}):null}rf.displayName="EdgeText";const of=(0,$.memo)(rf);function af({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("path",{...c,d:e,fill:"none",className:io(["react-flow__edge-path",c.className])}),u?(0,E.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,r&&Xl(t)&&Xl(n)?(0,E.jsx)(of,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l}):null]})}function sf({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Sl.Left||e===Sl.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function lf({sourceX:e,sourceY:t,sourcePosition:n=Sl.Bottom,targetX:r,targetY:o,targetPosition:i=Sl.Top}){const[a,s]=sf({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,u]=sf({pos:i,x1:r,y1:o,x2:e,y2:t}),[c,d,f,h]=mu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${s} ${l},${u} ${r},${o}`,c,d,f,h]}function uf(e){return(0,$.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a,targetPosition:s,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:v})=>{const[y,b,O]=lf({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s}),w=e.isInternal?void 0:t;return(0,E.jsx)(af,{id:w,path:y,labelX:b,labelY:O,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:v})})}const cf=uf({isInternal:!1}),df=uf({isInternal:!0});function ff(e){return(0,$.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,sourcePosition:h=Sl.Bottom,targetPosition:p=Sl.Top,markerEnd:m,markerStart:g,pathOptions:v,interactionWidth:y})=>{const[b,O,w]=Eu({sourceX:n,sourceY:r,sourcePosition:h,targetX:o,targetY:i,targetPosition:p,borderRadius:v?.borderRadius,offset:v?.offset,stepPosition:v?.stepPosition}),S=e.isInternal?void 0:t;return(0,E.jsx)(af,{id:S,path:b,labelX:O,labelY:w,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:g,interactionWidth:y})})}cf.displayName="SimpleBezierEdge",df.displayName="SimpleBezierEdgeInternal";const hf=ff({isInternal:!1}),pf=ff({isInternal:!0});function mf(e){return(0,$.memo)(({id:t,...n})=>{const r=e.isInternal?void 0:t;return(0,E.jsx)(hf,{...n,id:r,pathOptions:(0,$.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}hf.displayName="SmoothStepEdge",pf.displayName="SmoothStepEdgeInternal";const gf=mf({isInternal:!1}),vf=mf({isInternal:!0});function yf(e){return(0,$.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:m})=>{const[g,v,y]=xu({sourceX:n,sourceY:r,targetX:o,targetY:i}),b=e.isInternal?void 0:t;return(0,E.jsx)(af,{id:b,path:g,labelX:v,labelY:y,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:m})})}gf.displayName="StepEdge",vf.displayName="StepEdgeInternal";const bf=yf({isInternal:!1}),Of=yf({isInternal:!0});function wf(e){return(0,$.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a=Sl.Bottom,targetPosition:s=Sl.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,pathOptions:v,interactionWidth:y})=>{const[b,O,w]=yu({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s,curvature:v?.curvature}),S=e.isInternal?void 0:t;return(0,E.jsx)(af,{id:S,path:b,labelX:O,labelY:w,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:y})})}bf.displayName="StraightEdge",Of.displayName="StraightEdgeInternal";const Sf=wf({isInternal:!1}),xf=wf({isInternal:!0});Sf.displayName="BezierEdge",xf.displayName="BezierEdgeInternal";const kf={default:xf,straight:Of,step:vf,smoothstep:pf,simplebezier:df},_f={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Pf=(e,t,n)=>n===Sl.Left?e-t:n===Sl.Right?e+t:e,Ef=(e,t,n)=>n===Sl.Top?e-t:n===Sl.Bottom?e+t:e,$f="react-flow__edgeupdater";function Tf({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:a,type:s}){return(0,E.jsx)("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:a,className:io([$f,`${$f}-${s}`]),cx:Pf(t,r,e),cy:Ef(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Cf({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:a,sourcePosition:s,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){const p=jc(),m=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:r,domNode:o,isValidConnection:i,connectionMode:a,connectionRadius:s,lib:l,onConnectStart:h,onConnectEnd:m,cancelConnection:g,nodeLookup:v,rfId:y,panBy:b,updateConnection:O}=p.getState(),w="target"===t.type;Ku.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:a,connectionRadius:s,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:y,cancelConnection:g,panBy:b,isValidConnection:i,onConnect:e=>u?.(n,e),onConnectStart:(r,o)=>{f(!0),c?.(e,n,t.type),h?.(r,o)},onConnectEnd:m,onReconnectEnd:(e,r)=>{f(!1),d?.(e,n,t.type,r)},updateConnection:O,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle,dragThreshold:p.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},g=()=>h(!0),v=()=>h(!1);return(0,E.jsxs)(E.Fragment,{children:[(!0===e||"source"===e)&&(0,E.jsx)(Tf,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:e=>m(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:g,onMouseOut:v,type:"source"}),(!0===e||"target"===e)&&(0,E.jsx)(Tf,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:e=>m(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:g,onMouseOut:v,type:"target"})]})}function jf({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:u,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,rfId:p,edgeTypes:m,noPanClassName:g,onError:v,disableKeyboardA11y:y}){let b=Cc(t=>t.edgeLookup.get(e));const O=Cc(e=>e.defaultEdgeOptions);b=O?{...O,...b}:b;let w=b.type||"default",S=m?.[w]||kf[w];void 0===S&&(v?.("011",ul(w)),w="default",S=m?.default||kf.default);const x=!!(b.focusable||t&&void 0===b.focusable),k=void 0!==d&&(b.reconnectable||n&&void 0===b.reconnectable),_=!!(b.selectable||r&&void 0===b.selectable),P=(0,$.useRef)(null),[T,C]=(0,$.useState)(!1),[j,N]=(0,$.useState)(!1),A=jc(),{zIndex:I,sourceX:M,sourceY:D,targetX:R,targetY:Q,sourcePosition:z,targetPosition:L}=Cc((0,$.useCallback)(t=>{const n=t.nodeLookup.get(b.source),r=t.nodeLookup.get(b.target);if(!n||!r)return{zIndex:b.zIndex,..._f};const o=function(e){const{sourceNode:t,targetNode:n}=e;if(!$u(t)||!$u(n))return null;const r=t.internals.handleBounds||Tu(t.handles),o=n.internals.handleBounds||Tu(n.handles),i=ju(r?.source??[],e.sourceHandle),a=ju(e.connectionMode===gl.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!i||!a)return e.onError?.("008",sl(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=i?.position||Sl.Bottom,l=a?.position||Sl.Top,u=Cu(t,i,s),c=Cu(n,a,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:s,targetPosition:l}}({id:e,sourceNode:n,targetNode:r,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:t.connectionMode,onError:v}),i=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:o=!1}){return void 0!==r?r:(o&&n?1e3:0)+Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0)}({selected:b.selected,zIndex:b.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect});return{zIndex:i,...o||_f}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),Pc),Z=(0,$.useMemo)(()=>b.markerStart?`url('#${Nu(b.markerStart,p)}')`:void 0,[b.markerStart,p]),F=(0,$.useMemo)(()=>b.markerEnd?`url('#${Nu(b.markerEnd,p)}')`:void 0,[b.markerEnd,p]);if(b.hidden||null===M||null===D||null===R||null===Q)return null;const U=i?e=>{i(e,{...b})}:void 0,V=a?e=>{a(e,{...b})}:void 0,G=s?e=>{s(e,{...b})}:void 0,B=l?e=>{l(e,{...b})}:void 0,X=u?e=>{u(e,{...b})}:void 0;return(0,E.jsx)("svg",{style:{zIndex:I},children:(0,E.jsxs)("g",{className:io(["react-flow__edge",`react-flow__edge-${w}`,b.className,g,{selected:b.selected,animated:b.animated,inactive:!_&&!o,updating:T,selectable:_}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:i}=A.getState();_&&(A.setState({nodesSelectionActive:!1}),b.selected&&i?(r({nodes:[],edges:[b]}),P.current?.blur()):n([e])),o&&o(t,b)},onDoubleClick:U,onContextMenu:V,onMouseEnter:G,onMouseMove:B,onMouseLeave:X,onKeyDown:x?t=>{if(!y&&pl.includes(t.key)&&_){const{unselectNodesAndEdges:n,addSelectedEdges:r}=A.getState();"Escape"===t.key?(P.current?.blur(),n({edges:[b]})):r([e])}}:void 0,tabIndex:x?0:void 0,role:b.ariaRole??(x?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===b.ariaLabel?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":x?`${Mc}-${p}`:void 0,ref:P,...b.domAttributes,children:[!j&&(0,E.jsx)(S,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:_,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:M,sourceY:D,targetX:R,targetY:Q,sourcePosition:z,targetPosition:L,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:Z,markerEnd:F,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),k&&(0,E.jsx)(Cf,{edge:b,isReconnectable:k,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,sourceX:M,sourceY:D,targetX:R,targetY:Q,sourcePosition:z,targetPosition:L,setUpdateHover:C,setReconnecting:N})]})})}const Nf=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Af({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:m}){const{edgesFocusable:g,edgesReconnectable:v,elementsSelectable:y,onError:b}=Cc(Nf,Pc),O=(w=t,Cc((0,$.useCallback)(e=>{if(!w)return e.edges.map(e=>e.id);const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),o=e.nodeLookup.get(n.target);r&&o&&Ou({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[w]),Pc));var w;return(0,E.jsxs)("div",{className:"react-flow__edges",children:[(0,E.jsx)(nf,{defaultColor:e,rfId:n}),O.map(e=>(0,E.jsx)(jf,{id:e,edgesFocusable:g,edgesReconnectable:v,elementsSelectable:y,noPanClassName:o,onReconnect:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:m},e))]})}Af.displayName="EdgeRenderer";const If=(0,$.memo)(Af),Mf=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Df({children:e}){const t=Cc(Mf);return(0,E.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const Rf=e=>e.panZoom?.syncViewport;function Qf(e){return e.connection.inProgress?{...e.connection,to:ql(e.connection.to,e.transform)}:{...e.connection}}function zf(e){const t=function(e){if(e)return t=>{const n=Qf(t);return e(n)};return Qf}(e);return Cc(t,Pc)}const Lf=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Zf({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:a,isValid:s,inProgress:l}=Cc(Lf,Pc);return!!(i&&o&&l)?(0,E.jsx)("svg",{style:e,width:i,height:a,className:"react-flow__connectionline react-flow__container",children:(0,E.jsx)("g",{className:io(["react-flow__connection",kl(s)]),children:(0,E.jsx)(Ff,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const Ff=({style:e,type:t=Ol.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:a,fromHandle:s,fromPosition:l,to:u,toNode:c,toHandle:d,toPosition:f}=zf();if(!o)return;if(n)return(0,E.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:f,connectionStatus:kl(r),toNode:c,toHandle:d});let h="";const p={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case Ol.Bezier:[h]=yu(p);break;case Ol.SimpleBezier:[h]=lf(p);break;case Ol.Step:[h]=Eu({...p,borderRadius:0});break;case Ol.SmoothStep:[h]=Eu(p);break;default:[h]=xu(p)}return(0,E.jsx)("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Ff.displayName="ConnectionLine";const Uf={};function Vf(e=Uf){(0,$.useRef)(e),jc();(0,$.useEffect)(()=>{0},[e])}function Gf({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:m,connectionLineComponent:g,connectionLineContainerStyle:v,selectionKeyCode:y,selectionOnDrag:b,selectionMode:O,multiSelectionKeyCode:w,panActivationKeyCode:S,zoomActivationKeyCode:x,deleteKeyCode:k,onlyRenderVisibleElements:_,elementsSelectable:P,defaultViewport:T,translateExtent:C,minZoom:j,maxZoom:N,preventScrolling:A,defaultMarkerColor:I,zoomOnScroll:M,zoomOnPinch:D,panOnScroll:R,panOnScrollSpeed:Q,panOnScrollMode:z,zoomOnDoubleClick:L,panOnDrag:Z,onPaneClick:F,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:G,onPaneScroll:B,onPaneContextMenu:X,paneClickDistance:Y,nodeClickDistance:W,onEdgeContextMenu:q,onEdgeMouseEnter:H,onEdgeMouseMove:K,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,noDragClassName:oe,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,nodeExtent:le,rfId:ue,viewport:ce,onViewportChange:de}){return Vf(e),Vf(t),jc(),(0,$.useRef)(!1),(0,$.useEffect)(()=>{},[]),function(e){const t=Od(),n=(0,$.useRef)(!1);(0,$.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(n),function(e){const t=Cc(Rf),n=jc();(0,$.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ce),(0,E.jsx)(Bd,{onPaneClick:F,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:G,onPaneContextMenu:X,onPaneScroll:B,paneClickDistance:Y,deleteKeyCode:k,selectionKeyCode:y,selectionOnDrag:b,selectionMode:O,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:w,panActivationKeyCode:S,zoomActivationKeyCode:x,elementsSelectable:P,zoomOnScroll:M,zoomOnPinch:D,zoomOnDoubleClick:L,panOnScroll:R,panOnScrollSpeed:Q,panOnScrollMode:z,panOnDrag:Z,defaultViewport:T,translateExtent:C,minZoom:j,maxZoom:N,onSelectionContextMenu:d,preventScrolling:A,noDragClassName:oe,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,onViewportChange:de,isControlledViewport:!!ce,children:(0,E.jsxs)(Df,{children:[(0,E.jsx)(If,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:a,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,onlyRenderVisibleElements:_,onEdgeContextMenu:q,onEdgeMouseEnter:H,onEdgeMouseMove:K,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:I,noPanClassName:ae,disableKeyboardA11y:se,rfId:ue}),(0,E.jsx)(Zf,{style:m,type:p,component:g,containerStyle:v}),(0,E.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,E.jsx)(Kd,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:W,onlyRenderVisibleElements:_,noPanClassName:ae,noDragClassName:oe,disableKeyboardA11y:se,nodeExtent:le,rfId:ue}),(0,E.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Gf.displayName="GraphView";const Bf=(0,$.memo)(Gf),Xf=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l=.5,maxZoom:u=2,nodeOrigin:c,nodeExtent:d}={})=>{const f=new Map,h=new Map,p=new Map,m=new Map,g=r??t??[],v=n??e??[],y=c??[0,0],b=d??hl;Fu(p,m,g);const O=Ru(v,f,h,{nodeOrigin:y,nodeExtent:b,elevateNodesOnSelect:!1});let w=[0,0,1];if(a&&o&&i){const e=Tl(f,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=Jl(e,o,i,l,u,s?.padding??.1);w=[t,n,r]}return{rfId:"1",width:o??0,height:i??0,transform:w,nodes:v,nodesInitialized:O,nodeLookup:f,parentLookup:h,edges:g,edgeLookup:m,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:l,maxZoom:u,translateExtent:hl,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:gl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:s,fitViewResolver:null,connection:{...bl},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Yl,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ml}},Yf=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d})=>{return f=(f,h)=>{async function p(){const{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:i,minZoom:a,maxZoom:s}=h();t&&(await jl({nodes:e,width:o,height:i,panZoom:t,minZoom:a,maxZoom:s},n),r?.resolve(!0),f({fitViewResolver:null}))}return{...Xf({nodes:e,edges:t,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:i}=h(),a=Ru(e,t,n,{nodeOrigin:r,nodeExtent:d,elevateNodesOnSelect:o,checkEquality:!0});i&&a?(p(),f({nodes:e,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):f({nodes:e,nodesInitialized:a})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=h();Fu(t,n,e),f({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=h();t(e),f({hasDefaultNodes:!0})}if(t){const{setEdges:e}=h();e(t),f({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:i,nodeExtent:a,debug:s,fitViewQueued:l}=h(),{changes:u,updatedInternals:c}=function(e,t,n,r,o,i){const a=r?.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],u=window.getComputedStyle(a),{m22:c}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const r of e.values()){const e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),s=!0;continue}const a=lu(r.nodeElement),u=e.measured.width!==a.width||e.measured.height!==a.height;if(a.width&&a.height&&(u||!e.internals.handleBounds||r.force)){const f=r.nodeElement.getBoundingClientRect(),h=tu(e.extent)?e.extent:i;let{positionAbsolute:p}=e.internals;e.parentId&&"parent"===e.extent?p=Dl(p,a,t.get(e.parentId)):h&&(p=Ml(p,h,a));const m={...e,measured:a,internals:{...e.internals,positionAbsolute:p,handleBounds:{source:pu("source",r.nodeElement,f,c,e.id),target:pu("target",r.nodeElement,f,c,e.id)}}};t.set(e.id,m),e.parentId&&Qu(m,t,n,{nodeOrigin:o}),s=!0,u&&(l.push({id:e.id,type:"dimensions",dimensions:a}),e.expandParent&&e.parentId&&d.push({id:e.id,parentId:e.parentId,rect:Fl(m,o)}))}}if(d.length>0){const e=Lu(d,t,n,o);l.push(...e)}return{changes:l,updatedInternals:s}}(e,n,r,o,i,a);c&&(function(e,t,n){const r=Mu(Au,n);for(const n of e.values())if(n.parentId)Qu(n,e,t,r);else{const e=El(n,r.nodeOrigin),t=tu(n.extent)?n.extent:r.nodeExtent,o=Ml(e,t,nu(n));n.internals.positionAbsolute=o}}(n,r,{nodeOrigin:i,nodeExtent:a}),l?(p(),f({fitViewQueued:!1,fitViewOptions:void 0})):f({}),u?.length>0&&(s&&console.log("React Flow: trigger node changes",u),t?.(u)))},updateNodePositions:(e,t=!1)=>{const n=[],r=[],{nodeLookup:o,triggerNodeChanges:i}=h();for(const[i,a]of e){const e=o.get(i),s=!!(e?.expandParent&&e?.parentId&&a?.position),l={id:i,type:"position",position:s?{x:Math.max(0,a.position.x),y:Math.max(0,a.position.y)}:a.position,dragging:t};s&&e.parentId&&n.push({id:i,parentId:e.parentId,rect:{...a.internals.positionAbsolute,width:a.measured.width??0,height:a.measured.height??0}}),r.push(l)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=h(),i=Lu(n,o,e,t);r.push(...i)}i(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=h();e?.length&&(o&&n(sd(e,r)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=h();e?.length&&(o&&n(ld(e,r)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=h();t?o(e.map(e=>ud(e,!0))):(o(cd(r,new Set([...e]),!0)),i(cd(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=h();t?i(e.map(e=>ud(e,!0))):(i(cd(n,new Set([...e]))),o(cd(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:a}=h(),s=t||n,l=(e||r).map(e=>{const t=o.get(e.id);return t&&(t.selected=!1),ud(e.id,!1)}),u=s.map(e=>ud(e.id,!1));i(l),a(u)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=h();t?.setScaleExtent([e,n]),f({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=h();t?.setScaleExtent([n,e]),f({maxZoom:e})},setTranslateExtent:e=>{h().panZoom?.setTranslateExtent(e),f({translateExtent:e})},setPaneClickDistance:e=>{h().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=h();if(!o)return;const i=t.reduce((e,t)=>t.selected?[...e,ud(t.id,!1)]:e,[]),a=e.reduce((e,t)=>t.selected?[...e,ud(t.id,!1)]:e,[]);n(i),r(a)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:i,nodeExtent:a}=h();e[0][0]===a[0][0]&&e[0][1]===a[0][1]&&e[1][0]===a[1][0]&&e[1][1]===a[1][1]||(Ru(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1}),f({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=h();return async function({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},setCenter:async(e,t,n)=>{const{width:r,height:o,maxZoom:i,panZoom:a}=h();if(!a)return Promise.resolve(!1);const s=void 0!==n?.zoom?n.zoom:i;return await a.setViewport({x:r/2-e*s,y:o/2-t*s,zoom:s},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{f({connection:{...bl}})},updateConnection:e=>{f({connection:e})},reset:()=>f({...Xf()})}},h=Object.is,f?_c(f,h):_c;var f,h};function Wf({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,initialMinZoom:a,initialMaxZoom:s,initialFitViewOptions:l,fitView:u,nodeOrigin:c,nodeExtent:d,children:f}){const[h]=(0,$.useState)(()=>Yf({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:u,minZoom:a,maxZoom:s,fitViewOptions:l,nodeOrigin:c,nodeExtent:d}));return(0,E.jsx)($c,{value:h,children:(0,E.jsx)(yd,{children:f})})}function qf({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:a,fitView:s,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f}){return(0,$.useContext)(Ec)?(0,E.jsx)(E.Fragment,{children:e}):(0,E.jsx)(Wf,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:a,fitView:s,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:c,nodeOrigin:d,nodeExtent:f,children:e})}const Hf={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var Kf=pd(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:a,onNodeClick:s,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:v,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:O,onNodeContextMenu:w,onNodeDoubleClick:S,onNodeDragStart:x,onNodeDrag:k,onNodeDragStop:_,onNodesDelete:P,onEdgesDelete:T,onDelete:C,onSelectionChange:j,onSelectionDragStart:N,onSelectionDrag:A,onSelectionDragStop:I,onSelectionContextMenu:M,onSelectionStart:D,onSelectionEnd:R,onBeforeDelete:Q,connectionMode:z,connectionLineType:L=Ol.Bezier,connectionLineStyle:Z,connectionLineComponent:F,connectionLineContainerStyle:U,deleteKeyCode:V="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:B=!1,selectionMode:X=yl.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:W=(eu()?"Meta":"Control"),zoomActivationKeyCode:q=(eu()?"Meta":"Control"),snapToGrid:H,snapGrid:K,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:ee,nodesDraggable:te,autoPanOnNodeFocus:ne,nodesConnectable:re,nodesFocusable:oe,nodeOrigin:ie=Yc,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le=!0,defaultViewport:ue=Wc,minZoom:ce=.5,maxZoom:de=2,translateExtent:fe=hl,preventScrolling:he=!0,nodeExtent:pe,defaultMarkerColor:me="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:ve=!0,panOnScroll:ye=!1,panOnScrollSpeed:be=.5,panOnScrollMode:Oe=vl.Free,zoomOnDoubleClick:we=!0,panOnDrag:Se=!0,onPaneClick:xe,onPaneMouseEnter:ke,onPaneMouseMove:_e,onPaneMouseLeave:Pe,onPaneScroll:Ee,onPaneContextMenu:$e,paneClickDistance:Te=0,nodeClickDistance:Ce=0,children:je,onReconnect:Ne,onReconnectStart:Ae,onReconnectEnd:Ie,onEdgeContextMenu:Me,onEdgeDoubleClick:De,onEdgeMouseEnter:Re,onEdgeMouseMove:Qe,onEdgeMouseLeave:ze,reconnectRadius:Le=10,onNodesChange:Ze,onEdgesChange:Fe,noDragClassName:Ue="nodrag",noWheelClassName:Ve="nowheel",noPanClassName:Ge="nopan",fitView:Be,fitViewOptions:Xe,connectOnClick:Ye,attributionPosition:We,proOptions:qe,defaultEdgeOptions:He,elevateNodesOnSelect:Ke,elevateEdgesOnSelect:Je,disableKeyboardA11y:et=!1,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:rt,connectionRadius:ot,isValidConnection:it,onError:at,style:st,id:lt,nodeDragThreshold:ut,connectionDragThreshold:ct,viewport:dt,onViewportChange:ft,width:ht,height:pt,colorMode:mt="light",debug:gt,onScroll:vt,ariaLabelConfig:yt,...bt},Ot){const wt=lt||"1",St=function(e){const[t,n]=(0,$.useState)("system"===e?null:e);return(0,$.useEffect)(()=>{if("system"!==e)return void n(e);const t=ed(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}},[e]),null!==t?t:ed()?.matches?"dark":"light"}(mt),xt=(0,$.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),vt?.(e)},[vt]);return(0,E.jsx)("div",{"data-testid":"rf__wrapper",...bt,onScroll:xt,style:{...st,...Hf},ref:Ot,className:io(["react-flow",o,St]),id:lt,role:"application",children:(0,E.jsxs)(qf,{nodes:e,edges:t,width:ht,height:pt,fitView:Be,fitViewOptions:Xe,minZoom:ce,maxZoom:de,nodeOrigin:ie,nodeExtent:pe,children:[(0,E.jsx)(Bf,{onInit:u,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:O,onNodeContextMenu:w,onNodeDoubleClick:S,nodeTypes:i,edgeTypes:a,connectionLineType:L,connectionLineStyle:Z,connectionLineComponent:F,connectionLineContainerStyle:U,selectionKeyCode:G,selectionOnDrag:B,selectionMode:X,deleteKeyCode:V,multiSelectionKeyCode:W,panActivationKeyCode:Y,zoomActivationKeyCode:q,onlyRenderVisibleElements:J,defaultViewport:ue,translateExtent:fe,minZoom:ce,maxZoom:de,preventScrolling:he,zoomOnScroll:ge,zoomOnPinch:ve,zoomOnDoubleClick:we,panOnScroll:ye,panOnScrollSpeed:be,panOnScrollMode:Oe,panOnDrag:Se,onPaneClick:xe,onPaneMouseEnter:ke,onPaneMouseMove:_e,onPaneMouseLeave:Pe,onPaneScroll:Ee,onPaneContextMenu:$e,paneClickDistance:Te,nodeClickDistance:Ce,onSelectionContextMenu:M,onSelectionStart:D,onSelectionEnd:R,onReconnect:Ne,onReconnectStart:Ae,onReconnectEnd:Ie,onEdgeContextMenu:Me,onEdgeDoubleClick:De,onEdgeMouseEnter:Re,onEdgeMouseMove:Qe,onEdgeMouseLeave:ze,reconnectRadius:Le,defaultMarkerColor:me,noDragClassName:Ue,noWheelClassName:Ve,noPanClassName:Ge,rfId:wt,disableKeyboardA11y:et,nodeExtent:pe,viewport:dt,onViewportChange:ft}),(0,E.jsx)(Jc,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:v,nodesDraggable:te,autoPanOnNodeFocus:ne,nodesConnectable:re,nodesFocusable:oe,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le,elevateNodesOnSelect:Ke,elevateEdgesOnSelect:Je,minZoom:ce,maxZoom:de,nodeExtent:pe,onNodesChange:Ze,onEdgesChange:Fe,snapToGrid:H,snapGrid:K,connectionMode:z,translateExtent:fe,connectOnClick:Ye,defaultEdgeOptions:He,fitView:Be,fitViewOptions:Xe,onNodesDelete:P,onEdgesDelete:T,onDelete:C,onNodeDragStart:x,onNodeDrag:k,onNodeDragStop:_,onSelectionDrag:A,onSelectionDragStart:N,onSelectionDragStop:I,onMove:c,onMoveStart:d,onMoveEnd:f,noPanClassName:Ge,nodeOrigin:ie,rfId:wt,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:rt,onError:at,connectionRadius:ot,isValidConnection:it,selectNodesOnDrag:ee,nodeDragThreshold:ut,connectionDragThreshold:ct,onBeforeDelete:Q,paneClickDistance:Te,debug:gt,ariaLabelConfig:yt}),(0,E.jsx)(Xc,{onSelectionChange:j}),je,(0,E.jsx)(Zc,{proOptions:qe,position:We}),(0,E.jsx)(zc,{rfId:wt,disableKeyboardA11y:et})]})})});const Jf=e=>e.nodes;const eh=e=>e.edges;function th(){return Cc(eh,Pc)}dl();function nh({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,E.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:io(["react-flow__background-pattern",n,r])})}function rh({radius:e,className:t}){return(0,E.jsx)("circle",{cx:e,cy:e,r:e,className:io(["react-flow__background-pattern","dots",t])})}var oh;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(oh||(oh={}));const ih={[oh.Dots]:1,[oh.Lines]:1,[oh.Cross]:6},ah=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function sh({id:e,variant:t=oh.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:a,bgColor:s,style:l,className:u,patternClassName:c}){const d=(0,$.useRef)(null),{transform:f,patternId:h}=Cc(ah,Pc),p=r||ih[t],m=t===oh.Dots,g=t===oh.Cross,v=Array.isArray(n)?n:[n,n],y=[v[0]*f[2]||1,v[1]*f[2]||1],b=p*f[2],O=Array.isArray(i)?i:[i,i],w=g?[b,b]:y,S=[O[0]*f[2]||1+w[0]/2,O[1]*f[2]||1+w[1]/2],x=`${h}${e||""}`;return(0,E.jsxs)("svg",{className:io(["react-flow__background",u]),style:{...l,...xd,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:d,"data-testid":"rf__background",children:[(0,E.jsx)("pattern",{id:x,x:f[0]%y[0],y:f[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:m?(0,E.jsx)(rh,{radius:b/2,className:c}):(0,E.jsx)(nh,{dimensions:w,lineWidth:o,variant:t,className:c})}),(0,E.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${x})`})]})}sh.displayName="Background";const lh=(0,$.memo)(sh);function uh(){return(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,E.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ch(){return(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,E.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function dh(){return(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,E.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function fh(){return(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,E.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function hh(){return(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,E.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ph({children:e,className:t,...n}){return(0,E.jsx)("button",{type:"button",className:io(["react-flow__controls-button",t]),...n,children:e})}const mh=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function gh({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:a,onFitView:s,onInteractiveChange:l,className:u,children:c,position:d="bottom-left",orientation:f="vertical","aria-label":h}){const p=jc(),{isInteractive:m,minZoomReached:g,maxZoomReached:v,ariaLabelConfig:y}=Cc(mh,Pc),{zoomIn:b,zoomOut:O,fitView:w}=Od(),S="horizontal"===f?"horizontal":"vertical";return(0,E.jsxs)(Lc,{className:io(["react-flow__controls",S,u]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??y["controls.ariaLabel"],children:[t&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ph,{onClick:()=>{b(),i?.()},className:"react-flow__controls-zoomin",title:y["controls.zoomIn.ariaLabel"],"aria-label":y["controls.zoomIn.ariaLabel"],disabled:v,children:(0,E.jsx)(uh,{})}),(0,E.jsx)(ph,{onClick:()=>{O(),a?.()},className:"react-flow__controls-zoomout",title:y["controls.zoomOut.ariaLabel"],"aria-label":y["controls.zoomOut.ariaLabel"],disabled:g,children:(0,E.jsx)(ch,{})})]}),n&&(0,E.jsx)(ph,{className:"react-flow__controls-fitview",onClick:()=>{w(o),s?.()},title:y["controls.fitView.ariaLabel"],"aria-label":y["controls.fitView.ariaLabel"],children:(0,E.jsx)(dh,{})}),r&&(0,E.jsx)(ph,{className:"react-flow__controls-interactive",onClick:()=>{p.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l?.(!m)},title:y["controls.interactive.ariaLabel"],"aria-label":y["controls.interactive.ariaLabel"],children:m?(0,E.jsx)(hh,{}):(0,E.jsx)(fh,{})}),c]})}gh.displayName="Controls";const vh=(0,$.memo)(gh);const yh=(0,$.memo)(function({id:e,x:t,y:n,width:r,height:o,style:i,color:a,strokeColor:s,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,selected:f,onClick:h}){const{background:p,backgroundColor:m}=i||{},g=a||p||m;return(0,E.jsx)("rect",{className:io(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:c,ry:c,width:r,height:o,style:{fill:g,stroke:s,strokeWidth:l},shapeRendering:d,onClick:h?t=>h(t,e):void 0})}),bh=e=>e.nodes.map(e=>e.id),Oh=e=>e instanceof Function?e:()=>e;const wh=(0,$.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:a,NodeComponent:s,onClick:l}){const{node:u,x:c,y:d,width:f,height:h}=Cc(t=>{const{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:i}=n.positionAbsolute,{width:a,height:s}=nu(r);return{node:r,x:o,y:i,width:a,height:s}},Pc);return u&&!u.hidden&&ru(u)?(0,E.jsx)(s,{x:c,y:d,width:f,height:h,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:i,shapeRendering:a,onClick:l,id:u.id}):null});var Sh=(0,$.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=yh,onClick:a}){const s=Cc(bh,Pc),l=Oh(t),u=Oh(e),c=Oh(n),d="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,E.jsx)(E.Fragment,{children:s.map(e=>(0,E.jsx)(wh,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:a,shapeRendering:d},e))})});const xh=e=>!e.hidden,kh=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Vl(Tl(e.nodeLookup,{filter:xh}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function _h({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:m=!1,zoomable:g=!1,ariaLabel:v,inversePan:y,zoomStep:b=1,offsetScale:O=5}){const w=jc(),S=(0,$.useRef)(null),{boundingRect:x,viewBB:k,rfId:_,panZoom:P,translateExtent:T,flowWidth:C,flowHeight:j,ariaLabelConfig:N}=Cc(kh,Pc),A=e?.width??200,I=e?.height??150,M=x.width/A,D=x.height/I,R=Math.max(M,D),Q=R*A,z=R*I,L=O*R,Z=x.x-(Q-x.width)/2-L,F=x.y-(z-x.height)/2-L,U=Q+2*L,V=z+2*L,G=`react-flow__minimap-desc-${_}`,B=(0,$.useRef)(0),X=(0,$.useRef)();B.current=R,(0,$.useEffect)(()=>{if(S.current&&P)return X.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Pi(e);return{update:function({translateExtent:e,width:i,height:a,zoomStep:s=1,pannable:l=!0,zoomable:u=!0,inversePan:c=!1}){let d=[0,0];const f=Ws().on("start",e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?o=>{const s=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;const l=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],u=[l[0]-d[0],l[1]-d[1]];d=l;const f=r()*Math.max(s[2],Math.log(s[2]))*(c?-1:1),h={x:s[0]-u[0]*f,y:s[1]-u[1]*f},p=[[0,0],[i,a]];t.setViewportConstrained({x:h.x,y:h.y,zoom:s[2]},p,e)}:null).on("zoom.wheel",u?e=>{if("wheel"!==e.sourceEvent.type||!t)return;const r=n(),o=e.sourceEvent.ctrlKey&&eu()?10:1,i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,a=r[2]*Math.pow(2,i*o);t.scaleTo(a)}:null);o.call(f,{})},destroy:function(){o.on("zoom",null)},pointer:Ei}}({domNode:S.current,panZoom:P,getTransform:()=>w.getState().transform,getViewScale:()=>B.current}),()=>{X.current?.destroy()}},[P]),(0,$.useEffect)(()=>{X.current?.update({translateExtent:T,width:C,height:j,inversePan:y,pannable:m,zoomStep:b,zoomable:g})},[m,g,y,b,T,C,j]);const Y=h?e=>{const[t,n]=X.current?.pointer(e)||[0,0];h(e,{x:t,y:n})}:void 0,W=p?(0,$.useCallback)((e,t)=>{const n=w.getState().nodeLookup.get(t).internals.userNode;p(e,n)},[]):void 0,q=v??N["minimap.ariaLabel"];return(0,E.jsx)(Lc,{position:f,style:{...e,"--xy-minimap-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof u?u:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof c?c:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof d?d*R:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof a?a:void 0},className:io(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,E.jsxs)("svg",{width:A,height:I,viewBox:`${Z} ${F} ${U} ${V}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:S,onClick:Y,children:[q&&(0,E.jsx)("title",{id:G,children:q}),(0,E.jsx)(Sh,{onClick:W,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:a,nodeComponent:s}),(0,E.jsx)("path",{className:"react-flow__minimap-mask",d:`M${Z-L},${F-L}h${U+2*L}v${V+2*L}h${-U-2*L}z\n        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}_h.displayName="MiniMap";const Ph=(0,$.memo)(_h),Eh={[sc.Line]:"right",[sc.Handle]:"bottom-right"};const $h=(0,$.memo)(function({nodeId:e,position:t,variant:n=sc.Handle,className:r,style:o,children:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:f,autoScale:h=!0,shouldResize:p,onResizeStart:m,onResize:g,onResizeEnd:v}){const y=Dd(),b="string"==typeof e?e:y,O=jc(),w=(0,$.useRef)(null),S=n===sc.Handle,x=Cc((0,$.useCallback)((k=S&&h,e=>k?`${Math.max(1/e.transform[2],1)}`:void 0),[S,h]),Pc);var k;const _=(0,$.useRef)(null),P=t??Eh[n];(0,$.useEffect)(()=>{if(w.current&&b)return _.current||(_.current=vc({domNode:w.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:i}=O.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:i}=O.getState(),a=[],s={x:e.x,y:e.y},l=r.get(b);if(l&&l.expandParent&&l.parentId){const t=l.origin??i,n=e.width??l.measured.width??0,u=e.height??l.measured.height??0,c=Lu([{id:l.id,parentId:l.parentId,rect:{width:n,height:u,...ou({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:u},l.parentId,r,t)}}],r,o,i);a.push(...c),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*u,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:b,type:"position",position:{...s}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:b,type:"dimensions",resizing:!0,setAttributes:!f||("horizontal"===f?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const e of t){const t={...e,type:"position"};a.push(t)}n(a)},onEnd:({width:e,height:t})=>{const n={id:b,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}};O.getState().triggerNodeChanges([n])}})),_.current.update({controlPosition:P,boundaries:{minWidth:s,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:d,resizeDirection:f,onResizeStart:m,onResize:g,onResizeEnd:v,shouldResize:p}),()=>{_.current?.destroy()}},[P,s,l,u,c,d,m,g,v,p]);const T=P.split("-");return(0,E.jsx)("div",{className:io(["react-flow__resize-control","nodrag",...T,n,r]),ref:w,style:{...o,scale:x,...a&&{[S?"backgroundColor":"borderColor"]:a}},children:i})});function Th({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,autoScale:f=!0,shouldResize:h,onResizeStart:p,onResize:m,onResizeEnd:g}){return t?(0,E.jsxs)(E.Fragment,{children:[uc.map(t=>(0,E.jsx)($h,{className:o,style:i,nodeId:e,position:t,variant:sc.Line,color:a,minWidth:s,minHeight:l,maxWidth:u,maxHeight:c,onResizeStart:p,keepAspectRatio:d,autoScale:f,shouldResize:h,onResize:m,onResizeEnd:g},t)),lc.map(t=>(0,E.jsx)($h,{className:n,style:r,nodeId:e,position:t,color:a,minWidth:s,minHeight:l,maxWidth:u,maxHeight:c,onResizeStart:p,keepAspectRatio:d,autoScale:f,shouldResize:h,onResize:m,onResizeEnd:g},t))]}):null}const Ch=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${e}`)})();function jh(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function Nh(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Ah(e,t={}){const n=t.width||function(e){const t=Nh(e,"border-left-width"),n=Nh(e,"border-right-width");return e.clientWidth+t+n}(e),r=t.height||function(e){const t=Nh(e,"border-top-width"),n=Nh(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:n,height:r}}const Ih=16384;function Mh(e){return new Promise((t,n)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function Dh(e,t,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),i=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(e),async function(e){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}(o)}const Rh=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||Rh(n,t))};function Qh(e,t,n){const r=`.${e}:${t}`,o=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e){return jh(e).map(t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`).join(" ")}(n);return document.createTextNode(`${r}{${o}}`)}function zh(e,t,n){const r=window.getComputedStyle(e,n),o=r.getPropertyValue("content");if(""===o||"none"===o)return;const i=Ch();try{t.className=`${t.className} ${i}`}catch(e){return}const a=document.createElement("style");a.appendChild(Qh(i,n,r)),t.appendChild(a)}const Lh="application/font-woff",Zh="image/jpeg",Fh={woff:Lh,woff2:Lh,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Zh,jpeg:Zh,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Uh(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return Fh[t]||""}function Vh(e){return-1!==e.search(/^(data:)/)}function Gh(e,t){return`data:${t};base64,${e}`}async function Bh(e,t,n){const r=await fetch(e,t);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise((e,t)=>{const i=new FileReader;i.onerror=t,i.onloadend=()=>{try{e(n({res:r,result:i.result}))}catch(e){t(e)}},i.readAsDataURL(o)})}const Xh={};async function Yh(e,t,n){const r=function(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}(e,t,n.includeQueryParams);if(null!=Xh[r])return Xh[r];let o;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const r=await Bh(e,n.fetchRequestInit,({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n)));o=Gh(r,t)}catch(t){o=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${e}`;t&&(r="string"==typeof t?t:t.message),r&&console.warn(r)}return Xh[r]=o,o}async function Wh(e,t){return Rh(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Mh(t)}(e):Rh(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),Mh(t.toDataURL())}const n=e.poster,r=Uh(n);return Mh(await Yh(n,r,t))}(e,t):Rh(e,HTMLIFrameElement)?async function(e){var t;try{if(null===(t=null==e?void 0:e.contentDocument)||void 0===t?void 0:t.body)return await Kh(e.contentDocument.body,{},!0)}catch(e){}return e.cloneNode(!1)}(e):e.cloneNode(!1)}const qh=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();function Hh(e,t){return Rh(t,Element)&&(function(e,t){const n=t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):jh(r).forEach(o=>{let i=r.getPropertyValue(o);if("font-size"===o&&i.endsWith("px")){const e=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i=`${e}px`}Rh(e,HTMLIFrameElement)&&"display"===o&&"inline"===i&&(i="block"),"d"===o&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(o,i,r.getPropertyPriority(o))})}(e,t),function(e,t){zh(e,t,":before"),zh(e,t,":after")}(e,t),function(e,t){Rh(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Rh(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(Rh(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(t=>e.value===t.getAttribute("value"));r&&r.setAttribute("selected","")}}(e,t)),t}async function Kh(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>Wh(e,t)).then(n=>async function(e,t,n){var r,o;let i=[];return i=qh(e)&&e.assignedNodes?jh(e.assignedNodes()):Rh(e,HTMLIFrameElement)&&(null===(r=e.contentDocument)||void 0===r?void 0:r.body)?jh(e.contentDocument.body.childNodes):jh((null!==(o=e.shadowRoot)&&void 0!==o?o:e).childNodes),0===i.length||Rh(e,HTMLVideoElement)||await i.reduce((e,r)=>e.then(()=>Kh(r,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}(e,n,t)).then(t=>Hh(e,t)).then(e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const r={};for(let o=0;o<n.length;o++){const i=n[o].getAttribute("xlink:href");if(i){const n=e.querySelector(i),o=document.querySelector(i);n||!o||r[i]||(r[i]=await Kh(o,t,!0))}}const o=Object.values(r);if(o.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(t,"defs");n.appendChild(r);for(let e=0;e<o.length;e++)r.appendChild(o[e]);e.appendChild(n)}return e}(e,t)):null}const Jh=/url\((['"]?)([^'"]+?)\1\)/g,ep=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,tp=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function np(e,t,n,r,o){try{const i=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}(t,n):t,a=Uh(t);let s;if(o){s=Gh(await o(i),a)}else s=await Yh(i,a,r);return e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${s}$3`)}catch(e){}return e}function rp(e){return-1!==e.search(Jh)}async function op(e,t,n){if(!rp(e))return e;const r=function(e,{preferredFontFormat:t}){return t?e.replace(tp,e=>{for(;;){const[n,,r]=ep.exec(e)||[];if(!r)return"";if(r===t)return`src: ${n};`}}):e}(e,n),o=function(e){const t=[];return e.replace(Jh,(e,n,r)=>(t.push(r),e)),t.filter(e=>!Vh(e))}(r);return o.reduce((e,r)=>e.then(e=>np(e,r,t,n)),Promise.resolve(r))}async function ip(e,t,n){var r;const o=null===(r=t.style)||void 0===r?void 0:r.getPropertyValue(e);if(o){const r=await op(o,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function ap(e,t){Rh(e,Element)&&(await async function(e,t){await ip("background",e,t)||await ip("background-image",e,t),await ip("mask",e,t)||await ip("mask-image",e,t)}(e,t),await async function(e,t){const n=Rh(e,HTMLImageElement);if((!n||Vh(e.src))&&(!Rh(e,SVGImageElement)||Vh(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,o=await Yh(r,Uh(r),t);await new Promise((t,r)=>{e.onload=t,e.onerror=r;const i=e;i.decode&&(i.decode=t),"lazy"===i.loading&&(i.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o})}(e,t),await async function(e,t){const n=jh(e.childNodes).map(e=>ap(e,t));await Promise.all(n).then(()=>e)}(e,t))}const sp={};async function lp(e){let t=sp[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},sp[e]=t,t}async function up(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let i=o.replace(r,"$1");return i.startsWith("https://")||(i=new URL(i,e.url).href),Bh(i,t.fetchRequestInit,({result:e})=>(n=n.replace(o,`url(${e})`),[o,e]))});return Promise.all(o).then(()=>n)}function cp(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=r.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=o.exec(n);if(null===e){if(e=i.exec(n),null===e)break;o.lastIndex=i.lastIndex}else i.lastIndex=o.lastIndex;t.push(e[0])}return t}async function dp(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=jh(e.ownerDocument.styleSheets),r=await async function(e,t){const n=[],r=[];return e.forEach(n=>{if("cssRules"in n)try{jh(n.cssRules||[]).forEach((e,o)=>{if(e.type===CSSRule.IMPORT_RULE){let i=o+1;const a=lp(e.href).then(e=>up(e,t)).then(e=>cp(e).forEach(e=>{try{n.insertRule(e,e.startsWith("@import")?i+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});r.push(a)}})}catch(o){const i=e.find(e=>null==e.href)||document.styleSheets[0];null!=n.href&&r.push(lp(n.href).then(e=>up(e,t)).then(e=>cp(e).forEach(e=>{i.insertRule(e,n.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",o)}}),Promise.all(r).then(()=>(e.forEach(e=>{if("cssRules"in e)try{jh(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),n))}(n,t);return function(e){return e.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>rp(e.style.getPropertyValue("src")))}(r)}async function fp(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await async function(e,t){const n=await dp(e,t);return(await Promise.all(n.map(e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return op(e.cssText,n,t)}))).join("\n")}(e,t);if(n){const t=document.createElement("style"),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function hp(e,t={}){const{width:n,height:r}=Ah(e,t),o=await Kh(e,t,!0);await fp(o,t),await ap(o,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;null!=r&&Object.keys(r).forEach(e=>{n[e]=r[e]})}(o,t);return await Dh(o,n,r)}async function pp(e,t={}){const{width:n,height:r}=Ah(e,t),o=await hp(e,t),i=await Mh(o),a=document.createElement("canvas"),s=a.getContext("2d"),l=t.pixelRatio||function(){let e,t;try{t=process}catch(e){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),u=t.canvasWidth||n,c=t.canvasHeight||r;return a.width=u*l,a.height=c*l,t.skipAutoScale||function(e){(e.width>Ih||e.height>Ih)&&(e.width>Ih&&e.height>Ih?e.width>e.height?(e.height*=Ih/e.width,e.width=Ih):(e.width*=Ih/e.height,e.height=Ih):e.width>Ih?(e.height*=Ih/e.width,e.width=Ih):(e.width*=Ih/e.height,e.height=Ih))}(a),a.style.width=`${u}`,a.style.height=`${c}`,t.backgroundColor&&(s.fillStyle=t.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,a.width,a.height),a}async function mp(e,t={}){return(await pp(e,t)).toDataURL()}const{useDebugValue:gp}=$,{useSyncExternalStoreWithSelector:vp}=yc;let yp=!1;const bp=e=>e;const Op=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?Oc(e):e,n=(e,n)=>function(e,t=bp,n){n&&!yp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),yp=!0);const r=vp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return gp(r),r}(t,e,n);return Object.assign(n,t),n},wp=e=>e?Op(e):Op;var Sp=(e,t,n)=>(r,o)=>({pastStates:n?.pastStates||[],futureStates:n?.futureStates||[],undo:(i=1)=>{if(o().pastStates.length){const a=n?.partialize?.(t())||t(),s=o().pastStates.splice(-i,i),l=s.shift();e(l),r({pastStates:o().pastStates,futureStates:o().futureStates.concat(n?.diff?.(a,l)||a,s.reverse())})}},redo:(i=1)=>{if(o().futureStates.length){const a=n?.partialize?.(t())||t(),s=o().futureStates.splice(-i,i),l=s.shift();e(l),r({pastStates:o().pastStates.concat(n?.diff?.(a,l)||a,s.reverse()),futureStates:o().futureStates})}},clear:()=>r({pastStates:[],futureStates:[]}),isTracking:!0,pause:()=>r({isTracking:!1}),resume:()=>r({isTracking:!0}),setOnSave:e=>r({_onSave:e}),_onSave:n?.onSave,_handleSet:(e,t,i,a)=>{n?.limit&&o().pastStates.length>=n?.limit&&o().pastStates.shift(),o()._onSave?.(e,i),r({pastStates:o().pastStates.concat(a||e),futureStates:[]})}});const xp=Object.freeze({status:"aborted"});function kp(e,t,n){function r(n,r){var o;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(o=n._zod).traits??(o.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in a.prototype)e in n||Object.defineProperty(n,e,{value:a.prototype[e].bind(n)});n._zod.constr=a,n._zod.def=r}const o=n?.Parent??Object;class i extends o{}function a(e){var t;const o=n?.Parent?new i:this;r(o,e),(t=o._zod).deferred??(t.deferred=[]);for(const e of o._zod.deferred)e();return o}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}const _p=Symbol("zod_brand");class Pp extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ep extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const $p={};function Tp(e){return e&&Object.assign($p,e),$p}function Cp(e){return e}function jp(e){return e}function Np(e){}function Ap(e){throw new Error}function Ip(e){}function Mp(e){const t=Object.values(e).filter(e=>"number"==typeof e),n=Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t);return n}function Dp(e,t="|"){return e.map(e=>dm(e)).join(t)}function Rp(e,t){return"bigint"==typeof t?t.toString():t}function Qp(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function zp(e){return null==e}function Lp(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Zp(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(0===o&&/\d?e-\d?/.test(r)){const e=r.match(/\d?e-(\d?)/);e?.[1]&&(o=Number.parseInt(e[1]))}const i=n>o?n:o;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}const Fp=Symbol("evaluating");function Up(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Fp)return void 0===r&&(r=Fp,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Vp(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Gp(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Bp(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function Xp(e){return Bp(e._zod.def)}function Yp(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function Wp(e){const t=Object.keys(e),n=t.map(t=>e[t]);return Promise.all(n).then(e=>{const n={};for(let r=0;r<t.length;r++)n[t[r]]=e[r];return n})}function qp(e=10){const t="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<e;r++)n+=t[Math.floor(26*Math.random())];return n}function Hp(e){return JSON.stringify(e)}const Kp="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Jp(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const em=Qp(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function tm(e){if(!1===Jp(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==Jp(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}function nm(e){return tm(e)?{...e}:Array.isArray(e)?[...e]:e}function rm(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}const om=e=>{const t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":null===e?"null":e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?"promise":"undefined"!=typeof Map&&e instanceof Map?"map":"undefined"!=typeof Set&&e instanceof Set?"set":"undefined"!=typeof Date&&e instanceof Date?"date":"undefined"!=typeof File&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},im=new Set(["string","number","symbol"]),am=new Set(["string","number","bigint","boolean","symbol","undefined"]);function sm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lm(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function um(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function cm(e){let t;return new Proxy({},{get:(n,r,o)=>(t??(t=e()),Reflect.get(t,r,o)),set:(n,r,o,i)=>(t??(t=e()),Reflect.set(t,r,o,i)),has:(n,r)=>(t??(t=e()),Reflect.has(t,r)),deleteProperty:(n,r)=>(t??(t=e()),Reflect.deleteProperty(t,r)),ownKeys:n=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(n,r)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,r)),defineProperty:(n,r,o)=>(t??(t=e()),Reflect.defineProperty(t,r,o))})}function dm(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function fm(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}const hm={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},pm={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function mm(e,t){const n=e._zod.def;return lm(e,Bp(e._zod.def,{get shape(){const e={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return Gp(this,"shape",e),e},checks:[]}))}function gm(e,t){const n=e._zod.def,r=Bp(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return Gp(this,"shape",r),r},checks:[]});return lm(e,r)}function vm(e,t){if(!tm(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Bp(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return Gp(this,"shape",n),n},checks:[]});return lm(e,r)}function ym(e,t){if(!tm(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return Gp(this,"shape",n),n},checks:e._zod.def.checks};return lm(e,n)}function bm(e,t){const n=Bp(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Gp(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return lm(e,n)}function Om(e,t,n){const r=Bp(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(o[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)o[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return Gp(this,"shape",o),o},checks:[]});return lm(t,r)}function wm(e,t,n){const r=Bp(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(n)for(const t in n){if(!(t in o))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(o[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)o[t]=new e({type:"nonoptional",innerType:r[t]});return Gp(this,"shape",o),o},checks:[]});return lm(t,r)}function Sm(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function xm(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function km(e){return"string"==typeof e?e:e?.message}function _m(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=km(e.inst?._zod.def?.error?.(e))??km(t?.error?.(e))??km(n.customError?.(e))??km(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function Pm(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Em(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function $m(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}function Tm(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function Cm(e){const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function jm(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function Nm(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");return Cm(t+"=".repeat((4-t.length%4)%4))}function Am(e){return jm(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Im(e){const t=e.replace(/^0x/,"");if(t.length%2!=0)throw new Error("Invalid hex string length");const n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)n[e/2]=Number.parseInt(t.slice(e,e+2),16);return n}function Mm(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class Dm{constructor(...e){}}const Rm=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Rp,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Qm=kp("$ZodError",Rm),zm=kp("$ZodError",Rm,{Parent:Error});function Lm(e,t=e=>e.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function Zm(e,t){const n=t||function(e){return e.message},r={_errors:[]},o=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>o({issues:e}));else if("invalid_key"===t.code)o({issues:t.issues});else if("invalid_element"===t.code)o({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,o=0;for(;o<t.path.length;){const r=t.path[o];o===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],o++}}};return o(e),r}function Fm(e,t){const n=t||function(e){return e.message},r={errors:[]},o=(e,t=[])=>{var i,a;for(const s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>o({issues:e},s.path));else if("invalid_key"===s.code)o({issues:s.issues},s.path);else if("invalid_element"===s.code)o({issues:s.issues},s.path);else{const e=[...t,...s.path];if(0===e.length){r.errors.push(n(s));continue}let o=r,l=0;for(;l<e.length;){const t=e[l],r=l===e.length-1;"string"==typeof t?(o.properties??(o.properties={}),(i=o.properties)[t]??(i[t]={errors:[]}),o=o.properties[t]):(o.items??(o.items=[]),(a=o.items)[t]??(a[t]={errors:[]}),o=o.items[t]),r&&o.errors.push(n(s)),l++}}};return o(e),r}function Um(e){const t=[],n=e.map(e=>"object"==typeof e?e.key:e);for(const e of n)"number"==typeof e?t.push(`[${e}]`):"symbol"==typeof e?t.push(`[${JSON.stringify(String(e))}]`):/[^\w$]/.test(e)?t.push(`[${JSON.stringify(e)}]`):(t.length&&t.push("."),t.push(e));return t.join("")}function Vm(e){const t=[],n=[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length);for(const e of n)t.push(` ${e.message}`),e.path?.length&&t.push(`   at ${Um(e.path)}`);return t.join("\n")}const Gm=e=>(t,n,r,o)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new Pp;if(a.issues.length){const t=new(o?.Err??e)(a.issues.map(e=>_m(e,i,Tp())));throw Kp(t,o?.callee),t}return a.value},Bm=Gm(zm),Xm=e=>async(t,n,r,o)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const t=new(o?.Err??e)(a.issues.map(e=>_m(e,i,Tp())));throw Kp(t,o?.callee),t}return a.value},Ym=Xm(zm),Wm=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new Pp;return i.issues.length?{success:!1,error:new(e??Qm)(i.issues.map(e=>_m(e,o,Tp())))}:{success:!0,data:i.value}},qm=Wm(zm),Hm=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>_m(e,o,Tp())))}:{success:!0,data:i.value}},Km=Hm(zm),Jm=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Gm(e)(t,n,o)},eg=Jm(zm),tg=e=>(t,n,r)=>Gm(e)(t,n,r),ng=tg(zm),rg=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Xm(e)(t,n,o)},og=rg(zm),ig=e=>async(t,n,r)=>Xm(e)(t,n,r),ag=ig(zm),sg=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Wm(e)(t,n,o)},lg=sg(zm),ug=e=>(t,n,r)=>Wm(e)(t,n,r),cg=ug(zm),dg=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Hm(e)(t,n,o)},fg=dg(zm),hg=e=>async(t,n,r)=>Hm(e)(t,n,r),pg=hg(zm),mg=/^[cC][^\s-]{8,}$/,gg=/^[0-9a-z]+$/,vg=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,yg=/^[0-9a-vA-V]{20}$/,bg=/^[A-Za-z0-9]{27}$/,Og=/^[a-zA-Z0-9_-]{21}$/,wg=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Sg=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xg=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,kg=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,_g=kg(4),Pg=kg(6),Eg=kg(7),$g=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Tg=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Cg=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,jg=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,Ng=jg,Ag=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ig="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Mg(){return new RegExp(Ig,"u")}const Dg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Rg=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Qg=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,zg=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Lg=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Zg=/^[A-Za-z0-9_-]*$/,Fg=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Ug=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Vg=/^\+(?:[0-9]){6,14}[0-9]$/,Gg="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Bg=new RegExp(`^${Gg}$`);function Xg(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Yg(e){return new RegExp(`^${Xg(e)}$`)}function Wg(e){const t=Xg({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Gg}T(?:${r})$`)}const qg=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),Hg=/^-?\d+n?$/,Kg=/^-?\d+$/,Jg=/^-?\d+(?:\.\d+)?/,ev=/^(?:true|false)$/i,tv=/^null$/i,nv=/^undefined$/i,rv=/^[^A-Z]*$/,ov=/^[^a-z]*$/,iv=/^[0-9a-fA-F]*$/;function av(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function sv(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}const lv=/^[0-9a-fA-F]{32}$/,uv=av(22,"=="),cv=sv(22),dv=/^[0-9a-fA-F]{40}$/,fv=av(27,"="),hv=sv(27),pv=/^[0-9a-fA-F]{64}$/,mv=av(43,"="),gv=sv(43),vv=/^[0-9a-fA-F]{96}$/,yv=av(64,""),bv=sv(64),Ov=/^[0-9a-fA-F]{128}$/,wv=av(86,"=="),Sv=sv(86),xv=kp("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),kv={number:"number",bigint:"bigint",object:"date"},_v=kp("$ZodCheckLessThan",(e,t)=>{xv.init(e,t);const n=kv[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Pv=kp("$ZodCheckGreaterThan",(e,t)=>{xv.init(e,t);const n=kv[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ev=kp("$ZodCheckMultipleOf",(e,t)=>{xv.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===Zp(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),$v=kp("$ZodCheckNumberFormat",(e,t)=>{xv.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[o,i]=hm[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=o,r.maximum=i,n&&(r.pattern=Kg)}),e._zod.check=a=>{const s=a.value;if(n){if(!Number.isInteger(s))return void a.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}s<o&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),s>i&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:i,inst:e})}}),Tv=kp("$ZodCheckBigIntFormat",(e,t)=>{xv.init(e,t);const[n,r]=pm[t.format];e._zod.onattach.push(e=>{const o=e._zod.bag;o.format=t.format,o.minimum=n,o.maximum=r}),e._zod.check=o=>{const i=o.value;i<n&&o.issues.push({origin:"bigint",input:i,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),i>r&&o.issues.push({origin:"bigint",input:i,code:"too_big",maximum:r,inst:e})}}),Cv=kp("$ZodCheckMaxSize",(e,t)=>{var n;xv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!zp(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;r.size<=t.maximum||n.issues.push({origin:Pm(r),code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),jv=kp("$ZodCheckMinSize",(e,t)=>{var n;xv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!zp(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;r.size>=t.minimum||n.issues.push({origin:Pm(r),code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Nv=kp("$ZodCheckSizeEquals",(e,t)=>{var n;xv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!zp(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.size,n.maximum=t.size,n.size=t.size}),e._zod.check=n=>{const r=n.value,o=r.size;if(o===t.size)return;const i=o>t.size;n.issues.push({origin:Pm(r),...i?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Av=kp("$ZodCheckMaxLength",(e,t)=>{var n;xv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!zp(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const o=Em(r);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Iv=kp("$ZodCheckMinLength",(e,t)=>{var n;xv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!zp(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const o=Em(r);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Mv=kp("$ZodCheckLengthEquals",(e,t)=>{var n;xv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!zp(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,o=r.length;if(o===t.length)return;const i=Em(r),a=o>t.length;n.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Dv=kp("$ZodCheckStringFormat",(e,t)=>{var n,r;xv.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Rv=kp("$ZodCheckRegex",(e,t)=>{Dv.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Qv=kp("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=rv),Dv.init(e,t)}),zv=kp("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ov),Dv.init(e,t)}),Lv=kp("$ZodCheckIncludes",(e,t)=>{xv.init(e,t);const n=sm(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),Zv=kp("$ZodCheckStartsWith",(e,t)=>{xv.init(e,t);const n=new RegExp(`^${sm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Fv=kp("$ZodCheckEndsWith",(e,t)=>{xv.init(e,t);const n=new RegExp(`.*${sm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}});function Uv(e,t,n){e.issues.length&&t.issues.push(...xm(n,e.issues))}const Vv=kp("$ZodCheckProperty",(e,t)=>{xv.init(e,t),e._zod.check=e=>{const n=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(n instanceof Promise)return n.then(n=>Uv(n,e,t.property));Uv(n,e,t.property)}}),Gv=kp("$ZodCheckMimeType",(e,t)=>{xv.init(e,t);const n=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=r=>{n.has(r.value.type)||r.issues.push({code:"invalid_value",values:t.mime,input:r.value.type,inst:e,continue:!t.abort})}}),Bv=kp("$ZodCheckOverwrite",(e,t)=>{xv.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class Xv{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of r)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const Yv={major:4,minor:1,patch:11},Wv=kp("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Yv;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const t of r)for(const n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,o=Sm(e);for(const i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(o)continue;const t=e.issues.length,a=i._zod.check(e);if(a instanceof Promise&&!1===n?.async)throw new Pp;if(r||a instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await a;e.issues.length!==t&&(o||(o=Sm(e,t)))});else{if(e.issues.length===t)continue;o||(o=Sm(e,t))}}return r?r.then(()=>e):e},n=(n,o,i)=>{if(Sm(n))return n.aborted=!0,n;const a=t(o,r,i);if(a instanceof Promise){if(!1===i.async)throw new Pp;return a.then(t=>e._zod.parse(t,i))}return e._zod.parse(a,i)};e._zod.run=(o,i)=>{if(i.skipChecks)return e._zod.parse(o,i);if("backward"===i.direction){const t=e._zod.parse({value:o.value,issues:[]},{...i,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,o,i)):n(t,o,i)}const a=e._zod.parse(o,i);if(a instanceof Promise){if(!1===i.async)throw new Pp;return a.then(e=>t(e,r,i))}return t(a,r,i)}}e["~standard"]={validate:t=>{try{const n=qm(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return Km(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),qv=kp("$ZodString",(e,t)=>{Wv.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??qg(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(r){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Hv=kp("$ZodStringFormat",(e,t)=>{Dv.init(e,t),qv.init(e,t)}),Kv=kp("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=xg),Hv.init(e,t)}),Jv=kp("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=kg(e))}else t.pattern??(t.pattern=kg());Hv.init(e,t)}),ey=kp("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=$g),Hv.init(e,t)}),ty=kp("$ZodURL",(e,t)=>{Hv.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Fg.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(t.normalize?n.value=o.href:n.value=r)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),ny=kp("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Mg()),Hv.init(e,t)}),ry=kp("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Og),Hv.init(e,t)}),oy=kp("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=mg),Hv.init(e,t)}),iy=kp("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=gg),Hv.init(e,t)}),ay=kp("$ZodULID",(e,t)=>{t.pattern??(t.pattern=vg),Hv.init(e,t)}),sy=kp("$ZodXID",(e,t)=>{t.pattern??(t.pattern=yg),Hv.init(e,t)}),ly=kp("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=bg),Hv.init(e,t)}),uy=kp("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Wg(t)),Hv.init(e,t)}),cy=kp("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Bg),Hv.init(e,t)}),dy=kp("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Yg(t)),Hv.init(e,t)}),fy=kp("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=wg),Hv.init(e,t)}),hy=kp("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Dg),Hv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),py=kp("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Rg),Hv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),my=kp("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Qg),Hv.init(e,t)}),gy=kp("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=zg),Hv.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(2!==r.length)throw new Error;const[e,t]=r;if(!t)throw new Error;const n=Number(t);if(`${n}`!==t)throw new Error;if(n<0||n>128)throw new Error;new URL(`http://[${e}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function vy(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const yy=kp("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Lg),Hv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{vy(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function by(e){if(!Zg.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return vy(t.padEnd(4*Math.ceil(t.length/4),"="))}const Oy=kp("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Zg),Hv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{by(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),wy=kp("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Vg),Hv.init(e,t)});function Sy(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return(!("typ"in o)||"JWT"===o?.typ)&&(!!o.alg&&(!t||"alg"in o&&o.alg===t))}catch{return!1}}const xy=kp("$ZodJWT",(e,t)=>{Hv.init(e,t),e._zod.check=n=>{Sy(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),ky=kp("$ZodCustomStringFormat",(e,t)=>{Hv.init(e,t),e._zod.check=n=>{t.fn(n.value)||n.issues.push({code:"invalid_format",format:t.format,input:n.value,inst:e,continue:!t.abort})}}),_y=kp("$ZodNumber",(e,t)=>{Wv.init(e,t),e._zod.pattern=e._zod.bag.pattern??Jg,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const o=n.value;if("number"==typeof o&&!Number.isNaN(o)&&Number.isFinite(o))return n;const i="number"==typeof o?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),n}}),Py=kp("$ZodNumber",(e,t)=>{$v.init(e,t),_y.init(e,t)}),Ey=kp("$ZodBoolean",(e,t)=>{Wv.init(e,t),e._zod.pattern=ev,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const o=n.value;return"boolean"==typeof o||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),$y=kp("$ZodBigInt",(e,t)=>{Wv.init(e,t),e._zod.pattern=Hg,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch(e){}return"bigint"==typeof n.value||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:e}),n}}),Ty=kp("$ZodBigInt",(e,t)=>{Tv.init(e,t),$y.init(e,t)}),Cy=kp("$ZodSymbol",(e,t)=>{Wv.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return"symbol"==typeof r||t.issues.push({expected:"symbol",code:"invalid_type",input:r,inst:e}),t}}),jy=kp("$ZodUndefined",(e,t)=>{Wv.init(e,t),e._zod.pattern=nv,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,n)=>{const r=t.value;return void 0===r||t.issues.push({expected:"undefined",code:"invalid_type",input:r,inst:e}),t}}),Ny=kp("$ZodNull",(e,t)=>{Wv.init(e,t),e._zod.pattern=tv,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{const r=t.value;return null===r||t.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),t}}),Ay=kp("$ZodAny",(e,t)=>{Wv.init(e,t),e._zod.parse=e=>e}),Iy=kp("$ZodUnknown",(e,t)=>{Wv.init(e,t),e._zod.parse=e=>e}),My=kp("$ZodNever",(e,t)=>{Wv.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),Dy=kp("$ZodVoid",(e,t)=>{Wv.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return void 0===r||t.issues.push({expected:"void",code:"invalid_type",input:r,inst:e}),t}}),Ry=kp("$ZodDate",(e,t)=>{Wv.init(e,t),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=new Date(n.value)}catch(e){}const o=n.value,i=o instanceof Date;return i&&!Number.isNaN(o.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:o,...i?{received:"Invalid Date"}:{},inst:e}),n}});function Qy(e,t,n){e.issues.length&&t.issues.push(...xm(n,e.issues)),t.value[n]=e.value}const zy=kp("$ZodArray",(e,t)=>{Wv.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const i=[];for(let e=0;e<o.length;e++){const a=o[e],s=t.element._zod.run({value:a,issues:[]},r);s instanceof Promise?i.push(s.then(t=>Qy(t,n,e))):Qy(s,n,e)}return i.length?Promise.all(i).then(()=>n):n}});function Ly(e,t,n,r){e.issues.length&&t.issues.push(...xm(n,e.issues)),void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function Zy(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=fm(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function Fy(e,t,n,r,o,i){const a=[],s=o.keySet,l=o.catchall._zod,u=l.def.type;for(const o of Object.keys(t)){if(s.has(o))continue;if("never"===u){a.push(o);continue}const i=l.run({value:t[o],issues:[]},r);i instanceof Promise?e.push(i.then(e=>Ly(e,n,o,t))):Ly(i,n,o,t)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:i}),e.length?Promise.all(e).then(()=>n):n}const Uy=kp("$ZodObject",(e,t)=>{Wv.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const n={...e};return Object.defineProperty(t,"shape",{value:n}),n}})}const r=Qp(()=>Zy(t));Up(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const o=Jp,i=t.catchall;let a;e._zod.parse=(t,n)=>{a??(a=r.value);const s=t.value;if(!o(s))return t.issues.push({expected:"object",code:"invalid_type",input:s,inst:e}),t;t.value={};const l=[],u=a.shape;for(const e of a.keys){const r=u[e]._zod.run({value:s[e],issues:[]},n);r instanceof Promise?l.push(r.then(n=>Ly(n,t,e,s))):Ly(r,t,e,s)}return i?Fy(l,s,t,n,r.value,e):l.length?Promise.all(l).then(()=>t):t}}),Vy=kp("$ZodObjectJIT",(e,t)=>{Uy.init(e,t);const n=e._zod.parse,r=Qp(()=>Zy(t));let o;const i=Jp,a=!$p.jitless,s=a&&em.value,l=t.catchall;let u;e._zod.parse=(c,d)=>{u??(u=r.value);const f=c.value;return i(f)?a&&s&&!1===d?.async&&!0!==d.jitless?(o||(o=(e=>{const t=new Xv(["shape","payload","ctx"]),n=r.value,o=e=>{const t=Hp(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const i=Object.create(null);let a=0;for(const e of n.keys)i[e]="key_"+a++;t.write("const newResult = {};");for(const e of n.keys){const n=i[e],r=Hp(e);t.write(`const ${n} = ${o(e)};`),t.write(`\n        if (${n}.issues.length) {\n          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${r}, ...iss.path] : [${r}]\n          })));\n        }\n        \n        \n        if (${n}.value === undefined) {\n          if (${r} in input) {\n            newResult[${r}] = undefined;\n          }\n        } else {\n          newResult[${r}] = ${n}.value;\n        }\n        \n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const s=t.compile();return(t,n)=>s(e,t,n)})(t.shape)),c=o(c,d),l?Fy([],f,c,d,u,e):c):n(c,d):(c.issues.push({expected:"object",code:"invalid_type",input:f,inst:e}),c)}});function Gy(e,t,n,r){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;const o=e.filter(e=>!Sm(e));return 1===o.length?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>_m(e,r,Tp())))}),t)}const By=kp("$ZodUnion",(e,t)=>{Wv.init(e,t),Up(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),Up(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),Up(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),Up(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>Lp(e.source)).join("|")})$`)}});const n=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(o,i)=>{if(n)return r(o,i);let a=!1;const s=[];for(const e of t.options){const t=e._zod.run({value:o.value,issues:[]},i);if(t instanceof Promise)s.push(t),a=!0;else{if(0===t.issues.length)return t;s.push(t)}}return a?Promise.all(s).then(t=>Gy(t,o,e,i)):Gy(s,o,e,i)}}),Xy=kp("$ZodDiscriminatedUnion",(e,t)=>{By.init(e,t);const n=e._zod.parse;Up(e._zod,"propValues",()=>{const e={};for(const n of t.options){const r=n._zod.propValues;if(!r||0===Object.keys(r).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(const r of n)e[t].add(r)}}return e});const r=Qp(()=>{const e=t.options,n=new Map;for(const r of e){const e=r._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n});e._zod.parse=(o,i)=>{const a=o.value;if(!Jp(a))return o.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),o;const s=r.value.get(a?.[t.discriminator]);return s?s._zod.run(o,i):t.unionFallback?n(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),o)}}),Yy=kp("$ZodIntersection",(e,t)=>{Wv.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,o=t.left._zod.run({value:r,issues:[]},n),i=t.right._zod.run({value:r,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([t,n])=>qy(e,t,n)):qy(e,o,i)}});function Wy(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(tm(e)&&tm(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),o={...e,...t};for(const n of r){const r=Wy(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};o[n]=r.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=Wy(e[r],t[r]);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function qy(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Sm(e))return e;const r=Wy(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const Hy=kp("$ZodTuple",(e,t)=>{Wv.init(e,t);const n=t.items,r=n.length-[...n].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(o,i)=>{const a=o.value;if(!Array.isArray(a))return o.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),o;o.value=[];const s=[];if(!t.rest){const t=a.length>n.length,i=a.length<r-1;if(t||i)return o.issues.push({...t?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:a,inst:e,origin:"array"}),o}let l=-1;for(const e of n){if(l++,l>=a.length&&l>=r)continue;const t=e._zod.run({value:a[l],issues:[]},i);t instanceof Promise?s.push(t.then(e=>Ky(e,o,l))):Ky(t,o,l)}if(t.rest){const e=a.slice(n.length);for(const n of e){l++;const e=t.rest._zod.run({value:n,issues:[]},i);e instanceof Promise?s.push(e.then(e=>Ky(e,o,l))):Ky(e,o,l)}}return s.length?Promise.all(s).then(()=>o):o}});function Ky(e,t,n){e.issues.length&&t.issues.push(...xm(n,e.issues)),t.value[n]=e.value}const Jy=kp("$ZodRecord",(e,t)=>{Wv.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!tm(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const i=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;n.value={};for(const e of a)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const a=t.valueType._zod.run({value:o[e],issues:[]},r);a instanceof Promise?i.push(a.then(t=>{t.issues.length&&n.issues.push(...xm(e,t.issues)),n.value[e]=t.value})):(a.issues.length&&n.issues.push(...xm(e,a.issues)),n.value[e]=a.value)}let s;for(const e in o)a.has(e)||(s=s??[],s.push(e));s&&s.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:s})}else{n.value={};for(const a of Reflect.ownKeys(o)){if("__proto__"===a)continue;const s=t.keyType._zod.run({value:a,issues:[]},r);if(s instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(s.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:s.issues.map(e=>_m(e,r,Tp())),input:a,path:[a],inst:e}),n.value[s.value]=s.value;continue}const l=t.valueType._zod.run({value:o[a],issues:[]},r);l instanceof Promise?i.push(l.then(e=>{e.issues.length&&n.issues.push(...xm(a,e.issues)),n.value[s.value]=e.value})):(l.issues.length&&n.issues.push(...xm(a,l.issues)),n.value[s.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),eb=kp("$ZodMap",(e,t)=>{Wv.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!(o instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:o,inst:e}),n;const i=[];n.value=new Map;for(const[a,s]of o){const l=t.keyType._zod.run({value:a,issues:[]},r),u=t.valueType._zod.run({value:s,issues:[]},r);l instanceof Promise||u instanceof Promise?i.push(Promise.all([l,u]).then(([t,i])=>{tb(t,i,n,a,o,e,r)})):tb(l,u,n,a,o,e,r)}return i.length?Promise.all(i).then(()=>n):n}});function tb(e,t,n,r,o,i,a){e.issues.length&&(im.has(typeof r)?n.issues.push(...xm(r,e.issues)):n.issues.push({code:"invalid_key",origin:"map",input:o,inst:i,issues:e.issues.map(e=>_m(e,a,Tp()))})),t.issues.length&&(im.has(typeof r)?n.issues.push(...xm(r,t.issues)):n.issues.push({origin:"map",code:"invalid_element",input:o,inst:i,key:r,issues:t.issues.map(e=>_m(e,a,Tp()))})),n.value.set(e.value,t.value)}const nb=kp("$ZodSet",(e,t)=>{Wv.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!(o instanceof Set))return n.issues.push({input:o,inst:e,expected:"set",code:"invalid_type"}),n;const i=[];n.value=new Set;for(const e of o){const o=t.valueType._zod.run({value:e,issues:[]},r);o instanceof Promise?i.push(o.then(e=>rb(e,n))):rb(o,n)}return i.length?Promise.all(i).then(()=>n):n}});function rb(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}const ob=kp("$ZodEnum",(e,t)=>{Wv.init(e,t);const n=Mp(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(e=>im.has(typeof e)).map(e=>"string"==typeof e?sm(e):e.toString()).join("|")})$`),e._zod.parse=(t,o)=>{const i=t.value;return r.has(i)||t.issues.push({code:"invalid_value",values:n,input:i,inst:e}),t}}),ib=kp("$ZodLiteral",(e,t)=>{if(Wv.init(e,t),0===t.values.length)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?sm(e):e?sm(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,r)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),ab=kp("$ZodFile",(e,t)=>{Wv.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return r instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:r,inst:e}),t}}),sb=kp("$ZodTransform",(e,t)=>{Wv.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new Ep(e.constructor.name);const o=t.transform(n.value,n);if(r.async){return(o instanceof Promise?o:Promise.resolve(o)).then(e=>(n.value=e,n))}if(o instanceof Promise)throw new Pp;return n.value=o,n}});function lb(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const ub=kp("$ZodOptional",(e,t)=>{Wv.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Up(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Up(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Lp(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>lb(t,e.value)):lb(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),cb=kp("$ZodNullable",(e,t)=>{Wv.init(e,t),Up(e._zod,"optin",()=>t.innerType._zod.optin),Up(e._zod,"optout",()=>t.innerType._zod.optout),Up(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Lp(e.source)}|null)$`):void 0}),Up(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),db=kp("$ZodDefault",(e,t)=>{Wv.init(e,t),e._zod.optin="optional",Up(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>fb(e,t)):fb(r,t)}});function fb(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const hb=kp("$ZodPrefault",(e,t)=>{Wv.init(e,t),e._zod.optin="optional",Up(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>("backward"===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),pb=kp("$ZodNonOptional",(e,t)=>{Wv.init(e,t),Up(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(t=>mb(t,e)):mb(o,e)}});function mb(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const gb=kp("$ZodSuccess",(e,t)=>{Wv.init(e,t),e._zod.parse=(e,n)=>{if("backward"===n.direction)throw new Ep("ZodSuccess");const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===r.issues.length,e)}}),vb=kp("$ZodCatch",(e,t)=>{Wv.init(e,t),Up(e._zod,"optin",()=>t.innerType._zod.optin),Up(e._zod,"optout",()=>t.innerType._zod.optout),Up(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>_m(e,n,Tp()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>_m(e,n,Tp()))},input:e.value}),e.issues=[]),e)}}),yb=kp("$ZodNaN",(e,t)=>{Wv.init(e,t),e._zod.parse=(t,n)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),bb=kp("$ZodPipe",(e,t)=>{Wv.init(e,t),Up(e._zod,"values",()=>t.in._zod.values),Up(e._zod,"optin",()=>t.in._zod.optin),Up(e._zod,"optout",()=>t.out._zod.optout),Up(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("backward"===n.direction){const r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>Ob(e,t.in,n)):Ob(r,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>Ob(e,t.out,n)):Ob(r,t.out,n)}});function Ob(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const wb=kp("$ZodCodec",(e,t)=>{Wv.init(e,t),Up(e._zod,"values",()=>t.in._zod.values),Up(e._zod,"optin",()=>t.in._zod.optin),Up(e._zod,"optout",()=>t.out._zod.optout),Up(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("forward"===(n.direction||"forward")){const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>Sb(e,t,n)):Sb(r,t,n)}{const r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>Sb(e,t,n)):Sb(r,t,n)}}});function Sb(e,t,n){if(e.issues.length)return e.aborted=!0,e;if("forward"===(n.direction||"forward")){const r=t.transform(e.value,e);return r instanceof Promise?r.then(r=>xb(e,r,t.out,n)):xb(e,r,t.out,n)}{const r=t.reverseTransform(e.value,e);return r instanceof Promise?r.then(r=>xb(e,r,t.in,n)):xb(e,r,t.in,n)}}function xb(e,t,n,r){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:t,issues:e.issues},r)}const kb=kp("$ZodReadonly",(e,t)=>{Wv.init(e,t),Up(e._zod,"propValues",()=>t.innerType._zod.propValues),Up(e._zod,"values",()=>t.innerType._zod.values),Up(e._zod,"optin",()=>t.innerType._zod.optin),Up(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(_b):_b(r)}});function _b(e){return e.value=Object.freeze(e.value),e}const Pb=kp("$ZodTemplateLiteral",(e,t)=>{Wv.init(e,t);const n=[];for(const e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);const t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw new Error(`Invalid template literal part: ${e._zod.traits}`);const r=t.startsWith("^")?1:0,o=t.endsWith("$")?t.length-1:t.length;n.push(t.slice(r,o))}else{if(null!==e&&!am.has(typeof e))throw new Error(`Invalid template literal part: ${e}`);n.push(sm(`${e}`))}e._zod.pattern=new RegExp(`^${n.join("")}$`),e._zod.parse=(n,r)=>"string"!=typeof n.value?(n.issues.push({input:n.value,inst:e,expected:"template_literal",code:"invalid_type"}),n):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),n)}),Eb=kp("$ZodFunction",(e,t)=>(Wv.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw new Error("implement() must be called with a function");return function(...n){const r=e._def.input?Bm(e._def.input,n):n,o=Reflect.apply(t,this,r);return e._def.output?Bm(e._def.output,o):o}},e.implementAsync=t=>{if("function"!=typeof t)throw new Error("implementAsync() must be called with a function");return async function(...n){const r=e._def.input?await Ym(e._def.input,n):n,o=await Reflect.apply(t,this,r);return e._def.output?await Ym(e._def.output,o):o}},e._zod.parse=(t,n)=>{if("function"!=typeof t.value)return t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}),t;const r=e._def.output&&"promise"===e._def.output._zod.def.type;return t.value=r?e.implementAsync(t.value):e.implement(t.value),t},e.input=(...t)=>{const n=e.constructor;return Array.isArray(t[0])?new n({type:"function",input:new Hy({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}):new n({type:"function",input:t[0],output:e._def.output})},e.output=t=>new(0,e.constructor)({type:"function",input:e._def.input,output:t}),e)),$b=kp("$ZodPromise",(e,t)=>{Wv.init(e,t),e._zod.parse=(e,n)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},n))}),Tb=kp("$ZodLazy",(e,t)=>{Wv.init(e,t),Up(e._zod,"innerType",()=>t.getter()),Up(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),Up(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),Up(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),Up(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,n)=>e._zod.innerType._zod.run(t,n)}),Cb=kp("$ZodCustom",(e,t)=>{xv.init(e,t),Wv.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(t=>jb(t,n,r,e));jb(o,n,r,e)}});function jb(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push($m(e))}}const Nb=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}const n={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`  :   ${e.expected}    ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  :   ${dm(e.values[0])}`:`  :     : ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`   :    ${e.origin??""} ${n} ${e.maximum.toString()} ${r.unit??""}`:`  :    ${e.origin??""} ${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`  :   ${e.origin}   ${n} ${e.minimum.toString()} ${r.unit}`:`  :   ${e.origin}   ${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`  :     "${e.prefix}"`:"ends_with"===t.format?`  :     "${t.suffix}"`:"includes"===t.format?`  :    "${t.includes}"`:"regex"===t.format?`  :     ${t.pattern}`:`${n[t.format]??e.format}  `}case"not_multiple_of":return`  :      ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""} ${e.keys.length>1?"":""}: ${Dp(e.keys," ")}`;case"invalid_key":return`    ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${e.origin}`}}};function Ab(){return{localeError:Nb()}}const Ib=()=>{const e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}};function t(t){return e[t]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Yanl dyr: gzlniln ${e.expected}, daxil olan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Yanl dyr: gzlniln ${dm(e.values[0])}`:`Yanl seim: aadaklardan biri olmaldr: ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`ox byk: gzlniln ${e.origin??"dyr"} ${n}${e.maximum.toString()} ${r.unit??"element"}`:`ox byk: gzlniln ${e.origin??"dyr"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`ox kiik: gzlniln ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:`ox kiik: gzlniln ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Yanl mtn: "${t.prefix}" il balamaldr`:"ends_with"===t.format?`Yanl mtn: "${t.suffix}" il bitmlidir`:"includes"===t.format?`Yanl mtn: "${t.includes}" daxil olmaldr`:"regex"===t.format?`Yanl mtn: ${t.pattern} ablonuna uyun olmaldr`:`Yanl ${n[t.format]??e.format}`}case"not_multiple_of":return`Yanl dd: ${e.divisor} il bln biln olmaldr`;case"unrecognized_keys":return`Tannmayan aar${e.keys.length>1?"lar":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`${e.origin} daxilind yanl aar`;case"invalid_union":default:return"Yanl dyr";case"invalid_element":return`${e.origin} daxilind yanl dyr`}}};function Mb(){return{localeError:Ib()}}function Db(e,t,n,r){const o=Math.abs(e),i=o%10,a=o%100;return a>=11&&a<=19?r:1===i?t:i>=2&&i<=4?n:r}const Rb=()=>{const e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${dm(e.values[0])}`:` :    ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);if(r){const t=Db(Number(e.maximum),r.unit.one,r.unit.few,r.unit.many);return` : ,  ${e.origin??""}  ${r.verb} ${n}${e.maximum.toString()} ${t}`}return` : ,  ${e.origin??""}   ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);if(r){const t=Db(Number(e.minimum),r.unit.one,r.unit.few,r.unit.many);return` : ,  ${e.origin}  ${r.verb} ${n}${e.minimum.toString()} ${t}`}return` : ,  ${e.origin}   ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` :    "${t.prefix}"`:"ends_with"===t.format?` :    "${t.suffix}"`:"includes"===t.format?` :   "${t.includes}"`:"regex"===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin}`}}};function Qb(){return{localeError:Rb()}}const zb=()=>{const e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(t){return e[t]??null}const n={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipus invlid: s'esperava ${e.expected}, s'ha rebut ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Valor invlid: s'esperava ${dm(e.values[0])}`:`Opci invlida: s'esperava una de ${Dp(e.values," o ")}`;case"too_big":{const n=e.inclusive?"com a mxim":"menys de",r=t(e.origin);return r?`Massa gran: s'esperava que ${e.origin??"el valor"} contingus ${n} ${e.maximum.toString()} ${r.unit??"elements"}`:`Massa gran: s'esperava que ${e.origin??"el valor"} fos ${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?"com a mnim":"ms de",r=t(e.origin);return r?`Massa petit: s'esperava que ${e.origin} contingus ${n} ${e.minimum.toString()} ${r.unit}`:`Massa petit: s'esperava que ${e.origin} fos ${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Format invlid: ha de comenar amb "${t.prefix}"`:"ends_with"===t.format?`Format invlid: ha d'acabar amb "${t.suffix}"`:"includes"===t.format?`Format invlid: ha d'incloure "${t.includes}"`:"regex"===t.format?`Format invlid: ha de coincidir amb el patr ${t.pattern}`:`Format invlid per a ${n[t.format]??e.format}`}case"not_multiple_of":return`Nmero invlid: ha de ser mltiple de ${e.divisor}`;case"unrecognized_keys":return`Clau${e.keys.length>1?"s":""} no reconeguda${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Clau invlida a ${e.origin}`;case"invalid_union":default:return"Entrada invlida";case"invalid_element":return`Element invlid a ${e.origin}`}}};function Lb(){return{localeError:zb()}}const Zb=()=>{const e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}};function t(t){return e[t]??null}const n={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"};return e=>{switch(e.code){case"invalid_type":return`Neplatn vstup: oekvno ${e.expected}, obdreno ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"slo";case"string":return"etzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neplatn vstup: oekvno ${dm(e.values[0])}`:`Neplatn monost: oekvna jedna z hodnot ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Hodnota je pli velk: ${e.origin??"hodnota"} mus mt ${n}${e.maximum.toString()} ${r.unit??"prvk"}`:`Hodnota je pli velk: ${e.origin??"hodnota"} mus bt ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Hodnota je pli mal: ${e.origin??"hodnota"} mus mt ${n}${e.minimum.toString()} ${r.unit??"prvk"}`:`Hodnota je pli mal: ${e.origin??"hodnota"} mus bt ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Neplatn etzec: mus zanat na "${t.prefix}"`:"ends_with"===t.format?`Neplatn etzec: mus konit na "${t.suffix}"`:"includes"===t.format?`Neplatn etzec: mus obsahovat "${t.includes}"`:"regex"===t.format?`Neplatn etzec: mus odpovdat vzoru ${t.pattern}`:`Neplatn formt ${n[t.format]??e.format}`}case"not_multiple_of":return`Neplatn slo: mus bt nsobkem ${e.divisor}`;case"unrecognized_keys":return`Neznm kle: ${Dp(e.keys,", ")}`;case"invalid_key":return`Neplatn kl v ${e.origin}`;case"invalid_union":default:return"Neplatn vstup";case"invalid_element":return`Neplatn hodnota v ${e.origin}`}}};function Fb(){return{localeError:Zb()}}const Ub=()=>{const e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"};function n(t){return e[t]??null}function r(e){return t[e]??e}const o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Ugyldigt input: forventede ${r(e.expected)}, fik ${r((e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tal";case"object":return Array.isArray(e)?"liste":null===e?"null":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objekt"}return t})(e.input))}`;case"invalid_value":return 1===e.values.length?`Ugyldig vrdi: forventede ${dm(e.values[0])}`:`Ugyldigt valg: forventede en af flgende ${Dp(e.values,"|")}`;case"too_big":{const t=e.inclusive?"<=":"<",o=n(e.origin),i=r(e.origin);return o?`For stor: forventede ${i??"value"} ${o.verb} ${t} ${e.maximum.toString()} ${o.unit??"elementer"}`:`For stor: forventede ${i??"value"} havde ${t} ${e.maximum.toString()}`}case"too_small":{const t=e.inclusive?">=":">",o=n(e.origin),i=r(e.origin);return o?`For lille: forventede ${i} ${o.verb} ${t} ${e.minimum.toString()} ${o.unit}`:`For lille: forventede ${i} havde ${t} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ugyldig streng: skal starte med "${t.prefix}"`:"ends_with"===t.format?`Ugyldig streng: skal ende med "${t.suffix}"`:"includes"===t.format?`Ugyldig streng: skal indeholde "${t.includes}"`:"regex"===t.format?`Ugyldig streng: skal matche mnsteret ${t.pattern}`:`Ugyldig ${o[t.format]??e.format}`}case"not_multiple_of":return`Ugyldigt tal: skal vre deleligt med ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Ugyldig ngle i ${e.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig vrdi i ${e.origin}`;default:return"Ugyldigt input"}}};function Vb(){return{localeError:Ub()}}const Gb=()=>{const e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(t){return e[t]??null}const n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return e=>{switch(e.code){case"invalid_type":return`Ungltige Eingabe: erwartet ${e.expected}, erhalten ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ungltige Eingabe: erwartet ${dm(e.values[0])}`:`Ungltige Option: erwartet eine von ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Zu gro: erwartet, dass ${e.origin??"Wert"} ${n}${e.maximum.toString()} ${r.unit??"Elemente"} hat`:`Zu gro: erwartet, dass ${e.origin??"Wert"} ${n}${e.maximum.toString()} ist`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Zu klein: erwartet, dass ${e.origin} ${n}${e.minimum.toString()} ${r.unit} hat`:`Zu klein: erwartet, dass ${e.origin} ${n}${e.minimum.toString()} ist`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ungltiger String: muss mit "${t.prefix}" beginnen`:"ends_with"===t.format?`Ungltiger String: muss mit "${t.suffix}" enden`:"includes"===t.format?`Ungltiger String: muss "${t.includes}" enthalten`:"regex"===t.format?`Ungltiger String: muss dem Muster ${t.pattern} entsprechen`:`Ungltig: ${n[t.format]??e.format}`}case"not_multiple_of":return`Ungltige Zahl: muss ein Vielfaches von ${e.divisor} sein`;case"unrecognized_keys":return`${e.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Ungltiger Schlssel in ${e.origin}`;case"invalid_union":default:return"Ungltige Eingabe";case"invalid_element":return`Ungltiger Wert in ${e.origin}`}}};function Bb(){return{localeError:Gb()}}const Xb=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(t){return e[t]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Invalid input: expected ${e.expected}, received ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${dm(e.values[0])}`:`Invalid option: expected one of ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Too big: expected ${e.origin??"value"} to have ${n}${e.maximum.toString()} ${r.unit??"elements"}`:`Too big: expected ${e.origin??"value"} to be ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Too small: expected ${e.origin} to have ${n}${e.minimum.toString()} ${r.unit}`:`Too small: expected ${e.origin} to be ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Invalid string: must start with "${t.prefix}"`:"ends_with"===t.format?`Invalid string: must end with "${t.suffix}"`:"includes"===t.format?`Invalid string: must include "${t.includes}"`:"regex"===t.format?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function Yb(){return{localeError:Xb()}}const Wb=()=>{const e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(t){return e[t]??null}const n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return e=>{switch(e.code){case"invalid_type":return`Nevalida enigo: atendiis ${e.expected}, riceviis ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Nevalida enigo: atendiis ${dm(e.values[0])}`:`Nevalida opcio: atendiis unu el ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Tro granda: atendiis ke ${e.origin??"valoro"} havu ${n}${e.maximum.toString()} ${r.unit??"elementojn"}`:`Tro granda: atendiis ke ${e.origin??"valoro"} havu ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Tro malgranda: atendiis ke ${e.origin} havu ${n}${e.minimum.toString()} ${r.unit}`:`Tro malgranda: atendiis ke ${e.origin} estu ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Nevalida karaktraro: devas komencii per "${t.prefix}"`:"ends_with"===t.format?`Nevalida karaktraro: devas finii per "${t.suffix}"`:"includes"===t.format?`Nevalida karaktraro: devas inkluzivi "${t.includes}"`:"regex"===t.format?`Nevalida karaktraro: devas kongrui kun la modelo ${t.pattern}`:`Nevalida ${n[t.format]??e.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${e.divisor}`;case"unrecognized_keys":return`Nekonata${e.keys.length>1?"j":""} losilo${e.keys.length>1?"j":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${e.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${e.origin}`}}};function qb(){return{localeError:Wb()}}const Hb=()=>{const e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"};function n(t){return e[t]??null}function r(e){return t[e]??e}const o={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Entrada invlida: se esperaba ${r(e.expected)}, recibido ${r((e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":return Array.isArray(e)?"array":null===e?"null":Object.getPrototypeOf(e)!==Object.prototype?e.constructor.name:"object"}return t})(e.input))}`;case"invalid_value":return 1===e.values.length?`Entrada invlida: se esperaba ${dm(e.values[0])}`:`Opcin invlida: se esperaba una de ${Dp(e.values,"|")}`;case"too_big":{const t=e.inclusive?"<=":"<",o=n(e.origin),i=r(e.origin);return o?`Demasiado grande: se esperaba que ${i??"valor"} tuviera ${t}${e.maximum.toString()} ${o.unit??"elementos"}`:`Demasiado grande: se esperaba que ${i??"valor"} fuera ${t}${e.maximum.toString()}`}case"too_small":{const t=e.inclusive?">=":">",o=n(e.origin),i=r(e.origin);return o?`Demasiado pequeo: se esperaba que ${i} tuviera ${t}${e.minimum.toString()} ${o.unit}`:`Demasiado pequeo: se esperaba que ${i} fuera ${t}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Cadena invlida: debe comenzar con "${t.prefix}"`:"ends_with"===t.format?`Cadena invlida: debe terminar en "${t.suffix}"`:"includes"===t.format?`Cadena invlida: debe incluir "${t.includes}"`:"regex"===t.format?`Cadena invlida: debe coincidir con el patrn ${t.pattern}`:`Invlido ${o[t.format]??e.format}`}case"not_multiple_of":return`Nmero invlido: debe ser mltiplo de ${e.divisor}`;case"unrecognized_keys":return`Llave${e.keys.length>1?"s":""} desconocida${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Llave invlida en ${r(e.origin)}`;case"invalid_union":default:return"Entrada invlida";case"invalid_element":return`Valor invlido en ${r(e.origin)}`}}};function Kb(){return{localeError:Hb()}}const Jb=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}const n={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected}  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case"invalid_value":return 1===e.values.length?` :  ${dm(e.values[0])} `:` :    ${Dp(e.values,"|")} `;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` : ${e.origin??""}  ${n}${e.maximum.toString()} ${r.unit??""} `:` : ${e.origin??""}  ${n}${e.maximum.toString()} `}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` : ${e.origin}  ${n}${e.minimum.toString()} ${r.unit} `:` : ${e.origin}  ${n}${e.minimum.toString()} `}case"invalid_format":{const t=e;return"starts_with"===t.format?` :   "${t.prefix}"  `:"ends_with"===t.format?` :   "${t.suffix}"  `:"includes"===t.format?` :   "${t.includes}" `:"regex"===t.format?` :    ${t.pattern}   `:`${n[t.format]??e.format} `}case"not_multiple_of":return` :   ${e.divisor} `;case"unrecognized_keys":return`${e.keys.length>1?"":""} : ${Dp(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin}`}}};function eO(){return{localeError:Jb()}}const tO=()=>{const e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}};function t(t){return e[t]??null}const n={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return e=>{switch(e.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${e.expected}, oli ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Virheellinen syte: tytyy olla ${dm(e.values[0])}`:`Virheellinen valinta: tytyy olla yksi seuraavista: ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Liian suuri: ${r.subject} tytyy olla ${n}${e.maximum.toString()} ${r.unit}`.trim():`Liian suuri: arvon tytyy olla ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Liian pieni: ${r.subject} tytyy olla ${n}${e.minimum.toString()} ${r.unit}`.trim():`Liian pieni: arvon tytyy olla ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Virheellinen syte: tytyy alkaa "${t.prefix}"`:"ends_with"===t.format?`Virheellinen syte: tytyy loppua "${t.suffix}"`:"includes"===t.format?`Virheellinen syte: tytyy sislt "${t.includes}"`:"regex"===t.format?`Virheellinen syte: tytyy vastata snnllist lauseketta ${t.pattern}`:`Virheellinen ${n[t.format]??e.format}`}case"not_multiple_of":return`Virheellinen luku: tytyy olla luvun ${e.divisor} monikerta`;case"unrecognized_keys":return`${e.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${Dp(e.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syte"}}};function nO(){return{localeError:tO()}}const rO=()=>{const e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(t){return e[t]??null}const n={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"};return e=>{switch(e.code){case"invalid_type":return`Entre invalide : ${e.expected} attendu, ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} reu`;case"invalid_value":return 1===e.values.length?`Entre invalide : ${dm(e.values[0])} attendu`:`Option invalide : une valeur parmi ${Dp(e.values,"|")} attendue`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Trop grand : ${e.origin??"valeur"} doit ${r.verb} ${n}${e.maximum.toString()} ${r.unit??"lment(s)"}`:`Trop grand : ${e.origin??"valeur"} doit tre ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Trop petit : ${e.origin} doit ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Trop petit : ${e.origin} doit tre ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chane invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chane invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chane invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chane invalide : doit correspondre au modle ${t.pattern}`:`${n[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${Dp(e.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${e.origin}`;case"invalid_union":default:return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}};function oO(){return{localeError:rO()}}const iO=()=>{const e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(t){return e[t]??null}const n={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"};return e=>{switch(e.code){case"invalid_type":return`Entre invalide : attendu ${e.expected}, reu ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entre invalide : attendu ${dm(e.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"":"<",r=t(e.origin);return r?`Trop grand : attendu que ${e.origin??"la valeur"} ait ${n}${e.maximum.toString()} ${r.unit}`:`Trop grand : attendu que ${e.origin??"la valeur"} soit ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?"":">",r=t(e.origin);return r?`Trop petit : attendu que ${e.origin} ait ${n}${e.minimum.toString()} ${r.unit}`:`Trop petit : attendu que ${e.origin} soit ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chane invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chane invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chane invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chane invalide : doit correspondre au motif ${t.pattern}`:`${n[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${Dp(e.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${e.origin}`;case"invalid_union":default:return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}};function aO(){return{localeError:iO()}}const sO=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:"",email:" ",url:" ",emoji:"'",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"  64",base64url:"  64  ",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`  :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  :  ${dm(e.values[0])}`:`  :     ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` : ${e.origin??"value"}   ${n}${e.maximum.toString()} ${r.unit??"elements"}`:` : ${e.origin??"value"}   ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` : ${e.origin}   ${n}${e.minimum.toString()} ${r.unit}`:` : ${e.origin}   ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`  :   "${t.prefix}"`:"ends_with"===t.format?`  :    "${t.suffix}"`:"includes"===t.format?`  :   "${t.includes}"`:"regex"===t.format?`  :    ${t.pattern}`:`${n[t.format]??e.format}  `}case"not_multiple_of":return`  :     ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""}  ${e.keys.length>1?"":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`   ${e.origin}`}}};function lO(){return{localeError:sO()}}const uO=()=>{const e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(t){return e[t]??null}const n={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"};return e=>{switch(e.code){case"invalid_type":return`rvnytelen bemenet: a vrt rtk ${e.expected}, a kapott rtk ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szm";case"object":if(Array.isArray(e))return"tmb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`rvnytelen bemenet: a vrt rtk ${dm(e.values[0])}`:`rvnytelen opci: valamelyik rtk vrt ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Tl nagy: ${e.origin??"rtk"} mrete tl nagy ${n}${e.maximum.toString()} ${r.unit??"elem"}`:`Tl nagy: a bemeneti rtk ${e.origin??"rtk"} tl nagy: ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Tl kicsi: a bemeneti rtk ${e.origin} mrete tl kicsi ${n}${e.minimum.toString()} ${r.unit}`:`Tl kicsi: a bemeneti rtk ${e.origin} tl kicsi ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`rvnytelen string: "${t.prefix}" rtkkel kell kezddnie`:"ends_with"===t.format?`rvnytelen string: "${t.suffix}" rtkkel kell vgzdnie`:"includes"===t.format?`rvnytelen string: "${t.includes}" rtket kell tartalmaznia`:"regex"===t.format?`rvnytelen string: ${t.pattern} mintnak kell megfelelnie`:`rvnytelen ${n[t.format]??e.format}`}case"not_multiple_of":return`rvnytelen szm: ${e.divisor} tbbszrsnek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`rvnytelen kulcs ${e.origin}`;case"invalid_union":default:return"rvnytelen bemenet";case"invalid_element":return`rvnytelen rtk: ${e.origin}`}}};function cO(){return{localeError:uO()}}const dO=()=>{const e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(t){return e[t]??null}const n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak valid: diharapkan ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak valid: diharapkan ${dm(e.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Terlalu besar: diharapkan ${e.origin??"value"} memiliki ${n}${e.maximum.toString()} ${r.unit??"elemen"}`:`Terlalu besar: diharapkan ${e.origin??"value"} menjadi ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Terlalu kecil: diharapkan ${e.origin} memiliki ${n}${e.minimum.toString()} ${r.unit}`:`Terlalu kecil: diharapkan ${e.origin} menjadi ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`String tidak valid: harus dimulai dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak valid: harus berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak valid: harus menyertakan "${t.includes}"`:"regex"===t.format?`String tidak valid: harus sesuai pola ${t.pattern}`:`${n[t.format]??e.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${e.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${e.origin}`}}};function fO(){return{localeError:dO()}}const hO=()=>{const e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}};function t(t){return e[t]??null}const n={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"};return e=>{switch(e.code){case"invalid_type":return`Rangt gildi:  slst inn ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmer";case"object":if(Array.isArray(e))return"fylki";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} ar sem  a vera ${e.expected}`;case"invalid_value":return 1===e.values.length?`Rangt gildi: gert r fyrir ${dm(e.values[0])}`:`gilt val: m vera eitt af eftirfarandi ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Of strt: gert er r fyrir a ${e.origin??"gildi"} hafi ${n}${e.maximum.toString()} ${r.unit??"hluti"}`:`Of strt: gert er r fyrir a ${e.origin??"gildi"} s ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Of lti: gert er r fyrir a ${e.origin} hafi ${n}${e.minimum.toString()} ${r.unit}`:`Of lti: gert er r fyrir a ${e.origin} s ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`gildur strengur: verur a byrja  "${t.prefix}"`:"ends_with"===t.format?`gildur strengur: verur a enda  "${t.suffix}"`:"includes"===t.format?`gildur strengur: verur a innihalda "${t.includes}"`:"regex"===t.format?`gildur strengur: verur a fylgja mynstri ${t.pattern}`:`Rangt ${n[t.format]??e.format}`}case"not_multiple_of":return`Rng tala: verur a vera margfeldi af ${e.divisor}`;case"unrecognized_keys":return`ekkt ${e.keys.length>1?"ir lyklar":"ur lykill"}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Rangur lykill  ${e.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi  ${e.origin}`}}};function pO(){return{localeError:hO()}}const mO=()=>{const e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(t){return e[t]??null}const n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input non valido: atteso ${e.expected}, ricevuto ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input non valido: atteso ${dm(e.values[0])}`:`Opzione non valida: atteso uno tra ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Troppo grande: ${e.origin??"valore"} deve avere ${n}${e.maximum.toString()} ${r.unit??"elementi"}`:`Troppo grande: ${e.origin??"valore"} deve essere ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Troppo piccolo: ${e.origin} deve avere ${n}${e.minimum.toString()} ${r.unit}`:`Troppo piccolo: ${e.origin} deve essere ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Stringa non valida: deve iniziare con "${t.prefix}"`:"ends_with"===t.format?`Stringa non valida: deve terminare con "${t.suffix}"`:"includes"===t.format?`Stringa non valida: deve includere "${t.includes}"`:"regex"===t.format?`Stringa non valida: deve corrispondere al pattern ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${e.divisor}`;case"unrecognized_keys":return`Chiav${e.keys.length>1?"i":"e"} non riconosciut${e.keys.length>1?"e":"a"}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${e.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${e.origin}`}}};function gO(){return{localeError:mO()}}const vO=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`: ${e.expected}${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`: ${dm(e.values[0])}`:`: ${Dp(e.values,"")}`;case"too_big":{const n=e.inclusive?"":"",r=t(e.origin);return r?`: ${e.origin??""}${e.maximum.toString()}${r.unit??""}${n}`:`: ${e.origin??""}${e.maximum.toString()}${n}`}case"too_small":{const n=e.inclusive?"":"",r=t(e.origin);return r?`: ${e.origin}${e.minimum.toString()}${r.unit}${n}`:`: ${e.origin}${e.minimum.toString()}${n}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`: "${t.prefix}"`:"ends_with"===t.format?`: "${t.suffix}"`:"includes"===t.format?`: "${t.includes}"`:"regex"===t.format?`: ${t.pattern}`:`${n[t.format]??e.format}`}case"not_multiple_of":return`: ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""}: ${Dp(e.keys,"")}`;case"invalid_key":return`${e.origin}`;case"invalid_union":default:return"";case"invalid_element":return`${e.origin}`}}};function yO(){return{localeError:vO()}}const bO=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}const n={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return{string:"",boolean:"",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:""}[t]??t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${dm(e.values[0])}`:` :  - ${Dp(e.values,"|")}-`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` :  ${e.origin??""} ${r.verb} ${n}${e.maximum.toString()} ${r.unit}`:` :  ${e.origin??""}  ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` :  ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:` :  ${e.origin}  ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` :   "${t.prefix}"-`:"ends_with"===t.format?` :   "${t.suffix}"-`:"includes"===t.format?` :   "${t.includes}"-`:"regex"===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case"not_multiple_of":return` :   ${e.divisor}- `;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`  ${e.origin}-`;case"invalid_union":default:return" ";case"invalid_element":return`  ${e.origin}-`}}};function OO(){return{localeError:bO()}}const wO=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`  ${e.expected}  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  ${dm(e.values[0])}`:`  ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`  ${e.origin??""} ${n} ${e.maximum.toString()} ${r.unit??""}`:`  ${e.origin??""} ${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`  ${e.origin} ${n} ${e.minimum.toString()} ${r.unit}`:`  ${e.origin} ${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`  "${t.prefix}"`:"ends_with"===t.format?`  "${t.suffix}"`:"includes"===t.format?`  "${t.includes}"`:"regex"===t.format?`  ${t.pattern}`:` ${n[t.format]??e.format}`}case"not_multiple_of":return`  ${e.divisor}`;case"unrecognized_keys":return` ${Dp(e.keys,", ")}`;case"invalid_key":return` ${e.origin}`;case"invalid_union":default:return"";case"invalid_element":return` ${e.origin}`}}};function SO(){return{localeError:wO()}}function xO(){return SO()}const kO=()=>{const e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}};function t(t){return e[t]??null}const n={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :   ${e.expected},   ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${dm(e.values[0])}  `:` : ${Dp(e.values," ")}   `;case"too_big":{const n=e.inclusive?"":"",r=""===n?" ":" ",o=t(e.origin),i=o?.unit??"";return o?`${e.origin??""}  : ${e.maximum.toString()}${i} ${n}${r}`:`${e.origin??""}  : ${e.maximum.toString()} ${n}${r}`}case"too_small":{const n=e.inclusive?"":"",r=""===n?" ":" ",o=t(e.origin),i=o?.unit??"";return o?`${e.origin??""}  : ${e.minimum.toString()}${i} ${n}${r}`:`${e.origin??""}  : ${e.minimum.toString()} ${n}${r}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` : "${t.prefix}"()  `:"ends_with"===t.format?` : "${t.suffix}"()  `:"includes"===t.format?` : "${t.includes}"()  `:"regex"===t.format?` :  ${t.pattern}   `:` ${n[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}  `;case"unrecognized_keys":return`   : ${Dp(e.keys,", ")}`;case"invalid_key":return` : ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return` : ${e.origin}`}}};function _O(){return{localeError:kO()}}const PO=(e,t=void 0)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skaiius";case"bigint":return"sveikasis skaiius";case"string":return"eilut";case"boolean":return"login reikm";case"undefined":case"void":return"neapibrta reikm";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return void 0===t?"neinomas objektas":null===t?"nulin reikm":Array.isArray(t)?"masyvas":Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:"objektas";case"null":return"nulin reikm"}return e},EO=e=>e.charAt(0).toUpperCase()+e.slice(1);function $O(e){const t=Math.abs(e),n=t%10,r=t%100;return r>=11&&r<=19||0===n?"many":1===n?"one":"few"}const TO=()=>{const e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(t,n,r,o){const i=e[t]??null;return null===i?i:{unit:i.unit[n],verb:i.verb[o][r?"inclusive":"notInclusive"]}}const n={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"};return e=>{switch(e.code){case"invalid_type":return`Gautas tipas ${(e=>PO(typeof e,e))(e.input)}, o tiktasi - ${PO(e.expected)}`;case"invalid_value":return 1===e.values.length?`Privalo bti ${dm(e.values[0])}`:`Privalo bti vienas i ${Dp(e.values,"|")} pasirinkim`;case"too_big":{const n=PO(e.origin),r=t(e.origin,$O(Number(e.maximum)),e.inclusive??!1,"smaller");if(r?.verb)return`${EO(n??e.origin??"reikm")} ${r.verb} ${e.maximum.toString()} ${r.unit??"element"}`;const o=e.inclusive?"ne didesnis kaip":"maesnis kaip";return`${EO(n??e.origin??"reikm")} turi bti ${o} ${e.maximum.toString()} ${r?.unit}`}case"too_small":{const n=PO(e.origin),r=t(e.origin,$O(Number(e.minimum)),e.inclusive??!1,"bigger");if(r?.verb)return`${EO(n??e.origin??"reikm")} ${r.verb} ${e.minimum.toString()} ${r.unit??"element"}`;const o=e.inclusive?"ne maesnis kaip":"didesnis kaip";return`${EO(n??e.origin??"reikm")} turi bti ${o} ${e.minimum.toString()} ${r?.unit}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Eilut privalo prasidti "${t.prefix}"`:"ends_with"===t.format?`Eilut privalo pasibaigti "${t.suffix}"`:"includes"===t.format?`Eilut privalo traukti "${t.includes}"`:"regex"===t.format?`Eilut privalo atitikti ${t.pattern}`:`Neteisingas ${n[t.format]??e.format}`}case"not_multiple_of":return`Skaiius privalo bti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${Dp(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{const t=PO(e.origin);return`${EO(t??e.origin??"reikm")} turi klaiding vest`}}}};function CO(){return{localeError:TO()}}const jO=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}const n={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :   ${e.expected},  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${dm(e.values[0])}`:` :    ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` :   ${e.origin??""}   ${n}${e.maximum.toString()} ${r.unit??""}`:` :   ${e.origin??""}   ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` :   ${e.origin}   ${n}${e.minimum.toString()} ${r.unit}`:` :   ${e.origin}   ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` :     "${t.prefix}"`:"ends_with"===t.format?` :     "${t.suffix}"`:"includes"===t.format?` :    "${t.includes}"`:"regex"===t.format?` :      ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case"not_multiple_of":return` :      ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?" ":" "}: ${Dp(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin}`}}};function NO(){return{localeError:jO()}}const AO=()=>{const e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(t){return e[t]??null}const n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak sah: dijangka ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak sah: dijangka ${dm(e.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Terlalu besar: dijangka ${e.origin??"nilai"} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??"elemen"}`:`Terlalu besar: dijangka ${e.origin??"nilai"} adalah ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Terlalu kecil: dijangka ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Terlalu kecil: dijangka ${e.origin} adalah ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`String tidak sah: mesti bermula dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak sah: mesti berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak sah: mesti mengandungi "${t.includes}"`:"regex"===t.format?`String tidak sah: mesti sepadan dengan corak ${t.pattern}`:`${n[t.format]??e.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${Dp(e.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${e.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${e.origin}`}}};function IO(){return{localeError:AO()}}const MO=()=>{const e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function t(t){return e[t]??null}const n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return e=>{switch(e.code){case"invalid_type":return`Ongeldige invoer: verwacht ${e.expected}, ontving ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ongeldige invoer: verwacht ${dm(e.values[0])}`:`Ongeldige optie: verwacht n van ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Te lang: verwacht dat ${e.origin??"waarde"} ${n}${e.maximum.toString()} ${r.unit??"elementen"} bevat`:`Te lang: verwacht dat ${e.origin??"waarde"} ${n}${e.maximum.toString()} is`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Te kort: verwacht dat ${e.origin} ${n}${e.minimum.toString()} ${r.unit} bevat`:`Te kort: verwacht dat ${e.origin} ${n}${e.minimum.toString()} is`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ongeldige tekst: moet met "${t.prefix}" beginnen`:"ends_with"===t.format?`Ongeldige tekst: moet op "${t.suffix}" eindigen`:"includes"===t.format?`Ongeldige tekst: moet "${t.includes}" bevatten`:"regex"===t.format?`Ongeldige tekst: moet overeenkomen met patroon ${t.pattern}`:`Ongeldig: ${n[t.format]??e.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${e.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${e.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${e.origin}`}}};function DO(){return{localeError:MO()}}const RO=()=>{const e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}};function t(t){return e[t]??null}const n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Ugyldig input: forventet ${e.expected}, fikk ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ugyldig verdi: forventet ${dm(e.values[0])}`:`Ugyldig valg: forventet en av ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`For stor(t): forventet ${e.origin??"value"} til  ha ${n}${e.maximum.toString()} ${r.unit??"elementer"}`:`For stor(t): forventet ${e.origin??"value"} til  ha ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`For lite(n): forventet ${e.origin} til  ha ${n}${e.minimum.toString()} ${r.unit}`:`For lite(n): forventet ${e.origin} til  ha ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ugyldig streng: m starte med "${t.prefix}"`:"ends_with"===t.format?`Ugyldig streng: m ende med "${t.suffix}"`:"includes"===t.format?`Ugyldig streng: m inneholde "${t.includes}"`:"regex"===t.format?`Ugyldig streng: m matche mnsteret ${t.pattern}`:`Ugyldig ${n[t.format]??e.format}`}case"not_multiple_of":return`Ugyldig tall: m vre et multiplum av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Ugyldig nkkel i ${e.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${e.origin}`}}};function QO(){return{localeError:RO()}}const zO=()=>{const e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}};function t(t){return e[t]??null}const n={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"};return e=>{switch(e.code){case"invalid_type":return`Fsit giren: umulan ${e.expected}, alnan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Fsit giren: umulan ${dm(e.values[0])}`:`Fsit tercih: mteberler ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Fazla byk: ${e.origin??"value"}, ${n}${e.maximum.toString()} ${r.unit??"elements"} sahip olmalyd.`:`Fazla byk: ${e.origin??"value"}, ${n}${e.maximum.toString()} olmalyd.`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Fazla kk: ${e.origin}, ${n}${e.minimum.toString()} ${r.unit} sahip olmalyd.`:`Fazla kk: ${e.origin}, ${n}${e.minimum.toString()} olmalyd.`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Fsit metin: "${t.prefix}" ile balamal.`:"ends_with"===t.format?`Fsit metin: "${t.suffix}" ile bitmeli.`:"includes"===t.format?`Fsit metin: "${t.includes}" ihtiv etmeli.`:"regex"===t.format?`Fsit metin: ${t.pattern} nakna uymal.`:`Fsit ${n[t.format]??e.format}`}case"not_multiple_of":return`Fsit say: ${e.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`${e.origin} iin tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${e.origin} iin tannmayan kymet var.`;default:return"Kymet tannamad."}}};function LO(){return{localeError:zO()}}const ZO=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected} ,  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case"invalid_value":return 1===e.values.length?` :  ${dm(e.values[0])} `:` :    ${Dp(e.values,"|")}  `;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` : ${e.origin??""}  ${n}${e.maximum.toString()} ${r.unit??""} `:` : ${e.origin??""}  ${n}${e.maximum.toString()} `}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` : ${e.origin}  ${n}${e.minimum.toString()} ${r.unit} `:` : ${e.origin}  ${n}${e.minimum.toString()} `}case"invalid_format":{const t=e;return"starts_with"===t.format?` :   "${t.prefix}"   `:"ends_with"===t.format?` :   "${t.suffix}"    `:"includes"===t.format?` :  "${t.includes}" `:"regex"===t.format?` :   ${t.pattern}   `:`${n[t.format]??e.format}  `}case"not_multiple_of":return` :   ${e.divisor}  `;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`   ${e.origin} `;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin} `}}};function FO(){return{localeError:ZO()}}const UO=()=>{const e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}};function t(t){return e[t]??null}const n={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"};return e=>{switch(e.code){case"invalid_type":return`Nieprawidowe dane wejciowe: oczekiwano ${e.expected}, otrzymano ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Nieprawidowe dane wejciowe: oczekiwano ${dm(e.values[0])}`:`Nieprawidowa opcja: oczekiwano jednej z wartoci ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Za dua warto: oczekiwano, e ${e.origin??"warto"} bdzie mie ${n}${e.maximum.toString()} ${r.unit??"elementw"}`:`Zbyt du(y/a/e): oczekiwano, e ${e.origin??"warto"} bdzie wynosi ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Za maa warto: oczekiwano, e ${e.origin??"warto"} bdzie mie ${n}${e.minimum.toString()} ${r.unit??"elementw"}`:`Zbyt ma(y/a/e): oczekiwano, e ${e.origin??"warto"} bdzie wynosi ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Nieprawidowy cig znakw: musi zaczyna si od "${t.prefix}"`:"ends_with"===t.format?`Nieprawidowy cig znakw: musi koczy si na "${t.suffix}"`:"includes"===t.format?`Nieprawidowy cig znakw: musi zawiera "${t.includes}"`:"regex"===t.format?`Nieprawidowy cig znakw: musi odpowiada wzorcowi ${t.pattern}`:`Nieprawidow(y/a/e) ${n[t.format]??e.format}`}case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${e.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${e.origin}`;case"invalid_union":default:return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${e.origin}`}}};function VO(){return{localeError:UO()}}const GO=()=>{const e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(t){return e[t]??null}const n={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipo invlido: esperado ${e.expected}, recebido ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmero";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entrada invlida: esperado ${dm(e.values[0])}`:`Opo invlida: esperada uma das ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Muito grande: esperado que ${e.origin??"valor"} tivesse ${n}${e.maximum.toString()} ${r.unit??"elementos"}`:`Muito grande: esperado que ${e.origin??"valor"} fosse ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Muito pequeno: esperado que ${e.origin} tivesse ${n}${e.minimum.toString()} ${r.unit}`:`Muito pequeno: esperado que ${e.origin} fosse ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Texto invlido: deve comear com "${t.prefix}"`:"ends_with"===t.format?`Texto invlido: deve terminar com "${t.suffix}"`:"includes"===t.format?`Texto invlido: deve incluir "${t.includes}"`:"regex"===t.format?`Texto invlido: deve corresponder ao padro ${t.pattern}`:`${n[t.format]??e.format} invlido`}case"not_multiple_of":return`Nmero invlido: deve ser mltiplo de ${e.divisor}`;case"unrecognized_keys":return`Chave${e.keys.length>1?"s":""} desconhecida${e.keys.length>1?"s":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Chave invlida em ${e.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor invlido em ${e.origin}`;default:return"Campo invlido"}}};function BO(){return{localeError:GO()}}function XO(e,t,n,r){const o=Math.abs(e),i=o%10,a=o%100;return a>=11&&a<=19?r:1===i?t:i>=2&&i<=4?n:r}const YO=()=>{const e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${dm(e.values[0])}`:` :    ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);if(r){const t=XO(Number(e.maximum),r.unit.one,r.unit.few,r.unit.many);return`  : ,  ${e.origin??""}   ${n}${e.maximum.toString()} ${t}`}return`  : ,  ${e.origin??""}  ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);if(r){const t=XO(Number(e.minimum),r.unit.one,r.unit.few,r.unit.many);return`  : ,  ${e.origin}   ${n}${e.minimum.toString()} ${t}`}return`  : ,  ${e.origin}  ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` :    "${t.prefix}"`:"ends_with"===t.format?` :    "${t.suffix}"`:"includes"===t.format?` :   "${t.includes}"`:"regex"===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""} ${e.keys.length>1?"":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`   ${e.origin}`}}};function WO(){return{localeError:YO()}}const qO=()=>{const e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(t){return e[t]??null}const n={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"};return e=>{switch(e.code){case"invalid_type":return`Neveljaven vnos: priakovano ${e.expected}, prejeto ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tevilo";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neveljaven vnos: priakovano ${dm(e.values[0])}`:`Neveljavna monost: priakovano eno izmed ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Preveliko: priakovano, da bo ${e.origin??"vrednost"} imelo ${n}${e.maximum.toString()} ${r.unit??"elementov"}`:`Preveliko: priakovano, da bo ${e.origin??"vrednost"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Premajhno: priakovano, da bo ${e.origin} imelo ${n}${e.minimum.toString()} ${r.unit}`:`Premajhno: priakovano, da bo ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Neveljaven niz: mora se zaeti z "${t.prefix}"`:"ends_with"===t.format?`Neveljaven niz: mora se konati z "${t.suffix}"`:"includes"===t.format?`Neveljaven niz: mora vsebovati "${t.includes}"`:"regex"===t.format?`Neveljaven niz: mora ustrezati vzorcu ${t.pattern}`:`Neveljaven ${n[t.format]??e.format}`}case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${e.divisor}`;case"unrecognized_keys":return`Neprepoznan${e.keys.length>1?"i kljui":" klju"}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${e.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${e.origin}`}}};function HO(){return{localeError:qO()}}const KO=()=>{const e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}};function t(t){return e[t]??null}const n={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return e=>{switch(e.code){case"invalid_type":return`Ogiltig inmatning: frvntat ${e.expected}, fick ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ogiltig inmatning: frvntat ${dm(e.values[0])}`:`Ogiltigt val: frvntade en av ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Fr stor(t): frvntade ${e.origin??"vrdet"} att ha ${n}${e.maximum.toString()} ${r.unit??"element"}`:`Fr stor(t): frvntat ${e.origin??"vrdet"} att ha ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Fr lite(t): frvntade ${e.origin??"vrdet"} att ha ${n}${e.minimum.toString()} ${r.unit}`:`Fr lite(t): frvntade ${e.origin??"vrdet"} att ha ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ogiltig strng: mste brja med "${t.prefix}"`:"ends_with"===t.format?`Ogiltig strng: mste sluta med "${t.suffix}"`:"includes"===t.format?`Ogiltig strng: mste innehlla "${t.includes}"`:"regex"===t.format?`Ogiltig strng: mste matcha mnstret "${t.pattern}"`:`Ogiltig(t) ${n[t.format]??e.format}`}case"not_multiple_of":return`Ogiltigt tal: mste vara en multipel av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${Dp(e.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${e.origin??"vrdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt vrde i ${e.origin??"vrdet"}`}}};function JO(){return{localeError:KO()}}const ew=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}const n={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?" ":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${dm(e.values[0])}`:` :  ${Dp(e.values,"|")}  `;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` :  ${e.origin??""} ${n}${e.maximum.toString()} ${r.unit??""}   `:` :  ${e.origin??""} ${n}${e.maximum.toString()}   `}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` :  ${e.origin} ${n}${e.minimum.toString()} ${r.unit}   `:` :  ${e.origin} ${n}${e.minimum.toString()}   `}case"invalid_format":{const t=e;return"starts_with"===t.format?` : "${t.prefix}"   `:"ends_with"===t.format?` : "${t.suffix}"   `:"includes"===t.format?` : "${t.includes}"   `:"regex"===t.format?` : ${t.pattern}   `:` ${n[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}    `;case"unrecognized_keys":return`  ${e.keys.length>1?"":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`${e.origin}   `;case"invalid_union":default:return" ";case"invalid_element":return`${e.origin}   `}}};function tw(){return{localeError:ew()}}const nw=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`:  ${e.expected}  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`:  ${dm(e.values[0])}`:`:  ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"":"",r=t(e.origin);return r?`: ${e.origin??""} ${n} ${e.maximum.toString()} ${r.unit??""}`:`: ${e.origin??""} ${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?"":"",r=t(e.origin);return r?`: ${e.origin} ${n} ${e.minimum.toString()} ${r.unit}`:`: ${e.origin} ${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`:  "${t.prefix}"`:"ends_with"===t.format?`:  "${t.suffix}"`:"includes"===t.format?`:  "${t.includes}" `:"regex"===t.format?`:  ${t.pattern}`:`: ${n[t.format]??e.format}`}case"not_multiple_of":return`:  ${e.divisor} `;case"unrecognized_keys":return`: ${Dp(e.keys,", ")}`;case"invalid_key":return` ${e.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${e.origin}`;default:return""}}};function rw(){return{localeError:nw()}}const ow=()=>{const e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}};function t(t){return e[t]??null}const n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"};return e=>{switch(e.code){case"invalid_type":return`Geersiz deer: beklenen ${e.expected}, alnan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Geersiz deer: beklenen ${dm(e.values[0])}`:`Geersiz seenek: aadakilerden biri olmal: ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`ok byk: beklenen ${e.origin??"deer"} ${n}${e.maximum.toString()} ${r.unit??"e"}`:`ok byk: beklenen ${e.origin??"deer"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`ok kk: beklenen ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:`ok kk: beklenen ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Geersiz metin: "${t.prefix}" ile balamal`:"ends_with"===t.format?`Geersiz metin: "${t.suffix}" ile bitmeli`:"includes"===t.format?`Geersiz metin: "${t.includes}" iermeli`:"regex"===t.format?`Geersiz metin: ${t.pattern} desenine uymal`:`Geersiz ${n[t.format]??e.format}`}case"not_multiple_of":return`Geersiz say: ${e.divisor} ile tam blnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${e.keys.length>1?"lar":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`${e.origin} iinde geersiz anahtar`;case"invalid_union":default:return"Geersiz deer";case"invalid_element":return`${e.origin} iinde geersiz deer`}}};function iw(){return{localeError:ow()}}const aw=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "};return e=>{switch(e.code){case"invalid_type":return`  :  ${e.expected},  ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  :  ${dm(e.values[0])}`:` :    ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` : ,  ${e.origin??""} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??""}`:` : ,  ${e.origin??""}  ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` : ,  ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:` : ,  ${e.origin}  ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` :    "${t.prefix}"`:"ends_with"===t.format?` :    "${t.suffix}"`:"includes"===t.format?` :   "${t.includes}"`:"regex"===t.format?` :    ${t.pattern}`:` ${n[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${Dp(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`   ${e.origin}`}}};function sw(){return{localeError:aw()}}function lw(){return sw()}const uw=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "};return e=>{switch(e.code){case"invalid_type":return`  : ${e.expected}   ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case"invalid_value":return 1===e.values.length?`  : ${dm(e.values[0])}  `:` : ${Dp(e.values,"|")}     `;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` : ${e.origin??""}  ${n}${e.maximum.toString()} ${r.unit??""}   `:` : ${e.origin??""}  ${n}${e.maximum.toString()}   `}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` : ${e.origin}  ${n}${e.minimum.toString()} ${r.unit}   `:` : ${e.origin}  ${n}${e.minimum.toString()}   `}case"invalid_format":{const t=e;return"starts_with"===t.format?` : "${t.prefix}"    `:"ends_with"===t.format?` : "${t.suffix}"    `:"includes"===t.format?` : "${t.includes}"   `:"regex"===t.format?` :  ${t.pattern}    `:` ${n[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}    `;case"unrecognized_keys":return`   ${e.keys.length>1?"":""}: ${Dp(e.keys," ")}`;case"invalid_key":return`${e.origin}   `;case"invalid_union":default:return"  ";case"invalid_element":return`${e.origin}   `}}};function cw(){return{localeError:uw()}}const dw=()=>{const e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}};function t(t){return e[t]??null}const n={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"};return e=>{switch(e.code){case"invalid_type":return`u vo khng hp l: mong i ${e.expected}, nhn c ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"s";case"object":if(Array.isArray(e))return"mng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`u vo khng hp l: mong i ${dm(e.values[0])}`:`Ty chn khng hp l: mong i mt trong cc gi tr ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Qu ln: mong i ${e.origin??"gi tr"} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??"phn t"}`:`Qu ln: mong i ${e.origin??"gi tr"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Qu nh: mong i ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Qu nh: mong i ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chui khng hp l: phi bt u bng "${t.prefix}"`:"ends_with"===t.format?`Chui khng hp l: phi kt thc bng "${t.suffix}"`:"includes"===t.format?`Chui khng hp l: phi bao gm "${t.includes}"`:"regex"===t.format?`Chui khng hp l: phi khp vi mu ${t.pattern}`:`${n[t.format]??e.format} khng hp l`}case"not_multiple_of":return`S khng hp l: phi l bi s ca ${e.divisor}`;case"unrecognized_keys":return`Kha khng c nhn dng: ${Dp(e.keys,", ")}`;case"invalid_key":return`Kha khng hp l trong ${e.origin}`;case"invalid_union":default:return"u vo khng hp l";case"invalid_element":return`Gi tr khng hp l trong ${e.origin}`}}};function fw(){return{localeError:dw()}}const hw=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` ${e.expected} ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"(NaN)":"";case"object":if(Array.isArray(e))return"";if(null===e)return"(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` ${dm(e.values[0])}`:` ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` ${e.origin??""} ${n}${e.maximum.toString()} ${r.unit??""}`:` ${e.origin??""} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:` ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` "${t.prefix}" `:"ends_with"===t.format?` "${t.suffix}" `:"includes"===t.format?` "${t.includes}"`:"regex"===t.format?` ${t.pattern}`:`${n[t.format]??e.format}`}case"not_multiple_of":return` ${e.divisor} `;case"unrecognized_keys":return`(key): ${Dp(e.keys,", ")}`;case"invalid_key":return`${e.origin} (key)`;case"invalid_union":default:return"";case"invalid_element":return`${e.origin} (value)`}}};function pw(){return{localeError:hw()}}const mw=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}const n={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` ${e.expected} ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` ${dm(e.values[0])}`:` ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` ${e.origin??""}  ${n}${e.maximum.toString()} ${r.unit??""}`:` ${e.origin??""}  ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?` ${e.origin}  ${n}${e.minimum.toString()} ${r.unit}`:` ${e.origin}  ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?` "${t.prefix}" `:"ends_with"===t.format?` "${t.suffix}" `:"includes"===t.format?` "${t.includes}"`:"regex"===t.format?` ${t.pattern}`:` ${n[t.format]??e.format}`}case"not_multiple_of":return` ${e.divisor} `;case"unrecognized_keys":return`${e.keys.length>1?"":""}${Dp(e.keys,"")}`;case"invalid_key":return`${e.origin} `;case"invalid_union":default:return"";case"invalid_element":return`${e.origin} `}}};function gw(){return{localeError:mw()}}const vw=()=>{const e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}};function t(t){return e[t]??null}const n={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"};return e=>{switch(e.code){case"invalid_type":return`bwl ae: a n lti fi ${e.expected}, m a r ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmb";case"object":if(Array.isArray(e))return"akop";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`bwl ae: a n lti fi ${dm(e.values[0])}`:`yn ae: yan kan lra ${Dp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`T p j: a n lti j p ${e.origin??"iye"} ${r.verb} ${n}${e.maximum} ${r.unit}`:`T p j: a n lti j ${n}${e.maximum}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Kr ju: a n lti j p ${e.origin} ${r.verb} ${n}${e.minimum} ${r.unit}`:`Kr ju: a n lti j ${n}${e.minimum}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`r ae: gbd br pl "${t.prefix}"`:"ends_with"===t.format?`r ae: gbd par pl "${t.suffix}"`:"includes"===t.format?`r ae: gbd n "${t.includes}"`:"regex"===t.format?`r ae: gbd b pr mu ${t.pattern}`:`Ae: ${n[t.format]??e.format}`}case"not_multiple_of":return`Nmb ae: gbd j y ppn ti ${e.divisor}`;case"unrecognized_keys":return`Btn m: ${Dp(e.keys,", ")}`;case"invalid_key":return`Btn ae nn ${e.origin}`;case"invalid_union":default:return"bwl ae";case"invalid_element":return`Iye ae nn ${e.origin}`}}};function yw(){return{localeError:vw()}}const bw=Symbol("ZodOutput"),Ow=Symbol("ZodInput");class ww{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};delete n.id;const r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Sw(){return new ww}const xw=Sw();function kw(e,t){return new e({type:"string",...um(t)})}function _w(e,t){return new e({type:"string",coerce:!0,...um(t)})}function Pw(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...um(t)})}function Ew(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...um(t)})}function $w(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...um(t)})}function Tw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...um(t)})}function Cw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...um(t)})}function jw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...um(t)})}function Nw(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...um(t)})}function Aw(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...um(t)})}function Iw(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...um(t)})}function Mw(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...um(t)})}function Dw(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...um(t)})}function Rw(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...um(t)})}function Qw(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...um(t)})}function zw(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...um(t)})}function Lw(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...um(t)})}function Zw(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...um(t)})}function Fw(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...um(t)})}function Uw(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...um(t)})}function Vw(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...um(t)})}function Gw(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...um(t)})}function Bw(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...um(t)})}function Xw(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...um(t)})}const Yw={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Ww(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...um(t)})}function qw(e,t){return new e({type:"string",format:"date",check:"string_format",...um(t)})}function Hw(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...um(t)})}function Kw(e,t){return new e({type:"string",format:"duration",check:"string_format",...um(t)})}function Jw(e,t){return new e({type:"number",checks:[],...um(t)})}function eS(e,t){return new e({type:"number",coerce:!0,checks:[],...um(t)})}function tS(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...um(t)})}function nS(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...um(t)})}function rS(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...um(t)})}function oS(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...um(t)})}function iS(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...um(t)})}function aS(e,t){return new e({type:"boolean",...um(t)})}function sS(e,t){return new e({type:"boolean",coerce:!0,...um(t)})}function lS(e,t){return new e({type:"bigint",...um(t)})}function uS(e,t){return new e({type:"bigint",coerce:!0,...um(t)})}function cS(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...um(t)})}function dS(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...um(t)})}function fS(e,t){return new e({type:"symbol",...um(t)})}function hS(e,t){return new e({type:"undefined",...um(t)})}function pS(e,t){return new e({type:"null",...um(t)})}function mS(e){return new e({type:"any"})}function gS(e){return new e({type:"unknown"})}function vS(e,t){return new e({type:"never",...um(t)})}function yS(e,t){return new e({type:"void",...um(t)})}function bS(e,t){return new e({type:"date",...um(t)})}function OS(e,t){return new e({type:"date",coerce:!0,...um(t)})}function wS(e,t){return new e({type:"nan",...um(t)})}function SS(e,t){return new _v({check:"less_than",...um(t),value:e,inclusive:!1})}function xS(e,t){return new _v({check:"less_than",...um(t),value:e,inclusive:!0})}function kS(e,t){return new Pv({check:"greater_than",...um(t),value:e,inclusive:!1})}function _S(e,t){return new Pv({check:"greater_than",...um(t),value:e,inclusive:!0})}function PS(e){return kS(0,e)}function ES(e){return SS(0,e)}function $S(e){return xS(0,e)}function TS(e){return _S(0,e)}function CS(e,t){return new Ev({check:"multiple_of",...um(t),value:e})}function jS(e,t){return new Cv({check:"max_size",...um(t),maximum:e})}function NS(e,t){return new jv({check:"min_size",...um(t),minimum:e})}function AS(e,t){return new Nv({check:"size_equals",...um(t),size:e})}function IS(e,t){return new Av({check:"max_length",...um(t),maximum:e})}function MS(e,t){return new Iv({check:"min_length",...um(t),minimum:e})}function DS(e,t){return new Mv({check:"length_equals",...um(t),length:e})}function RS(e,t){return new Rv({check:"string_format",format:"regex",...um(t),pattern:e})}function QS(e){return new Qv({check:"string_format",format:"lowercase",...um(e)})}function zS(e){return new zv({check:"string_format",format:"uppercase",...um(e)})}function LS(e,t){return new Lv({check:"string_format",format:"includes",...um(t),includes:e})}function ZS(e,t){return new Zv({check:"string_format",format:"starts_with",...um(t),prefix:e})}function FS(e,t){return new Fv({check:"string_format",format:"ends_with",...um(t),suffix:e})}function US(e,t,n){return new Vv({check:"property",property:e,schema:t,...um(n)})}function VS(e,t){return new Gv({check:"mime_type",mime:e,...um(t)})}function GS(e){return new Bv({check:"overwrite",tx:e})}function BS(e){return GS(t=>t.normalize(e))}function XS(){return GS(e=>e.trim())}function YS(){return GS(e=>e.toLowerCase())}function WS(){return GS(e=>e.toUpperCase())}function qS(e,t,n){return new e({type:"array",element:t,...um(n)})}function HS(e,t,n){return new e({type:"union",options:t,...um(n)})}function KS(e,t,n,r){return new e({type:"union",options:n,discriminator:t,...um(r)})}function JS(e,t,n){return new e({type:"intersection",left:t,right:n})}function ex(e,t,n,r){const o=n instanceof Wv;return new e({type:"tuple",items:t,rest:o?n:null,...um(o?r:n)})}function tx(e,t,n,r){return new e({type:"record",keyType:t,valueType:n,...um(r)})}function nx(e,t,n,r){return new e({type:"map",keyType:t,valueType:n,...um(r)})}function rx(e,t,n){return new e({type:"set",valueType:t,...um(n)})}function ox(e,t,n){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...um(n)})}function ix(e,t,n){return new e({type:"enum",entries:t,...um(n)})}function ax(e,t,n){return new e({type:"literal",values:Array.isArray(t)?t:[t],...um(n)})}function sx(e,t){return new e({type:"file",...um(t)})}function lx(e,t){return new e({type:"transform",transform:t})}function ux(e,t){return new e({type:"optional",innerType:t})}function cx(e,t){return new e({type:"nullable",innerType:t})}function dx(e,t,n){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof n?n():nm(n)}})}function fx(e,t,n){return new e({type:"nonoptional",innerType:t,...um(n)})}function hx(e,t){return new e({type:"success",innerType:t})}function px(e,t,n){return new e({type:"catch",innerType:t,catchValue:"function"==typeof n?n:()=>n})}function mx(e,t,n){return new e({type:"pipe",in:t,out:n})}function gx(e,t){return new e({type:"readonly",innerType:t})}function vx(e,t,n){return new e({type:"template_literal",parts:t,...um(n)})}function yx(e,t){return new e({type:"lazy",getter:t})}function bx(e,t){return new e({type:"promise",innerType:t})}function Ox(e,t,n){const r=um(n);r.abort??(r.abort=!0);return new e({type:"custom",check:"custom",fn:t,...r})}function wx(e,t,n){return new e({type:"custom",check:"custom",fn:t,...um(n)})}function Sx(e){const t=xx(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push($m(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push($m(r))}},e(n.value,n)));return t}function xx(e,t){const n=new xv({check:"custom",...um(t)});return n._zod.check=e,n}function kx(e,t){const n=um(t);let r=n.truthy??["true","1","yes","on","y","enabled"],o=n.falsy??["false","0","no","off","n","disabled"];"sensitive"!==n.case&&(r=r.map(e=>"string"==typeof e?e.toLowerCase():e),o=o.map(e=>"string"==typeof e?e.toLowerCase():e));const i=new Set(r),a=new Set(o),s=e.Codec??wb,l=e.Boolean??Ey,u=new s({type:"pipe",in:new(e.String??qv)({type:"string",error:n.error}),out:new l({type:"boolean",error:n.error}),transform:(e,t)=>{let r=e;return"sensitive"!==n.case&&(r=r.toLowerCase()),!!i.has(r)||!a.has(r)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...a],input:t.value,inst:u,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?r[0]||"true":o[0]||"false",error:n.error});return u}function _x(e,t,n,r={}){const o=um(r),i={...um(r),check:"string_format",type:"string",format:t,fn:"function"==typeof n?n:e=>n.test(e),...o};n instanceof RegExp&&(i.pattern=n);return new e(i)}class Px{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??xw,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var n;const r=e._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(e);if(i){i.count++;return t.schemaPath.includes(e)&&(i.cycle=t.path),i.schema}const a={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,a);const s=e._zod.toJSONSchema?.();if(s)a.schema=s;else{const n={...t,schemaPath:[...t.schemaPath,e],path:t.path},i=e._zod.parent;if(i)a.ref=i,this.process(i,n),this.seen.get(i).isParent=!0;else{const t=a.schema;switch(r.type){case"string":{const n=t;n.type="string";const{minimum:r,maximum:i,format:s,patterns:l,contentEncoding:u}=e._zod.bag;if("number"==typeof r&&(n.minLength=r),"number"==typeof i&&(n.maxLength=i),s&&(n.format=o[s]??s,""===n.format&&delete n.format),u&&(n.contentEncoding=u),l&&l.size>0){const e=[...l];1===e.length?n.pattern=e[0].source:e.length>1&&(a.schema.allOf=[...e.map(e=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{const n=t,{minimum:r,maximum:o,format:i,multipleOf:a,exclusiveMaximum:s,exclusiveMinimum:l}=e._zod.bag;"string"==typeof i&&i.includes("int")?n.type="integer":n.type="number","number"==typeof l&&("draft-4"===this.target||"openapi-3.0"===this.target?(n.minimum=l,n.exclusiveMinimum=!0):n.exclusiveMinimum=l),"number"==typeof r&&(n.minimum=r,"number"==typeof l&&"draft-4"!==this.target&&(l>=r?delete n.minimum:delete n.exclusiveMinimum)),"number"==typeof s&&("draft-4"===this.target||"openapi-3.0"===this.target?(n.maximum=s,n.exclusiveMaximum=!0):n.exclusiveMaximum=s),"number"==typeof o&&(n.maximum=o,"number"==typeof s&&"draft-4"!==this.target&&(s<=o?delete n.maximum:delete n.exclusiveMaximum)),"number"==typeof a&&(n.multipleOf=a);break}case"boolean":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw new Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw new Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw new Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw new Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw new Error("Date cannot be represented in JSON Schema");break;case"array":{const o=t,{minimum:i,maximum:a}=e._zod.bag;"number"==typeof i&&(o.minItems=i),"number"==typeof a&&(o.maxItems=a),o.type="array",o.items=this.process(r.element,{...n,path:[...n.path,"items"]});break}case"object":{const e=t;e.type="object",e.properties={};const o=r.shape;for(const t in o)e.properties[t]=this.process(o[t],{...n,path:[...n.path,"properties",t]});const i=new Set(Object.keys(o)),a=new Set([...i].filter(e=>{const t=r.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));a.size>0&&(e.required=Array.from(a)),"never"===r.catchall?._zod.def.type?e.additionalProperties=!1:r.catchall?r.catchall&&(e.additionalProperties=this.process(r.catchall,{...n,path:[...n.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":{const e=t,o=r.options.map((e,t)=>this.process(e,{...n,path:[...n.path,"anyOf",t]}));e.anyOf=o;break}case"intersection":{const e=t,o=this.process(r.left,{...n,path:[...n.path,"allOf",0]}),i=this.process(r.right,{...n,path:[...n.path,"allOf",1]}),a=e=>"allOf"in e&&1===Object.keys(e).length,s=[...a(o)?o.allOf:[o],...a(i)?i.allOf:[i]];e.allOf=s;break}case"tuple":{const o=t;o.type="array";const i="draft-2020-12"===this.target?"prefixItems":"items",a="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",s=r.items.map((e,t)=>this.process(e,{...n,path:[...n.path,i,t]})),l=r.rest?this.process(r.rest,{...n,path:[...n.path,a,..."openapi-3.0"===this.target?[r.items.length]:[]]}):null;"draft-2020-12"===this.target?(o.prefixItems=s,l&&(o.items=l)):"openapi-3.0"===this.target?(o.items={anyOf:s},l&&o.items.anyOf.push(l),o.minItems=s.length,l||(o.maxItems=s.length)):(o.items=s,l&&(o.additionalItems=l));const{minimum:u,maximum:c}=e._zod.bag;"number"==typeof u&&(o.minItems=u),"number"==typeof c&&(o.maxItems=c);break}case"record":{const e=t;e.type="object","draft-7"!==this.target&&"draft-2020-12"!==this.target||(e.propertyNames=this.process(r.keyType,{...n,path:[...n.path,"propertyNames"]})),e.additionalProperties=this.process(r.valueType,{...n,path:[...n.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw new Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw new Error("Set cannot be represented in JSON Schema");break;case"enum":{const e=t,n=Mp(r.entries);n.every(e=>"number"==typeof e)&&(e.type="number"),n.every(e=>"string"==typeof e)&&(e.type="string"),e.enum=n;break}case"literal":{const e=t,n=[];for(const e of r.values)if(void 0===e){if("throw"===this.unrepresentable)throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e){if("throw"===this.unrepresentable)throw new Error("BigInt literals cannot be represented in JSON Schema");n.push(Number(e))}else n.push(e);if(0===n.length);else if(1===n.length){const t=n[0];e.type=null===t?"null":typeof t,"draft-4"===this.target||"openapi-3.0"===this.target?e.enum=[t]:e.const=t}else n.every(e=>"number"==typeof e)&&(e.type="number"),n.every(e=>"string"==typeof e)&&(e.type="string"),n.every(e=>"boolean"==typeof e)&&(e.type="string"),n.every(e=>null===e)&&(e.type="null"),e.enum=n;break}case"file":{const n=t,r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:o,maximum:i,mime:a}=e._zod.bag;void 0!==o&&(r.minLength=o),void 0!==i&&(r.maxLength=i),a?1===a.length?(r.contentMediaType=a[0],Object.assign(n,r)):n.anyOf=a.map(e=>({...r,contentMediaType:e})):Object.assign(n,r);break}case"transform":if("throw"===this.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{const e=this.process(r.innerType,n);"openapi-3.0"===this.target?(a.ref=r.innerType,t.nullable=!0):t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(r.innerType,n),a.ref=r.innerType;break;case"success":t.type="boolean";break;case"default":this.process(r.innerType,n),a.ref=r.innerType,t.default=JSON.parse(JSON.stringify(r.defaultValue));break;case"prefault":this.process(r.innerType,n),a.ref=r.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(r.defaultValue)));break;case"catch":{let e;this.process(r.innerType,n),a.ref=r.innerType;try{e=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw new Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{const n=t,r=e._zod.pattern;if(!r)throw new Error("Pattern not found in template literal");n.type="string",n.pattern=r.source;break}case"pipe":{const e="input"===this.io?"transform"===r.in._zod.def.type?r.out:r.in:r.out;this.process(e,n),a.ref=e;break}case"readonly":this.process(r.innerType,n),a.ref=r.innerType,t.readOnly=!0;break;case"lazy":{const t=e._zod.innerType;this.process(t,n),a.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw new Error("Function types cannot be represented in JSON Schema")}}}const l=this.metadataRegistry.get(e);l&&Object.assign(a.schema,l),"input"===this.io&&$x(e)&&(delete a.schema.examples,delete a.schema.default),"input"===this.io&&a.schema._prefault&&((n=a.schema).default??(n.default=a.schema._prefault)),delete a.schema._prefault;return this.seen.get(e).schema}emit(e,t){const n={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},r=this.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=e=>{const t="draft-2020-12"===this.target?"$defs":"definitions";if(n.external){const r=n.external.registry.get(e[0])?.id,o=n.external.uri??(e=>e);if(r)return{ref:o(r)};const i=e[1].defId??e[1].schema.id??"schema"+this.counter++;return e[1].defId=i,{defId:i,ref:`${o("__shared")}#/${t}/${i}`}}if(e[1]===r)return{ref:"#"};const o=`#/${t}/`,i=e[1].schema.id??"__schema"+this.counter++;return{defId:i,ref:o+i}},i=e=>{if(e[1].schema.$ref)return;const t=e[1],{ref:n,defId:r}=o(e);t.def={...t.schema},r&&(t.defId=r);const i=t.schema;for(const e in i)delete i[e];i.$ref=n};if("throw"===n.cycles)for(const e of this.seen.entries()){const t=e[1];if(t.cycle)throw new Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const t of this.seen.entries()){const r=t[1];if(e===t[0]){i(t);continue}if(n.external){const r=n.external.registry.get(t[0])?.id;if(e!==t[0]&&r){i(t);continue}}const o=this.metadataRegistry.get(t[0])?.id;o?i(t):(r.cycle||r.count>1&&"ref"===n.reused)&&i(t)}const a=(e,t)=>{const n=this.seen.get(e),r=n.def??n.schema,o={...r};if(null===n.ref)return;const i=n.ref;if(n.ref=null,i){a(i,t);const e=this.seen.get(i).schema;!e.$ref||"draft-7"!==t.target&&"draft-4"!==t.target&&"openapi-3.0"!==t.target?(Object.assign(r,e),Object.assign(r,o)):(r.allOf=r.allOf??[],r.allOf.push(e))}n.isParent||this.override({zodSchema:e,jsonSchema:r,path:n.path??[]})};for(const e of[...this.seen.entries()].reverse())a(e[0],{target:this.target});const s={};if("draft-2020-12"===this.target?s.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?s.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?s.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),n.external?.uri){const t=n.external.registry.get(e)?.id;if(!t)throw new Error("Schema is missing an `id` property");s.$id=n.external.uri(t)}Object.assign(s,r.def);const l=n.external?.defs??{};for(const e of this.seen.entries()){const t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}n.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?s.$defs=l:s.definitions=l);try{return JSON.parse(JSON.stringify(s))}catch(e){throw new Error("Error converting schema to JSON.")}}}function Ex(e,t){if(e instanceof ww){const n=new Px(t),r={};for(const t of e._idmap.entries()){const[e,r]=t;n.process(r)}const o={},i={registry:e,uri:t?.uri,defs:r};for(const r of e._idmap.entries()){const[e,a]=r;o[e]=n.emit(a,{...t,external:i})}if(Object.keys(r).length>0){const e="draft-2020-12"===n.target?"$defs":"definitions";o.__shared={[e]:r}}return{schemas:o}}const n=new Px(t);return n.process(e),n.emit(e,t)}function $x(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;switch(r.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return $x(r.element,n);case"object":for(const e in r.shape)if($x(r.shape[e],n))return!0;return!1;case"union":for(const e of r.options)if($x(e,n))return!0;return!1;case"intersection":return $x(r.left,n)||$x(r.right,n);case"tuple":for(const e of r.items)if($x(e,n))return!0;return!(!r.rest||!$x(r.rest,n));case"record":case"map":return $x(r.keyType,n)||$x(r.valueType,n);case"set":return $x(r.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return $x(r.innerType,n);case"lazy":return $x(r.getter(),n);case"transform":return!0;case"pipe":return $x(r.in,n)||$x(r.out,n)}throw new Error(`Unknown schema type: ${r.type}`)}const Tx=kp("ZodISODateTime",(e,t)=>{uy.init(e,t),nk.init(e,t)});function Cx(e){return Ww(Tx,e)}const jx=kp("ZodISODate",(e,t)=>{cy.init(e,t),nk.init(e,t)});function Nx(e){return qw(jx,e)}const Ax=kp("ZodISOTime",(e,t)=>{dy.init(e,t),nk.init(e,t)});function Ix(e){return Hw(Ax,e)}const Mx=kp("ZodISODuration",(e,t)=>{fy.init(e,t),nk.init(e,t)});function Dx(e){return Kw(Mx,e)}const Rx=(e,t)=>{Qm.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>Zm(e,t)},flatten:{value:t=>Lm(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,Rp,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,Rp,2)}},isEmpty:{get:()=>0===e.issues.length}})},Qx=kp("ZodError",Rx),zx=kp("ZodError",Rx,{Parent:Error}),Lx=Gm(zx),Zx=Xm(zx),Fx=Wm(zx),Ux=Hm(zx),Vx=Jm(zx),Gx=tg(zx),Bx=rg(zx),Xx=ig(zx),Yx=sg(zx),Wx=ug(zx),qx=dg(zx),Hx=hg(zx),Kx=kp("ZodType",(e,t)=>(Wv.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(Bp(t,{checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,n)=>lm(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>Lx(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>Fx(e,t,n),e.parseAsync=async(t,n)=>Zx(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>Ux(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>Vx(e,t,n),e.decode=(t,n)=>Gx(e,t,n),e.encodeAsync=async(t,n)=>Bx(e,t,n),e.decodeAsync=async(t,n)=>Xx(e,t,n),e.safeEncode=(t,n)=>Yx(e,t,n),e.safeDecode=(t,n)=>Wx(e,t,n),e.safeEncodeAsync=async(t,n)=>qx(e,t,n),e.safeDecodeAsync=async(t,n)=>Hx(e,t,n),e.refine=(t,n)=>e.check(QP(t,n)),e.superRefine=t=>e.check(zP(t)),e.overwrite=t=>e.check(GS(t)),e.optional=()=>iP(e),e.nullable=()=>sP(e),e.nullish=()=>iP(sP(e)),e.nonoptional=t=>pP(e,t),e.array=()=>$_(e),e.or=t=>M_([e,t]),e.and=t=>z_(e,t),e.transform=t=>SP(e,rP(t)),e.default=t=>cP(e,t),e.prefault=t=>fP(e,t),e.catch=t=>yP(e,t),e.pipe=t=>SP(e,t),e.readonly=()=>PP(e),e.describe=t=>{const n=e.clone();return xw.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>xw.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return xw.get(e);const n=e.clone();return xw.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Jx=kp("_ZodString",(e,t)=>{qv.init(e,t),Kx.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(RS(...t)),e.includes=(...t)=>e.check(LS(...t)),e.startsWith=(...t)=>e.check(ZS(...t)),e.endsWith=(...t)=>e.check(FS(...t)),e.min=(...t)=>e.check(MS(...t)),e.max=(...t)=>e.check(IS(...t)),e.length=(...t)=>e.check(DS(...t)),e.nonempty=(...t)=>e.check(MS(1,...t)),e.lowercase=t=>e.check(QS(t)),e.uppercase=t=>e.check(zS(t)),e.trim=()=>e.check(XS()),e.normalize=(...t)=>e.check(BS(...t)),e.toLowerCase=()=>e.check(YS()),e.toUpperCase=()=>e.check(WS())}),ek=kp("ZodString",(e,t)=>{qv.init(e,t),Jx.init(e,t),e.email=t=>e.check(Pw(rk,t)),e.url=t=>e.check(Nw(fk,t)),e.jwt=t=>e.check(Xw(Uk,t)),e.emoji=t=>e.check(Aw(mk,t)),e.guid=t=>e.check(Ew(ik,t)),e.uuid=t=>e.check($w(sk,t)),e.uuidv4=t=>e.check(Tw(sk,t)),e.uuidv6=t=>e.check(Cw(sk,t)),e.uuidv7=t=>e.check(jw(sk,t)),e.nanoid=t=>e.check(Iw(vk,t)),e.guid=t=>e.check(Ew(ik,t)),e.cuid=t=>e.check(Mw(bk,t)),e.cuid2=t=>e.check(Dw(wk,t)),e.ulid=t=>e.check(Rw(xk,t)),e.base64=t=>e.check(Vw(Rk,t)),e.base64url=t=>e.check(Gw(zk,t)),e.xid=t=>e.check(Qw(_k,t)),e.ksuid=t=>e.check(zw(Ek,t)),e.ipv4=t=>e.check(Lw(Tk,t)),e.ipv6=t=>e.check(Zw(jk,t)),e.cidrv4=t=>e.check(Fw(Ak,t)),e.cidrv6=t=>e.check(Uw(Mk,t)),e.e164=t=>e.check(Bw(Zk,t)),e.datetime=t=>e.check(Cx(t)),e.date=t=>e.check(Nx(t)),e.time=t=>e.check(Ix(t)),e.duration=t=>e.check(Dx(t))});function tk(e){return kw(ek,e)}const nk=kp("ZodStringFormat",(e,t)=>{Hv.init(e,t),Jx.init(e,t)}),rk=kp("ZodEmail",(e,t)=>{ey.init(e,t),nk.init(e,t)});function ok(e){return Pw(rk,e)}const ik=kp("ZodGUID",(e,t)=>{Kv.init(e,t),nk.init(e,t)});function ak(e){return Ew(ik,e)}const sk=kp("ZodUUID",(e,t)=>{Jv.init(e,t),nk.init(e,t)});function lk(e){return $w(sk,e)}function uk(e){return Tw(sk,e)}function ck(e){return Cw(sk,e)}function dk(e){return jw(sk,e)}const fk=kp("ZodURL",(e,t)=>{ty.init(e,t),nk.init(e,t)});function hk(e){return Nw(fk,e)}function pk(e){return Nw(fk,{protocol:/^https?$/,hostname:Ug,...um(e)})}const mk=kp("ZodEmoji",(e,t)=>{ny.init(e,t),nk.init(e,t)});function gk(e){return Aw(mk,e)}const vk=kp("ZodNanoID",(e,t)=>{ry.init(e,t),nk.init(e,t)});function yk(e){return Iw(vk,e)}const bk=kp("ZodCUID",(e,t)=>{oy.init(e,t),nk.init(e,t)});function Ok(e){return Mw(bk,e)}const wk=kp("ZodCUID2",(e,t)=>{iy.init(e,t),nk.init(e,t)});function Sk(e){return Dw(wk,e)}const xk=kp("ZodULID",(e,t)=>{ay.init(e,t),nk.init(e,t)});function kk(e){return Rw(xk,e)}const _k=kp("ZodXID",(e,t)=>{sy.init(e,t),nk.init(e,t)});function Pk(e){return Qw(_k,e)}const Ek=kp("ZodKSUID",(e,t)=>{ly.init(e,t),nk.init(e,t)});function $k(e){return zw(Ek,e)}const Tk=kp("ZodIPv4",(e,t)=>{hy.init(e,t),nk.init(e,t)});function Ck(e){return Lw(Tk,e)}const jk=kp("ZodIPv6",(e,t)=>{py.init(e,t),nk.init(e,t)});function Nk(e){return Zw(jk,e)}const Ak=kp("ZodCIDRv4",(e,t)=>{my.init(e,t),nk.init(e,t)});function Ik(e){return Fw(Ak,e)}const Mk=kp("ZodCIDRv6",(e,t)=>{gy.init(e,t),nk.init(e,t)});function Dk(e){return Uw(Mk,e)}const Rk=kp("ZodBase64",(e,t)=>{yy.init(e,t),nk.init(e,t)});function Qk(e){return Vw(Rk,e)}const zk=kp("ZodBase64URL",(e,t)=>{Oy.init(e,t),nk.init(e,t)});function Lk(e){return Gw(zk,e)}const Zk=kp("ZodE164",(e,t)=>{wy.init(e,t),nk.init(e,t)});function Fk(e){return Bw(Zk,e)}const Uk=kp("ZodJWT",(e,t)=>{xy.init(e,t),nk.init(e,t)});function Vk(e){return Xw(Uk,e)}const Gk=kp("ZodCustomStringFormat",(e,t)=>{ky.init(e,t),nk.init(e,t)});function Bk(e,t,n={}){return _x(Gk,e,t,n)}function Xk(e){return _x(Gk,"hostname",Fg,e)}function Yk(e){return _x(Gk,"hex",iv,e)}function Wk(e,t){const n=`${e}_${t?.enc??"hex"}`,r=O[n];if(!r)throw new Error(`Unrecognized hash format: ${n}`);return _x(Gk,n,r,t)}const qk=kp("ZodNumber",(e,t)=>{_y.init(e,t),Kx.init(e,t),e.gt=(t,n)=>e.check(kS(t,n)),e.gte=(t,n)=>e.check(_S(t,n)),e.min=(t,n)=>e.check(_S(t,n)),e.lt=(t,n)=>e.check(SS(t,n)),e.lte=(t,n)=>e.check(xS(t,n)),e.max=(t,n)=>e.check(xS(t,n)),e.int=t=>e.check(Jk(t)),e.safe=t=>e.check(Jk(t)),e.positive=t=>e.check(kS(0,t)),e.nonnegative=t=>e.check(_S(0,t)),e.negative=t=>e.check(SS(0,t)),e.nonpositive=t=>e.check(xS(0,t)),e.multipleOf=(t,n)=>e.check(CS(t,n)),e.step=(t,n)=>e.check(CS(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Hk(e){return Jw(qk,e)}const Kk=kp("ZodNumberFormat",(e,t)=>{Py.init(e,t),qk.init(e,t)});function Jk(e){return tS(Kk,e)}function e_(e){return nS(Kk,e)}function t_(e){return rS(Kk,e)}function n_(e){return oS(Kk,e)}function r_(e){return iS(Kk,e)}const o_=kp("ZodBoolean",(e,t)=>{Ey.init(e,t),Kx.init(e,t)});function i_(e){return aS(o_,e)}const a_=kp("ZodBigInt",(e,t)=>{$y.init(e,t),Kx.init(e,t),e.gte=(t,n)=>e.check(_S(t,n)),e.min=(t,n)=>e.check(_S(t,n)),e.gt=(t,n)=>e.check(kS(t,n)),e.gte=(t,n)=>e.check(_S(t,n)),e.min=(t,n)=>e.check(_S(t,n)),e.lt=(t,n)=>e.check(SS(t,n)),e.lte=(t,n)=>e.check(xS(t,n)),e.max=(t,n)=>e.check(xS(t,n)),e.positive=t=>e.check(kS(BigInt(0),t)),e.negative=t=>e.check(SS(BigInt(0),t)),e.nonpositive=t=>e.check(xS(BigInt(0),t)),e.nonnegative=t=>e.check(_S(BigInt(0),t)),e.multipleOf=(t,n)=>e.check(CS(t,n));const n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function s_(e){return lS(a_,e)}const l_=kp("ZodBigIntFormat",(e,t)=>{Ty.init(e,t),a_.init(e,t)});function u_(e){return cS(l_,e)}function c_(e){return dS(l_,e)}const d_=kp("ZodSymbol",(e,t)=>{Cy.init(e,t),Kx.init(e,t)});function f_(e){return fS(d_,e)}const h_=kp("ZodUndefined",(e,t)=>{jy.init(e,t),Kx.init(e,t)});function p_(e){return hS(h_,e)}const m_=kp("ZodNull",(e,t)=>{Ny.init(e,t),Kx.init(e,t)});function g_(e){return pS(m_,e)}const v_=kp("ZodAny",(e,t)=>{Ay.init(e,t),Kx.init(e,t)});function y_(){return mS(v_)}const b_=kp("ZodUnknown",(e,t)=>{Iy.init(e,t),Kx.init(e,t)});function O_(){return gS(b_)}const w_=kp("ZodNever",(e,t)=>{My.init(e,t),Kx.init(e,t)});function S_(e){return vS(w_,e)}const x_=kp("ZodVoid",(e,t)=>{Dy.init(e,t),Kx.init(e,t)});function k_(e){return yS(x_,e)}const __=kp("ZodDate",(e,t)=>{Ry.init(e,t),Kx.init(e,t),e.min=(t,n)=>e.check(_S(t,n)),e.max=(t,n)=>e.check(xS(t,n));const n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function P_(e){return bS(__,e)}const E_=kp("ZodArray",(e,t)=>{zy.init(e,t),Kx.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(MS(t,n)),e.nonempty=t=>e.check(MS(1,t)),e.max=(t,n)=>e.check(IS(t,n)),e.length=(t,n)=>e.check(DS(t,n)),e.unwrap=()=>e.element});function $_(e,t){return qS(E_,e,t)}function T_(e){const t=e._zod.def.shape;return q_(Object.keys(t))}const C_=kp("ZodObject",(e,t)=>{Vy.init(e,t),Kx.init(e,t),Up(e,"shape",()=>t.shape),e.keyof=()=>q_(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:O_()}),e.loose=()=>e.clone({...e._zod.def,catchall:O_()}),e.strict=()=>e.clone({...e._zod.def,catchall:S_()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>vm(e,t),e.safeExtend=t=>ym(e,t),e.merge=t=>bm(e,t),e.pick=t=>mm(e,t),e.omit=t=>gm(e,t),e.partial=(...t)=>Om(oP,e,t[0]),e.required=(...t)=>wm(hP,e,t[0])});function j_(e,t){const n={type:"object",shape:e??{},...um(t)};return new C_(n)}function N_(e,t){return new C_({type:"object",shape:e,catchall:S_(),...um(t)})}function A_(e,t){return new C_({type:"object",shape:e,catchall:O_(),...um(t)})}const I_=kp("ZodUnion",(e,t)=>{By.init(e,t),Kx.init(e,t),e.options=t.options});function M_(e,t){return new I_({type:"union",options:e,...um(t)})}const D_=kp("ZodDiscriminatedUnion",(e,t)=>{I_.init(e,t),Xy.init(e,t)});function R_(e,t,n){return new D_({type:"union",options:t,discriminator:e,...um(n)})}const Q_=kp("ZodIntersection",(e,t)=>{Yy.init(e,t),Kx.init(e,t)});function z_(e,t){return new Q_({type:"intersection",left:e,right:t})}const L_=kp("ZodTuple",(e,t)=>{Hy.init(e,t),Kx.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})});function Z_(e,t,n){const r=t instanceof Wv;return new L_({type:"tuple",items:e,rest:r?t:null,...um(r?n:t)})}const F_=kp("ZodRecord",(e,t)=>{Jy.init(e,t),Kx.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function U_(e,t,n){return new F_({type:"record",keyType:e,valueType:t,...um(n)})}function V_(e,t,n){const r=lm(e);return r._zod.values=void 0,new F_({type:"record",keyType:r,valueType:t,...um(n)})}const G_=kp("ZodMap",(e,t)=>{eb.init(e,t),Kx.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function B_(e,t,n){return new G_({type:"map",keyType:e,valueType:t,...um(n)})}const X_=kp("ZodSet",(e,t)=>{nb.init(e,t),Kx.init(e,t),e.min=(...t)=>e.check(NS(...t)),e.nonempty=t=>e.check(NS(1,t)),e.max=(...t)=>e.check(jS(...t)),e.size=(...t)=>e.check(AS(...t))});function Y_(e,t){return new X_({type:"set",valueType:e,...um(t)})}const W_=kp("ZodEnum",(e,t)=>{ob.init(e,t),Kx.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const o={};for(const r of e){if(!n.has(r))throw new Error(`Key ${r} not found in enum`);o[r]=t.entries[r]}return new W_({...t,checks:[],...um(r),entries:o})},e.exclude=(e,r)=>{const o={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete o[t]}return new W_({...t,checks:[],...um(r),entries:o})}});function q_(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new W_({type:"enum",entries:n,...um(t)})}function H_(e,t){return new W_({type:"enum",entries:e,...um(t)})}const K_=kp("ZodLiteral",(e,t)=>{ib.init(e,t),Kx.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function J_(e,t){return new K_({type:"literal",values:Array.isArray(e)?e:[e],...um(t)})}const eP=kp("ZodFile",(e,t)=>{ab.init(e,t),Kx.init(e,t),e.min=(t,n)=>e.check(NS(t,n)),e.max=(t,n)=>e.check(jS(t,n)),e.mime=(t,n)=>e.check(VS(Array.isArray(t)?t:[t],n))});function tP(e){return sx(eP,e)}const nP=kp("ZodTransform",(e,t)=>{sb.init(e,t),Kx.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new Ep(e.constructor.name);n.addIssue=r=>{if("string"==typeof r)n.issues.push($m(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),n.issues.push($m(t))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(e=>(n.value=e,n)):(n.value=o,n)}});function rP(e){return new nP({type:"transform",transform:e})}const oP=kp("ZodOptional",(e,t)=>{ub.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iP(e){return new oP({type:"optional",innerType:e})}const aP=kp("ZodNullable",(e,t)=>{cb.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType});function sP(e){return new aP({type:"nullable",innerType:e})}function lP(e){return iP(sP(e))}const uP=kp("ZodDefault",(e,t)=>{db.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function cP(e,t){return new uP({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():nm(t)}})}const dP=kp("ZodPrefault",(e,t)=>{hb.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType});function fP(e,t){return new dP({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():nm(t)}})}const hP=kp("ZodNonOptional",(e,t)=>{pb.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType});function pP(e,t){return new hP({type:"nonoptional",innerType:e,...um(t)})}const mP=kp("ZodSuccess",(e,t)=>{gb.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gP(e){return new mP({type:"success",innerType:e})}const vP=kp("ZodCatch",(e,t)=>{vb.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function yP(e,t){return new vP({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}const bP=kp("ZodNaN",(e,t)=>{yb.init(e,t),Kx.init(e,t)});function OP(e){return wS(bP,e)}const wP=kp("ZodPipe",(e,t)=>{bb.init(e,t),Kx.init(e,t),e.in=t.in,e.out=t.out});function SP(e,t){return new wP({type:"pipe",in:e,out:t})}const xP=kp("ZodCodec",(e,t)=>{wP.init(e,t),wb.init(e,t)});function kP(e,t,n){return new xP({type:"pipe",in:e,out:t,transform:n.decode,reverseTransform:n.encode})}const _P=kp("ZodReadonly",(e,t)=>{kb.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType});function PP(e){return new _P({type:"readonly",innerType:e})}const EP=kp("ZodTemplateLiteral",(e,t)=>{Pb.init(e,t),Kx.init(e,t)});function $P(e,t){return new EP({type:"template_literal",parts:e,...um(t)})}const TP=kp("ZodLazy",(e,t)=>{Tb.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.getter()});function CP(e){return new TP({type:"lazy",getter:e})}const jP=kp("ZodPromise",(e,t)=>{$b.init(e,t),Kx.init(e,t),e.unwrap=()=>e._zod.def.innerType});function NP(e){return new jP({type:"promise",innerType:e})}const AP=kp("ZodFunction",(e,t)=>{Eb.init(e,t),Kx.init(e,t)});function IP(e){return new AP({type:"function",input:Array.isArray(e?.input)?Z_(e?.input):e?.input??$_(O_()),output:e?.output??O_()})}const MP=kp("ZodCustom",(e,t)=>{Cb.init(e,t),Kx.init(e,t)});function DP(e){const t=new xv({check:"custom"});return t._zod.check=e,t}function RP(e,t){return Ox(MP,e??(()=>!0),t)}function QP(e,t={}){return wx(MP,e,t)}function zP(e){return Sx(e)}function LP(e,t={error:`Input not instance of ${e.name}`}){const n=new MP({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...um(t)});return n._zod.bag.Class=e,n}const ZP=(...e)=>kx({Codec:xP,Boolean:o_,String:ek},...e);function FP(e){const t=CP(()=>M_([tk(e),Hk(),i_(),g_(),$_(t),U_(tk(),t)]));return t}function UP(e,t){return SP(rP(e),t)}const VP={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function GP(e){Tp({customError:e})}function BP(){return Tp().customError}var XP,YP;function WP(e){return _w(ek,e)}function qP(e){return eS(qk,e)}function HP(e){return sS(o_,e)}function KP(e){return uS(a_,e)}function JP(e){return OS(__,e)}function eE(e){return eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eE(e)}function tE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return nE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function nE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=eE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eE(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}XP||(XP={}),Tp(Yb());var oE=function(e){return e.toLowerCase()},iE={"Core Messaging Events":{MESSAGE_RECEIVED:{description:"Emitted when a new message is received/inserted into chat.",params:{messageId:qP().describe("The ID of the message."),type:tk().optional().describe("The type of message.")}},CHARACTER_MESSAGE_RENDERED:{description:"Emitted after a character message is rendered in the UI.",params:{messageId:qP().describe("The ID of the message."),type:tk().optional().describe("The type of message.")}},MESSAGE_SENT:{description:"Emitted when a user sends a message.",params:{index:qP().describe("The index of the sent message.")}},USER_MESSAGE_RENDERED:{description:"Emitted after a user message is rendered in the UI.",params:{index:qP().describe("The index of the rendered message.")}},MESSAGE_EDITED:{description:"Emitted when a message is edited.",params:{messageId:qP().describe("The ID of the edited message.")}},MESSAGE_DELETED:{description:"Emitted when a message is deleted.",params:{chatLength:qP().describe("The new length of the chat.")}},MESSAGE_UPDATED:{description:"Emitted when a message is updated.",params:{messageId:qP().describe("The ID of the updated message.")}},MESSAGE_SWIPED:{description:"Emitted when a message is swiped.",params:{messageIndex:qP().describe("The index of the message that was swiped.")}},MESSAGE_SWIPE_DELETED:{description:"Emitted when a message swipe is deleted.",params:{data:j_({messageId:qP(),swipeId:qP(),newSwipeId:qP()}).describe("Object containing details about the deleted swipe.")}},MORE_MESSAGES_LOADED:{description:"Emitted when more messages are loaded (e.g., by scrolling up)."},IMPERSONATE_READY:{description:"Emitted when an impersonation message is ready to be sent.",params:{text:tk().describe("The content of the impersonation message.")}},MESSAGE_FILE_EMBEDDED:{description:"Emitted when a file is embedded in a message.",params:{messageId:qP().describe("The ID of the message with the embedded file.")}},MESSAGE_REASONING_EDITED:{description:"Emitted when a message's reasoning (metadata) is edited."},MESSAGE_REASONING_DELETED:{description:"Emitted when a message's reasoning (metadata) is deleted."}},"Chat/Group Management Events":{CHAT_CHANGED:{description:"Emitted when the current chat changes.",params:{chatId:tk().describe("The ID of the new chat.")}},CHAT_DELETED:{description:"Emitted when a chat is deleted.",params:{chatName:tk().describe("The name of the deleted chat.")}},CHAT_CREATED:{description:"Emitted when a chat is created."},GROUP_CHAT_DELETED:{description:"Emitted when a group chat is deleted.",params:{chatId:tk().describe("The ID of the deleted group chat.")}},GROUP_CHAT_CREATED:{description:"Emitted when a new group chat is created."},GROUP_UPDATED:{description:"Emitted when group information is updated."},GROUP_MEMBER_DRAFTED:{description:"Emitted when a group member is drafted.",params:{chId:qP().describe("The ID of the drafted character.")}},GROUP_WRAPPER_STARTED:{description:"Emitted when a group message generation process starts.",params:{data:j_({selected_group:tk(),type:tk()}).describe("Data related to the group wrapper start.")}},GROUP_WRAPPER_FINISHED:{description:"Emitted when a group message generation process finishes.",params:{data:y_().describe("Data related to the group wrapper finish.")}}},"Preset Management Events":{PRESET_CHANGED:{description:"Emitted when a generation preset is changed for an API.",params:{data:j_({apiId:tk(),name:tk()}).describe("Preset change details.")}},PRESET_DELETED:{description:"Emitted when a generation preset is deleted.",params:{data:j_({apiId:tk(),name:tk()}).describe("Deleted preset details.")}},PRESET_RENAMED:{description:"Emitted after a generation preset is renamed.",params:{data:j_({apiId:tk(),oldName:tk(),newName:tk()}).describe("Preset rename details.")}}},"World Info Events":{WORLDINFO_SETTINGS_UPDATED:{description:"Emitted when world info settings are updated."},WORLDINFO_UPDATED:{description:"Emitted when world info entries are updated.",params:{name:tk().describe("The name of the updated world info."),data:y_()}},WORLD_INFO_ACTIVATED:{description:"Emitted when world info entries are activated for context.",params:{entries:$_(y_()).describe("A list of activated world info entries.")}},WORLDINFO_FORCE_ACTIVATE:{description:"Emitted to force world info activation."},WORLDINFO_ENTRIES_LOADED:{description:"Emitted when world info entries are loaded."}},"API/Model Events":{CHATCOMPLETION_SOURCE_CHANGED:{description:"Emitted when the chat completion source (API provider) changes.",params:{value:tk().describe("The new API provider key.")}},CHATCOMPLETION_MODEL_CHANGED:{description:"Emitted when the chat completion model changes.",params:{value:tk().describe("The new model name.")}}},"Extension Events":{EXTENSIONS_FIRST_LOAD:{description:"Emitted on the first load of extensions after the UI is ready."},EXTRAS_CONNECTED:{description:"Emitted when extras modules (like TTS, STT) are connected.",params:{modules:$_(y_()).describe("A list of connected modules.")}},EXTENSION_SETTINGS_LOADED:{description:"Emitted when extension settings are loaded from the server.",params:{response:y_().describe("The settings response object.")}}},"UI Rendering Events":{APP_READY:{description:"Emitted when the main application UI is ready."},FORCE_SET_BACKGROUND:{description:"Emitted to force a background update."},MOVABLE_PANELS_RESET:{description:"Emitted to reset the positions of movable UI panels."}},"Generation/Streaming Events":{GENERATION_STARTED:{description:"Emitted when a new message generation starts.",params:{type:tk().describe("The type of generation."),options:y_().describe("Generation options."),dryRun:i_().describe("Whether it is a dry run.")}},GENERATION_STOPPED:{description:"Emitted when a generation is manually stopped by the user."},GENERATION_ENDED:{description:"Emitted when a generation finishes successfully.",params:{chatLength:qP().describe("The new length of the chat.")}},GENERATION_AFTER_COMMANDS:{description:"Emitted after slash commands in a message are processed, but before generation.",params:{type:tk().describe("The type of generation."),options:y_().describe("Generation options."),dryRun:i_().describe("Whether it is a dry run.")}},SD_PROMPT_PROCESSING:{description:"Emitted during Stable Diffusion prompt processing."},STREAM_TOKEN_RECEIVED:{description:"Emitted for each token received during a streaming generation.",params:{text:tk().describe("The text token received.")}}},"Character Management Events":{CHARACTER_EDITOR_OPENED:{description:"Emitted when the character editor is opened.",params:{chid:tk().describe("The ID of the character being edited.")}},CHARACTER_EDITED:{description:"Emitted when a character's data is saved.",params:{data:y_().describe("An object containing character details.")}},CHARACTER_PAGE_LOADED:{description:"Emitted when the character management page is loaded."},CHARACTER_DELETED:{description:"Emitted when a character is deleted.",params:{data:y_().describe("An object containing details of the deleted character.")}},CHARACTER_DUPLICATED:{description:"Emitted when a character is duplicated.",params:{data:j_({oldAvatar:tk(),newAvatar:tk()}).describe("Avatar filenames.")}},CHARACTER_RENAMED:{description:"Emitted when a character is renamed.",params:{oldAvatar:tk().describe("The old avatar filename."),newAvatar:tk().describe("The new avatar filename.")}},CHARACTER_RENAMED_IN_PAST_CHAT:{description:"Emitted when a character rename affects past chats.",params:{currentChat:y_().describe("The current chat object."),oldAvatar:tk().describe("The old avatar filename."),newAvatar:tk().describe("The new avatar filename.")}},CHARACTER_FIRST_MESSAGE_SELECTED:{description:"Emitted when a character's greeting (first message) is selected.",params:{eventArgs:y_()}},OPEN_CHARACTER_LIBRARY:{description:"Emitted when the character library is opened."}},"Settings Events":{SETTINGS_LOADED:{description:"Emitted when global settings are loaded."},SETTINGS_UPDATED:{description:"Emitted when global settings are updated."}},"Connection Profile Events":{CONNECTION_PROFILE_LOADED:{description:"Emitted when a connection profile is loaded.",params:{profileName:tk().describe("The name of the loaded profile.")}},CONNECTION_PROFILE_CREATED:{description:"Emitted when a new connection profile is created.",params:{profile:y_().describe("The new profile object.")}},CONNECTION_PROFILE_DELETED:{description:"Emitted when a connection profile is deleted.",params:{profile:y_().describe("The deleted profile object.")}},CONNECTION_PROFILE_UPDATED:{description:"Emitted when a connection profile is updated.",params:{oldProfile:y_().describe("The old profile object."),newProfile:y_().describe("The new profile object.")}}},"Tool Calling Events":{TOOL_CALLS_PERFORMED:{description:"Emitted when tool calls are performed."},TOOL_CALLS_RENDERED:{description:"Emitted when tool calls are rendered in the UI."}},"API Events":{MAIN_API_CHANGED:{description:"Emitted when the main API provider changes.",params:{data:j_({apiId:tk()}).describe("An object containing the new API ID.")}}},"Online Status Events":{ONLINE_STATUS_CHANGED:{description:"Emitted when the application's online status changes.",params:{onlineStatus:i_().describe("True if online, false if offline.")}}},"Image Events":{IMAGE_SWIPED:{description:"Emitted when an image is swiped within a message.",params:{data:y_().describe("Data about the swipe event.")}}}},aE={},sE={},lE={},uE={};for(var cE in iE)for(var dE in aE[cE]=[],iE[cE]){var fE=iE[cE][dE],hE=dE,pE=oE(hE);sE[hE]=pE,aE[cE].push(pE),lE[pE]=fE.description,uE[pE]=fE.params||{}}var mE,gE=sE;!function(e){e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.OBJECT="object",e.ARRAY="array",e.PROFILE_ID="profileId",e.MESSAGES="messages",e.SCHEMA="schema",e.STRUCTURED_RESULT="structuredResult",e.CHARACTER_AVATAR="characterAvatar",e.LOREBOOK_NAME="lorebookName",e.REGEX_SCRIPT_ID="regexScriptId",e.FLOW_ID="flowId",e.ANY="any"}(mE||(mE={}));var vE=(rE(rE(rE(rE(rE(rE(rE(rE(rE(rE(YP={},mE.STRING,"#f4e04d"),mE.NUMBER,"#4df48c"),mE.BOOLEAN,"#f44d4d"),mE.OBJECT,"#4d8cf4"),mE.ARRAY,"#4df4c8"),mE.MESSAGES,"#a94df4"),mE.SCHEMA,"#f4a94d"),mE.PROFILE_ID,"#4df4e0"),mE.STRUCTURED_RESULT,"#4d8cf4"),mE.CHARACTER_AVATAR,"#f47d4d"),rE(rE(rE(rE(YP,mE.LOREBOOK_NAME,"#f44dd9"),mE.REGEX_SCRIPT_ID,"#4dd4f4"),mE.FLOW_ID,"#8ff44d"),mE.ANY,"#ffffff")),yE=[new Set([mE.STRING,mE.PROFILE_ID,mE.CHARACTER_AVATAR,mE.LOREBOOK_NAME,mE.REGEX_SCRIPT_ID,mE.FLOW_ID]),new Set([mE.OBJECT,mE.STRUCTURED_RESULT])],bE=function(){for(var e=new Map,t=function(t){return e.has(t)||e.set(t,new Set),e.get(t)},n=0,r=yE;n<r.length;n++){var o,i=r[n],a=tE(i);try{for(a.s();!(o=a.n()).done;){var s,l=o.value,u=t(l),c=tE(i);try{for(c.s();!(s=c.n()).done;){var d=s.value;d!==l&&u.add(d)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}}return e}();function OE(e,t){if(e===t)return!0;if(e===mE.ANY||t===mE.ANY)return!0;var n=bE.get(e);return void 0!==n&&n.has(t)}function wE(e,t){if(e===t)return!0;if(e===mE.ANY||t===mE.ANY)return!1;var n=bE.get(e);return!!n&&n.has(t)}var SE=function(e){e.id;var t=e.data,n=e.selected,r=(null==t?void 0:t.label)||"Unknown Node";return(0,E.jsxs)("div",{className:n?"node-selected":"",style:{border:"1px solid #777",padding:"10px",background:"#333",fontSize:"12px",minWidth:180,position:"relative"},children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:(0,E.jsx)("label",{children:r})}),(0,E.jsxs)("div",{style:{color:"#ff6b6b",fontStyle:"italic"},children:[(0,E.jsx)("p",{children:"Unknown node type"}),(0,E.jsx)("p",{children:"This node cannot be executed"})]}),(0,E.jsx)(Qd,{type:"target",position:Sl.Left,id:"input"}),(0,E.jsx)(Qd,{type:"source",position:Sl.Right,id:"output"})]})};function xE(e){return xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xE(e)}function kE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PE(r.key),r)}}function _E(e,t,n){return(t=PE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PE(e){var t=function(e,t){if("object"!=xE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xE(t)?t:t+""}var EE=function(){return function(e,t,n){return t&&kE(e.prototype,t),n&&kE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_E(this,"nodeTypes",{}),_E(this,"nodeDefinitionMap",new Map),_E(this,"nodeExecutors",new Map),_E(this,"allNodeDefinitions",[])},[{key:"register",value:function(e){this.nodeDefinitionMap.has(e.type)&&console.warn('Node type "'.concat(e.type,'" is being registered more than once. The last one wins.')),this.nodeTypes[e.type]=e.component,this.nodeDefinitionMap.set(e.type,e),this.nodeExecutors.set(e.type,e.execute),this.allNodeDefinitions.push(e)}},{key:"nodeTypesWithFallback",get:function(){return new Proxy(this.nodeTypes,{get:function(e,t){return"string"!=typeof t||t in e?e[t]:SE}})}}])}(),$E=new EE;function TE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return CE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function CE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jE(e,t,n){var r;return null!==(r=e[n])&&void 0!==r?r:t[n]}var NE=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=e,i=TE(t.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean));try{for(i.s();!(n=i.n()).done;){var a=n.value;if(null==o)return r;o=o[a]}}catch(e){i.e(e)}finally{i.f()}return void 0===o?r:o};function AE(e){return AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AE(e)}function IE(e){var t=e;return e instanceof oP||e instanceof aP?("unwrap"in t&&"function"==typeof t.unwrap&&(t=t.unwrap()),"innerType"in t&&"function"==typeof t.innerType&&(t=t.innerType()),IE(t)):t}function ME(e){var t=IE(e);return t instanceof ek?mE.STRING:t instanceof qk?mE.NUMBER:t instanceof o_?mE.BOOLEAN:t instanceof C_||t instanceof W_?mE.OBJECT:t instanceof E_?mE.ARRAY:mE.ANY}function DE(e){if(null==e)return mE.ANY;if(Array.isArray(e))return mE.ARRAY;switch(AE(e)){case"string":return mE.STRING;case"number":return mE.NUMBER;case"boolean":return mE.BOOLEAN;case"object":return mE.OBJECT;default:return mE.ANY}}function RE(e,t,n,r,o){if(e.type){var i=$E.nodeDefinitionMap.get(e.type);if(i){if(i.getDynamicHandles){var a=i.getDynamicHandles(e,r,o),s=("input"===n?a.inputs:a.outputs).find(function(e){return e.id===t});if(s)return s}return("input"===n?i.handles.inputs:i.handles.outputs).find(function(e){return e.id===t})}}}function QE(e){var t=[];if(e instanceof C_)for(var n in e.shape)if(Object.prototype.hasOwnProperty.call(e.shape,n)){var r=e.shape[n];t.push({id:n,type:ME(r),schema:r})}return t}const zE=new Map,LE=e=>{const t=zE.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},ZE=(e,t={})=>(n,r,o)=>{const{enabled:i,anonymousActionType:a,store:s,...l}=t;let u;try{u=(null==i||i)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!u)return i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,o);const{connection:c,...d}=((e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};const r=zE.get(n.name);if(r)return{type:"tracked",store:e,...r};const o={connection:t.connect(n),stores:{}};return zE.set(n.name,o),{type:"tracked",store:e,...o}})(s,u,l);let f=!0;o.setState=(e,t,i)=>{const u=n(e,t);if(!f)return u;const d=void 0===i?{type:a||"anonymous"}:"string"==typeof i?{type:i}:i;return void 0===s?(null==c||c.send(d,r()),u):(null==c||c.send({...d,type:`${s}/${d.type}`},{...LE(l.name),[s]:o.getState()}),u)};const h=(...e)=>{const t=f;f=!1,n(...e),f=t},p=e(o.setState,r,o);if("untracked"===d.type?null==c||c.init(p):(d.stores[d.store]=o,null==c||c.init(Object.fromEntries(Object.entries(d.stores).map(([e,t])=>[e,e===d.store?p:t.getState()])))),o.dispatchFromDevtools&&"function"==typeof o.dispatch){let e=!1;const t=o.dispatch;o.dispatch=(...n)=>{"__setState"!==n[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...n)}}return c.subscribe(e=>{var t;switch(e.type){case"ACTION":return"string"!=typeof e.payload?void console.error("[zustand devtools middleware] Unsupported action format"):FE(e.payload,e=>{if("__setState"===e.type){if(void 0===s)return void h(e.state);1!==Object.keys(e.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const t=e.state[s];if(null==t)return;return void(JSON.stringify(o.getState())!==JSON.stringify(t)&&h(t))}o.dispatchFromDevtools&&"function"==typeof o.dispatch&&o.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":return h(p),void 0===s?null==c?void 0:c.init(o.getState()):null==c?void 0:c.init(LE(l.name));case"COMMIT":return void 0===s?void(null==c||c.init(o.getState())):null==c?void 0:c.init(LE(l.name));case"ROLLBACK":return FE(e.state,e=>{if(void 0===s)return h(e),void(null==c||c.init(o.getState()));h(e[s]),null==c||c.init(LE(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return FE(e.state,e=>{void 0!==s?JSON.stringify(o.getState())!==JSON.stringify(e[s])&&h(e[s]):h(e)});case"IMPORT_STATE":{const{nextLiftedState:n}=e.payload,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;return h(void 0===s?r:r[s]),void(null==c||c.send(null,n))}case"PAUSE_RECORDING":return f=!f}return}}),p},FE=(e,t)=>{let n;try{n=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==n&&t(n)};function UE(e){return UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UE(e)}function VE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function GE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VE(Object(n),!0).forEach(function(t){BE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function BE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=UE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UE(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XE=wp()(ZE(function(e){return{runId:null,runStatus:"idle",nodeReports:{},executionOrder:[],isVisualizationVisible:!1,activeNodeId:null,startRun:function(t){return e({runId:t,runStatus:"running",nodeReports:{},activeNodeId:null,executionOrder:[]})},setActiveNode:function(t,n){return e(function(e){return e.runId!==t?{}:{activeNodeId:n}})},addNodeReport:function(t,n,r){return e(function(e){return e.runId!==t?{}:{nodeReports:GE(GE({},e.nodeReports),{},BE({},n,r))}})},endRun:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e(function(e){return e.runId!==t?{}:{runStatus:n,isVisualizationVisible:!0,activeNodeId:null,executionOrder:r.map(function(e){return e.nodeId})}})},toggleVisualization:function(){return e(function(e){return{isVisualizationVisible:!e.isVisualizationVisible}})},clearRun:function(){return e({runId:null,runStatus:"idle",nodeReports:{},isVisualizationVisible:!1,activeNodeId:null,executionOrder:[]})}}},{name:"FlowRunStore"}));function YE(e){return YE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YE(e)}function WE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new Set;return JSON.stringify(e,function(e,t){if("object"===YE(t)&&null!==t){if(n.has(t))return"[Circular Reference]";n.add(t)}return t},t)}function qE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return HE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var KE=function(e){var t=e.report,n=qE((0,$.useState)("output"),2),r=n[0],o=n[1];return(0,E.jsx)("div",{className:"node-run-report",children:(0,E.jsxs)("details",{children:[(0,E.jsxs)("summary",{children:["Status: ",(0,E.jsx)("span",{className:"status-".concat(t.status),children:t.status})]}),(0,E.jsxs)("div",{className:"report-content",children:[t.error&&(0,E.jsx)("pre",{className:"report-error",children:t.error}),(0,E.jsxs)("div",{className:"report-tabs",children:[(0,E.jsx)(C,{onClick:function(){return o("input")},className:"input"===r?"active":"",children:"Input"}),(0,E.jsx)(C,{onClick:function(){return o("output")},className:"output"===r?"active":"",children:"Output"}),(0,E.jsx)("div",{style:{flex:1}}),(0,E.jsx)(C,{className:"fa-solid fa-copy",onClick:function(){return function(e){navigator.clipboard.writeText(WE(e)).then(function(){return Hr("info","Copied to clipboard.","ui_action")}).catch(function(){return Hr("error","Failed to copy.","ui_action")})}("input"===r?t.input:t.output)}})]}),(0,E.jsx)("pre",{className:"report-data nowheel",children:WE("input"===r?t.input:t.output)})]})]})})},JE=function(e){var t=e.id,n=e.title,r=e.children,o=e.selected,i=e.contentGrows,a=e.minWidth,s=void 0===a?180:a,l=XE(function(e){return{isVisualizationVisible:e.isVisualizationVisible,nodeReports:e.nodeReports,executionOrder:e.executionOrder}}),u=l.isVisualizationVisible,c=l.nodeReports,d=l.executionOrder,f=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),h=null==f?void 0:f.disabled,p=null==f?void 0:f._validationErrors,m=(0,$.useMemo)(function(){var e;return null!==(e=null==p?void 0:p.filter(function(e){return!e.fieldId}))&&void 0!==e?e:[]},[p]),g=c[t],v=u&&g,y=v?"run-".concat(g.status):"";h&&(y+=" node-disabled");var b=u?d.indexOf(t)+1:0,O={border:"1px solid #777",padding:"10px",background:"#333",fontSize:"12px",minWidth:s,position:"relative"};i&&(O.display="flex",O.flexDirection="column",O.height="100%");var w=i?(0,E.jsx)("div",{style:{flexGrow:1,minHeight:0,position:"relative"},children:r}):r;return(0,E.jsxs)("div",{className:y,style:O,children:[b>0&&(0,E.jsx)("div",{className:"execution-order-badge",children:b}),m.length>0&&(0,E.jsx)("div",{className:"node-validation-error-icon",title:m.map(function(e){return e.message}).join("\n"),children:(0,E.jsx)("i",{className:"fa-solid fa-triangle-exclamation"})}),(0,E.jsx)(Th,{isVisible:o,minWidth:s,minHeight:50}),(0,E.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:(0,E.jsx)("label",{children:n})}),w,v&&(0,E.jsx)(KE,{report:g})]})};function e$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return t$(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="  ".repeat(t);if(e instanceof C_){var r=e.shape;if(0===Object.keys(r).length)return"{}";var o=Object.entries(r).map(function(e){var r=e$(e,2),o=r[0],i=r[1],a=i instanceof oP||"function"==typeof i.isOptional&&i.isOptional()?"?":"",s=i.description?" // ".concat(i.description):"";return"".concat(n,"  ").concat(o).concat(a,": ").concat(n$(i,t+1)).concat(s)}).join("\n");return"{\n".concat(o,"\n").concat(n,"}")}if(e instanceof E_){var i=n$(e.element,t+1);return i.includes("\n")?"Array<\n".concat(i,"\n").concat(n,">"):"Array<".concat(i.trim(),">")}if(e instanceof ek)return"string";if(e instanceof qk)return"number";if(e instanceof o_)return"boolean";if(e instanceof W_)return"enum";if(e instanceof oP){var a=e._def.innerType;return"".concat(n$(a,t))}return"unwrap"in e&&"function"==typeof e.unwrap?n$(e.unwrap(),t):"innerType"in e&&"function"==typeof e.innerType?n$(e.innerType(),t):"any"}function r$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("unwrap"in e&&"function"==typeof e.unwrap)return r$(e.unwrap(),t);if("innerType"in e&&"function"==typeof e.innerType)return r$(e.innerType(),t);if(e instanceof C_){var n=e.shape;return Object.entries(n).flatMap(function(e){var n=e$(e,2),r=n[0];return r$(n[1],t?"".concat(t,".").concat(r):r)})}return e instanceof E_?r$(e.element,"".concat(t,"[0]")):t?[t]:[]}function o$(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i$(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function i$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a$=function(e){var t=th();return(0,$.useMemo)(function(){var n,r=new Set,o=o$(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.target===e&&i.targetHandle&&r.add(i.targetHandle)}}catch(e){o.e(e)}finally{o.f()}return r},[t,e])};function s$(e){return s$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s$(e)}function l$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u$(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c$(e){return function(e){if(Array.isArray(e))return d$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d$(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d$(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f$=function(e){var t=e.nodeId,n=e.definition,r=e.type,o=e.fields,i=e.data,a=e.updateNodeData,s=e.exclude,l=void 0===s?[]:s,u=O4(function(e){var n,r;return{node:e.nodesMap.get(t),allNodes:e.nodes,allEdges:e.edges,validationIssues:null!==(n=null===(r=e.nodesMap.get(t))||void 0===r||null===(r=r.data)||void 0===r?void 0:r._validationErrors)&&void 0!==n?n:[]}}),c=u.node,d=u.allNodes,f=u.allEdges,h=u.validationIssues,p=a$(t),m=(0,$.useMemo)(function(){if(!c)return[];var e="input"===r?n.handles.inputs:n.handles.outputs,t=[];if(n.getDynamicHandles){var o=n.getDynamicHandles(c,d,f);t="input"===r?o.inputs:o.outputs}var i=e.filter(function(e){return!t.some(function(t){return t.id===e.id})});return[].concat(c$(i),c$(t)).filter(function(e){return e.id}).filter(function(e){return!l.includes(e.id)})},[c,d,f,n,r,l]),g="input"===r?Sl.Left:Sl.Right,v="input"===r?"flex-start":"flex-end";return 0===m.length?null:(0,E.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:m.map(function(e){var n,s,l=e.schema?n$(e.schema):e.type,u="input"===r&&o?o.find(function(t){return t.id===e.id}):void 0,c=p.has(e.id),d=u&&!c,f=h.find(function(t){return t.fieldId===e.id}),m=e.schema instanceof oP||e.schema&&"function"==typeof e.schema.isOptional&&e.schema.isOptional()?"".concat(e.type,"?"):e.type,y=(0,E.jsx)(Qd,{type:"input"===r?"target":"source",position:g,id:e.id,style:{position:"relative",transform:"none",top:0,left:0,right:0,backgroundColor:vE[e.type]}}),b=null;if(d&&i&&a){var O,w,S,x=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l$(Object(n),!0).forEach(function(t){u$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({className:"nodrag nowheel",onChange:function(e){if(u.customChangeHandler)u.customChangeHandler(e,{nodeId:t,updateNodeData:a});else{var n=u.getValueFromEvent?u.getValueFromEvent(e):e.target.value;a(t,u$({},u.id,n))}}},u.props);if(u.options&&(x.children=(0,E.jsx)(E.Fragment,{children:u.options.map(function(e){return(0,E.jsx)("option",{value:e.value,children:e.label},String(e.value))})})),"checkbox"===(null===(O=u.props)||void 0===O?void 0:O.type))x.checked=null!==(w=i[u.id])&&void 0!==w&&w;else x.value=u.formatValue?u.formatValue(i[u.id]):null!==(S=i[u.id])&&void 0!==S?S:"";b=$.createElement(u.component,x)}var k=null!==(n=null!==(s=null==u?void 0:u.label)&&void 0!==s?s:e.label)&&void 0!==n?n:e.id,_=(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("label",{style:{margin:"0 10px",textTransform:"capitalize"},children:k}),(0,E.jsxs)("span",{className:"handle-label",children:["(",m,")"]})]});return(0,E.jsxs)("div",{className:f?"flow-node-field-invalid":"",style:{display:"flex",flexDirection:"column",gap:"4px"},title:null==f?void 0:f.message,children:[(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:v},title:l,children:"input"===r?(0,E.jsxs)(E.Fragment,{children:[y,_]}):(0,E.jsxs)(E.Fragment,{children:[_,y]})}),b]},e.id)})})},h$=function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=(0,$.useMemo)(function(){var e;if(null==a||null===(e=a.meta)||void 0===e||!e.fields)return[];var t=a.meta.fields;return"function"==typeof t?t(o):t},[a,o]);return o&&a?(0,E.jsxs)(JE,{id:t,title:a.label,selected:n,children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input",fields:s,data:o,updateNodeData:i}),(0,E.jsx)("div",{className:"node-output-section",children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]}):null};function p$(e){return e}function m$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return g$(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(g$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,g$(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,g$(d,"constructor",u),g$(u,"constructor",l),l.displayName="GeneratorFunction",g$(u,o,"GeneratorFunction"),g$(d),g$(d,o,"Generator"),g$(d,r,function(){return this}),g$(d,"toString",function(){return"[object Generator]"}),(m$=function(){return{w:i,m:f}})()}function g$(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}g$=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){g$(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},g$(e,t,n,r)}function v$(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var y$=j_({operation:q_(["length","get_by_index","slice","push","pop","shift","unshift","reverse","includes"]).optional(),index:Hk().optional(),endIndex:Hk().optional(),value:y_().optional(),_version:Hk().optional()}),b$=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){v$(i,r,o,a,s,"next",e)}function s(e){v$(i,r,o,a,s,"throw",e)}a(void 0)})}}(m$().m(function e(t,n){var r,o,i,a,s,l,u,c,d,f,h,p,m,g,v;return m$().w(function(e){for(;;)switch(e.n){case 0:if(o=y$.parse(t.data),i=null!==(r=jE(n,o,"operation"))&&void 0!==r?r:"length",a=n.array,Array.isArray(a)){e.n=1;break}throw new Error('An array must be connected to the "Array" input.');case 1:s=structuredClone(a),v=i,e.n="length"===v?2:"get_by_index"===v?3:"slice"===v?5:"push"===v?6:"pop"===v?8:"shift"===v?9:"unshift"===v?10:"reverse"===v?12:"includes"===v?13:15;break;case 2:return e.a(2,{result:a.length});case 3:if("number"==typeof(l=jE(n,o,"index"))){e.n=4;break}throw new Error("Index must be a number.");case 4:return e.a(2,{result:a[l]});case 5:return c=null!==(u=jE(n,o,"index"))&&void 0!==u?u:0,d=jE(n,o,"endIndex"),e.a(2,{result:a.slice(c,d)});case 6:if(void 0!==(f=jE(n,o,"value"))){e.n=7;break}throw new Error("Value to push is required.");case 7:return s.push(f),e.a(2,{result:s});case 8:return h=s.pop(),e.a(2,{array:s,item:h});case 9:return p=s.shift(),e.a(2,{array:s,item:p});case 10:if(void 0!==(m=jE(n,o,"value"))){e.n=11;break}throw new Error("Value to unshift is required.");case 11:return s.unshift(m),e.a(2,{result:s});case 12:return e.a(2,{result:s.reverse()});case 13:if(void 0!==(g=jE(n,o,"value"))){e.n=14;break}throw new Error("Value to check for is required.");case 14:return e.a(2,{result:a.includes(g)});case 15:throw new Error("Unknown array operation: ".concat(i));case 16:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),O$=["length","get_by_index","slice","push","pop","shift","unshift","reverse","includes"],w$={type:"arrayToolsNode",label:"Array Tools",category:"Data Processing",component:h$,dataSchema:y$,currentVersion:1,initialData:{operation:"length"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"operation",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:function(e,t){return t.some(function(t){return t.target===e.id&&"array"===t.targetHandle})?[]:[{message:'An array must be connected to the "Array" input.',severity:"error"}]},execute:b$,getDynamicHandles:function(e,t,n){var r,o,i=e.data,a=[{id:"array",type:mE.ARRAY}],s=[],l=n.find(function(t){return t.target===e.id&&"array"===t.targetHandle}),u=mE.ANY;if(l){var c=t.find(function(e){return e.id===l.source});if(c){var d=RE(c,l.sourceHandle||null,"output",t,n);(null==d?void 0:d.schema)instanceof E_&&(u=ME(o=(r=d.schema).element))}}switch(i.operation){case"length":s.push({id:"result",type:mE.NUMBER});break;case"get_by_index":a.push({id:"index",type:mE.NUMBER}),s.push({id:"result",type:u,schema:o});break;case"slice":a.push({id:"index",type:mE.NUMBER,label:"Start Index"}),a.push({id:"endIndex",type:mE.NUMBER,label:"End Index"}),s.push({id:"result",type:mE.ARRAY,schema:r});break;case"push":case"unshift":a.push({id:"value",type:u,schema:o}),s.push({id:"result",type:mE.ARRAY,schema:r});break;case"pop":case"shift":s.push({id:"array",type:mE.ARRAY,schema:r,label:"Modified Array"}),s.push({id:"item",type:u,schema:o,label:"Removed Item"});break;case"reverse":s.push({id:"result",type:mE.ARRAY,schema:r});break;case"includes":a.push({id:"value",type:u,schema:o}),s.push({id:"result",type:mE.BOOLEAN})}return{inputs:a,outputs:s}},meta:{fields:function(e){var t,n=null!==(t=null==e?void 0:e.operation)&&void 0!==t?t:"length",r=[{id:"operation",label:"Operation",component:N,options:O$.map(function(e){return{value:e,label:e.replace(/_/g," ")}})}];return["get_by_index","slice"].includes(n)&&r.push({id:"index",label:"slice"===n?"Start Index":"Index",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}),"slice"===n&&r.push({id:"endIndex",label:"End Index (optional)",component:j,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}}),["push","unshift","includes"].includes(n)&&r.push({id:"value",label:"Value",component:j,props:{type:"text"}}),r}}};function S$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return x$(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(x$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,x$(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,x$(d,"constructor",u),x$(u,"constructor",l),l.displayName="GeneratorFunction",x$(u,o,"GeneratorFunction"),x$(d),x$(d,o,"Generator"),x$(d,r,function(){return this}),x$(d,"toString",function(){return"[object Generator]"}),(S$=function(){return{w:i,m:f}})()}function x$(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}x$=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){x$(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},x$(e,t,n,r)}function k$(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(w$);var _$=j_({value:i_().default(!1),_version:Hk().optional()}),P$=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){k$(i,r,o,a,s,"next",e)}function s(e){k$(i,r,o,a,s,"throw",e)}a(void 0)})}}(S$().m(function e(t,n){var r,o;return S$().w(function(e){for(;;)if(0===e.n)return r=_$.parse(t.data),o=jE(n,r,"value"),e.a(2,{value:Boolean(o)})},e)}));return function(t,n){return e.apply(this,arguments)}}(),E$={type:"booleanNode",label:"Boolean",category:"Input",component:h$,dataSchema:_$,currentVersion:1,initialData:{value:!1},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.BOOLEAN}]},execute:P$,meta:{fields:[{id:"value",label:"Value",component:N,options:[{value:"true",label:"True"},{value:"false",label:"False"}],getValueFromEvent:function(e){return"true"===e.target.value},formatValue:function(e){return String(e)}}]}};$E.register(E$);var $$=function(e){var t,n=e.id,r=e.selected,o=e.type,i=$E.nodeDefinitionMap.get(o);return i?(0,E.jsxs)(JE,{id:n,title:i.label,selected:r,children:[i.handles.inputs.length>0&&(0,E.jsx)(f$,{nodeId:n,definition:i,type:"input"}),(null===(t=i.meta)||void 0===t?void 0:t.description)&&(0,E.jsx)("div",{style:{padding:"10px 0",textAlign:"center",color:"#aaa"},children:i.meta.description}),i.handles.outputs.length>0&&(0,E.jsx)("div",{className:"node-output-section",children:(0,E.jsx)(f$,{nodeId:n,definition:i,type:"output"})})]}):null};function T$(e,t){return function(n,r){var o=n.data,i=r.some(function(t){return t.target===n.id&&t.targetHandle===e});if(!o[e]&&0!==o[e]&&!i)return{fieldId:e,message:t,severity:"error"}}}function C$(e,t){return function(n,r){if(!r.some(function(t){return t.target===n.id&&t.targetHandle===e}))return{message:t,severity:"error"}}}function j$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=[],o=0,i=t;o<i.length;o++){var a=(0,i[o])(e,n);a&&r.push(a)}return r}}function N$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return A$(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(A$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,A$(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,A$(d,"constructor",u),A$(u,"constructor",l),l.displayName="GeneratorFunction",A$(u,o,"GeneratorFunction"),A$(d),A$(d,o,"Generator"),A$(d,r,function(){return this}),A$(d,"toString",function(){return"[object Generator]"}),(N$=function(){return{w:i,m:f}})()}function A$(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}A$=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){A$(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},A$(e,t,n,r)}function I$(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return M$(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function M$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D$(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var R$=Symbol("FlowLoopBreakSentinel"),Q$=Symbol("FlowLoopContinueSentinel"),z$=j_({flowId:tk().optional(),_version:Hk().optional()}),L$=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){D$(i,r,o,a,s,"next",e)}function s(e){D$(i,r,o,a,s,"throw",e)}a(void 0)})}}(N$().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p,m;return N$().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=z$.parse(t.data),i=jE(n,o,"flowId"),a=n.array,i){e.n=1;break}throw new Error("Flow ID is required.");case 1:if(Array.isArray(a)){e.n=2;break}throw new Error('An array must be connected to the "Array" input.');case 2:s=[],l=0,u=I$(a),e.p=3,u.s();case 4:if((c=u.n()).done){e.n=11;break}if(f=c.value,null===(d=r.signal)||void 0===d||!d.aborted){e.n=5;break}throw new DOMException("Flow execution was aborted.","AbortError");case 5:return h={item:f,index:l},e.n=6,r.dependencies.executeSubFlow(i,h,r.depth+1,r.executionPath,r.runId);case 6:if(!(p=e.v).error){e.n=7;break}throw new Error("Sub-flow execution for item ".concat(l," failed: ").concat(p.error.message));case 7:if(p.lastOutput!==R$){e.n=8;break}return e.a(3,11);case 8:if(p.lastOutput!==Q$){e.n=9;break}return l++,e.a(3,10);case 9:s.push(p.lastOutput),l++;case 10:e.n=4;break;case 11:e.n=13;break;case 12:e.p=12,m=e.v,u.e(m);case 13:return e.p=13,u.f(),e.f(13);case 14:return e.a(2,{results:s})}},e,null,[[3,12,13,14]])}));return function(t,n,r){return e.apply(this,arguments)}}(),Z$={type:"forEachNode",label:"For Each",category:"Logic",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=Gr.getSettings(),l=s.flows,u=s.activeFlow,c=(0,$.useMemo)(function(){return Object.values(l).filter(function(e){if(e.id===u)return!1;var t=e.flow.nodes.some(function(t){return("forEachTriggerNode"===t.type||"manualTriggerNode"===t.type)&&!e.flow.edges.some(function(e){return e.target===t.id})});return t}).map(function(e){return{value:e.id,label:e.name}})},[l,u]),d=(0,$.useMemo)(function(){return[{id:"flowId",label:"Flow to Run Per Item",component:Kn,props:{items:c,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}]},[c]);return o&&a?(0,E.jsx)(JE,{id:t,title:"For Each",selected:n,children:(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input",fields:d,data:o,updateNodeData:i}),(0,E.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:z$,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY},{id:"array",type:mE.ARRAY},{id:"flowId",type:mE.FLOW_ID}],outputs:[{id:"main",type:mE.ANY},{id:"results",type:mE.ARRAY,schema:$_(y_())}]},validate:j$(T$("flowId","A flow must be selected to run for each item."),C$("array","An array must be connected to iterate over.")),execute:L$};function F$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return U$(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(U$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,U$(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,U$(d,"constructor",u),U$(u,"constructor",l),l.displayName="GeneratorFunction",U$(u,o,"GeneratorFunction"),U$(d),U$(d,o,"Generator"),U$(d,r,function(){return this}),U$(d,"toString",function(){return"[object Generator]"}),(F$=function(){return{w:i,m:f}})()}function U$(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}U$=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){U$(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},U$(e,t,n,r)}function V$(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(Z$);var G$=j_({_version:Hk().optional()}),B$=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){V$(i,r,o,a,s,"next",e)}function s(e){V$(i,r,o,a,s,"throw",e)}a(void 0)})}}(F$().m(function e(){return F$().w(function(e){for(;;)if(0===e.n)return e.a(2,R$)},e)}));return function(){return e.apply(this,arguments)}}(),X$={type:"breakLoopNode",label:"Break Loop",category:"Logic",component:$$,dataSchema:G$,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[]},execute:B$,meta:{description:'Stops the parent "For Each" loop.'}};function Y$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return W$(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(W$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,W$(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,W$(d,"constructor",u),W$(u,"constructor",l),l.displayName="GeneratorFunction",W$(u,o,"GeneratorFunction"),W$(d),W$(d,o,"Generator"),W$(d,r,function(){return this}),W$(d,"toString",function(){return"[object Generator]"}),(Y$=function(){return{w:i,m:f}})()}function W$(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}W$=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){W$(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},W$(e,t,n,r)}function q$(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(X$);var H$=j_({message:tk().optional(),_version:Hk().optional()}),K$=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){q$(i,r,o,a,s,"next",e)}function s(e){q$(i,r,o,a,s,"throw",e)}a(void 0)})}}(Y$().m(function e(t,n,r){var o,i,a,s;return Y$().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=H$.parse(t.data),a=jE(n,i,"message")){e.n=1;break}throw new Error("Confirmation message is required.");case 1:return e.n=2,o.confirmUser(a);case 2:return s=e.v,e.a(2,{activatedHandle:s?"true":"false"})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),J$={type:"confirmUserNode",label:"Confirm With User",category:"User Interaction",component:h$,dataSchema:H$,currentVersion:1,initialData:{message:"Are you sure?"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"message",type:mE.STRING}],outputs:[{id:"true",type:mE.ANY},{id:"false",type:mE.ANY}]},validate:j$(T$("message","Message is required.")),execute:K$,determineEdgesToFollow:function(e,t){return null!=e&&e.activatedHandle?t.filter(function(t){return t.sourceHandle===e.activatedHandle}):[]},meta:{fields:[{id:"message",label:"Confirmation Message",component:A,props:{rows:3}}]}};function eT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return tT(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(tT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,tT(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,tT(d,"constructor",u),tT(u,"constructor",l),l.displayName="GeneratorFunction",tT(u,o,"GeneratorFunction"),tT(d),tT(d,o,"Generator"),tT(d,r,function(){return this}),tT(d,"toString",function(){return"[object Generator]"}),(eT=function(){return{w:i,m:f}})()}function tT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}tT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){tT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},tT(e,t,n,r)}function nT(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(J$);var rT=j_({_version:Hk().optional()}),oT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){nT(i,r,o,a,s,"next",e)}function s(e){nT(i,r,o,a,s,"throw",e)}a(void 0)})}}(eT().m(function e(){return eT().w(function(e){for(;;)if(0===e.n)return e.a(2,Q$)},e)}));return function(){return e.apply(this,arguments)}}(),iT={type:"continueLoopNode",label:"Continue Loop",category:"Logic",component:$$,dataSchema:rT,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[]},execute:oT,meta:{description:'Skips to the next item in the "For Each" loop.'}};function aT(e){return aT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aT(e)}function sT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return lT(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(lT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,lT(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,lT(d,"constructor",u),lT(u,"constructor",l),l.displayName="GeneratorFunction",lT(u,o,"GeneratorFunction"),lT(d),lT(d,o,"Generator"),lT(d,r,function(){return this}),lT(d,"toString",function(){return"[object Generator]"}),(sT=function(){return{w:i,m:f}})()}function lT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){lT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},lT(e,t,n,r)}function uT(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cT(Object(n),!0).forEach(function(t){fT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=aT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=aT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$E.register(iT);var hT=j_(dT(dT({},{name:tk().optional(),description:tk().optional(),first_mes:tk().optional(),scenario:tk().optional(),personality:tk().optional(),mes_example:tk().optional(),tags:tk().optional()}),{},{_version:Hk().optional()})),pT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){uT(i,r,o,a,s,"next",e)}function s(e){uT(i,r,o,a,s,"throw",e)}a(void 0)})}}(sT().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p;return sT().w(function(e){for(;;)switch(e.n){case 0:if(c=r.dependencies,d=hT.parse(t.data),f=jE(n,d,"name")){e.n=1;break}throw new Error("Character name is required.");case 1:return h=null!==(o=jE(n,d,"tags"))&&void 0!==o?o:"",p={name:f,description:null!==(i=jE(n,d,"description"))&&void 0!==i?i:"",first_mes:null!==(a=jE(n,d,"first_mes"))&&void 0!==a?a:"",scenario:null!==(s=jE(n,d,"scenario"))&&void 0!==s?s:"",personality:null!==(l=jE(n,d,"personality"))&&void 0!==l?l:"",mes_example:null!==(u=jE(n,d,"mes_example"))&&void 0!==u?u:"",tags:h.split(",").map(function(e){return e.trim()}).filter(Boolean),avatar:"none",spec:"chara_card_v3",spec_version:"3.0",data:{}},e.n=2,c.createCharacter(p);case 2:return e.a(2,{result:f})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),mT={type:"createCharacterNode",label:"Create Character",category:"Character",component:h$,dataSchema:hT,currentVersion:1,initialData:{name:"New Character"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"name",type:mE.STRING},{id:"description",type:mE.STRING},{id:"first_mes",type:mE.STRING},{id:"scenario",type:mE.STRING},{id:"personality",type:mE.STRING},{id:"mes_example",type:mE.STRING},{id:"tags",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.STRING}]},validate:j$(T$("name","Name is required.")),execute:pT,meta:{fields:[{id:"name",label:"Name",component:j,props:{type:"text"}},{id:"description",label:"Description",component:A,props:{rows:2}},{id:"first_mes",label:"First Message",component:A,props:{rows:2}},{id:"scenario",label:"Scenario",component:A,props:{rows:2}},{id:"personality",label:"Personality",component:A,props:{rows:2}},{id:"mes_example",label:"Message Examples",component:A,props:{rows:2}},{id:"tags",label:"Tags (comma-separated)",component:j,props:{type:"text"}}]}};$E.register(mT);var gT=j_({uid:Hk(),key:$_(tk()).describe("The trigger words for the WI entry."),content:tk().describe("The content of the WI entry."),comment:tk().describe("The comment for the WI entry. It works like a title."),disable:i_().optional().describe("Whether the entry is disabled.")}),vT=$_(gT),yT=j_({name:tk().describe("The name of the sender."),mes:tk().describe("The content of the message."),is_user:i_().describe("True if the message is from the user."),is_system:i_().default(!1).describe("True if the message is a system message (hidden from LLM context).")});function bT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return OT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OT(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var wT=function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=bT((0,$.useState)([]),2),l=s[0],u=s[1];return(0,$.useEffect)(function(){var e,t=!0,n=null==a||null===(e=a.meta)||void 0===e?void 0:e.fields;if("function"==typeof n){var r=n(o);r instanceof Promise?r.then(function(e){t&&u(e)}):u(r)}else Array.isArray(n)&&u(n);return function(){t=!1}},[a,o]),o&&a?(0,E.jsxs)(JE,{id:t,title:a.label,selected:n,children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input",fields:l,data:o,updateNodeData:i}),(0,E.jsx)("div",{className:"node-output-section",children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]}):null};function ST(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return xT(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(xT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,xT(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,xT(d,"constructor",u),xT(u,"constructor",l),l.displayName="GeneratorFunction",xT(u,o,"GeneratorFunction"),xT(d),xT(d,o,"Generator"),xT(d,r,function(){return this}),xT(d,"toString",function(){return"[object Generator]"}),(ST=function(){return{w:i,m:f}})()}function xT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}xT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){xT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},xT(e,t,n,r)}function kT(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function _T(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){kT(i,r,o,a,s,"next",e)}function s(e){kT(i,r,o,a,s,"throw",e)}a(void 0)})}}var PT,ET=j_({worldName:tk().optional(),key:tk().optional(),content:tk().optional(),comment:tk().optional(),disable:i_().optional(),_version:Hk().optional()}),$T=function(){var e=_T(ST().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h;return ST().w(function(e){for(;;)switch(e.n){case 0:if(l=r.dependencies,u=ET.parse(t.data),c=jE(n,u,"worldName"),d=null!==(o=jE(n,u,"key"))&&void 0!==o?o:"",c){e.n=1;break}throw new Error("World name is required.");case 1:if(d){e.n=2;break}throw new Error("Key(s) are required.");case 2:return f={uid:-1,key:d.split(",").map(function(e){return e.trim()}),content:null!==(i=jE(n,u,"content"))&&void 0!==i?i:"",comment:null!==(a=jE(n,u,"comment"))&&void 0!==a?a:"",disable:null!==(s=jE(n,u,"disable"))&&void 0!==s&&s,keysecondary:[]},e.n=3,l.applyWorldInfoEntry({entry:f,selectedWorldName:c,operation:"add"});case 3:return h=e.v,e.a(2,{result:h.entry})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),TT={type:"createLorebookEntryNode",label:"Create Lorebook Entry",category:"Lorebook",component:wT,dataSchema:ET,currentVersion:1,initialData:{worldName:"",key:"",content:"",comment:"",disable:!1},handles:{inputs:[{id:"main",type:mE.ANY},{id:"worldName",type:mE.LOREBOOK_NAME},{id:"key",type:mE.STRING},{id:"content",type:mE.STRING},{id:"comment",type:mE.STRING},{id:"disable",type:mE.BOOLEAN}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.OBJECT,schema:gT}]},validate:j$(T$("worldName","Lorebook Name is required."),T$("key","Keys are required.")),execute:$T,meta:{fields:(PT=_T(ST().m(function e(){var t,n;return ST().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,kr(["all"]);case 1:return t=e.v,n=Object.keys(t).map(function(e){return{value:e,label:e}}),e.a(2,[p$({id:"worldName",label:"Lorebook Name",component:Kn,props:{items:n,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}),p$({id:"key",label:"Keys (comma-separated)",component:j,props:{type:"text"}}),p$({id:"comment",label:"Comment (Title)",component:j,props:{type:"text"}}),p$({id:"content",label:"Content",component:A,props:{rows:2}}),p$({id:"disable",label:"Status",component:N,options:[{value:"false",label:"Enabled"},{value:"true",label:"Disabled"}],getValueFromEvent:function(e){return"true"===e.target.value},formatValue:function(e){return String(null!=e&&e)}})])}},e)})),function(){return PT.apply(this,arguments)})}};function CT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return jT(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(jT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,jT(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,jT(d,"constructor",u),jT(u,"constructor",l),l.displayName="GeneratorFunction",jT(u,o,"GeneratorFunction"),jT(d),jT(d,o,"Generator"),jT(d,r,function(){return this}),jT(d,"toString",function(){return"[object Generator]"}),(CT=function(){return{w:i,m:f}})()}function jT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}jT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){jT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},jT(e,t,n,r)}function NT(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(TT);var AT=j_({worldName:tk().optional(),_version:Hk().optional()}),IT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){NT(i,r,o,a,s,"next",e)}function s(e){NT(i,r,o,a,s,"throw",e)}a(void 0)})}}(CT().m(function e(t,n,r){var o,i,a;return CT().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=AT.parse(t.data),a=jE(n,i,"worldName")){e.n=1;break}throw new Error("World name is required.");case 1:return e.n=2,o.st_createNewWorldInfo(a);case 2:if(e.v){e.n=3;break}throw new Error('Failed to create lorebook "'.concat(a,'". It might already exist.'));case 3:return e.a(2,{result:a})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),MT={type:"createLorebookNode",label:"Create Lorebook",category:"Lorebook",component:h$,dataSchema:AT,currentVersion:1,initialData:{worldName:"My Lorebook"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"worldName",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.LOREBOOK_NAME}]},validate:j$(T$("worldName","Lorebook Name is required.")),execute:IT,meta:{fields:[{id:"worldName",label:"Lorebook Name",component:j,props:{type:"text"}}]}};function DT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return RT(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(RT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,RT(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,RT(d,"constructor",u),RT(u,"constructor",l),l.displayName="GeneratorFunction",RT(u,o,"GeneratorFunction"),RT(d),RT(d,o,"Generator"),RT(d,r,function(){return this}),RT(d,"toString",function(){return"[object Generator]"}),(DT=function(){return{w:i,m:f}})()}function RT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}RT=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){RT(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},RT(e,t,n,r)}function QT(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(MT);var zT=j_({profileId:tk().optional(),startMessageId:Hk().optional(),endMessageId:Hk().optional(),ignoreCharacterFields:i_().default(!1),ignoreAuthorNote:i_().default(!1),ignoreWorldInfo:i_().default(!1),_version:Hk().optional()}),LT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){QT(i,r,o,a,s,"next",e)}function s(e){QT(i,r,o,a,s,"throw",e)}a(void 0)})}}(DT().m(function e(t,n,r){var o,i,a,s,l;return DT().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=zT.parse(t.data),a=jE(n,i,"profileId")){e.n=1;break}throw new Error("Profile ID not provided.");case 1:return s={startMessageId:jE(n,i,"startMessageId"),endMessageId:jE(n,i,"endMessageId"),ignoreCharacterFields:jE(n,i,"ignoreCharacterFields"),ignoreAuthorNote:jE(n,i,"ignoreAuthorNote"),ignoreWorldInfo:jE(n,i,"ignoreWorldInfo")},e.n=2,o.getBaseMessagesForProfile(a,s);case 2:return l=e.v,e.a(2,{result:l})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),ZT={type:"createMessagesNode",label:"Create Messages",category:"API Request",component:h$,dataSchema:zT,currentVersion:1,initialData:{profileId:"",ignoreCharacterFields:!1,ignoreAuthorNote:!1,ignoreWorldInfo:!1},handles:{inputs:[{id:"main",type:mE.ANY},{id:"profileId",type:mE.PROFILE_ID},{id:"startMessageId",type:mE.NUMBER},{id:"endMessageId",type:mE.NUMBER},{id:"ignoreCharacterFields",type:mE.BOOLEAN},{id:"ignoreAuthorNote",type:mE.BOOLEAN},{id:"ignoreWorldInfo",type:mE.BOOLEAN}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.MESSAGES}]},validate:j$(T$("profileId","Connection Profile is required.")),execute:LT,meta:{fields:function(e){return[{id:"profileId",label:"Connection Profile",component:te,props:{initialSelectedProfileId:null==e?void 0:e.profileId},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{profileId:(null==e?void 0:e.id)||""})}},{id:"startMessageId",label:"Start Message ID (Optional)",component:j,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}},{id:"endMessageId",label:"End Message ID (Optional)",component:j,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}},{id:"ignoreCharacterFields",label:"Ignore Character Fields",component:j,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}},{id:"ignoreAuthorNote",label:"Ignore Author Note",component:j,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}},{id:"ignoreWorldInfo",label:"Ignore World Info",component:j,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}}]}}};$E.register(ZT);const FT={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let UT;const VT=new Uint8Array(16);const GT=[];for(let e=0;e<256;++e)GT.push((e+256).toString(16).slice(1));function BT(e,t=0){return(GT[e[t+0]]+GT[e[t+1]]+GT[e[t+2]]+GT[e[t+3]]+"-"+GT[e[t+4]]+GT[e[t+5]]+"-"+GT[e[t+6]]+GT[e[t+7]]+"-"+GT[e[t+8]]+GT[e[t+9]]+"-"+GT[e[t+10]]+GT[e[t+11]]+GT[e[t+12]]+GT[e[t+13]]+GT[e[t+14]]+GT[e[t+15]]).toLowerCase()}function XT(e,t,n){const r=(e=e||{}).random??e.rng?.()??function(){if(!UT){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");UT=crypto.getRandomValues.bind(crypto)}return UT(VT)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return BT(r)}const YT=function(e,t,n){return!FT.randomUUID||t||e?XT(e,t,n):FT.randomUUID()};function WT(){return YT()}var qT=function(e,t){return a$(e).has(t)};function HT(e){return HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HT(e)}function KT(e){return function(e){if(Array.isArray(e))return JT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return JT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JT(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(t){nC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=HT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rC=function(e){var t=e.nodeId,n=e.msg,r=e.onUpdate,o=e.onRemove,i=qT(t,"".concat(n.id,"_role")),a=qT(t,n.id);return(0,E.jsxs)("div",{style:{border:"1px solid #555",padding:"5px",borderRadius:"4px"},children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[(0,E.jsxs)("div",{style:{position:"relative",flex:1,marginRight:"10px"},children:[(0,E.jsx)(Qd,{type:"target",position:Sl.Left,id:"".concat(n.id,"_role"),style:{top:"50%",transform:"translateY(-50%)"}}),i?(0,E.jsx)("span",{style:{marginLeft:"10px",fontSize:"10px",color:"#888"},children:"Role from connection"}):(0,E.jsxs)(N,{className:"nodrag",value:n.role,onChange:function(e){return r(n.id,"role",e.target.value)},children:[(0,E.jsx)("option",{value:"system",children:"system"}),(0,E.jsx)("option",{value:"user",children:"user"}),(0,E.jsx)("option",{value:"assistant",children:"assistant"})]})]}),(0,E.jsx)(C,{onClick:function(){return o(n.id)},children:"Remove"})]}),(0,E.jsxs)("div",{style:{position:"relative"},children:[(0,E.jsx)(Qd,{type:"target",position:Sl.Left,id:n.id,style:{top:"50%",transform:"translateY(-50%)"}}),a?(0,E.jsx)("span",{style:{fontSize:"10px",color:"#888"},children:"Content from connection"}):(0,E.jsx)(A,{className:"nodrag nowheel",value:n.content,onChange:function(e){return r(n.id,"content",e.target.value)},rows:3,style:{width:"100%"}})]})]})};function oC(e){return oC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oC(e)}function iC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return aC(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(aC(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,aC(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,aC(d,"constructor",u),aC(u,"constructor",l),l.displayName="GeneratorFunction",aC(u,o,"GeneratorFunction"),aC(d),aC(d,o,"Generator"),aC(d,r,function(){return this}),aC(d,"toString",function(){return"[object Generator]"}),(iC=function(){return{w:i,m:f}})()}function aC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}aC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){aC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},aC(e,t,n,r)}function sC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=oC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oC(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lC(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var uC=j_({messages:$_(j_({id:tk(),role:q_(["system","user","assistant"]),content:tk()})),_version:Hk().optional()}),cC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){lC(i,r,o,a,s,"next",e)}function s(e){lC(i,r,o,a,s,"throw",e)}a(void 0)})}}(iC().m(function e(t,n){var r,o;return iC().w(function(e){for(;;)if(0===e.n)return r=uC.parse(t.data),o=r.messages.map(function(e){var t=e.id,r=e.role,o=e.content;return{role:jE(n,sC({},"".concat(t,"_role"),r),"".concat(t,"_role")),content:jE(n,sC({},t,o),t)}}),e.a(2,{result:o})},e)}));return function(t,n){return e.apply(this,arguments)}}(),dC={type:"customMessageNode",label:"Custom Message",category:"API Request",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r);if(!o||!a)return null;var s=function(e,n,r){var a=o.messages.map(function(t){return t.id===e?tC(tC({},t),{},nC({},n,r)):t});i(t,{messages:a})},l=function(e){var n=o.messages.filter(function(t){return t.id!==e});i(t,{messages:n})};return(0,E.jsxs)(JE,{id:t,title:"Custom Messages",selected:n,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(o.messages||[]).map(function(e){return(0,E.jsx)(rC,{nodeId:t,msg:e,onUpdate:s,onRemove:l},e.id)}),(0,E.jsx)(C,{className:"nodrag",onClick:function(){var e={id:WT(),role:"user",content:""};i(t,{messages:[].concat(KT(o.messages||[]),[e])})},style:{marginTop:"5px"},children:"Add Message"})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:uC,currentVersion:1,initialData:{messages:[{id:WT(),role:"system",content:"You are a helpful assistant."}]},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.MESSAGES}]},execute:cC,getDynamicHandles:function(e){return{inputs:(e.data.messages||[]).flatMap(function(e){return[{id:e.id,type:mE.STRING},{id:"".concat(e.id,"_role"),type:mE.STRING}]}),outputs:[]}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("input"===n&&t){var o=t.endsWith("_role")?t.slice(0,-5):t;if(r.data.messages.some(function(e){return e.id===o}))return mE.STRING}}};function fC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return hC(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(hC(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,hC(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,hC(d,"constructor",u),hC(u,"constructor",l),l.displayName="GeneratorFunction",hC(u,o,"GeneratorFunction"),hC(d),hC(d,o,"Generator"),hC(d,r,function(){return this}),hC(d,"toString",function(){return"[object Generator]"}),(fC=function(){return{w:i,m:f}})()}function hC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}hC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){hC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},hC(e,t,n,r)}function pC(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(dC);var mC=j_({format:tk().optional(),_version:Hk().optional()});function gC(e){return String(e).padStart(2,"0")}function vC(e,t){var n=e.getFullYear(),r=e.getMonth()+1,o=e.getDate(),i=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l={YYYY:String(n),yyyy:String(n),YY:String(n).slice(-2),MM:gC(r),M:String(r),DD:gC(o),D:String(o),HH:gC(i),H:String(i),mm:gC(a),m:String(a),ss:gC(s),s:String(s)};return t.replace(/YYYY|yyyy|YY|MM|M|DD|D|HH|H|mm|m|ss|s/g,function(e){return l[e]})}var yC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){pC(i,r,o,a,s,"next",e)}function s(e){pC(i,r,o,a,s,"throw",e)}a(void 0)})}}(fC().m(function e(t,n){var r,o,i;return fC().w(function(e){for(;;)if(0===e.n)return r=mC.parse(t.data),o=new Date,i=jE(n,r,"format"),e.a(2,{iso:o.toISOString(),timestamp:o.getTime(),year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate(),hour:o.getHours(),minute:o.getMinutes(),second:o.getSeconds(),formatted:i?vC(o,i):o.toISOString()})},e)}));return function(t,n){return e.apply(this,arguments)}}(),bC={type:"dateTimeNode",label:"Date/Time",category:"Utility",component:h$,dataSchema:mC,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY},{id:"format",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"iso",type:mE.STRING},{id:"formatted",type:mE.STRING},{id:"timestamp",type:mE.NUMBER},{id:"year",type:mE.NUMBER},{id:"month",type:mE.NUMBER},{id:"day",type:mE.NUMBER},{id:"hour",type:mE.NUMBER},{id:"minute",type:mE.NUMBER},{id:"second",type:mE.NUMBER}]},execute:yC,meta:{fields:[{id:"format",label:"Format (Optional)",component:j,props:{placeholder:"Default: ISO String",type:"text"}}]}};function OC(e){return OC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OC(e)}function wC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return SC(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(SC(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,SC(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,SC(d,"constructor",u),SC(u,"constructor",l),l.displayName="GeneratorFunction",SC(u,o,"GeneratorFunction"),SC(d),SC(d,o,"Generator"),SC(d,r,function(){return this}),SC(d,"toString",function(){return"[object Generator]"}),(wC=function(){return{w:i,m:f}})()}function SC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}SC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){SC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},SC(e,t,n,r)}function xC(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(t){PC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=OC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OC(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$E.register(bC);var EC=j_(_C(_C({},{description:tk().optional(),first_mes:tk().optional(),scenario:tk().optional(),personality:tk().optional(),mes_example:tk().optional()}),{},{characterAvatar:tk().default(""),_version:Hk().optional()})),$C=j_({name:tk().describe("The character's name."),avatar:tk().describe("The character's avatar filename."),description:tk().describe("The character's description."),first_mes:tk().describe("The character's first message."),scenario:tk().describe("The scenario."),personality:tk().describe("The character's personality."),mes_example:tk().describe("Example messages."),tags:$_(tk()).describe("A list of tags.")}),TC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){xC(i,r,o,a,s,"next",e)}function s(e){xC(i,r,o,a,s,"throw",e)}a(void 0)})}}(wC().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h;return wC().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=EC.parse(t.data),a=jE(n,i,"characterAvatar")){e.n=1;break}throw new Error("Character avatar is required.");case 1:if(s=o.getSillyTavernContext(),l=s.characters.find(function(e){return e.avatar===a}),l){e.n=2;break}throw new Error('Character with avatar "'.concat(a,'" not found.'));case 2:if(u={avatar:l.avatar},c=!1,["description","first_mes","scenario","personality","mes_example"].forEach(function(e){var t=jE(n,i,e);(void 0!==n[e]||t&&""!==t.trim())&&(u[e]=t,c=!0)}),c){e.n=3;break}return delete(f=structuredClone(l)).json_data,null===(d=f.data)||void 0===d||delete d.json_data,e.a(2,_C(_C({},f),{},{result:f}));case 3:return e.n=4,o.saveCharacter(u);case 4:return delete(h=_C(_C({},structuredClone(l)),u)).json_data,h.data&&delete h.data.json_data,e.a(2,_C(_C({},h),{},{result:h}))}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),CC={type:"editCharacterNode",label:"Edit Character",category:"Character",component:h$,dataSchema:EC,currentVersion:2,initialData:{characterAvatar:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"characterAvatar",type:mE.CHARACTER_AVATAR},{id:"description",type:mE.STRING},{id:"first_mes",type:mE.STRING},{id:"scenario",type:mE.STRING},{id:"personality",type:mE.STRING},{id:"mes_example",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.OBJECT,schema:$C},{id:"name",type:mE.STRING},{id:"description",type:mE.STRING},{id:"first_mes",type:mE.STRING},{id:"scenario",type:mE.STRING},{id:"personality",type:mE.STRING},{id:"mes_example",type:mE.STRING},{id:"tags",type:mE.OBJECT,schema:$_(tk())}]},validate:j$(T$("characterAvatar","Character to Edit is required.")),execute:TC,meta:{fields:function(){var e=SillyTavern.getContext().characters.map(function(e){return{value:e.avatar,label:e.name}});return[{id:"characterAvatar",label:"Character to Edit",component:Kn,props:{items:e,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}},{id:"description",label:"Description",component:A,props:{rows:2,placeholder:"Leave blank to not change"}},{id:"first_mes",label:"First Message",component:A,props:{rows:2,placeholder:"Leave blank to not change"}},{id:"scenario",label:"Scenario",component:A,props:{rows:2,placeholder:"Leave blank to not change"}},{id:"personality",label:"Personality",component:A,props:{rows:2,placeholder:"Leave blank to not change"}},{id:"mes_example",label:"Message Examples",component:A,props:{rows:2,placeholder:"Leave blank to not change"}}]}}};function jC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return NC(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(NC(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,NC(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,NC(d,"constructor",u),NC(u,"constructor",l),l.displayName="GeneratorFunction",NC(u,o,"GeneratorFunction"),NC(d),NC(d,o,"Generator"),NC(d,r,function(){return this}),NC(d,"toString",function(){return"[object Generator]"}),(jC=function(){return{w:i,m:f}})()}function NC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}NC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){NC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},NC(e,t,n,r)}function AC(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(CC);var IC=j_({messageId:Hk().optional(),message:tk().optional(),displayText:tk().optional(),removeDisplayText:i_().optional(),_version:Hk().optional()}),MC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){AC(i,r,o,a,s,"next",e)}function s(e){AC(i,r,o,a,s,"throw",e)}a(void 0)})}}(jC().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p;return jC().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=IC.parse(t.data),void 0!==(a=jE(n,i,"messageId"))){e.n=1;break}throw new Error("Message ID is required.");case 1:if(s=o.getSillyTavernContext(),l=s.chat,u=l[a]){e.n=2;break}throw new Error("Message with ID ".concat(a," not found."));case 2:if(c=!1,d=jE(n,i,"message"),f=jE(n,i,"displayText"),h=jE(n,i,"removeDisplayText"),d&&u.mes!==d&&(u.mes=d,c=!0),p=void 0!==n.displayText,h?u.extra&&void 0!==u.extra.display_text&&(delete u.extra.display_text,c=!0):(p||f&&""!==f.trim())&&(u.extra||(u.extra={}),u.extra.display_text!==f&&(u.extra.display_text=f,c=!0)),!c){e.n=3;break}return o.st_updateMessageBlock(a,u),e.n=3,o.saveChat();case 3:return e.a(2,{messageObject:structuredClone(u),message:u.mes})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),DC={type:"editChatMessageNode",label:"Edit Chat Message",category:"Chat",component:h$,dataSchema:IC,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY},{id:"messageId",type:mE.NUMBER},{id:"message",type:mE.STRING},{id:"displayText",type:mE.STRING},{id:"removeDisplayText",type:mE.BOOLEAN}],outputs:[{id:"main",type:mE.ANY},{id:"messageObject",type:mE.OBJECT,schema:yT},{id:"message",type:mE.STRING}]},validate:j$(T$("messageId","Message ID is required.")),execute:MC,meta:{fields:[{id:"messageId",label:"Message ID",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"message",label:"New Message Content",component:A,props:{rows:2,placeholder:"(Optional) Leave blank to not change."}},{id:"displayText",label:"Display Text",component:A,props:{rows:2,placeholder:"(Optional) Overrides display text."}},{id:"removeDisplayText",label:"Remove Display Text",component:j,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}}]}};function RC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return QC(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(QC(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,QC(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,QC(d,"constructor",u),QC(u,"constructor",l),l.displayName="GeneratorFunction",QC(u,o,"GeneratorFunction"),QC(d),QC(d,o,"Generator"),QC(d,r,function(){return this}),QC(d,"toString",function(){return"[object Generator]"}),(RC=function(){return{w:i,m:f}})()}function QC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}QC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){QC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},QC(e,t,n,r)}function zC(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function LC(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){zC(i,r,o,a,s,"next",e)}function s(e){zC(i,r,o,a,s,"throw",e)}a(void 0)})}}$E.register(DC);var ZC=j_({worldName:tk().optional(),entryUid:Hk().optional(),key:tk().optional(),content:tk().optional(),comment:tk().optional(),disable:i_().optional(),_version:Hk().optional()}),FC=function(){var e=LC(RC().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p;return RC().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=ZC.parse(t.data),a=jE(n,i,"worldName"),s=jE(n,i,"entryUid"),a){e.n=1;break}throw new Error("World name is required to find the entry.");case 1:if(void 0!==s){e.n=2;break}throw new Error("Entry UID is required to identify the entry to edit.");case 2:return e.n=3,o.getWorldInfos(["all"]);case 3:if(l=e.v,u=l[a]){e.n=4;break}throw new Error('Lorebook "'.concat(a,'" not found.'));case 4:if(c=u.find(function(e){return e.uid===s})){e.n=5;break}throw new Error('Entry with UID "'.concat(s,'" not found in "').concat(a,'".'));case 5:if(d=!1,["key","content","comment"].forEach(function(e){var t=jE(n,i,e);void 0!==n[e]?("key"===e?c.key=String(t).split(",").map(function(e){return e.trim()}):c[e]=String(t),d=!0):t&&("key"===e?c.key=t.split(",").map(function(e){return e.trim()}):c[e]=t,d=!0)}),f=jE(n,i,"disable"),(void 0!==n.disable||void 0!==i.disable)&&(h=Boolean(f),c.disable!==h&&(c.disable=h,d=!0)),d){e.n=6;break}return e.a(2,{result:structuredClone(c)});case 6:return e.n=7,o.applyWorldInfoEntry({entry:c,selectedWorldName:a,operation:"update"});case 7:return p=e.v,e.a(2,{result:p.entry})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),UC={type:"editLorebookEntryNode",label:"Edit Lorebook Entry",category:"Lorebook",component:wT,dataSchema:ZC,currentVersion:1,initialData:{worldName:"",entryUid:void 0,disable:void 0},handles:{inputs:[{id:"main",type:mE.ANY},{id:"worldName",type:mE.LOREBOOK_NAME},{id:"entryUid",type:mE.NUMBER},{id:"key",type:mE.STRING},{id:"content",type:mE.STRING},{id:"comment",type:mE.STRING},{id:"disable",type:mE.BOOLEAN}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.OBJECT,schema:gT}]},validate:j$(T$("worldName","Lorebook Name is required."),T$("entryUid","Entry to Edit is required.")),execute:FC,meta:{fields:function(){var e=LC(RC().m(function e(t){var n,r,o;return RC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,kr(["all"]);case 1:return n=e.v,r=Object.keys(n).map(function(e){return{value:e,label:e}}),o=null!=t&&t.worldName&&n[t.worldName]?n[t.worldName].map(function(e){return{value:String(e.uid),label:e.comment||"Entry UID: ".concat(e.uid)}}):[],e.a(2,[p$({id:"worldName",label:"Lorebook Name",component:Kn,props:{items:r,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{worldName:e[0],entryUid:void 0})},formatValue:function(e){return[null!=e?e:""]}}),p$({id:"entryUid",label:"Entry to Edit",component:Kn,props:{items:o,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0,disabled:!(null!=t&&t.worldName)},getValueFromEvent:function(e){return Number(e[0])},formatValue:function(e){return[String(null!=e?e:"")]}}),p$({id:"key",label:"New Keys (comma-separated)",component:j,props:{type:"text",placeholder:"Leave blank to not change"}}),p$({id:"comment",label:"New Comment (Title)",component:j,props:{type:"text",placeholder:"Leave blank to not change"}}),p$({id:"content",label:"New Content",component:A,props:{rows:2,placeholder:"Leave blank to not change"}}),p$({id:"disable",label:"New Status",component:N,options:[{value:"",label:"Don't Change"},{value:"false",label:"Enabled"},{value:"true",label:"Disabled"}],getValueFromEvent:function(e){return""===e.target.value?void 0:"true"===e.target.value},formatValue:function(e){return void 0===e?"":String(e)}})])}},e)}));return function(t){return e.apply(this,arguments)}}()}};function VC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return GC(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(GC(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,GC(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,GC(d,"constructor",u),GC(u,"constructor",l),l.displayName="GeneratorFunction",GC(u,o,"GeneratorFunction"),GC(d),GC(d,o,"Generator"),GC(d,r,function(){return this}),GC(d,"toString",function(){return"[object Generator]"}),(VC=function(){return{w:i,m:f}})()}function GC(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}GC=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){GC(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},GC(e,t,n,r)}function BC(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(UC);var XC=Symbol("FlowTerminationSentinel"),YC=j_({_version:Hk().optional()}),WC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){BC(i,r,o,a,s,"next",e)}function s(e){BC(i,r,o,a,s,"throw",e)}a(void 0)})}}(VC().m(function e(){return VC().w(function(e){for(;;)if(0===e.n)return e.a(2,XC)},e)}));return function(){return e.apply(this,arguments)}}(),qC={type:"endNode",label:"End Flow",category:"Logic",component:$$,dataSchema:YC,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[]},execute:WC,meta:{description:"Execution stops here."}};function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HC.apply(null,arguments)}$E.register(qC);let KC=[],JC=[];function ej(e){if(e<768)return!1;for(let t=0,n=KC.length;;){let r=t+n>>1;if(e<KC[r])n=r;else{if(!(e>=JC[r]))return!0;t=r+1}if(t==n)return!1}}function tj(e){return e>=127462&&e<=127487}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,n=0;t<e.length;t++)(t%2?JC:KC).push(n+=e[t])})();function nj(e,t,n=!0,r=!0){return(n?rj:oj)(e,t,r)}function rj(e,t,n){if(t==e.length)return t;t&&aj(e.charCodeAt(t))&&sj(e.charCodeAt(t-1))&&t--;let r=ij(e,t);for(t+=lj(r);t<e.length;){let o=ij(e,t);if(8205==r||8205==o||n&&ej(o))t+=lj(o),r=o;else{if(!tj(o))break;{let n=0,r=t-2;for(;r>=0&&tj(ij(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function oj(e,t,n){for(;t>0;){let r=rj(e,t-2,n);if(r<t)return r;t--}return 0}function ij(e,t){let n=e.charCodeAt(t);if(!sj(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return aj(r)?r-56320+(n-55296<<10)+65536:n}function aj(e){return e>=56320&&e<57344}function sj(e){return e>=55296&&e<56320}function lj(e){return e<65536?1:2}class uj{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=yj(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),dj.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=yj(this,e,t);let n=[];return this.decompose(e,t,n,0),dj.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new pj(this),o=new pj(e);for(let e=t,i=t;;){if(r.next(e),o.next(e),e=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(i+=r.value.length,r.done||i>=n)return!0}}iter(e=1){return new pj(this,e)}iterRange(e,t=this.length){return new mj(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new gj(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new cj(e):dj.from(cj.split(e,[])):uj.empty}}class cj extends uj{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let o=0;;o++){let i=this.text[o],a=r+i.length;if((t?n:a)>=e)return new vj(r,a,n,i);r=a+1,n++}}decompose(e,t,n,r){let o=e<=0&&t>=this.length?this:new cj(hj(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=fj(o.text,e.text.slice(),0,o.length);if(t.length<=32)n.push(new cj(t,e.length+o.length));else{let e=t.length>>1;n.push(new cj(t.slice(0,e)),new cj(t.slice(e)))}}else n.push(o)}replace(e,t,n){if(!(n instanceof cj))return super.replace(e,t,n);[e,t]=yj(this,e,t);let r=fj(this.text,fj(n.text,hj(this.text,0,e)),t),o=this.length+n.length-(t-e);return r.length<=32?new cj(r,o):dj.from(cj.split(r,[]),o)}sliceString(e,t=this.length,n="\n"){[e,t]=yj(this,e,t);let r="";for(let o=0,i=0;o<=t&&i<this.text.length;i++){let a=this.text[i],s=o+a.length;o>e&&i&&(r+=n),e<s&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=s+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let o of e)n.push(o),r+=o.length+1,32==n.length&&(t.push(new cj(n,r)),n=[],r=-1);return r>-1&&t.push(new cj(n,r)),t}}class dj extends uj{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let o=0;;o++){let i=this.children[o],a=r+i.length,s=n+i.lines-1;if((t?s:a)>=e)return i.lineInner(e,t,n,r);r=a+1,n=s+1}}decompose(e,t,n,r){for(let o=0,i=0;i<=t&&o<this.children.length;o++){let a=this.children[o],s=i+a.length;if(e<=s&&t>=i){let o=r&((i<=e?1:0)|(s>=t?2:0));i>=e&&s<=t&&!o?n.push(a):a.decompose(e-i,t-i,n,o)}i=s+1}}replace(e,t,n){if([e,t]=yj(this,e,t),n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let i=this.children[r],a=o+i.length;if(e>=o&&t<=a){let s=i.replace(e-o,t-o,n),l=this.lines-i.lines+s.lines;if(s.lines<l>>4&&s.lines>l>>6){let o=this.children.slice();return o[r]=s,new dj(o,this.length-(t-e)+n.length)}return super.replace(o,a,s)}o=a+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){[e,t]=yj(this,e,t);let r="";for(let o=0,i=0;o<this.children.length&&i<=t;o++){let a=this.children[o],s=i+a.length;i>e&&o&&(r+=n),e<s&&t>i&&(r+=a.sliceString(e-i,t-i,n)),i=s+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof dj))return 0;let n=0,[r,o,i,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==i||o==a)return n;let s=this.children[r],l=e.children[o];if(s!=l)return n+s.scanIdentical(l,t);n+=s.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new cj(n,t)}let r=Math.max(32,n>>5),o=r<<1,i=r>>1,a=[],s=0,l=-1,u=[];function c(e){let t;if(e.lines>o&&e instanceof dj)for(let t of e.children)c(t);else e.lines>i&&(s>i||!s)?(d(),a.push(e)):e instanceof cj&&s&&(t=u[u.length-1])instanceof cj&&e.lines+t.lines<=32?(s+=e.lines,l+=e.length+1,u[u.length-1]=new cj(t.text.concat(e.text),t.length+1+e.length)):(s+e.lines>r&&d(),s+=e.lines,l+=e.length+1,u.push(e))}function d(){0!=s&&(a.push(1==u.length?u[0]:dj.from(u,l)),l=-1,s=u.length=0)}for(let t of e)c(t);return d(),1==a.length?a[0]:new dj(a,t)}}function fj(e,t,n=0,r=1e9){for(let o=0,i=0,a=!0;i<e.length&&o<=r;i++){let s=e[i],l=o+s.length;l>=n&&(l>r&&(s=s.slice(0,r-o)),o<n&&(s=s.slice(n-o)),a?(t[t.length-1]+=s,a=!1):t.push(s)),o=l+1}return t}function hj(e,t,n){return fj(e,[""],t,n)}uj.empty=new cj([""],0);class pj{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof cj?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],o=this.offsets[n],i=o>>1,a=r instanceof cj?r.text.length:r.children.length;if(i==(t>0?a:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&o)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof cj){let o=r.text[i+(t<0?-1:0)];if(this.offsets[n]+=t,o.length>Math.max(0,e))return this.value=0==e?o:t>0?o.slice(e):o.slice(0,o.length-e),this;e-=o.length}else{let o=r.children[i+(t<0?-1:0)];e>o.length?(e-=o.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(o),this.offsets.push(t>0?1:(o instanceof cj?o.text.length:o.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class mj{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new pj(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class gj{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(uj.prototype[Symbol.iterator]=function(){return this.iter()},pj.prototype[Symbol.iterator]=mj.prototype[Symbol.iterator]=gj.prototype[Symbol.iterator]=function(){return this});class vj{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function yj(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}function bj(e,t,n=!0,r=!0){return nj(e,t,n,r)}function Oj(e,t){let n=e.charCodeAt(t);if(!(r=n,r>=55296&&r<56320&&t+1!=e.length))return n;var r;let o=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(o)?o-56320+(n-55296<<10)+65536:n}function wj(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Sj(e){return e<65536?1:2}const xj=/\r\n?|\n/;var kj=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(kj||(kj={}));class _j{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let o=this.sections[t++],i=this.sections[t++];i<0?(e(n,r,o),r+=o):r+=i,n+=o}}iterChangedRanges(e,t=!1){Tj(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new _j(e)}composeDesc(e){return this.empty?e:e.empty?this:jj(this,e)}mapDesc(e,t=!1){return e.empty?this:Cj(this,e,t)}mapPos(e,t=-1,n=kj.Simple){let r=0,o=0;for(let i=0;i<this.sections.length;){let a=this.sections[i++],s=this.sections[i++],l=r+a;if(s<0){if(l>e)return o+(e-r);o+=a}else{if(n!=kj.Simple&&l>=e&&(n==kj.TrackDel&&r<e&&l>e||n==kj.TrackBefore&&r<e||n==kj.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!a)return e==r||t<0?o:o+s;o+=s}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let o=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&o>=e)return!(r<e&&o>t)||"cover";r=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeDesc");return new _j(e)}static create(e){return new _j(e)}}class Pj extends _j{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Tj(this,(t,n,r,o,i)=>e=e.replace(r,r+(n-t),i),!1),e}mapDesc(e,t=!1){return Cj(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,o=0;r<t.length;r+=2){let i=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=i;let s=r>>1;for(;n.length<s;)n.push(uj.empty);n.push(i?e.slice(o,o+i):uj.empty)}o+=i}return new Pj(t,n)}compose(e){return this.empty?e:e.empty?this:jj(this,e,!0)}map(e,t=!1){return e.empty?this:Cj(this,e,t,!0)}iterChanges(e,t=!1){Tj(this,e,t)}get desc(){return _j.create(this.sections)}filter(e){let t=[],n=[],r=[],o=new Nj(this);e:for(let i=0,a=0;;){let s=i==e.length?1e9:e[i++];for(;a<s||a==s&&0==o.len;){if(o.done)break e;let e=Math.min(o.len,s-a);Ej(r,e,-1);let i=-1==o.ins?-1:0==o.off?o.ins:0;Ej(t,e,i),i>0&&$j(n,t,o.text),o.forward(e),a+=e}let l=e[i++];for(;a<l;){if(o.done)break e;let e=Math.min(o.len,l-a);Ej(t,e,-1),Ej(r,e,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(e),a+=e}}return{changes:new Pj(t,n),filtered:_j.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],o=[],i=0,a=null;function s(e=!1){if(!e&&!r.length)return;i<t&&Ej(r,t-i,-1);let n=new Pj(r,o);a=a?a.compose(n.map(a)):n,r=[],o=[],i=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof Pj){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);s(),a=a?a.compose(l.map(a)):l}else{let{from:e,to:a=e,insert:u}=l;if(e>a||e<0||a>t)throw new RangeError(`Invalid change range ${e} to ${a} (in doc of length ${t})`);let c=u?"string"==typeof u?uj.of(u.split(n||xj)):u:uj.empty,d=c.length;if(e==a&&0==d)return;e<i&&s(),e>i&&Ej(r,e-i,-1),Ej(r,a-e,d),$j(o,r,c),i=a}}(e),s(!a),a}static empty(e){return new Pj(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let o=e[r];if("number"==typeof o)t.push(o,-1);else{if(!Array.isArray(o)||"number"!=typeof o[0]||o.some((e,t)=>t&&"string"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==o.length)t.push(o[0],0);else{for(;n.length<r;)n.push(uj.empty);n[r]=uj.of(o.slice(1)),t.push(o[0],n[r].length)}}}return new Pj(t,n)}static createSet(e,t){return new Pj(e,t)}}function Ej(e,t,n,r=!1){if(0==t&&n<=0)return;let o=e.length-2;o>=0&&n<=0&&n==e[o+1]?e[o]+=t:o>=0&&0==t&&0==e[o]?e[o+1]+=n:r?(e[o]+=t,e[o+1]+=n):e.push(t,n)}function $j(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(uj.empty);e.push(n)}}function Tj(e,t,n){let r=e.inserted;for(let o=0,i=0,a=0;a<e.sections.length;){let s=e.sections[a++],l=e.sections[a++];if(l<0)o+=s,i+=s;else{let u=o,c=i,d=uj.empty;for(;u+=s,c+=l,l&&r&&(d=d.append(r[a-2>>1])),!(n||a==e.sections.length||e.sections[a+1]<0);)s=e.sections[a++],l=e.sections[a++];t(o,u,i,c,d),o=u,i=c}}}function Cj(e,t,n,r=!1){let o=[],i=r?[]:null,a=new Nj(e),s=new Nj(t);for(let e=-1;;){if(a.done&&s.len||s.done&&a.len)throw new Error("Mismatched change set lengths");if(-1==a.ins&&-1==s.ins){let e=Math.min(a.len,s.len);Ej(o,e,-1),a.forward(e),s.forward(e)}else if(s.ins>=0&&(a.ins<0||e==a.i||0==a.off&&(s.len<a.len||s.len==a.len&&!n))){let t=s.len;for(Ej(o,s.ins,-1);t;){let n=Math.min(a.len,t);a.ins>=0&&e<a.i&&a.len<=n&&(Ej(o,0,a.ins),i&&$j(i,o,a.text),e=a.i),a.forward(n),t-=n}s.next()}else{if(!(a.ins>=0)){if(a.done&&s.done)return i?Pj.createSet(o,i):_j.create(o);throw new Error("Mismatched change set lengths")}{let t=0,n=a.len;for(;n;)if(-1==s.ins){let e=Math.min(n,s.len);t+=e,n-=e,s.forward(e)}else{if(!(0==s.ins&&s.len<n))break;n-=s.len,s.next()}Ej(o,t,e<a.i?a.ins:0),i&&e<a.i&&$j(i,o,a.text),e=a.i,a.forward(a.len-n)}}}}function jj(e,t,n=!1){let r=[],o=n?[]:null,i=new Nj(e),a=new Nj(t);for(let e=!1;;){if(i.done&&a.done)return o?Pj.createSet(r,o):_j.create(r);if(0==i.ins)Ej(r,i.len,0,e),i.next();else if(0!=a.len||a.done){if(i.done||a.done)throw new Error("Mismatched change set lengths");{let t=Math.min(i.len2,a.len),n=r.length;if(-1==i.ins){let n=-1==a.ins?-1:a.off?0:a.ins;Ej(r,t,n,e),o&&n&&$j(o,r,a.text)}else-1==a.ins?(Ej(r,i.off?0:i.len,t,e),o&&$j(o,r,i.textBit(t))):(Ej(r,i.off?0:i.len,a.off?0:a.ins,e),o&&!a.off&&$j(o,r,a.text));e=(i.ins>t||a.ins>=0&&a.len>t)&&(e||r.length>n),i.forward2(t),a.forward(t)}}else Ej(r,0,a.ins,e),o&&$j(o,r,a.text),a.next()}}class Nj{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?uj.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?uj.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Aj{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Aj(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ij.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ij.range(this.anchor,n)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Ij.range(e.anchor,e.head)}static create(e,t,n){return new Aj(e,t,n)}}class Ij{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ij.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Ij([this.main],0)}addRange(e,t=!0){return Ij.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,Ij.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ij(e.ranges.map(e=>Aj.fromJSON(e)),e.main)}static single(e,t=e){return new Ij([Ij.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=n:o.from<n)return Ij.normalized(e.slice(),t);n=o.to}return new Ij(e,t)}static cursor(e,t=0,n,r){return Aj.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!=r?r:16777215)<<6)}static range(e,t,n,r){let o=(null!=n?n:16777215)<<6|(null==r?7:Math.min(6,r));return t<e?Aj.create(t,e,48|o):Aj.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let n=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let i=o.from,a=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?Ij.range(a,i):Ij.range(i,a))}}return new Ij(e,t)}}function Mj(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Dj=0;class Rj{constructor(e,t,n,r,o){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=Dj++,this.default=e([]),this.extensions="function"==typeof o?o(this):o}get reader(){return this}static define(e={}){return new Rj(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:Qj),!!e.static,e.enables)}of(e){return new zj([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new zj(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new zj(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],n=>t(n.field(e)))}}function Qj(e,t){return e==t||e.length==t.length&&e.every((e,n)=>e===t[n])}class zj{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=Dj++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,o=this.id,i=e[o]>>1,a=2==this.type,s=!1,l=!1,u=[];for(let n of this.dependencies)"doc"==n?s=!0:"selection"==n?l=!0:1&(null!==(t=e[n.id])&&void 0!==t?t:1)||u.push(e[n.id]);return{create:e=>(e.values[i]=n(e),1),update(e,t){if(s&&t.docChanged||l&&(t.docChanged||t.selection)||Zj(e,u)){let t=n(e);if(a?!Lj(t,e.values[i],r):!r(t,e.values[i]))return e.values[i]=t,1}return 0},reconfigure:(e,t)=>{let s,l=t.config.address[o];if(null!=l){let o=nN(t,l);if(this.dependencies.every(n=>n instanceof Rj?t.facet(n)===e.facet(n):!(n instanceof Vj)||t.field(n,!1)==e.field(n,!1))||(a?Lj(s=n(e),o,r):r(s=n(e),o)))return e.values[i]=o,0}else s=n(e);return e.values[i]=s,1}}}}function Lj(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Zj(e,t){let n=!1;for(let r of t)1&tN(e,r)&&(n=!0);return n}function Fj(e,t,n){let r=n.map(t=>e[t.id]),o=n.map(e=>e.type),i=r.filter(e=>!(1&e)),a=e[t.id]>>1;function s(e){let n=[];for(let t=0;t<r.length;t++){let i=nN(e,r[t]);if(2==o[t])for(let e of i)n.push(e);else n.push(i)}return t.combine(n)}return{create(e){for(let t of r)tN(e,t);return e.values[a]=s(e),1},update(e,n){if(!Zj(e,i))return 0;let r=s(e);return t.compare(r,e.values[a])?0:(e.values[a]=r,1)},reconfigure(e,o){let i=Zj(e,r),l=o.config.facets[t.id],u=o.facet(t);if(l&&!i&&Qj(n,l))return e.values[a]=u,0;let c=s(e);return t.compare(c,u)?(e.values[a]=u,0):(e.values[a]=c,1)}}}const Uj=Rj.define({static:!0});class Vj{constructor(e,t,n,r,o){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Vj(Dj++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Uj).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(e.values[t]=o,1)},reconfigure:(e,n)=>{let r,o=e.facet(Uj),i=n.facet(Uj);return(r=o.find(e=>e.field==this))&&r!=i.find(e=>e.field==this)?(e.values[t]=r.create(e),1):null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,Uj.of({field:this,create:e})]}get extension(){return this}}const Gj=4,Bj=3,Xj=2,Yj=1;function Wj(e){return t=>new Hj(t,e)}const qj={highest:Wj(0),high:Wj(Yj),default:Wj(Xj),low:Wj(Bj),lowest:Wj(Gj)};class Hj{constructor(e,t){this.inner=e,this.prec=t}}class Kj{of(e){return new Jj(this,e)}reconfigure(e){return Kj.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Jj{constructor(e,t){this.compartment=e,this.inner=t}}class eN{constructor(e,t,n,r,o,i){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=i,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],o=Object.create(null),i=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],o=new Map;function i(e,a){let s=o.get(e);if(null!=s){if(s<=a)return;let t=r[s].indexOf(e);t>-1&&r[s].splice(t,1),e instanceof Jj&&n.delete(e.compartment)}if(o.set(e,a),Array.isArray(e))for(let t of e)i(t,a);else if(e instanceof Jj){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),i(r,a)}else if(e instanceof Hj)i(e.inner,e.prec);else if(e instanceof Vj)r[a].push(e),e.provides&&i(e.provides,a);else if(e instanceof zj)r[a].push(e),e.facet.extensions&&i(e.facet.extensions,Xj);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);i(t,a)}}return i(e,Xj),r.reduce((e,t)=>e.concat(t))}(e,t,i))n instanceof Vj?r.push(n):(o[n.facet.id]||(o[n.facet.id]=[])).push(n);let a=Object.create(null),s=[],l=[];for(let e of r)a[e.id]=l.length<<1,l.push(t=>e.slot(t));let u=null==n?void 0:n.config.facets;for(let e in o){let t=o[e],r=t[0].facet,i=u&&u[e]||[];if(t.every(e=>0==e.type))if(a[r.id]=s.length<<1|1,Qj(i,t))s.push(n.facet(r));else{let e=r.combine(t.map(e=>e.value));s.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(a[e.id]=s.length<<1|1,s.push(e.value)):(a[e.id]=l.length<<1,l.push(t=>e.dynamicSlot(t)));a[r.id]=l.length<<1,l.push(e=>Fj(e,r,t))}}let c=l.map(e=>e(a));return new eN(e,i,c,a,s,o)}}function tN(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let o=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|o}function nN(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const rN=Rj.define(),oN=Rj.define({combine:e=>e.some(e=>e),static:!0}),iN=Rj.define({combine:e=>e.length?e[0]:void 0,static:!0}),aN=Rj.define(),sN=Rj.define(),lN=Rj.define(),uN=Rj.define({combine:e=>!!e.length&&e[0]});class cN{constructor(e,t){this.type=e,this.value=t}static define(){return new dN}}class dN{of(e){return new cN(this,e)}}class fN{constructor(e){this.map=e}of(e){return new hN(this,e)}}class hN{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new hN(this.type,t)}is(e){return this.type==e}static define(e={}){return new fN(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}hN.reconfigure=hN.define(),hN.appendConfig=hN.define();class pN{constructor(e,t,n,r,o,i){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=i,this._doc=null,this._state=null,n&&Mj(n,t.newLength),o.some(e=>e.type==pN.time)||(this.annotations=o.concat(pN.time.of(Date.now())))}static create(e,t,n,r,o,i){return new pN(e,t,n,r,o,i)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(pN.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function mN(e,t){let n=[];for(let r=0,o=0;;){let i,a;if(r<e.length&&(o==t.length||t[o]>=e[r]))i=e[r++],a=e[r++];else{if(!(o<t.length))return n;i=t[o++],a=t[o++]}!n.length||n[n.length-1]<i?n.push(i,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function gN(e,t,n){var r;let o,i,a;return n?(o=t.changes,i=Pj.empty(t.changes.length),a=e.changes.compose(t.changes)):(o=t.changes.map(e.changes),i=e.changes.mapDesc(t.changes,!0),a=e.changes.compose(o)),{changes:a,selection:t.selection?t.selection.map(i):null===(r=e.selection)||void 0===r?void 0:r.map(o),effects:hN.mapEffects(e.effects,o).concat(hN.mapEffects(t.effects,i)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function vN(e,t,n){let r=t.selection,o=ON(t.annotations);return t.userEvent&&(o=o.concat(pN.userEvent.of(t.userEvent))),{changes:t.changes instanceof Pj?t.changes:Pj.of(t.changes||[],n,e.facet(iN)),selection:r&&(r instanceof Ij?r:Ij.single(r.anchor,r.head)),effects:ON(t.effects),annotations:o,scrollIntoView:!!t.scrollIntoView}}function yN(e,t,n){let r=vN(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(n=!1);let i=!!t[o].sequential;r=gN(r,vN(e,t[o],i?r.changes.newLength:e.doc.length),i)}let o=pN.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(lN),r=e;for(let o=n.length-1;o>=0;o--){let i=n[o](e);i&&Object.keys(i).length&&(r=gN(r,vN(t,i,e.changes.newLength),!0))}return r==e?e:pN.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(aN)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:mN(n,t))}if(!0!==n){let r,o;if(!1===n)o=e.changes.invertedDesc,r=Pj.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,o=t.filtered.mapDesc(t.changes).invertedDesc}e=pN.create(t,r,e.selection&&e.selection.map(o),hN.mapEffects(e.effects,o),e.annotations,e.scrollIntoView)}let r=t.facet(sN);for(let n=r.length-1;n>=0;n--){let o=r[n](e);e=o instanceof pN?o:Array.isArray(o)&&1==o.length&&o[0]instanceof pN?o[0]:yN(t,ON(o),!1)}return e}(o):o)}pN.time=cN.define(),pN.userEvent=cN.define(),pN.addToHistory=cN.define(),pN.remote=cN.define();const bN=[];function ON(e){return null==e?bN:Array.isArray(e)?e:[e]}var wN=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(wN||(wN={}));const SN=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let xN;try{xN=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function kN(e){return t=>{if(!/\S/.test(t))return wN.Space;if(function(e){if(xN)return xN.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||SN.test(n)))return!0}return!1}(t))return wN.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return wN.Word;return wN.Other}}class _N{constructor(e,t,n,r,o,i){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,i&&(i._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)tN(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return tN(this,n),nN(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return yN(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:o}=n;for(let t of e.effects)t.is(Kj.reconfigure)?(n&&(o=new Map,n.compartments.forEach((e,t)=>o.set(t,e)),n=null),o.set(t.value.compartment,t.value.extension)):t.is(hN.reconfigure)?(n=null,r=t.value):t.is(hN.appendConfig)&&(n=null,r=ON(r).concat(t.value));if(n)t=e.startState.values.slice();else{n=eN.resolve(r,o,this),t=new _N(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values}let i=e.startState.facet(oN)?e.newSelection:e.newSelection.asSingle();new _N(n,e.newDoc,i,t,(t,n)=>n.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Ij.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),o=[n.range],i=ON(n.effects);for(let n=1;n<t.ranges.length;n++){let a=e(t.ranges[n]),s=this.changes(a.changes),l=s.map(r);for(let e=0;e<n;e++)o[e]=o[e].map(l);let u=r.mapDesc(s,!0);o.push(a.range.map(u)),r=r.compose(l),i=hN.mapEffects(i,l).concat(hN.mapEffects(ON(a.effects),u))}return{changes:r,selection:Ij.create(o,t.mainIndex),effects:i}}changes(e=[]){return e instanceof Pj?e:Pj.of(e,this.doc.length,this.facet(_N.lineSeparator))}toText(e){return uj.of(e.split(this.facet(_N.lineSeparator)||xj))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(tN(this,t),nN(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Vj&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let o=n[t],i=e[t];r.push(o.init(e=>o.spec.fromJSON(i,e)))}return _N.create({doc:e.doc,selection:Ij.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=eN.resolve(e.extensions||[],new Map),n=e.doc instanceof uj?e.doc:uj.of((e.doc||"").split(t.staticFacet(_N.lineSeparator)||xj)),r=e.selection?e.selection instanceof Ij?e.selection:Ij.single(e.selection.anchor,e.selection.head):Ij.single(0);return Mj(r,n.length),t.staticFacet(oN)||(r=r.asSingle()),new _N(t,n,r,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(_N.tabSize)}get lineBreak(){return this.facet(_N.lineSeparator)||"\n"}get readOnly(){return this.facet(uN)}phrase(e,...t){for(let t of this.facet(_N.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let o of this.facet(rN))for(let i of o(this,t,n))Object.prototype.hasOwnProperty.call(i,e)&&r.push(i[e]);return r}charCategorizer(e){return kN(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),i=e-n,a=e-n;for(;i>0;){let e=bj(t,i,!1);if(o(t.slice(e,i))!=wN.Word)break;i=e}for(;a<r;){let e=bj(t,a);if(o(t.slice(a,e))!=wN.Word)break;a=e}return i==a?null:Ij.range(i+n,a+n)}}function PN(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let o=t[e],i=r[e];if(void 0===i)r[e]=o;else if(i===o||void 0===o);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](i,o)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}_N.allowMultipleSelections=oN,_N.tabSize=Rj.define({combine:e=>e.length?e[0]:4}),_N.lineSeparator=iN,_N.readOnly=uN,_N.phrases=Rj.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(n=>e[n]==t[n])}}),_N.languageData=rN,_N.changeFilter=aN,_N.transactionFilter=sN,_N.transactionExtender=lN,Kj.reconfigure=hN.define();class EN{eq(e){return this==e}range(e,t=e){return $N.create(e,t,this)}}EN.prototype.startSide=EN.prototype.endSide=0,EN.prototype.point=!1,EN.prototype.mapMode=kj.TrackDel;class $N{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new $N(e,t,n)}}function TN(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class CN{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let o=n?this.to:this.from;for(let i=r,a=o.length;;){if(i==a)return i;let r=i+a>>1,s=o[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==i)return s>=0?i:a;s>=0?a=r:i=r+1}}between(e,t,n,r){for(let o=this.findIndex(t,-1e9,!0),i=this.findIndex(n,1e9,!1,o);o<i;o++)if(!1===r(this.from[o]+e,this.to[o]+e,this.value[o]))return!1}map(e,t){let n=[],r=[],o=[],i=-1,a=-1;for(let s=0;s<this.value.length;s++){let l,u,c=this.value[s],d=this.from[s]+e,f=this.to[s]+e;if(d==f){let e=t.mapPos(d,c.startSide,c.mapMode);if(null==e)continue;if(l=u=e,c.startSide!=c.endSide&&(u=t.mapPos(d,c.endSide),u<l))continue}else if(l=t.mapPos(d,c.startSide),u=t.mapPos(f,c.endSide),l>u||l==u&&c.startSide>0&&c.endSide<=0)continue;(u-l||c.endSide-c.startSide)<0||(i<0&&(i=l),c.point&&(a=Math.max(a,u-l)),n.push(c),r.push(l-i),o.push(u-i))}return{mapped:n.length?new CN(r,o,n,a):null,pos:i}}}class jN{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new jN(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=e,i=e.filter;if(0==t.length&&!i)return this;if(n&&(t=t.slice().sort(TN)),this.isEmpty)return t.length?jN.of(t):this;let a=new IN(this,null,-1).goto(0),s=0,l=[],u=new NN;for(;a.value||s<t.length;)if(s<t.length&&(a.from-t[s].from||a.startSide-t[s].value.startSide)>=0){let e=t[s++];u.addInner(e.from,e.to,e.value)||l.push(e)}else 1==a.rangeIndex&&a.chunkIndex<this.chunk.length&&(s==t.length||this.chunkEnd(a.chunkIndex)<t[s].from)&&(!i||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!i||r>a.to||o<a.from||i(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||l.push($N.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!l.length?jN.empty:this.nextLayer.update({add:l,filter:i,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],a=this.chunk[o],s=e.touchesRange(i,i+a.length);if(!1===s)r=Math.max(r,a.maxPoint),t.push(a),n.push(e.mapPos(i));else if(!0===s){let{mapped:o,pos:s}=a.map(i,e);o&&(r=Math.max(r,o.maxPoint),t.push(o),n.push(s))}}let o=this.nextLayer.map(e);return 0==t.length?o:new jN(n,t,o||jN.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],i=this.chunk[r];if(t>=o&&e<=o+i.length&&!1===i.between(o,e-o,t-o,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return MN.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return MN.from(e).goto(t)}static compare(e,t,n,r,o=-1){let i=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=o),a=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=o),s=AN(i,a,n),l=new RN(i,s,o),u=new RN(a,s,o);n.iterGaps((e,t,n)=>QN(l,e,u,t,n,r)),n.empty&&0==n.length&&QN(l,0,u,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=999999999);let o=e.filter(e=>!e.isEmpty&&t.indexOf(e)<0),i=t.filter(t=>!t.isEmpty&&e.indexOf(t)<0);if(o.length!=i.length)return!1;if(!o.length)return!0;let a=AN(o,i),s=new RN(o,a,0).goto(n),l=new RN(i,a,0).goto(n);for(;;){if(s.to!=l.to||!zN(s.active,l.active)||s.point&&(!l.point||!s.point.eq(l.point)))return!1;if(s.to>r)return!0;s.next(),l.next()}}static spans(e,t,n,r,o=-1){let i=new RN(e,null,o).goto(t),a=t,s=i.openStart;for(;;){let e=Math.min(i.to,n);if(i.point){let n=i.activeForPoint(i.to),o=i.pointFrom<t?n.length+1:i.point.startSide<0?n.length:Math.min(n.length,s);r.point(a,e,i.point,n,o,i.pointRank),s=Math.min(i.openEnd(e),n.length)}else e>a&&(r.span(a,e,i.active,s),s=i.openEnd(e));if(i.to>n)return s+(i.point&&i.to>n?1:0);a=i.to,i.next()}}static of(e,t=!1){let n=new NN;for(let r of e instanceof $N?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(TN(t,r)>0)return e.slice().sort(TN);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return jN.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=jN.empty;r=r.nextLayer)t=new jN(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}jN.empty=new jN([],[],null,-1),jN.empty.nextLayer=jN.empty;class NN{finishChunk(e){this.chunks.push(new CN(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new NN)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(jN.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=jN.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function AN(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let o=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let i=r.get(e.chunk[t]);null==i||(n?n.mapPos(i):i)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(i,i+e.chunk[t].length))||o.add(e.chunk[t])}return o}class IN{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class MN{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let o=0;o<e.length;o++)for(let i=e[o];!i.isEmpty;i=i.nextLayer)i.maxPoint>=n&&r.push(new IN(i,t,n,o));return 1==r.length?r[0]:new MN(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)DN(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)DN(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),DN(this.heap,0)}}}function DN(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let o=e[r];if(r+1<e.length&&o.compare(e[r+1])>=0&&(o=e[r+1],r++),n.compare(o)<0)break;e[r]=n,e[t]=o,t=r}}class RN{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=MN.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){LN(this.active,e),LN(this.activeTo,e),LN(this.activeRank,e),this.minActive=FN(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;ZN(this.active,t,n),ZN(this.activeTo,t,r),ZN(this.activeRank,t,o),e&&ZN(e,t,this.cursor.from),this.minActive=FN(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&LN(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function QN(e,t,n,r,o,i){e.goto(t),n.goto(r);let a=r+o,s=r,l=r-t;for(;;){let t=e.to+l-n.to,r=t||e.endSide-n.endSide,o=r<0?e.to+l:n.to,u=Math.min(o,a);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&zN(e.activeForPoint(e.to),n.activeForPoint(n.to))||i.comparePoint(s,u,e.point,n.point):u>s&&!zN(e.active,n.active)&&i.compareRange(s,u,e.active,n.active),o>a)break;(t||e.openEnd!=n.openEnd)&&i.boundChange&&i.boundChange(o),s=o,r<=0&&e.next(),r>=0&&n.next()}}function zN(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function LN(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function ZN(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function FN(e,t){let n=-1,r=1e9;for(let o=0;o<t.length;o++)(t[o]-r||e[o].endSide-e[n].endSide)<0&&(n=o,r=t[o]);return n}function UN(e,t,n=e.length){let r=0;for(let o=0;o<n&&o<e.length;)9==e.charCodeAt(o)?(r+=t-r%t,o++):(r++,o=bj(e,o));return r}function VN(e,t,n,r){for(let r=0,o=0;;){if(o>=t)return r;if(r==e.length)break;o+=9==e.charCodeAt(r)?n-o%n:1,r=bj(e,r)}return!0===r?-1:e.length}const GN="undefined"==typeof Symbol?"__":Symbol.for(""),BN="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),XN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class YN{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function o(e,t,i,a){let s=[],l=/^@(\w+)\b/.exec(e[0]),u=l&&"keyframes"==l[1];if(l&&null==t)return i.push(e[0]+";");for(let n in t){let a=t[n];if(/&/.test(n))o(n.split(/,\s*/).map(t=>e.map(e=>t.replace(/&/,e))).reduce((e,t)=>e.concat(t)),a,i);else if(a&&"object"==typeof a){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");o(r(n),a,s,u)}else null!=a&&s.push(n.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+a+";")}(s.length||u)&&i.push((!n||l||a?e:e.map(n)).join(", ")+" {"+s.join(" ")+"}")}for(let t in e)o(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=XN[GN]||1;return XN[GN]=e+1,""+e.toString(36)}static mount(e,t,n){let r=e[BN],o=n&&n.nonce;r?o&&r.setNonce(o):r=new qN(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let WN=new Map;class qN{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=WN.get(n);if(t)return e[BN]=t;this.sheet=new r.CSSStyleSheet,WN.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[BN]=this}mount(e,t){let n=this.sheet,r=0,o=0;for(let t=0;t<e.length;t++){let i=e[t],a=this.modules.indexOf(i);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),-1==a){if(this.modules.splice(o++,0,i),n)for(let e=0;e<i.rules.length;e++)n.insertRule(i.rules[e],r++)}else{for(;o<a;)r+=this.modules[o++].rules.length;r+=i.rules.length,o++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var HN={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},KN={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},JN="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),eA="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),tA=0;tA<10;tA++)HN[48+tA]=HN[96+tA]=String(tA);for(tA=1;tA<=24;tA++)HN[tA+111]="F"+tA;for(tA=65;tA<=90;tA++)HN[tA]=String.fromCharCode(tA+32),KN[tA]=String.fromCharCode(tA);for(var nA in HN)KN.hasOwnProperty(nA)||(KN[nA]=HN[nA]);let rA="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},oA="undefined"!=typeof document?document:{documentElement:{style:{}}};const iA=/Edge\/(\d+)/.exec(rA.userAgent),aA=/MSIE \d/.test(rA.userAgent),sA=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rA.userAgent),lA=!!(aA||sA||iA),uA=!lA&&/gecko\/(\d+)/i.test(rA.userAgent),cA=!lA&&/Chrome\/(\d+)/.exec(rA.userAgent),dA="webkitFontSmoothing"in oA.documentElement.style,fA=!lA&&/Apple Computer/.test(rA.vendor),hA=fA&&(/Mobile\/\w+/.test(rA.userAgent)||rA.maxTouchPoints>2);var pA={mac:hA||/Mac/.test(rA.platform),windows:/Win/.test(rA.platform),linux:/Linux|X11/.test(rA.platform),ie:lA,ie_version:aA?oA.documentMode||6:sA?+sA[1]:iA?+iA[1]:0,gecko:uA,gecko_version:uA?+(/Firefox\/(\d+)/.exec(rA.userAgent)||[0,0])[1]:0,chrome:!!cA,chrome_version:cA?+cA[1]:0,ios:hA,android:/Android\b/.test(rA.userAgent),webkit:dA,webkit_version:dA?+(/\bAppleWebKit\/(\d+)/.exec(rA.userAgent)||[0,0])[1]:0,safari:fA,safari_version:fA?+(/\bVersion\/(\d+(\.\d+)?)/.exec(rA.userAgent)||[0,0])[1]:0,tabSize:null!=oA.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function mA(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function gA(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function vA(e,t){if(!t.anchorNode)return!1;try{return gA(e,t.anchorNode)}catch(e){return!1}}function yA(e){return 3==e.nodeType?jA(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function bA(e,t,n,r){return!!n&&(SA(e,t,n,r,-1)||SA(e,t,n,r,1))}function OA(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function wA(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function SA(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:xA(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=OA(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(o<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=o<0?xA(e):0}}}function xA(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function kA(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function _A(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function PA(e,t){let n=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.height-e.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}class EA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?xA(t):0),n,Math.min(e.focusOffset,n?xA(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let $A,TA=null;function CA(e){if(e.setActive)return e.setActive();if(TA)return e.focus(TA);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==TA?{get preventScroll(){return TA={preventScroll:!0},!0}}:void 0),!TA){TA=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],o=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}function jA(e,t,n=t){let r=$A||($A=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function NA(e,t,n,r){let o={key:t,code:t,keyCode:n,which:n,cancelable:!0};r&&({altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,metaKey:o.metaKey}=r);let i=new KeyboardEvent("keydown",o);i.synthetic=!0,e.dispatchEvent(i);let a=new KeyboardEvent("keyup",o);return a.synthetic=!0,e.dispatchEvent(a),i.defaultPrevented||a.defaultPrevented}function AA(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function IA(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function MA(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r>0)return{node:n,offset:r};if(1==n.nodeType&&r>0){if("false"==n.contentEditable)return null;n=n.childNodes[r-1],r=xA(n)}else{if(!n.parentNode||wA(n))return null;r=OA(n),n=n.parentNode}}}function DA(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r<n.nodeValue.length)return{node:n,offset:r};if(1==n.nodeType&&r<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[r],r=0}else{if(!n.parentNode||wA(n))return null;r=OA(n)+1,n=n.parentNode}}}pA.safari&&pA.safari_version>=26&&(TA=!1);class RA{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new RA(e.parentNode,OA(e),t)}static after(e,t){return new RA(e.parentNode,OA(e)+1,t)}}const QA=[];class zA{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,r=this.dom,o=null;for(let i of this.children){if(7&i.flags){if(!i.dom&&(n=o?o.nextSibling:r.firstChild)){let e=zA.get(n);(!e||!e.parent&&e.canReuseDOM(i))&&i.reuseDOM(n)}i.sync(e,t),i.flags&=-8}if(n=o?o.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=i.dom&&(t.written=!0),i.dom.parentNode==r)for(;n&&n!=i.dom;)n=LA(n);else r.insertBefore(i.dom,n);o=i.dom}for(n=o?o.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);n;)n=LA(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==xA(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!zA.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,o=-1,i=-1,a=-1;for(let s=0,l=n,u=n;s<this.children.length;s++){let n=this.children[s],c=l+n.length;if(l<e&&c>t)return n.domBoundsAround(e,t,l);if(c>=e&&-1==r&&(r=s,o=l),l>t&&n.dom.parentNode==this.dom){i=s,a=u;break}u=c,l=c+n.breakAfter}return{from:o,to:a<0?n+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:i<this.children.length&&i>=0?this.children[i].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=QA){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&n.indexOf(e)<0&&e.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ZA(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,o,i){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function LA(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}zA.prototype.breakAfter=0;class ZA{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function FA(e,t,n,r,o,i,a,s,l){let{children:u}=e,c=u.length?u[t]:null,d=i.length?i[i.length-1]:null,f=d?d.breakAfter:a;if(!(t==r&&c&&!a&&!f&&i.length<2&&c.merge(n,o,i.length?d:null,0==n,s,l))){if(r<u.length){let e=u[r];e&&(o<e.length||e.breakAfter&&(null==d?void 0:d.breakAfter))?(t==r&&(e=e.split(o),o=0),!f&&d&&e.merge(0,o,d,!0,0,l)?i[i.length-1]=e:((o||e.children.length&&!e.children[0].length)&&e.merge(0,o,null,!1,0,l),i.push(e))):(null==e?void 0:e.breakAfter)&&(d?d.breakAfter=1:a=1),r++}for(c&&(c.breakAfter=a,n>0&&(!a&&i.length&&c.merge(n,c.length,i[0],!1,s,0)?c.breakAfter=i.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,s,0),t++));t<r&&i.length;)if(u[r-1].become(i[i.length-1]))r--,i.pop(),l=i.length?0:s;else{if(!u[t].become(i[0]))break;t++,i.shift(),s=i.length?0:l}!i.length&&t&&r<u.length&&!u[t-1].breakAfter&&u[r].merge(0,0,u[t-1],!1,s,l)&&t--,(t<r||i.length)&&e.replaceChildren(t,r,i)}}function UA(e,t,n,r,o,i){let a=e.childCursor(),{i:s,off:l}=a.findPos(n,1),{i:u,off:c}=a.findPos(t,-1),d=t-n;for(let e of r)d+=e.length;e.length+=d,FA(e,u,c,s,l,r,0,o,i)}class VA extends zA{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof VA)||this.length-(t-e)+n.length>256||8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new VA(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new RA(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let o=t,i=t,a=0;0==t&&n<0||t==r&&n>=0?pA.chrome||pA.gecko||(t?(o--,a=1):i<r&&(i++,a=-1)):n<0?o--:i<r&&i++;let s=jA(e,o,i).getClientRects();if(!s.length)return null;let l=s[(a?a<0:n>=0)?0:s.length-1];pA.safari&&!a&&0==l.width&&(l=Array.prototype.find.call(s,e=>e.width)||l);return a?kA(l,a<0):l||null}(this.dom,e,t)}}class GA extends zA{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(AA(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,o,i){return(!n||!(!(n instanceof GA&&n.mark.eq(this.mark))||e&&o<=0||t<this.length&&i<=0))&&(UA(this,e,t,n?n.children.slice():[],o-1,i-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,o=0;for(let i of this.children){let a=n+i.length;a>e&&t.push(n<e?i.split(e-n):i),r<0&&n>=e&&(r=o),n=a,o++}let i=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new GA(this.mark,t,i)}domAtPos(e){return YA(this,e)}coordsAt(e,t){return qA(this,e,t)}}class BA extends zA{static create(e,t,n){return new BA(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=BA.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,r,o,i){return!(n&&(!(n instanceof BA&&this.widget.compare(n.widget))||e>0&&o<=0||t<this.length&&i<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof BA&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return uj.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):uj.empty}domAtPos(e){return(this.length?0==e:this.side>0)?RA.before(this.dom):RA.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let i=this.side?this.side<0:e>0;for(let t=i?r.length-1:0;o=r[t],!(e>0?0==t:t==r.length-1||o.top<o.bottom);t+=i?-1:1);return kA(o,!i)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class XA extends zA{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof XA&&e.side==this.side}split(){return new XA(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?RA.before(this.dom):RA.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return uj.empty}get isHidden(){return!0}}function YA(e,t){let n=e.dom,{children:r}=e,o=0;for(let e=0;o<r.length;o++){let i=r[o],a=e+i.length;if(!(a==e&&i.getSide()<=0)){if(t>e&&t<a&&i.dom.parentNode==n)return i.domAtPos(t-e);if(t<=e)break;e=a}}for(let e=o;e>0;e--){let t=r[e-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let e=o;e<r.length;e++){let t=r[e];if(t.dom.parentNode==n)return t.domAtPos(0)}return new RA(n,0)}function WA(e,t,n){let r,{children:o}=e;n>0&&t instanceof GA&&o.length&&(r=o[o.length-1])instanceof GA&&r.mark.eq(t.mark)?WA(r,t.children[0],n-1):(o.push(t),t.setParent(e)),e.length+=t.length}function qA(e,t,n){let r=null,o=-1,i=null,a=-1;!function e(t,s){for(let l=0,u=0;l<t.children.length&&u<=s;l++){let c=t.children[l],d=u+c.length;d>=s&&(c.children.length?e(c,s-u):(!i||i.isHidden&&(n>0||HA(i,c)))&&(d>s||u==d&&c.getSide()>0)?(i=c,a=s-u):(u<s||u==d&&c.getSide()<0&&!c.isHidden)&&(r=c,o=s-u)),u=d}}(e,t);let s=(n<0?r:i)||r||i;return s?s.coordsAt(Math.max(0,s==r?o:a),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=yA(t);return n[n.length-1]||null}(e)}function HA(e,t){let n=e.coordsAt(0,1),r=t.coordsAt(0,1);return n&&r&&r.top<n.bottom}function KA(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}VA.prototype.children=BA.prototype.children=XA.prototype.children=QA;const JA=Object.create(null);function eI(e,t,n){if(e==t)return!0;e||(e=JA),t||(t=JA);let r=Object.keys(e),o=Object.keys(t);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=o.length-(n&&o.indexOf(n)>-1?1:0))return!1;for(let i of r)if(i!=n&&(-1==o.indexOf(i)||e[i]!==t[i]))return!1;return!0}function tI(e,t,n){let r=!1;if(t)for(let o in t)n&&o in n||(r=!0,"style"==o?e.style.cssText="":e.removeAttribute(o));if(n)for(let o in n)t&&t[o]==n[o]||(r=!0,"style"==o?e.style.cssText=n[o]:e.setAttribute(o,n[o]));return r}function nI(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t[r.name]=r.value}return t}class rI{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var oI=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(oI||(oI={}));class iI extends EN{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new aI(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new lI(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:o,end:i}=uI(e,r);t=(o?r?-3e8:-1:5e8)-1,n=1+(i?r?2e8:1:-6e8)}return new lI(e,t,n,r,e.widget||null,!0)}static line(e){return new sI(e)}static set(e,t=!1){return jN.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}iI.none=jN.empty;class aI extends iI{constructor(e){let{start:t,end:n}=uI(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof aI&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&eI(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}aI.prototype.point=!1;class sI extends iI{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sI&&this.spec.class==e.spec.class&&eI(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}sI.prototype.mapMode=kj.TrackBefore,sI.prototype.point=!0;class lI extends iI{constructor(e,t,n,r,o,i){super(t,n,o,e),this.block=r,this.isReplace=i,this.mapMode=r?t<=0?kj.TrackBefore:kj.TrackAfter:kj.TrackDel}get type(){return this.startSide!=this.endSide?oI.WidgetRange:this.startSide<=0?oI.WidgetBefore:oI.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof lI&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function uI(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function cI(e,t,n,r=0){let o=n.length-1;o>=0&&n[o]+r>=e?n[o]=Math.max(n[o],t):n.push(e,t)}lI.prototype.point=!0;class dI extends zA{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,o,i){if(n){if(!(n instanceof dI))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),UA(this,e,t,n?n.children.slice():[],o,i),!0}split(e){let t=new dI;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){eI(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){WA(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=KA(t,this.attrs||{})),n&&(this.attrs=KA({class:n},this.attrs||{}))}domAtPos(e){return YA(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(AA(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(tI(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&zA.get(r)instanceof GA;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(n=zA.get(r))||void 0===n?void 0:n.isEditable)||pA.ios&&this.children.some(e=>e instanceof VA)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof VA)||/[^ -~]/.test(n.text))return null;let r=yA(n.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=qA(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return e instanceof dI&&0==this.children.length&&0==e.children.length&&eI(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let o=e.children[n],i=r+o.length;if(i>=t){if(o instanceof dI)return o;if(i>t)break}r=i+o.breakAfter}return null}}class fI extends zA{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,o,i){return!(n&&(!(n instanceof fI&&this.widget.compare(n.widget))||e>0&&o<=0||t<this.length&&i<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?RA.before(this.dom):RA.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new fI(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return QA}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):uj.empty}domBoundsAround(){return null}become(e){return e instanceof fI&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof hI?null:kA(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class hI extends rI{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class pI{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof fI&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new dI),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(mI(new XA(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof fI||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),o=Math.min(r,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(mI(new VA(this.text.slice(this.textOff,this.textOff+o)),t),n),this.atCursorPos=!0,this.textOff+=o,e-=o,n=r<=o?0:t.length}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,o,i){if(this.disallowBlockEffectsFor[i]&&n instanceof lI){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(n instanceof lI)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new fI(n.widget||gI.block,a,n));else{let i=BA.create(n.widget||gI.inline,a,a?0:n.startSide),s=this.atCursorPos&&!i.isEditable&&o<=r.length&&(e<t||n.startSide>0),l=!i.isEditable&&(e<t||o>r.length||n.startSide<=0),u=this.getLine();2!=this.pendingBuffer||s||i.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),s&&(u.append(mI(new XA(1),r),o),o=r.length+Math.max(0,o-r.length)),u.append(mI(i,r),o),this.atCursorPos=l,this.pendingBuffer=l?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,n,r,o){let i=new pI(e,t,n,o);return i.openEnd=jN.spans(r,t,n,i),i.openStart<0&&(i.openStart=i.openEnd),i.finish(i.openEnd),i}}function mI(e,t){for(let n of t)e=new GA(n,[e],e.length);return e}class gI extends rI{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}gI.inline=new gI("span"),gI.block=new gI("div");var vI=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(vI||(vI={}));const yI=vI.LTR,bI=vI.RTL;function OI(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const wI=OI("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),SI=OI("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),xI=Object.create(null),kI=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);xI[t]=n,xI[n]=-t}function _I(e){return e<=247?wI[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?SI[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const PI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class EI{get dir(){return this.level%2?bI:yI}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let o=-1;for(let i=0;i<e.length;i++){let a=e[i];if(a.from<=t&&a.to>=t){if(a.level==n)return i;(o<0||(0!=r?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=i)}}if(o<0)throw new RangeError("Index out of range");return o}}function $I(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r.from!=o.from||r.to!=o.to||r.direction!=o.direction||!$I(r.inner,o.inner))return!1}return!0}const TI=[];function CI(e,t,n,r,o,i,a){let s=r%2?2:1;if(r%2==o%2)for(let l=t,u=0;l<n;){let t=!0,c=!1;if(u==i.length||l<i[u].from){let e=TI[l];e!=s&&(t=!1,c=16==e)}let d=t||1!=s?null:[],f=t?r:r+1,h=l;e:for(;;)if(u<i.length&&h==i[u].from){if(c)break e;let p=i[u];if(!t)for(let e=p.to,t=u+1;;){if(e==n)break e;if(!(t<i.length&&i[t].from==e)){if(TI[e]==s)break e;break}e=i[t++].to}if(u++,d)d.push(p);else{p.from>l&&a.push(new EI(l,p.from,f)),jI(e,p.direction==yI!=!(f%2)?r+1:r,o,p.inner,p.from,p.to,a),l=p.to}h=p.to}else{if(h==n||(t?TI[h]!=s:TI[h]==s))break;h++}d?CI(e,l,h,r+1,o,d,a):l<h&&a.push(new EI(l,h,f)),l=h}else for(let l=n,u=i.length;l>t;){let n=!0,c=!1;if(!u||l>i[u-1].to){let e=TI[l-1];e!=s&&(n=!1,c=16==e)}let d=n||1!=s?null:[],f=n?r:r+1,h=l;e:for(;;)if(u&&h==i[u-1].to){if(c)break e;let p=i[--u];if(!n)for(let e=p.from,n=u;;){if(e==t)break e;if(!n||i[n-1].to!=e){if(TI[e-1]==s)break e;break}e=i[--n].from}if(d)d.push(p);else{p.to<l&&a.push(new EI(p.to,l,f)),jI(e,p.direction==yI!=!(f%2)?r+1:r,o,p.inner,p.from,p.to,a),l=p.from}h=p.from}else{if(h==t||(n?TI[h-1]!=s:TI[h-1]==s))break;h--}d?CI(e,h,l,r+1,o,d,a):h<l&&a.push(new EI(h,l,f)),l=h}}function jI(e,t,n,r,o,i,a){let s=t%2?2:1;!function(e,t,n,r,o){for(let i=0;i<=r.length;i++){let a=i?r[i-1].to:t,s=i<r.length?r[i].from:n,l=i?256:o;for(let t=a,n=l,r=l;t<s;t++){let o=_I(e.charCodeAt(t));512==o?o=n:8==o&&4==r&&(o=16),TI[t]=4==o?2:o,7&o&&(r=o),n=o}for(let e=a,t=l,r=l;e<s;e++){let o=TI[e];if(128==o)e<s-1&&t==TI[e+1]&&24&t?o=TI[e]=t:TI[e]=256;else if(64==o){let o=e+1;for(;o<s&&64==TI[o];)o++;let i=e&&8==t||o<n&&8==TI[o]?1==r?1:8:256;for(let t=e;t<o;t++)TI[t]=i;e=o-1}else 8==o&&1==r&&(TI[e]=1);t=o,7&o&&(r=o)}}}(e,o,i,r,s),function(e,t,n,r,o){let i=1==o?2:1;for(let a=0,s=0,l=0;a<=r.length;a++){let u=a?r[a-1].to:t,c=a<r.length?r[a].from:n;for(let t,n,r,a=u;a<c;a++)if(n=xI[t=e.charCodeAt(a)])if(n<0){for(let e=s-3;e>=0;e-=3)if(kI[e+1]==-n){let t=kI[e+2],n=2&t?o:4&t?1&t?i:o:0;n&&(TI[a]=TI[kI[e]]=n),s=e;break}}else{if(189==kI.length)break;kI[s++]=a,kI[s++]=t,kI[s++]=l}else if(2==(r=TI[a])||1==r){let e=r==o;l=e?0:1;for(let t=s-3;t>=0;t-=3){let n=kI[t+2];if(2&n)break;if(e)kI[t+2]|=2;else{if(4&n)break;kI[t+2]|=4}}}}}(e,o,i,r,s),function(e,t,n,r){for(let o=0,i=r;o<=n.length;o++){let a=o?n[o-1].to:e,s=o<n.length?n[o].from:t;for(let l=a;l<s;){let a=TI[l];if(256==a){let a=l+1;for(;;)if(a==s){if(o==n.length)break;a=n[o++].to,s=o<n.length?n[o].from:t}else{if(256!=TI[a])break;a++}let u=1==i,c=u==(1==(a<t?TI[a]:r))?u?1:2:r;for(let t=a,r=o,i=r?n[r-1].to:e;t>l;)t==i&&(t=n[--r].from,i=r?n[r-1].to:e),TI[--t]=c;l=a}else i=a,l++}}}(o,i,r,s),CI(e,o,i,t,n,r,a)}function NI(e,t,n){if(!e)return[new EI(0,0,t==bI?1:0)];if(t==yI&&!n.length&&!PI.test(e))return AI(e.length);if(n.length)for(;e.length>TI.length;)TI[TI.length]=256;let r=[],o=t==yI?0:1;return jI(e,o,o,n,0,e.length,r),r}function AI(e){return[new EI(0,e,0)]}let II="";function MI(e,t,n,r,o){var i;let a=r.head-e.from,s=EI.find(t,a,null!==(i=r.bidiLevel)&&void 0!==i?i:-1,r.assoc),l=t[s],u=l.side(o,n);if(a==u){let e=s+=o?1:-1;if(e<0||e>=t.length)return null;l=t[s=e],a=l.side(!o,n),u=l.side(o,n)}let c=bj(e.text,a,l.forward(o,n));(c<l.from||c>l.to)&&(c=u),II=e.text.slice(Math.min(a,c),Math.max(a,c));let d=s==(o?t.length-1:0)?null:t[s+(o?1:-1)];return d&&c==u&&d.level+(o?0:1)<l.level?Ij.cursor(d.side(!o,n)+e.from,d.forward(o,n)?1:-1,d.level):Ij.cursor(c+e.from,l.forward(o,n)?-1:1,l.level)}function DI(e,t,n){for(let r=t;r<n;r++){let t=_I(e.charCodeAt(r));if(1==t)return yI;if(2==t||4==t)return bI}return yI}const RI=Rj.define(),QI=Rj.define(),zI=Rj.define(),LI=Rj.define(),ZI=Rj.define(),FI=Rj.define(),UI=Rj.define(),VI=Rj.define(),GI=Rj.define(),BI=Rj.define({combine:e=>e.some(e=>e)}),XI=Rj.define({combine:e=>e.some(e=>e)}),YI=Rj.define();class WI{constructor(e,t="nearest",n="nearest",r=5,o=5,i=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=o,this.isSnapshot=i}map(e){return e.empty?this:new WI(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new WI(Ij.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const qI=hN.define({map:(e,t)=>e.map(t)}),HI=hN.define();function KI(e,t,n){let r=e.facet(LI);r.length?r[0](t):window.onerror&&window.onerror(String(t),n,void 0,void 0,t)||(n?console.error(n+":",t):console.error(t))}const JI=Rj.define({combine:e=>!e.length||e[0]});let eM=0;const tM=Rj.define({combine:e=>e.filter((t,n)=>{for(let r=0;r<n;r++)if(e[r].plugin==t.plugin)return!1;return!0})});class nM{constructor(e,t,n,r,o){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(tM.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(tM.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:o,decorations:i}=t||{};return new nM(eM++,e,n,r,e=>{let t=[];return i&&t.push(aM.of(t=>{let n=t.plugin(e);return n?i(n):iI.none})),o&&t.push(o(e)),t})}static fromClass(e,t){return nM.define((t,n)=>new e(t,n),t)}}class rM{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(KI(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){KI(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){KI(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const oM=Rj.define(),iM=Rj.define(),aM=Rj.define(),sM=Rj.define(),lM=Rj.define(),uM=Rj.define();function cM(e,t){let n=e.state.facet(uM);if(!n.length)return n;let r=n.map(t=>t instanceof Function?t(e):t),o=[];return jN.spans(r,t.from,t.to,{point(){},span(e,n,r,i){let a=e-t.from,s=n-t.from,l=o;for(let e=r.length-1;e>=0;e--,i--){let n,o=r[e].spec.bidiIsolate;if(null==o&&(o=DI(t.text,a,s)),i>0&&l.length&&(n=l[l.length-1]).to==a&&n.direction==o)n.to=s,l=n.inner;else{let e={from:a,to:s,direction:o,inner:[]};l.push(e),l=e.inner}}}}),o}const dM=Rj.define();function fM(e){let t=0,n=0,r=0,o=0;for(let i of e.state.facet(dM)){let a=i(e);a&&(null!=a.left&&(t=Math.max(t,a.left)),null!=a.right&&(n=Math.max(n,a.right)),null!=a.top&&(r=Math.max(r,a.top)),null!=a.bottom&&(o=Math.max(o,a.bottom)))}return{left:t,right:n,top:r,bottom:o}}const hM=Rj.define();class pM{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new pM(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,o=0,i=0,a=0;;r++){let s=r==e.length?null:e[r],l=i-a,u=s?s.fromB:1e9;for(;o<t.length&&t[o]<u;){let e=t[o],r=t[o+1],i=Math.max(a,e),s=Math.min(u,r);if(i<=s&&new pM(i+l,s+l,i,s).addToSet(n),r>u)break;o+=2}if(!s)return n;new pM(s.fromA,s.toA,s.fromB,s.toB).addToSet(n),i=s.toA,a=s.toB}}}class mM{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Pj.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges((e,t,n,o)=>r.push(new pM(e,t,n,o))),this.changedRanges=r}static create(e,t,n){return new mM(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class gM extends zA{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=iI.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new dI],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pM(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?r=this.domChanged.newSel.head:function(e,t){let n=!1;t&&e.iterChangedRanges((e,r)=>{e<t.to&&r>t.from&&(n=!0)});return n}(e.changes,this.hasComposition)||e.selectionSet||(r=e.state.selection.main.head));let o=r>-1?function(e,t,n){let r=vM(e,n);if(!r)return null;let{node:o,from:i,to:a}=r,s=o.nodeValue;if(/[\n\r]/.test(s))return null;if(e.state.doc.sliceString(r.from,r.to)!=s)return null;let l=t.invertedDesc,u=new pM(l.mapPos(i),l.mapPos(a),i,a),c=[];for(let t=o.parentNode;;t=t.parentNode){let n=zA.get(t);if(n instanceof GA)c.push({node:t,deco:n.mark});else{if(n instanceof dI||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:u,text:o,marks:c,line:t};if(t==e.contentDOM)return null;c.push({node:t,deco:new aI({inclusive:!0,attributes:nI(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:r}=this.hasComposition;n=new pM(t,r,e.changes.mapPos(t,-1),e.changes.mapPos(r,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(pA.ie||pA.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=function(e,t,n){let r=new yM;return jN.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return n=pM.extendWithRanges(n,i),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=pA.chrome||pA.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof fI&&e.widget instanceof hI&&o.push(e.dom);r.updateGaps(o)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let e=r.length-1;;e--){let t=e>=0?r[e]:null;if(!t)break;let i,a,s,l,{fromA:u,toA:c,fromB:d,toB:f}=t;if(n&&n.range.fromB<f&&n.range.toB>d){let e=pI.build(this.view.state.doc,d,n.range.fromB,this.decorations,this.dynamicDecorationMap),t=pI.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);a=e.breakAtStart,s=e.openStart,l=t.openEnd;let r=this.compositionView(n);t.breakAtStart?r.breakAfter=1:t.content.length&&r.merge(r.length,r.length,t.content[0],!1,t.openStart,0)&&(r.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&r.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),i=e.content.concat(r).concat(t.content)}else({content:i,breakAtStart:a,openStart:s,openEnd:l}=pI.build(this.view.state.doc,d,f,this.decorations,this.dynamicDecorationMap));let{i:h,off:p}=o.findPos(c,1),{i:m,off:g}=o.findPos(u,-1);FA(this,m,g,h,p,i,a,s,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(HI)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new VA(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new GA(n,[t],t.length);let n=new dI;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some(e=>7&e.flags)?1:0),this.markedForComposition.add(t);let n=zA.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)n=r.childPos(n.off,1),r=r.children[n.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,o=!r&&!(this.view.state.facet(JI)||this.dom.tabIndex>-1)&&vA(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||o))return;let i=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,s=this.moveToLine(this.domAtPos(a.anchor)),l=a.empty?s:this.moveToLine(this.domAtPos(a.head));if(pA.gecko&&a.empty&&!this.hasComposition&&(1==(u=s).node.nodeType&&u.node.firstChild&&(0==u.offset||"false"==u.node.childNodes[u.offset-1].contentEditable)&&(u.offset==u.node.childNodes.length||"false"==u.node.childNodes[u.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(e,s.node.childNodes[s.offset]||null)),s=l=new RA(e,0),i=!0}var u;let c=this.view.observer.selectionRange;!i&&c.focusNode&&(bA(s.node,s.offset,c.anchorNode,c.anchorOffset)&&bA(l.node,l.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,a))||(this.view.observer.ignore(()=>{pA.android&&pA.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=mA(this.view.root);if(e)if(a.empty){if(pA.gecko){let e=function(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}(s.node,s.offset);if(e&&3!=e){let t=(1==e?MA:DA)(s.node,s.offset);t&&(s=new RA(t.node,t.offset))}}e.collapse(s.node,s.offset),null!=a.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=a.bidiLevel)}else if(e.extend){e.collapse(s.node,s.offset);try{e.extend(l.node,l.offset)}catch(e){}}else{let t=document.createRange();a.anchor>a.head&&([s,l]=[l,s]),t.setEnd(l.node,l.offset),t.setStart(s.node,s.offset),e.removeAllRanges(),e.addRange(t)}else;o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(s,l)),this.impreciseAnchor=s.precise?null:new RA(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new RA(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&bA(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=mA(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!(n&&t.empty&&t.assoc&&n.modify))return;let i=dI.find(this,t.head);if(!i)return;let a=i.posAtStart;if(t.head==a||t.head==a+i.length)return;let s=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!s||!l||s.bottom>l.top)return;let u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&n.collapse(r,o)}moveToLine(e){let t,n=this.dom;if(e.node!=n)return e;for(let r=e.offset;!t&&r<n.childNodes.length;r++){let e=zA.get(n.childNodes[r]);e instanceof dI&&(t=e.domAtPos(0))}for(let r=e.offset-1;!t&&r>=0;r--){let e=zA.get(n.childNodes[r]);e instanceof dI&&(t=e.domAtPos(e.length))}return t?new RA(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=zA.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof dI)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let o=this.length,i=this.children.length-1;i>=0;i--){let a=this.children[i],s=o-a.breakAfter,l=s-a.length;if(s<e)break;if(l<=e&&(l<e||a.covers(-1))&&(s>e||a.covers(1))&&(!n||a instanceof dI&&!(n instanceof dI&&t>=0)))n=a,r=l;else if(n&&l==e&&s==e&&a instanceof fI&&Math.abs(t)<2){if(a.deco.startSide<0)break;i&&(n=null)}o=l}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof dI))return null;for(;r.children.length;){let{i:e,off:t}=r.childPos(n,1);for(;;e++){if(e==r.children.length)return null;if((r=r.children[e]).length)break}n=t}if(!(r instanceof VA))return null;let o=bj(r.text,n);if(o==n)return null;let i=jA(r.dom,n,o).getClientRects();for(let e=0;e<i.length;e++){let t=i[e];if(e==i.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,o=this.view.contentDOM.clientWidth,i=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,s=this.view.textDirection==vI.LTR;for(let e=0,l=0;l<this.children.length;l++){let u=this.children[l],c=e+u.length;if(c>r)break;if(e>=n){let n=u.dom.getBoundingClientRect();if(t.push(n.height),i){let t=u.dom.lastChild,r=t?yA(t):[];if(r.length){let t=r[r.length-1],i=s?t.right-n.left:n.right-t.left;i>a&&(a=i,this.minWidth=o,this.minWidthFrom=e,this.minWidthTo=c)}}}e=c+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?vI.RTL:vI.LTR}measureTextSize(){for(let e of this.children)if(e instanceof dI){let t=e.measureTextSize();if(t)return t}let e,t,n,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(r);let o=yA(r.firstChild)[0];e=r.getBoundingClientRect().height,t=o?o.width/27:7,n=o?o.height:e,r.remove()}),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ZA(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],i=o?o.from-1:this.length;if(i>n){let r=(t.lineBlockAt(i).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(iI.replace({widget:new hI(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,i))}if(!o)break;n=o.to+1}return iI.set(e)}updateDeco(){let e=1,t=this.view.state.facet(aM).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),n=!1,r=this.view.state.facet(sM).map((e,t)=>{let r="function"==typeof e;return r&&(n=!0),r?e(this.view):e});for(r.length&&(this.dynamicDecorationMap[e++]=n,t.push(jN.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let t of this.view.state.facet(YI))try{if(t(this.view,e.range,e))return!0}catch(e){KI(this.view.state,e,"scroll handler")}let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let o=fM(this.view),i={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:a,offsetHeight:s}=this.view.scrollDOM;!function(e,t,n,r,o,i,a,s){let l=e.ownerDocument,u=l.defaultView||window;for(let c=e,d=!1;c&&!d;)if(1==c.nodeType){let e,f=c==l.body,h=1,p=1;if(f)e=_A(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();({scaleX:h,scaleY:p}=PA(c,t)),e={left:t.left,right:t.left+c.clientWidth*h,top:t.top,bottom:t.top+c.clientHeight*p}}let m=0,g=0;if("nearest"==o)t.top<e.top?(g=t.top-(e.top+a),n>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+a)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+a,n<0&&t.top-g<e.top&&(g=t.top-(e.top+a)));else{let r=t.bottom-t.top,i=e.bottom-e.top;g=("center"==o&&r<=i?t.top+r/2-i/2:"start"==o||"center"==o&&n<0?t.top-a:t.bottom-i+a)-e.top}if("nearest"==r?t.left<e.left?(m=t.left-(e.left+i),n>0&&t.right>e.right+m&&(m=t.right-e.right+i)):t.right>e.right&&(m=t.right-e.right+i,n<0&&t.left<e.left+m&&(m=t.left-(e.left+i))):m=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==s?t.left-i:t.right-(e.right-e.left)+i)-e.left,m||g)if(f)u.scrollBy(m,g);else{let e=0,n=0;if(g){let e=c.scrollTop;c.scrollTop+=g/p,n=(c.scrollTop-e)*p}if(m){let t=c.scrollLeft;c.scrollLeft+=m/h,e=(c.scrollLeft-t)*h}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-m)<1&&(r="nearest"),n&&Math.abs(n-g)<1&&(o="nearest")}if(f)break;(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)&&(t={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}),c=c.assignedSlot||c.parentNode}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,i,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,s),-s),this.view.textDirection==vI.LTR)}}function vM(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let r=MA(n.focusNode,n.focusOffset),o=DA(n.focusNode,n.focusOffset),i=r||o;if(o&&r&&o.node!=r.node){let t=zA.get(o.node);if(!t||t instanceof VA&&t.text!=o.node.nodeValue)i=o;else if(e.docView.lastCompositionAfterCursor){let e=zA.get(r.node);!e||e instanceof VA&&e.text!=r.node.nodeValue||(i=o)}}if(e.docView.lastCompositionAfterCursor=i!=r,!i)return null;let a=t-i.offset;return{from:a,to:a+i.node.nodeValue.length,node:i.node}}let yM=class{constructor(){this.changes=[]}compareRange(e,t){cI(e,t,this.changes)}comparePoint(e,t){cI(e,t,this.changes)}boundChange(e){cI(e,e,this.changes)}};function bM(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function OM(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function wM(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function SM(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function xM(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function kM(e,t,n){let r,o,i,a,s,l,u,c,d=!1;for(let f=e.firstChild;f;f=f.nextSibling){let e=yA(f);for(let h=0;h<e.length;h++){let p=e[h];o&&wM(o,p)&&(p=SM(xM(p,o.bottom),o.top));let m=bM(t,p),g=OM(n,p);if(0==m&&0==g)return 3==f.nodeType?_M(f,t,n):kM(f,t,n);(!r||a>g||a==g&&i>m)&&(r=f,o=p,i=m,a=g,d=!m||(t<p.left?h>0:h<e.length-1)),0==m?n>p.bottom&&(!u||u.bottom<p.bottom)?(s=f,u=p):n<p.top&&(!c||c.top>p.top)&&(l=f,c=p):u&&wM(u,p)?u=xM(u,p.bottom):c&&wM(c,p)&&(c=SM(c,p.top))}}if(u&&u.bottom>=n?(r=s,o=u):c&&c.top<=n&&(r=l,o=c),!r)return{node:e,offset:0};let f=Math.max(o.left,Math.min(o.right,t));return 3==r.nodeType?_M(r,f,n):d&&"false"!=r.contentEditable?kM(r,f,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(o.left+o.right)/2?1:0)}}function _M(e,t,n){let r=e.nodeValue.length,o=-1,i=1e9,a=0;for(let s=0;s<r;s++){let r=jA(e,s,s+1).getClientRects();for(let l=0;l<r.length;l++){let u=r[l];if(u.top==u.bottom)continue;a||(a=t-u.left);let c=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=t&&u.right+1>=t&&c<i){let n=t>=(u.left+u.right)/2,r=n;if(pA.chrome||pA.gecko){jA(e,s).getBoundingClientRect().left==u.right&&(r=!n)}if(c<=0)return{node:e,offset:s+(r?1:0)};o=s+(r?1:0),i=c}}}return{node:e,offset:o>-1?o:a>0?e.nodeValue.length:0}}function PM(e,t,n,r=-1){var o,i;let a,s=e.contentDOM.getBoundingClientRect(),l=s.top+e.viewState.paddingTop,{docHeight:u}=e.viewState,{x:c,y:d}=t,f=d-l;if(f<0)return 0;if(f>u)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,o=!1;a=e.elementAtHeight(f),a.type!=oI.Text;)for(;f=r>0?a.bottom+t:a.top-t,!(f>=0&&f<=u);){if(o)return n?null:0;o=!0,r=-r}d=l+f;let h=a.from;if(h<e.viewport.from)return 0==e.viewport.from?0:n?null:EM(e,s,a,c,d);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:EM(e,s,a,c,d);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,g=m.elementFromPoint(c,d);g&&!e.contentDOM.contains(g)&&(g=null),g||(c=Math.max(s.left+1,Math.min(s.right-1,c)),g=m.elementFromPoint(c,d),g&&!e.contentDOM.contains(g)&&(g=null));let v,y=-1;if(g&&0!=(null===(o=e.docView.nearest(g))||void 0===o?void 0:o.isEditable)){if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(c,d);e&&({offsetNode:v,offset:y}=e)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(c,d);e&&({startContainer:v,startOffset:y}=e)}v&&(!e.contentDOM.contains(v)||pA.safari&&function(e,t,n){return $M(e,t,n)}(v,y,c)||pA.chrome&&function(e,t,n){if(0!=t)return $M(e,t,n);for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}let r=1==e.nodeType?e.getBoundingClientRect():jA(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}(v,y,c))&&(v=void 0),v&&(y=Math.min(xA(v),y))}if(!v||!e.docView.dom.contains(v)){let t=dI.find(e.docView,h);if(!t)return f>a.top+a.height/2?a.to:a.from;({node:v,offset:y}=kM(t.dom,c,d))}let b=e.docView.nearest(v);if(!b)return null;if(b.isWidget&&1==(null===(i=b.dom)||void 0===i?void 0:i.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(v,y)+b.posAtStart}function EM(e,t,n,r,o){let i=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;i+=Math.floor((o-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let a=e.state.sliceDoc(n.from,n.to);return n.from+VN(a,i,e.state.tabSize)}function $M(e,t,n){let r,o=e;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(;;){let e=o.nextSibling;if(e){if("BR"==e.nodeName)break;return!1}{let e=o.parentNode;if(!e||"DIV"==e.nodeName)break;o=e}}return jA(e,r-1,r).getBoundingClientRect().right>n}function TM(e,t,n){let r=e.lineBlockAt(t);if(Array.isArray(r.type)){let e;for(let o of r.type){if(o.from>t)break;if(!(o.to<t)){if(o.from<t&&o.to>t)return o;e&&(o.type!=oI.Text||e.type==o.type&&!(n<0?o.from<t:o.to>t))||(e=o)}}return e||r}return r}function CM(e,t,n,r){let o=e.state.doc.lineAt(t.head),i=e.bidiSpans(o),a=e.textDirectionAt(o.from);for(let s=t,l=null;;){let t=MI(o,i,a,s,n),u=II;if(!t){if(o.number==(n?e.state.doc.lines:1))return s;u="\n",o=e.state.doc.line(o.number+(n?1:-1)),i=e.bidiSpans(o),t=e.visualLineSide(o,!n)}if(l){if(!l(u))return s}else{if(!r)return t;l=r(u)}s=t}}function jM(e,t,n){for(;;){let r=0;for(let o of e)o.between(t-1,t+1,(e,o,i)=>{if(t>e&&t<o){let i=r||n||(t-e<o-t?-1:1);t=i<0?e:o,r=i}});if(!r)return t}}function NM(e,t){let n=null;for(let r=0;r<t.ranges.length;r++){let o=t.ranges[r],i=null;if(o.empty){let t=jM(e,o.from,0);t!=o.from&&(i=Ij.cursor(t,-1))}else{let t=jM(e,o.from,-1),n=jM(e,o.to,1);t==o.from&&n==o.to||(i=Ij.range(o.from==o.anchor?t:n,o.from==o.head?t:n))}i&&(n||(n=t.ranges.slice()),n[r]=i)}return n?Ij.create(n,t.mainIndex):t}function AM(e,t,n){let r=jM(e.state.facet(lM).map(t=>t(e)),n.from,t.head>n.from?-1:1);return r==n.from?n:Ij.cursor(r,r<n.from?1:-1)}const IM="";class MM{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(_N.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=IM}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let i=zA.get(r),a=zA.get(o);(i&&a?i.breakAfter:(i?i.breakAfter:wA(r))||wA(o)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&!RM(o,t)&&this.lineBreak(),r=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o,i=-1,a=1;if(this.lineSeparator?(i=t.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(o=r.exec(t))&&(i=o.index,a=o[0].length),this.append(t.slice(n,i<0?t.length:i)),i<0)break;if(this.lineBreak(),a>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=a-1);n=i+a}}readNode(e){if(e.cmIgnore)return;let t=zA.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(DM(e,n.node,n.offset)?t:0))}}function DM(e,t,n){for(;;){if(!t||n<xA(t))return!1;if(t==e)return!0;n=OA(t)+1,t=t.parentNode}}function RM(e,t){let n;for(;e!=t&&e;e=e.nextSibling){let t=zA.get(e);if(!(null==t?void 0:t.isWidget)&&!e.cmIgnore)return!1;t&&(n||(n=[])).push(t)}if(n)for(let e of n){let t=e.overrideDOMText;if(null==t?void 0:t.length)return!1}return!0}class QM{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class zM{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:i}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=o||i?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}=e.observer.selectionRange;n&&(t.push(new QM(n,r)),o==n&&i==r||t.push(new QM(o,i)));return t}(e),n=new MM(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?Ij.single(n+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=o&&o.node==t.focusNode&&o.offset==t.focusOffset||!gA(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=i&&i.node==t.anchorNode&&i.offset==t.anchorOffset||!gA(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),a=e.viewport;if((pA.ios||pA.chrome)&&e.state.selection.main.empty&&n!=r&&(a.from>0||a.to<e.state.doc.length)){let t=Math.min(n,r),o=Math.max(n,r),i=a.from-t,s=a.to-o;0!=i&&1!=i&&0!=t||0!=s&&-1!=s&&o!=e.state.doc.length||(n=0,r=e.state.doc.length)}this.newSel=Ij.single(r,n)}}}function LM(e,t){let n,{newSel:r}=t,o=e.state.selection.main,i=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:a}=t.bounds,s=o.from,l=null;(8===i||pA.android&&t.text.length<a-r)&&(s=o.to,l="end");let u=FM(e.state.doc.sliceString(r,a,IM),t.text,s-r,l);u&&(pA.chrome&&13==i&&u.toB==u.from+2&&t.text.slice(u.from,u.toB)==IM+IM&&u.toB--,n={from:r+u.from,to:r+u.toA,insert:uj.of(t.text.slice(u.from,u.toB).split(IM))})}else r&&(!e.hasFocus&&e.state.facet(JI)||r.main.eq(o))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!o.empty&&r&&r.main.empty?n={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,o.to)}:(pA.mac||pA.android)&&n&&n.from==n.to&&n.from==o.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=Ij.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:uj.of([n.insert.toString().replace("."," ")])}):n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,o.to))}:pA.chrome&&n&&n.from==n.to&&n.from==o.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(r&&(r=Ij.single(r.main.anchor-1,r.main.head-1)),n={from:o.from,to:o.to,insert:uj.of([" "])}),n)return ZM(e,n,r,i);if(r&&!r.main.eq(o)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin,"select.pointer"==n&&(r=NM(e.state.facet(lM).map(t=>t(e)),r))),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}return!1}function ZM(e,t,n,r=-1){if(pA.ios&&e.inputState.flushIOSKey(t))return!0;let o=e.state.selection.main;if(pA.android&&(t.to==o.to&&(t.from==o.from||t.from==o.from-1&&" "==e.state.sliceDoc(t.from,o.from))&&1==t.insert.length&&2==t.insert.lines&&NA(e.contentDOM,"Enter",13)||(t.from==o.from-1&&t.to==o.to&&0==t.insert.length||8==r&&t.insert.length<t.to-t.from&&t.to>o.head)&&NA(e.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&0==t.insert.length&&NA(e.contentDOM,"Delete",46)))return!0;let i,a=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let s=()=>i||(i=function(e,t,n){let r,o=e.state,i=o.selection.main,a=-1;if(t.from==t.to&&t.from<i.from||t.from>i.to){let n=t.from<i.from?-1:1,r=n<0?i.from:i.to,s=jM(o.facet(lM).map(t=>t(e)),r,n);t.from==s&&(a=s)}if(a>-1)r={changes:t,selection:Ij.cursor(t.from+t.insert.length,-1)};else if(t.from>=i.from&&t.to<=i.to&&t.to-t.from>=(i.to-i.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=i.from<t.from?o.sliceDoc(i.from,t.from):"",a=i.to>t.to?o.sliceDoc(t.to,i.to):"";r=o.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+a))}else{let a=o.changes(t),s=n&&n.main.to<=a.newLength?n.main:void 0;if(o.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=i.to&&t.to>=i.to-10){let l,u=e.state.sliceDoc(t.from,t.to),c=n&&vM(e,n.main.head);if(c){let e=t.insert.length-(t.to-t.from);l={from:c.from,to:c.to-e}}else l=e.state.doc.lineAt(i.head);let d=i.to-t.to,f=i.to-i.from;r=o.changeByRange(n=>{if(n.from==i.from&&n.to==i.to)return{changes:a,range:s||n.map(a)};let r=n.to-d,c=r-u.length;if(n.to-n.from!=f||e.state.sliceDoc(c,r)!=u||n.to>=l.from&&n.from<=l.to)return{range:n};let h=o.changes({from:c,to:r,insert:t.insert}),p=n.to-i.to;return{changes:h,range:s?Ij.range(Math.max(0,s.anchor+p),Math.max(0,s.head+p)):n.map(h)}})}else r={changes:a,selection:s&&o.selection.replaceRange(s)}}let s="input.type";(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,s+=".compose",e.inputState.compositionFirstChange&&(s+=".start",e.inputState.compositionFirstChange=!1));return o.update(r,{userEvent:s,scrollIntoView:!0})}(e,t,n));return e.state.facet(FI).some(n=>n(e,t.from,t.to,a,s))||e.dispatch(s()),!0}function FM(e,t,n,r){let o=Math.min(e.length,t.length),i=0;for(;i<o&&e.charCodeAt(i)==t.charCodeAt(i);)i++;if(i==o&&e.length==t.length)return null;let a=e.length,s=t.length;for(;a>0&&s>0&&e.charCodeAt(a-1)==t.charCodeAt(s-1);)a--,s--;if("end"==r){n-=a+Math.max(0,i-Math.min(a,s))-i}if(a<i&&e.length<t.length){i-=n<=i&&n>=a?i-n:0,s=i+(s-a),a=i}else if(s<i){i-=n<=i&&n>=s?i-n:0,a=i+(a-s),s=i}return{from:i,toA:a,toB:s}}class UM{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,pA.safari&&e.contentDOM.addEventListener("input",()=>null),pA.gecko&&function(e){gD.has(e)||(gD.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=zA.get(r))&&n.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e)))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=GM(e),n=this.handlers,r=this.view.contentDOM;for(let e in t)if("scroll"!=e){let o=!t[e].handlers.length,i=n[e];i&&o!=!i.handlers.length&&(r.removeEventListener(e,this.handleEvent),i=null),i||r.addEventListener(e,this.handleEvent,{passive:o})}for(let e in n)"scroll"==e||t[e]||r.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&YM.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),pA.android&&pA.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!pA.ios||e.synthetic||e.altKey||e.metaKey||!((t=BM.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||XM.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,NA(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0)))}ignoreDuringComposition(e){return!(!/^key/.test(e.type)||e.synthetic)&&(this.composing>0||!!(pA.safari&&!pA.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function VM(e,t){return(n,r)=>{try{return t.call(e,r,n)}catch(e){KI(n.state,e)}}}function GM(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec,r=e&&e.plugin.domEventHandlers,o=e&&e.plugin.domEventObservers;if(r)for(let e in r){let o=r[e];o&&n(e).handlers.push(VM(t.value,o))}if(o)for(let e in o){let r=o[e];r&&n(e).observers.push(VM(t.value,r))}}for(let e in HM)n(e).handlers.push(HM[e]);for(let e in KM)n(e).observers.push(KM[e]);return t}const BM=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],XM="dthko",YM=[16,17,18,20,91,92,224,225];function WM(e){return.7*Math.max(0,e)+8}class qM{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,n,r=e.ownerDocument;for(let o=e.parentNode;o&&!(o==r.body||t&&n);)if(1==o.nodeType)!n&&o.scrollHeight>o.clientHeight&&(n=o),!t&&o.scrollWidth>o.clientWidth&&(t=o),o=o.assignedSlot||o.parentNode;else{if(11!=o.nodeType)break;o=o.host}return{x:t,y:n}}(e.contentDOM),this.atoms=e.state.facet(lM).map(t=>t(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(_N.allowMultipleSelections)&&function(e,t){let n=e.state.facet(RI);return n.length?n[0](t):pA.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=mA(e.root);if(!r||0==r.rangeCount)return!0;let o=r.getRangeAt(0).getClientRects();for(let e=0;e<o.length;e++){let n=o[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=cD(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,r=0,o=0,i=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:i}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let s=fM(this.view);e.clientX-s.left<=r+6?t=-WM(r-e.clientX):e.clientX+s.right>=i-6&&(t=WM(e.clientX-i)),e.clientY-s.top<=o+6?n=-WM(o-e.clientY):e.clientY+s.bottom>=a-6&&(n=WM(e.clientY-a)),this.setScrollSpeed(t,n)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}select(e){let{view:t}=this,n=NM(this.atoms,this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}const HM=Object.create(null),KM=Object.create(null),JM=pA.ie&&pA.ie_version<15||pA.ios&&pA.webkit_version<604;function eD(e,t,n){for(let r of e.facet(t))n=r(n,e);return n}function tD(e,t){t=eD(e.state,VI,t);let n,{state:r}=e,o=1,i=r.toText(t),a=i.lines==r.selection.ranges.length;if(null!=fD&&r.selection.ranges.every(e=>e.empty)&&fD==i.toString()){let e=-1;n=r.changeByRange(n=>{let s=r.doc.lineAt(n.from);if(s.from==e)return{range:n};e=s.from;let l=r.toText((a?i.line(o++).text:t)+r.lineBreak);return{changes:{from:s.from,insert:l},range:Ij.cursor(n.from+l.length)}})}else n=a?r.changeByRange(e=>{let t=i.line(o++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Ij.cursor(e.from+t.length)}}):r.replaceSelection(i);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function nD(e,t,n,r){if(1==r)return Ij.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),o=e.doc.lineAt(t),i=t-o.from;if(0==o.length)return Ij.cursor(t);0==i?n=1:i==o.length&&(n=-1);let a=i,s=i;n<0?a=bj(o.text,i,!1):s=bj(o.text,i);let l=r(o.text.slice(a,s));for(;a>0;){let e=bj(o.text,a,!1);if(r(o.text.slice(e,a))!=l)break;a=e}for(;s<o.length;){let e=bj(o.text,s);if(r(o.text.slice(s,e))!=l)break;s=e}return Ij.range(a+o.from,s+o.from)}(e.state,t,n);{let n=dI.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),o=n?n.posAtStart:r.from,i=n?n.posAtEnd:r.to;return i<e.state.doc.length&&i==r.to&&i++,Ij.range(o,i)}}KM.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},HM.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),KM.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},KM.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},HM.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of e.state.facet(zI))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=iD(e,t),r=cD(t),o=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),o=o.map(e.changes))},get(t,i,a){let s,l=iD(e,t),u=nD(e,l.pos,l.bias,r);if(n.pos!=l.pos&&!i){let t=nD(e,n.pos,n.bias,r),o=Math.min(t.from,u.from),i=Math.max(t.to,u.to);u=o<u.from?Ij.range(o,i):Ij.range(i,o)}return i?o.replaceRange(o.main.extend(u.from,u.to)):a&&1==r&&o.ranges.length>1&&(s=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:r,to:o}=e.ranges[n];if(r<=t&&o>=t)return Ij.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(o,l.pos))?s:a?o.addRange(u):Ij.create([u])}}}(e,t)),n){let r=!e.hasFocus;e.inputState.startMouseSelection(new qM(e,t,n,r)),r&&e.observer.ignore(()=>{CA(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let o=e.inputState.mouseSelection;if(o)return o.start(t),!1===o.dragging}else e.inputState.setSelectionOrigin("select.pointer");return!1};let rD=(e,t,n)=>t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right;function oD(e,t,n,r){let o=dI.find(e.docView,t);if(!o)return 1;let i=t-o.posAtStart;if(0==i)return 1;if(i==o.length)return-1;let a=o.coordsAt(i,-1);if(a&&rD(n,r,a))return-1;let s=o.coordsAt(i,1);return s&&rD(n,r,s)?1:a&&a.bottom>=r?-1:1}function iD(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:oD(e,n,t.clientX,t.clientY)}}const aD=pA.ie&&pA.ie_version<=11;let sD=null,lD=0,uD=0;function cD(e){if(!aD)return e.detail;let t=sD,n=uD;return sD=e,uD=Date.now(),lD=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(lD+1)%3:1}function dD(e,t,n,r){if(!(n=eD(e.state,VI,n)))return;let o=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:i}=e.inputState,a=r&&i&&function(e,t){let n=e.state.facet(QI);return n.length?n[0](t):pA.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:i.from,to:i.to}:null,s={from:o,insert:n},l=e.state.changes(a?[a,s]:s);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(o,-1),head:l.mapPos(o,1)},userEvent:a?"move.drop":"input.drop"}),e.inputState.draggedContent=null}HM.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let r=e.docView.nearest(t.target);if(r&&r.isWidget){let e=r.posAtStart,t=e+r.length;(e>=n.to||t<=n.from)&&(n=Ij.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",eD(e.state,GI,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},HM.dragend=e=>(e.inputState.draggedContent=null,!1),HM.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let r=Array(n.length),o=0,i=()=>{++o==n.length&&dD(e,t,r.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=i,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),i()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return dD(e,t,n,!0),!0}return!1},HM.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=JM?null:t.clipboardData;return n?(tD(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{e.focus(),n.remove(),tD(e,n.value)},50)}(e),!1)};let fD=null;HM.copy=HM.cut=(e,t)=>{let{text:n,ranges:r,linewise:o}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let o=-1;for(let{from:r}of e.selection.ranges){let i=e.doc.lineAt(r);i.number>o&&(t.push(i.text),n.push({from:i.from,to:Math.min(e.doc.length,i.to+1)})),o=i.number}r=!0}return{text:eD(e,GI,t.join(e.lineBreak)),ranges:n,linewise:r}}(e.state);if(!n&&!o)return!1;fD=o?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let i=JM?null:t.clipboardData;return i?(i.clearData(),i.setData("text/plain",n),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}(e,n),!1)};const hD=cN.define();function pD(e,t){let n=[];for(let r of e.facet(UI)){let o=r(e,t);o&&n.push(o)}return n.length?e.update({effects:n,annotations:hD.of(!0)}):null}function mD(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=pD(e.state,t);n?e.dispatch(n):e.update([])}},10)}KM.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),mD(e)},KM.blur=e=>{e.observer.clearSelectionRange(),mD(e)},KM.compositionstart=KM.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},KM.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,pA.chrome&&pA.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},KM.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},HM.beforeinput=(e,t)=>{var n,r;if("insertReplacementText"==t.inputType&&e.observer.editContext){let r=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),o=t.getTargetRanges();if(r&&o.length){let t=o[0],n=e.posAtDOM(t.startContainer,t.startOffset),i=e.posAtDOM(t.endContainer,t.endOffset);return ZM(e,{from:n,to:i,insert:e.state.toText(r)},null),!0}}let o;if(pA.chrome&&pA.android&&(o=BM.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(o.key,o.keyCode),"Backspace"==o.key||"Delete"==o.key)){let t=(null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0;setTimeout(()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return pA.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),pA.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>KM.compositionend(e,t),20),!1};const gD=new Set;const vD=["pre-wrap","normal","pre-line","break-spaces"];let yD=!1;function bD(){yD=!1}class OD{constructor(e){this.lineWrapping=e,this.doc=uj.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return vD.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,o,i){let a=vD.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=o,s){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class wD{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class SD{constructor(e,t,n,r,o){this.from=e,this.length=t,this.top=n,this.height=r,this._content=o}get type(){return"number"==typeof this._content?oI.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof lI?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new SD(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var xD=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(xD||(xD={}));const kD=.001;class _D{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>kD&&(yD=!0),this.height=e)}replace(e,t,n){return _D.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let o=this,i=n.doc;for(let a=r.length-1;a>=0;a--){let{fromA:s,toA:l,fromB:u,toB:c}=r[a],d=o.lineAt(s,xD.ByPosNoHeight,n.setDoc(t),0,0),f=d.to>=l?d:o.lineAt(l,xD.ByPosNoHeight,n,0,0);for(c+=f.to-l,l=f.to;a>0&&d.from<=r[a-1].toA;)s=r[a-1].fromA,u=r[a-1].fromB,a--,s<d.from&&(d=o.lineAt(s,xD.ByPosNoHeight,n,0,0));u+=d.from-s,s=d.from;let h=ND.build(n.setDoc(i),e,u,c);o=PD(o,o.replace(s,l,h))}return o.updateHeight(n,0)}static empty(){return new $D(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,o=0;for(;;)if(t==n)if(r>2*o){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),n+=1+o.break,r-=o.size}else{if(!(o>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,o-=t.size}}else if(r<o){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(o+=t.size)}let i=0;return null==e[t-1]?(i=1,t--):null==e[t]&&(i=1,n++),new CD(_D.of(e.slice(0,t)),i,_D.of(e.slice(n)))}}function PD(e,t){return e==t?e:(e.constructor!=t.constructor&&(yD=!0),t)}_D.prototype.size=1;class ED extends _D{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new SD(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,o){return this.blockAt(0,n,r,o)}forEachLine(e,t,n,r,o,i){e<=o+this.length&&t>=o&&i(this.blockAt(0,n,r,o))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class $D extends ED{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new SD(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof $D||r instanceof TD&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof TD?r=new $D(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):_D.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class TD extends _D{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,o=e.doc.lineAt(t+this.length).number,i=o-r+1,a=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*i);n=t/i,this.length>i+1&&(a=(this.height-t)/(this.length-i-1))}else n=this.height/i;return{firstLine:r,lastLine:o,perLine:n,perChar:a}}blockAt(e,t,n,r){let{firstLine:o,lastLine:i,perLine:a,perChar:s}=this.heightMetrics(t,r);if(t.lineWrapping){let o=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),i=t.doc.lineAt(o),l=a+i.length*s,u=Math.max(n,e-l/2);return new SD(i.from,i.length,u,l,0)}{let r=Math.max(0,Math.min(i-o,Math.floor((e-n)/a))),{from:s,length:l}=t.doc.line(o+r);return new SD(s,l,n+a*r,a,0)}}lineAt(e,t,n,r,o){if(t==xD.ByHeight)return this.blockAt(e,n,r,o);if(t==xD.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new SD(t,r-t,0,0,0)}let{firstLine:i,perLine:a,perChar:s}=this.heightMetrics(n,o),l=n.doc.lineAt(e),u=a+l.length*s,c=l.number-i,d=r+a*c+s*(l.from-o-c);return new SD(l.from,l.length,Math.max(r,Math.min(d,r+this.height-u)),u,0)}forEachLine(e,t,n,r,o,i){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:s,perChar:l}=this.heightMetrics(n,o);for(let u=e,c=r;u<=t;){let t=n.doc.lineAt(u);if(u==e){let n=t.number-a;c+=s*n+l*(e-o-n)}let r=s+l*t.length;i(new SD(t.from,t.length,c,r,0)),c+=r,u=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof TD?n[n.length-1]=new TD(e.length+r):n.push(null,new TD(r-1))}if(e>0){let t=n[0];t instanceof TD?n[0]=new TD(e+t.length):n.unshift(new TD(e-1),null)}return _D.of(n)}decomposeLeft(e,t){t.push(new TD(e-1),null)}decomposeRight(e,t){t.push(null,new TD(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],i=Math.max(t,r.from),a=-1;for(r.from>t&&n.push(new TD(r.from-t-1).updateHeight(e,t));i<=o&&r.more;){let t=e.doc.lineAt(i).length;n.length&&n.push(null);let o=r.heights[r.index++];-1==a?a=o:Math.abs(o-a)>=kD&&(a=-2);let s=new $D(t,o);s.outdated=!1,n.push(s),i+=t+1}i<=o&&n.push(null,new TD(o-i).updateHeight(e,i));let s=_D.of(n);return(a<0||Math.abs(s.height-this.height)>=kD||Math.abs(a-this.heightMetrics(e,t).perLine)>=kD)&&(yD=!0),PD(this,s)}return(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class CD extends _D{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let o=n+this.left.height;return e<o?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,n,r,o){let i=r+this.left.height,a=o+this.left.length+this.break,s=t==xD.ByHeight?e<i:e<a,l=s?this.left.lineAt(e,t,n,r,o):this.right.lineAt(e,t,n,i,a);if(this.break||(s?l.to<a:l.from>a))return l;let u=t==xD.ByPosNoHeight?xD.ByPosNoHeight:xD.ByPos;return s?l.join(this.right.lineAt(a,u,n,i,a)):this.left.lineAt(a,u,n,r,o).join(l)}forEachLine(e,t,n,r,o,i){let a=r+this.left.height,s=o+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,r,o,i),t>=s&&this.right.forEachLine(e,t,n,a,s,i);else{let l=this.lineAt(s,xD.ByPos,n,r,o);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,o,i),l.to>=e&&l.from<=t&&i(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,a,s,i)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let o=[];e>0&&this.decomposeLeft(e,o);let i=o.length;for(let e of n)o.push(e);if(e>0&&jD(o,i-1),t<this.length){let e=o.length;this.decomposeRight(t,o),jD(o,e)}return _D.of(o)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?_D.of(this.break?[e,null,t]:[e,t]):(this.left=PD(this.left,e),this.right=PD(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:o,right:i}=this,a=t+o.length+this.break,s=null;return r&&r.from<=t+o.length&&r.more?s=o=o.updateHeight(e,t,n,r):o.updateHeight(e,t,n),r&&r.from<=a+i.length&&r.more?s=i=i.updateHeight(e,a,n,r):i.updateHeight(e,a,n),s?this.balanced(o,i):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function jD(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof TD&&(r=e[t+1])instanceof TD&&e.splice(t-1,3,new TD(n.length+1+r.length))}class ND{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof $D?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new $D(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new ED(i,r,n)):(i||o||r>=5)&&this.addLineDeco(r,o,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new $D(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new TD(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof $D)return e;let t=new $D(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof $D||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new $D(0,-1));let n=e;for(let e of this.nodes)e instanceof $D&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let o=new ND(n,e);return jN.spans(t,n,r,o,0),o.finish(n)}}class AD{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&cI(e,t,this.changes,5)}}function ID(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,o=r.defaultView||window,i=Math.max(0,n.left),a=Math.min(o.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(o.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let n=t,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();i=Math.max(i,r.left),a=Math.min(a,r.right),s=Math.max(s,r.top),l=Math.min(t==e.parentNode?o.innerHeight:l,r.bottom)}t="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:i-n.left,right:Math.max(i,a)-n.left,top:s-(n.top+t),bottom:Math.max(s,l)-(n.top+t)}}function MD(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class DD{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return iI.replace({widget:new RD(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class RD extends rI{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class QD{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=FD,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=vI.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(iM).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new OD(t),this.stateDeco=e.facet(aM).filter(e=>"function"!=typeof e),this.heightMap=_D.empty().applyChanges(this.stateDeco,uj.empty,this.heightOracle.setDoc(e.doc),[new pM(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=iI.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:e,to:t})=>r>=e&&r<=t)){let{from:t,to:n}=this.lineBlockAt(r);e.push(new zD(t,n))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?FD:new UD(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(VD(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(aM).filter(e=>"function"!=typeof e);let r=e.changedRanges,o=pM.extendWithRanges(r,function(e,t,n){let r=new AD;return jN.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:Pj.empty(this.state.doc.length))),i=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);bD(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=i||yD)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=i);let s=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let l=s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(XI)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?vI.RTL:vI.LTR;let i=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),s=i||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let l=0,u=0;if(a.width&&a.height){let{scaleX:e,scaleY:n}=PA(t,a);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,l|=16,i=s=!0)}let c=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==c&&this.paddingBottom==d||(this.paddingTop=c,this.paddingBottom=d,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=IA(e.scrollDOM);let h=(this.printing?MD:ID)(t,this.paddingTop),p=h.top-this.pixelViewport.top,m=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(s=!0)),!this.inView&&!this.scrollTarget&&!function(e){let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView||window;return t.left<n.innerWidth&&t.right>0&&t.top<n.innerHeight&&t.bottom>0}(e.dom))return 0;let v=a.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),s){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(i=!0),i||r.lineWrapping&&Math.abs(v-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:a,textHeight:s}=e.docView.measureTextSize();i=n>0&&r.refresh(o,n,a,s,Math.max(5,v/a),t),i&&(e.docView.minWidth=0,l|=16)}p>0&&m>0?u=Math.max(p,m):p<0&&m<0&&(u=Math.min(p,m)),bD();for(let n of this.viewports){let o=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(i?_D.empty().applyChanges(this.stateDeco,uj.empty,this.heightOracle,[new pM(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,i,new wD(n.from,o))}yD&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),l|=this.updateForViewport()),(2&l||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(i?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:i,visibleBottom:a}=this,s=new zD(r.lineAt(i-1e3*n,xD.ByHeight,o,0,0).from,r.lineAt(a+1e3*(1-n),xD.ByHeight,o,0,0).to);if(t){let{head:e}=t.range;if(e<s.from||e>s.to){let n,i=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),a=r.lineAt(e,xD.ByPos,o,0,0);n="center"==t.y?(a.top+a.bottom)/2-i/2:"start"==t.y||"nearest"==t.y&&e<s.from?a.top:a.bottom-i,s=new zD(r.lineAt(n-500,xD.ByHeight,o,0,0).from,r.lineAt(n+i+500,xD.ByHeight,o,0,0).to)}}return s}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new zD(this.heightMap.lineAt(n,xD.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,xD.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,xD.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,xD.ByPos,this.heightOracle,0,0),{visibleTop:i,visibleBottom:a}=this;return(0==e||r<=i-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(n,250)))&&r>i-2e3&&o<a+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new DD(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,o=r>>1,i=r<<1;if(this.defaultTextDirection!=vI.LTR&&!n)return[];let a=[],s=(r,i,l,u)=>{if(i-r<o)return;let c=this.state.selection.main,d=[c.from];c.empty||d.push(c.to);for(let e of d)if(e>r&&e<i)return s(r,e-10,l,u),void s(e+10,i,l,u);let f=function(e,t){for(let n of e)if(t(n))return n;return}(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<o&&Math.abs(e.to-i)<o&&!d.some(t=>e.from<t&&e.to>t));if(!f){if(i<l.to&&t&&n&&t.visibleRanges.some(e=>e.from<=i&&e.to>=i)){let e=t.moveToLineBoundary(Ij.cursor(i),!1,!0).head;e>r&&(i=e)}let e=this.gapSize(l,r,i,u);f=new DD(r,i,e,n||e<2e6?e:2e6)}a.push(f)},l=t=>{if(t.length<i||t.type!=oI.Text)return;let o=function(e,t,n){let r=[],o=e,i=0;jN.spans(n,e,t,{span(){},point(e,t){e>o&&(r.push({from:o,to:e}),i+=e-o),o=t}},20),o<t&&(r.push({from:o,to:t}),i+=t-o);return{total:i,ranges:r}}(t.from,t.to,this.stateDeco);if(o.total<i)return;let a,l,u=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let e,n,i=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=u){let r=ZD(o,u),a=((this.visibleBottom-this.visibleTop)/2+i)/t.height;e=r-a,n=r+a}else e=(this.visibleTop-t.top-i)/t.height,n=(this.visibleBottom-t.top+i)/t.height;a=LD(o,e),l=LD(o,n)}else{let n=o.total*this.heightOracle.charWidth,i=r*this.heightOracle.charWidth,s=0;if(n>2e6)for(let n of e)n.from>=t.from&&n.from<t.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+s<this.pixelViewport.left&&(s=n.size-n.displaySize);let c,d,f=this.pixelViewport.left+s,h=this.pixelViewport.right+s;if(null!=u){let e=ZD(o,u),t=((h-f)/2+i)/n;c=e-t,d=e+t}else c=(f-i)/n,d=(h+i)/n;a=LD(o,c),l=LD(o,d)}a>t.from&&s(t.from,a,t,o),l<t.to&&s(l,t.to,t,o)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return a}gapSize(e,t,n,r){let o=ZD(r,n)-ZD(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){DD.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=iI.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];jN.spans(t,this.viewport.from,this.viewport.to,{span(e,t){n.push({from:e,to:t})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let t=0;t<n.length&&!(8&r);t++){let o=this.visibleRanges[t],i=n[t];o.from==i.from&&o.to==i.to||(r|=4,e&&e.mapPos(o.from,-1)==i.from&&e.mapPos(o.to,1)==i.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||VD(this.heightMap.lineAt(e,xD.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||VD(this.heightMap.lineAt(this.scaler.fromDOM(e),xD.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return VD(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class zD{constructor(e,t){this.from=e,this.to=t}}function LD({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:o}=t[e],i=o-n;if(r<=i)return n+r;r-=i}}function ZD(e,t){let n=0;for(let{from:r,to:o}of e.ranges){if(t<=o){n+=t-r;break}n+=o-r}return n/e.total}const FD={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class UD{constructor(e,t,n){let r=0,o=0,i=0;this.viewports=n.map(({from:n,to:o})=>{let i=t.lineAt(n,xD.ByPos,e,0,0).top,a=t.lineAt(o,xD.ByPos,e,0,0).bottom;return r+=a-i,{from:n,to:o,top:i,bottom:a,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=i+(e.top-o)*this.scale,i=e.domBottom=e.domTop+(e.bottom-e.top),o=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-n)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);n=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return n+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);n=o.bottom,r=o.domBottom}}eq(e){return e instanceof UD&&(this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to))}}function VD(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new SD(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map(e=>VD(e,t)):e._content)}const GD=Rj.define({combine:e=>e.join(" ")}),BD=Rj.define({combine:e=>e.indexOf(!0)>-1}),XD=YN.newName(),YD=YN.newName(),WD=YN.newName(),qD={"&light":"."+YD,"&dark":"."+WD};function HD(e,t,n){return new YN(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]}):e+" "+t})}const KD=HD("."+XD,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},qD),JD={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},eR=pA.ie&&pA.ie_version<=11;class tR{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new EA,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(pA.ie&&pA.ie_version<=11||pA.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),!window.EditContext||!pA.android||!1===e.constructor.EDIT_CONTEXT||pA.chrome&&pA.chrome_version<126||(this.editContext=new oR(e),e.state.facet(JI)&&(e.contentDOM.editContext=this.editContext.editContext)),eR&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(JI)?n.root.activeElement!=this.dom:!vA(this.dom,r))return;let o=r.anchorNode&&n.docView.nearest(r.anchorNode);o&&o.ignoreEvent(e)?t||(this.selectionChanged=!1):(pA.ie&&pA.ie_version<=11||pA.android&&pA.chrome)&&!n.state.selection.main.empty&&r.focusNode&&bA(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=mA(e.root);if(!t)return!1;let n=pA.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return rR(e,n)}let n=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),n?rR(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=vA(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,xA(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=xA(n))}else{if(n==e)return!0;r=OA(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JD),eR&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),eR&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&NA(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let o of e){let e=this.readMutation(o);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&vA(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new zM(this.view,e,t,n);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=LM(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=nR(t,e.previousSibling||e.target.previousSibling,-1),r=nR(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(JI)!=e.state.facet(JI)&&(e.view.contentDOM.editContext=e.state.facet(JI)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function nR(e,t,n){for(;t;){let r=zA.get(t);if(r&&r.parent==e)return r;let o=t.parentNode;t=o!=e.dom?o:n>0?t.nextSibling:t.previousSibling}return null}function rR(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return bA(a.node,a.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}class oR{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let r=e.state.selection.main,{anchor:o,head:i}=r,a=this.toEditorPos(n.updateRangeStart),s=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let l=s-a>n.text.length;a==this.from&&o<this.from?a=o:s==this.to&&o>this.to&&(s=o);let u=FM(e.state.sliceDoc(a,s),n.text,(l?r.from:r.to)-a,l?"end":null);if(!u){let t=Ij.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));return void(t.main.eq(r)||e.dispatch({selection:t,userEvent:"select"}))}let c={from:u.from+a,to:u.toA+a,insert:uj.of(n.text.slice(u.from,u.toB).split("\n"))};if((pA.mac||pA.android)&&c.from==i-1&&/^\. ?$/.test(n.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(c={from:a,to:s,insert:uj.of([n.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let t=this.to-this.from+(c.to-c.from+c.insert.length);ZM(e,c,Ij.single(this.toEditorPos(n.selectionStart,t),this.toEditorPos(n.selectionEnd,t)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),c.from<c.to&&!c.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(t.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let r=[],o=null;for(let t=this.toEditorPos(n.rangeStart),i=this.toEditorPos(n.rangeEnd);t<i;t++){let n=e.coordsForChar(t);o=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,r=e.underlineThickness;if(!/none/i.test(t)&&!/none/i.test(r)){let o=this.toEditorPos(e.rangeStart),i=this.toEditorPos(e.rangeEnd);if(o<i){let e=`text-decoration: underline ${/^[a-z]/.test(t)?t+" ":"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${/thin/i.test(r)?1:2}px`;n.push(iI.mark({attributes:{style:e}}).range(o,i))}}}e.dispatch({effects:HI.of(iI.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let e in this.handlers)t.addEventListener(e,this.handlers[e]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=mA(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,i,a,s,l)=>{if(n)return;let u=l.length-(i-o);if(r&&i>=r.to){if(r.from==o&&r.to==i&&r.insert.eq(l))return r=this.pendingContextChange=null,t+=u,void(this.to+=u);r=null,this.revertPending(e.state)}if(o+=t,(i+=t)<=this.from)this.from+=u,this.to+=u;else if(o<this.to){if(o<this.from||i>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(o),this.toContextPos(i),l.toString()),this.to+=u}t+=u}),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==r||this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class iR{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(e=>e.forEach(e=>n(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new QD(e.state||_N.create(e)),e.scrollTo&&e.scrollTo.is(qI)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(tM).map(e=>new rM(e));for(let e of this.plugins)e.update(this);this.observer=new tR(this),this.inputState=new UM(this),this.inputState.ensureHandlers(this.plugins),this.docView=new gM(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof pN?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,o=this.state;for(let t of e){if(t.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=t.state}if(this.destroyed)return void(this.viewState.state=o);let i=this.hasFocus,a=0,s=null;e.some(e=>e.annotation(hD))?(this.inputState.notifiedFocused=i,a=1):i!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=i,s=pD(o,i),s||(a=1));let l=this.observer.delayedAndroidKey,u=null;if(l?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(u=null)):this.observer.clear(),o.facet(_N.phrases)!=this.state.facet(_N.phrases))return this.setState(o);t=mM.create(this,o,e),t.flags|=a;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(c&&(c=c.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;c=new WI(e.empty?e:Ij.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(qI)&&(c=e.value.clip(this.state))}this.viewState.update(t,c),this.bidiCache=lR.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(hM)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(t.startState.facet(GD)!=t.state.facet(GD)&&(this.viewState.mustMeasureContent=!0),(n||r||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!t.empty)for(let e of this.state.facet(ZI))try{e(t)}catch(e){KI(this.state,e,"update listener")}(s||u)&&Promise.resolve().then(()=>{s&&this.state==s.startState&&this.dispatch(s),u&&!LM(this,u)&&l.force&&NA(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new QD(e),this.plugins=e.facet(tM).map(e=>new rM(e)),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new gM(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(tM),n=e.state.facet(tM);if(t!=n){let r=[];for(let o of n){let n=t.indexOf(o);if(n<0)r.push(new rM(o));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){KI(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:i}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(i=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(i<0)if(IA(n))o=-1,i=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);o=e.from,i=e.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];4&a||([this.measureRequests,s]=[s,this.measureRequests]);let l=s.map(e=>{try{return e.read(this)}catch(e){return KI(this.state,e),sR}}),u=mM.create(this,this.state,[]),c=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),c=this.docView.update(u),c&&this.docViewUpdate());for(let e=0;e<s.length;e++)if(l[e]!=sR)try{let t=s[e];t.write&&t.write(l[e],this)}catch(e){KI(this.state,e)}if(c&&this.docView.updateSelection(!0),!u.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,i=-1;continue}{let e=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-i;if(e>1||e<-1){r+=e,n.scrollTop=r/this.scaleY,i=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(ZI))e(t)}get themeClasses(){return XD+" "+(this.state.facet(BD)?WD:YD)+" "+this.state.facet(GD)}updateAttrs(){let e=uR(this,oM,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(JI)?"true":"false",class:"cm-content",style:`${pA.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),uR(this,iM,t);let n=this.observer.ignore(()=>{let n=tI(this.contentDOM,this.contentAttrs,t),r=tI(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(iR.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(hM);let e=this.state.facet(iR.cspNonce);YN.mount(this.root,this.styleModules.concat(KD).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return AM(this,e,CM(this,e,t,n))}moveByGroup(e,t){return AM(this,e,CM(this,e,t,t=>function(e,t,n){let r=e.state.charCategorizer(t),o=r(n);return e=>{let t=r(e);return o==wN.Space&&(o=t),o==t}}(this,e.head,t)))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=n[t?n.length-1:0];return Ij.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let o=TM(e,t.head,t.assoc||-1),i=r&&o.type==oI.Text&&(e.lineWrapping||o.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>o.from?t.head-1:t.head):null;if(i){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(o.from),a=e.posAtCoords({x:n==(r==vI.LTR)?t.right-1:t.left+1,y:(i.top+i.bottom)/2});if(null!=a)return Ij.cursor(a,n?-1:1)}return Ij.cursor(n?o.to:o.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return AM(this,e,function(e,t,n,r){let o=t.head,i=n?1:-1;if(o==(n?e.state.doc.length:0))return Ij.cursor(o,t.assoc);let a,s=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),u=e.coordsAtPos(o,t.assoc||-1),c=e.documentTop;if(u)null==s&&(s=u.left-l.left),a=i<0?u.top:u.bottom;else{let t=e.viewState.lineBlockAt(o);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(o-t.from))),a=(i<0?t.top:t.bottom)+c}let d=l.left+s,f=null!=r?r:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let n=a+(f+t)*i,r=PM(e,{x:d,y:n},!1,i);if(n<l.top||n>l.bottom||(i<0?r<o:r>o)){let t=e.docView.coordsForChar(r),o=!t||n<t.top?-1:1;return Ij.cursor(r,o,void 0,s)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),PM(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r);return kA(n,o[EI.find(o,e-r.from,-1,t)].dir==vI.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(BI)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>aR)return AI(e.length);let t,n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n&&(r.fresh||$I(r.isolates,t=cM(this,e))))return r.order;t||(t=cM(this,e));let r=NI(e.text,n,t);return this.bidiCache.push(new lR(e.from,e.to,n,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||pA.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{CA(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return qI.of(new WI("number"==typeof e?Ij.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return qI.of(new WI(Ij.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return nM.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return nM.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=YN.newName(),r=[GD.of(n),hM.of(HD(`.${n}`,e))];return t&&t.dark&&r.push(BD.of(!0)),r}static baseTheme(e){return qj.lowest(hM.of(HD("."+XD,e,qD)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&zA.get(n)||zA.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}iR.styleModule=hM,iR.inputHandler=FI,iR.clipboardInputFilter=VI,iR.clipboardOutputFilter=GI,iR.scrollHandler=YI,iR.focusChangeEffect=UI,iR.perLineTextDirection=BI,iR.exceptionSink=LI,iR.updateListener=ZI,iR.editable=JI,iR.mouseSelectionStyle=zI,iR.dragMovesSelection=QI,iR.clickAddsSelectionRange=RI,iR.decorations=aM,iR.outerDecorations=sM,iR.atomicRanges=lM,iR.bidiIsolatedRanges=uM,iR.scrollMargins=dM,iR.darkTheme=BD,iR.cspNonce=Rj.define({combine:e=>e.length?e[0]:""}),iR.contentAttributes=iM,iR.editorAttributes=oM,iR.lineWrapping=iR.contentAttributes.of({class:"cm-lineWrapping"}),iR.announce=hN.define();const aR=4096,sR={};class lR{constructor(e,t,n,r,o,i){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=o,this.order=i}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:vI.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let i=e[o];i.dir!=r||t.touchesRange(i.from,i.to)||n.push(new lR(t.mapPos(i.from,1),t.mapPos(i.to,-1),i.dir,i.isolates,!1,i.order))}return n}}function uR(e,t,n){for(let r=e.state.facet(t),o=r.length-1;o>=0;o--){let t=r[o],i="function"==typeof t?t(e):t;i&&KA(i,n)}return n}const cR=pA.mac?"mac":pA.windows?"win":pA.linux?"linux":"key";function dR(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const fR=qj.default(iR.domEventHandlers({keydown:(e,t)=>bR(mR(t.state),e,t,"editor")})),hR=Rj.define({enables:fR}),pR=new WeakMap;function mR(e){let t=e.facet(hR),n=pR.get(t);return n||pR.set(t,n=function(e,t=cR){let n=Object.create(null),r=Object.create(null),o=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},i=(e,r,i,a,s)=>{var l,u;let c=n[e]||(n[e]=Object.create(null)),d=r.split(/ (?!$)/).map(e=>function(e,t){const n=e.split(/-(?!$)/);let r,o,i,a,s=n[n.length-1];"Space"==s&&(s=" ");for(let e=0;e<n.length-1;++e){const s=n[e];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))r=!0;else if(/^(c|ctrl|control)$/i.test(s))o=!0;else if(/^s(hift)?$/i.test(s))i=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);"mac"==t?a=!0:o=!0}}return r&&(s="Alt-"+s),o&&(s="Ctrl-"+s),a&&(s="Meta-"+s),i&&(s="Shift-"+s),s}(e,t));for(let t=1;t<d.length;t++){let n=d.slice(0,t).join(" ");o(n,!0),c[n]||(c[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=gR={view:t,prefix:n,scope:e};return setTimeout(()=>{gR==r&&(gR=null)},vR),!0}]})}let f=d.join(" ");o(f,!1);let h=c[f]||(c[f]={preventDefault:!1,stopPropagation:!1,run:(null===(u=null===(l=c._any)||void 0===l?void 0:l.run)||void 0===u?void 0:u.slice())||[]});i&&h.run.push(i),a&&(h.preventDefault=!0),s&&(h.stopPropagation=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:o}=r;for(let t in e)e[t].run.push(e=>o(e,yR))}let o=r[t]||r.key;if(o)for(let t of e)i(t,o,r.run,r.preventDefault,r.stopPropagation),r.shift&&i(t,"Shift-"+o,r.shift,r.preventDefault,r.stopPropagation)}return n}(t.reduce((e,t)=>e.concat(t),[]))),n}let gR=null;const vR=4e3;let yR=null;function bR(e,t,n,r){yR=t;let o=function(e){var t=!(JN&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||eA&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?KN:HN)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),i=Sj(Oj(o,0))==o.length&&" "!=o,a="",s=!1,l=!1,u=!1;gR&&gR.view==n&&gR.scope==r&&(a=gR.prefix+" ",YM.indexOf(t.keyCode)<0&&(l=!0,gR=null));let c,d,f=new Set,h=e=>{if(e){for(let t of e.run)if(!f.has(t)&&(f.add(t),t(n)))return e.stopPropagation&&(u=!0),!0;e.preventDefault&&(e.stopPropagation&&(u=!0),l=!0)}return!1},p=e[r];return p&&(h(p[a+dR(o,t,!i)])?s=!0:!i||!(t.altKey||t.metaKey||t.ctrlKey)||pA.windows&&t.ctrlKey&&t.altKey||pA.mac&&t.altKey&&!t.ctrlKey&&!t.metaKey||!(c=HN[t.keyCode])||c==o?i&&t.shiftKey&&h(p[a+dR(o,t,!0)])&&(s=!0):(h(p[a+dR(c,t,!0)])||t.shiftKey&&(d=KN[t.keyCode])!=o&&d!=c&&h(p[a+dR(d,t,!1)]))&&(s=!0),!s&&h(p._any)&&(s=!0)),l&&(s=!0),s&&u&&t.stopPropagation(),yR=null,s}class OR{constructor(e,t,n,r,o){this.className=e,this.left=t,this.top=n,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let o=wR(e);return[new OR(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),o=Math.min(n.to,e.viewport.to),i=e.textDirection==vI.LTR,a=e.contentDOM,s=a.getBoundingClientRect(),l=wR(e),u=a.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=s.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=s.right-(c?parseInt(c.paddingRight):0),h=TM(e,r,1),p=TM(e,o,-1),m=h.type==oI.Text?h:null,g=p.type==oI.Text?p:null;m&&(e.lineWrapping||h.widgetLineBreaks)&&(m=SR(e,r,1,m));g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=SR(e,o,-1,g));if(m&&g&&m.from==g.from&&m.to==g.to)return y(b(n.from,n.to,m));{let t=m?b(n.from,null,m):O(h,!1),r=g?b(null,n.to,g):O(p,!0),o=[];return(m||h).to<(g||p).from-(m&&g?1:0)||h.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?o.push(v(d,t.bottom,f,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==oI.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),y(t).concat(o).concat(y(r))}function v(e,n,r,o){return new OR(t,e-l.left,n-l.top,r-e,o-n)}function y({top:e,bottom:t,horizontal:n}){let r=[];for(let o=0;o<n.length;o+=2)r.push(v(n[o],e,n[o+1],t));return r}function b(t,n,r){let o=1e9,a=-1e9,s=[];function l(t,n,l,u,c){let h=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);h&&p&&(o=Math.min(h.top,p.top,o),a=Math.max(h.bottom,p.bottom,a),c==vI.LTR?s.push(i&&n?d:h.left,i&&u?f:p.right):s.push(!i&&u?d:p.left,!i&&n?f:h.right))}let u=null!=t?t:r.from,c=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>u&&r.from<c)for(let o=Math.max(r.from,u),i=Math.min(r.to,c);;){let r=e.state.doc.lineAt(o);for(let a of e.bidiSpans(r)){let e=a.from+r.from,s=a.to+r.from;if(e>=i)break;s>o&&l(Math.max(e,o),null==t&&e<=u,Math.min(s,i),null==n&&s>=c,a.dir)}if(o=r.to+1,o>=i)break}return 0==s.length&&l(u,null==t,c,null==n,e.textDirection),{top:o,bottom:a,horizontal:s}}function O(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function wR(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==vI.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function SR(e,t,n,r){let o=e.coordsAtPos(t,2*n);if(!o)return r;let i=e.dom.getBoundingClientRect(),a=(o.top+o.bottom)/2,s=e.posAtCoords({x:i.left+1,y:a}),l=e.posAtCoords({x:i.right-1,y:a});return null==s||null==l?r:{from:Math.max(r.from,Math.min(s,l)),to:Math.min(r.to,Math.max(s,l))}}class xR{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(kR)!=e.state.facet(kR)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(kR);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>!function(e,t){return e.constructor==t.constructor&&e.eq(t)}(e,this.drawn[t]))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e,pA.ios&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const kR=Rj.define();function _R(e){return[nM.define(t=>new xR(t,e)),kR.of(e)]}const PR=Rj.define({combine:e=>PN(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function ER(e){return e.startState.facet(PR)!=e.state.facet(PR)}const $R=_R({above:!0,markers(e){let{state:t}=e,n=t.facet(PR),r=[];for(let o of t.selection.ranges){let i=o==t.selection.main;if(o.empty||n.drawRangeCursor){let t=i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=o.empty?o:Ij.cursor(o.head,o.head>o.anchor?-1:1);for(let o of OR.forRange(e,t,n))r.push(o)}}return r},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=ER(e);return n&&TR(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){TR(t.state,e)},class:"cm-cursorLayer"});function TR(e,t){t.style.animationDuration=e.facet(PR).cursorBlinkRate+"ms"}const CR=_R({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:OR.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||ER(e),class:"cm-selectionLayer"}),jR=qj.highest(iR.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),NR=hN.define({map:(e,t)=>null==e?null:t.mapPos(e)}),AR=Vj.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(NR)?t.value:e,e))}),IR=nM.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(AR);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(AR)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(AR),n=null!=t&&e.coordsAtPos(t);if(!n)return null;let r=e.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-r.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:n}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/n+"px",this.cursor.style.height=e.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(AR)!=e&&this.view.dispatch({effects:NR.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function MR(e,t,n,r,o){t.lastIndex=0;for(let i,a=e.iterRange(n,r),s=n;!a.next().done;s+=a.value.length)if(!a.lineBreak)for(;i=t.exec(a.value);)o(s+i.index,i)}class DR{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:o,maxLength:i=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,o)=>r(o,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,o)=>{let i=n(e,t,r);i&&o(r,r+e[0].length,i)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,o)=>o(r,r+e[0].length,n)}this.boundary=o,this.maxLength=i}createDeco(e){let t=new NN,n=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:o,to:i}of n)o=Math.max(e.state.doc.lineAt(o).from,o-t),i=Math.min(e.state.doc.lineAt(i).to,i+t),r.length&&r[r.length-1].to>=o?r[r.length-1].to=i:r.push({from:o,to:i});return r}(e,this.maxLength))MR(e.state.doc,this.regexp,t,r,(t,r)=>this.addMatch(r,e,t,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((t,o,i,a)=>{a>=e.view.viewport.from&&i<=e.view.viewport.to&&(n=Math.min(i,n),r=Math.max(a,r))}),e.viewportMoved||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let o of e.visibleRanges){let i=Math.max(o.from,n),a=Math.min(o.to,r);if(a>=i){let n=e.state.doc.lineAt(i),r=n.to<a?e.state.doc.lineAt(a):n,s=Math.max(o.from,n.from),l=Math.min(o.to,r.to);if(this.boundary){for(;i>n.from;i--)if(this.boundary.test(n.text[i-1-n.from])){s=i;break}for(;a<r.to;a++)if(this.boundary.test(r.text[a-r.from])){l=a;break}}let u,c=[],d=(e,t,n)=>c.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=s-n.from;(u=this.regexp.exec(n.text))&&u.index<l-n.from;)this.addMatch(u,e,u.index+n.from,d);else MR(e.state.doc,this.regexp,s,l,(t,n)=>this.addMatch(n,e,t,d));t=t.update({filterFrom:s,filterTo:l,filter:(e,t)=>e<s||t>l,add:c})}}return t}}const RR=null!=/x/.unicode?"gu":"g",QR=new RegExp("[\0-\b\n--\u2028\u2029\ufeff-]",RR),zR={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let LR=null;const ZR=Rj.define({combine(e){let t=PN(e,{render:null,specialChars:QR,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==LR&&"undefined"!=typeof document&&document.body){let t=document.body.style;LR=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return LR||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,RR)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,RR)),t}});let FR=null;class UR extends rI{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"":10==e?"":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(zR[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class VR extends rI{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const GR=iI.line({class:"cm-activeLine"}),BR=nM.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){let o=e.lineBlockAt(r.head);o.from>t&&(n.push(GR.range(o.from)),t=o.from)}return iI.set(n)}},{decorations:e=>e.decorations});class XR extends rI{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?yA(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=kA(t[0],"rtl"!=n.direction),o=parseInt(n.lineHeight);return r.bottom-r.top>1.5*o?{left:r.left,right:r.right,top:r.top,bottom:r.top+o}:r}ignoreEvent(){return!1}}const YR=2e3;function WR(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),o=n-r.from,i=o>YR?-1:o==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):UN(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:i,off:o}}function qR(e,t){let n=WR(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),o=e.state.doc.lineAt(t);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(e.changes)}},get(t,o,i){let a=WR(e,t);if(!a)return r;let s=function(e,t,n){let r=Math.min(t.line,n.line),o=Math.max(t.line,n.line),i=[];if(t.off>YR||n.off>YR||t.col<0||n.col<0){let a=Math.min(t.off,n.off),s=Math.max(t.off,n.off);for(let t=r;t<=o;t++){let n=e.doc.line(t);n.length<=s&&i.push(Ij.range(n.from+a,n.to+s))}}else{let a=Math.min(t.col,n.col),s=Math.max(t.col,n.col);for(let t=r;t<=o;t++){let n=e.doc.line(t),r=VN(n.text,a,e.tabSize,!0);if(r<0)i.push(Ij.cursor(n.to));else{let t=VN(n.text,s,e.tabSize);i.push(Ij.range(n.from+r,n.from+t))}}}return i}(e.state,n,a);return s.length?i?Ij.create(s.concat(r.ranges)):Ij.create(s):r}}:null}const HR={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},KR={style:"cursor: crosshair"};const JR="-10000px";class eQ{constructor(e,t,n,r){this.facet=t,this.createTooltipView=n,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let o=null;this.tooltipViews=this.tooltips.map(e=>o=n(e,o))}update(e,t){var n;let r=e.state.facet(this.facet),o=r.filter(e=>e);if(r===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let i=[],a=t?[]:null;for(let n=0;n<o.length;n++){let r=o[n],s=-1;if(r){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==r.create&&(s=e)}if(s<0)i[n]=this.createTooltipView(r,n?i[n-1]:null),a&&(a[n]=!!r.above);else{let r=i[n]=this.tooltipViews[s];a&&(a[n]=t[s]),r.update&&r.update(e)}}}for(let e of this.tooltipViews)i.indexOf(e)<0&&(this.removeTooltipView(e),null===(n=e.destroy)||void 0===n||n.call(e));return t&&(a.forEach((e,n)=>t[n]=e),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=i,!0}}function tQ(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const nQ=Rj.define({combine:e=>{var t,n,r;return{position:pA.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find(e=>e.parent))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find(e=>e.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||tQ}}}),rQ=new WeakMap,oQ=nM.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(nQ);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new eQ(e,lQ,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(nQ);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),r=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=JR,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(pA.gecko)n=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==JR&&"0px"==e.style.left){let t=e.getBoundingClientRect();n=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(n||"absolute"==this.position)if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),o=fM(this.view);return{visible:{left:r.left+o.left,top:r.top+o.top,right:r.right-o.right,bottom:r.bottom-o.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(nQ).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{visible:n,space:r,scaleX:o,scaleY:i}=e,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:c}=u,d=e.pos[s],f=e.size[s];if(!d||!1!==l.clip&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){c.style.top=JR;continue}let h=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,m=f.right-f.left,g=null!==(t=rQ.get(u))&&void 0!==t?t:f.bottom-f.top,v=u.offset||sQ,y=this.view.textDirection==vI.LTR,b=f.width>r.right-r.left?y?r.left:r.right-f.width:y?Math.max(r.left,Math.min(d.left-(h?14:0)+v.x,r.right-m)):Math.min(Math.max(r.left,d.left-m+(h?14:0)-v.x),r.right-m),O=this.above[s];!l.strictSide&&(O?d.top-g-p-v.y<r.top:d.bottom+g+p+v.y>r.bottom)&&O==r.bottom-d.bottom>d.top-r.top&&(O=this.above[s]=!O);let w=(O?d.top-r.top:r.bottom-d.bottom)-p;if(w<g&&!1!==u.resize){if(w<this.view.defaultLineHeight){c.style.top=JR;continue}rQ.set(u,g),c.style.height=(g=w)/i+"px"}else c.style.height&&(c.style.height="");let S=O?d.top-g-p-v.y:d.bottom+p+v.y,x=b+m;if(!0!==u.overlap)for(let e of a)e.left<x&&e.right>b&&e.top<S+g&&e.bottom>S&&(S=O?e.top-g-2-p:e.bottom+p+2);if("absolute"==this.position?(c.style.top=(S-e.parent.top)/i+"px",iQ(c,(b-e.parent.left)/o)):(c.style.top=S/i+"px",iQ(c,b/o)),h){let e=d.left+(y?v.x:-v.x)-(b+14-7);h.style.left=e/o+"px"}!0!==u.overlap&&a.push({left:b,top:S,right:x,bottom:S+g}),c.classList.toggle("cm-tooltip-above",O),c.classList.toggle("cm-tooltip-below",!O),u.positioned&&u.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=JR}},{eventObservers:{scroll(){this.maybeMeasure()}}});function iQ(e,t){let n=parseInt(e.style.left,10);(isNaN(n)||Math.abs(t-n)>1)&&(e.style.left=t+"px")}const aQ=iR.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),sQ={x:0,y:0},lQ=Rj.define({enables:[oQ,aQ]}),uQ=Rj.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class cQ{static create(e){return new cQ(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new eQ(e,uQ,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(void 0!==r)if(void 0===t)t=r;else if(t!==r)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const dQ=lQ.compute([uQ],e=>{let t=e.facet(uQ);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos})),create:cQ.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class fQ{constructor(e,t,n,r,o){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,o=1;if(n instanceof BA)r=n.posAtStart;else{if(r=e.posAtCoords(t),null==r)return;let n=e.coordsAtPos(r);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let i=e.bidiSpans(e.state.doc.lineAt(r)).find(e=>e.from<=r&&e.to>=r),a=i&&i.dir==vI.RTL?-1:1;o=t.x<n.left?-a:a}let i=this.source(e,r,o);if(null==i?void 0:i.then){let t=this.pending={pos:r};i.then(n=>{this.pending==t&&(this.pending=null,!n||Array.isArray(n)&&!n.length||e.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))},t=>KI(e.state,t,"hover tooltip"))}else!i||Array.isArray(i)&&!i.length||e.dispatch({effects:this.setHover.of(Array.isArray(i)?i:[i])})}get tooltip(){let e=this.view.plugin(oQ),t=e?e.manager.tooltips.findIndex(e=>e.create==cQ.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!function(e,t){let n,{left:r,right:o,top:i,bottom:a}=e.getBoundingClientRect();if(n=e.querySelector(".cm-tooltip-arrow")){let e=n.getBoundingClientRect();i=Math.min(e.top,i),a=Math.max(e.bottom,a)}return t.clientX>=r-hQ&&t.clientX<=o+hQ&&t.clientY>=i-hQ&&t.clientY<=a+hQ}(o.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,i=null!==(n=null===(t=r[0])||void 0===t?void 0:t.end)&&void 0!==n?n:o;(o==i?this.view.posAtCoords(this.lastMove)==o:function(e,t,n,r,o){let i=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(i.left>r||i.right<r||i.top>o||Math.min(i.bottom,a)<o)return!1;let s=e.posAtCoords({x:r,y:o},!1);return s>=t&&s<=n}(this.view,o,i,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const hQ=4;function pQ(e,t={}){let n=hN.define(),r=Vj.define({create:()=>[],update(e,r){if(e.length&&(t.hideOnChange&&(r.docChanged||r.selection)?e=[]:t.hideOn&&(e=e.filter(e=>!t.hideOn(r,e))),r.docChanged)){let t=[];for(let n of e){let e=r.changes.mapPos(n.pos,-1,kj.TrackDel);if(null!=e){let o=Object.assign(Object.create(null),n);o.pos=e,null!=o.end&&(o.end=r.changes.mapPos(o.end)),t.push(o)}}e=t}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(gQ)&&(e=[]);return e},provide:e=>uQ.from(e)});return{active:r,extension:[r,nM.define(o=>new fQ(o,e,r,n,t.hoverTime||300)),dQ]}}function mQ(e,t){let n=e.plugin(oQ);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const gQ=hN.define();const vQ=Rj.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function yQ(e,t){let n=e.plugin(bQ),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const bQ=nM.fromClass(class{constructor(e){this.input=e.state.facet(SQ),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(vQ);this.top=new OQ(e,!0,t.topContainer),this.bottom=new OQ(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(vQ);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new OQ(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new OQ(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(SQ);if(n!=this.input){let t=n.filter(e=>e),r=[],o=[],i=[],a=[];for(let n of t){let t,s=this.specs.indexOf(n);s<0?(t=n(e.view),a.push(t)):(t=this.panels[s],t.update&&t.update(e)),r.push(t),(t.top?o:i).push(t)}this.specs=t,this.panels=r,this.top.sync(o),this.bottom.sync(i);for(let e of a)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>iR.scrollMargins.of(t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class OQ{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=wQ(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=wQ(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function wQ(e){let t=e.nextSibling;return e.remove(),t}const SQ=Rj.define({enables:bQ});class xQ extends EN{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}xQ.prototype.elementClass="",xQ.prototype.toDOM=void 0,xQ.prototype.mapMode=kj.TrackBefore,xQ.prototype.startSide=xQ.prototype.endSide=-1,xQ.prototype.point=!0;const kQ=Rj.define(),_Q=Rj.define(),PQ={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>jN.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},EQ=Rj.define();function $Q(e){return[CQ(),EQ.of({...PQ,...e})]}const TQ=Rj.define({combine:e=>e.some(e=>e)});function CQ(e){let t=[jQ];return e&&!1===e.fixed&&t.push(TQ.of(!0)),t}const jQ=nM.fromClass(class{constructor(e){this.view=e,this.domAfter=null,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(EQ).map(t=>new MQ(e,t)),this.fixed=!e.state.facet(TQ);for(let e of this.gutters)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}if(e.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(TQ)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=jN.iter(this.view.state.facet(kQ),this.view.viewport.from),r=[],o=this.gutters.map(e=>new IQ(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(e.type)){let t=!0;for(let i of e.type)if(i.type==oI.Text&&t){AQ(n,r,i.from);for(let e of o)e.line(this.view,i,r);t=!1}else if(i.widget)for(let e of o)e.widget(this.view,i)}else if(e.type==oI.Text){AQ(n,r,e.from);for(let t of o)t.line(this.view,e,r)}else if(e.widget)for(let t of o)t.widget(this.view,e);for(let e of o)e.finish();e&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(e){let t=e.startState.facet(EQ),n=e.state.facet(EQ),r=e.docChanged||e.heightChanged||e.viewportChanged||!jN.eq(e.startState.facet(kQ),e.state.facet(kQ),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let o=[];for(let r of n){let n=t.indexOf(r);n<0?o.push(new MQ(this.view,r)):(this.gutters[n].update(e),o.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),o.indexOf(e)<0&&e.destroy();for(let e of o)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.gutters=o}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:e=>iR.scrollMargins.of(t=>{let n=t.plugin(e);if(!n||0==n.gutters.length||!n.fixed)return null;let r=n.dom.offsetWidth*t.scaleX,o=n.domAfter?n.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==vI.LTR?{left:r,right:o}:{right:r,left:o}})});function NQ(e){return Array.isArray(e)?e:[e]}function AQ(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class IQ{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=jN.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,i=t.height/e.scaleY;if(this.i==r.elements.length){let t=new DQ(e,i,o,n);r.elements.push(t),r.dom.appendChild(t.dom)}else r.elements[this.i].update(e,i,o,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];AQ(this.cursor,r,t.from),n.length&&(r=r.concat(n));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let i=this.gutter;(0!=r.length||i.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),r=n?[n]:null;for(let n of e.state.facet(_Q)){let o=n(e,t.widget,t);o&&(r||(r=[])).push(o)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class MQ{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let o,i=r.target;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let e=i.getBoundingClientRect();o=(e.top+e.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,a,r)&&r.preventDefault()});this.markers=NQ(t.markers(e)),t.initialSpacer&&(this.spacer=new DQ(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=NQ(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!jN.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class DQ{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let o=0,i=0;;){let a=i,s=o<t.length?t[o++]:null,l=!1;if(s){let e=s.elementClass;e&&(n+=" "+e);for(let e=i;e<this.markers.length;e++)if(this.markers[e].compare(s)){a=e,l=!0;break}}else a=this.markers.length;for(;i<a;){let e=this.markers[i++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!s)break;s.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(s.toDOM(e),r)),l&&i++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const RQ=Rj.define(),QQ=Rj.define(),zQ=Rj.define({combine:e=>PN(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],o=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||o(e,t,n):o}return n}})});class LQ extends xQ{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ZQ(e,t){return e.state.facet(zQ).formatNumber(t,e.state)}const FQ=EQ.compute([zQ],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(RQ),lineMarker:(e,t,n)=>n.some(e=>e.toDOM)?null:new LQ(ZQ(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,n)=>{for(let r of e.state.facet(QQ)){let o=r(e,t,n);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(zQ)!=e.state.facet(zQ),initialSpacer:e=>new LQ(ZQ(e,UQ(e.state.doc.lines))),updateSpacer(e,t){let n=ZQ(t.view,UQ(t.view.state.doc.lines));return n==e.number?e:new LQ(n)},domEventHandlers:e.facet(zQ).domEventHandlers,side:"before"}));function UQ(e){let t=9;for(;t<e;)t=10*t+9;return t}const VQ=new class extends xQ{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},GQ=kQ.compute(["selection"],e=>{let t=[],n=-1;for(let r of e.selection.ranges){let o=e.doc.lineAt(r.head).from;o>n&&(n=o,t.push(VQ.range(o)))}return jN.of(t)});const BQ=1024;let XQ=0;class YQ{constructor(e,t){this.from=e,this.to=t}}class WQ{constructor(e={}){this.id=XQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=KQ.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}WQ.closedBy=new WQ({deserialize:e=>e.split(" ")}),WQ.openedBy=new WQ({deserialize:e=>e.split(" ")}),WQ.group=new WQ({deserialize:e=>e.split(" ")}),WQ.isolate=new WQ({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),WQ.contextHash=new WQ({perNode:!0}),WQ.lookAhead=new WQ({perNode:!0}),WQ.mounted=new WQ({perNode:!0});class qQ{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[WQ.mounted.id]}}const HQ=Object.create(null);class KQ{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):HQ,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new KQ(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(WQ.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(WQ.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?e.name:n[r]];if(o)return o}}}}KQ.none=new KQ("",Object.create(null),0,8);class JQ{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new KQ(n.name,r,n.id,n.flags):n)}return new JQ(t)}}const ez=new WeakMap,tz=new WeakMap;var nz;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(nz||(nz={}));class rz{constructor(e,t,n,r,o){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[e,t]of o)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=qQ.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new gz(this.topNode,e)}cursorAt(e,t=0,n=0){let r=ez.get(this)||this.topNode,o=new gz(r);return o.moveTo(e,t),ez.set(this,o._tree),o}get topNode(){return new uz(this,0,0,null)}resolve(e,t=0){let n=sz(ez.get(this)||this.topNode,e,t,!1);return ez.set(this,n),n}resolveInner(e,t=0){let n=sz(tz.get(this)||this.topNode,e,t,!0);return tz.set(this,n),n}resolveStack(e,t=0){return function(e,t,n){let r=e.resolveInner(t,n),o=null;for(let e=r instanceof uz?r:r.context.parent;e;e=e.parent)if(e.index<0){let i=e.parent;(o||(o=[r])).push(i.resolve(t,n)),e=i}else{let i=qQ.get(e.tree);if(i&&i.overlay&&i.overlay[0].from<=t&&i.overlay[i.overlay.length-1].to>=t){let a=new uz(i.tree,i.overlay[0].from+e.from,-1,e);(o||(o=[r])).push(sz(a,t,n,!1))}}return o?pz(o):r}(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:o=this.length}=e,i=e.mode||0,a=(i&nz.IncludeAnonymous)>0;for(let e=this.cursor(i|nz.IncludeAnonymous);;){let i=!1;if(e.from<=o&&e.to>=r&&(!a&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;i=!0}for(;i&&n&&(a||!e.type.isAnonymous)&&n(e),!e.nextSibling();){if(!e.parent())return;i=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Oz(KQ.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,n)=>new rz(this.type,e,t,n,this.propValues),e.makeTree||((e,t,n)=>new rz(KQ.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:o=BQ,reused:i=[],minRepeatType:a=r.types.length}=e,s=Array.isArray(n)?new oz(n,n.length):n,l=r.types,u=0,c=0;function d(e,t,n,y,b,O){let{id:w,start:S,end:x,size:k}=s,_=c,P=u;for(;k<0;){if(s.next(),-1==k){let t=i[w];return n.push(t),void y.push(S-e)}if(-3==k)return void(u=w);if(-4==k)return void(c=w);throw new RangeError(`Unrecognized record size: ${k}`)}let E,$,T=l[w],C=S-e;if(x-S<=o&&($=g(s.pos-t,b))){let t=new Uint16Array($.size-$.skip),n=s.pos-$.size,o=t.length;for(;s.pos>n;)o=v($.start,t,o);E=new iz(t,x-$.start,r),C=$.start-e}else{let e=s.pos-k;s.next();let t=[],n=[],r=w>=a?w:-1,i=0,l=x;for(;s.pos>e;)r>=0&&s.id==r&&s.size>=0?(s.end<=l-o&&(p(t,n,S,i,s.end,l,r,_,P),i=t.length,l=s.end),s.next()):O>2500?f(S,e,t,n):d(S,e,t,n,r,O+1);if(r>=0&&i>0&&i<t.length&&p(t,n,S,i,S,l,r,_,P),t.reverse(),n.reverse(),r>-1&&i>0){let e=h(T,P);E=Oz(T,t,n,0,t.length,0,x-S,e,e)}else E=m(T,t,n,x-S,_-x,P)}n.push(E),y.push(C)}function f(e,t,n,i){let a=[],l=0,u=-1;for(;s.pos>t;){let{id:e,start:t,end:n,size:r}=s;if(r>4)s.next();else{if(u>-1&&t<u)break;u<0&&(u=n-o),a.push(e,t,n),l++,s.next()}}if(l){let t=new Uint16Array(4*l),o=a[a.length-2];for(let e=a.length-3,n=0;e>=0;e-=3)t[n++]=a[e],t[n++]=a[e+1]-o,t[n++]=a[e+2]-o,t[n++]=n;n.push(new iz(t,a[2]-o,r)),i.push(o-e)}}function h(e,t){return(n,r,o)=>{let i,a,s=0,l=n.length-1;if(l>=0&&(i=n[l])instanceof rz){if(!l&&i.type==e&&i.length==o)return i;(a=i.prop(WQ.lookAhead))&&(s=r[l]+i.length+a)}return m(e,n,r,o,s,t)}}function p(e,t,n,o,i,a,s,l,u){let c=[],d=[];for(;e.length>o;)c.push(e.pop()),d.push(t.pop()+n-i);e.push(m(r.types[s],c,d,a-i,l-a,u)),t.push(i-n)}function m(e,t,n,r,o,i,a){if(i){let e=[WQ.contextHash,i];a=a?[e].concat(a):[e]}if(o>25){let e=[WQ.lookAhead,o];a=a?[e].concat(a):[e]}return new rz(e,t,n,r,a)}function g(e,t){let n=s.fork(),r=0,i=0,l=0,u=n.end-o,c={size:0,start:0,skip:0};e:for(let o=n.pos-e;n.pos>o;){let e=n.size;if(n.id==t&&e>=0){c.size=r,c.start=i,c.skip=l,l+=4,r+=4,n.next();continue}let s=n.pos-e;if(e<0||s<o||n.start<u)break;let d=n.id>=a?4:0,f=n.start;for(n.next();n.pos>s;){if(n.size<0){if(-3!=n.size)break e;d+=4}else n.id>=a&&(d+=4);n.next()}i=f,r+=e,l+=d}return(t<0||r==e)&&(c.size=r,c.start=i,c.skip=l),c.size>4?c:void 0}function v(e,t,n){let{id:r,start:o,end:i,size:l}=s;if(s.next(),l>=0&&r<a){let a=n;if(l>4){let r=s.pos-(l-4);for(;s.pos>r;)n=v(e,t,n)}t[--n]=a,t[--n]=i-e,t[--n]=o-e,t[--n]=r}else-3==l?u=r:-4==l&&(c=r);return n}let y=[],b=[];for(;s.pos>0;)d(e.start||0,e.bufferStart||0,y,b,-1,0);let O=null!==(t=e.length)&&void 0!==t?t:y.length?b[0]+y[0].length:0;return new rz(l[e.topID],y.reverse(),b.reverse(),O)}(e)}}rz.empty=new rz(KQ.none,[],[],0);class oz{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new oz(this.buffer,this.index)}}class iz{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return KQ.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),n==(e+=4))return o;let i=[];for(;e<n;)i.push(this.childString(e)),e=this.buffer[e+3];return o+"("+i.join(",")+")"}findChild(e,t,n,r,o){let{buffer:i}=this,a=-1;for(let s=e;s!=t&&!(az(o,r,i[s+1],i[s+2])&&(a=s,n>0));s=i[s+3]);return a}slice(e,t,n){let r=this.buffer,o=new Uint16Array(t-e),i=0;for(let a=e,s=0;a<t;){o[s++]=r[a++],o[s++]=r[a++]-n;let t=o[s++]=r[a++]-n;o[s++]=r[a++]-e,i=Math.max(i,t)}return new iz(o,i,this.set)}}function az(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function sz(e,t,n,r){for(var o;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof uz&&e.index<0?null:e.parent;if(!t)return e;e=t}let i=r?0:nz.IgnoreOverlays;if(r)for(let r=e,a=r.parent;a;r=a,a=r.parent)r instanceof uz&&r.index<0&&(null===(o=a.enter(t,n,i))||void 0===o?void 0:o.from)!=r.from&&(e=a);for(;;){let r=e.enter(t,n,i);if(!r)return e;e=r}}class lz{cursor(e=0){return new gz(this,e)}getChild(e,t=null,n=null){let r=cz(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return cz(this,e,t,n)}resolve(e,t=0){return sz(this,e,t,!1)}resolveInner(e,t=0){return sz(this,e,t,!0)}matchContext(e){return dz(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class uz extends lz{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,o=0){for(let i=this;;){for(let{children:a,positions:s}=i._tree,l=t>0?a.length:-1;e!=l;e+=t){let l=a[e],u=s[e]+i.from;if(az(r,n,u,u+l.length))if(l instanceof iz){if(o&nz.ExcludeBuffers)continue;let a=l.findChild(0,l.buffer.length,t,n-u,r);if(a>-1)return new hz(new fz(i,l,e,u),null,a)}else if(o&nz.IncludeAnonymous||!l.type.isAnonymous||vz(l)){let a;if(!(o&nz.IgnoreMounts)&&(a=qQ.get(l))&&!a.overlay)return new uz(a.tree,u,e,i);let s=new uz(l,u,e,i);return o&nz.IncludeAnonymous||!s.type.isAnonymous?s:s.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(o&nz.IncludeAnonymous||!i.type.isAnonymous)return null;if(e=i.index>=0?i.index+t:t<0?-1:i._parent._tree.children.length,i=i._parent,!i)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&nz.IgnoreOverlays)&&(r=qQ.get(this._tree))&&r.overlay){let n=e-this.from;for(let{from:e,to:o}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?o>=n:o>n))return new uz(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function cz(e,t,n,r){let o=e.cursor(),i=[];if(!o.firstChild())return i;if(null!=n)for(let e=!1;!e;)if(e=o.type.is(n),!o.nextSibling())return i;for(;;){if(null!=r&&o.type.is(r))return i;if(o.type.is(t)&&i.push(o.node),!o.nextSibling())return null==r?i:[]}}function dz(e,t,n=t.length-1){for(let r=e;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class fz{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class hz extends lz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return o<0?null:new hz(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&nz.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new hz(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new hz(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new hz(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,o=n.buffer[this.index+3];if(o>r){let i=n.buffer[this.index+1];e.push(n.slice(r,o,i)),t.push(0)}return new rz(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function pz(e){if(!e.length)return null;let t=0,n=e[0];for(let r=1;r<e.length;r++){let o=e[r];(o.from>n.from||o.to<n.to)&&(n=o,t=r)}let r=n instanceof uz&&n.index<0?null:n.parent,o=e.slice();return r?o[t]=r:o.splice(t,1),new mz(o,n)}class mz{constructor(e,t){this.heads=e,this.node=t}get next(){return pz(this.heads)}}class gz{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof uz)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof uz?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(o<0)&&(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&nz.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&nz.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&nz.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,o=e<0?-1:n._tree.children.length;r!=o;r+=e){let e=n._tree.children[r];if(this.mode&nz.IncludeAnonymous||e instanceof iz||!e.type.isAnonymous||vz(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let i=e;i;i=i._parent)if(i.index==r){if(r==this.index)return i;t=i,n=o+1;break e}r=this.stack[--o]}for(let e=n;e<this.stack.length;e++)t=new hz(this.buffer,t,this.stack[e]);return this.bufferNode=new hz(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return dz(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return dz(this._tree,e,r);let i=n[t.buffer[this.stack[o]]];if(!i.isAnonymous){if(e[r]&&e[r]!=i.name)return!1;r--}}return!0}}function vz(e){return e.children.some(e=>e instanceof iz||!e.type.isAnonymous||vz(e))}const yz=new WeakMap;function bz(e,t){if(!e.isAnonymous||t instanceof iz||t.type!=e)return 1;let n=yz.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof rz)){n=1;break}n+=bz(e,r)}yz.set(t,n)}return n}function Oz(e,t,n,r,o,i,a,s,l){let u=0;for(let n=r;n<o;n++)u+=bz(e,t[n]);let c=Math.ceil(1.5*u/8),d=[],f=[];return function t(n,r,o,a,s){for(let u=o;u<a;){let o=u,h=r[u],p=bz(e,n[u]);for(u++;u<a;u++){let t=bz(e,n[u]);if(p+t>=c)break;p+=t}if(u==o+1){if(p>c){let e=n[o];t(e.children,e.positions,0,e.children.length,r[o]+s);continue}d.push(n[o])}else{let t=r[u-1]+n[u-1].length-h;d.push(Oz(e,n,r,o,u,h,t,null,l))}f.push(h+s-i)}}(t,n,r,o,0),(s||l)(d,f,a)}class wz{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof hz?this.setBuffer(e.context.buffer,e.index,t):e instanceof uz&&this.map.set(e.tree,t)}get(e){return e instanceof hz?this.getBuffer(e.context.buffer,e.index):e instanceof uz?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Sz{constructor(e,t,n,r,o=!1,i=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(o?1:0)|(i?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new Sz(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],o=1,i=e.length?e[0]:null;for(let a=0,s=0,l=0;;a++){let u=a<t.length?t[a]:null,c=u?u.fromA:1e9;if(c-s>=n)for(;i&&i.from<c;){let t=i;if(s>=t.from||c<=t.to||l){let e=Math.max(t.from,s)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new Sz(e,n,t.tree,t.offset+l,a>0,!!u)}if(t&&r.push(t),i.to>c)break;i=o<e.length?e[o++]:null}if(!u)break;s=u.toA,l=u.toA-u.toB}return r}}class xz{startParse(e,t,n){return"string"==typeof e&&(e=new kz(e)),n=n?n.length?n.map(e=>new YQ(e.from,e.to)):[new YQ(0,0)]:[new YQ(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class kz{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new WQ({perNode:!0});let _z=0;class Pz{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=_z++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n="string"==typeof e?e:"?";if(e instanceof Pz&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let r=new Pz(n,[],null,[]);if(r.set.push(r),t)for(let e of t.set)r.set.push(e);return r}static defineModifier(e){let t=new $z(e);return e=>e.modified.indexOf(t)>-1?e:$z.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let Ez=0;class $z{constructor(e){this.name=e,this.instances=[],this.id=Ez++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(n=>n.base==e&&function(e,t){return e.length==t.length&&e.every((e,n)=>e==t[n])}(t,n.modified));if(n)return n;let r=[],o=new Pz(e.name,r,e,t);for(let e of t)e.instances.push(o);let i=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,o=t.length;r<o;r++)t.push(t[r].concat(e[n]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of i)r.push($z.get(t,e));return o}}function Tz(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],o=2,i=e;for(let t=0;;){if("..."==i&&t>0&&t+3==e.length){o=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(i);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let a=e[t++];if(t==e.length&&"!"==a){o=0;break}if("/"!=a)throw new RangeError("Invalid path: "+e);i=e.slice(t)}let a=n.length-1,s=n[a];if(!s)throw new RangeError("Invalid path: "+e);let l=new jz(r,o,a>0?n.slice(0,a):null);t[s]=l.sort(t[s])}}return Cz.add(t)}const Cz=new WQ;class jz{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Nz(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:o=null}=t||{};return{style:e=>{let t=o;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function Az(e,t,n,r=0,o=e.length){let i=new Iz(r,Array.isArray(t)?t:[t],n);i.highlightRange(e.cursor(),r,o,"",i.highlighters),i.flush(o)}jz.empty=new jz([],2,null);class Iz{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,o){let{type:i,from:a,to:s}=e;if(a>=n||s<=t)return;i.isTop&&(o=this.highlighters.filter(e=>!e.scope||e.scope(i)));let l=r,u=function(e){let t=e.type.prop(Cz);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||jz.empty,c=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(o,u.tags);if(c&&(l&&(l+=" "),l+=c,1==u.mode&&(r+=(r?" ":"")+c)),this.startSpan(Math.max(t,a),l),u.opaque)return;let d=e.tree&&e.tree.prop(WQ.mounted);if(d&&d.overlay){let i=e.node.enter(d.overlay[0].from+a,1),u=this.highlighters.filter(e=>!e.scope||e.scope(d.tree.type)),c=e.firstChild();for(let f=0,h=a;;f++){let p=f<d.overlay.length?d.overlay[f]:null,m=p?p.from+a:s,g=Math.max(t,h),v=Math.min(n,m);if(g<v&&c)for(;e.from<v&&(this.highlightRange(e,g,v,r,o),this.startSpan(Math.min(v,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;h=p.to+a,h>t&&(this.highlightRange(i.cursor(),Math.max(t,p.from+a),Math.min(n,h),"",u),this.startSpan(Math.min(n,h),l))}c&&e.parent()}else if(e.firstChild()){d&&(r="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,o),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const Mz=Pz.define,Dz=Mz(),Rz=Mz(),Qz=Mz(Rz),zz=Mz(Rz),Lz=Mz(),Zz=Mz(Lz),Fz=Mz(Lz),Uz=Mz(),Vz=Mz(Uz),Gz=Mz(),Bz=Mz(),Xz=Mz(),Yz=Mz(Xz),Wz=Mz(),qz={comment:Dz,lineComment:Mz(Dz),blockComment:Mz(Dz),docComment:Mz(Dz),name:Rz,variableName:Mz(Rz),typeName:Qz,tagName:Mz(Qz),propertyName:zz,attributeName:Mz(zz),className:Mz(Rz),labelName:Mz(Rz),namespace:Mz(Rz),macroName:Mz(Rz),literal:Lz,string:Zz,docString:Mz(Zz),character:Mz(Zz),attributeValue:Mz(Zz),number:Fz,integer:Mz(Fz),float:Mz(Fz),bool:Mz(Lz),regexp:Mz(Lz),escape:Mz(Lz),color:Mz(Lz),url:Mz(Lz),keyword:Gz,self:Mz(Gz),null:Mz(Gz),atom:Mz(Gz),unit:Mz(Gz),modifier:Mz(Gz),operatorKeyword:Mz(Gz),controlKeyword:Mz(Gz),definitionKeyword:Mz(Gz),moduleKeyword:Mz(Gz),operator:Bz,derefOperator:Mz(Bz),arithmeticOperator:Mz(Bz),logicOperator:Mz(Bz),bitwiseOperator:Mz(Bz),compareOperator:Mz(Bz),updateOperator:Mz(Bz),definitionOperator:Mz(Bz),typeOperator:Mz(Bz),controlOperator:Mz(Bz),punctuation:Xz,separator:Mz(Xz),bracket:Yz,angleBracket:Mz(Yz),squareBracket:Mz(Yz),paren:Mz(Yz),brace:Mz(Yz),content:Uz,heading:Vz,heading1:Mz(Vz),heading2:Mz(Vz),heading3:Mz(Vz),heading4:Mz(Vz),heading5:Mz(Vz),heading6:Mz(Vz),contentSeparator:Mz(Uz),list:Mz(Uz),quote:Mz(Uz),emphasis:Mz(Uz),strong:Mz(Uz),link:Mz(Uz),monospace:Mz(Uz),strikethrough:Mz(Uz),inserted:Mz(),deleted:Mz(),changed:Mz(),invalid:Mz(),meta:Wz,documentMeta:Mz(Wz),annotation:Mz(Wz),processingInstruction:Mz(Wz),definition:Pz.defineModifier("definition"),constant:Pz.defineModifier("constant"),function:Pz.defineModifier("function"),standard:Pz.defineModifier("standard"),local:Pz.defineModifier("local"),special:Pz.defineModifier("special")};for(let e in qz){let t=qz[e];t instanceof Pz&&(t.name=e)}Nz([{tag:qz.link,class:"tok-link"},{tag:qz.heading,class:"tok-heading"},{tag:qz.emphasis,class:"tok-emphasis"},{tag:qz.strong,class:"tok-strong"},{tag:qz.keyword,class:"tok-keyword"},{tag:qz.atom,class:"tok-atom"},{tag:qz.bool,class:"tok-bool"},{tag:qz.url,class:"tok-url"},{tag:qz.labelName,class:"tok-labelName"},{tag:qz.inserted,class:"tok-inserted"},{tag:qz.deleted,class:"tok-deleted"},{tag:qz.literal,class:"tok-literal"},{tag:qz.string,class:"tok-string"},{tag:qz.number,class:"tok-number"},{tag:[qz.regexp,qz.escape,qz.special(qz.string)],class:"tok-string2"},{tag:qz.variableName,class:"tok-variableName"},{tag:qz.local(qz.variableName),class:"tok-variableName tok-local"},{tag:qz.definition(qz.variableName),class:"tok-variableName tok-definition"},{tag:qz.special(qz.variableName),class:"tok-variableName2"},{tag:qz.definition(qz.propertyName),class:"tok-propertyName tok-definition"},{tag:qz.typeName,class:"tok-typeName"},{tag:qz.namespace,class:"tok-namespace"},{tag:qz.className,class:"tok-className"},{tag:qz.macroName,class:"tok-macroName"},{tag:qz.propertyName,class:"tok-propertyName"},{tag:qz.operator,class:"tok-operator"},{tag:qz.comment,class:"tok-comment"},{tag:qz.meta,class:"tok-meta"},{tag:qz.invalid,class:"tok-invalid"},{tag:qz.punctuation,class:"tok-punctuation"}]);var Hz;const Kz=new WQ;function Jz(e){return Rj.define({combine:e?t=>t.concat(e):void 0})}const eL=new WQ;class tL{constructor(e,t,n=[],r=""){this.data=e,this.name=r,_N.prototype.hasOwnProperty("tree")||Object.defineProperty(_N.prototype,"tree",{get(){return oL(this)}}),this.parser=t,this.extension=[hL.of(this),_N.languageData.of((e,t,n)=>{let r=nL(e,t,n),o=r.type.prop(Kz);if(!o)return[];let i=e.facet(o),a=r.type.prop(eL);if(a){let o=r.resolve(t-r.from,n);for(let t of a)if(t.test(o,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(i)}}return i})].concat(n)}isActiveAt(e,t,n=-1){return nL(e,t,n).type.prop(Kz)==this.data}findRegions(e){let t=e.facet(hL);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(Kz)==this.data)return void n.push({from:t,to:t+e.length});let o=e.prop(WQ.mounted);if(o){if(o.tree.prop(Kz)==this.data){if(o.overlay)for(let e of o.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(o.overlay){let e=n.length;if(r(o.tree,o.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let o=e.children[n];o instanceof rz&&r(o,e.positions[n]+t)}};return r(oL(e),0),n}get allowsNesting(){return!0}}function nL(e,t,n){let r=e.facet(hL),o=oL(e).topNode;if(!r||r.allowsNesting)for(let e=o;e;e=e.enter(t,n,nz.ExcludeBuffers))e.type.isTop&&(o=e);return o}tL.setState=hN.define();class rL extends tL{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=Jz(e.languageData);return new rL(t,e.parser.configure({props:[Kz.add(e=>e.isTop?t:void 0)]}),e.name)}configure(e,t){return new rL(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function oL(e){let t=e.field(tL.state,!1);return t?t.tree:rz.empty}class iL{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let aL=null;class sL{constructor(e,t,n=[],r,o,i,a,s){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=i,this.skipped=a,this.scheduleOn=s,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new sL(e,t,[],rz.empty,0,n,[],null)}startParse(){return this.parser.startParse(new iL(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=rz.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(Sz.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Sz.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=aL;aL=this;try{return e()}finally{aL=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=lL(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:o,viewport:i,skipped:a}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges((e,n,r,o)=>t.push({fromA:e,toA:n,fromB:r,toB:o})),n=Sz.applyChanges(n,t),r=rz.empty,o=0,i={from:e.mapPos(i.from,-1),to:e.mapPos(i.to,1)},this.skipped.length){a=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&a.push({from:n,to:r})}}}return new sL(this.parser,t,n,r,o,i,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=lL(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends xz{createParse(t,n,r){let o=r[0].from,i=r[r.length-1].to;return{parsedPos:o,advance(){let t=aL;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=i,new rz(KQ.none,[],[],i-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return aL}}function lL(e,t,n){return Sz.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class uL{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new uL(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=sL.create(e.facet(hL).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new uL(n)}}tL.state=Vj.define({create:uL.init,update(e,t){for(let e of t.effects)if(e.is(tL.setState))return e.value;return t.startState.facet(hL)!=t.state.facet(hL)?uL.init(t.state):e.apply(t)}});let cL=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(cL=e=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const dL="undefined"!=typeof navigator&&(null===(Hz=navigator.scheduling)||void 0===Hz?void 0:Hz.isInputPending)?()=>navigator.scheduling.isInputPending():null,fL=nM.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(tL.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(tL.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=cL(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,o=n.field(tL.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let i=Date.now()+Math.min(this.chunkBudget,100,e&&!dL?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&n.doc.length>r+1e3,s=o.context.work(()=>dL&&dL()||Date.now()>i,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(s||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:tL.setState.of(new uL(o.context))})),this.chunkBudget>0&&(!s||a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>KI(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hL=Rj.define({combine:e=>e.length?e[0]:null,enables:e=>[tL.state,fL,iR.contentAttributes.compute([e],t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}})]});class pL{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const mL=Rj.define(),gL=Rj.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function vL(e){let t=e.facet(gL);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function yL(e,t){let n="",r=e.tabSize,o=e.facet(gL)[0];if("\t"==o){for(;t>=r;)n+="\t",t-=r;o=" "}for(let e=0;e<t;e++)n+=o;return n}function bL(e,t){e instanceof _N&&(e=new OL(e));for(let n of e.state.facet(mL)){let r=n(e,t);if(void 0!==r)return r}let n=oL(e.state);return n.length>=t?function(e,t,n){let r=t.resolveStack(n),o=t.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(o!=r.node){let e=[];for(let t=o;t&&!(t.from<r.node.from||t.to>r.node.to||t.from==r.node.from&&t.type==r.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return SL(r,e,n)}(e,n,t):null}class OL{constructor(e,t={}){this.state=e,this.options=t,this.unit=vL(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return null!=r&&r>=n.from&&r<=n.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.countColumn(n,e-r),i=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return i>-1&&(o+=i-this.countColumn(n,n.search(/\S|$/))),o}countColumn(e,t=e.length){return UN(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let e=o(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const wL=new WQ;function SL(e,t,n){for(let r=e;r;r=r.next){let e=xL(r.node);if(e)return e(_L.create(t,n,r))}return 0}function xL(e){let t=e.type.prop(wL);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(WQ.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>$L(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?kL:null}function kL(){return 0}class _L extends OL{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new _L(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(PL(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return SL(this.context.next,this.base,this.pos)}}function PL(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function EL({closing:e,align:t=!0,units:n=1}){return r=>$L(r,t,n,e)}function $L(e,t,n,r,o){let i=e.textAfter,a=i.match(/^\s*/)[0].length,s=r&&i.slice(a,a+r.length)==r||o==e.pos+a,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let o=e.options.simulateBreak,i=e.state.doc.lineAt(n.from),a=null==o||o<=i.from?i.to:Math.min(i.to,o);for(let e=n.to;;){let o=t.childAfter(e);if(!o||o==r)return null;if(!o.type.isSkipped){if(o.from>=a)return null;let e=/^ */.exec(i.text.slice(n.to-i.from))[0].length;return{from:n.from,to:n.to+e}}e=o.to}}(e):null;return l?s?e.column(l.from):e.column(l.to):e.baseIndent+(s?0:e.unit*n)}function TL({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}const CL=Rj.define(),jL=new WQ;function NL(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function AL(e,t,n){for(let r of e.facet(CL)){let o=r(e,t,n);if(o)return o}return function(e,t,n){let r=oL(e);if(r.length<n)return null;let o=null;for(let i=r.resolveStack(n,1);i;i=i.next){let a=i.node;if(a.to<=n||a.from>n)continue;if(o&&a.from<t)break;let s=a.type.prop(jL);if(s&&(a.to<r.length-50||r.length==e.doc.length||!NL(a))){let r=s(a,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(o=r)}}return o}(e,t,n)}function IL(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const ML=hN.define({map:IL}),DL=hN.define({map:IL});function RL(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some(e=>e.from<=n&&e.to>=n)||t.push(e.lineBlockAt(n));return t}const QL=Vj.define({create:()=>iI.none,update(e,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((t,n)=>e=zL(e,t,n)),e=e.map(t.changes);for(let n of t.effects)if(n.is(ML)&&!ZL(e,n.value.from,n.value.to)){let{preparePlaceholder:r}=t.state.facet(BL),o=r?iI.replace({widget:new qL(r(t.state,n.value))}):WL;e=e.update({add:[o.range(n.value.from,n.value.to)]})}else n.is(DL)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));return t.selection&&(e=zL(e,t.selection.main.head)),e},provide:e=>iR.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,(e,t)=>{n.push(e,t)}),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],o=e[n++];if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid JSON for fold state");t.push(WL.range(r,o))}return iI.set(t,!0)}});function zL(e,t,n=t){let r=!1;return e.between(t,n,(e,o)=>{e<n&&o>t&&(r=!0)}),r?e.update({filterFrom:t,filterTo:n,filter:(e,r)=>e>=n||r<=t}):e}function LL(e,t,n){var r;let o=null;return null===(r=e.field(QL,!1))||void 0===r||r.between(t,n,(e,t)=>{(!o||o.from>e)&&(o={from:e,to:t})}),o}function ZL(e,t,n){let r=!1;return e.between(t,t,(e,o)=>{e==t&&o==n&&(r=!0)}),r}function FL(e,t){return e.field(QL,!1)?t:t.concat(hN.appendConfig.of(XL()))}function UL(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,o=e.state.doc.lineAt(t.to).number;return iR.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${o}.`)}const VL=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of RL(e)){let n=AL(e.state,t.from,t.to);if(n)return e.dispatch({effects:FL(e.state,[ML.of(n),UL(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(QL,!1))return!1;let t=[];for(let n of RL(e)){let r=LL(e.state,n.from,n.to);r&&t.push(DL.of(r),UL(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let o=e.lineBlockAt(r),i=AL(t,o.from,o.to);i&&n.push(ML.of(i)),r=(i?e.lineBlockAt(i.to):o).to+1}return n.length&&e.dispatch({effects:FL(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(QL,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,(e,t)=>{n.push(DL.of({from:e,to:t}))}),e.dispatch({effects:n}),!0}}],GL={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},BL=Rj.define({combine:e=>PN(e,GL)});function XL(e){let t=[QL,JL];return e&&t.push(BL.of(e)),t}function YL(e,t){let{state:n}=e,r=n.facet(BL),o=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=LL(e.state,n.from,n.to);r&&e.dispatch({effects:DL.of(r)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,o,t);let i=document.createElement("span");return i.textContent=r.placeholderText,i.setAttribute("aria-label",n.phrase("folded code")),i.title=n.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=o,i}const WL=iI.replace({widget:new class extends rI{toDOM(e){return YL(e,null)}}});class qL extends rI{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return YL(e,this.value)}}const HL={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class KL extends xQ{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const JL=iR.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class eZ{constructor(e,t){let n;function r(e){let t=YN.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const o="string"==typeof t.all?t.all:t.all?r(t.all):void 0,i=t.scope;this.scope=i instanceof tL?e=>e.prop(Kz)==i.data:i?e=>e==i:void 0,this.style=Nz(e.map(e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))})),{all:o}).style,this.module=n?new YN(n):null,this.themeType=t.themeType}static define(e,t){return new eZ(e,t||{})}}const tZ=Rj.define(),nZ=Rj.define({combine:e=>e.length?[e[0]]:null});function rZ(e){let t=e.facet(tZ);return t.length?t:e.facet(nZ)}function oZ(e,t){let n,r=[aZ];return e instanceof eZ&&(e.module&&r.push(iR.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(nZ.of(e)):n?r.push(tZ.computeN([iR.darkTheme],t=>t.facet(iR.darkTheme)==("dark"==n)?[e]:[])):r.push(tZ.of(e)),r}class iZ{constructor(e){this.markCache=Object.create(null),this.tree=oL(e.state),this.decorations=this.buildDeco(e,rZ(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=oL(e.state),n=rZ(e.state),r=n!=rZ(e.startState),{viewport:o}=e.view,i=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&i>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=i):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return iI.none;let n=new NN;for(let{from:r,to:o}of e.visibleRanges)Az(this.tree,t,(e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=iI.mark({class:r})))},r,o);return n.finish()}}const aZ=qj.high(nM.fromClass(iZ,{decorations:e=>e.decorations})),sZ=eZ.define([{tag:qz.meta,color:"#404740"},{tag:qz.link,textDecoration:"underline"},{tag:qz.heading,textDecoration:"underline",fontWeight:"bold"},{tag:qz.emphasis,fontStyle:"italic"},{tag:qz.strong,fontWeight:"bold"},{tag:qz.strikethrough,textDecoration:"line-through"},{tag:qz.keyword,color:"#708"},{tag:[qz.atom,qz.bool,qz.url,qz.contentSeparator,qz.labelName],color:"#219"},{tag:[qz.literal,qz.inserted],color:"#164"},{tag:[qz.string,qz.deleted],color:"#a11"},{tag:[qz.regexp,qz.escape,qz.special(qz.string)],color:"#e40"},{tag:qz.definition(qz.variableName),color:"#00f"},{tag:qz.local(qz.variableName),color:"#30a"},{tag:[qz.typeName,qz.namespace],color:"#085"},{tag:qz.className,color:"#167"},{tag:[qz.special(qz.variableName),qz.macroName],color:"#256"},{tag:qz.definition(qz.propertyName),color:"#00c"},{tag:qz.comment,color:"#940"},{tag:qz.invalid,color:"#f00"}]),lZ=iR.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),uZ="()[]{}",cZ=Rj.define({combine:e=>PN(e,{afterCursor:!0,brackets:uZ,maxScanDistance:1e4,renderMatch:hZ})}),dZ=iI.mark({class:"cm-matchingBracket"}),fZ=iI.mark({class:"cm-nonmatchingBracket"});function hZ(e){let t=[],n=e.matched?dZ:fZ;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const pZ=Vj.define({create:()=>iI.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(cZ);for(let e of t.state.selection.ranges){if(!e.empty)continue;let o=bZ(t.state,e.head,-1,r)||e.head>0&&bZ(t.state,e.head-1,1,r)||r.afterCursor&&(bZ(t.state,e.head,1,r)||e.head<t.state.doc.length&&bZ(t.state,e.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,t.state)))}return iI.set(n,!0)},provide:e=>iR.decorations.from(e)}),mZ=[pZ,lZ];const gZ=new WQ;function vZ(e,t,n){let r=e.prop(t<0?WQ.openedBy:WQ.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function yZ(e){let t=e.type.prop(gZ);return t?t(e.node):e}function bZ(e,t,n,r={}){let o=r.maxScanDistance||1e4,i=r.brackets||uZ,a=oL(e),s=a.resolveInner(t,n);for(let r=s;r;r=r.parent){let o=vZ(r.type,n,i);if(o&&r.from<r.to){let a=yZ(r);if(a&&(n>0?t>=a.from&&t<a.to:t>a.from&&t<=a.to))return OZ(e,t,n,r,a,o,i)}}return function(e,t,n,r,o,i,a){let s=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),d=0;for(let e=0;!c.next().done&&e<=i;){let i=c.value;n<0&&(e+=i.length);let s=t+e*n;for(let e=n>0?0:i.length-1,t=n>0?i.length:-1;e!=t;e+=n){let t=a.indexOf(i[e]);if(!(t<0||r.resolveInner(s+e,1).type!=o))if(t%2==0==n>0)d++;else{if(1==d)return{start:u,end:{from:s+e,to:s+e+1},matched:t>>1==l>>1};d--}}n>0&&(e+=i.length)}return c.done?{start:u,matched:!1}:null}(e,t,n,a,s.type,o,i)}function OZ(e,t,n,r,o,i,a){let s=r.parent,l={from:o.from,to:o.to},u=0,c=null==s?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==u&&i.indexOf(c.type.name)>-1&&c.from<c.to){let e=yZ(c);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(vZ(c.type,n,a))u++;else if(vZ(c.type,-n,a)){if(0==u){let e=yZ(c);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}u--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}const wZ=Object.create(null),SZ=[KQ.none],xZ=[],kZ=Object.create(null),_Z=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])_Z[e]=EZ(wZ,t);function PZ(e,t){xZ.indexOf(e)>-1||(xZ.push(e),console.warn(t))}function EZ(e,t){let n=[];for(let r of t.split(" ")){let t=[];for(let n of r.split(".")){let r=e[n]||qz[n];r?"function"==typeof r?t.length?t=t.map(r):PZ(n,`Modifier ${n} used at start of tag`):t.length?PZ(n,`Tag ${n} used as modifier`):t=Array.isArray(r)?r:[r]:PZ(n,`Unknown highlighting tag ${n}`)}for(let e of t)n.push(e)}if(!n.length)return 0;let r=t.replace(/ /g,"_"),o=r+" "+n.map(e=>e.id),i=kZ[o];if(i)return i.id;let a=kZ[o]=KQ.define({id:SZ.length,name:r,props:[Tz({[r]:n})]});return SZ.push(a),a.id}vI.RTL,vI.LTR;function $Z(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let o=e(t,n);return!!o&&(r(n.update(o)),!0)}}const TZ=$Z(MZ,0),CZ=$Z(IZ,0),jZ=$Z((e,t)=>IZ(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),o=n.to<=r.to?r:e.doc.lineAt(n.to);o.from>r.from&&o.from==n.to&&(o=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let i=t.length-1;i>=0&&t[i].to>r.from?t[i].to=o.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:o.to})}return t}(t)),0);function NZ(e,t){let n=e.languageDataAt("commentTokens",t,1);return n.length?n[0]:{}}const AZ=50;function IZ(e,t,n=t.selection.ranges){let r=n.map(e=>NZ(t,e.from).block);if(!r.every(e=>e))return null;let o=n.map((e,n)=>function(e,{open:t,close:n},r,o){let i,a,s=e.sliceDoc(r-AZ,r),l=e.sliceDoc(o,o+AZ),u=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(l)[0].length,d=s.length-u;if(s.slice(d-t.length,d)==t&&l.slice(c,c+n.length)==n)return{open:{pos:r-u,margin:u&&1},close:{pos:o+c,margin:c&&1}};o-r<=2*AZ?i=a=e.sliceDoc(r,o):(i=e.sliceDoc(r,r+AZ),a=e.sliceDoc(o-AZ,o));let f=/^\s*/.exec(i)[0].length,h=/\s*$/.exec(a)[0].length,p=a.length-h-n.length;return i.slice(f,f+t.length)==t&&a.slice(p,p+n.length)==n?{open:{pos:r+f+t.length,margin:/\s/.test(i.charAt(f+t.length))?1:0},close:{pos:o-h-n.length,margin:/\s/.test(a.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to));if(2!=e&&!o.every(e=>e))return{changes:t.changes(n.map((e,t)=>o[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&o.some(e=>e)){let e=[];for(let t,n=0;n<o.length;n++)if(t=o[n]){let o=r[n],{open:i,close:a}=t;e.push({from:i.pos-o.open.length,to:i.pos+i.margin},{from:a.pos-a.margin,to:a.pos+o.close.length})}return{changes:e}}return null}function MZ(e,t,n=t.selection.ranges){let r=[],o=-1;for(let{from:e,to:i}of n){let n=r.length,a=1e9,s=NZ(t,e).line;if(s){for(let n=e;n<=i;){let l=t.doc.lineAt(n);if(l.from>o&&(e==i||i>l.from)){o=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,n=l.text.slice(e,e+s.length)==s?e:-1;e<l.text.length&&e<a&&(a=e),r.push({line:l,comment:n,token:s,indent:e,empty:t,single:!1})}n=l.to+1}if(a<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=a);r.length==n+1&&(r[n].single=!0)}}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:n,indent:o,empty:i,single:a}of r)!a&&i||e.push({from:t.from+o,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:n,token:o}of r)if(n>=0){let r=t.from+n,i=r+o.length;" "==t.text[i-t.from]&&i++,e.push({from:r,to:i})}return{changes:e}}return null}const DZ=cN.define(),RZ=cN.define(),QZ=Rj.define(),zZ=Rj.define({combine:e=>PN(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}),LZ=Vj.define({create:()=>nF.empty,update(e,t){let n=t.state.facet(zZ),r=t.annotation(DZ);if(r){let o=BZ.fromTransaction(t,r.selection),i=r.side,a=0==i?e.undone:e.done;return a=o?XZ(a,a.length,n.minDepth,o):HZ(a,t.startState.selection),new nF(0==i?r.rest:a,0==i?a:r.rest)}let o=t.annotation(RZ);if("full"!=o&&"before"!=o||(e=e.isolate()),!1===t.annotation(pN.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let i=BZ.fromTransaction(t),a=t.annotation(pN.time),s=t.annotation(pN.userEvent);return i?e=e.addChanges(i,a,s,n,t):t.selection&&(e=e.addSelection(t.startState.selection,a,s,n.newGroupDelay)),"full"!=o&&"after"!=o||(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new nF(e.done.map(BZ.fromJSON),e.undone.map(BZ.fromJSON))});function ZZ(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let o=n.field(LZ,!1);if(!o)return!1;let i=o.pop(e,n,t);return!!i&&(r(i),!0)}}const FZ=ZZ(0,!1),UZ=ZZ(1,!1),VZ=ZZ(0,!0),GZ=ZZ(1,!0);class BZ{constructor(e,t,n,r,o){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new BZ(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new BZ(e.changes&&Pj.fromJSON(e.changes),[],e.mapped&&_j.fromJSON(e.mapped),e.startSelection&&Ij.fromJSON(e.startSelection),e.selectionsAfter.map(Ij.fromJSON))}static fromTransaction(e,t){let n=WZ;for(let t of e.startState.facet(QZ)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new BZ(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,WZ)}static selection(e){return new BZ(void 0,WZ,void 0,void 0,e)}}function XZ(e,t,n,r){let o=t+1>n+20?t-n-1:0,i=e.slice(o,t);return i.push(r),i}function YZ(e,t){return e.length?t.length?e.concat(t):e:t}const WZ=[],qZ=200;function HZ(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-qZ));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),XZ(e,e.length-1,1e9,n.setSelAfter(r)))}return[BZ.selection([t])]}function KZ(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function JZ(e,t){if(!e.length)return e;let n=e.length,r=WZ;for(;n;){let o=eF(e[n-1],t,r);if(o.changes&&!o.changes.empty||o.effects.length){let t=e.slice(0,n);return t[n-1]=o,t}t=o.mapped,n--,r=o.selectionsAfter}return r.length?[BZ.selection(r)]:WZ}function eF(e,t,n){let r=YZ(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):WZ,n);if(!e.changes)return BZ.selection(r);let o=e.changes.map(t),i=t.mapDesc(e.changes,!0),a=e.mapped?e.mapped.composeDesc(i):i;return new BZ(o,hN.mapEffects(e.effects,t),a,e.startSelection.map(i),r)}const tF=/^(input\.type|delete)($|\.)/;class nF{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new nF(this.done,this.undone):this}addChanges(e,t,n,r,o){let i=this.done,a=i[i.length-1];return i=a&&a.changes&&!a.changes.empty&&e.changes&&(!n||tF.test(n))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,function(e,t){let n=[],r=!1;return e.iterChangedRanges((e,t)=>n.push(e,t)),t.iterChangedRanges((e,t,o,i)=>{for(let e=0;e<n.length;){let t=n[e++],a=n[e++];i>=t&&o<=a&&(r=!0)}}),r}(a.changes,e.changes))||"input.type.compose"==n)?XZ(i,i.length-1,r.minDepth,new BZ(e.changes.compose(a.changes),YZ(hN.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,WZ)):XZ(i,i.length,r.minDepth,e),new nF(i,WZ,t,n)}addSelection(e,t,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:WZ;return o.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter((e,n)=>e.empty!=t.ranges[n].empty).length}(o[o.length-1],e)?this:new nF(HZ(this.done,e),this.undone,t,n)}addMapping(e){return new nF(JZ(this.done,e),JZ(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let o=r[r.length-1],i=o.selectionsAfter[0]||t.selection;if(n&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:DZ.of({side:e,rest:KZ(r),selection:i}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let n=1==r.length?WZ:r.slice(0,r.length-1);return o.mapped&&(n=JZ(n,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:DZ.of({side:e,rest:n,selection:i}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}nF.empty=new nF(WZ,WZ);const rF=[{key:"Mod-z",run:FZ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:UZ,preventDefault:!0},{linux:"Ctrl-Shift-z",run:UZ,preventDefault:!0},{key:"Mod-u",run:VZ,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:GZ,preventDefault:!0}];function oF(e,t){return Ij.create(e.ranges.map(t),e.mainIndex)}function iF(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function aF({state:e,dispatch:t},n){let r=oF(e.selection,n);return!r.eq(e.selection,!0)&&(t(iF(e,r)),!0)}function sF(e,t){return Ij.cursor(t?e.to:e.from)}function lF(e,t){return aF(e,n=>n.empty?e.moveByChar(n,t):sF(n,t))}function uF(e){return e.textDirectionAt(e.state.selection.main.head)==vI.LTR}const cF=e=>lF(e,!uF(e)),dF=e=>lF(e,uF(e));function fF(e,t){return aF(e,n=>n.empty?e.moveByGroup(n,t):sF(n,t))}"undefined"!=typeof Intl&&Intl.Segmenter;function hF(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function pF(e,t,n){let r,o,i=oL(e).resolveInner(t.head),a=n?WQ.closedBy:WQ.openedBy;for(let r=t.head;;){let t=n?i.childAfter(r):i.childBefore(r);if(!t)break;hF(e,t,a)?i=t:r=n?t.to:t.from}return o=i.type.prop(a)&&(r=n?bZ(e,i.from,1):bZ(e,i.to,-1))&&r.matched?n?r.end.to:r.end.from:n?i.to:i.from,Ij.cursor(o,n?-1:1)}function mF(e,t){return aF(e,n=>{if(!n.empty)return sF(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}const gF=e=>mF(e,!1),vF=e=>mF(e,!0);function yF(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,o=0;if(n){for(let t of e.state.facet(iR.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(r=Math.max(null==n?void 0:n.top,r)),(null==n?void 0:n.bottom)&&(o=Math.max(null==n?void 0:n.bottom,o))}t=e.scrollDOM.clientHeight-r-o}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:o,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function bF(e,t){let n,r=yF(e),{state:o}=e,i=oF(o.selection,n=>n.empty?e.moveVertically(n,t,r.height):sF(n,t));if(i.eq(o.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(o.selection.main.head),a=e.scrollDOM.getBoundingClientRect(),s=a.top+r.marginTop,l=a.bottom-r.marginBottom;t&&t.top>s&&t.bottom<l&&(n=iR.scrollIntoView(i.main.head,{y:"start",yMargin:t.top-s}))}return e.dispatch(iF(o,i),{effects:n}),!0}const OF=e=>bF(e,!1),wF=e=>bF(e,!0);function SF(e,t,n){let r=e.lineBlockAt(t.head),o=e.moveToLineBoundary(t,n);if(o.head==t.head&&o.head!=(n?r.to:r.from)&&(o=e.moveToLineBoundary(t,n,!1)),!n&&o.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(o=Ij.cursor(r.from+n))}return o}function xF(e,t,n){let r=!1,o=oF(e.selection,t=>{let o=bZ(e,t.head,-1)||bZ(e,t.head,1)||t.head>0&&bZ(e,t.head-1,1)||t.head<e.doc.length&&bZ(e,t.head+1,-1);if(!o||!o.end)return t;r=!0;let i=o.start.from==t.head?o.end.to:o.end.from;return n?Ij.range(t.anchor,i):Ij.cursor(i)});return!!r&&(t(iF(e,o)),!0)}function kF(e,t){let n=oF(e.state.selection,e=>{let n=t(e);return Ij.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return!n.eq(e.state.selection)&&(e.dispatch(iF(e.state,n)),!0)}function _F(e,t){return kF(e,n=>e.moveByChar(n,t))}const PF=e=>_F(e,!uF(e)),EF=e=>_F(e,uF(e));function $F(e,t){return kF(e,n=>e.moveByGroup(n,t))}function TF(e,t){return kF(e,n=>e.moveVertically(n,t))}const CF=e=>TF(e,!1),jF=e=>TF(e,!0);function NF(e,t){return kF(e,n=>e.moveVertically(n,t,yF(e).height))}const AF=e=>NF(e,!1),IF=e=>NF(e,!0),MF=({state:e,dispatch:t})=>(t(iF(e,{anchor:0})),!0),DF=({state:e,dispatch:t})=>(t(iF(e,{anchor:e.doc.length})),!0),RF=({state:e,dispatch:t})=>(t(iF(e,{anchor:e.selection.main.anchor,head:0})),!0),QF=({state:e,dispatch:t})=>(t(iF(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function zF(e,t){let{state:n}=e,r=n.selection,o=n.selection.ranges.slice();for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head);if(t?i.to<e.state.doc.length:i.from>0)for(let n=r;;){let r=e.moveVertically(n,t);if(r.head<i.from||r.head>i.to){o.some(e=>e.head==r.head)||o.push(r);break}if(r.head==n.head)break;n=r}}return o.length!=r.ranges.length&&(e.dispatch(iF(n,Ij.create(o,o.length-1))),!0)}function LF(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,o=r.changeByRange(r=>{let{from:o,to:i}=r;if(o==i){let a=t(r);a<o?(n="delete.backward",a=ZF(e,a,!1)):a>o&&(n="delete.forward",a=ZF(e,a,!0)),o=Math.min(o,a),i=Math.max(i,a)}else o=ZF(e,o,!1),i=ZF(e,i,!0);return o==i?{range:r}:{changes:{from:o,to:i},range:Ij.cursor(o,o<r.head?-1:1)}});return!o.changes.empty&&(e.dispatch(r.update(o,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?iR.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function ZF(e,t,n){if(e instanceof iR)for(let r of e.state.facet(iR.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=n?r:e)});return t}const FF=(e,t,n)=>LF(e,r=>{let o,i,a=r.from,{state:s}=e,l=s.doc.lineAt(a);if(n&&!t&&a>l.from&&a<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,a-l.from))){if("\t"==o[o.length-1])return a-1;let e=UN(o,s.tabSize)%vL(s)||vL(s);for(let t=0;t<e&&" "==o[o.length-1-t];t++)a--;i=a}else i=bj(l.text,a-l.from,t,t)+l.from,i==a&&l.number!=(t?s.doc.lines:1)?i+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(i-l.from,a-l.from))&&(i=bj(l.text,i-l.from,!1,!1)+l.from);return i}),UF=e=>FF(e,!1,!0),VF=e=>FF(e,!0,!1),GF=(e,t)=>LF(e,n=>{let r=n.head,{state:o}=e,i=o.doc.lineAt(r),a=o.charCategorizer(r);for(let e=null;;){if(r==(t?i.to:i.from)){r==n.head&&i.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);break}let s=bj(i.text,r-i.from,t)+i.from,l=i.text.slice(Math.min(r,s)-i.from,Math.max(r,s)-i.from),u=a(l);if(null!=e&&u!=e)break;" "==l&&r==n.head||(e=u),r=s}return r}),BF=e=>GF(e,!1);function XF(e){let t=[],n=-1;for(let r of e.selection.ranges){let o=e.doc.lineAt(r.from),i=e.doc.lineAt(r.to);if(r.empty||r.to!=i.from||(i=e.doc.lineAt(r.to-1)),n>=o.number){let e=t[t.length-1];e.to=i.to,e.ranges.push(r)}else t.push({from:o.from,to:i.to,ranges:[r]});n=i.number+1}return t}function YF(e,t,n){if(e.readOnly)return!1;let r=[],o=[];for(let t of XF(e)){if(n?t.to==e.doc.length:0==t.from)continue;let i=e.doc.lineAt(n?t.to+1:t.from-1),a=i.length+1;if(n){r.push({from:t.to,to:i.to},{from:t.from,insert:i.text+e.lineBreak});for(let n of t.ranges)o.push(Ij.range(Math.min(e.doc.length,n.anchor+a),Math.min(e.doc.length,n.head+a)))}else{r.push({from:i.from,to:t.from},{from:t.to,insert:e.lineBreak+i.text});for(let e of t.ranges)o.push(Ij.range(e.anchor-a,e.head-a))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:Ij.create(o,e.selection.mainIndex),userEvent:"move.line"})),!0)}function WF(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of XF(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const qF=KF(!1),HF=KF(!0);function KF(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{let{from:r,to:o}=n,i=t.doc.lineAt(r),a=!e&&r==o&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=oL(e).resolveInner(t),o=r.childBefore(t),i=r.childAfter(t);return o&&i&&o.to<=t&&i.from>=t&&(n=o.type.prop(WQ.closedBy))&&n.indexOf(i.name)>-1&&e.doc.lineAt(o.to).from==e.doc.lineAt(i.from).from&&!/\S/.test(e.sliceDoc(o.to,i.from))?{from:o.to,to:i.from}:null}(t,r);e&&(r=o=(o<=i.to?i:t.doc.lineAt(o)).to);let s=new OL(t,{simulateBreak:r,simulateDoubleBreak:!!a}),l=bL(s,r);for(null==l&&(l=UN(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));o<i.to&&/\s/.test(i.text[o-i.from]);)o++;a?({from:r,to:o}=a):r>i.from&&r<i.from+100&&!/\S/.test(i.text.slice(0,r))&&(r=i.from);let u=["",yL(t,l)];return a&&u.push(yL(t,s.lineIndent(i.from,-1))),{changes:{from:r,to:o,insert:uj.of(u)},range:Ij.cursor(r+1+u[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function JF(e,t){let n=-1;return e.changeByRange(r=>{let o=[];for(let i=r.from;i<=r.to;){let a=e.doc.lineAt(i);a.number>n&&(r.empty||r.to>a.from)&&(t(a,o,r),n=a.number),i=a.to+1}let i=e.changes(o);return{changes:o,range:Ij.range(i.mapPos(r.anchor,1),i.mapPos(r.head,1))}})}const eU=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(JF(e,(t,n)=>{n.push({from:t.from,insert:e.facet(gL)})}),{userEvent:"input.indent"})),!0),tU=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(JF(e,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=UN(r,e.tabSize),i=0,a=yL(e,Math.max(0,o-vL(e)));for(;i<r.length&&i<a.length&&r.charCodeAt(i)==a.charCodeAt(i);)i++;n.push({from:t.from+i,to:t.from+r.length,insert:a.slice(i)})}),{userEvent:"delete.dedent"})),!0),nU=[{key:"Ctrl-b",run:cF,shift:PF,preventDefault:!0},{key:"Ctrl-f",run:dF,shift:EF},{key:"Ctrl-p",run:gF,shift:CF},{key:"Ctrl-n",run:vF,shift:jF},{key:"Ctrl-a",run:e=>aF(e,t=>Ij.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>kF(e,t=>Ij.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>aF(e,t=>Ij.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>kF(e,t=>Ij.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:VF},{key:"Ctrl-h",run:UF},{key:"Ctrl-k",run:e=>LF(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:BF},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:uj.of(["",""])},range:Ij.cursor(e.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),o=n==r.from?n-1:bj(r.text,n-r.from,!1)+r.from,i=n==r.to?n+1:bj(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:i,insert:e.doc.slice(n,i).append(e.doc.slice(o,n))},range:Ij.cursor(i)}});return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:wF}],rU=[{key:"ArrowLeft",run:cF,shift:PF,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>fF(e,!uF(e)),shift:e=>$F(e,!uF(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>aF(e,t=>SF(e,t,!uF(e))),shift:e=>kF(e,t=>SF(e,t,!uF(e))),preventDefault:!0},{key:"ArrowRight",run:dF,shift:EF,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>fF(e,uF(e)),shift:e=>$F(e,uF(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>aF(e,t=>SF(e,t,uF(e))),shift:e=>kF(e,t=>SF(e,t,uF(e))),preventDefault:!0},{key:"ArrowUp",run:gF,shift:CF,preventDefault:!0},{mac:"Cmd-ArrowUp",run:MF,shift:RF},{mac:"Ctrl-ArrowUp",run:OF,shift:AF},{key:"ArrowDown",run:vF,shift:jF,preventDefault:!0},{mac:"Cmd-ArrowDown",run:DF,shift:QF},{mac:"Ctrl-ArrowDown",run:wF,shift:IF},{key:"PageUp",run:OF,shift:AF},{key:"PageDown",run:wF,shift:IF},{key:"Home",run:e=>aF(e,t=>SF(e,t,!1)),shift:e=>kF(e,t=>SF(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:MF,shift:RF},{key:"End",run:e=>aF(e,t=>SF(e,t,!0)),shift:e=>kF(e,t=>SF(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:DF,shift:QF},{key:"Enter",run:qF,shift:qF},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:UF,shift:UF,preventDefault:!0},{key:"Delete",run:VF,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:BF,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>GF(e,!0),preventDefault:!0},{mac:"Mod-Backspace",run:e=>LF(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),preventDefault:!0},{mac:"Mod-Delete",run:e=>LF(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),preventDefault:!0}].concat(nU.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),oU=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>aF(e,t=>pF(e.state,t,!uF(e))),shift:e=>kF(e,t=>pF(e.state,t,!uF(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>aF(e,t=>pF(e.state,t,uF(e))),shift:e=>kF(e,t=>pF(e.state,t,uF(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>YF(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>WF(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>YF(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>WF(e,t,!0)},{key:"Mod-Alt-ArrowUp",run:e=>zF(e,!1)},{key:"Mod-Alt-ArrowDown",run:e=>zF(e,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=Ij.create([n.main]):n.main.empty||(r=Ij.create([Ij.cursor(n.main.head)])),!!r&&(t(iF(e,r)),!0)}},{key:"Mod-Enter",run:HF},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=XF(e).map(({from:t,to:n})=>Ij.range(t,Math.min(n+1,e.doc.length)));return t(e.update({selection:Ij.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=oF(e.selection,t=>{let n=oL(e),r=n.resolveStack(t.from,1);if(t.empty){let e=n.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:n}=e;if((n.from<t.from&&n.to>=t.to||n.to>t.to&&n.from<=t.from)&&e.next)return Ij.range(n.to,n.from)}return t});return!n.eq(e.selection)&&(t(iF(e,n)),!0)},preventDefault:!0},{key:"Mod-[",run:tU},{key:"Mod-]",run:eU},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new OL(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),o=JF(e,(t,o,i)=>{let a=bL(r,t.from);if(null==a)return;/\S/.test(t.text)||(a=0);let s=/^\s*/.exec(t.text)[0],l=yL(e,a);(s!=l||i.from<t.from+s.length)&&(n[t.from]=a,o.push({from:t.from,to:t.from+s.length,insert:l}))});return o.changes.empty||t(e.update(o,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(XF(t).map(({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n}))),r=oF(t.selection,t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),o=e.coordsAtPos(t.head,t.assoc||1);o&&(n=r.bottom+e.documentTop-o.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>xF(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=NZ(e.state,n.from);return r.line?TZ(e):!!r.block&&jZ(e)}},{key:"Alt-A",run:CZ},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat(rU),iU={key:"Tab",run:eU,shift:tU};function aU(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r];"string"==typeof o?e.setAttribute(r,o):null!=o&&(e[r]=o)}t++}for(;t<arguments.length;t++)sU(e,arguments[t]);return e}function sU(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)sU(e,t[n])}}const lU="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class uU{constructor(e,t,n=0,r=e.length,o,i){this.test=i,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=o?e=>o(lU(e)):lU,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Oj(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=wj(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Sj(e);let r=this.normalize(t);if(r.length)for(let e=0,o=n;;e++){let i=r.charCodeAt(e),a=this.match(i,o,this.bufferPos+this.bufferStart);if(e==r.length-1){if(a)return this.value=a,this;break}o==n&&e<t.length&&t.charCodeAt(e)==i&&o++}}}match(e,t,n){let r=null;for(let t=0;t<this.matches.length;t+=2){let o=this.matches[t],i=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[t+1],to:n}:(this.matches[t]++,i=!0)),i||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:n}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}"undefined"!=typeof Symbol&&(uU.prototype[Symbol.iterator]=function(){return this});const cU={from:-1,to:-1,match:/.*/.exec("")},dU="gm"+(null==/x/.unicode?"":"u");class fU{constructor(e,t,n,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=cU,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new mU(e,t,n,r,o);this.re=new RegExp(t,dU+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let i=e.lineAt(r);this.curLineStart=i.from,this.matchPos=gU(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=gU(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const hU=new WeakMap;class pU{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=hU.get(e);if(!r||r.from>=n||r.to<=t){let r=new pU(t,e.sliceString(t,n));return hU.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:o,from:i}=r;return i>t&&(o=e.sliceString(t,i)+o,i=t),r.to<n&&(o+=e.sliceString(r.to,n)),hU.set(e,new pU(i,o)),new pU(t,o.slice(t-i,n-i))}}class mU{constructor(e,t,n,r,o){this.text=e,this.to=o,this.done=!1,this.value=cU,this.matchPos=gU(e,r),this.re=new RegExp(t,dU+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=pU.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=gU(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=pU.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function gU(e,t){if(t>=e.length)return t;let n,r=e.lineAt(t);for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function vU(e){let t=aU("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,o=r.doc.lineAt(r.selection.main.head),[,i,a,s,l]=n,u=s?+s.slice(1):0,c=a?+a:o.number;if(a&&l){let e=c/100;i&&(e=e*("-"==i?-1:1)+o.number/r.doc.lines),c=Math.round(r.doc.lines*e)}else a&&i&&(c=c*("-"==i?-1:1)+o.number);let d=r.doc.line(Math.max(1,Math.min(r.doc.lines,c))),f=Ij.cursor(d.from+Math.max(0,Math.min(u,d.length)));e.dispatch({effects:[yU.of(!1),iR.scrollIntoView(f.from,{y:"center"})],selection:f}),e.focus()}return{dom:aU("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:yU.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},aU("label",e.state.phrase("Go to line"),": ",t)," ",aU("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),aU("button",{name:"close",onclick:()=>{e.dispatch({effects:yU.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},[""]))}}"undefined"!=typeof Symbol&&(fU.prototype[Symbol.iterator]=mU.prototype[Symbol.iterator]=function(){return this});const yU=hN.define(),bU=Vj.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(yU)&&(e=n.value);return e},provide:e=>SQ.from(e,e=>e?vU:null)}),OU=iR.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),wU={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},SU=Rj.define({combine:e=>PN(e,wU,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const xU=iI.mark({class:"cm-selectionMatch"}),kU=iI.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _U(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==wN.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==wN.Word)}const PU=nM.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(SU),{state:n}=e,r=n.selection;if(r.ranges.length>1)return iI.none;let o,i=r.main,a=null;if(i.empty){if(!t.highlightWordAroundCursor)return iI.none;let e=n.wordAt(i.head);if(!e)return iI.none;a=n.charCategorizer(i.head),o=n.sliceDoc(e.from,e.to)}else{let e=i.to-i.from;if(e<t.minSelectionLength||e>200)return iI.none;if(t.wholeWords){if(o=n.sliceDoc(i.from,i.to),a=n.charCategorizer(i.head),!_U(a,n,i.from,i.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==wN.Word&&e(t.sliceDoc(r-1,r))==wN.Word}(a,n,i.from,i.to))return iI.none}else if(o=n.sliceDoc(i.from,i.to),!o)return iI.none}let s=[];for(let r of e.visibleRanges){let e=new uU(n.doc,o,r.from,r.to);for(;!e.next().done;){let{from:r,to:o}=e.value;if((!a||_U(a,n,r,o))&&(i.empty&&r<=i.from&&o>=i.to?s.push(kU.range(r,o)):(r>=i.to||o<=i.from)&&s.push(xU.range(r,o)),s.length>t.maxMatches))return iI.none}}return iI.set(s)}},{decorations:e=>e.decorations}),EU=iR.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const $U=Rj.define({combine:e=>PN(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new rV(e),scrollToMatch:e=>iR.scrollIntoView(e)})});class TU{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,dU),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new DU(this):new NU(this)}getCursor(e,t=0,n){let r=e.doc?e:_N.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?AU(this,r,t,n):jU(this,r,t,n)}}class CU{constructor(e){this.spec=e}}function jU(e,t,n,r){return new uU(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(n,r,o,i)=>((i>n||i+o.length<r)&&(i=Math.max(0,n-2),o=e.sliceString(i,Math.min(e.length,r+2))),!(t(IU(o,n-i))==wN.Word&&t(MU(o,n-i))==wN.Word||t(MU(o,r-i))==wN.Word&&t(IU(o,r-i))==wN.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class NU extends CU{constructor(e){super(e)}nextMatch(e,t,n){let r=jU(this.spec,e,n,e.doc.length).nextOverlapping();if(r.done){let n=Math.min(e.doc.length,t+this.spec.unquoted.length);r=jU(this.spec,e,0,n).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==n?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),o=jU(this.spec,e,n,r),i=null;for(;!o.nextOverlapping().done;)i=o.value;if(i)return i;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),!r||r.from==t&&r.to==n?null:r}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=jU(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let o=jU(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function AU(e,t,n,r){return new fU(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(o=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(o(IU(n.input,n.index))!=wN.Word||o(MU(n.input,n.index))!=wN.Word)&&(o(MU(n.input,n.index+n[0].length))!=wN.Word||o(IU(n.input,n.index+n[0].length))!=wN.Word)):void 0},n,r);var o}function IU(e,t){return e.slice(bj(e,t,!1),t)}function MU(e,t){return e.slice(t,bj(e,t))}class DU extends CU{nextMatch(e,t,n){let r=AU(this.spec,e,n,e.doc.length).next();return r.done&&(r=AU(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let o=Math.max(t,n-1e4*r),i=AU(this.spec,e,o,n),a=null;for(;!i.next().done;)a=i.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if("&"==n)return e.match[0];if("$"==n)return"$";for(let t=n.length;t>0;t--){let r=+n.slice(0,t);if(r>0&&r<e.match.length)return e.match[r]+n.slice(t)}return t})}matchAll(e,t){let n=AU(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let o=AU(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const RU=hN.define(),QU=hN.define(),zU=Vj.define({create:e=>new LU(HU(e).create(),null),update(e,t){for(let n of t.effects)n.is(RU)?e=new LU(n.value.create(),e.panel):n.is(QU)&&(e=new LU(e.query,n.value?qU:null));return e},provide:e=>SQ.from(e,e=>e.panel)});class LU{constructor(e,t){this.query=e,this.panel=t}}const ZU=iI.mark({class:"cm-searchMatch"}),FU=iI.mark({class:"cm-searchMatch cm-searchMatch-selected"}),UU=nM.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(zU))}update(e){let t=e.state.field(zU);(t!=e.startState.field(zU)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return iI.none;let{view:n}=this,r=new NN;for(let t=0,o=n.visibleRanges,i=o.length;t<i;t++){let{from:a,to:s}=o[t];for(;t<i-1&&s>o[t+1].from-500;)s=o[++t].to;e.highlight(n.state,a,s,(e,t)=>{let o=n.state.selection.ranges.some(n=>n.from==e&&n.to==t);r.add(e,t,o?FU:ZU)})}return r.finish()}},{decorations:e=>e.decorations});function VU(e){return t=>{let n=t.state.field(zU,!1);return n&&n.query.spec.valid?e(t,n):eV(t)}}const GU=VU((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);if(!r)return!1;let o=Ij.single(r.from,r.to),i=e.state.facet($U);return e.dispatch({selection:o,effects:[sV(e,r),i.scrollToMatch(o.main,e)],userEvent:"select.search"}),JU(e),!0}),BU=VU((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,o=t.prevMatch(n,r,r);if(!o)return!1;let i=Ij.single(o.from,o.to),a=e.state.facet($U);return e.dispatch({selection:i,effects:[sV(e,o),a.scrollToMatch(i.main,e)],userEvent:"select.search"}),JU(e),!0}),XU=VU((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:Ij.create(n.map(e=>Ij.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),YU=VU((e,{query:t})=>{let{state:n}=e,{from:r,to:o}=n.selection.main;if(n.readOnly)return!1;let i=t.nextMatch(n,r,r);if(!i)return!1;let a,s,l=i,u=[],c=[];l.from==r&&l.to==o&&(s=n.toText(t.getReplacement(l)),u.push({from:l.from,to:l.to,insert:s}),l=t.nextMatch(n,l.from,l.to),c.push(iR.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let d=e.state.changes(u);return l&&(a=Ij.single(l.from,l.to).map(d),c.push(sV(e,l)),c.push(n.facet($U).scrollToMatch(a.main,e))),e.dispatch({changes:d,selection:a,effects:c,userEvent:"input.replace"}),!0}),WU=VU((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}});if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:iR.announce.of(r),userEvent:"input.replace.all"}),!0});function qU(e){return e.state.facet($U).createPanel(e)}function HU(e,t){var n,r,o,i,a;let s=e.selection.main,l=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!l)return t;let u=e.facet($U);return new TU({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==t?void 0:t.caseSensitive)&&void 0!==r?r:u.caseSensitive,literal:null!==(o=null==t?void 0:t.literal)&&void 0!==o?o:u.literal,regexp:null!==(i=null==t?void 0:t.regexp)&&void 0!==i?i:u.regexp,wholeWord:null!==(a=null==t?void 0:t.wholeWord)&&void 0!==a?a:u.wholeWord})}function KU(e){let t=yQ(e,qU);return t&&t.dom.querySelector("[main-field]")}function JU(e){let t=KU(e);t&&t==e.root.activeElement&&t.select()}const eV=e=>{let t=e.state.field(zU,!1);if(t&&t.panel){let n=KU(e);if(n&&n!=e.root.activeElement){let r=HU(e.state,t.query.spec);r.valid&&e.dispatch({effects:RU.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[QU.of(!0),t?RU.of(HU(e.state,t.query.spec)):hN.appendConfig.of(uV)]});return!0},tV=e=>{let t=e.state.field(zU,!1);if(!t||!t.panel)return!1;let n=yQ(e,qU);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:QU.of(!1)}),!0},nV=[{key:"Mod-f",run:eV,scope:"editor search-panel"},{key:"F3",run:GU,shift:BU,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:GU,shift:BU,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:tV,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:o}=n.main,i=[],a=0;for(let t=new uU(e.doc,e.sliceDoc(r,o));!t.next().done;){if(i.length>1e3)return!1;t.value.from==r&&(a=i.length),i.push(Ij.range(t.value.from,t.value.to))}return t(e.update({selection:Ij.create(i,a),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=yQ(e,vU);if(!t){let n=[yU.of(!0)];null==e.state.field(bU,!1)&&n.push(hN.appendConfig.of([bU,OU])),e.dispatch({effects:n}),t=yQ(e,vU)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(e=>e.from===e.to))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=Ij.create(n.ranges.map(t=>e.wordAt(t.head)||Ij.cursor(t.head)),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=r))return!1;let o=function(e,t){let{main:n,ranges:r}=e.selection,o=e.wordAt(n.head),i=o&&o.from==n.from&&o.to==n.to;for(let n=!1,o=new uU(e.doc,t,r[r.length-1].to);;){if(o.next(),!o.done){if(n&&r.some(e=>e.from==o.value.from))continue;if(i){let t=e.wordAt(o.value.from);if(!t||t.from!=o.value.from||t.to!=o.value.to)continue}return o.value}if(n)return null;o=new uU(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,r);return!!o&&(t(e.update({selection:e.selection.addRange(Ij.range(o.from,o.to),!1),effects:iR.scrollIntoView(o.to)})),!0)},preventDefault:!0}];class rV{constructor(e){this.view=e;let t=this.query=e.state.field(zU).query.spec;function n(e,t,n){return aU("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=aU("input",{value:t.search,placeholder:oV(e,"Find"),"aria-label":oV(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=aU("input",{value:t.replace,placeholder:oV(e,"Replace"),"aria-label":oV(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=aU("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=aU("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=aU("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=aU("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",()=>GU(e),[oV(e,"next")]),n("prev",()=>BU(e),[oV(e,"previous")]),n("select",()=>XU(e),[oV(e,"all")]),aU("label",null,[this.caseField,oV(e,"match case")]),aU("label",null,[this.reField,oV(e,"regexp")]),aU("label",null,[this.wordField,oV(e,"by word")]),...e.state.readOnly?[]:[aU("br"),this.replaceField,n("replace",()=>YU(e),[oV(e,"replace")]),n("replaceAll",()=>WU(e),[oV(e,"replace all")])],aU("button",{name:"close",onclick:()=>tV(e),"aria-label":oV(e,"close"),type:"button"},[""])])}commit(){let e=new TU({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:RU.of(e)}))}keydown(e){var t,n,r;t=this.view,n=e,r="search-panel",bR(mR(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?BU:GU)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),YU(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(RU)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet($U).top}}function oV(e,t){return e.state.phrase(t)}const iV=30,aV=/[\s\.,:;?!]/;function sV(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),o=e.state.doc.lineAt(n).to,i=Math.max(r.from,t-iV),a=Math.min(o,n+iV),s=e.state.sliceDoc(i,a);if(i!=r.from)for(let e=0;e<iV;e++)if(!aV.test(s[e+1])&&aV.test(s[e])){s=s.slice(e);break}if(a!=o)for(let e=s.length-1;e>s.length-iV;e--)if(!aV.test(s[e-1])&&aV.test(s[e])){s=s.slice(0,e);break}return iR.announce.of(`${e.state.phrase("current match")}. ${s} ${e.state.phrase("on line")} ${r.number}.`)}const lV=iR.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),uV=[zU,qj.low(UU),lV];class cV{constructor(e,t,n,r){this.state=e,this.pos=t,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=oL(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),o=r.search(gV(e,!1));return o<0?null:{from:n+o,to:this.pos,text:r.slice(o)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function dV(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function fV(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[n,r]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=dV(t)+dV(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let o=e.matchBefore(r);return o||e.explicit?{from:o?o.from:e.pos,options:t,validFor:n}:null}}function hV(e,t){return n=>{for(let t=oL(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class pV{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function mV(e){return e.selection.main.from}function gV(e,t){var n;let{source:r}=e,o=t&&"^"!=r[0],i="$"!=r[r.length-1];return o||i?new RegExp(`${o?"^":""}(?:${r})${i?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const vV=cN.define();function yV(e,t,n,r){let{main:o}=e.selection,i=n-o.from,a=r-o.from;return{...e.changeByRange(s=>{if(s!=o&&n!=r&&e.sliceDoc(s.from+i,s.from+a)!=e.sliceDoc(n,r))return{range:s};let l=e.toText(t);return{changes:{from:s.from+i,to:r==o.from?s.to:s.from+a,insert:l},range:Ij.cursor(s.from+i+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const bV=new WeakMap;function OV(e){if(!Array.isArray(e))return e;let t=bV.get(e);return t||bV.set(e,t=fV(e)),t}const wV=hN.define(),SV=hN.define();class xV{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Oj(e,t),r=Sj(n);this.chars.push(n);let o=e.slice(t,t+r),i=o.toUpperCase();this.folded.push(Oj(i==o?o.toLowerCase():i,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:o,byWord:i}=this;if(1==t.length){let r=Oj(e,0),o=Sj(r),i=o==e.length?0:-100;if(r==t[0]);else{if(r!=n[0])return null;i+=-200}return this.ret(i,[0,o])}let a=e.indexOf(this.pattern);if(0==a)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let s=t.length,l=0;if(a<0){for(let o=0,i=Math.min(e.length,200);o<i&&l<s;){let i=Oj(e,o);i!=t[l]&&i!=n[l]||(r[l++]=o),o+=Sj(i)}if(l<s)return null}let u=0,c=0,d=!1,f=0,h=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),v=0;r<l&&c<s;){let l=Oj(e,r);a<0&&(u<s&&l==t[u]&&(o[u++]=r),f<s&&(l==t[f]||l==n[f]?(0==f&&(h=r),p=r+1,f++):f=0));let y,b=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(y=wj(l))!=y.toLowerCase()?1:y!=y.toUpperCase()?2:0;(!r||1==b&&m||0==v&&0!=b)&&(t[c]==l||n[c]==l&&(d=!0)?i[c++]=r:i.length&&(g=!1)),v=b,r+=Sj(l)}return c==s&&0==i[0]&&g?this.result((d?-200:0)-100,i,e):f==s&&0==h?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==s?this.ret(-900-e.length,[h,p]):c==s?this.result((d?-200:0)-100-700+(g?0:-1100),i,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[],o=0;for(let e of t){let t=e+(this.astral?Sj(Oj(n,e)):1);o&&r[o-1]==e?r[o-1]=t:(r[o++]=e,r[o++]=t)}return this.ret(e-n.length,r)}}class kV{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const _V=Rj.define({combine:e=>PN(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:EV,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>PV(e(n),t(n)),optionClass:(e,t)=>n=>PV(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function PV(e,t){return e?t?e+" "+t:e:t}function EV(e,t,n,r,o,i){let a,s,l=e.textDirection==vI.RTL,u=l,c=!1,d="top",f=t.left-o.left,h=o.right-t.right,p=r.right-r.left,m=r.bottom-r.top;if(u&&f<Math.min(p,h)?u=!1:!u&&h<Math.min(p,f)&&(u=!0),p<=(u?f:h))a=Math.max(o.top,Math.min(n.top,o.bottom-m))-t.top,s=Math.min(400,u?f:h);else{c=!0,s=Math.min(400,(l?t.right:o.right-t.left)-30);let e=o.bottom-t.bottom;e>=m||e>t.top?a=n.bottom-t.top:(d="bottom",a=t.bottom-n.top)}return{style:`${d}: ${a/((t.bottom-t.top)/i.offsetHeight)}px; max-width: ${s/((t.right-t.left)/i.offsetWidth)}px`,class:"cm-completionInfo-"+(c?l?"left-narrow":"right-narrow":u?"left":"right")}}function $V(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class TV{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:i}=r.open,a=e.state.facet(_V);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let i=e.displayLabel||e.label,a=0;for(let e=0;e<r.length;){let t=r[e++],n=r[e++];t>a&&o.appendChild(document.createTextNode(i.slice(a,t)));let s=o.appendChild(document.createElement("span"));s.appendChild(document.createTextNode(i.slice(t,n))),s.className="cm-completionMatchedText",a=n}return a<i.length&&o.appendChild(document.createTextNode(i.slice(a))),o},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=$V(o.length,i,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",n=>{let{options:r}=e.state.field(t).open;for(let t,o=n.target;o&&o!=this.dom;o=o.parentNode)if("LI"==o.nodeName&&(t=/-(\d+)$/.exec(o.id))&&+t[1]<r.length)return this.applyCompletion(e,r[+t[1]]),void n.preventDefault()}),this.dom.addEventListener("focusout",t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(_V).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:SV.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:o,selected:i,disabled:a}=n.open;r.open&&r.open.options==o||(this.range=$V(o.length,i,e.state.facet(_V).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),a!=(null===(t=r.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=$V(t.options.length,t.selected,this.view.state.facet(_V).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let o="string"==typeof r?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)}).catch(e=>KI(this.view.state,e,"completion info")):this.addInfoPane(o,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;n.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)"LI"==n.nodeName&&n.id?r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):r--;return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.height/e.offsetHeight;r.top<n.top?e.scrollTop-=(n.top-r.top)/o:r.bottom>n.bottom&&(e.scrollTop+=(r.bottom-n.bottom)/o)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let e=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(_V).positionInfo(this.view,t,r,n,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",e=>{e.target==r&&e.preventDefault()});let o=null;for(let i=n.from;i<n.to;i++){let{completion:a,match:s}=e[i],{section:l}=a;if(l){let e="string"==typeof l?l:l.name;if(e!=o&&(i>n.from||0==n.from))if(o=e,"string"!=typeof l&&l.header)r.appendChild(l.header(l));else{r.appendChild(document.createElement("completion-section")).textContent=e}}const u=r.appendChild(document.createElement("li"));u.id=t+"-"+i,u.setAttribute("role","option");let c=this.optionClass(a);c&&(u.className=c);for(let e of this.optionContent){let t=e(a,this.view.state,this.view,s);t&&u.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function CV(e,t){return n=>new TV(n,e,t)}function jV(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class NV{constructor(e,t,n,r,o,i){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=o,this.disabled=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new NV(this.options,DV(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,o,i){if(r&&!i&&e.some(e=>e.isPending))return r.setDisabled();let a=function(e,t){let n=[],r=null,o=null,i=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some(t=>t.name==e)||r.push("string"==typeof t?{name:e}:t)}},a=t.facet(_V);for(let r of e)if(r.hasResult()){let e=r.result.getMatch;if(!1===r.result.filter)for(let t of r.result.options)i(new pV(t,r.source,e?e(t):[],1e9-n.length));else{let n,s=t.sliceDoc(r.from,r.to),l=a.filterStrict?new kV(s):new xV(s);for(let t of r.result.options)if(n=l.match(t.label)){let a=t.displayLabel?e?e(t,n.matched):[]:n.matched,s=n.score+(t.boost||0);if(i(new pV(t,r.source,a,s)),"object"==typeof t.section&&"dynamic"===t.section.rank){let{name:e}=t.section;o||(o=Object.create(null)),o[e]=Math.max(s,o[e]||-1e9)}}}}if(r){let e=Object.create(null),t=0,i=(e,t)=>("dynamic"===e.rank&&"dynamic"===t.rank?o[t.name]-o[e.name]:0)||("number"==typeof e.rank?e.rank:1e9)-("number"==typeof t.rank?t.rank:1e9)||(e.name<t.name?-1:1);for(let n of r.sort(i))t-=1e5,e[n.name]=t;for(let t of n){let{section:n}=t.completion;n&&(t.score+=e["string"==typeof n?n:n.name])}}let s=[],l=null,u=a.compareCompletions;for(let e of n.sort((e,t)=>t.score-e.score||u(e.completion,t.completion))){let t=e.completion;!l||l.label!=t.label||l.detail!=t.detail||null!=l.type&&null!=t.type&&l.type!=t.type||l.apply!=t.apply||l.boost!=t.boost?s.push(e):jV(e.completion)>jV(l)&&(s[s.length-1]=e),l=e.completion}return s}(e,t);if(!a.length)return r&&e.some(e=>e.isPending)?r.setDisabled():null;let s=t.facet(_V).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<a.length;t++)if(a[t].completion==e){s=t;break}}return new NV(a,DV(n,s),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:GV,above:o.aboveCursor},r?r.timestamp:Date.now(),s,!1)}map(e){return new NV(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new NV(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class AV{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new AV(RV,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(_V),r=(n.override||t.languageDataAt("autocomplete",mV(t)).map(OV)).map(t=>{let r=this.active.find(e=>e.source==t)||new zV(t,this.active.some(e=>0!=e.state)?1:0);return r.update(e,n)});r.length==this.active.length&&r.every((e,t)=>e==this.active[t])&&(r=this.active);let o=this.open,i=e.effects.some(e=>e.is(ZV));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult();)n++;for(;r<t.length&&!t[r].hasResult();)r++;let o=n==e.length,i=r==t.length;if(o||i)return o==i;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)||i?o=NV.build(r,t,this.id,o,n,i):o&&o.disabled&&!r.some(e=>e.isPending)&&(o=null),!o&&r.every(e=>!e.isPending)&&r.some(e=>e.hasResult())&&(r=r.map(e=>e.hasResult()?new zV(e.source,0):e));for(let t of e.effects)t.is(FV)&&(o=o&&o.setSelected(t.value,this.id));return r==this.active&&o==this.open?this:new AV(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?IV:MV}}const IV={"aria-autocomplete":"list"},MV={};function DV(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const RV=[];function QV(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(vV);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class zV{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let n=QV(e,t),r=this;(8&n||16&n&&this.touches(e))&&(r=new zV(r.source,0)),4&n&&0==r.state&&(r=new zV(this.source,1)),r=r.updateFor(e,n);for(let t of e.effects)if(t.is(wV))r=new zV(r.source,1,t.value);else if(t.is(SV))r=new zV(r.source,0);else if(t.is(ZV))for(let e of t.value)e.source==r.source&&(r=e);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(mV(e.state))}}class LV extends zV{constructor(e,t,n,r,o,i){super(e,3,t),this.limit=n,this.result=r,this.from=o,this.to=i}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),i=e.changes.mapPos(this.to,1),a=mV(e.state);if(a>i||!r||2&t&&(mV(e.startState)==this.from||a<this.limit))return new zV(this.source,4&t?1:0);let s=e.changes.mapPos(this.limit);return function(e,t,n,r){if(!e)return!1;let o=t.sliceDoc(n,r);return"function"==typeof e?e(o,n,r,t):gV(e,!0).test(o)}(r.validFor,e.state,o,i)?new LV(this.source,this.explicit,s,r,o,i):r.update&&(r=r.update(r,o,i,new cV(e.state,a,!1)))?new LV(this.source,this.explicit,s,r,r.from,null!==(n=r.to)&&void 0!==n?n:mV(e.state)):new zV(this.source,1,this.explicit)}map(e){if(e.empty)return this;return(this.result.map?this.result.map(this.result,e):this.result)?new LV(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new zV(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}const ZV=hN.define({map:(e,t)=>e.map(e=>e.map(t))}),FV=hN.define(),UV=Vj.define({create:()=>AV.start(),update:(e,t)=>e.update(t),provide:e=>[lQ.from(e,e=>e.tooltip),iR.contentAttributes.from(e,e=>e.attrs)]});function VV(e,t){const n=t.completion.apply||t.completion.label;let r=e.state.field(UV).active.find(e=>e.source==t.source);return r instanceof LV&&("string"==typeof n?e.dispatch({...yV(e.state,n,r.from,r.to),annotations:vV.of(t.completion)}):n(e,t.completion,r.from,r.to),!0)}const GV=CV(UV,VV);function BV(e,t="option"){return n=>{let r=n.state.field(UV,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(_V).interactionDelay)return!1;let o,i=1;"page"==t&&(o=mQ(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,s=r.open.selected>-1?r.open.selected+i*(e?1:-1):e?0:a-1;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:FV.of(s)}),!0}}const XV=e=>!!e.state.field(UV,!1)&&(e.dispatch({effects:wV.of(!0)}),!0);class YV{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const WV=nM.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(UV).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(UV),n=e.state.facet(_V);if(!e.selectionSet&&!e.docChanged&&e.startState.field(UV)==t)return;let r=e.transactions.some(e=>{let t=QV(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let n=this.running[t];if(r||n.context.abortOnDocChange&&e.docChanged||n.updates.length+e.transactions.length>50&&Date.now()-n.time>1e3){for(let e of n.context.abortListeners)try{e()}catch(e){KI(this.view.state,e)}n.context.abortListeners=null,this.running.splice(t--,1)}else n.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(wV)))&&(this.pendingStart=!0);let o=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),o):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(UV);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(_V).updateSyncTime))}startQuery(e){let{state:t}=this.view,n=mV(t),r=new cV(t,n,e.explicit,this.view),o=new YV(e,r);this.running.push(o),Promise.resolve(e.source(r)).then(e=>{o.context.aborted||(o.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:SV.of(null)}),KI(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(_V).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(_V),r=this.view.state.field(UV);for(let o=0;o<this.running.length;o++){let i=this.running[o];if(void 0===i.done)continue;if(this.running.splice(o--,1),i.done){let r=mV(i.updates.length?i.updates[0].startState:this.view.state),o=Math.min(r,i.done.from+(i.active.explicit?0:1)),a=new LV(i.active.source,i.active.explicit,o,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:r);for(let e of i.updates)a=a.update(e,n);if(a.hasResult()){t.push(a);continue}}let a=r.active.find(e=>e.source==i.active.source);if(a&&a.isPending)if(null==i.done){let e=new zV(i.active.source,0);for(let t of i.updates)e=e.update(t,n);e.isPending||t.push(e)}else this.startQuery(a)}(t.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:ZV.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(UV,!1);if(t&&t.tooltip&&this.view.state.facet(_V).closeOnBlur){let n=t.open&&mQ(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:SV.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:wV.of(!1)}),20),this.composing=0}}}),qV="object"==typeof navigator&&/Win/.test(navigator.platform),HV=qj.highest(iR.domEventHandlers({keydown(e,t){let n=t.state.field(UV,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&(!qV||!e.altKey)||e.metaKey)return!1;let r=n.open.options[n.open.selected],o=n.active.find(e=>e.source==r.source),i=r.completion.commitCharacters||o.result.commitCharacters;return i&&i.indexOf(e.key)>-1&&VV(t,r),!1}})),KV=iR.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class JV{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class eG{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,kj.TrackDel),n=e.mapPos(this.to,1,kj.TrackDel);return null==t||null==n?null:new eG(this.field,t,n)}}class tG{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],o=e.doc.lineAt(t),i=/^\s*/.exec(o.text)[0];for(let o of this.lines){if(n.length){let n=i,a=/^\t*/.exec(o)[0].length;for(let t=0;t<a;t++)n+=e.facet(gL);r.push(t+n.length-a),o=n+o.slice(a)}n.push(o),t+=o.length+1}let a=this.fieldPositions.map(e=>new eG(e.field,r[e.line]+e.from,r[e.line]+e.to));return{text:n,ranges:a}}static parse(e){let t,n=[],r=[],o=[];for(let i of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(i);){let e=t[1]?+t[1]:null,a=t[2]||t[3]||"",s=-1,l=a.replace(/\\[{}]/g,e=>e[1]);for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:l&&n[t].name==l)&&(s=t);if(s<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:l}),s=t;for(let e of o)e.field>=s&&e.field++}for(let e of o)if(e.line==r.length&&e.from>t.index){let n=t[2]?3+(t[1]||"").length:2;e.from-=n,e.to-=n}o.push(new JV(s,r.length,t.index,t.index+l.length)),i=i.slice(0,t.index)+a+i.slice(t.index+t[0].length)}i=i.replace(/\\([{}])/g,(e,t,n)=>{for(let e of o)e.line==r.length&&e.from>n&&(e.from--,e.to--);return t}),r.push(i)}return new tG(r,o)}}let nG=iI.widget({widget:new class extends rI{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),rG=iI.mark({class:"cm-snippetField"});class oG{constructor(e,t){this.ranges=e,this.active=t,this.deco=iI.set(e.map(e=>(e.from==e.to?nG:rG).range(e.from,e.to)),!0)}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new oG(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}const iG=hN.define({map:(e,t)=>e&&e.map(t)}),aG=hN.define(),sG=Vj.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(iG))return n.value;if(n.is(aG)&&e)return new oG(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>iR.decorations.from(e,e=>e?e.deco:iI.none)});function lG(e,t){return Ij.create(e.filter(e=>e.field==t).map(e=>Ij.range(e.from,e.to)))}function uG(e){let t=tG.parse(e);return(e,n,r,o)=>{let{text:i,ranges:a}=t.instantiate(e.state,r),{main:s}=e.state.selection,l={changes:{from:r,to:o==s.from?s.to:o,insert:uj.of(i)},scrollIntoView:!0,annotations:n?[vV.of(n),pN.userEvent.of("input.complete")]:void 0};if(a.length&&(l.selection=lG(a,0)),a.some(e=>e.field>0)){let t=new oG(a,0),n=l.effects=[iG.of(t)];void 0===e.state.field(sG,!1)&&n.push(hN.appendConfig.of([sG,hG,mG,KV]))}e.dispatch(e.state.update(l))}}function cG(e){return({state:t,dispatch:n})=>{let r=t.field(sG,!1);if(!r||e<0&&0==r.active)return!1;let o=r.active+e,i=e>0&&!r.ranges.some(t=>t.field==o+e);return n(t.update({selection:lG(r.ranges,o),effects:iG.of(i?null:new oG(r.ranges,o)),scrollIntoView:!0})),!0}}const dG=[{key:"Tab",run:cG(1),shift:cG(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(sG,!1)&&(t(e.update({effects:iG.of(null)})),!0)}],fG=Rj.define({combine:e=>e.length?e[0]:dG}),hG=qj.highest(hR.compute([fG],e=>e.facet(fG)));function pG(e,t){return{...t,apply:uG(e)}}const mG=iR.domEventHandlers({mousedown(e,t){let n,r=t.state.field(sG,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let o=r.ranges.find(e=>e.from<=n&&e.to>=n);return!(!o||o.field==r.active)&&(t.dispatch({selection:lG(r.ranges,o.field),effects:iG.of(r.ranges.some(e=>e.field>o.field)?new oG(r.ranges,o.field):null),scrollIntoView:!0}),!0)}});const gG={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},vG=hN.define({map(e,t){let n=t.mapPos(e,-1,kj.TrackAfter);return null==n?void 0:n}}),yG=new class extends EN{};yG.startSide=1,yG.endSide=-1;const bG=Vj.define({create:()=>jN.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(vG)&&(e=e.update({add:[yG.range(n.value,n.value+1)]}));return e}});const OG="()[]{}<>";function wG(e){for(let t=0;t<16;t+=2)if(OG.charCodeAt(t)==e)return OG.charAt(t+1);return wj(e<128?e:e+1)}function SG(e,t){return e.languageDataAt("closeBrackets",t)[0]||gG}const xG="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),kG=iR.inputHandler.of((e,t,n,r)=>{if((xG?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let o=e.state.selection.main;if(r.length>2||2==r.length&&1==Sj(Oj(r,0))||t!=o.from||n!=o.to)return!1;let i=function(e,t){let n=SG(e,e.selection.main.head),r=n.brackets||gG.brackets;for(let o of r){let i=wG(Oj(o,0));if(t==o)return i==o?CG(e,o,r.indexOf(o+o+o)>-1,n):$G(e,o,i,n.before||gG.before);if(t==i&&PG(e,e.selection.main.from))return TG(e,o,i)}return null}(e.state,r);return!!i&&(e.dispatch(i),!0)}),_G=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=SG(e,e.selection.main.head).brackets||gG.brackets,r=null,o=e.changeByRange(t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return Sj(Oj(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let o of n)if(o==r&&EG(e.doc,t.head)==wG(Oj(o,0)))return{changes:{from:t.head-o.length,to:t.head+o.length},range:Ij.cursor(t.head-o.length)}}return{range:r=t}});return r||t(e.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function PG(e,t){let n=!1;return e.field(bG).between(0,e.doc.length,e=>{e==t&&(n=!0)}),n}function EG(e,t){let n=e.sliceString(t,t+2);return n.slice(0,Sj(Oj(n,0)))}function $G(e,t,n,r){let o=null,i=e.changeByRange(i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:n,from:i.to}],effects:vG.of(i.to+t.length),range:Ij.range(i.anchor+t.length,i.head+t.length)};let a=EG(e.doc,i.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:t+n,from:i.head},effects:vG.of(i.head+t.length),range:Ij.cursor(i.head+t.length)}:{range:o=i}});return o?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function TG(e,t,n){let r=null,o=e.changeByRange(t=>t.empty&&EG(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:Ij.cursor(t.head+n.length)}:r={range:t});return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function CG(e,t,n,r){let o=r.stringPrefixes||gG.stringPrefixes,i=null,a=e.changeByRange(r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:vG.of(r.to+t.length),range:Ij.range(r.anchor+t.length,r.head+t.length)};let a,s=r.head,l=EG(e.doc,s);if(l==t){if(jG(e,s))return{changes:{insert:t+t,from:s},effects:vG.of(s+t.length),range:Ij.cursor(s+t.length)};if(PG(e,s)){let r=n&&e.sliceDoc(s,s+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:s,to:s+r.length,insert:r},range:Ij.cursor(s+r.length)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&(a=NG(e,s-2*t.length,o))>-1&&jG(e,a))return{changes:{insert:t+t+t+t,from:s},effects:vG.of(s+t.length),range:Ij.cursor(s+t.length)};if(e.charCategorizer(s)(l)!=wN.Word&&NG(e,s,o)>-1&&!function(e,t,n,r){let o=oL(e).resolveInner(t,-1),i=r.reduce((e,t)=>Math.max(e,t.length),0);for(let a=0;a<5;a++){let a=e.sliceDoc(o.from,Math.min(o.to,o.from+n.length+i)),s=a.indexOf(n);if(!s||s>-1&&r.indexOf(a.slice(0,s))>-1){let t=o.firstChild;for(;t&&t.from==o.from&&t.to-t.from>n.length+s;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=o.to==t&&o.parent;if(!l)break;o=l}return!1}(e,s,t,o))return{changes:{insert:t+t,from:s},effects:vG.of(s+t.length),range:Ij.cursor(s+t.length)}}return{range:i=r}});return i?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function jG(e,t){let n=oL(e).resolveInner(t+1);return n.parent&&n.from==t}function NG(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=wN.Word)return t;for(let o of n){let n=t-o.length;if(e.sliceDoc(n,t)==o&&r(e.sliceDoc(n-1,n))!=wN.Word)return n}return-1}const AG=[{key:"Ctrl-Space",run:XV},{mac:"Alt-`",run:XV},{mac:"Alt-i",run:XV},{key:"Escape",run:e=>{let t=e.state.field(UV,!1);return!(!t||!t.active.some(e=>0!=e.state))&&(e.dispatch({effects:SV.of(null)}),!0)}},{key:"ArrowDown",run:BV(!0)},{key:"ArrowUp",run:BV(!1)},{key:"PageDown",run:BV(!0,"page")},{key:"PageUp",run:BV(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(UV,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(_V).interactionDelay)&&VV(e,t.open.options[t.open.selected])}}],IG=qj.highest(hR.computeN([_V],e=>e.facet(_V).defaultKeymap?[AG]:[]));class MG{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class DG{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=n.facet(WG).markerFilter;r&&(e=r(e,n));let o=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),i=new NN,a=[],s=0;for(let e=0;;){let t,r,l=e==o.length?null:o[e];if(!l&&!a.length)break;for(a.length?(t=s,r=a.reduce((e,t)=>Math.min(e,t.to),l&&l.from>t?l.from:1e8)):(t=l.from,r=l.to,a.push(l),e++);e<o.length;){let n=o[e];if(n.from!=t||!(n.to>n.from||n.to==t)){r=Math.min(n.from,r);break}a.push(n),e++,r=Math.min(n.to,r)}let u=aB(a);if(a.some(e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from))i.add(t,t,iI.widget({widget:new JG(u),diagnostics:a.slice()}));else{let e=a.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");i.add(t,r,iI.mark({class:"cm-lintRange cm-lintRange-"+u+e,diagnostics:a.slice(),inclusiveEnd:a.some(e=>e.to>r)}))}s=r;for(let e=0;e<a.length;e++)a[e].to<=s&&a.splice(e--,1)}let l=i.finish();return new DG(l,t,RG(l))}}function RG(e,t=null,n=0){let r=null;return e.between(n,1e9,(e,n,{spec:o})=>{if(!(t&&o.diagnostics.indexOf(t)<0))if(r){if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new MG(r.from,n,r.diagnostic)}else r=new MG(e,n,t||o.diagnostics[0])}),r}function QG(e,t){let n=t.pos,r=t.end||n,o=e.state.facet(WG).hideOn(e,n,r);if(null!=o)return o;let i=e.startState.doc.lineAt(t.pos);return!(!e.effects.some(e=>e.is(LG))&&!e.changes.touchesRange(i.from,Math.max(i.to,r)))}function zG(e,t){return e.field(UG,!1)?t:t.concat(hN.appendConfig.of(sB))}const LG=hN.define(),ZG=hN.define(),FG=hN.define(),UG=Vj.define({create:()=>new DG(iI.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),r=null,o=e.panel;if(e.selected){let o=t.changes.mapPos(e.selected.from,1);r=RG(n,e.selected.diagnostic,o)||RG(n,null,o)}!n.size&&o&&t.state.facet(WG).autoPanel&&(o=null),e=new DG(n,o,r)}for(let n of t.effects)if(n.is(LG)){let r=t.state.facet(WG).autoPanel?n.value.length?tB.open:null:e.panel;e=DG.init(n.value,r,t.state)}else n.is(ZG)?e=new DG(e.diagnostics,n.value?tB.open:null,e.selected):n.is(FG)&&(e=new DG(e.diagnostics,e.panel,n.value));return e},provide:e=>[SQ.from(e,e=>e.panel),iR.decorations.from(e,e=>e.diagnostics)]});const VG=iI.mark({class:"cm-lintRange cm-lintRange-active"});function GG(e,t,n){let r,{diagnostics:o}=e.state.field(UG),i=-1,a=-1;o.between(t-(n<0?1:0),t+(n>0?1:0),(e,o,{spec:s})=>{if(t>=e&&t<=o&&(e==o||(t>e||n>0)&&(t<o||n<0)))return r=s.diagnostics,i=e,a=o,!1});let s=e.state.facet(WG).tooltipFilter;return r&&s&&(r=s(r,e.state)),r?{pos:i,end:a,above:e.state.doc.lineAt(i).to<a,create:()=>({dom:BG(e,r)})}:null}function BG(e,t){return aU("ul",{class:"cm-tooltip-lint"},t.map(t=>KG(e,t,!1)))}const XG=e=>{let t=e.state.field(UG,!1);return!(!t||!t.panel)&&(e.dispatch({effects:ZG.of(!1)}),!0)},YG=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(UG,!1);t&&t.panel||e.dispatch({effects:zG(e.state,[ZG.of(!0)])});let n=yQ(e,tB.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(UG,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}];const WG=Rj.define({combine:e=>({sources:e.map(e=>e.source).filter(e=>null!=e),...PN(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:qG,tooltipFilter:qG,needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t,hideOn:(e,t)=>e?t?(n,r,o)=>e(n,r,o)||t(n,r,o):e:t,autoPanel:(e,t)=>e||t})})});function qG(e,t){return e?t?(n,r)=>t(e(n,r),r):e:t}function HG(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some(e=>e.toLowerCase()==r.toLowerCase())){t.push(r);continue e}}t.push("")}return t}function KG(e,t,n){var r;let o=n?HG(t.actions):[];return aU("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},aU("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(r=t.actions)||void 0===r?void 0:r.map((n,r)=>{let i=!1,a=r=>{if(r.preventDefault(),i)return;i=!0;let o=RG(e.state.field(UG).diagnostics,t);o&&n.apply(e,o.from,o.to)},{name:s}=n,l=o[r]?s.indexOf(o[r]):-1,u=l<0?s:[s.slice(0,l),aU("u",s.slice(l,l+1)),s.slice(l+1)];return aU("button",{type:"button",class:"cm-diagnosticAction"+(n.markClass?" "+n.markClass:""),onclick:a,onmousedown:a,"aria-label":` Action: ${s}${l<0?"":` (access key "${o[r]})"`}.`},u)}),t.source&&aU("div",{class:"cm-diagnosticSource"},t.source))}class JG extends rI{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return aU("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class eB{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=KG(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class tB{constructor(e){this.view=e,this.items=[];this.list=aU("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)XG(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=HG(n.actions);for(let o=0;o<r.length;o++)if(r[o].toUpperCase().charCodeAt(0)==t.keyCode){let t=RG(this.view.state.field(UG).diagnostics,n);t&&n.actions[o].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=aU("div",{class:"cm-panel-lint"},this.list,aU("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>XG(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(UG).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(UG),n=0,r=!1,o=null,i=new Set;for(e.between(0,this.view.state.doc.length,(e,a,{spec:s})=>{for(let e of s.diagnostics){if(i.has(e))continue;i.add(e);let a,s=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==e){s=t;break}s<0?(a=new eB(this.view,e),this.items.splice(n,0,a),r=!0):(a=this.items[s],s>n&&(this.items.splice(n,s-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),o=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new eB(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let n=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/n:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=RG(this.view.state.field(UG).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:FG.of(t)})}static open(e){return new tB(e)}}function nB(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function rB(e){return nB(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const oB=iR.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:rB("#d11")},".cm-lintRange-warning":{backgroundImage:rB("orange")},".cm-lintRange-info":{backgroundImage:rB("#999")},".cm-lintRange-hint":{backgroundImage:rB("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function iB(e){return"error"==e?4:"warning"==e?3:"info"==e?2:1}function aB(e){let t="hint",n=1;for(let r of e){let e=iB(r.severity);e>n&&(n=e,t=r.severity)}return t}const sB=[UG,iR.decorations.compute([UG],e=>{let{selected:t,panel:n}=e.field(UG);return t&&n&&t.from!=t.to?iI.set([VG.range(t.from,t.to)]):iI.none}),pQ(GG,{hideOn:QG}),oB];var lB=function(e){void 0===e&&(e={});var{crosshairCursor:t=!1}=e,n=[];!1!==e.closeBracketsKeymap&&(n=n.concat(_G)),!1!==e.defaultKeymap&&(n=n.concat(oU)),!1!==e.searchKeymap&&(n=n.concat(nV)),!1!==e.historyKeymap&&(n=n.concat(rF)),!1!==e.foldKeymap&&(n=n.concat(VL)),!1!==e.completionKeymap&&(n=n.concat(AG)),!1!==e.lintKeymap&&(n=n.concat(YG));var r=[];return!1!==e.lineNumbers&&r.push(function(e={}){return[zQ.of(e),CQ(),FQ]}()),!1!==e.highlightActiveLineGutter&&r.push(GQ),!1!==e.highlightSpecialChars&&r.push(function(e={}){return[ZR.of(e),FR||(FR=nM.fromClass(class{constructor(e){this.view=e,this.decorations=iI.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(ZR)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new DR({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:o}=n.state,i=Oj(t[0],0);if(9==i){let e=o.lineAt(r),t=n.state.tabSize,i=UN(e.text,t,r-e.from);return iI.replace({widget:new VR((t-i%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[i]||(this.decorationCache[i]=iI.replace({widget:new UR(e,i)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(ZR);e.startState.facet(ZR)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&r.push(function(e={}){return[LZ,zZ.of(e),iR.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?FZ:"historyRedo"==e.inputType?UZ:null;return!!n&&(e.preventDefault(),n(t))}})]}()),!1!==e.foldGutter&&r.push(function(e={}){let t={...HL,...e},n=new KL(t,!0),r=new KL(t,!1),o=nM.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(hL)!=e.state.facet(hL)||e.startState.field(QL,!1)!=e.state.field(QL,!1)||oL(e.startState)!=oL(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new NN;for(let o of e.viewportLineBlocks){let i=LL(e.state,o.from,o.to)?r:AL(e.state,o.from,o.to)?n:null;i&&t.add(o.from,o.from,i)}return t.finish()}}),{domEventHandlers:i}=t;return[o,$Q({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(o))||void 0===t?void 0:t.markers)||jN.empty},initialSpacer:()=>new KL(t,!1),domEventHandlers:{...i,click:(e,t,n)=>{if(i.click&&i.click(e,t,n))return!0;let r=LL(e.state,t.from,t.to);if(r)return e.dispatch({effects:DL.of(r)}),!0;let o=AL(e.state,t.from,t.to);return!!o&&(e.dispatch({effects:ML.of(o)}),!0)}}}),XL()]}()),!1!==e.drawSelection&&r.push(function(e={}){return[PR.of(e),$R,CR,jR,XI.of(!0)]}()),!1!==e.dropCursor&&r.push([AR,IR]),!1!==e.allowMultipleSelections&&r.push(_N.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&r.push(_N.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,o=n.lineAt(r);if(r>o.from+200)return e;let i=n.sliceString(o.from,r);if(!t.some(e=>e.test(i)))return e;let{state:a}=e,s=-1,l=[];for(let{head:e}of a.selection.ranges){let t=a.doc.lineAt(e);if(t.from==s)continue;s=t.from;let n=bL(a,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],o=yL(a,n);r!=o&&l.push({from:t.from,to:t.from+r.length,insert:o})}return l.length?[e,{changes:l,sequential:!0}]:e})),!1!==e.syntaxHighlighting&&r.push(oZ(sZ,{fallback:!0})),!1!==e.bracketMatching&&r.push(function(e={}){return[cZ.of(e),mZ]}()),!1!==e.closeBrackets&&r.push([kG,bG]),!1!==e.autocompletion&&r.push(function(e={}){return[HV,UV,_V.of(e),WV,IG,KV]}()),!1!==e.rectangularSelection&&r.push(function(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return iR.mouseSelectionStyle.of((e,n)=>t(n)?qR(e,n):null)}()),!1!==t&&r.push(function(e={}){let[t,n]=HR[e.key||"Alt"],r=nM.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,iR.contentAttributes.of(e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?KR:null})]}()),!1!==e.highlightActiveLine&&r.push(BR),!1!==e.highlightSelectionMatches&&r.push(function(e){let t=[EU,PU];return e&&t.push(SU.of(e)),t}()),e.tabSize&&"number"==typeof e.tabSize&&r.push(gL.of(" ".repeat(e.tabSize))),r.concat([hR.of(n.flat())]).filter(Boolean)};const uB="#e5c07b",cB="#e06c75",dB="#56b6c2",fB="#ffffff",hB="#abb2bf",pB="#7d8799",mB="#61afef",gB="#98c379",vB="#d19a66",yB="#c678dd",bB="#21252b",OB="#2c313a",wB="#282c34",SB="#353a42",xB="#3E4451",kB="#528bff",_B=[iR.theme({"&":{color:hB,backgroundColor:wB},".cm-content":{caretColor:kB},".cm-cursor, .cm-dropCursor":{borderLeftColor:kB},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:xB},".cm-panels":{backgroundColor:bB,color:hB},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:wB,color:pB,border:"none"},".cm-activeLineGutter":{backgroundColor:OB},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:SB},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:SB,borderBottomColor:SB},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:OB,color:hB}}},{dark:!0}),oZ(eZ.define([{tag:qz.keyword,color:yB},{tag:[qz.name,qz.deleted,qz.character,qz.propertyName,qz.macroName],color:cB},{tag:[qz.function(qz.variableName),qz.labelName],color:mB},{tag:[qz.color,qz.constant(qz.name),qz.standard(qz.name)],color:vB},{tag:[qz.definition(qz.name),qz.separator],color:hB},{tag:[qz.typeName,qz.className,qz.number,qz.changed,qz.annotation,qz.modifier,qz.self,qz.namespace],color:uB},{tag:[qz.operator,qz.operatorKeyword,qz.url,qz.escape,qz.regexp,qz.link,qz.special(qz.string)],color:dB},{tag:[qz.meta,qz.comment],color:pB},{tag:qz.strong,fontWeight:"bold"},{tag:qz.emphasis,fontStyle:"italic"},{tag:qz.strikethrough,textDecoration:"line-through"},{tag:qz.link,color:pB,textDecoration:"underline"},{tag:qz.heading,fontWeight:"bold",color:cB},{tag:[qz.atom,qz.bool,qz.special(qz.variableName)],color:vB},{tag:[qz.processingInstruction,qz.string,qz.inserted],color:gB},{tag:qz.invalid,color:fB}]))];var PB=iR.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),EB=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:r=!1,theme:o="light",placeholder:i="",basicSetup:a=!0}=e,s=[];switch(t&&s.unshift(hR.of([iU])),a&&("boolean"==typeof a?s.unshift(lB()):s.unshift(lB(a))),i&&s.unshift(function(e){let t=nM.fromClass(class{constructor(t){this.view=t,this.placeholder=e?iI.set([iI.widget({widget:new XR(e),side:1}).range(0)]):iI.none}get decorations(){return this.view.state.doc.length?iI.none:this.placeholder}},{decorations:e=>e.decorations});return"string"==typeof e?[t,iR.contentAttributes.of({"aria-placeholder":e})]:t}(i)),o){case"light":s.push(PB);break;case"dark":s.push(_B);break;case"none":break;default:s.push(o)}return!1===n&&s.push(iR.editable.of(!1)),r&&s.push(_N.readOnly.of(!0)),[...s]};class $B{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(e=>{try{e()}catch(e){console.error("TimeoutLatch callback error:",e)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class TB{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),0===this.latches.size&&this.stop()}start(){null===this.interval&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)}}var CB=null,jB=cN.define(),NB=[];function AB(e){var{value:t,selection:n,onChange:r,onStatistics:o,onCreateEditor:i,onUpdate:a,extensions:s=NB,autoFocus:l,theme:u="light",height:c=null,minHeight:d=null,maxHeight:f=null,width:h=null,minWidth:p=null,maxWidth:m=null,placeholder:g="",editable:v=!0,readOnly:y=!1,indentWithTab:b=!0,basicSetup:O=!0,root:w,initialState:S}=e,[x,k]=(0,$.useState)(),[_,P]=(0,$.useState)(),[E,T]=(0,$.useState)(),C=(0,$.useState)(()=>({current:null}))[0],j=(0,$.useState)(()=>({current:null}))[0],N=iR.theme({"&":{height:c,minHeight:d,maxHeight:f,width:h,minWidth:p,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),A=iR.updateListener.of(e=>{if(e.docChanged&&"function"==typeof r&&!e.transactions.some(e=>e.annotation(jB))){C.current?C.current.reset():(C.current=new $B(()=>{if(j.current){var e=j.current;j.current=null,e()}C.current=null},200),("undefined"==typeof window?new TB:(CB||(CB=new TB),CB)).add(C.current));var t=e.state.doc.toString();r(t,e)}o&&o((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map(t=>e.state.sliceDoc(t.from,t.to)),selectedText:e.state.selection.ranges.some(e=>!e.empty)}))(e))}),I=[A,N,...EB({theme:u,editable:v,readOnly:y,placeholder:g,indentWithTab:b,basicSetup:O})];return a&&"function"==typeof a&&I.push(iR.updateListener.of(a)),I=I.concat(s),(0,$.useLayoutEffect)(()=>{if(x&&!E){var e={doc:t,selection:n,extensions:I},r=S?_N.fromJSON(S.json,e,S.fields):_N.create(e);if(T(r),!_){var o=new iR({state:r,parent:x,root:w});P(o),i&&i(o,r)}}return()=>{_&&(T(void 0),P(void 0))}},[x,E]),(0,$.useEffect)(()=>{e.container&&k(e.container)},[e.container]),(0,$.useEffect)(()=>()=>{_&&(_.destroy(),P(void 0)),C.current&&(C.current.cancel(),C.current=null)},[_]),(0,$.useEffect)(()=>{l&&_&&_.focus()},[l,_]),(0,$.useEffect)(()=>{_&&_.dispatch({effects:hN.reconfigure.of(I)})},[u,s,c,d,f,h,p,m,g,v,y,b,O,r,a]),(0,$.useEffect)(()=>{if(void 0!==t){var e=_?_.state.doc.toString():"";if(_&&t!==e){var n=()=>{_&&t!==_.state.doc.toString()&&_.dispatch({changes:{from:0,to:_.state.doc.toString().length,insert:t||""},annotations:[jB.of(!0)]})};C.current&&!C.current.isDone?j.current=n:n()}}},[t,_]),{state:E,setState:T,view:_,setView:P,container:x,setContainer:k}}var IB=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],MB=(0,$.forwardRef)((e,t)=>{var{className:n,value:r="",selection:o,extensions:i=[],onChange:a,onStatistics:s,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:d="light",height:f,minHeight:h,maxHeight:p,width:m,minWidth:g,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:O,editable:w,readOnly:S,root:x,initialState:k}=e,_=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,IB),P=(0,$.useRef)(null),{state:T,view:C,container:j,setContainer:N}=AB({root:x,value:r,autoFocus:c,theme:d,height:f,minHeight:h,maxHeight:p,width:m,minWidth:g,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:O,editable:w,readOnly:S,selection:o,onChange:a,onStatistics:s,onCreateEditor:l,onUpdate:u,extensions:i,initialState:k});(0,$.useImperativeHandle)(t,()=>({editor:P.current,state:T,view:C}),[P,j,T,C]);var A=(0,$.useCallback)(e=>{P.current=e,N(e)},[N]);if("string"!=typeof r)throw new Error("value must be typeof string but got "+typeof r);var I="string"==typeof d?"cm-theme-"+d:"cm-theme";return(0,E.jsx)("div",HC({ref:A,className:I+(n?" "+n:"")},_))});MB.displayName="CodeMirror";const DB=MB;class RB{constructor(e,t,n,r,o,i,a,s,l,u=0,c){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=o,this.score=i,this.buffer=a,this.bufferBase=s,this.curContext=l,this.lookAhead=u,this.parent=c}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new RB(e,[],t,n,n,0,[],0,r?new QB(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,r=65535&e,{parser:o}=this.p,i=this.reducePos<this.pos-25;i&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),0==n)return this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,i?8:4,!0),void this.reduceContext(r,this.reducePos);let s=this.stack.length-3*(n-1)-(262144&e?6:0),l=s?this.stack[s-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(null===(t=this.p.parser.nodeSet.types[r])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let c=s?this.stack[s-1]:0,d=this.bufferBase+this.buffer.length-c;if(r<o.minRepeatTerm||131072&e){let e=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,e,d+4,!0)}if(262144&e)this.state=this.stack[s];else{let e=this.stack[s-3];this.state=o.getGoto(e,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,l)}storeNode(e,t,n,r=4,o=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(o&&this.pos!=n){let o=this.buffer.length;if(o>0&&0!=this.buffer[o-4]){let e=!1;for(let t=o;t>0&&this.buffer[t-2]>n;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;o>0&&this.buffer[o-2]>n;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=n,this.buffer[o+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n,r){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=r,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,r,4);else{let o=e,{parser:i}=this.p;(r>this.pos||t<=i.maxNode)&&(this.pos=r,i.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,n),this.shiftContext(t,n),t<=i.maxNode&&this.buffer.push(t,n,r,4)}}apply(e,t,n,r){65536&e?this.reduce(e):this.shift(e,t,n,r)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new RB(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new zB(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(!(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,o=0;o<t.length;o+=2)(r=t[o+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[o],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some((e,t)=>1&t&&e==r)||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[e],this.pos),o.reducePos=this.pos,o.score-=200,n.push(o)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,r=65535&t,o=this.stack.length-3*n;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,t=>{if(393216&t);else if(65536&t){let n=(t>>19)-o;if(n>1){let r=65535&t,o=this.stack.length-3*n;if(o>=0&&e.getGoto(this.stack[o],r,!1)>=0)return n<<19|65536|r}}else{let e=n(t,o+1);if(null!=e)return e}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new QB(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class QB{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class zB{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class LB{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new LB(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new LB(this.stack,this.pos,this.index)}}function ZB(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,o=0;r<e.length;){let i=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){i=65535;break}t>=92&&t--,t>=34&&t--;let o=t-32;if(o>=46&&(o-=46,n=!0),i+=o,n)break;i*=46}n?n[o++]=i:n=new t(i)}return n}class FB{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const UB=new FB;class VB{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=UB,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<n.from;){if(!r)return null;let e=this.ranges[--r];o-=n.from-e.to,n=e}for(;t<0?o>n.to:o>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];o+=e.from-n.to,n=e}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=UB,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class GB{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;YB(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}GB.prototype.contextual=GB.prototype.fallback=GB.prototype.extend=!1;class BB{constructor(e,t,n){this.precTable=t,this.elseToken=n,this.data="string"==typeof e?ZB(e):e}token(e,t){let n=e.pos,r=0;for(;;){let n=e.next<0,o=e.resolveOffset(1,1);if(YB(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(n||r++,null==o)break;e.reset(o,e.token)}r&&(e.reset(n,e.token),e.acceptToken(this.elseToken,r))}}BB.prototype.contextual=GB.prototype.fallback=GB.prototype.extend=!1;class XB{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function YB(e,t,n,r,o,i){let a=0,s=1<<r,{dialect:l}=n.p.parser;e:for(;0!=(s&e[a]);){let n=e[a+1];for(let r=a+3;r<n;r+=2)if((e[r+1]&s)>0){let n=e[r];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||qB(n,t.token.value,o,i))){t.acceptToken(n);break}}let r=t.next,u=0,c=e[a+2];if(!(t.next<0&&c>u&&65535==e[n+3*c-3])){for(;u<c;){let o=u+c>>1,i=n+o+(o<<1),s=e[i],l=e[i+1]||65536;if(r<s)c=o;else{if(!(r>=l)){a=e[i+2],t.advance();continue e}u=o+1}}break}a=e[n+3*c-1]}}function WB(e,t,n){for(let r,o=t;65535!=(r=e[o]);o++)if(r==n)return o-t;return-1}function qB(e,t,n,r){let o=WB(n,r,t);return o<0||WB(n,r,e)<o}const HB="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let KB=null;function JB(e,t,n){let r=e.cursor(nz.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}class eX{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?JB(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?JB(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=n.children[r],i=this.start[t]+n.positions[r];if(i>e)return this.nextStart=i,null;if(o instanceof rz){if(i==e){if(i<this.safeFrom)return null;let e=i+o.length;if(e<=this.safeTo){let t=o.prop(WQ.lookAhead);if(!t||e+t<this.fragment.to)return o}}this.index[t]++,i+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(i),this.index.push(0))}else this.index[t]++,this.nextStart=i+o.length}}}class tX{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new FB)}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:o}=r,i=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,s=0;for(let r=0;r<o.length;r++){if(!(1<<r&i))continue;let l=o[r],u=this.tokens[r];if((!n||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=i||u.context!=a)&&(this.updateCachedToken(u,l,e),u.mask=i,u.context=a),u.lookAhead>u.end+25&&(s=Math.max(u.lookAhead,s)),0!=u.value)){let r=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(n=u,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return s&&e.setLookAhead(s),n||e.pos!=this.stream.end||(n=new FB,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new FB,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){let r=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(r,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let o=t.specializers[r](this.stream.read(e.start,e.end),n);if(o>=0&&n.p.parser.dialect.allows(o>>1)){1&o?e.extended=o>>1:e.value=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:o}=e,{parser:i}=e.p,{data:a}=i;for(let e=0;e<2;e++)for(let s=i.stateSlot(o,e?2:1);;s+=3){if(65535==a[s]){if(1!=a[s+1]){0==r&&2==a[s+1]&&(r=this.putAction(sX(a,s+2),t,n,r));break}s=sX(a,s+2)}a[s]==t&&(r=this.putAction(sX(a,s+1),t,n,r))}return r}}class nX{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new VB(t,r),this.tokens=new tX(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[RB.start(this,e.top[0],o)],this.fragments=n.length&&this.stream.end-o>4*e.bufferLength?new eX(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,o=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let i=0;i<n.length;i++){let a=n[i];for(;;){if(this.tokens.mainToken=null,a.pos>r)o.push(a);else{if(this.advanceStack(a,o,n))continue;{e||(e=[],t=[]),e.push(a);let n=this.tokens.getMainToken(a);t.push(n.value,n.end)}}break}}if(!o.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return HB&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw HB&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,o);if(n)return HB&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(o.length>e)for(o.sort((e,t)=>t.score-e.score);o.length>e;)o.pop();o.some(e=>e.reducePos>r)&&this.recovering--}else if(o.length>1){e:for(let e=0;e<o.length-1;e++){let t=o[e];for(let n=e+1;n<o.length;n++){let r=o[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){o.splice(e--,1);continue e}o.splice(n--,1)}}}o.length>12&&o.splice(12,o.length-12)}this.minStackPos=o[0].pos;for(let e=1;e<o.length;e++)o[e].pos<this.minStackPos&&(this.minStackPos=o[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:o}=this,i=HB?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let a=this.fragments.nodeAt(r);a;){let r=this.parser.nodeSet.types[a.type.id]==a.type?o.getGoto(e.state,a.type.id):-1;if(r>-1&&a.length&&(!t||(a.prop(WQ.contextHash)||0)==n))return e.useNode(a,r),HB&&console.log(i+this.stackID(e)+` (via reuse of ${o.getName(a.type.id)})`),!0;if(!(a instanceof rz)||0==a.children.length||a.positions[0]>0)break;let s=a.children[0];if(!(s instanceof rz&&0==a.positions[0]))break;a=s}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),HB&&console.log(i+this.stackID(e)+` (via always-reduce ${o.getName(65535&a)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let s=this.tokens.getActions(e);for(let a=0;a<s.length;){let l=s[a++],u=s[a++],c=s[a++],d=a==s.length||!n,f=d?e:e.split(),h=this.tokens.mainToken;if(f.apply(l,u,h?h.start:f.pos,c),HB&&console.log(i+this.stackID(f)+` (via ${65536&l?`reduce of ${o.getName(65535&l)}`:"shift"} for ${o.getName(u)} @ ${r}${f==e?"":", split"})`),d)return!0;f.pos>r?t.push(f):n.push(f)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return rX(e,t),!0}}runRecovery(e,t,n){let r=null,o=!1;for(let i=0;i<e.length;i++){let a=e[i],s=t[i<<1],l=t[1+(i<<1)],u=HB?this.stackID(a)+" -> ":"";if(a.deadEnd){if(o)continue;if(o=!0,a.restart(),HB&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,n))continue}let c=a.split(),d=u;for(let e=0;c.forceReduce()&&e<10;e++){if(HB&&console.log(d+this.stackID(c)+" (via force-reduce)"),this.advanceFully(c,n))break;HB&&(d=this.stackID(c)+" -> ")}for(let e of a.recoverByInsert(s))HB&&console.log(u+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>a.pos?(l==a.pos&&(l++,s=0),a.recoverByDelete(s,l),HB&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(s)})`),rX(a,n)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),rz.build({buffer:LB.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(KB||(KB=new WeakMap)).get(e);return t||KB.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function rX(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class oX{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const iX=e=>e;class aX extends xz{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map(t=>e.topRules[t][1]),r=[];for(let e=0;e<t.length;e++)r.push([]);function o(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=WQ[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)o(r,e,t[n++]);else{let i=t[n+-r];for(let a=-r;a>0;a--)o(t[n++],e,i);n++}}}this.nodeSet=new JQ(t.map((t,o)=>KQ.define({name:o>=this.minRepeatTerm?void 0:t,id:o,props:r[o],top:n.indexOf(o)>-1,error:0==o,skipped:e.skippedNodes&&e.skippedNodes.indexOf(o)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=BQ;let i=ZB(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(lX),this.states=ZB(e.states,Uint32Array),this.data=ZB(e.stateData),this.goto=ZB(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new GB(i,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new nX(this,e,t,n);for(let o of this.wrappers)r=o(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let t=r[o++],i=1&t,a=r[o++];if(i&&n)return a;for(let n=o+(t>>1);o<n;o++)if(r[o]==e)return a;if(i)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let o,i=this.stateSlot(e,r?2:1);;i+=3){if(65535==(o=n[i])){if(1!=n[i+1]){if(2==n[i+1])return sX(n,i+2);break}o=n[i=sX(n,i+2)]}if(o==t||0==o)return sX(n,i+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,e=>e==t||null)}allActions(e,t){let n=this.stateSlot(e,4),r=n?t(n):void 0;for(let n=this.stateSlot(e,1);null==r;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=sX(this.data,n+2)}r=t(sX(this.data,n+1))}return r}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=sX(this.data,n+2)}if(!(1&this.data[n+2])){let e=this.data[n+1];t.some((t,n)=>1&n&&t==e)||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(aX.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(t=>{let n=e.tokenizers.find(e=>e.from==t);return n?n.to:t})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,r)=>{let o=e.specializers.find(e=>e.from==n.external);if(!o)return n;let i=Object.assign(Object.assign({},n),{external:o.to});return t.specializers[r]=lX(i),i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,o=this.dialects[t[e]];65535!=(n=this.data[o++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new oX(e,n,r)}static deserialize(e){return new aX(e)}}function sX(e,t){return e[t]|e[t+1]<<16}function lX(e){if(e.external){let t=e.extend?1:0;return(n,r)=>e.external(n,r)<<1|t}return e.get}const uX=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],cX=new class{constructor(e){this.start=e.start,this.shift=e.shift||iX,this.reduce=e.reduce||iX,this.reuse=e.reuse||iX,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:!1,shift:(e,t)=>5==t||6==t||320==t?e:321==t,strict:!1}),dX=new XB((e,t)=>{let{next:n}=e;(125==n||-1==n||t.context)&&e.acceptToken(318)},{contextual:!0,fallback:!0}),fX=new XB((e,t)=>{let n,{next:r}=e;uX.indexOf(r)>-1||(47!=r||47!=(n=e.peek(1))&&42!=n)&&(125==r||59==r||-1==r||t.context||e.acceptToken(316))},{contextual:!0}),hX=new XB((e,t)=>{91!=e.next||t.context||e.acceptToken(317)},{contextual:!0}),pX=new XB((e,t)=>{let{next:n}=e;if(43==n||45==n){if(e.advance(),n==e.next){e.advance();let n=!t.context&&t.canShift(1);e.acceptToken(n?1:2)}}else 63==n&&46==e.peek(1)&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(3))},{contextual:!0});function mX(e,t){return e>=65&&e<=90||e>=97&&e<=122||95==e||e>=192||!t&&e>=48&&e<=57}const gX=new XB((e,t)=>{if(60!=e.next||!t.dialectEnabled(0))return;if(e.advance(),47==e.next)return;let n=0;for(;uX.indexOf(e.next)>-1;)e.advance(),n++;if(mX(e.next,!0)){for(e.advance(),n++;mX(e.next,!1);)e.advance(),n++;for(;uX.indexOf(e.next)>-1;)e.advance(),n++;if(44==e.next)return;for(let t=0;;t++){if(7==t){if(!mX(e.next,!0))return;break}if(e.next!="extends".charCodeAt(t))break;e.advance(),n++}}e.acceptToken(4,-n)}),vX=Tz({"get set async static":qz.modifier,"for while do if else switch try catch finally return throw break continue default case defer":qz.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":qz.operatorKeyword,"let var const using function class extends":qz.definitionKeyword,"import export from":qz.moduleKeyword,"with debugger new":qz.keyword,TemplateString:qz.special(qz.string),super:qz.atom,BooleanLiteral:qz.bool,this:qz.self,null:qz.null,Star:qz.modifier,VariableName:qz.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":qz.function(qz.variableName),VariableDefinition:qz.definition(qz.variableName),Label:qz.labelName,PropertyName:qz.propertyName,PrivatePropertyName:qz.special(qz.propertyName),"CallExpression/MemberExpression/PropertyName":qz.function(qz.propertyName),"FunctionDeclaration/VariableDefinition":qz.function(qz.definition(qz.variableName)),"ClassDeclaration/VariableDefinition":qz.definition(qz.className),"NewExpression/VariableName":qz.className,PropertyDefinition:qz.definition(qz.propertyName),PrivatePropertyDefinition:qz.definition(qz.special(qz.propertyName)),UpdateOp:qz.updateOperator,"LineComment Hashbang":qz.lineComment,BlockComment:qz.blockComment,Number:qz.number,String:qz.string,Escape:qz.escape,ArithOp:qz.arithmeticOperator,LogicOp:qz.logicOperator,BitOp:qz.bitwiseOperator,CompareOp:qz.compareOperator,RegExp:qz.regexp,Equals:qz.definitionOperator,Arrow:qz.function(qz.punctuation),": Spread":qz.punctuation,"( )":qz.paren,"[ ]":qz.squareBracket,"{ }":qz.brace,"InterpolationStart InterpolationEnd":qz.special(qz.brace),".":qz.derefOperator,", ;":qz.separator,"@":qz.meta,TypeName:qz.typeName,TypeDefinition:qz.definition(qz.typeName),"type enum interface implements namespace module declare":qz.definitionKeyword,"abstract global Privacy readonly override":qz.modifier,"is keyof unique infer asserts":qz.operatorKeyword,JSXAttributeValue:qz.attributeValue,JSXText:qz.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":qz.angleBracket,"JSXIdentifier JSXNameSpacedName":qz.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":qz.attributeName,"JSXBuiltin/JSXIdentifier":qz.standard(qz.tagName)}),yX={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},bX={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},OX={__proto__:null,"<":193},wX=aX.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:cX,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[vX],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[fX,hX,pX,gX,2,3,4,5,6,7,8,9,10,11,12,13,14,dX,new BB("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new BB("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:e=>yX[e]||-1},{term:343,get:e=>bX[e]||-1},{term:95,get:e=>OX[e]||-1}],tokenPrec:15201}),SX=[pG("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),pG("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),pG("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),pG("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),pG("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),pG("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),pG("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),pG("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),pG("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),pG('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),pG('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],xX=SX.concat([pG("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),pG("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),pG("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),kX=new wz,_X=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function PX(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");return r&&n(r,e),!0}}const EX=["FunctionDeclaration"],$X={FunctionDeclaration:PX("function"),ClassDeclaration:PX("class"),ClassExpression:()=>!0,EnumDeclaration:PX("constant"),TypeAliasDeclaration:PX("type"),NamespaceDeclaration:PX("namespace"),VariableDefinition(e,t){e.matchContext(EX)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function TX(e,t){let n=kX.get(t);if(n)return n;let r=[],o=!0;function i(t,n){let o=e.sliceString(t.from,t.to);r.push({label:o,type:n})}return t.cursor(nz.IncludeAnonymous).iterate(t=>{if(o)o=!1;else if(t.name){let e=$X[t.name];if(e&&e(t,i)||_X.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of TX(e,t.node))r.push(n);return!1}}),kX.set(t,r),r}const CX=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,jX=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function NX(e){let t=oL(e.state).resolveInner(e.pos,-1);if(jX.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&CX.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let n=t;n;n=n.parent)_X.has(n.name)&&(r=r.concat(TX(e.state.doc,n)));return{options:r,from:n?t.from:e.pos,validFor:CX}}const AX=rL.define({name:"javascript",parser:wX.configure({props:[wL.add({IfStatement:TL({except:/^\s*({|else\b)/}),TryStatement:TL({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:EL({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":TL({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),jL.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null},BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),IX={test:e=>/^JSX/.test(e.name),facet:Jz({commentTokens:{block:{open:"{/*",close:"*/}"}}})},MX=AX.configure({dialect:"ts"},"typescript"),DX=AX.configure({dialect:"jsx",props:[eL.add(e=>e.isTop?[IX]:void 0)]}),RX=AX.configure({dialect:"jsx ts",props:[eL.add(e=>e.isTop?[IX]:void 0)]},"typescript");let QX=e=>({label:e,type:"keyword"});const zX="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(QX),LX=zX.concat(["declare","implements","private","protected","public"].map(QX));function ZX(e={}){let t=e.jsx?e.typescript?RX:DX:e.typescript?MX:AX,n=e.typescript?xX.concat(LX):SX.concat(zX);return new pL(t,[AX.data.of({autocomplete:hV(jX,fV(n))}),AX.data.of({autocomplete:NX}),e.jsx?VX:[]])}function FX(e,t,n=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,n));return""}const UX="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),VX=iR.inputHandler.of((e,t,n,r,o)=>{if((UX?e.composing:e.compositionStarted)||e.state.readOnly||t!=n||">"!=r&&"/"!=r||!AX.isActiveAt(e.state,t,-1))return!1;let i=o(),{state:a}=i,s=a.changeByRange(e=>{var t;let n,{head:o}=e,i=oL(a).resolveInner(o-1,-1);if("JSXStartTag"==i.name&&(i=i.parent),a.doc.sliceString(o-1,o)!=r||"JSXAttributeValue"==i.name&&i.to>o);else{if(">"==r&&"JSXFragmentTag"==i.name)return{range:e,changes:{from:o,insert:"</>"}};if("/"==r&&"JSXStartCloseTag"==i.name){let e=i.parent,r=e.parent;if(r&&e.from==o-2&&((n=FX(a.doc,r.firstChild,o))||"JSXFragmentTag"==(null===(t=r.firstChild)||void 0===t?void 0:t.name))){let e=`${n}>`;return{range:Ij.cursor(o+e.length,-1),changes:{from:o,insert:e}}}}else if(">"==r){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(i);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(a.doc.sliceString(o,o+2))&&(n=FX(a.doc,t,o)))return{range:e,changes:{from:o,insert:`</${n}>`}}}}return{range:e}});return!s.changes.empty&&(e.dispatch([i,a.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});var GX=function(e,t){var n=Cc(Jf,Pc),r=th();return(0,$.useMemo)(function(){var o=new Set,i=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(a>20||o.has("".concat(e,"-").concat(t)))){o.add("".concat(e,"-").concat(t));var s=r.find(function(n){return n.target===e&&n.targetHandle==t});if(s){var l=n.find(function(e){return e.id===s.source});if(null!=l&&l.type){var u=RE(l,s.sourceHandle||null,"output",n,r);if(u){if(u.schema)return u.schema;var c=$E.nodeDefinitionMap.get(l.type),d=(null==c?void 0:c.handles.inputs.some(function(e){return"main"===e.id}))&&(null==c?void 0:c.handles.outputs.some(function(e){return"main"===e.id}));return u.type===mE.ANY&&d?i(l.id,"main",a+1):void 0}}}}};return i(e,t)},[e,t,n,r])};function BX(e,t,n){var r=structuredClone(e);if(0===t.length)return n(r);for(var o=r,i=0;i<t.length-1;i++){var a=t[i];void 0===o[a]&&(o[a]="number"==typeof t[i+1]?[]:{}),o=o[a]}var s=t[t.length-1];return o[s]=n(o[s]),r}function XX(e){return XX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XX(e)}function YX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function WX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YX(Object(n),!0).forEach(function(t){qX(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qX(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=XX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=XX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XX(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HX(e){return function(e){if(Array.isArray(e))return KX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return KX(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KX(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var JX=function(e){var t,n,r=e.definition,o=e.path,i=e.onUpdate,a=e.onRemove,s=e.onAddChild,l=r.name,u=r.required,c=r.type,d=r.description,f=r.values,h=r.fields,p=r.items,m=null!==(t=null===(n=hY.meta)||void 0===n?void 0:n.schemas)&&void 0!==t?t:{},g=Object.keys(m).includes(c);return(0,E.jsxs)("div",{style:{marginLeft:o.length>2?"15px":"0",marginTop:"5px",paddingTop:"5px",borderLeft:o.length>2?"1px solid #444":"none",paddingLeft:o.length>2?"5px":"0"},children:[(0,E.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[void 0!==l&&(0,E.jsx)(j,{className:"nodrag",value:l,onChange:function(e){return i(o,{name:e.target.value})},placeholder:"Field Name"}),(0,E.jsxs)(N,{className:"nodrag",value:c,onChange:function(e){var t=e.target.value,n={type:t};"object"!==t||h||(n.fields=[]),"array"!==t||p||(n.items={type:"string"}),"enum"!==t||f||(n.values=["option1","option2"]),i(o,n)},children:[(0,E.jsxs)("optgroup",{label:"Primitives",children:[(0,E.jsx)("option",{value:"string",children:"string"}),(0,E.jsx)("option",{value:"number",children:"number"}),(0,E.jsx)("option",{value:"boolean",children:"boolean"}),(0,E.jsx)("option",{value:"object",children:"object (structured)"}),(0,E.jsx)("option",{value:"anyObject",children:"object (any)"}),(0,E.jsx)("option",{value:"array",children:"array"}),(0,E.jsx)("option",{value:"enum",children:"enum"})]}),(0,E.jsx)("optgroup",{label:"Predefined",children:Object.keys(m).map(function(e){return(0,E.jsx)("option",{value:e,children:e},e)})})]}),void 0!==l&&(0,E.jsxs)("label",{style:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},children:[(0,E.jsx)("input",{type:"checkbox",checked:null!=u&&u,onChange:function(e){return i(o,{required:e.target.checked})},className:"nodrag",style:{marginRight:"3px"}}),"Req"]}),a&&(0,E.jsx)(C,{onClick:function(){return a(o)},children:""})]}),!g&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(A,{className:"nodrag nowheel",value:d||"",onChange:function(e){return i(o,{description:e.target.value})},placeholder:"Description...",rows:2,style:{marginTop:"5px"}}),"enum"===c&&(0,E.jsxs)("div",{style:{marginLeft:"10px",marginTop:"5px"},children:[(f||[]).map(function(e,t){return(0,E.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"2px"},children:[(0,E.jsx)(j,{className:"nodrag",value:e,onChange:function(e){return function(e,t){var n=HX(f||[]);n[e]=t,i(o,{values:n})}(t,e.target.value)}}),(0,E.jsx)(C,{onClick:function(){return function(e){return i(o,{values:null==f?void 0:f.filter(function(t,n){return n!==e})})}(t)},children:""})]},t)}),(0,E.jsx)(C,{onClick:function(){return i(o,{values:[].concat(HX(f||[]),["newValue"])})},style:{marginTop:"5px"},children:"+ Value"})]}),"object"===c&&(0,E.jsxs)("div",{style:{marginLeft:"10px",marginTop:"5px"},children:[(h||[]).map(function(e,t){return(0,E.jsx)(JX,{definition:e,path:[].concat(HX(o),["fields",t]),onUpdate:i,onRemove:a,onAddChild:s},e.id)}),s&&(0,E.jsx)(C,{onClick:function(){return s(o)},style:{marginTop:"5px"},children:"+ Field"})]}),"array"===c&&p&&(0,E.jsxs)("div",{style:{marginLeft:"10px",marginTop:"5px"},children:[(0,E.jsx)("span",{children:"Items:"}),(0,E.jsx)(JX,{definition:p,path:[].concat(HX(o),["items"]),onUpdate:i,onAddChild:s,onRemove:a})]})]})]})};function eY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return tY(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(tY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,tY(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,tY(d,"constructor",u),tY(u,"constructor",l),l.displayName="GeneratorFunction",tY(u,o,"GeneratorFunction"),tY(d),tY(d,o,"Generator"),tY(d,r,function(){return this}),tY(d,"toString",function(){return"[object Generator]"}),(eY=function(){return{w:i,m:f}})()}function tY(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}tY=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){tY(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},tY(e,t,n,r)}function nY(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function rY(e){return function(e){if(Array.isArray(e))return iY(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oY(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oY(e,t){if(e){if("string"==typeof e)return iY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iY(e,t):void 0}}function iY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var aY={ChatMessage:yT,WIEntry:gT},sY=q_([].concat(["string","number","boolean","object","anyObject","array","enum"],rY(Object.keys(aY)))),lY=CP(function(){return j_({type:sY,description:tk().optional(),required:i_().optional().default(!0),fields:$_(uY).optional(),items:lY.optional(),values:$_(tk()).optional()})}),uY=CP(function(){return j_({id:tk(),name:tk(),type:sY,description:tk().optional(),required:i_().optional().default(!0),fields:$_(CP(function(){return uY})).optional(),items:CP(function(){return lY}).optional(),values:$_(tk()).optional()})}),cY=j_({mode:q_(["custom","predefined"]).default("custom"),selectedSchema:tk().optional(),fields:$_(uY).default([]),_version:Hk().optional()}),dY=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){nY(i,r,o,a,s,"next",e)}function s(e){nY(i,r,o,a,s,"throw",e)}a(void 0)})}}(eY().m(function e(t){var n,r,o,i;return eY().w(function(e){for(;;)switch(e.n){case 0:if("predefined"!==(n=cY.parse(t.data)).mode){e.n=2;break}if(r=aY[n.selectedSchema]){e.n=1;break}throw new Error('Predefined schema "'.concat(n.selectedSchema,'" not found.'));case 1:return e.a(2,{result:r});case 2:return o={type:"object",fields:n.fields},i=yY(o),e.a(2,{result:i})}},e)}));return function(t){return e.apply(this,arguments)}}(),fY=function(e){var t,n=[],r=new Set,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oY(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.name&&""!==i.name.trim()||n.push({message:"Field names cannot be empty.",severity:"error"}),r.has(i.name)&&n.push({message:'Duplicate field name found: "'.concat(i.name,'".'),severity:"error"}),r.add(i.name),"object"===i.type&&i.fields&&n.push.apply(n,rY(fY(i.fields))),"enum"!==i.type||i.values&&0!==i.values.length||n.push({message:'Enum "'.concat(i.name,'" must have at least one value.'),severity:"error"})}}catch(e){o.e(e)}finally{o.f()}return n},hY={type:"schemaNode",label:"Schema",category:"JSON",component:function(e){var t,n,r=e.id,o=e.selected,i=e.type,a=O4(function(e){var t;return null===(t=e.nodesMap.get(r))||void 0===t?void 0:t.data}),s=O4(function(e){return e.updateNodeData}),l=$E.nodeDefinitionMap.get(i),u=null!==(t=null===(n=hY.meta)||void 0===n?void 0:n.schemas)&&void 0!==t?t:{};if(!a||!l)return null;var c=function(e,t){var n=BX({fields:a.fields},["fields"].concat(HX(e)),function(e){return WX(WX({},e),t)});s(r,{fields:n.fields})},d=function(e){var t=e.slice(0,-1),n=e[e.length-1],o=BX({fields:a.fields},["fields"].concat(HX(t)),function(e){return e.filter(function(e,t){return t!==n})});s(r,{fields:o.fields})},f=function(e){var t={id:WT(),name:"newField",type:"string",required:!0},n=BX({fields:a.fields},["fields"].concat(HX(e),["fields"]),function(e){return[].concat(HX(e||[]),[t])});s(r,{fields:n.fields})};return(0,E.jsxs)(JE,{id:r,title:"Schema",selected:o,children:[(0,E.jsxs)(N,{className:"nodrag",value:"custom"===a.mode?"custom":a.selectedSchema,onChange:function(e){var t=e.target.value;s(r,"custom"===t?{mode:"custom"}:{mode:"predefined",selectedSchema:t})},children:[(0,E.jsx)("optgroup",{label:"Custom",children:(0,E.jsx)("option",{value:"custom",children:"Custom Schema"})}),(0,E.jsx)("optgroup",{label:"Predefined",children:Object.keys(u).map(function(e){return(0,E.jsx)("option",{value:e,children:e},e)})})]}),"custom"===a.mode&&(0,E.jsxs)(E.Fragment,{children:[(a.fields||[]).map(function(e,t){return(0,E.jsx)(JX,{definition:e,path:[t],onUpdate:c,onRemove:d,onAddChild:f},e.id)}),(0,E.jsx)(C,{className:"nodrag",onClick:function(){var e={id:WT(),name:"newField",type:"string",required:!0};s(r,{fields:[].concat(HX(a.fields||[]),[e])})},style:{marginTop:"10px"},children:"Add Field"})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:r,definition:l,type:"output"})})]})},dataSchema:cY,currentVersion:3,initialData:{fields:[],mode:"custom"},handles:{inputs:[],outputs:[{id:"result",type:mE.SCHEMA}]},validate:function(e){return"custom"===e.data.mode?fY(e.data.fields):[]},execute:dY,meta:{schemas:aY}};function pY(e){return pY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pY(e)}function mY(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gY(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function gY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vY(e,t,n){if(!t)return e;if("function"!=typeof t.safeParse)throw new Error("Invalid schema provided to ".concat(n," node."));var r=t.safeParse(e);if(!r.success)throw new Error("".concat(n," output failed schema validation: ").concat(r.error.message));return r.data}function yY(e){var t,n,r,o=null!==(t=null===(n=hY.meta)||void 0===n?void 0:n.schemas)&&void 0!==t?t:{};if(o[e.type])r=o[e.type];else switch(e.type){case"string":r=tk();break;case"number":r=Hk();break;case"boolean":r=i_();break;case"enum":r=e.values&&0!==e.values.length?q_(e.values):tk();break;case"object":r=bY(e.fields||[]);break;case"anyObject":r=U_(tk(),y_());break;case"array":r=e.items?$_(yY(e.items)):$_(y_());break;default:r=y_()}return!1===e.required&&(r=r.optional()),e.description?r.describe(e.description):r}function bY(e){var t,n={},r=mY(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=yY(o);!1===o.required&&(i=i.optional()),n[o.name]=i}}catch(e){r.e(e)}finally{r.f()}return j_(n)}function OY(e){if(null==e)return y_();switch(pY(e)){case"string":return tk();case"number":return Hk();case"boolean":return i_();case"object":if(Array.isArray(e))return $_(e.length>0?OY(e[0]):y_());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=OY(e[n]));return j_(t);default:return y_()}}function wY(e,t,n,r){var o=n.find(function(t){return t.target===e.id&&t.targetHandle===r});if(o){var i=t.find(function(e){return e.id===o.source});if(i){if("schemaNode"===i.type){var a,s,l,u=hY.dataSchema.parse(i.data);if("predefined"===u.mode)return(null!==(s=null===(l=hY.meta)||void 0===l?void 0:l.schemas)&&void 0!==s?s:{})[u.selectedSchema];var c=null===(a=i.data)||void 0===a?void 0:a.fields;if(!Array.isArray(c))return;return bY(c)}if("variableSchemaNode"===i.type){var d,f=null===(d=i.data)||void 0===d?void 0:d.definition;return f?yY(f):void 0}}}}function SY(e){return function(e){if(Array.isArray(e))return xY(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xY(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function kY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return _Y(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(_Y(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,_Y(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,_Y(d,"constructor",u),_Y(u,"constructor",l),l.displayName="GeneratorFunction",_Y(u,o,"GeneratorFunction"),_Y(d),_Y(d,o,"Generator"),_Y(d,r,function(){return this}),_Y(d,"toString",function(){return"[object Generator]"}),(kY=function(){return{w:i,m:f}})()}function _Y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_Y=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){_Y(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},_Y(e,t,n,r)}function PY(e){return PY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PY(e)}function EY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EY(Object(n),!0).forEach(function(t){TY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function TY(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=PY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PY(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CY(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(hY);var jY=j_({code:tk().default("return input;"),_version:Hk().optional()}),NY=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){CY(i,r,o,a,s,"next",e)}function s(e){CY(i,r,o,a,s,"throw",e)}a(void 0)})}}(kY().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h;return kY().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=r.dependencies,i=r.executionVariables,a=jY.parse(t.data),s=$Y({},Object.fromEntries(i)),l=n.schema,u=n.scriptInput,e.p=1,d=new Function("input","variables","stContext",a.code),e.n=2,d(u,s,o.getSillyTavernContext());case 2:c=e.v,e.n=4;break;case 3:throw e.p=3,h=e.v,new Error("Error executing JS code: ".concat(h.message));case 4:if("object"!==PY(f=vY(c,l,"Execute JS Code"))||null===f){e.n=5;break}return e.a(2,$Y($Y({},f),{},{result:f}));case 5:return e.a(2,{result:f})}},e,null,[[1,3]])}));return function(t,n,r){return e.apply(this,arguments)}}(),AY={type:"executeJsNode",label:"Execute JS Code",category:"System",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r);th();var s=GX(t,"scriptInput"),l=s instanceof C_;if(!o||!a)return null;var u;return(0,E.jsx)(JE,{id:t,title:"Execute JS Code",selected:n,children:(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input"}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Code (`input`, `variables`, and `stContext` are available)"}),s&&(0,E.jsx)("div",{style:{fontSize:"10px",color:"#aaa",margin:"5px 0"},children:l?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("b",{children:"Available properties in `input`:"}),(0,E.jsx)("pre",{style:{margin:"2px 0 0 0",background:"#2a2a2a",padding:"4px",borderRadius:"3px",whiteSpace:"pre-wrap"},children:n$(s)})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("b",{children:"`input` variable will be a:"}),(0,E.jsx)("pre",{style:{margin:"2px 0 0 0",background:"#2a2a2a",padding:"4px",borderRadius:"3px"},children:(u=s,u.def.type)})]})}),(0,E.jsx)(DB,{className:"nodrag nowheel",value:o.code||"",height:"150px",extensions:[ZX({})],width:"100%",onChange:function(e){i(t,{code:e})},theme:"dark",style:{cursor:"text"}})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]})})},dataSchema:jY,currentVersion:1,initialData:{code:'return {\n  "message": "Hello " + input.name\n};'},handles:{inputs:[{id:"main",type:mE.ANY},{id:"scriptInput",type:mE.ANY},{id:"schema",type:mE.SCHEMA}],outputs:[{id:"main",type:mE.ANY}]},execute:NY,isDangerous:!0,getDynamicHandles:function(e,t,n){var r=wY(e,t,n,"schema");if(!r)return{inputs:[],outputs:[{id:"result",type:mE.ANY}]};var o={id:"result",type:ME(r),schema:r},i=QE(r);return{inputs:[],outputs:[o].concat(SY(i))}}};function IY(e){return IY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IY(e)}function MY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return DY(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(DY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,DY(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,DY(d,"constructor",u),DY(u,"constructor",l),l.displayName="GeneratorFunction",DY(u,o,"GeneratorFunction"),DY(d),DY(d,o,"Generator"),DY(d,r,function(){return this}),DY(d,"toString",function(){return"[object Generator]"}),(MY=function(){return{w:i,m:f}})()}function DY(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}DY=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){DY(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},DY(e,t,n,r)}function RY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function QY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RY(Object(n),!0).forEach(function(t){zY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zY(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=IY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=IY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==IY(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LY(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(AY);var ZY=j_({_version:Hk().optional()}),FY=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){LY(i,r,o,a,s,"next",e)}function s(e){LY(i,r,o,a,s,"throw",e)}a(void 0)})}}(MY().m(function e(t,n){return MY().w(function(e){for(;;)if(0===e.n)return e.a(2,QY({},n))},e)}));return function(t,n){return e.apply(this,arguments)}}(),UY={type:"forEachTriggerNode",label:"For Each Trigger",category:"Trigger",component:$$,dataSchema:ZY,currentVersion:1,initialData:{},handles:{inputs:[{id:"schema",type:mE.SCHEMA}],outputs:[{id:"main",type:mE.ANY},{id:"item",type:mE.ANY,label:"Item"},{id:"index",type:mE.NUMBER,label:"Index"}]},execute:FY,getDynamicHandles:function(e,t,n){var r=wY(e,t,n,"schema"),o=r?ME(r):mE.ANY,i=null!=r?r:void 0;return{inputs:[],outputs:[{id:"main",type:mE.ANY},{id:"item",type:o,schema:i,label:"Item"},{id:"index",type:mE.NUMBER,label:"Index"}]}},meta:{description:"Connect a Schema to provide a strong type for the `item` output."}};function VY(e){return VY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VY(e)}function GY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return BY(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(BY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,BY(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,BY(d,"constructor",u),BY(u,"constructor",l),l.displayName="GeneratorFunction",BY(u,o,"GeneratorFunction"),BY(d),BY(d,o,"Generator"),BY(d,r,function(){return this}),BY(d,"toString",function(){return"[object Generator]"}),(GY=function(){return{w:i,m:f}})()}function BY(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}BY=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){BY(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},BY(e,t,n,r)}function XY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function YY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XY(Object(n),!0).forEach(function(t){WY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WY(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=VY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VY(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qY(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(UY);var HY=j_({characterAvatar:tk().default(""),_version:Hk().optional()}),KY=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){qY(i,r,o,a,s,"next",e)}function s(e){qY(i,r,o,a,s,"throw",e)}a(void 0)})}}(GY().m(function e(t,n,r){var o,i,a,s,l,u;return GY().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,a=HY.parse(t.data),s=jE(n,a,"characterAvatar")){e.n=1;break}throw new Error("No character avatar provided.");case 1:if(l=i.getSillyTavernContext(),u=l.characters.find(function(e){return e.avatar===s}),u){e.n=2;break}throw new Error("Character with avatar ".concat(s," not found."));case 2:return u=structuredClone(u),null===(o=u.data)||void 0===o||delete o.json_data,delete u.json_data,e.a(2,YY(YY({},u),{},{result:u}))}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),JY=j_({name:tk().describe("The character's name."),avatar:tk().describe("The character's avatar filename."),description:tk().describe("The character's description."),first_mes:tk().describe("The character's first message."),scenario:tk().describe("The scenario."),personality:tk().describe("The character's personality."),mes_example:tk().describe("Example messages."),tags:$_(tk()).describe("A list of tags.")}),eW={type:"getCharacterNode",label:"Get Character",category:"Character",component:h$,dataSchema:HY,currentVersion:1,initialData:{characterAvatar:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"characterAvatar",type:mE.CHARACTER_AVATAR}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.OBJECT,schema:JY},{id:"name",type:mE.STRING},{id:"description",type:mE.STRING},{id:"first_mes",type:mE.STRING},{id:"scenario",type:mE.STRING},{id:"personality",type:mE.STRING},{id:"mes_example",type:mE.STRING},{id:"tags",type:mE.ARRAY,schema:$_(tk())}]},validate:j$(T$("characterAvatar","Character is required.")),execute:KY,meta:{fields:function(){var e=SillyTavern.getContext().characters.map(function(e){return{value:e.avatar,label:e.name}});return[{id:"characterAvatar",label:"Character",component:Kn,props:{items:e,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}]}}};function tW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return nW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(nW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,nW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,nW(d,"constructor",u),nW(u,"constructor",l),l.displayName="GeneratorFunction",nW(u,o,"GeneratorFunction"),nW(d),nW(d,o,"Generator"),nW(d,r,function(){return this}),nW(d,"toString",function(){return"[object Generator]"}),(tW=function(){return{w:i,m:f}})()}function nW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}nW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){nW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},nW(e,t,n,r)}function rW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(eW);var oW=j_({_version:Hk().optional()}),iW=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){rW(i,r,o,a,s,"next",e)}function s(e){rW(i,r,o,a,s,"throw",e)}a(void 0)})}}(tW().m(function e(t,n,r){var o,i;return tW().w(function(e){for(;;)if(0===e.n)return o=r.dependencies,i=o.getChatInputValue(),e.a(2,{value:i})},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),aW={type:"getChatInputNode",label:"Get Chat Input",category:"Chat",component:$$,dataSchema:oW,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.STRING}]},execute:iW,meta:{description:"Outputs current input text."}};function sW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return lW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(lW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,lW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,lW(d,"constructor",u),lW(u,"constructor",l),l.displayName="GeneratorFunction",lW(u,o,"GeneratorFunction"),lW(d),lW(d,o,"Generator"),lW(d,r,function(){return this}),lW(d,"toString",function(){return"[object Generator]"}),(sW=function(){return{w:i,m:f}})()}function lW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){lW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},lW(e,t,n,r)}function uW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(aW);var cW=j_({messageId:tk().default("last"),_version:Hk().optional()}),dW=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){uW(i,r,o,a,s,"next",e)}function s(e){uW(i,r,o,a,s,"throw",e)}a(void 0)})}}(sW().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f;return sW().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,a=cW.parse(t.data),s=String(null!==(o=jE(n,a,"messageId"))&&void 0!==o?o:"").trim().toLowerCase()){e.n=1;break}throw new Error("Message ID is required.");case 1:if(l=i.getSillyTavernContext(),u=l.chat,"last"!==s){e.n=2;break}c=u.length-1,e.n=5;break;case 2:if("first"!==s){e.n=3;break}c=0,e.n=5;break;case 3:if(d=parseInt(s,10),!isNaN(d)){e.n=4;break}throw new Error('Message ID/Index "'.concat(s,"\" must be 'last', 'first', or a valid integer."));case 4:c=d;case 5:if(!(c<0||c>=u.length)){e.n=6;break}throw new Error('Message with ID/Index "'.concat(s,'" not found or invalid.'));case 6:return f=structuredClone(u[c]),e.a(2,{id:c,result:f,name:f.name,mes:f.mes,is_user:!!f.is_user,is_system:!!f.is_system})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),fW={type:"getChatMessageNode",label:"Get Chat Message",category:"Chat",component:h$,dataSchema:cW,currentVersion:1,initialData:{messageId:"last"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"messageId",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"id",type:mE.NUMBER},{id:"result",type:mE.OBJECT,schema:yT},{id:"name",type:mE.STRING},{id:"mes",type:mE.STRING},{id:"is_user",type:mE.BOOLEAN},{id:"is_system",type:mE.BOOLEAN}]},validate:j$(T$("messageId","Message ID is required.")),execute:dW,meta:{fields:[{id:"messageId",label:"Message ID (e.g., last, first, 123)",component:j,props:{placeholder:"last",type:"text"}}]}};function hW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return pW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(pW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,pW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,pW(d,"constructor",u),pW(u,"constructor",l),l.displayName="GeneratorFunction",pW(u,o,"GeneratorFunction"),pW(d),pW(d,o,"Generator"),pW(d,r,function(){return this}),pW(d,"toString",function(){return"[object Generator]"}),(hW=function(){return{w:i,m:f}})()}function pW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}pW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){pW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},pW(e,t,n,r)}function mW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(fW);var gW=j_({startId:tk().default("first"),endId:tk().default("last"),_version:Hk().optional()}),vW=function(e,t){var n=e.trim().toLowerCase();if("first"===n)return 0;if("last"===n)return t-1;var r=parseInt(n,10);if(isNaN(r))throw new Error('Invalid message index "'.concat(e,"\". Must be 'first', 'last', or a number."));return r},yW=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){mW(i,r,o,a,s,"next",e)}function s(e){mW(i,r,o,a,s,"throw",e)}a(void 0)})}}(hW().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h;return hW().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=gW.parse(t.data),a=String(jE(n,i,"startId")),s=String(jE(n,i,"endId")),l=o.getSillyTavernContext(),u=l.chat,0!==(c=u.length)){e.n=1;break}return e.a(2,{messages:[],count:0});case 1:if(d=vW(a,c),f=vW(s,c),!(d<0||d>=c||f<0||f>=c||d>f)){e.n=2;break}throw new Error("Invalid message range: from ".concat(d," to ").concat(f,". Valid range is 0 to ").concat(c-1,"."));case 2:return h=structuredClone(u.slice(d,f+1)),e.a(2,{messages:h,count:h.length})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),bW={type:"getChatMessagesNode",label:"Get Chat Messages",category:"Chat",component:h$,dataSchema:gW,currentVersion:1,initialData:{startId:"first",endId:"last"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"startId",type:mE.ANY},{id:"endId",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"messages",type:mE.ARRAY,schema:$_(yT)},{id:"count",type:mE.NUMBER}]},execute:yW,meta:{fields:[{id:"startId",label:"Start ID (e.g., first, 0, 123)",component:j,props:{placeholder:"first",type:"text"}},{id:"endId",label:"End ID (e.g., last, 10, 123)",component:j,props:{placeholder:"last",type:"text"}}]}};function OW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return wW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(wW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,wW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,wW(d,"constructor",u),wW(u,"constructor",l),l.displayName="GeneratorFunction",wW(u,o,"GeneratorFunction"),wW(d),wW(d,o,"Generator"),wW(d,r,function(){return this}),wW(d,"toString",function(){return"[object Generator]"}),(OW=function(){return{w:i,m:f}})()}function wW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}wW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){wW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},wW(e,t,n,r)}function SW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(bW);var xW=j_({variableName:tk().optional(),defaultValue:y_().optional(),_version:Hk().optional()}),kW=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){SW(i,r,o,a,s,"next",e)}function s(e){SW(i,r,o,a,s,"throw",e)}a(void 0)})}}(OW().m(function e(t,n,r){var o,i,a,s,l,u;return OW().w(function(e){for(;;)switch(e.n){case 0:if(o=r.executionVariables,i=xW.parse(t.data),a=jE(n,i,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:return s=n.schema,void 0===(l=o.get(a))&&void 0!==n.defaultValue&&(l=n.defaultValue),u=vY(l,s,"Get Flow Variable"),e.a(2,{value:u})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),_W={type:"getFlowVariableNode",label:"Get Flow Variable",category:"Variables",component:h$,dataSchema:xW,currentVersion:2,initialData:{variableName:"myVar",defaultValue:void 0},handles:{inputs:[{id:"main",type:mE.ANY},{id:"variableName",type:mE.STRING},{id:"schema",type:mE.SCHEMA}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}]},validate:j$(T$("variableName","Variable Name is required.")),execute:kW,getDynamicHandles:function(e,t,n){var r=wY(e,t,n,"schema");if(!r)return{inputs:[],outputs:[]};var o=ME(r);return{inputs:[{id:"defaultValue",type:o,schema:r}],outputs:[{id:"value",type:o,schema:r}]}},meta:{fields:[{id:"variableName",label:"Variable Name",component:j,props:{type:"text"}}]}};function PW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return EW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(EW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,EW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,EW(d,"constructor",u),EW(u,"constructor",l),l.displayName="GeneratorFunction",EW(u,o,"GeneratorFunction"),EW(d),EW(d,o,"Generator"),EW(d,r,function(){return this}),EW(d,"toString",function(){return"[object Generator]"}),(PW=function(){return{w:i,m:f}})()}function EW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}EW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){EW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},EW(e,t,n,r)}function $W(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(_W);var TW=j_({variableName:tk().optional(),defaultValue:y_().optional(),_version:Hk().optional()}),CW=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){$W(i,r,o,a,s,"next",e)}function s(e){$W(i,r,o,a,s,"throw",e)}a(void 0)})}}(PW().m(function e(t,n,r){var o,i,a,s,l;return PW().w(function(e){for(;;)switch(e.n){case 0:if(o=TW.parse(t.data),i=jE(n,o,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:return a=n.schema,e.n=2,r.dependencies.st_getGlobalVariable(i);case 2:return void 0===(s=e.v)&&void 0!==n.defaultValue&&(s=n.defaultValue),l=vY(s,a,"Get Global Variable"),e.a(2,{value:l})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),jW={type:"getGlobalVariableNode",label:"Get Global Variable",category:"Variables",component:h$,dataSchema:TW,currentVersion:2,initialData:{variableName:"globalVar",defaultValue:void 0},handles:{inputs:[{id:"main",type:mE.ANY},{id:"variableName",type:mE.STRING},{id:"schema",type:mE.SCHEMA}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}]},validate:j$(T$("variableName","Variable Name is required.")),execute:CW,getDynamicHandles:function(e,t,n){var r=wY(e,t,n,"schema");if(!r)return{inputs:[],outputs:[]};var o=ME(r);return{inputs:[{id:"defaultValue",type:o,schema:r}],outputs:[{id:"value",type:o,schema:r}]}},meta:{fields:[{id:"variableName",label:"Variable Name",component:j,props:{type:"text"}}]}};function NW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return AW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(AW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,AW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,AW(d,"constructor",u),AW(u,"constructor",l),l.displayName="GeneratorFunction",AW(u,o,"GeneratorFunction"),AW(d),AW(d,o,"Generator"),AW(d,r,function(){return this}),AW(d,"toString",function(){return"[object Generator]"}),(NW=function(){return{w:i,m:f}})()}function AW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}AW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){AW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},AW(e,t,n,r)}function IW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(jW);var MW=j_({variableName:tk().optional(),defaultValue:y_().optional(),_version:Hk().optional()}),DW=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){IW(i,r,o,a,s,"next",e)}function s(e){IW(i,r,o,a,s,"throw",e)}a(void 0)})}}(NW().m(function e(t,n,r){var o,i,a,s,l;return NW().w(function(e){for(;;)switch(e.n){case 0:if(o=MW.parse(t.data),i=jE(n,o,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:return a=n.schema,e.n=2,r.dependencies.st_getLocalVariable(i);case 2:return void 0===(s=e.v)&&void 0!==n.defaultValue&&(s=n.defaultValue),l=vY(s,a,"Get Local Variable"),e.a(2,{value:l})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),RW={type:"getLocalVariableNode",label:"Get Local Variable",category:"Variables",component:h$,dataSchema:MW,currentVersion:2,initialData:{variableName:"chatVar",defaultValue:void 0},handles:{inputs:[{id:"main",type:mE.ANY},{id:"variableName",type:mE.STRING},{id:"schema",type:mE.SCHEMA}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}]},validate:j$(T$("variableName","Variable Name is required.")),execute:DW,getDynamicHandles:function(e,t,n){var r=wY(e,t,n,"schema");if(!r)return{inputs:[],outputs:[]};var o=ME(r);return{inputs:[{id:"defaultValue",type:o,schema:r}],outputs:[{id:"value",type:o,schema:r}]}},meta:{fields:[{id:"variableName",label:"Variable Name",component:j,props:{type:"text"}}]}};function QW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return zW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(zW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,zW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,zW(d,"constructor",u),zW(u,"constructor",l),l.displayName="GeneratorFunction",zW(u,o,"GeneratorFunction"),zW(d),zW(d,o,"Generator"),zW(d,r,function(){return this}),zW(d,"toString",function(){return"[object Generator]"}),(QW=function(){return{w:i,m:f}})()}function zW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}zW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){zW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},zW(e,t,n,r)}function LW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function ZW(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){LW(i,r,o,a,s,"next",e)}function s(e){LW(i,r,o,a,s,"throw",e)}a(void 0)})}}$E.register(RW);var FW=j_({worldName:tk().optional(),entryUid:Hk().optional(),_version:Hk().optional()}),UW=function(){var e=ZW(QW().m(function e(t,n,r){var o,i,a,s,l,u,c;return QW().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=FW.parse(t.data),a=jE(n,i,"worldName"),s=jE(n,i,"entryUid"),a){e.n=1;break}throw new Error("World name is required.");case 1:if(void 0!==s){e.n=2;break}throw new Error("Entry UID is required.");case 2:return e.n=3,o.getWorldInfos(["all"]);case 3:if(l=e.v,u=l[a]){e.n=4;break}throw new Error('Lorebook "'.concat(a,'" not found.'));case 4:if(c=u.find(function(e){return e.uid===s})){e.n=5;break}throw new Error('Entry with UID "'.concat(s,'" not found in "').concat(a,'".'));case 5:return e.a(2,{entry:c,key:c.key.join(", "),content:c.content,comment:c.comment,disable:c.disable})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),VW={type:"getLorebookEntryNode",label:"Get Lorebook Entry",category:"Lorebook",component:wT,dataSchema:FW,currentVersion:1,initialData:{worldName:"",entryUid:void 0},handles:{inputs:[{id:"main",type:mE.ANY},{id:"worldName",type:mE.LOREBOOK_NAME},{id:"entryUid",type:mE.NUMBER}],outputs:[{id:"main",type:mE.ANY},{id:"entry",type:mE.OBJECT,schema:gT},{id:"key",type:mE.STRING},{id:"content",type:mE.STRING},{id:"comment",type:mE.STRING},{id:"disable",type:mE.BOOLEAN}]},validate:j$(T$("worldName","Lorebook Name is required."),T$("entryUid","Entry is required.")),execute:UW,meta:{fields:function(){var e=ZW(QW().m(function e(t){var n,r,o;return QW().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,kr(["all"]);case 1:return n=e.v,r=Object.keys(n).map(function(e){return{value:e,label:e}}),o=null!=t&&t.worldName&&n[t.worldName]?n[t.worldName].map(function(e){return{value:String(e.uid),label:e.comment||"Entry UID: ".concat(e.uid)}}):[],e.a(2,[p$({id:"worldName",label:"Lorebook Name",component:Kn,props:{items:r,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{worldName:e[0],entryUid:void 0})},formatValue:function(e){return[null!=e?e:""]}}),p$({id:"entryUid",label:"Entry",component:Kn,props:{items:o,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0,disabled:!(null!=t&&t.worldName)},getValueFromEvent:function(e){return Number(e[0])},formatValue:function(e){return[String(null!=e?e:"")]}})])}},e)}));return function(t){return e.apply(this,arguments)}}()}};function GW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return BW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(BW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,BW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,BW(d,"constructor",u),BW(u,"constructor",l),l.displayName="GeneratorFunction",BW(u,o,"GeneratorFunction"),BW(d),BW(d,o,"Generator"),BW(d,r,function(){return this}),BW(d,"toString",function(){return"[object Generator]"}),(GW=function(){return{w:i,m:f}})()}function BW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}BW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){BW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},BW(e,t,n,r)}function XW(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function YW(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){XW(i,r,o,a,s,"next",e)}function s(e){XW(i,r,o,a,s,"throw",e)}a(void 0)})}}$E.register(VW);var WW=j_({worldName:tk().optional(),_version:Hk().optional()}),qW=function(){var e=YW(GW().m(function e(t,n,r){var o,i,a,s,l;return GW().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=WW.parse(t.data),a=jE(n,i,"worldName")){e.n=1;break}throw new Error("World name is required.");case 1:return e.n=2,o.getWorldInfos(["all"]);case 2:if(s=e.v,l=s[a]){e.n=3;break}throw new Error('Lorebook "'.concat(a,'" not found.'));case 3:return e.a(2,{entries:l})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),HW={type:"getLorebookNode",label:"Get Lorebook",category:"Lorebook",component:wT,dataSchema:WW,currentVersion:1,initialData:{worldName:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"worldName",type:mE.LOREBOOK_NAME}],outputs:[{id:"main",type:mE.ANY},{id:"entries",type:mE.ARRAY,schema:vT}]},validate:j$(T$("worldName","Lorebook Name is required.")),execute:qW,meta:{fields:function(){var e=YW(GW().m(function e(){var t,n;return GW().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,kr(["all"]);case 1:return t=e.v,n=Object.keys(t).map(function(e){return{value:e,label:e}}),e.a(2,[p$({id:"worldName",label:"Lorebook Name",component:Kn,props:{items:n,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}})])}},e)}));return function(){return e.apply(this,arguments)}}()}};function KW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return JW(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(JW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,JW(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,JW(d,"constructor",u),JW(u,"constructor",l),l.displayName="GeneratorFunction",JW(u,o,"GeneratorFunction"),JW(d),JW(d,o,"Generator"),JW(d,r,function(){return this}),JW(d,"toString",function(){return"[object Generator]"}),(KW=function(){return{w:i,m:f}})()}function JW(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}JW=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){JW(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},JW(e,t,n,r)}function eq(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(HW);var tq=j_({promptName:tk().optional(),_version:Hk().optional()}),nq=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eq(i,r,o,a,s,"next",e)}function s(e){eq(i,r,o,a,s,"throw",e)}a(void 0)})}}(KW().m(function e(t,n){var r,o,i,a;return KW().w(function(e){for(;;)switch(e.n){case 0:if(r=tq.parse(t.data),o=jE(n,r,"promptName")){e.n=1;break}throw new Error("Prompt name not provided.");case 1:if(i=Gr.getSettings(),void 0!==(a=i.prompts[o])){e.n=2;break}throw new Error('Prompt "'.concat(o,'" not found.'));case 2:return e.a(2,{result:a})}},e)}));return function(t,n){return e.apply(this,arguments)}}(),rq={type:"getPromptNode",label:"Get Prompt",category:"User Interaction",component:h$,dataSchema:tq,currentVersion:1,initialData:{promptName:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"promptName",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.STRING}]},validate:j$(T$("promptName","Prompt Name is required.")),execute:nq,meta:{fields:function(){var e=Gr.getSettings().prompts,t=Object.keys(e).map(function(e){return{value:e,label:e}});return[{id:"promptName",label:"Prompt Name",component:Kn,props:{items:t,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}]}}};function oq(e){return oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oq(e)}$E.register(rq);var iq=["value","onChange","options","listId","overrideDefaults","className"];function aq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aq(Object(n),!0).forEach(function(t){lq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=oq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uq=function(e){var t=e.value,n=e.onChange,r=e.options,o=e.listId,i=e.overrideDefaults,a=e.className,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,iq),l=(0,$.useMemo)(function(){var e=[];return i||e.push("text_pole"),e.push(a),e.filter(Boolean).join(" ")},[i,a]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("input",sq({type:"text",className:l,value:t,onChange:n,list:o},s)),(0,E.jsx)("datalist",{id:o,children:r.map(function(e,t){return(0,E.jsx)("option",{value:e},t)})})]})};function cq(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dq(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function dq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return hq(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(hq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,hq(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,hq(d,"constructor",u),hq(u,"constructor",l),l.displayName="GeneratorFunction",hq(u,o,"GeneratorFunction"),hq(d),hq(d,o,"Generator"),hq(d,r,function(){return this}),hq(d,"toString",function(){return"[object Generator]"}),(fq=function(){return{w:i,m:f}})()}function hq(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}hq=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){hq(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},hq(e,t,n,r)}function pq(e){return pq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pq(e)}function mq(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var gq=j_({path:tk().optional(),_version:Hk().optional()}),vq=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){mq(i,r,o,a,s,"next",e)}function s(e){mq(i,r,o,a,s,"throw",e)}a(void 0)})}}(fq().m(function e(t,n){var r,o,i,a;return fq().w(function(e){for(;;)switch(e.n){case 0:if(r=gq.parse(t.data),o=jE(n,r,"path"),i=n.object,o){e.n=1;break}throw new Error("Property path is required in node ".concat(t.type,"."));case 1:if("object"===pq(i)&&null!==i){e.n=2;break}throw new Error("Input is not a valid object in ".concat(t.type,"."));case 2:return a=NE(i,o,void 0),e.a(2,{value:a})}},e)}));return function(t,n){return e.apply(this,arguments)}}();var yq={type:"getPropertyNode",label:"Get Property",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=GX(t,"object"),l=(0,$.useMemo)(function(){return s?r$(s):[]},[s]),u=(0,$.useMemo)(function(){return[{id:"path",label:"Property Path",component:uq,props:{type:"text",listId:"".concat(t,"-properties"),options:l}}]},[t,l]);return o&&a?(0,E.jsxs)(JE,{id:t,title:"Get Property",selected:n,children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input",fields:u,data:o,updateNodeData:i}),s&&(0,E.jsxs)("details",{style:{marginTop:"5px",background:"#2a2a2a",padding:"5px",borderRadius:"3px"},children:[(0,E.jsx)("summary",{style:{color:"#888",fontSize:"11px",cursor:"pointer"},children:"Available Input Properties"}),(0,E.jsx)("pre",{style:{fontSize:"10px",color:"#ccc",margin:0,whiteSpace:"pre-wrap"},children:n$(s)})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:gq,currentVersion:1,initialData:{path:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"object",type:mE.OBJECT},{id:"path",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}]},validate:j$(T$("path","Property Path is required."),function(e,t){if(!t.some(function(t){return t.target===e.id&&"object"===t.targetHandle}))return{message:'An object must be connected to the "object" input.',severity:"error"}}),execute:vq,getDynamicHandles:function(e,t,n){var r=gq.parse(e.data).path,o=n.find(function(t){return t.target===e.id&&"object"===t.targetHandle}),i=y_(),a=mE.ANY;if(o){var s=t.find(function(e){return e.id===o.source});if(s){var l=RE(s,o.sourceHandle||null,"output",t,n);if(null!=l&&l.schema){var u=function(e,t){if(""===t)return e;var n,r=e,o=cq(t.replace(/\[(\d+)\]/g,".$1").split("."));try{for(o.s();!(n=o.n()).done;){var i=n.value;if(!r)return;for(var a=r;"unwrap"in a&&"function"==typeof a.unwrap;)a=a.unwrap();for(;"innerType"in a&&"function"==typeof a.innerType;)a=a.innerType();if(!(a instanceof Kx))return;if(a instanceof C_)r=a.shape[i];else{if(!(a instanceof E_))return;if(isNaN(parseInt(i,10)))return;r=a.element}}}catch(e){o.e(e)}finally{o.f()}return r}(l.schema,null!=r?r:"");u&&(i=u,a=ME(u))}}}return{inputs:[],outputs:[{id:"value",type:a,schema:i}]}}};$E.register(yq);var bq=y(639),Oq=y.n(bq);function wq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Sq(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Sq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Sq(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Sq(d,"constructor",u),Sq(u,"constructor",l),l.displayName="GeneratorFunction",Sq(u,o,"GeneratorFunction"),Sq(d),Sq(d,o,"Generator"),Sq(d,r,function(){return this}),Sq(d,"toString",function(){return"[object Generator]"}),(wq=function(){return{w:i,m:f}})()}function Sq(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Sq=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Sq(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Sq(e,t,n,r)}function xq(e){return xq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xq(e)}function kq(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var _q=j_({template:tk().default("Hello, {{name}}!"),_version:Hk().optional()}),Pq=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){kq(i,r,o,a,s,"next",e)}function s(e){kq(i,r,o,a,s,"throw",e)}a(void 0)})}}(wq().m(function e(t,n){var r,o,i,a,s,l;return wq().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=_q.parse(t.data),o=jE(n,r,"template"),void 0!==(i=n.context)){e.n=1;break}throw new Error('A value must be connected to the "context" input.');case 1:return"object"===xq(a=i)&&null!==a||(a={context:a}),e.p=2,s=Oq().compile(o,{noEscape:!0,strict:!0}),e.a(2,{result:s(a)});case 3:throw e.p=3,l=e.v,new Error("Error executing handlebar template: ".concat(l.message));case 4:return e.a(2)}},e,null,[[2,3]])}));return function(t,n){return e.apply(this,arguments)}}(),Eq={type:"handlebarNode",label:"Handlebar",category:"Utility",component:function(e){var t,n,r=e.id,o=e.selected,i=e.type,a=O4(function(e){var t;return null===(t=e.nodesMap.get(r))||void 0===t?void 0:t.data}),s=O4(function(e){return e.updateNodeData}),l=$E.nodeDefinitionMap.get(i),u=GX(r,"context"),c=(0,$.useMemo)(function(){return u instanceof C_},[u]);if(!a||!l)return null;var d=null!==(t=null===(n=l.meta)||void 0===n?void 0:n.fields)&&void 0!==t?t:[];return(0,E.jsxs)(JE,{id:r,title:"Handlebar Template",selected:o,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsx)(f$,{nodeId:r,definition:l,type:"input",fields:d,data:a,updateNodeData:s}),c&&u&&(0,E.jsxs)("div",{style:{fontSize:"10px",color:"#aaa",marginTop:"5px"},children:[(0,E.jsx)("b",{children:"Available properties in `context`:"}),(0,E.jsx)("pre",{style:{margin:"2px 0 0 0",background:"#2a2a2a",padding:"4px",borderRadius:"3px",whiteSpace:"pre-wrap"},children:n$(u)})]})]}),(0,E.jsx)("div",{className:"node-output-section",children:(0,E.jsx)(f$,{nodeId:r,definition:l,type:"output"})})]})},dataSchema:_q,currentVersion:1,initialData:{template:"Hello, {{name}}!"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"template",type:mE.STRING},{id:"context",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.STRING}]},validate:j$(T$("template","Template is required."),C$("context",'A value must be connected to the "context" input.')),execute:Pq,meta:{fields:[{id:"template",label:"Template",component:A,props:{rows:4}}]}};function $q(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Tq(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Tq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Tq(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Tq(d,"constructor",u),Tq(u,"constructor",l),l.displayName="GeneratorFunction",Tq(u,o,"GeneratorFunction"),Tq(d),Tq(d,o,"Generator"),Tq(d,r,function(){return this}),Tq(d,"toString",function(){return"[object Generator]"}),($q=function(){return{w:i,m:f}})()}function Tq(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Tq=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Tq(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Tq(e,t,n,r)}function Cq(e){return Cq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cq(e)}function jq(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(Eq);var Nq=j_({url:tk().optional(),method:q_(["GET","POST","PUT","PATCH","DELETE"]).default("GET"),headers:tk().default("{}"),body:tk().default("{}"),_version:Hk().optional()}),Aq=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){jq(i,r,o,a,s,"next",e)}function s(e){jq(i,r,o,a,s,"throw",e)}a(void 0)})}}($q().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p,m,g,v,y,b;return $q().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=Nq.parse(t.data),i=jE(n,o,"url")){e.n=1;break}throw new Error("URL is required.");case 1:if(a=jE(n,o,"method"),s=jE(n,o,"headers"),l=jE(n,o,"body"),u={},e.p=2,"object"!==Cq(c=JSON.parse(s||"{}"))||null===c){e.n=3;break}u=c,e.n=4;break;case 3:throw new Error("Headers must be a JSON object.");case 4:e.n=6;break;case 5:throw e.p=5,y=e.v,new Error("Invalid JSON in headers: ".concat(y.message));case 6:if(d=null,"GET"!==a)if(f=n.body)d="object"===Cq(f)?JSON.stringify(f):String(f),u["Content-Type"]||(u["Content-Type"]="application/json");else try{JSON.parse(l),d=l,u["Content-Type"]||(u["Content-Type"]="application/json")}catch(e){d=l}return e.p=7,e.n=8,fetch(i,{method:a,headers:u,body:d,signal:r.signal});case 8:if(h=e.v,p={},h.headers.forEach(function(e,t){p[t]=e}),!(g=h.headers.get("content-type"))||!g.includes("application/json")){e.n=10;break}return e.n=9,h.json();case 9:m=e.v,e.n=12;break;case 10:return e.n=11,h.text();case 11:m=e.v;case 12:if(h.ok){e.n=13;break}throw new Error("Request failed with status ".concat(h.status,": ").concat(JSON.stringify(m)));case 13:return e.a(2,{responseBody:m,statusCode:h.status,headers:p});case 14:if(e.p=14,b=e.v,"AbortError"!==(v=b).name){e.n=15;break}throw new Error("HTTP request was cancelled: ".concat(v.message));case 15:throw new Error("HTTP request failed: ".concat(v.message));case 16:return e.a(2)}},e,null,[[7,14],[2,5]])}));return function(t,n,r){return e.apply(this,arguments)}}(),Iq={type:"httpRequestNode",label:"HTTP Request",category:"System",component:h$,dataSchema:Nq,currentVersion:1,initialData:{method:"GET",url:"https://api.example.com/data",headers:"{}",body:"{}"},isDangerous:!0,handles:{inputs:[{id:"main",type:mE.ANY},{id:"url",type:mE.STRING},{id:"method",type:mE.STRING},{id:"headers",type:mE.OBJECT},{id:"body",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"responseBody",type:mE.ANY},{id:"statusCode",type:mE.NUMBER},{id:"headers",type:mE.OBJECT}]},validate:j$(T$("url","URL is required.")),execute:Aq,meta:{fields:[{id:"url",label:"URL",component:j,props:{type:"text"}},{id:"method",label:"Method",component:N,options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}]},{id:"headers",label:"Headers (JSON)",component:DB,props:{height:"100px",extensions:[ZX({})],theme:"dark",style:{cursor:"text",marginTop:"5px"}},customChangeHandler:function(e,t){var n=t.nodeId;return(0,t.updateNodeData)(n,{headers:e})}},{id:"body",label:"Body (JSON)",component:DB,props:{height:"100px",extensions:[ZX({})],theme:"dark",style:{cursor:"text",marginTop:"5px"}},customChangeHandler:function(e,t){var n=t.nodeId;return(0,t.updateNodeData)(n,{body:e})}}]}};function Mq(e){return Mq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mq(e)}function Dq(e){return function(e){if(Array.isArray(e))return Rq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rq(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Qq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qq(Object(n),!0).forEach(function(t){Lq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Mq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$E.register(Iq);var Zq=["is_empty","is_not_empty"],Fq=function(e){e.nodeId;var t,n=e.condition,r=e.onUpdate,o=e.onRemove,i=e.isOnlyCondition,a=e.isInputAnObject,s=e.availableProperties,l=e.connectedHandles.has("value_".concat(n.id)),u=!Zq.includes(n.operator);return(0,E.jsxs)("div",{style:{border:"1px solid #555",padding:"8px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,E.jsxs)("span",{style:{fontSize:"10px",color:"#888",textTransform:"capitalize"},children:[n.mode," Mode"]}),(0,E.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,E.jsx)(C,{className:"fa-solid ".concat("simple"===n.mode?"fa-code":"fa-list-alt"),onClick:function(){r({mode:"simple"===n.mode?"advanced":"simple"})},title:"simple"===n.mode?"Switch to Advanced Code Editor":"Switch to Simple UI Editor"}),!i&&(0,E.jsx)(C,{className:"fa-solid fa-times",onClick:o,title:"Remove Condition"})]})]}),"simple"===n.mode?(0,E.jsxs)(E.Fragment,{children:[a&&(0,E.jsx)(uq,{className:"nodrag",value:n.inputProperty,onChange:function(e){return r({inputProperty:e.target.value})},options:s,listId:"".concat(n.id,"-properties"),placeholder:"Property path (e.g., name)"}),(0,E.jsx)(N,{className:"nodrag",value:n.operator,onChange:function(e){return r({operator:e.target.value})},children:eH.map(function(e){return(0,E.jsx)("option",{value:e,children:e.replace(/_/g," ")},e)})}),u&&(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,E.jsx)(Qd,{type:"target",position:Sl.Left,id:"value_".concat(n.id),style:{position:"relative",transform:"none",right:0,top:0}}),l?(0,E.jsx)("label",{style:{marginLeft:"10px",color:"#888",fontStyle:"italic"},children:"Value from connection"}):(0,E.jsx)(j,{className:"nodrag",value:null!==(t=n.value)&&void 0!==t?t:"",onChange:function(e){return r({value:e.target.value})},placeholder:"Value to compare"})]})]}):(0,E.jsx)(DB,{className:"nodrag nowheel",value:n.code||"",height:"100px",extensions:[ZX({})],onChange:function(e){return r({code:e})},theme:"dark",style:{cursor:"text"}}),(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[(0,E.jsx)("span",{children:"True"}),(0,E.jsx)(Qd,{type:"source",position:Sl.Right,id:n.id,style:{position:"relative",transform:"none",right:0,top:0,marginLeft:"5px"}})]})]})};function Uq(e){return Uq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uq(e)}function Vq(e){return function(e){if(Array.isArray(e))return Kq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hq(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Bq(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Bq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Bq(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Bq(d,"constructor",u),Bq(u,"constructor",l),l.displayName="GeneratorFunction",Bq(u,o,"GeneratorFunction"),Bq(d),Bq(d,o,"Generator"),Bq(d,r,function(){return this}),Bq(d,"toString",function(){return"[object Generator]"}),(Gq=function(){return{w:i,m:f}})()}function Bq(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Bq=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Bq(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},Bq(e,t,n,r)}function Xq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xq(Object(n),!0).forEach(function(t){Wq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Uq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Uq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Hq(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Hq(e,t){if(e){if("string"==typeof e)return Kq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kq(e,t):void 0}}function Kq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Jq(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var eH=["equals","not_equals","greater_than","less_than","contains","not_contains","is_empty","is_not_empty"],tH=j_({id:tk(),mode:q_(["simple","advanced"]).default("simple"),inputProperty:tk().default(""),operator:q_(eH).default("equals"),value:y_().optional(),code:tk().default("return true;")}),nH=j_({conditions:$_(tH).min(1),_version:Hk().optional()}),rH=function(e){return"value_".concat(e)},oH=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Jq(i,r,o,a,s,"next",e)}function s(e){Jq(i,r,o,a,s,"throw",e)}a(void 0)})}}(Gq().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O;return Gq().w(function(e){for(;;)switch(e.p=e.n){case 0:o=r.dependencies,i=r.executionVariables,a=nH.parse(t.data),s=n.value,l=qq(a.conditions),e.p=1,l.s();case 2:if((u=l.n()).done){e.n=17;break}if(c=u.value,d=!1,"simple"!==c.mode){e.n=12;break}h=c.inputProperty?NE(s,c.inputProperty,void 0):s,p=null!==(f=n[rH(c.id)])&&void 0!==f?f:c.value,y=c.operator,e.n="equals"===y?3:"not_equals"===y?4:"greater_than"===y?5:"less_than"===y?6:"contains"===y?7:"not_contains"===y?8:"is_empty"===y?9:"is_not_empty"===y?10:11;break;case 3:return d=h===p,e.a(3,11);case 4:return d=h!==p,e.a(3,11);case 5:return d=h>p,e.a(3,11);case 6:return d=h<p,e.a(3,11);case 7:return d=String(h).includes(String(p)),e.a(3,11);case 8:return d=!String(h).includes(String(p)),e.a(3,11);case 9:return d=""===h||null==h,e.a(3,11);case 10:return d=""!==h&&null!=h,e.a(3,11);case 11:e.n=15;break;case 12:m=null!=s?s:n,g=Yq({},Object.fromEntries(i)),e.p=13,v=new Function("input","variables","stContext",c.code),d=!!v(m,g,o.getSillyTavernContext()),e.n=15;break;case 14:throw e.p=14,b=e.v,new Error("Error executing condition code: ".concat(b.message));case 15:if(!d){e.n=16;break}return e.a(2,{activatedHandle:c.id});case 16:e.n=2;break;case 17:e.n=19;break;case 18:e.p=18,O=e.v,l.e(O);case 19:return e.p=19,l.f(),e.f(19);case 20:return e.a(2,{activatedHandle:"false"})}},e,null,[[13,14],[1,18,19,20]])}));return function(t,n,r){return e.apply(this,arguments)}}(),iH={type:"ifNode",label:"If",category:"Logic",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=GX(t,"value"),l=a$(t),u=(0,$.useMemo)(function(){return s instanceof C_},[s]),c=(0,$.useMemo)(function(){return u&&s?r$(s):[]},[s,u]),d=(0,$.useMemo)(function(){return[{id:"main",label:"Main",component:function(){return null}},{id:"value",label:"Input Value",component:function(){return null}}]},[]);if(!o||!a)return null;return(0,E.jsxs)(JE,{id:t,title:"If Conditions",selected:n,children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input",fields:d,data:{},exclude:o.conditions.map(function(e){return"value_".concat(e.id)})}),(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},children:[o.conditions.map(function(e,n){return(0,E.jsxs)("div",{children:[(0,E.jsxs)("label",{style:{fontSize:"10px",color:"#888"},children:["Condition ",n+1]}),(0,E.jsx)(Fq,{nodeId:t,condition:e,onUpdate:function(n){return r=e.id,a=n,s=o.conditions.map(function(e){return e.id===r?zq(zq({},e),a):e}),void i(t,{conditions:s});var r,a,s},onRemove:function(){return n=e.id,r=o.conditions.filter(function(e){return e.id!==n}),void i(t,{conditions:r});var n,r},isOnlyCondition:1===o.conditions.length,isInputAnObject:u,availableProperties:c,connectedHandles:l})]},e.id)}),(0,E.jsx)(C,{onClick:function(){var e={id:WT(),mode:"simple",inputProperty:"",operator:"equals",value:"",code:"return true;"};i(t,{conditions:[].concat(Dq(o.conditions),[e])})},children:"Add Else If"}),u&&s&&(0,E.jsxs)("details",{style:{marginTop:"5px",background:"#2a2a2a",padding:"5px",borderRadius:"3px"},children:[(0,E.jsx)("summary",{style:{color:"#888",fontSize:"11px",cursor:"pointer"},children:"Available Input Properties"}),(0,E.jsx)("pre",{style:{fontSize:"10px",color:"#ccc",margin:0,whiteSpace:"pre-wrap"},children:n$(s)})]}),(0,E.jsx)("div",{className:"node-output-section",children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output",exclude:o.conditions.map(function(e){return e.id})})})]})]})},dataSchema:nH,currentVersion:1,initialData:{conditions:[{id:WT(),mode:"simple",inputProperty:"",operator:"equals",value:"",code:"return true;"}]},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}],outputs:[]},validate:function(e,t){var n=[];return 0===t.filter(function(t){return t.source===e.id}).length&&n.push({message:"Node is a dead end. Connect at least one output.",severity:"warning"}),n},execute:oH,isDangerous:!0,getDynamicHandles:function(e,t,n){var r,o=e.data.conditions||[],i=n.find(function(t){return t.target===e.id&&"main"===t.targetHandle}),a=i?t.find(function(e){return e.id===i.source}):void 0,s=mE.ANY;if(a&&i){var l=RE(a,i.sourceHandle||null,"output",t,n);l&&(s=l.type,r=l.schema)}var u=o.map(function(e,t){return{id:e.id,type:s,schema:r,label:"Condition ".concat(t+1," True")}}),c=[{id:"main",type:s,schema:r,label:"Main"}].concat(Vq(u),[{id:"false",type:s,schema:r,label:"Else"}]);return{inputs:o.map(function(e,t){return{id:rH(e.id),type:mE.ANY,label:"Value for Condition ".concat(t+1)}}),outputs:c}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node,o=e.nodes,i=e.edges;if("input"===n){if("main"===t)return mE.ANY;if("value"===t)return mE.ANY;var a=(r.data.conditions||[]).some(function(e){return rH(e.id)===t});if(a)return mE.ANY}if("output"===n){var s=(r.data.conditions||[]).some(function(e){return e.id===t});if("main"===t||"false"===t||s){var l=i.find(function(e){return e.target===r.id&&"main"===e.targetHandle});if(l){var u=o.find(function(e){return e.id===l.source});if(u){var c,d=RE(u,l.sourceHandle||null,"output",o,i);return null!==(c=null==d?void 0:d.type)&&void 0!==c?c:mE.ANY}}return mE.ANY}}},determineEdgesToFollow:function(e,t){return null!=e&&e.activatedHandle?t.filter(function(t){return t.sourceHandle===e.activatedHandle}):[]}};function aH(e){return aH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aH(e)}function sH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sH(Object(n),!0).forEach(function(t){uH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uH(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=aH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=aH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aH(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cH(e){return function(e){if(Array.isArray(e))return dH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return dH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dH(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}$E.register(iH);var fH=function(e){var t=e.nodeId,n=e.item,r=e.path,o=e.parentType,i=e.onUpdate,a=e.onRemove,s=e.onAddChild,l=e.connectedHandles,u=l.has(n.id),c={string:mE.STRING,number:mE.NUMBER,boolean:mE.BOOLEAN,object:mE.OBJECT,array:mE.ARRAY}[n.type];return(0,E.jsxs)("div",{style:{marginLeft:r.length>1?"15px":0,marginTop:"5px"},children:[(0,E.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:["object"===o&&(0,E.jsx)(j,{className:"nodrag",value:n.key,onChange:function(e){return i(r,{key:e.target.value})},placeholder:"Key"}),(0,E.jsxs)(N,{className:"nodrag",value:n.type,onChange:function(e){var t,n=e.target.value;switch(n){case"string":t="";break;case"number":t=0;break;case"boolean":t=!1;break;case"object":case"array":t=[]}i(r,{type:n,value:t})},children:[(0,E.jsx)("option",{value:"string",children:"string"}),(0,E.jsx)("option",{value:"number",children:"number"}),(0,E.jsx)("option",{value:"boolean",children:"boolean"}),(0,E.jsx)("option",{value:"object",children:"object"}),(0,E.jsx)("option",{value:"array",children:"array"})]}),(0,E.jsx)(C,{onClick:function(){return a(r)},children:""})]}),(0,E.jsxs)("div",{style:{marginTop:"5px",position:"relative"},children:[(0,E.jsx)(Qd,{type:"target",position:Sl.Left,id:n.id,style:{top:"50%",transform:"translateY(-50%)",backgroundColor:vE[c]}}),u?(0,E.jsx)("span",{style:{marginLeft:"15px",color:"#888",fontStyle:"italic"},children:"Value from connection"}):function(){switch(n.type){case"string":return(0,E.jsx)(j,{className:"nodrag",value:n.value,onChange:function(e){return i(r,{value:e.target.value})}});case"number":return(0,E.jsx)(j,{className:"nodrag",type:"number",value:n.value,onChange:function(e){return i(r,{value:Number(e.target.value)})}});case"boolean":return(0,E.jsxs)(N,{className:"nodrag",value:String(n.value),onChange:function(e){return i(r,{value:"true"===e.target.value})},children:[(0,E.jsx)("option",{value:"true",children:"true"}),(0,E.jsx)("option",{value:"false",children:"false"})]});default:return null}}()]}),("object"===n.type||"array"===n.type)&&!u&&(0,E.jsxs)("div",{style:{marginLeft:"10px",borderLeft:"1px solid #444",paddingLeft:"5px"},children:[n.value.map(function(e,o){return(0,E.jsx)(fH,{nodeId:t,item:e,path:[].concat(cH(r),[o]),parentType:n.type,onUpdate:i,onRemove:a,onAddChild:s,connectedHandles:l},e.id)}),(0,E.jsxs)(C,{onClick:function(){return s(r)},style:{marginTop:"5px"},children:["+ Add ","object"===n.type?"Property":"Item"]})]})]})};function hH(e){return hH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hH(e)}function pH(e){return function(e){if(Array.isArray(e))return xH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||SH(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return gH(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(gH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,gH(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,gH(d,"constructor",u),gH(u,"constructor",l),l.displayName="GeneratorFunction",gH(u,o,"GeneratorFunction"),gH(d),gH(d,o,"Generator"),gH(d,r,function(){return this}),gH(d,"toString",function(){return"[object Generator]"}),(mH=function(){return{w:i,m:f}})()}function gH(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}gH=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){gH(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},gH(e,t,n,r)}function vH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vH(Object(n),!0).forEach(function(t){bH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bH(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=hH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hH(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OH(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function wH(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=SH(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function SH(e,t){if(e){if("string"==typeof e)return xH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xH(e,t):void 0}}function xH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kH=j_({id:tk(),key:tk(),type:q_(["string","number","boolean","object","array"])}).extend({value:CP(function(){return M_([tk(),Hk(),i_(),$_(kH)])})}),_H=j_({rootType:q_(["object","array"]).default("object"),items:$_(kH).default([]),_version:Hk().optional()}),PH=function(e,t){if(Object.prototype.hasOwnProperty.call(t,e.id))return t[e.id];switch(e.type){case"string":case"number":case"boolean":return e.value;case"object":var n,r={},o=wH(e.value);try{for(o.s();!(n=o.n()).done;){var i=n.value;r[i.key]=PH(i,t)}}catch(e){o.e(e)}finally{o.f()}return r;case"array":return e.value.map(function(e){return PH(e,t)})}},EH=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){OH(i,r,o,a,s,"next",e)}function s(e){OH(i,r,o,a,s,"throw",e)}a(void 0)})}}(mH().m(function e(t,n){var r,o,i,a,s;return mH().w(function(e){for(;;)switch(e.n){case 0:if("array"!==(r=_H.parse(t.data)).rootType){e.n=1;break}return e.a(2,{result:r.items.map(function(e){return PH(e,n)})});case 1:o={},i=wH(r.items);try{for(i.s();!(a=i.n()).done;)s=a.value,o[s.key]=PH(s,n)}catch(e){i.e(e)}finally{i.f()}return e.a(2,yH({result:o},o))}},e)}));return function(t,n){return e.apply(this,arguments)}}(),$H=function(e){var t,n=[],r=new Set,o=wH(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.key&&""!==i.key.trim()||n.push({message:"Object keys cannot be empty.",severity:"error"}),r.has(i.key)&&n.push({message:'Duplicate key found: "'.concat(i.key,'".'),severity:"error"}),r.add(i.key),"object"!==i.type&&"array"!==i.type||n.push.apply(n,pH($H(i.value)))}}catch(e){o.e(e)}finally{o.f()}return n};function TH(e){var t,n=[],r=wH(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;switch(o.type){case"string":n.push({id:o.id,type:mE.STRING});break;case"number":n.push({id:o.id,type:mE.NUMBER});break;case"boolean":n.push({id:o.id,type:mE.BOOLEAN});break;case"object":n.push({id:o.id,type:mE.OBJECT}),n.push.apply(n,pH(TH(o.value)));break;case"array":n.push({id:o.id,type:mE.ARRAY}),n.push.apply(n,pH(TH(o.value)))}}}catch(e){r.e(e)}finally{r.f()}return n}function CH(e,t){var n,r=wH(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id===t)return o;if("object"===o.type||"array"===o.type){var i=CH(o.value,t);if(i)return i}}}catch(e){r.e(e)}finally{r.f()}return null}function jH(e,t,n,r){var o=r.find(function(n){return n.target===t&&n.targetHandle===e.id});if(o){var i=n.find(function(e){return e.id===o.source});if(i){var a=RE(i,o.sourceHandle||null,"output",n,r);if(null!=a&&a.schema)return a.schema}}switch(e.type){case"string":return tk();case"number":return Hk();case"boolean":return i_();case"object":var s={};return e.value.forEach(function(e){e.key&&(s[e.key]=jH(e,t,n,r))}),j_(s);case"array":var l,u=null===(l=e.value)||void 0===l?void 0:l[0];return $_(u?jH(u,t,n,r):y_());default:return y_()}}var NH={type:"jsonNode",label:"JSON",category:"JSON",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=a$(t);if(!o||!a)return null;var l=function(e,n){var r=BX(o.items,e,function(e){return lH(lH({},e),n)});i(t,{items:r})},u=function(e){var n=structuredClone(o.items),r=n;if(e.length>1){for(var a=n,s=0;s<e.length-2;s++)a=a[e[s]].value;r=a[e[e.length-2]].value}r.splice(e[e.length-1],1),i(t,{items:n})},c=function(e){var n={id:WT(),key:"newKey",value:"",type:"string"},r=BX(o.items,e,function(e){return lH(lH({},e),{},{value:[].concat(cH(e.value),[n])})});i(t,{items:r})};return(0,E.jsxs)(JE,{id:t,title:"JSON",selected:n,children:[(0,E.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,E.jsx)("label",{children:"Root Type: "}),(0,E.jsxs)(N,{className:"nodrag",value:o.rootType,onChange:function(e){i(t,{rootType:e.target.value,items:[]})},children:[(0,E.jsx)("option",{value:"object",children:"Object"}),(0,E.jsx)("option",{value:"array",children:"Array"})]})]}),(o.items||[]).map(function(e,n){var r;return(0,E.jsx)(fH,{nodeId:t,item:e,path:[n],parentType:null!==(r=o.rootType)&&void 0!==r?r:"object",onUpdate:l,onRemove:u,onAddChild:c,connectedHandles:s},e.id)}),(0,E.jsxs)(C,{className:"nodrag",onClick:function(){var e={id:WT(),key:"newKey",value:"",type:"string"};i(t,{items:[].concat(cH(o.items),[e])})},style:{marginTop:"10px"},children:["Add ","object"===o.rootType?"Property":"Item"]}),(0,E.jsx)("div",{className:"node-output-section",children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:_H,currentVersion:1,initialData:{items:[],rootType:"object"},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.OBJECT}]},validate:function(e){return"object"!==e.data.rootType?[]:$H(e.data.items)},execute:EH,getDynamicHandles:function(e,t,n){var r=e.data,o=TH(r.items),i="array"===r.rootType?$_(r.items.length>0?jH(r.items[0],e.id,t,n):y_()):j_(Object.fromEntries(r.items.map(function(r){return[r.key,jH(r,e.id,t,n)]}))),a=[{id:"result",type:ME(i),schema:i}];return"object"===r.rootType&&i instanceof C_&&r.items.forEach(function(e){if(e.key){var t=i.shape[e.key];t&&a.push({id:e.key,type:ME(t),schema:t})}}),{inputs:o,outputs:a}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("input"===n&&t){var o=CH(r.data.items,t);if(o)switch(o.type){case"string":return mE.STRING;case"number":return mE.NUMBER;case"boolean":return mE.BOOLEAN;case"object":return mE.OBJECT;case"array":return mE.ARRAY}}}};$E.register(NH);function AH(e){return AH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AH(e)}function IH(e){return function(e){if(Array.isArray(e))return MH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return MH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MH(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function DH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return RH(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(RH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,RH(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,RH(d,"constructor",u),RH(u,"constructor",l),l.displayName="GeneratorFunction",RH(u,o,"GeneratorFunction"),RH(d),RH(d,o,"Generator"),RH(d,r,function(){return this}),RH(d,"toString",function(){return"[object Generator]"}),(DH=function(){return{w:i,m:f}})()}function RH(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}RH=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){RH(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},RH(e,t,n,r)}function QH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QH(Object(n),!0).forEach(function(t){LH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function LH(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=AH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=AH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AH(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZH(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function FH(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ZH(i,r,o,a,s,"next",e)}function s(e){ZH(i,r,o,a,s,"throw",e)}a(void 0)})}}var UH=j_({profileId:tk().default(""),schemaName:tk().default("responseSchema"),promptEngineeringMode:q_(Nr).default(Nr.NATIVE),maxResponseToken:Hk().default(1e3),stream:i_().default(!1),onStreamFlowId:tk().optional(),_version:Hk().optional()}),VH=function(){var e=FH(DH().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O;return DH().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=r.signal,a=r.depth,s=r.executionPath,l=r.runId,u=UH.parse(t.data),c=jE(n,u,"profileId"),d=jE(n,u,"maxResponseToken"),f=jE(n,u,"stream"),h=jE(n,u,"onStreamFlowId"),p=jE(n,u,"messages"),m=jE(n,u,"schema"),c&&p&&void 0!==d){e.n=1;break}throw new Error("Missing required inputs: profileId, messages, and maxResponseToken.");case 1:if(!m){e.n=3;break}return g=jE(n,u,"schemaName"),v=jE(n,u,"promptEngineeringMode"),e.n=2,o.makeStructuredRequest(c,p,m,g||"response",v,d,i);case 2:return y=e.v,e.a(2,zH(zH({},y),{},{result:y}));case 3:return f&&h&&(b=function(){var e=FH(DH().m(function e(t){var n,r,i,u,c;return DH().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o.executeSubFlow(h,t,a+1,s,l);case 1:e.n=3;break;case 2:throw e.p=2,c=e.v,console.error('[Flowchart] Error in streaming sub-flow "'.concat(h,'":'),c),i=null!==(n=null===(r=Gr.getSettings().flows.find(function(e){return e.id===h}))||void 0===r?void 0:r.name)&&void 0!==n?n:h,u=c instanceof Error?c.message:"string"==typeof c?c:"Unknown error",Hr("error",'Streaming sub-flow "'.concat(i,'" failed: ').concat(u),"execution"),c;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e.n=4,o.makeSimpleRequest(c,p,d,b,i);case 4:return O=e.v,e.a(2,{result:O});case 5:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),GH={type:"llmRequestNode",label:"LLM Request",category:"API Request",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=qT(t,"schema"),l=(0,$.useMemo)(function(){var e=[{id:"profileId",label:"Connection Profile",component:te,props:{initialSelectedProfileId:null==o?void 0:o.profileId},customChangeHandler:function(e){i(t,{profileId:(null==e?void 0:e.id)||""})}},{id:"maxResponseToken",label:"Max Response Tokens",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}];return s||e.push({id:"stream",label:"Stream Response",component:j,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}}),s&&e.push({id:"schemaName",label:"Schema Name",component:j,props:{type:"text"}},{id:"promptEngineeringMode",label:"Prompt Engineering Mode",component:N,props:{children:Object.values(Nr).map(function(e){return(0,E.jsx)("option",{value:e,children:e},e)})}}),e},[s,null==o?void 0:o.profileId,t,i]);return o&&a?(0,E.jsxs)(JE,{id:t,title:"LLM Request",selected:n,children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input",fields:l,data:o,updateNodeData:i}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:UH,currentVersion:1,initialData:{profileId:"",schemaName:"mySchema",promptEngineeringMode:Nr.NATIVE,maxResponseToken:1e3,stream:!1},handles:{inputs:[{id:"main",type:mE.ANY},{id:"profileId",type:mE.PROFILE_ID},{id:"messages",type:mE.MESSAGES},{id:"schema",type:mE.SCHEMA},{id:"maxResponseToken",type:mE.NUMBER}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.ANY}]},validate:function(e,t){var n=j$(T$("profileId","Connection Profile is required."),C$("messages",'A "Messages" input is required.'))(e,t);return e.data.stream&&t.some(function(t){return t.target===e.id&&"schema"===t.targetHandle})&&n.push({message:"Streaming is not supported for structured (schema-based) requests.",severity:"error"}),!e.data.stream||e.data.onStreamFlowId||t.some(function(t){return t.target===e.id&&"onStreamFlowId"===t.targetHandle})||n.push({fieldId:"onStreamFlowId",message:'An "On Stream" flow must be selected when streaming is enabled.',severity:"error"}),n},execute:VH,getDynamicHandles:function(e,t,n){var r=n.some(function(t){return t.target===e.id&&"schema"===t.targetHandle}),o=e.data.stream,i=[];if(r&&(i.push({id:"schemaName",type:mE.STRING}),i.push({id:"promptEngineeringMode",type:mE.STRING})),r||(i.push({id:"stream",type:mE.BOOLEAN}),o&&i.push({id:"onStreamFlowId",type:mE.FLOW_ID})),!r)return{inputs:i,outputs:[{id:"result",type:mE.STRING}]};var a=wY(e,t,n,"schema");if(!a)return{inputs:i,outputs:[{id:"result",type:mE.ANY}]};var s={id:"result",type:mE.STRUCTURED_RESULT,schema:a},l=QE(a);return{inputs:i,outputs:[s].concat(IH(l))}},getSuggestionBlueprints:function(e){return"inputs"===e.direction?[{id:"streaming",labelSuffix:"(Streaming)",dataOverrides:{stream:!0}}]:[]},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node,o=e.nodes,i=e.edges;if("output"===n){var a=wY(r,o,i,"schema");return a?"result"===t?mE.STRUCTURED_RESULT:a instanceof C_&&t&&a.shape[t]?ME(a.shape[t]):void 0:"result"===t?mE.STRING:void 0}}};function BH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return XH(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(XH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,XH(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,XH(d,"constructor",u),XH(u,"constructor",l),l.displayName="GeneratorFunction",XH(u,o,"GeneratorFunction"),XH(d),XH(d,o,"Generator"),XH(d,r,function(){return this}),XH(d,"toString",function(){return"[object Generator]"}),(BH=function(){return{w:i,m:f}})()}function XH(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}XH=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){XH(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},XH(e,t,n,r)}function YH(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(GH);var WH=j_({prefix:tk().default(""),_version:Hk().optional()}),qH=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){YH(i,r,o,a,s,"next",e)}function s(e){YH(i,r,o,a,s,"throw",e)}a(void 0)})}}(BH().m(function e(t,n){var r,o;return BH().w(function(e){for(;;)switch(e.n){case 0:r=WH.parse(t.data),o=jE(n,r,"prefix"),console.log(o,n.value);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),HH={type:"logNode",label:"Log",category:"Utility",component:h$,dataSchema:WH,currentVersion:1,initialData:{prefix:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY},{id:"prefix",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},execute:qH,meta:{fields:[{id:"prefix",label:"Log Prefix",component:j,props:{placeholder:"Prefix for the log message",type:"text"}}]}};$E.register(HH);function KH(e){return function(e){if(Array.isArray(e))return JH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return JH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JH(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return tK(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(tK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,tK(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,tK(d,"constructor",u),tK(u,"constructor",l),l.displayName="GeneratorFunction",tK(u,o,"GeneratorFunction"),tK(d),tK(d,o,"Generator"),tK(d,r,function(){return this}),tK(d,"toString",function(){return"[object Generator]"}),(eK=function(){return{w:i,m:f}})()}function tK(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}tK=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){tK(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},tK(e,t,n,r)}function nK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nK(Object(n),!0).forEach(function(t){oK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oK(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=iK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iK(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iK(e){return iK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iK(e)}function aK(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var sK=j_({payload:tk().default("{}"),_version:Hk().optional()}),lK=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){aK(i,r,o,a,s,"next",e)}function s(e){aK(i,r,o,a,s,"throw",e)}a(void 0)})}}(eK().m(function e(t,n){var r,o,i,a,s,l,u,c;return eK().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=n.schema,!(Object.keys(n).length>0)){e.n=6;break}if(!r){e.n=4;break}if(e.p=1,"object"!==iK(o=r.parse(n))||null===o||Array.isArray(o)){e.n=2;break}return e.a(2,rK({result:o},o));case 2:return e.a(2,{result:o});case 3:throw e.p=3,l=e.v,new Error("Input does not match provided schema: ".concat(l.message));case 4:if("object"!==iK(n)||null===n){e.n=5;break}return e.a(2,rK(rK({},n),{},{result:n}));case 5:return e.a(2,{result:n});case 6:if(i=sK.parse(t.data),e.p=7,a=JSON.parse(i.payload),!r){e.n=11;break}if(e.p=8,"object"!==iK(s=r.parse(a))||null===s||Array.isArray(s)){e.n=9;break}return e.a(2,rK({result:s},s));case 9:return e.a(2,{result:s});case 10:throw e.p=10,u=e.v,new Error("Payload does not match provided schema: ".concat(u.message));case 11:if("object"!==iK(a)||null===a||Array.isArray(a)){e.n=12;break}return e.a(2,rK({result:a},a));case 12:return e.a(2,{result:a});case 13:throw e.p=13,c=e.v,new Error("Invalid JSON payload: ".concat(c.message));case 14:return e.a(2)}},e,null,[[8,10],[7,13],[1,3]])}));return function(t,n){return e.apply(this,arguments)}}(),uK={type:"manualTriggerNode",label:"Manual Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r);if(!o||!a)return null;return(0,E.jsxs)(JE,{id:t,title:"Manual / Sub-Flow Trigger",selected:n,children:[(0,E.jsxs)("div",{style:{borderBottom:"1px solid #555",paddingBottom:"10px",marginBottom:"10px"},children:[(0,E.jsx)(f$,{nodeId:t,definition:a,type:"input"}),(0,E.jsx)("p",{style:{fontSize:"11px",color:"#ccc",margin:"4px 0 0 0"},children:"Connect a Schema node to define typed inputs for this sub-flow."})]}),(0,E.jsx)("label",{children:"Default Payload (for manual runs)"}),(0,E.jsx)(DB,{className:"nodrag nowheel",value:o.payload||"{}",height:"100px",extensions:[ZX({})],width:"100%",onChange:function(e){i(t,{payload:e})},theme:"dark",style:{cursor:"text"}}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:sK,currentVersion:2,initialData:{payload:'{\n  "key": "value"\n}'},handles:{inputs:[{id:"schema",type:mE.SCHEMA}],outputs:[]},execute:lK,getDynamicHandles:function(e,t,n){var r=wY(e,t,n,"schema");if(r){var o=QE(r);return{inputs:[],outputs:[{id:"result",type:ME(r),schema:r}].concat(KH(o))}}try{var i=JSON.parse(e.data.payload),a=DE(i),s=[{id:"result",type:a,schema:OY(i)}];if(a===mE.OBJECT&&!Array.isArray(i))for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&s.push({id:l,type:DE(i[l]),schema:OY(i[l])});return{inputs:[],outputs:s}}catch(e){return{inputs:[],outputs:[{id:"result",type:mE.ANY}]}}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node,o=e.nodes,i=e.edges;if("input"===n&&"schema"===t)return mE.SCHEMA;if("output"===n){var a=wY(r,o,i,"schema");if(a){if("result"===t)return ME(a);if(a instanceof C_&&t&&a.shape[t])return ME(a.shape[t])}else try{var s=JSON.parse(r.data.payload);if("result"===t)return DE(s);if("object"===iK(s)&&null!==s&&!Array.isArray(s)&&t)return DE(s[t])}catch(e){return mE.ANY}}}};function cK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return dK(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(dK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,dK(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,dK(d,"constructor",u),dK(u,"constructor",l),l.displayName="GeneratorFunction",dK(u,o,"GeneratorFunction"),dK(d),dK(d,o,"Generator"),dK(d,r,function(){return this}),dK(d,"toString",function(){return"[object Generator]"}),(cK=function(){return{w:i,m:f}})()}function dK(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}dK=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){dK(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},dK(e,t,n,r)}function fK(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(uK);var hK=j_({operation:q_(["add","subtract","multiply","divide","modulo"]).optional(),a:Hk().optional(),b:Hk().optional(),_version:Hk().optional()}),pK=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){fK(i,r,o,a,s,"next",e)}function s(e){fK(i,r,o,a,s,"throw",e)}a(void 0)})}}(cK().m(function e(t,n){var r,o,i,a,s,l,u,c;return cK().w(function(e){for(;;)switch(e.n){case 0:if(a=hK.parse(t.data),s=null!==(r=jE(n,a,"operation"))&&void 0!==r?r:"add",l=null!==(o=jE(n,a,"a"))&&void 0!==o?o:0,u=null!==(i=jE(n,a,"b"))&&void 0!==i?i:0,"number"==typeof l&&"number"==typeof u){e.n=1;break}throw new Error("Both inputs must be numbers.");case 1:c=s,e.n="add"===c?2:"subtract"===c?3:"multiply"===c?4:"divide"===c?5:"modulo"===c?7:9;break;case 2:return e.a(2,{result:l+u});case 3:return e.a(2,{result:l-u});case 4:return e.a(2,{result:l*u});case 5:if(0!==u){e.n=6;break}throw new Error("Division by zero.");case 6:return e.a(2,{result:l/u});case 7:if(0!==u){e.n=8;break}throw new Error("Division by zero for modulo.");case 8:return e.a(2,{result:l%u});case 9:throw new Error("Unknown math operation: ".concat(s));case 10:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),mK={type:"mathNode",label:"Math",category:"Math & Logic",component:h$,dataSchema:hK,currentVersion:1,initialData:{operation:"add",a:0,b:0},handles:{inputs:[{id:"main",type:mE.ANY},{id:"operation",type:mE.STRING},{id:"a",type:mE.NUMBER},{id:"b",type:mE.NUMBER}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.NUMBER}]},execute:pK,meta:{fields:[{id:"operation",label:"Operation",component:N,options:["add","subtract","multiply","divide","modulo"].map(function(e){return{value:e,label:e}})},{id:"a",label:"Value A",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"b",label:"Value B",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}]}};$E.register(mK);function gK(e){return gK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gK(e)}function vK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return yK(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(yK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,yK(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,yK(d,"constructor",u),yK(u,"constructor",l),l.displayName="GeneratorFunction",yK(u,o,"GeneratorFunction"),yK(d),yK(d,o,"Generator"),yK(d,r,function(){return this}),yK(d,"toString",function(){return"[object Generator]"}),(vK=function(){return{w:i,m:f}})()}function yK(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}yK=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){yK(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},yK(e,t,n,r)}function bK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function OK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bK(Object(n),!0).forEach(function(t){wK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wK(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=gK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gK(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SK(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var xK=j_({buttonText:tk().min(1,"Button text cannot be empty").default("Run My Flow"),icon:tk().default("fa-solid fa-play"),_version:Hk().optional()}),kK=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){SK(i,r,o,a,s,"next",e)}function s(e){SK(i,r,o,a,s,"throw",e)}a(void 0)})}}(vK().m(function e(t,n){return vK().w(function(e){for(;;)if(0===e.n)return e.a(2,OK({},n))},e)}));return function(t,n){return e.apply(this,arguments)}}(),_K="flowchart_menu_buttons",PK={type:"menuTriggerNode",label:"Menu Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r);return o&&a?(0,E.jsxs)(JE,{id:t,title:"Menu Button Trigger",selected:n,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Button Text"}),(0,E.jsx)(j,{className:"nodrag",type:"text",value:o.buttonText,onChange:function(e){return i(t,{buttonText:e.target.value})}})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Font Awesome Icon"}),(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,E.jsx)(j,{className:"nodrag",type:"text",value:o.icon,onChange:function(e){return i(t,{icon:e.target.value})},style:{flex:1}}),(0,E.jsx)("div",{style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--SmartThemeBorderColor)",borderRadius:"4px",flexShrink:0},children:(0,E.jsx)("i",{className:o.icon,style:{fontSize:"16px"}},o.icon)})]}),(0,E.jsxs)("p",{style:{fontSize:"11px",color:"#ccc",margin:"4px 0 0 0"},children:["Find icons on"," ",(0,E.jsx)("a",{href:"https://fontawesome.com/v6/search?f=classic&s=solid&ic=free&o=r",target:"_blank",rel:"noopener noreferrer",children:"Font Awesome"}),". Use the full class name, e.g., `fa-solid fa-rocket`."]})]})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:xK,currentVersion:1,initialData:{buttonText:"Run My Flow",icon:"fa-solid fa-play"},handles:{inputs:[],outputs:[{id:"main",type:mE.ANY}]},execute:kK,register:function(e,t,n){var r=document.querySelector("#extensionsMenu");if(r){var o=document.getElementById(_K);o||((o=document.createElement("div")).id=_K,o.className="extension_container",r.appendChild(o));var i=t.data,a=document.createElement("div");a.className="list-group-item flex-container flexGap5 interactable",a.tabIndex=0,a.setAttribute("role","listitem"),a.innerHTML='<div class="'.concat(i.icon,' extensionsMenuExtensionButton"></div><span>').concat(i.buttonText,"</span>"),a.addEventListener("click",function(){n.executeFlow(e,{},0,{activatedNodeId:t.id})}),o.appendChild(a)}},unregisterAll:function(){var e;null===(e=document.getElementById(_K))||void 0===e||e.remove()}};$E.register(PK);function EK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return $K(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):($K(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,$K(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,$K(d,"constructor",u),$K(u,"constructor",l),l.displayName="GeneratorFunction",$K(u,o,"GeneratorFunction"),$K(d),$K(d,o,"Generator"),$K(d,r,function(){return this}),$K(d,"toString",function(){return"[object Generator]"}),(EK=function(){return{w:i,m:f}})()}function $K(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}$K=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){$K(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},$K(e,t,n,r)}function TK(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var CK=j_({inputCount:Hk().min(1).default(2),_version:Hk().optional()}),jK="messages_",NK=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){TK(i,r,o,a,s,"next",e)}function s(e){TK(i,r,o,a,s,"throw",e)}a(void 0)})}}(EK().m(function e(t,n){var r,o;return EK().w(function(e){for(;;)if(0===e.n)return r=$E.nodeDefinitionMap.get("mergeMessagesNode"),o=Object.keys(n).filter(function(e){return r.isDynamicHandle(e)&&Array.isArray(n[e])}).sort(function(e,t){return parseInt(e.split("_")[1],10)-parseInt(t.split("_")[1],10)}).flatMap(function(e){return n[e]}),e.a(2,{result:o})},e)}));return function(t,n){return e.apply(this,arguments)}}(),AK={type:"mergeMessagesNode",label:"Merge Messages",category:"API Request",component:function(e){var t,n=e.id,r=e.selected,o=e.type,i=O4(function(e){var t;return{data:null===(t=e.nodes.find(function(e){return e.id===n}))||void 0===t?void 0:t.data,updateNodeData:e.updateNodeData}},Pc),a=i.data,s=i.updateNodeData,l=$E.nodeDefinitionMap.get(o),u=null!==(t=null==a?void 0:a.inputCount)&&void 0!==t?t:2;if(!a)return null;var c=function(e){s(n,{inputCount:Math.max(1,e)})};return(0,E.jsxs)(JE,{id:n,title:"Merge Messages",selected:r,children:[(0,E.jsx)(f$,{nodeId:n,definition:l,type:"input"}),(0,E.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"10px"},children:[(0,E.jsx)(C,{onClick:function(){return c(u+1)},children:"+"}),(0,E.jsx)(C,{onClick:function(){return c(u-1)},disabled:u<=1,children:"-"})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:n,definition:l,type:"output"})})]})},dataSchema:CK,currentVersion:1,initialData:{inputCount:2},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.MESSAGES}]},execute:NK,getDynamicHandleId:function(e){return"".concat(jK).concat(e)},isDynamicHandle:function(e){var t;return null!==(t=null==e?void 0:e.startsWith(jK))&&void 0!==t&&t},getDynamicHandles:function(e){for(var t=[],n=0;n<e.data.inputCount;n++)t.push({id:"".concat(jK).concat(n),type:mE.MESSAGES});return{inputs:t,outputs:[]}},getHandleType:function(e){var t=e.handleId;if("input"===e.handleDirection&&null!=t&&t.startsWith(jK))return mE.MESSAGES}};$E.register(AK);function IK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return MK(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(MK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,MK(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,MK(d,"constructor",u),MK(u,"constructor",l),l.displayName="GeneratorFunction",MK(u,o,"GeneratorFunction"),MK(d),MK(d,o,"Generator"),MK(d,r,function(){return this}),MK(d,"toString",function(){return"[object Generator]"}),(IK=function(){return{w:i,m:f}})()}function MK(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}MK=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){MK(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},MK(e,t,n,r)}function DK(e){return function(e){if(Array.isArray(e))return RK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return RK(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RK(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function QK(e){return QK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QK(e)}function zK(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var LK=j_({inputCount:Hk().min(1).default(2),_version:Hk().optional()}),ZK="object_",FK=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){zK(i,r,o,a,s,"next",e)}function s(e){zK(i,r,o,a,s,"throw",e)}a(void 0)})}}(IK().m(function e(t,n){var r,o,i;return IK().w(function(e){for(;;)if(0===e.n)return r=$E.nodeDefinitionMap.get("mergeObjectsNode"),o=Object.keys(n).filter(function(e){return r.isDynamicHandle(e)&&"object"===QK(n[e])&&null!==n[e]}).sort(function(e,t){return parseInt(e.split("_")[1],10)-parseInt(t.split("_")[1],10)}).map(function(e){return n[e]}),i=Object.assign.apply(Object,[{}].concat(DK(o))),e.a(2,{result:i})},e)}));return function(t,n){return e.apply(this,arguments)}}(),UK={type:"mergeObjectsNode",label:"Merge Objects",category:"Data Processing",component:function(e){var t,n=e.id,r=e.selected,o=e.type,i=O4(function(e){var t;return{data:null===(t=e.nodes.find(function(e){return e.id===n}))||void 0===t?void 0:t.data,updateNodeData:e.updateNodeData}},Pc),a=i.data,s=i.updateNodeData,l=$E.nodeDefinitionMap.get(o),u=null!==(t=null==a?void 0:a.inputCount)&&void 0!==t?t:2;if(!a)return null;var c=function(e){s(n,{inputCount:Math.max(1,e)})};return(0,E.jsxs)(JE,{id:n,title:"Merge Objects",selected:r,children:[(0,E.jsx)(f$,{nodeId:n,definition:l,type:"input"}),(0,E.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"10px"},children:[(0,E.jsx)(C,{onClick:function(){return c(u+1)},children:"+"}),(0,E.jsx)(C,{onClick:function(){return c(u-1)},disabled:u<=1,children:"-"})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:n,definition:l,type:"output"})})]})},dataSchema:LK,currentVersion:1,initialData:{inputCount:2},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.OBJECT}]},execute:FK,getDynamicHandleId:function(e){return"".concat(ZK).concat(e)},isDynamicHandle:function(e){var t;return null!==(t=null==e?void 0:e.startsWith(ZK))&&void 0!==t&&t},getDynamicHandles:function(e,t,n){for(var r=[],o=0;o<e.data.inputCount;o++)r.push({id:"".concat(ZK).concat(o),type:mE.OBJECT});for(var i=j_({}),a=function(){var r="".concat(ZK).concat(s),o=n.find(function(t){return t.target===e.id&&t.targetHandle===r});if(!o)return 0;var a=t.find(function(e){return e.id===o.source});if(!a)return 0;var l=RE(a,o.sourceHandle||null,"output",t,n);(null==l?void 0:l.schema)instanceof C_&&(i=i.merge(l.schema))},s=0;s<e.data.inputCount;s++)a();return{inputs:r,outputs:[{id:"result",type:mE.OBJECT,schema:i}]}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection;return"input"===n&&null!=t&&t.startsWith(ZK)||"output"===n&&"result"===t?mE.OBJECT:void 0}};$E.register(UK);function VK(e){return VK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VK(e)}function GK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return BK(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(BK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,BK(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,BK(d,"constructor",u),BK(u,"constructor",l),l.displayName="GeneratorFunction",BK(u,o,"GeneratorFunction"),BK(d),BK(d,o,"Generator"),BK(d,r,function(){return this}),BK(d,"toString",function(){return"[object Generator]"}),(GK=function(){return{w:i,m:f}})()}function BK(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}BK=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){BK(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},BK(e,t,n,r)}function XK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function YK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XK(Object(n),!0).forEach(function(t){WK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WK(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=VK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VK(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qK(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var HK=j_({buttonText:tk().min(1,"Button text cannot be empty").default("Run Flow"),icon:tk().default("fa-solid fa-play"),_version:Hk().optional()}),KK=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){qK(i,r,o,a,s,"next",e)}function s(e){qK(i,r,o,a,s,"throw",e)}a(void 0)})}}(GK().m(function e(t,n){return GK().w(function(e){for(;;)if(0===e.n)return e.a(2,YK({},n))},e)}));return function(t,n){return e.apply(this,arguments)}}(),JK="flowchart-message-toolbar-button",eJ={type:"messageToolbarTriggerNode",label:"Message Toolbar Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r);return o&&a?(0,E.jsxs)(JE,{id:t,title:"Message Toolbar Trigger",selected:n,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Button Tooltip Text"}),(0,E.jsx)(j,{className:"nodrag",type:"text",value:o.buttonText,onChange:function(e){return i(t,{buttonText:e.target.value})}})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Font Awesome Icon"}),(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,E.jsx)(j,{className:"nodrag",type:"text",value:o.icon,onChange:function(e){return i(t,{icon:e.target.value})},style:{flex:1}}),(0,E.jsx)("div",{style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--SmartThemeBorderColor)",borderRadius:"4px",flexShrink:0},children:(0,E.jsx)("i",{className:o.icon,style:{fontSize:"16px"}},o.icon)})]}),(0,E.jsxs)("p",{style:{fontSize:"11px",color:"#ccc",margin:"4px 0 0 0"},children:["Find icons on"," ",(0,E.jsx)("a",{href:"https://fontawesome.com/v6/search?f=classic&s=solid&ic=free&o=r",target:"_blank",rel:"noopener noreferrer",children:"Font Awesome"}),". Use the full class name, e.g., `fa-solid fa-rocket`."]})]})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:HK,currentVersion:1,initialData:{buttonText:"Run Flow",icon:"fa-solid fa-play"},handles:{inputs:[],outputs:[{id:"main",type:mE.ANY},{id:"messageId",type:mE.NUMBER},{id:"messageContent",type:mE.STRING},{id:"messageObject",type:mE.OBJECT,schema:yT}]},execute:KK,register:function(e,t){var n=document.querySelector("#message_template .mes_buttons .extraMesButtons");if(n){var r=t.data,o=document.createElement("div");o.className="mes_button ".concat(JK," ").concat(r.icon," interactable"),o.title=r.buttonText,o.tabIndex=0,o.dataset.flowId=e,o.dataset.nodeId=t.id,n.prepend(o)}},unregisterAll:function(){document.querySelectorAll("#message_template .".concat(JK)).forEach(function(e){return e.remove()})}};$E.register(eJ);function tJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return nJ(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(nJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,nJ(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,nJ(d,"constructor",u),nJ(u,"constructor",l),l.displayName="GeneratorFunction",nJ(u,o,"GeneratorFunction"),nJ(d),nJ(d,o,"Generator"),nJ(d,r,function(){return this}),nJ(d,"toString",function(){return"[object Generator]"}),(tJ=function(){return{w:i,m:f}})()}function nJ(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}nJ=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){nJ(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},nJ(e,t,n,r)}function rJ(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var oJ=j_({text:tk().default(""),_version:Hk().optional()}),iJ=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){rJ(i,r,o,a,s,"next",e)}function s(e){rJ(i,r,o,a,s,"throw",e)}a(void 0)})}}(tJ().m(function e(){return tJ().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}));return function(){return e.apply(this,arguments)}}(),aJ={type:"noteNode",label:"Note",category:"Utility",component:function(e){var t=e.id,n=e.selected,r=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=O4(function(e){return e.updateNodeData});if(!r)return null;return(0,E.jsx)(JE,{id:t,title:"Note",selected:n,contentGrows:!0,minWidth:60,children:(0,E.jsx)(A,{className:"nodrag nowheel",value:r.text,onChange:function(e){o(t,{text:e.target.value})},style:{width:"100%",height:"100%",border:"none",background:"transparent",resize:"none",position:"absolute",top:0,left:0}})})},dataSchema:oJ,currentVersion:1,initialData:{text:""},handles:{inputs:[],outputs:[]},execute:iJ,isVisual:!0};function sJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return lJ(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(lJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,lJ(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,lJ(d,"constructor",u),lJ(u,"constructor",l),l.displayName="GeneratorFunction",lJ(u,o,"GeneratorFunction"),lJ(d),lJ(d,o,"Generator"),lJ(d,r,function(){return this}),lJ(d,"toString",function(){return"[object Generator]"}),(sJ=function(){return{w:i,m:f}})()}function lJ(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lJ=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){lJ(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},lJ(e,t,n,r)}function uJ(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(aJ);var cJ=q_(["info","success","error","warning"]),dJ=j_({message:tk().optional(),notificationType:cJ.default("info"),_version:Hk().optional()}),fJ=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){uJ(i,r,o,a,s,"next",e)}function s(e){uJ(i,r,o,a,s,"throw",e)}a(void 0)})}}(sJ().m(function e(t,n){var r,o,i,a;return sJ().w(function(e){for(;;)switch(e.n){case 0:r=dJ.parse(t.data),o=jE(n,r,"message"),i=jE(n,r,"notificationType"),o&&((a=cJ.safeParse(i)).success||Hr("error","Invalid notification type: ".concat(i,". Defaulting to 'info'."),"ui_action"),er(a.data||"info",String(o)));case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),hJ={type:"notificationNode",label:"Notification",category:"User Interaction",component:h$,dataSchema:dJ,currentVersion:1,initialData:{message:"Hello!",notificationType:"info"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"message",type:mE.STRING},{id:"notificationType",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:j$(T$("message","Message is required.")),execute:fJ,meta:{fields:[{id:"message",label:"Message",component:A,props:{rows:3}},{id:"notificationType",label:"Type",component:N,options:[{value:"info",label:"Info"},{value:"success",label:"Success"},{value:"warning",label:"Warning"},{value:"error",label:"Error"}]}]}};function pJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return mJ(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(mJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,mJ(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,mJ(d,"constructor",u),mJ(u,"constructor",l),l.displayName="GeneratorFunction",mJ(u,o,"GeneratorFunction"),mJ(d),mJ(d,o,"Generator"),mJ(d,r,function(){return this}),mJ(d,"toString",function(){return"[object Generator]"}),(pJ=function(){return{w:i,m:f}})()}function mJ(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}mJ=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){mJ(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},mJ(e,t,n,r)}function gJ(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(hJ);var vJ=j_({value:Hk(),_version:Hk().optional()}),yJ=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){gJ(i,r,o,a,s,"next",e)}function s(e){gJ(i,r,o,a,s,"throw",e)}a(void 0)})}}(pJ().m(function e(t,n){var r,o;return pJ().w(function(e){for(;;)if(0===e.n)return r=vJ.parse(t.data),o=jE(n,r,"value"),e.a(2,{value:Number(o)})},e)}));return function(t,n){return e.apply(this,arguments)}}(),bJ={type:"numberNode",label:"Number",category:"Input",component:h$,dataSchema:vJ,currentVersion:1,initialData:{value:123},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.NUMBER}]},execute:yJ,meta:{fields:[{id:"value",label:"Value",component:j,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?0:Number(e.target.value)}}]}};function OJ(e){return OJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OJ(e)}function wJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return SJ(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(SJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,SJ(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,SJ(d,"constructor",u),SJ(u,"constructor",l),l.displayName="GeneratorFunction",SJ(u,o,"GeneratorFunction"),SJ(d),SJ(d,o,"Generator"),SJ(d,r,function(){return this}),SJ(d,"toString",function(){return"[object Generator]"}),(wJ=function(){return{w:i,m:f}})()}function SJ(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}SJ=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){SJ(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},SJ(e,t,n,r)}function xJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xJ(Object(n),!0).forEach(function(t){_J(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=OJ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OJ(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PJ(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(bJ);var EJ=j_({_version:Hk().optional()}),$J=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){PJ(i,r,o,a,s,"next",e)}function s(e){PJ(i,r,o,a,s,"throw",e)}a(void 0)})}}(wJ().m(function e(t,n){return wJ().w(function(e){for(;;)if(0===e.n)return e.a(2,kJ({},n))},e)}));return function(t,n){return e.apply(this,arguments)}}(),TJ={type:"onStreamTriggerNode",label:"On Stream Trigger",category:"Trigger",component:$$,dataSchema:EJ,currentVersion:1,initialData:{},handles:{inputs:[],outputs:[{id:"chunk",type:mE.STRING,label:"Chunk"},{id:"fullText",type:mE.STRING,label:"Full Text"}]},execute:$J,meta:{description:"Starts a flow for each token from an LLM stream."}};function CJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jJ(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}$E.register(TJ);var NJ=[{value:"character",label:"Character"},{value:"lorebook",label:"Lorebook"},{value:"flow",label:"Flow"},{value:"prompt",label:"Prompt Template"},{value:"regexScript",label:"Regex Script"},{value:"mathOperation",label:"Math Operation"},{value:"stringOperation",label:"String Operation"},{value:"promptMode",label:"Prompt Mode"},{value:"randomMode",label:"Random Mode"},{value:"regexMode",label:"Regex Mode"},{value:"converterTarget",label:"Conversion Type"}],AJ={mathOperation:[{value:"add",label:"Add"},{value:"subtract",label:"Subtract"},{value:"multiply",label:"Multiply"},{value:"divide",label:"Divide"},{value:"modulo",label:"Modulo"}],stringOperation:["merge","split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"].map(function(e){return{value:e,label:e}}),promptMode:Object.values(Nr).map(function(e){return{value:e,label:e}}),randomMode:[{value:"number",label:"Number"},{value:"array",label:"From Array"}],regexMode:[{value:"sillytavern",label:"SillyTavern"},{value:"custom",label:"Custom"}],converterTarget:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object (from JSON)"},{value:"array",label:"Array (from JSON)"}]};function IJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return MJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MJ(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function DJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return RJ(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(RJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,RJ(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,RJ(d,"constructor",u),RJ(u,"constructor",l),l.displayName="GeneratorFunction",RJ(u,o,"GeneratorFunction"),RJ(d),RJ(d,o,"Generator"),RJ(d,r,function(){return this}),RJ(d,"toString",function(){return"[object Generator]"}),(DJ=function(){return{w:i,m:f}})()}function RJ(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}RJ=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){RJ(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},RJ(e,t,n,r)}function QJ(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var zJ=j_({pickerType:q_(["character","lorebook","prompt","regexScript","mathOperation","stringOperation","promptMode","randomMode","regexMode","converterTarget","flow"]).default("character"),value:tk().default(""),_version:Hk().optional()}),LJ=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){QJ(i,r,o,a,s,"next",e)}function s(e){QJ(i,r,o,a,s,"throw",e)}a(void 0)})}}(DJ().m(function e(t,n,r){var o,i,a,s,l,u,c,d;return DJ().w(function(e){for(;;)switch(e.n){case 0:o=r.dependencies,i=zJ.parse(t.data),a=i.pickerType,s=i.value,d=a,e.n="character"===d?1:"mathOperation"===d||"stringOperation"===d||"promptMode"===d||"randomMode"===d||"regexMode"===d||"converterTarget"===d||"lorebook"===d||"prompt"===d||"regexScript"===d||"flow"===d?2:3;break;case 1:return l=o.getSillyTavernContext(),u=l.characters,c=void 0!==Q.this_chid&&u[Q.this_chid]?u[Q.this_chid].avatar:void 0,e.a(2,{value:s,activeAvatar:c});case 2:case 3:return e.a(2,{value:s});case 4:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),ZJ={character:{label:"Pick Character",outputHandle:{id:"value",label:"Avatar",type:mE.CHARACTER_AVATAR}},lorebook:{label:"Pick Lorebook",outputHandle:{id:"value",label:"Name",type:mE.LOREBOOK_NAME}},prompt:{label:"Pick Prompt",outputHandle:{id:"value",label:"Name"}},regexScript:{label:"Pick Regex Script",outputHandle:{id:"value",label:"ID",type:mE.REGEX_SCRIPT_ID}},mathOperation:{label:"Pick Math Operation",outputHandle:{id:"value",label:"Operation"}},stringOperation:{label:"Pick String Operation",outputHandle:{id:"value",label:"Operation"}},promptMode:{label:"Pick Prompt Mode",outputHandle:{id:"value",label:"Mode"}},randomMode:{label:"Pick Random Mode",outputHandle:{id:"value",label:"Mode"}},regexMode:{label:"Pick Regex Mode",outputHandle:{id:"value",label:"Mode"}},converterTarget:{label:"Pick Conversion Type",outputHandle:{id:"value",label:"Type"}},flow:{label:"Pick Flow",outputHandle:{id:"value",label:"Flow ID",type:mE.FLOW_ID}}},FJ=T$("value","A selection is required."),UJ="character",VJ={type:"pickerNode",label:"Picker",category:"Picker",component:function(e){var t=e.id,n=e.selected,r=(e.type,O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data})),o=O4(function(e){return e.updateNodeData}),i=SillyTavern.getContext().characters,a=CJ((0,$.useState)([]),2),s=a[0],l=a[1];(0,$.useEffect)(function(){var e;l(null!==(e=SillyTavern.getContext().extensionSettings.regex)&&void 0!==e?e:[])},[]);var u=(0,$.useMemo)(function(){var e=Gr.getSettings();return{character:i.map(function(e){return{value:e.avatar,label:e.name}}),lorebook:z.world_names.map(function(e){return{value:e,label:e}}),prompt:Object.keys(e.prompts).map(function(e){return{value:e,label:e}}),flow:Object.values(e.flows).map(function(e){return{value:e.id,label:e.name}}),regexScript:s.map(function(e){return{value:e.id,label:e.scriptName}})}},[i,s]);if(!r)return null;var c=r.pickerType,d=r.value,f=function(e){o(t,{value:e})};return(0,E.jsxs)(JE,{id:t,title:"Picker",selected:n,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.jsx)(N,{className:"nodrag",value:c,onChange:function(e){return n=e.target.value,void o(t,{pickerType:n,value:""});var n},children:NJ.map(function(e){return(0,E.jsx)("option",{value:e.value,children:e.label},e.value)})}),function(){var e;if(AJ[c])return(0,E.jsxs)(N,{className:"nodrag",value:d,onChange:function(e){return f(e.target.value)},children:[(0,E.jsx)("option",{value:"",disabled:!0,children:"-- Select an option --"}),AJ[c].map(function(e){return(0,E.jsx)("option",{value:e.value,children:e.label},e.value)})]});var t=null!==(e=u[c])&&void 0!==e?e:[];return(0,E.jsx)(Kn,{value:[null!=d?d:""],onChange:function(e){return f(e[0])},multiple:!1,items:t,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0})}()]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:VJ,type:"output"})})]})},dataSchema:zJ,currentVersion:1,initialData:{pickerType:UJ,value:""},handles:{inputs:[{id:"main",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY}]},validate:function(e,t){return"character"===e.data.pickerType&&t.some(function(e){return"activeAvatar"===e.sourceHandle})?[]:j$(FJ)(e,t)},execute:LJ,getDynamicHandles:function(e){var t,n=e.data.pickerType,r=ZJ[n],o=[];return o.push({id:r.outputHandle.id,label:r.outputHandle.label,type:null!==(t=r.outputHandle.type)&&void 0!==t?t:mE.STRING,schema:r.outputHandle.schema}),"character"===n&&o.push({id:"activeAvatar",type:mE.CHARACTER_AVATAR,label:"Active Avatar"}),{inputs:[],outputs:o}},getSuggestionBlueprints:function(e){return"outputs"!==e.direction?[]:Object.entries(ZJ).filter(function(e){return IJ(e,1)[0]!==UJ}).map(function(e){var t=IJ(e,2),n=t[0],r=n,o=t[1].label.replace(/^Pick\s+/i,"");return{id:"picker-".concat(n),labelSuffix:"(".concat(o,")"),dataOverrides:{pickerType:r,value:""}}})}};function GJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return BJ(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(BJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,BJ(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,BJ(d,"constructor",u),BJ(u,"constructor",l),l.displayName="GeneratorFunction",BJ(u,o,"GeneratorFunction"),BJ(d),BJ(d,o,"Generator"),BJ(d,r,function(){return this}),BJ(d,"toString",function(){return"[object Generator]"}),(GJ=function(){return{w:i,m:f}})()}function BJ(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}BJ=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){BJ(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},BJ(e,t,n,r)}function XJ(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(VJ);var YJ=j_({profileId:tk().default(""),_version:Hk().optional()}),WJ=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){XJ(i,r,o,a,s,"next",e)}function s(e){XJ(i,r,o,a,s,"throw",e)}a(void 0)})}}(GJ().m(function e(t,n){var r,o;return GJ().w(function(e){for(;;)switch(e.n){case 0:if(r=YJ.parse(t.data),null==(o=jE(n,r,"profileId"))||""===String(o).trim()){e.n=1;break}return e.a(2,{profileId:String(o)});case 1:return e.a(2,{profileId:r.profileId})}},e)}));return function(t,n){return e.apply(this,arguments)}}(),qJ={type:"profileIdNode",label:"Profile ID",category:"Input",component:h$,dataSchema:YJ,currentVersion:1,initialData:{profileId:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"profileId",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"profileId",type:mE.PROFILE_ID}]},execute:WJ,meta:{fields:function(e){return[{id:"profileId",label:"Connection Profile",component:te,props:{initialSelectedProfileId:null==e?void 0:e.profileId},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{profileId:(null==e?void 0:e.id)||""})}}]}}};function HJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return KJ(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(KJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,KJ(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,KJ(d,"constructor",u),KJ(u,"constructor",l),l.displayName="GeneratorFunction",KJ(u,o,"GeneratorFunction"),KJ(d),KJ(d,o,"Generator"),KJ(d,r,function(){return this}),KJ(d,"toString",function(){return"[object Generator]"}),(HJ=function(){return{w:i,m:f}})()}function KJ(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}KJ=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){KJ(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},KJ(e,t,n,r)}function JJ(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(qJ);var e0=j_({message:tk().optional(),defaultValue:tk().optional(),_version:Hk().optional()}),t0=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){JJ(i,r,o,a,s,"next",e)}function s(e){JJ(i,r,o,a,s,"throw",e)}a(void 0)})}}(HJ().m(function e(t,n,r){var o,i,a,s,l;return HJ().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=e0.parse(t.data),a=jE(n,i,"message"),s=jE(n,i,"defaultValue"),a){e.n=1;break}throw new Error("Prompt message is required.");case 1:return e.n=2,o.promptUser(a,s);case 2:return l=e.v,e.a(2,{result:l})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n0={type:"promptUserNode",label:"Prompt User",category:"User Interaction",component:h$,dataSchema:e0,currentVersion:1,initialData:{message:"Please enter a value:"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"message",type:mE.STRING},{id:"defaultValue",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.STRING}]},validate:j$(T$("message","Message is required.")),execute:t0,meta:{fields:[{id:"message",label:"Prompt Message",component:A,props:{rows:3}},{id:"defaultValue",label:"Default Value (Optional)",component:j,props:{type:"text"}}]}};$E.register(n0);function r0(e){return r0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r0(e)}function o0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return i0(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(i0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,i0(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,i0(d,"constructor",u),i0(u,"constructor",l),l.displayName="GeneratorFunction",i0(u,o,"GeneratorFunction"),i0(d),i0(d,o,"Generator"),i0(d,r,function(){return this}),i0(d,"toString",function(){return"[object Generator]"}),(o0=function(){return{w:i,m:f}})()}function i0(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i0=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){i0(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},i0(e,t,n,r)}function a0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a0(Object(n),!0).forEach(function(t){l0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l0(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=r0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r0(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u0(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function c0(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d0(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d0(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function d0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f0=j_({buttonText:tk().min(1,"Button text is required").default("Run Flow"),icon:tk().default("fa-solid fa-bolt").describe("Optional Font Awesome icon class, e.g., fa-solid fa-play"),group:tk().min(1,"Group name is required").default("default"),order:Hk().default(0),_version:Hk().optional()}),h0=[];function p0(){document.querySelectorAll("#qr--bar .flowchart-qr-group, #qr--popout .flowchart-qr-group").forEach(function(e){return e.remove()})}function m0(){var e;p0();var t=null!==(e=document.querySelector("#qr--popout .qr--body"))&&void 0!==e?e:document.querySelector("#qr--bar");if(t){var n,r={},o=c0(h0);try{for(o.s();!(n=o.n()).done;){var i=n.value;r[i.group]||(r[i.group]=[]),r[i.group].push(i)}}catch(e){o.e(e)}finally{o.f()}if(0!==Object.keys(r).length){var a,s=Gr.getSettings().qrGroupOrder||[],l=Object.keys(r).sort(function(e,t){var n=s.indexOf(e),r=s.indexOf(t);return-1!==n&&-1!==r?n-r:-1!==n?-1:-1!==r?1:e.localeCompare(t)}),u=c0(l);try{for(u.s();!(a=u.n()).done;){var c=r[a.value];c.sort(function(e,t){return e.order-t.order});var d=document.createElement("div");d.className="qr--buttons qr--color qr--borderColor flowchart-qr-group";var f,h=c0(c);try{for(h.s();!(f=h.n()).done;){var p=f.value,m=document.createElement("div");m.className="qr--button menu_button interactable flowchart-qr-button",m.title=p.buttonText,m.dataset.flowId=p.flowId,m.dataset.nodeId=p.nodeId;var g=p.icon?'<i class="'.concat(p.icon,'"></i>'):"";m.innerHTML='<div class="qr--button-label">'.concat(g," ").concat(p.buttonText,"</div>"),d.appendChild(m)}}catch(e){h.e(e)}finally{h.f()}t.appendChild(d)}}catch(e){u.e(e)}finally{u.f()}}}}var g0=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u0(i,r,o,a,s,"next",e)}function s(e){u0(i,r,o,a,s,"throw",e)}a(void 0)})}}(o0().m(function e(t,n){return o0().w(function(e){for(;;)if(0===e.n)return e.a(2,s0({},n))},e)}));return function(t,n){return e.apply(this,arguments)}}(),v0={type:"quickReplyTriggerNode",label:"QR Button Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r);return o&&a?(0,E.jsxs)(JE,{id:t,title:"QR Button Trigger",selected:n,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Button Text"}),(0,E.jsx)(j,{className:"nodrag",value:o.buttonText,onChange:function(e){return i(t,{buttonText:e.target.value})}})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Font Awesome Icon"}),(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,E.jsx)(j,{className:"nodrag",value:o.icon,onChange:function(e){return i(t,{icon:e.target.value})},style:{flex:1}}),(0,E.jsx)("div",{style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--SmartThemeBorderColor)",borderRadius:"4px",flexShrink:0},children:(0,E.jsx)("i",{className:o.icon,style:{fontSize:"16px"}},o.icon)})]}),(0,E.jsxs)("p",{style:{fontSize:"11px",color:"#ccc",margin:"4px 0 0 0"},children:["Find icons on"," ",(0,E.jsx)("a",{href:"https://fontawesome.com/v6/search?f=classic&s=solid&ic=free&o=r",target:"_blank",rel:"noopener noreferrer",children:"Font Awesome"}),". Use the full class name."]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Group Name"}),(0,E.jsx)(j,{className:"nodrag",value:o.group,onChange:function(e){return i(t,{group:e.target.value})}})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Order (within group)"}),(0,E.jsx)(j,{className:"nodrag",type:"number",value:o.order,onChange:function(e){return i(t,{order:Number(e.target.value)})}})]})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:f0,currentVersion:1,initialData:{buttonText:"My Action",icon:"fa-solid fa-bolt",group:"default",order:0},handles:{inputs:[],outputs:[{id:"main",type:mE.ANY}]},execute:g0,register:function(e,t){h0.push(s0(s0({},t.data),{},{flowId:e,nodeId:t.id}))},unregisterAll:function(){h0=[],p0()}};function y0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return b0(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(b0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,b0(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,b0(d,"constructor",u),b0(u,"constructor",l),l.displayName="GeneratorFunction",b0(u,o,"GeneratorFunction"),b0(d),b0(d,o,"Generator"),b0(d,r,function(){return this}),b0(d,"toString",function(){return"[object Generator]"}),(y0=function(){return{w:i,m:f}})()}function b0(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}b0=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){b0(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},b0(e,t,n,r)}function O0(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(v0);var w0=j_({mode:q_(["number","array"]).optional(),min:Hk().optional(),max:Hk().optional(),_version:Hk().optional()}),S0=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){O0(i,r,o,a,s,"next",e)}function s(e){O0(i,r,o,a,s,"throw",e)}a(void 0)})}}(y0().m(function e(t,n){var r,o,i,a,s,l,u,c,d;return y0().w(function(e){for(;;)switch(e.n){case 0:if(o=w0.parse(t.data),"number"!==(i=null!==(r=jE(n,o,"mode"))&&void 0!==r?r:"number")){e.n=1;break}return l=null!==(a=jE(n,o,"min"))&&void 0!==a?a:0,u=null!==(s=jE(n,o,"max"))&&void 0!==s?s:100,e.a(2,{result:Math.floor(Math.random()*(u-l+1))+l});case 1:if("array"!==i){e.n=3;break}if(c=n.array,Array.isArray(c)&&0!==c.length){e.n=2;break}throw new Error("Input is not a non-empty array.");case 2:return d=Math.floor(Math.random()*c.length),e.a(2,{result:c[d]});case 3:throw new Error("Unknown random mode: ".concat(i));case 4:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),x0={type:"randomNode",label:"Random",category:"Math & Logic",component:h$,dataSchema:w0,currentVersion:1,initialData:{mode:"number",min:0,max:100},handles:{inputs:[{id:"main",type:mE.ANY},{id:"mode",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:function(e,t){var n=[];"array"===e.data.mode&&(t.some(function(t){return t.target===e.id&&"array"===t.targetHandle})||n.push({message:'The "array" input must be connected in "From Array" mode.',severity:"error"}));return n},execute:S0,getDynamicHandles:function(e){var t=e.data,n=[],r=[];return"number"===t.mode?(n.push({id:"min",type:mE.NUMBER}),n.push({id:"max",type:mE.NUMBER}),r.push({id:"result",type:mE.NUMBER})):"array"===t.mode?(n.push({id:"array",type:mE.ARRAY}),r.push({id:"result",type:mE.ANY})):r.push({id:"result",type:mE.ANY}),{inputs:n,outputs:r}},getSuggestionBlueprints:function(e){var t=e.direction;return"inputs"!==t&&"outputs"!==t?[]:[{id:"mode-array",labelSuffix:"(Array Mode)",dataOverrides:{mode:"array"}}]},meta:{fields:function(e){var t,n=null!==(t=null==e?void 0:e.mode)&&void 0!==t?t:"number",r=[{id:"mode",label:"Mode",component:N,options:[{value:"number",label:"Number"},{value:"array",label:"From Array"}]}];return"number"===n&&r.push({id:"min",label:"Min",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"max",label:"Max",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}),r}}};function k0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return _0(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(_0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,_0(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,_0(d,"constructor",u),_0(u,"constructor",l),l.displayName="GeneratorFunction",_0(u,o,"GeneratorFunction"),_0(d),_0(d,o,"Generator"),_0(d,r,function(){return this}),_0(d,"toString",function(){return"[object Generator]"}),(k0=function(){return{w:i,m:f}})()}function _0(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_0=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){_0(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},_0(e,t,n,r)}function P0(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function E0(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){P0(i,r,o,a,s,"next",e)}function s(e){P0(i,r,o,a,s,"throw",e)}a(void 0)})}}$E.register(x0);var $0=j_({mode:q_(["sillytavern","custom"]).default("sillytavern"),scriptId:tk().default(""),findRegex:tk().default(""),replaceString:tk().default(""),_version:Hk().optional()}),T0=function(){var e=E0(k0().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O,w;return k0().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=r.dependencies,s=$0.parse(t.data),l=null!==(o=jE(n,s,"mode"))&&void 0!==o?o:"sillytavern",u=jE(n,s,"scriptId"),c=jE(n,s,"findRegex"),d=jE(n,s,"replaceString"),"string"==typeof(f=null!==(i=n.string)&&void 0!==i?i:"")){e.n=1;break}throw new Error("Input must be a string.");case 1:if(h=f,p=null,"sillytavern"!==l){e.n=4;break}if(u){e.n=2;break}throw new Error("SillyTavern Regex ID is not provided.");case 2:if(v=a.getSillyTavernContext(),y=v.extensionSettings,b=(null!==(g=y.regex)&&void 0!==g?g:[]).find(function(e){return e.id===u})){e.n=3;break}throw new Error('Regex with ID "'.concat(u,'" not found.'));case 3:h=a.st_runRegexScript(b,f),m=b.findRegex,e.n=7;break;case 4:if(void 0!==c){e.n=5;break}throw new Error("Find Regex is required for custom mode.");case 5:e.p=5,O=new RegExp(c,"g"),h=f.replace(O,null!=d?d:""),m=c,e.n=7;break;case 6:throw e.p=6,w=e.v,new Error("Invalid custom regex: ".concat(w.message));case 7:if(m)try{p=f.match(new RegExp(m,"g"))}catch(e){}return e.a(2,{result:h,matches:null!=p?p:[]})}},e,null,[[5,6]])}));return function(t,n,r){return e.apply(this,arguments)}}(),C0={type:"regexNode",label:"Regex",category:"Data Processing",component:wT,dataSchema:$0,currentVersion:1,initialData:{mode:"sillytavern",findRegex:"",replaceString:"",scriptId:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"string",type:mE.STRING},{id:"mode",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.STRING},{id:"matches",type:mE.ARRAY,schema:$_(tk())}]},getDynamicHandles:function(e){var t,n=e.data,r=[];return"sillytavern"===(null!==(t=null==n?void 0:n.mode)&&void 0!==t?t:"sillytavern")?r.push({id:"scriptId",type:mE.REGEX_SCRIPT_ID}):(r.push({id:"findRegex",type:mE.STRING}),r.push({id:"replaceString",type:mE.STRING})),{inputs:r,outputs:[]}},validate:function(e,t){var n=[],r=e.data,o=r.mode;if("sillytavern"===o){var i=t.some(function(t){return t.target===e.id&&"scriptId"===t.targetHandle});r.scriptId||i||n.push({fieldId:"scriptId",message:"Regex Script is required in SillyTavern mode.",severity:"error"})}else if("custom"===o){var a=t.some(function(t){return t.target===e.id&&"findRegex"===t.targetHandle});if(r.findRegex||a||n.push({fieldId:"findRegex",message:"Find Regex is required in custom mode.",severity:"error"}),r.findRegex&&!a)try{new RegExp(r.findRegex)}catch(e){var s=e;n.push({fieldId:"findRegex",message:"Invalid Regex: ".concat(s.message),severity:"error"})}}return n},execute:T0,getSuggestionBlueprints:function(e){return"inputs"!==e.direction?[]:[{id:"mode-custom",labelSuffix:"(Custom Mode)",dataOverrides:{mode:"custom"}}]},meta:{fields:function(){var e=E0(k0().m(function e(t){var n,r,o,i,a,s,l;return k0().w(function(e){for(;;)if(0===e.n)return o=null!==(n=null==t?void 0:t.mode)&&void 0!==n?n:"sillytavern",i=[p$({id:"string",label:"Input String",component:A,props:{rows:3}}),p$({id:"mode",label:"Mode",component:N,options:[{value:"sillytavern",label:"SillyTavern"},{value:"custom",label:"Custom"}]})],a=null!==(r=SillyTavern.getContext().extensionSettings.regex)&&void 0!==r?r:[],s=a.map(function(e){return{value:e.id,label:e.scriptName}}),l="sillytavern"===o?[p$({id:"scriptId",label:"Regex Script",component:Kn,props:{items:s,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}})]:[p$({id:"findRegex",label:"Find (Regex)",component:A,props:{rows:2}}),p$({id:"replaceString",label:"Replace",component:A,props:{rows:2}})],e.a(2,[].concat(i,l))},e)}));return function(t){return e.apply(this,arguments)}}()}};function j0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return N0(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(N0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,N0(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,N0(d,"constructor",u),N0(u,"constructor",l),l.displayName="GeneratorFunction",N0(u,o,"GeneratorFunction"),N0(d),N0(d,o,"Generator"),N0(d,r,function(){return this}),N0(d,"toString",function(){return"[object Generator]"}),(j0=function(){return{w:i,m:f}})()}function N0(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}N0=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){N0(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},N0(e,t,n,r)}function A0(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(C0);var I0=j_({messageId:Hk().optional(),_version:Hk().optional()}),M0=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){A0(i,r,o,a,s,"next",e)}function s(e){A0(i,r,o,a,s,"throw",e)}a(void 0)})}}(j0().m(function e(t,n,r){var o,i,a;return j0().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=I0.parse(t.data),void 0!==(a=jE(n,i,"messageId"))){e.n=1;break}throw new Error("Message ID is required.");case 1:return e.n=2,o.deleteMessage(a);case 2:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),D0={type:"removeChatMessageNode",label:"Remove Chat Message",category:"Chat",component:h$,dataSchema:I0,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:mE.ANY},{id:"messageId",type:mE.NUMBER}],outputs:[{id:"main",type:mE.ANY}]},validate:j$(T$("messageId","Message ID is required.")),execute:M0,meta:{fields:[{id:"messageId",label:"Message ID",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}]}};function R0(e){return function(e){if(Array.isArray(e))return Q0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Q0(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q0(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function z0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return L0(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(L0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,L0(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,L0(d,"constructor",u),L0(u,"constructor",l),l.displayName="GeneratorFunction",L0(u,o,"GeneratorFunction"),L0(d),L0(d,o,"Generator"),L0(d,r,function(){return this}),L0(d,"toString",function(){return"[object Generator]"}),(z0=function(){return{w:i,m:f}})()}function L0(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}L0=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){L0(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},L0(e,t,n,r)}function Z0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z0(Object(n),!0).forEach(function(t){U0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U0(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V0(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V0(e){return V0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V0(e)}function G0(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(D0);var B0=j_({flowId:tk().optional(),parameters:tk().default("{}"),_version:Hk().optional()}),X0=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){G0(i,r,o,a,s,"next",e)}function s(e){G0(i,r,o,a,s,"throw",e)}a(void 0)})}}(z0().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p,m;return z0().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=r.dependencies,i=r.depth,a=r.executionPath,s=r.runId,l=B0.parse(t.data),u=jE(n,l,"flowId")){e.n=1;break}throw new Error("Flow ID/Name is required.");case 1:c={},d=jE(n,l,"parameters"),e.p=2,c="object"===V0(d)?d:JSON.parse(d||"{}"),e.n=4;break;case 3:throw e.p=3,m=e.v,new Error("Invalid JSON in parameters: ".concat(m.message));case 4:return f=n.schema,e.n=5,o.executeSubFlow(u,c,i+1,a,s);case 5:if(!(h=e.v).error){e.n=6;break}throw new Error('Sub-flow "'.concat(u,'" failed: ').concat(h.error.message));case 6:if("object"!==V0(p=vY(h.lastOutput,f,"Run Flow"))||null===p){e.n=7;break}return e.a(2,F0(F0({},p),{},{result:p}));case 7:return e.a(2,{result:p})}},e,null,[[2,3]])}));return function(t,n,r){return e.apply(this,arguments)}}(),Y0={type:"runFlowNode",label:"Run Flow",category:"System",component:h$,dataSchema:B0,currentVersion:2,initialData:{flowId:"",parameters:"{}"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"flowId",type:mE.FLOW_ID},{id:"parameters",type:mE.OBJECT},{id:"schema",type:mE.SCHEMA}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.ANY}]},validate:j$(T$("flowId","Flow to Run is required.")),execute:X0,getDynamicHandles:function(e,t,n){var r=wY(e,t,n,"schema");if(!r)return{inputs:[],outputs:[]};var o={id:"result",type:ME(r),schema:r},i=QE(r);return{inputs:[],outputs:[o].concat(R0(i))}},meta:{fields:function(){var e=Gr.getSettings(),t=Object.values(e.flows).map(function(e){return{value:e.id,label:e.name}});return[{id:"flowId",label:"Flow to Run",component:Kn,props:{items:t,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag nowheel",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}},{id:"parameters",label:"Parameters (JSON)",component:DB,props:{height:"100px",extensions:[ZX({})],width:"100%",theme:"dark",style:{cursor:"text",marginTop:"5px"}},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{parameters:e})}}]}}};function W0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return q0(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(q0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,q0(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,q0(d,"constructor",u),q0(u,"constructor",l),l.displayName="GeneratorFunction",q0(u,o,"GeneratorFunction"),q0(d),q0(d,o,"Generator"),q0(d,r,function(){return this}),q0(d,"toString",function(){return"[object Generator]"}),(W0=function(){return{w:i,m:f}})()}function q0(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}q0=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){q0(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},q0(e,t,n,r)}function H0(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(Y0);var K0=j_({command:tk().default(""),_version:Hk().optional()}),J0=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){H0(i,r,o,a,s,"next",e)}function s(e){H0(i,r,o,a,s,"throw",e)}a(void 0)})}}(W0().m(function e(t,n,r){var o,i,a,s,l;return W0().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,a=K0.parse(t.data),(s=jE(n,a,"command"))&&"string"==typeof s){e.n=1;break}throw new Error("Command input must be a valid string.");case 1:return e.n=2,i.executeSlashCommandsWithOptions(s);case 2:if(!(l=e.v).isError){e.n=3;break}throw new Error("Slash command failed: ".concat(l.errorMessage));case 3:if(!l.isAborted){e.n=4;break}throw new Error("Slash command aborted: ".concat(l.abortReason));case 4:return e.a(2,{result:null!==(o=l.pipe)&&void 0!==o?o:""})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),e1={type:"runSlashCommandNode",label:"Run Slash Command",category:"System",component:h$,dataSchema:K0,currentVersion:1,initialData:{command:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"command",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"result",type:mE.STRING}]},validate:j$(T$("command","Command is required.")),execute:J0,meta:{fields:[{id:"command",label:"Command",component:A,props:{rows:3,placeholder:'/echo "Hello World"'}}]}};function t1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return n1(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(n1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,n1(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,n1(d,"constructor",u),n1(u,"constructor",l),l.displayName="GeneratorFunction",n1(u,o,"GeneratorFunction"),n1(d),n1(d,o,"Generator"),n1(d,r,function(){return this}),n1(d,"toString",function(){return"[object Generator]"}),(t1=function(){return{w:i,m:f}})()}function n1(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}n1=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){n1(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},n1(e,t,n,r)}function r1(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(e1);var o1=j_({message:tk().optional(),role:q_(["user","assistant","system"]).default("assistant"),name:tk().optional(),_version:Hk().optional()}),i1=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){r1(i,r,o,a,s,"next",e)}function s(e){r1(i,r,o,a,s,"throw",e)}a(void 0)})}}(t1().m(function e(t,n,r){var o,i,a,s,l,u;return t1().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=o1.parse(t.data),a=jE(n,i,"message")){e.n=1;break}throw new Error("Message content is required.");case 1:return s=jE(n,i,"role"),l=jE(n,i,"name"),e.n=2,o.sendChatMessage(a,s,l);case 2:return u=o.getSillyTavernContext().chat.length,e.a(2,{messageId:u-1})}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),a1={type:"sendChatMessageNode",label:"Send Chat Message",category:"Chat",component:h$,dataSchema:o1,currentVersion:1,initialData:{message:"",role:"assistant"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"message",type:mE.STRING},{id:"role",type:mE.STRING},{id:"name",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY},{id:"messageId",type:mE.NUMBER}]},validate:j$(T$("message","Message Content is required.")),execute:i1,meta:{fields:[{id:"message",label:"Message Content",component:A,props:{rows:3}},{id:"role",label:"Role",component:N,options:[{value:"assistant",label:"Assistant"},{value:"user",label:"User"},{value:"system",label:"System"}]},{id:"name",label:"Name (Optional)",component:j,props:{type:"text"}}]}};function s1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return l1(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(l1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,l1(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,l1(d,"constructor",u),l1(u,"constructor",l),l.displayName="GeneratorFunction",l1(u,o,"GeneratorFunction"),l1(d),l1(d,o,"Generator"),l1(d,r,function(){return this}),l1(d,"toString",function(){return"[object Generator]"}),(s1=function(){return{w:i,m:f}})()}function l1(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l1=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){l1(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},l1(e,t,n,r)}function u1(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(a1);var c1=j_({variableName:tk().optional(),_version:Hk().optional()}),d1=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u1(i,r,o,a,s,"next",e)}function s(e){u1(i,r,o,a,s,"throw",e)}a(void 0)})}}(s1().m(function e(t,n,r){var o,i,a,s;return s1().w(function(e){for(;;)switch(e.n){case 0:if(o=r.executionVariables,i=c1.parse(t.data),a=jE(n,i,"variableName"),s=n.value,a){e.n=1;break}throw new Error("Variable name is required.");case 1:o.set(a,s);case 2:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),f1={type:"setFlowVariableNode",label:"Set Flow Variable",category:"Variables",component:h$,dataSchema:c1,currentVersion:1,initialData:{variableName:"myVar"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY},{id:"variableName",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:j$(T$("variableName","Variable Name is required."),C$("value","A value must be connected to set.")),execute:d1,meta:{fields:[{id:"variableName",label:"Variable Name",component:j,props:{type:"text"}}]}};function h1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return p1(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(p1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,p1(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,p1(d,"constructor",u),p1(u,"constructor",l),l.displayName="GeneratorFunction",p1(u,o,"GeneratorFunction"),p1(d),p1(d,o,"Generator"),p1(d,r,function(){return this}),p1(d,"toString",function(){return"[object Generator]"}),(h1=function(){return{w:i,m:f}})()}function p1(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}p1=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){p1(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},p1(e,t,n,r)}function m1(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(f1);var g1=j_({variableName:tk().optional(),_version:Hk().optional()}),v1=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){m1(i,r,o,a,s,"next",e)}function s(e){m1(i,r,o,a,s,"throw",e)}a(void 0)})}}(h1().m(function e(t,n,r){var o,i;return h1().w(function(e){for(;;)switch(e.n){case 0:if(o=g1.parse(t.data),i=jE(n,o,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:if("value"in n){e.n=2;break}throw new Error("A value must be provided to set a global variable.");case 2:return e.n=3,r.dependencies.st_setGlobalVariable(i,n.value);case 3:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),y1={type:"setGlobalVariableNode",label:"Set Global Variable",category:"Variables",component:h$,dataSchema:g1,currentVersion:1,initialData:{variableName:"globalVar"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY},{id:"variableName",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:j$(T$("variableName","Variable Name is required."),C$("value","A value must be connected to set.")),execute:v1,meta:{fields:[{id:"variableName",label:"Variable Name",component:j,props:{type:"text"}}]}};function b1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return O1(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(O1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,O1(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,O1(d,"constructor",u),O1(u,"constructor",l),l.displayName="GeneratorFunction",O1(u,o,"GeneratorFunction"),O1(d),O1(d,o,"Generator"),O1(d,r,function(){return this}),O1(d,"toString",function(){return"[object Generator]"}),(b1=function(){return{w:i,m:f}})()}function O1(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}O1=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){O1(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},O1(e,t,n,r)}function w1(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(y1);var S1=j_({variableName:tk().optional(),_version:Hk().optional()}),x1=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){w1(i,r,o,a,s,"next",e)}function s(e){w1(i,r,o,a,s,"throw",e)}a(void 0)})}}(b1().m(function e(t,n,r){var o,i,a;return b1().w(function(e){for(;;)switch(e.n){case 0:if(o=S1.parse(t.data),i=jE(n,o,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:if("value"in n){e.n=2;break}throw new Error("A value must be provided to set a local variable.");case 2:return a=n.value,e.n=3,r.dependencies.st_setLocalVariable(i,a);case 3:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),k1={type:"setLocalVariableNode",label:"Set Local Variable",category:"Variables",component:h$,dataSchema:S1,currentVersion:1,initialData:{variableName:"chatVar"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY},{id:"variableName",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:j$(T$("variableName","Variable Name is required."),C$("value","A value must be connected to set.")),execute:x1,meta:{fields:[{id:"variableName",label:"Variable Name",component:j,props:{type:"text"}}]}};function _1(e){return _1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_1(e)}function P1(e){return function(e){if(Array.isArray(e))return E1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E1(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E1(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$1(Object(n),!0).forEach(function(t){C1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C1(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_1(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$E.register(k1);var j1=function(e){var t=e.arg,n=e.onUpdate,r=e.onRemove;return(0,E.jsxs)("div",{style:{border:"1px solid #555",padding:"8px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,E.jsx)(j,{className:"nodrag",value:t.name,onChange:function(e){return n({name:e.target.value})},placeholder:"Argument Name",style:{flex:1}}),(0,E.jsx)(C,{onClick:r,children:""})]}),(0,E.jsx)(j,{className:"nodrag",value:t.description||"",onChange:function(e){return n({description:e.target.value})},placeholder:"Description"}),(0,E.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,E.jsxs)(N,{className:"nodrag",value:t.type,onChange:function(e){return n({type:e.target.value})},children:[(0,E.jsx)("option",{value:"string",children:"String"}),(0,E.jsx)("option",{value:"number",children:"Number"}),(0,E.jsx)("option",{value:"boolean",children:"Boolean"}),(0,E.jsx)("option",{value:"list",children:"List"})]}),(0,E.jsx)(j,{label:"Is Required",type:"checkbox",checked:t.isRequired,onChange:function(e){return n({isRequired:e.target.checked})}})]})]})};function N1(e){return N1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N1(e)}function A1(e){return function(e){if(Array.isArray(e))return M1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I1(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I1(e,t){if(e){if("string"==typeof e)return M1(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M1(e,t):void 0}}function M1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return R1(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(R1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,R1(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,R1(d,"constructor",u),R1(u,"constructor",l),l.displayName="GeneratorFunction",R1(u,o,"GeneratorFunction"),R1(d),R1(d,o,"Generator"),R1(d,r,function(){return this}),R1(d,"toString",function(){return"[object Generator]"}),(D1=function(){return{w:i,m:f}})()}function R1(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}R1=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){R1(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},R1(e,t,n,r)}function Q1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q1(Object(n),!0).forEach(function(t){L1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L1(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N1(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z1(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var F1=q_(["string","number","boolean","list"]),U1=j_({id:tk(),name:tk().min(1,"Argument name cannot be empty."),description:tk().optional(),type:F1.default("string"),isRequired:i_().default(!1),defaultValue:y_().optional()}),V1=j_({commandName:tk().min(1,"Command name cannot be empty.").default("my-command"),helpText:tk().default("Executes a Flowchart flow."),arguments:$_(U1).default([]),_version:Hk().optional()}),G1=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Z1(i,r,o,a,s,"next",e)}function s(e){Z1(i,r,o,a,s,"throw",e)}a(void 0)})}}(D1().m(function e(t,n){return D1().w(function(e){for(;;)if(0===e.n)return e.a(2,z1(z1({},n),{},{allArgs:z1({},n)}))},e)}));return function(t,n){return e.apply(this,arguments)}}();function B1(e){switch(e){case"number":return mE.NUMBER;case"boolean":return mE.BOOLEAN;case"list":return mE.ARRAY;default:return mE.STRING}}var X1=new Set,Y1={type:"slashCommandNode",label:"Slash Command",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r);if(!o||!a)return null;return(0,E.jsxs)(JE,{id:t,title:"Slash Command",selected:n,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Command Name (prefix `flow-` is added automatically)"}),(0,E.jsx)(j,{className:"nodrag",value:o.commandName,onChange:function(e){return i(t,{commandName:e.target.value})}})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{children:"Help Text"}),(0,E.jsx)(A,{className:"nodrag nowheel",value:o.helpText,onChange:function(e){return i(t,{helpText:e.target.value})},rows:3})]}),(0,E.jsx)("hr",{}),(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,E.jsx)("label",{children:"Arguments"}),(0,E.jsx)(C,{onClick:function(){var e={id:WT(),name:"arg".concat(o.arguments.length+1),type:"string",isRequired:!1};i(t,{arguments:[].concat(P1(o.arguments),[e])})},children:"+ Add Argument"})]}),(0,E.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.arguments.map(function(e){return(0,E.jsx)(j1,{arg:e,onUpdate:function(n){return r=e.id,a=n,s=o.arguments.map(function(e){return e.id===r?T1(T1({},e),a):e}),void i(t,{arguments:s});var r,a,s},onRemove:function(){return n=e.id,r=o.arguments.filter(function(e){return e.id!==n}),void i(t,{arguments:r});var n,r}},e.id)})})]})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:V1,currentVersion:1,initialData:{commandName:"my-command",helpText:"Executes a Flowchart flow.",arguments:[]},handles:{inputs:[],outputs:[]},validate:function(e){var t=[],n=e.data;if(n.commandName&&""!==n.commandName.trim()){["run"].includes(n.commandName.toLowerCase())&&t.push({message:'Command name "'.concat(n.commandName,'" is reserved and cannot be used.'),severity:"error"}),/^[a-zA-Z0-9\-_]+$/.test(n.commandName)||t.push({message:"Command name can only contain letters, numbers, hyphens, and underscores.",severity:"error"})}else t.push({message:"Command Name cannot be empty.",severity:"error"});var r,o=new Set,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I1(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(n.arguments);try{for(i.s();!(r=i.n()).done;){var a=r.value;o.has(a.name)&&t.push({message:'Duplicate argument name: "'.concat(a.name,'".'),severity:"error"}),""===a.name.trim()&&t.push({message:"Argument names cannot be empty.",severity:"error"}),o.add(a.name)}}catch(e){i.e(e)}finally{i.f()}return t},execute:G1,register:function(e,t,n){var r=SillyTavern.getContext(),o=r.SlashCommandParser,i=r.SlashCommand,a=r.SlashCommandNamedArgument,s=r.ARGUMENT_TYPE,l=t.data,u="flow-".concat(l.commandName);if(["run"].includes(l.commandName.toLowerCase())||o.commands[u]||X1.has(u))console.warn('[Flowchart] Slash command "'.concat(u,'" conflicts with an existing command and was not registered.'));else{var c=l.arguments.map(function(e){return a.fromProps({name:e.name,description:e.description,typeList:[s[e.type.toUpperCase()]],isRequired:e.isRequired,defaultValue:e.defaultValue})}),d=i.fromProps({name:u,helpString:l.helpText,unnamedArgumentList:[],namedArgumentList:c,callback:function(r,o){return n.executeFlowFromSlashCommand(e,t.id,r,o)}});o.addCommandObject(d),X1.add(u)}},unregisterAll:function(){var e=SillyTavern.getContext().SlashCommandParser;X1.forEach(function(t){return delete e.commands[t]}),X1.clear()},getDynamicHandles:function(e){var t=e.data,n={},r=t.arguments.map(function(e){var t;switch(e.type){case"number":t=Hk();break;case"boolean":t=i_();break;case"list":t=$_(y_());break;default:t=tk()}return e.isRequired||(t=t.optional()),t=t.describe(e.description||"The '".concat(e.name,"' argument.")),n[e.name]=t,{id:e.name,type:B1(e.type),schema:t}}),o=tk().describe("A single string containing all text after the named arguments.");n.unnamed=o;var i=j_(n);return{inputs:[],outputs:[{id:"main",type:mE.ANY}].concat(A1(r),[{id:"allArgs",type:mE.OBJECT,schema:i},{id:"unnamed",type:mE.STRING,schema:o}])}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("output"===n&&t){if("main"===t)return mE.ANY;if("allArgs"===t)return mE.OBJECT;if("unnamed"===t)return mE.STRING;var o=r.data.arguments.find(function(e){return e.name===t});return o?B1(o.type):void 0}}};function W1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return q1(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(q1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,q1(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,q1(d,"constructor",u),q1(u,"constructor",l),l.displayName="GeneratorFunction",q1(u,o,"GeneratorFunction"),q1(d),q1(d,o,"Generator"),q1(d,r,function(){return this}),q1(d,"toString",function(){return"[object Generator]"}),(W1=function(){return{w:i,m:f}})()}function q1(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}q1=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){q1(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},q1(e,t,n,r)}function H1(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(Y1);var K1=j_({value:tk(),_version:Hk().optional()}),J1=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){H1(i,r,o,a,s,"next",e)}function s(e){H1(i,r,o,a,s,"throw",e)}a(void 0)})}}(W1().m(function e(t,n){var r,o;return W1().w(function(e){for(;;)if(0===e.n)return r=K1.parse(t.data),o=jE(n,r,"value"),e.a(2,{value:String(o)})},e)}));return function(t,n){return e.apply(this,arguments)}}(),e2={type:"stringNode",label:"String",category:"Input",component:h$,dataSchema:K1,currentVersion:1,initialData:{value:"hello"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY}],outputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.STRING}]},execute:J1,meta:{fields:[{id:"value",label:"Value",component:A,props:{rows:2}}]}};$E.register(e2);var t2=["merge","split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"];function n2(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return r2(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(r2(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,r2(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,r2(d,"constructor",u),r2(u,"constructor",l),l.displayName="GeneratorFunction",r2(u,o,"GeneratorFunction"),r2(d),r2(d,o,"Generator"),r2(d,r,function(){return this}),r2(d,"toString",function(){return"[object Generator]"}),(n2=function(){return{w:i,m:f}})()}function r2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r2=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){r2(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},r2(e,t,n,r)}function o2(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var i2=j_({operation:q_(["merge","split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"]).optional(),delimiter:tk().optional(),inputCount:Hk().min(1).optional(),searchValue:tk().optional(),replaceValue:tk().optional(),index:Hk().optional(),count:Hk().optional(),_version:Hk().optional()}),a2="string_",s2=["split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"],l2=function(e){return e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()}).trim()},u2=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){o2(i,r,o,a,s,"next",e)}function s(e){o2(i,r,o,a,s,"throw",e)}a(void 0)})}}(n2().m(function e(t,n){var r,o,i,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O,w,S,x,k,_,P,E,$,T,C,j,N;return n2().w(function(e){for(;;)switch(e.n){case 0:i=i2.parse(t.data),a=null!==(r=jE(n,i,"operation"))&&void 0!==r?r:"merge",s=$E.nodeDefinitionMap.get("stringToolsNode"),l=null!==(o=n.string)&&void 0!==o?o:"",N=a,e.n="merge"===N?1:"split"===N?2:"join"===N?4:"toUpperCase"===N?6:"toLowerCase"===N?7:"trim"===N?8:"replace"===N?9:"replaceAll"===N?10:"slice"===N?11:"length"===N?12:"startsWith"===N?13:"endsWith"===N?14:15;break;case 1:return c=null!==(u=jE(n,i,"delimiter"))&&void 0!==u?u:"",d=Object.keys(n).filter(function(e){return s.isDynamicHandle(e)}).sort(function(e,t){return parseInt(e.split("_")[1],10)-parseInt(t.split("_")[1],10)}).map(function(e){return String(n[e])}),e.a(2,{result:d.join(c)});case 2:if(h=null!==(f=jE(n,i,"delimiter"))&&void 0!==f?f:"","string"==typeof l){e.n=3;break}throw new Error("Input for split must be a string.");case 3:return e.a(2,{result:l.split(h)});case 4:if(m=null!==(p=jE(n,i,"delimiter"))&&void 0!==p?p:"",g=n.array,Array.isArray(g)){e.n=5;break}throw new Error("Input for join must be an array.");case 5:return e.a(2,{result:g.join(m)});case 6:return e.a(2,{result:String(l).toUpperCase()});case 7:return e.a(2,{result:String(l).toLowerCase()});case 8:return e.a(2,{result:String(l).trim()});case 9:return b=null!==(v=jE(n,i,"searchValue"))&&void 0!==v?v:"",O=null!==(y=jE(n,i,"replaceValue"))&&void 0!==y?y:"",e.a(2,{result:String(l).replace(b,O)});case 10:return x=null!==(w=jE(n,i,"searchValue"))&&void 0!==w?w:"",k=null!==(S=jE(n,i,"replaceValue"))&&void 0!==S?S:"",e.a(2,{result:String(l).replaceAll(x,k)});case 11:return P=null!==(_=jE(n,i,"index"))&&void 0!==_?_:0,E=jE(n,i,"count"),e.a(2,{result:String(l).slice(P,E)});case 12:return e.a(2,{result:String(l).length});case 13:return T=null!==($=jE(n,i,"searchValue"))&&void 0!==$?$:"",e.a(2,{result:String(l).startsWith(T)});case 14:return j=null!==(C=jE(n,i,"searchValue"))&&void 0!==C?C:"",e.a(2,{result:String(l).endsWith(j)});case 15:throw new Error("Unknown string operation: ".concat(a));case 16:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),c2={type:"stringToolsNode",label:"String Tools",category:"Data Processing",component:function(e){var t,n,r=e.id,o=e.selected,i=e.type,a=O4(function(e){var t;return null===(t=e.nodesMap.get(r))||void 0===t?void 0:t.data}),s=O4(function(e){return e.updateNodeData}),l=$E.nodeDefinitionMap.get(i),u=null!==(t=null==a?void 0:a.inputCount)&&void 0!==t?t:2,c=null!==(n=null==a?void 0:a.operation)&&void 0!==n?n:"merge",d=(0,$.useMemo)(function(){var e=[{id:"operation",label:"Operation",component:N,options:t2.map(function(e){return{value:e,label:e}})}];return["merge","split","join"].includes(c)&&e.push({id:"delimiter",label:"Delimiter",component:j,props:{type:"text"}}),["replace","replaceAll","startsWith","endsWith"].includes(c)&&e.push({id:"searchValue",label:"Search Value",component:j,props:{type:"text"}}),["replace","replaceAll"].includes(c)&&e.push({id:"replaceValue",label:"Replace Value",component:j,props:{type:"text"}}),"slice"===c&&e.push({id:"index",label:"Start Index",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"count",label:"End Index (optional)",component:j,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}}),e},[c]);if(!a)return null;var f=function(e){s(r,{inputCount:Math.max(1,e)})};return(0,E.jsxs)(JE,{id:r,title:"String Tools",selected:o,children:[(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,E.jsx)(f$,{nodeId:r,definition:l,type:"input",fields:d,data:a,updateNodeData:s}),"merge"===c&&(0,E.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"10px"},children:[(0,E.jsx)(C,{onClick:function(){return f(u+1)},children:"+"}),(0,E.jsx)(C,{onClick:function(){return f(u-1)},disabled:u<=1,children:"-"})]})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:r,definition:l,type:"output"})})]})},dataSchema:i2,currentVersion:1,initialData:{operation:"merge",inputCount:2,delimiter:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"operation",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:function(e,t){var n,r=[],o=e.data,i=function(n){return t.some(function(t){return t.target===e.id&&t.targetHandle===n})};switch(null!==(n=o.operation)&&void 0!==n?n:"merge"){case"merge":t.filter(function(t){var n;return t.target===e.id&&(null===(n=t.targetHandle)||void 0===n?void 0:n.startsWith(a2))}).length<2&&r.push({message:"At least two string inputs should be connected for a merge operation.",severity:"warning"});break;case"split":case"toUpperCase":case"toLowerCase":case"trim":case"length":i("string")||r.push({message:'A string must be connected to the "string" input.',severity:"error"});break;case"join":i("array")||r.push({message:'An array must be connected to the "array" input.',severity:"error"});break;case"replace":case"replaceAll":case"startsWith":case"endsWith":i("string")||r.push({message:'A string must be connected to the "string" input.',severity:"error"}),o.searchValue||i("searchValue")||r.push({fieldId:"searchValue",message:"Search Value is required.",severity:"error"});break;case"slice":i("string")||r.push({message:'A string must be connected to the "string" input.',severity:"error"}),void 0!==o.index||i("index")||r.push({fieldId:"index",message:"Start Index is required.",severity:"error"})}return r},execute:u2,getDynamicHandleId:function(e){return"".concat(a2).concat(e)},isDynamicHandle:function(e){var t;return null!==(t=null==e?void 0:e.startsWith(a2))&&void 0!==t&&t},getDynamicHandles:function(e){var t=e.data,n=[],r=mE.ANY;switch(t.operation){case"merge":for(var o=0;o<(null!==(i=t.inputCount)&&void 0!==i?i:2);o++){var i;n.push({id:"".concat(a2).concat(o),type:mE.ANY})}n.push({id:"delimiter",type:mE.STRING}),r=mE.STRING;break;case"split":n.push({id:"string",type:mE.STRING}),n.push({id:"delimiter",type:mE.STRING}),r=mE.ARRAY;break;case"join":n.push({id:"array",type:mE.ARRAY}),n.push({id:"delimiter",type:mE.STRING}),r=mE.STRING;break;case"replace":case"replaceAll":n.push({id:"string",type:mE.STRING}),n.push({id:"searchValue",type:mE.STRING}),n.push({id:"replaceValue",type:mE.STRING}),r=mE.STRING;break;case"slice":n.push({id:"string",type:mE.STRING}),n.push({id:"index",type:mE.NUMBER}),n.push({id:"count",type:mE.NUMBER}),r=mE.STRING;break;case"startsWith":case"endsWith":n.push({id:"string",type:mE.STRING}),n.push({id:"searchValue",type:mE.STRING}),r=mE.BOOLEAN;break;case"length":n.push({id:"string",type:mE.STRING}),r=mE.NUMBER;break;case"toUpperCase":case"toLowerCase":case"trim":n.push({id:"string",type:mE.STRING}),r=mE.STRING}return{inputs:n,outputs:[{id:"result",type:r}]}},getSuggestionBlueprints:function(e){var t=e.direction;return"inputs"!==t&&"outputs"!==t?[]:s2.map(function(e){return{id:"operation-".concat(e),labelSuffix:"(".concat(l2(e),")"),dataOverrides:{operation:e}}})}};function d2(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return f2(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(f2(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f2(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,f2(d,"constructor",u),f2(u,"constructor",l),l.displayName="GeneratorFunction",f2(u,o,"GeneratorFunction"),f2(d),f2(d,o,"Generator"),f2(d,r,function(){return this}),f2(d,"toString",function(){return"[object Generator]"}),(d2=function(){return{w:i,m:f}})()}function f2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f2=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){f2(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},f2(e,t,n,r)}function h2(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(c2);var p2=j_({startId:Hk().optional(),endId:Hk().optional(),visible:i_().default(!0),_version:Hk().optional()}),m2=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){h2(i,r,o,a,s,"next",e)}function s(e){h2(i,r,o,a,s,"throw",e)}a(void 0)})}}(d2().m(function e(t,n,r){var o,i,a,s,l,u;return d2().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,a=p2.parse(t.data),s=jE(n,a,"startId"),l=null!==(o=jE(n,a,"endId"))&&void 0!==o?o:s,u=jE(n,a,"visible"),void 0!==s){e.n=1;break}throw new Error("Start Message ID is required.");case 1:if(void 0!==l){e.n=2;break}throw new Error("End Message ID is required.");case 2:return e.n=3,i.hideChatMessageRange(s,l,u);case 3:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),g2={type:"toggleChatMessageVisibilityNode",label:"Hide/Show Message (Context)",category:"Chat",component:h$,dataSchema:p2,currentVersion:1,initialData:{visible:!1},handles:{inputs:[{id:"main",type:mE.ANY},{id:"startId",type:mE.NUMBER},{id:"endId",type:mE.NUMBER},{id:"visible",type:mE.BOOLEAN}],outputs:[{id:"main",type:mE.ANY}]},validate:j$(T$("startId","Start Message ID is required.")),execute:m2,meta:{fields:[{id:"startId",label:"Start Message ID",component:j,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"endId",label:"End Message ID (Optional)",component:j,props:{type:"number",placeholder:"Defaults to Start ID"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}},{id:"visible",label:"Action",component:N,options:[{value:"false",label:"Hide"},{value:"true",label:"Show"}],getValueFromEvent:function(e){return"true"===e.target.value},formatValue:function(e){return String(e)}}]}};function v2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y2(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y2(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}$E.register(g2);function b2(e){return b2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b2(e)}function O2(e){return function(e){if(Array.isArray(e))return w2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w2(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w2(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S2(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return x2(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(x2(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,x2(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,x2(d,"constructor",u),x2(u,"constructor",l),l.displayName="GeneratorFunction",x2(u,o,"GeneratorFunction"),x2(d),x2(d,o,"Generator"),x2(d,r,function(){return this}),x2(d,"toString",function(){return"[object Generator]"}),(S2=function(){return{w:i,m:f}})()}function x2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}x2=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){x2(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},x2(e,t,n,r)}function k2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k2(Object(n),!0).forEach(function(t){P2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P2(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b2(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E2(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var $2=j_({selectedEventType:tk(),preventRecursive:i_().default(!0),_version:Hk().optional()}),T2=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){E2(i,r,o,a,s,"next",e)}function s(e){E2(i,r,o,a,s,"throw",e)}a(void 0)})}}(S2().m(function e(t,n){return S2().w(function(e){for(;;)if(0===e.n)return e.a(2,_2({},n))},e)}));return function(t,n){return e.apply(this,arguments)}}(),C2={type:"triggerNode",label:"Event Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,o=O4(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=O4(function(e){return e.updateNodeData}),a=$E.nodeDefinitionMap.get(r),s=!(0,$.useMemo)(function(){return new Set(Object.values(gE))},[]).has(null==o?void 0:o.selectedEventType);if(!o||!a)return null;var l=lE[o.selectedEventType];return(0,E.jsxs)(JE,{id:t,title:"Trigger via:",selected:n,children:[(0,E.jsx)("hr",{}),(0,E.jsx)("label",{children:"Event"}),(0,E.jsxs)(N,{className:"nodrag",value:s?"custom":o.selectedEventType,onChange:function(e){var n=e.target.value;i(t,"custom"===n?{selectedEventType:""}:{selectedEventType:n})},children:[Object.entries(aE).map(function(e){var t=v2(e,2),n=t[0],r=t[1];return(0,E.jsx)("optgroup",{label:n,children:r.map(function(e){var t,n=null!==(t=Object.keys(gE).find(function(t){return gE[t]===e}))&&void 0!==t?t:e;return(0,E.jsx)("option",{value:e,children:n},e)})},n)}),(0,E.jsx)("option",{value:"custom",children:"-- Custom Event --"})]}),s&&(0,E.jsxs)("div",{style:{marginTop:"5px"},children:[(0,E.jsx)("label",{children:"Custom Event Name"}),(0,E.jsx)(j,{className:"nodrag",value:o.selectedEventType,onChange:function(e){i(t,{selectedEventType:e.target.value})},placeholder:"Type your custom event name"})]}),(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginTop:"10px"},children:[(0,E.jsx)(j,{type:"checkbox",id:"".concat(t,"_preventRecursive"),checked:o.preventRecursive,onChange:function(e){i(t,{preventRecursive:e.target.checked})}}),(0,E.jsx)("label",{htmlFor:"".concat(t,"_preventRecursive"),title:"Prevents this trigger from starting a new flow if the same flow is already running or queued.",children:"Prevent recursive calls"})]}),(0,E.jsx)("div",{style:{marginTop:"5px",fontSize:"11px",color:"#ccc",fontStyle:"italic"},children:l&&(0,E.jsx)("p",{style:{margin:"2px 0 0 0"},children:l})}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:$2,currentVersion:2,initialData:{selectedEventType:"user_message_rendered",preventRecursive:!0},handles:{inputs:[],outputs:[]},execute:T2,getDynamicHandles:function(e){var t,n=e.data,r=uE[n.selectedEventType];return t=r?Object.keys(r).map(function(e){return{id:e,type:ME(r[e]),schema:r[e]}}):[{id:"allArgs",type:mE.ARRAY,schema:$_(y_())},{id:"arg0",type:mE.ANY},{id:"arg1",type:mE.ANY},{id:"arg2",type:mE.ANY},{id:"arg3",type:mE.ANY}],{inputs:[],outputs:[{id:"main",type:mE.ANY}].concat(O2(t))}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("output"===n&&t){if("main"===t)return mE.ANY;var o=r.data.selectedEventType,i=uE[o];if(i){if(i[t])return ME(i[t])}else{if("allArgs"===t)return mE.ARRAY;if(t.startsWith("arg"))return mE.ANY}}}};function j2(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return N2(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(N2(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,N2(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,N2(d,"constructor",u),N2(u,"constructor",l),l.displayName="GeneratorFunction",N2(u,o,"GeneratorFunction"),N2(d),N2(d,o,"Generator"),N2(d,r,function(){return this}),N2(d,"toString",function(){return"[object Generator]"}),(j2=function(){return{w:i,m:f}})()}function N2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}N2=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){N2(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},N2(e,t,n,r)}function A2(e){return A2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A2(e)}function I2(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(C2);var M2=j_({targetType:q_(["string","number","object","array"]).default("string"),_version:Hk().optional()}),D2=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){I2(i,r,o,a,s,"next",e)}function s(e){I2(i,r,o,a,s,"throw",e)}a(void 0)})}}(j2().m(function e(t,n){var r,o,i,a,s,l,u,c,d;return j2().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=M2.parse(t.data),i=null!==(r=jE(n,o,"targetType"))&&void 0!==r?r:"string",void 0!==(a=n.value)){e.n=5;break}u=i,e.n="string"===u?1:"number"===u?2:"object"===u?3:"array"===u?4:5;break;case 1:return e.a(2,{result:""});case 2:return e.a(2,{result:0});case 3:return e.a(2,{result:{}});case 4:return e.a(2,{result:[]});case 5:e.p=5,c=i,e.n="string"===c?6:"number"===c?7:"object"===c||"array"===c?9:14;break;case 6:return e.a(2,{result:"object"===A2(a)?JSON.stringify(a,null,2):String(a)});case 7:if(s=parseFloat(a),!isNaN(s)){e.n=8;break}throw new Error("'".concat(a,"' cannot be converted to a number."));case 8:return e.a(2,{result:s});case 9:if("object"!==A2(a)){e.n=10;break}return e.a(2,{result:a});case 10:if("string"==typeof a){e.n=11;break}throw new Error("Input must be a JSON string to convert.");case 11:if(l=JSON.parse(a),"array"!==i||Array.isArray(l)){e.n=12;break}throw new Error("Parsed JSON is not an array.");case 12:if("object"!==i||!Array.isArray(l)&&"object"===A2(l)){e.n=13;break}throw new Error("Parsed JSON is not an object.");case 13:return e.a(2,{result:l});case 14:throw new Error("Unsupported target type: ".concat(i));case 15:e.n=17;break;case 16:throw e.p=16,d=e.v,new Error("Type conversion failed: ".concat(d.message));case 17:return e.a(2)}},e,null,[[5,16]])}));return function(t,n){return e.apply(this,arguments)}}(),R2={type:"typeConverterNode",label:"Type Converter",category:"Data Processing",component:h$,dataSchema:M2,currentVersion:1,initialData:{targetType:"string"},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.ANY},{id:"targetType",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},execute:D2,getDynamicHandles:function(e){var t;switch(e.data.targetType){case"string":t=mE.STRING;break;case"number":t=mE.NUMBER;break;case"object":t=mE.OBJECT;break;case"array":t=mE.ARRAY;break;default:t=mE.ANY}return{inputs:[],outputs:[{id:"result",type:t}]}},getSuggestionBlueprints:function(e){return"outputs"!==e.direction?[]:[{id:"target-number",labelSuffix:"(Number)",dataOverrides:{targetType:"number"}},{id:"target-object",labelSuffix:"(Object)",dataOverrides:{targetType:"object"}},{id:"target-array",labelSuffix:"(Array)",dataOverrides:{targetType:"array"}}]},meta:{fields:[{id:"targetType",label:"Convert To",component:N,options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object (from JSON string)"},{value:"array",label:"Array (from JSON string)"}]}]}};function Q2(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return z2(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(z2(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,z2(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,z2(d,"constructor",u),z2(u,"constructor",l),l.displayName="GeneratorFunction",z2(u,o,"GeneratorFunction"),z2(d),z2(d,o,"Generator"),z2(d,r,function(){return this}),z2(d,"toString",function(){return"[object Generator]"}),(Q2=function(){return{w:i,m:f}})()}function z2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}z2=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){z2(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},z2(e,t,n,r)}function L2(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}$E.register(R2);var Z2=j_({value:tk().optional(),_version:Hk().optional()}),F2=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){L2(i,r,o,a,s,"next",e)}function s(e){L2(i,r,o,a,s,"throw",e)}a(void 0)})}}(Q2().m(function e(t,n,r){var o,i,a;return Q2().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,i=Z2.parse(t.data),null!=(a=jE(n,i,"value"))){e.n=1;break}throw new Error("Value to update chat input is required.");case 1:o.updateChatInputValue(String(a));case 2:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),U2={type:"updateChatInputNode",label:"Update Chat Input",category:"Chat",component:h$,dataSchema:Z2,currentVersion:1,initialData:{value:""},handles:{inputs:[{id:"main",type:mE.ANY},{id:"value",type:mE.STRING}],outputs:[{id:"main",type:mE.ANY}]},validate:j$(T$("value","Value is required.")),execute:F2,meta:{fields:[{id:"value",label:"Value",component:A,props:{rows:3}}]}};function V2(e){return V2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V2(e)}function G2(e){return function(e){if(Array.isArray(e))return B2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B2(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B2(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X2(Object(n),!0).forEach(function(t){W2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W2(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V2(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$E.register(U2);function q2(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return H2(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(H2(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,H2(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,H2(d,"constructor",u),H2(u,"constructor",l),l.displayName="GeneratorFunction",H2(u,o,"GeneratorFunction"),H2(d),H2(d,o,"Generator"),H2(d,r,function(){return this}),H2(d,"toString",function(){return"[object Generator]"}),(q2=function(){return{w:i,m:f}})()}function H2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}H2=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){H2(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},H2(e,t,n,r)}function K2(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var J2=j_({mode:q_(["custom","predefined"]).default("custom"),selectedSchema:tk().optional(),definition:y_().optional(),_version:Hk().optional()}),e4=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){K2(i,r,o,a,s,"next",e)}function s(e){K2(i,r,o,a,s,"throw",e)}a(void 0)})}}(q2().m(function e(t){var n,r,o,i,a,s,l,u,c;return q2().w(function(e){for(;;)switch(e.n){case 0:if(i=J2.parse(t.data),a=null!==(n=null===(r=hY.meta)||void 0===r?void 0:r.schemas)&&void 0!==n?n:{},"predefined"!==i.mode){e.n=2;break}if(s=a[i.selectedSchema]){e.n=1;break}throw new Error('Predefined schema "'.concat(i.selectedSchema,'" not found.'));case 1:return e.a(2,{schema:s});case 2:if(l=null!==(o=i.definition)&&void 0!==o?o:{type:"string"},(u=lY.safeParse(l)).success){e.n=3;break}throw new Error("Invalid custom schema definition in VariableSchemaNode: ".concat(u.error.message));case 3:return c=yY(u.data),e.a(2,{schema:c})}},e)}));return function(t){return e.apply(this,arguments)}}(),t4={type:"variableSchemaNode",label:"Variable Schema",category:"Variables",component:function(e){var t,n,r=e.id,o=e.selected,i=e.type,a=O4(function(e){var t;return null===(t=e.nodesMap.get(r))||void 0===t?void 0:t.data}),s=O4(function(e){return e.updateNodeData}),l=$E.nodeDefinitionMap.get(i),u=null!==(t=null===(n=hY.meta)||void 0===n?void 0:n.schemas)&&void 0!==t?t:{};if(!a||!l)return null;var c=a.definition;return(0,E.jsxs)(JE,{id:r,title:"Variable Schema",selected:o,children:[(0,E.jsxs)(N,{className:"nodrag",value:"custom"===a.mode?"custom":a.selectedSchema,onChange:function(e){var t=e.target.value;s(r,"custom"===t?{mode:"custom"}:{mode:"predefined",selectedSchema:t})},children:[(0,E.jsx)("optgroup",{label:"Custom",children:(0,E.jsx)("option",{value:"custom",children:"Custom Schema"})}),(0,E.jsx)("optgroup",{label:"Predefined",children:Object.keys(u).map(function(e){return(0,E.jsx)("option",{value:e,children:e},e)})})]}),"custom"===a.mode&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(JX,{definition:c,path:[],onUpdate:function(e,t){var n;n=0===e.length?Y2(Y2({},c),t):BX(c,e,function(e){return Y2(Y2({},e),t)}),s(r,{definition:n})},onRemove:function(e){0!==e.length&&function(e){var t=e.slice(0,-2),n=e[e.length-2],o=e[e.length-1];if(0!==t.length||"fields"!==n){var i=BX(c,[].concat(G2(t),[n]),function(e){return(e||[]).filter(function(e,t){return t!==o})});s(r,{definition:i})}else{var a=(c.fields||[]).filter(function(e,t){return t!==o});s(r,{definition:Y2(Y2({},c),{},{fields:a})})}}(e)},onAddChild:function(e){var t={id:WT(),name:"field",type:"string",required:!0},n=BX(c,[].concat(G2(e),["fields"]),function(e){return[].concat(G2(e||[]),[t])});s(r,{definition:n})}}),(0,E.jsx)(C,{className:"nodrag",onClick:function(){"object"!==c.type&&s(r,{definition:{type:"object",fields:[],required:!0}})},style:{marginTop:"10px"},children:"Set To Object Root"})]}),(0,E.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,E.jsx)(f$,{nodeId:r,definition:l,type:"output"})})]})},dataSchema:J2,currentVersion:3,initialData:{definition:{type:"string"},mode:"custom"},handles:{inputs:[],outputs:[{id:"schema",type:mE.SCHEMA}]},execute:e4};function n4(e){return n4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n4(e)}function r4(e){return function(e){if(Array.isArray(e))return o4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o4(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i4(Object(n),!0).forEach(function(t){s4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s4(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=n4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=n4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n4(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$E.register(t4);var l4={};function u4(e){return u4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u4(e)}function c4(e){return function(e){if(Array.isArray(e))return d4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d4(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f4(Object(n),!0).forEach(function(t){p4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p4(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u4(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l4.triggerNode={1:{node:function(e){return a4(a4({},e),{},{preventRecursive:!0,_version:2})}}},l4.getLocalVariableNode={1:{node:function(e){return a4(a4({},e),{},{defaultValue:void 0,_version:2})}}},l4.getGlobalVariableNode={1:{node:function(e){return a4(a4({},e),{},{defaultValue:void 0,_version:2})}}},l4.getFlowVariableNode={1:{node:function(e){return a4(a4({},e),{},{defaultValue:void 0,_version:2})}}},l4.editCharacterNode={1:{edge:function(e,t){return t.map(function(t){return t.source===e.id&&"result"===t.sourceHandle?a4(a4({},t),{},{sourceHandle:"name"}):t})},node:function(e){return a4(a4({},e),{},{_version:2})}}},l4.runFlowNode={1:{node:function(e){return a4(a4({},e),{},{_version:2})}}},l4.manualTriggerNode={1:{node:function(e){return a4(a4({},e),{},{_version:2})}}},l4.schemaNode={1:{node:function(e){return a4(a4({},e),{},{mode:"custom",selectedSchema:void 0,_version:2})}},2:{node:function(e){var t=function(e){return e.map(function(e){var n;return a4(a4(a4({},e),{},{required:null===(n=e.required)||void 0===n||n},e.fields?{fields:t(e.fields)}:{}),e.items?{items:t([e.items])[0]}:{})})};return a4(a4({},e),{},{fields:e.fields?t(e.fields):[],_version:3})}}},l4.variableSchemaNode={1:{node:function(e){return a4(a4({},e),{},{mode:"custom",_version:2})}},2:{node:function(e){var t=function(e){var n;if(!e)return e;var r=a4(a4({},e),{},{required:null===(n=e.required)||void 0===n||n});return r.fields&&(r.fields=r.fields.map(function(e){var n;return a4(a4(a4({},e),{},{required:null===(n=e.required)||void 0===n||n},e.fields?{fields:e.fields.map(t)}:{}),e.items?{items:t(e.items)}:{})})),r.items&&(r.items=t(r.items)),r};return a4(a4({},e),{},{definition:e.definition?t(e.definition):void 0,_version:3})}}};var m4=function(e){return{id:e.id,type:e.type,position:e.position,data:e.data,width:e.width,height:e.height}},g4=function(e){var t;return{id:e.id,type:e.type,position:null!==(t=e.position)&&void 0!==t?t:{x:0,y:0},data:e.data,width:e.width||void 0,height:e.height||void 0}},v4=function(e){var t,n;return{id:e.id,source:e.source,sourceHandle:null!==(t=e.sourceHandle)&&void 0!==t?t:null,target:e.target,targetHandle:null!==(n=e.targetHandle)&&void 0!==n?n:null}},y4=function(e){return{id:e.id,source:e.source,sourceHandle:e.sourceHandle,target:e.target,targetHandle:e.targetHandle}},b4=function(e,t){var n=new Map(e.map(function(e){return[e.id,e]}));return t.filter(function(r){var o,i,a=n.get(r.source),s=n.get(r.target);if(!a||!s)return!1;var l=RE(a,null!==(o=r.sourceHandle)&&void 0!==o?o:null,"output",e,t),u=RE(s,null!==(i=r.targetHandle)&&void 0!==i?i:null,"input",e,t);return!(!l||!u)&&OE(l.type,u.type)})},O4=wp(((e,t)=>(n,r,o)=>{o.temporal=Oc(t?.wrapTemporal?.(Sp(n,r,t))||Sp(n,r,t));const i=t?.handleSet?.(o.temporal.getState()._handleSet)||o.temporal.getState()._handleSet,a=e=>{if(!o.temporal.getState().isTracking)return;const n=t?.partialize?.(r())||r(),a=t?.diff?.(e,n);null===a||t?.equality?.(e,n)||i(e,void 0,n,a)},s=o.setState;return o.setState=(...e)=>{const n=t?.partialize?.(r())||r();s(...e),a(n)},e((...e)=>{const o=t?.partialize?.(r())||r();n(...e),a(o)},r,o)})(function(e,t){return{nodes:[],edges:[],nodesMap:new Map,clipboard:null,setNodes:function(t){e({nodes:t,nodesMap:new Map(t.map(function(e){return[e.id,e]}))})},setEdges:function(t){return e({edges:t})},onNodesChange:function(t){e(function(e){var n=sd(t,e.nodes);return{nodes:n,edges:b4(n,e.edges),nodesMap:new Map(n.map(function(e){return[e.id,e]}))}})},onEdgesChange:function(t){e(function(e){var n=ld(t,e.edges);return{edges:b4(e.nodes,n)}})},onConnect:function(t){e(function(e){return{edges:Su(t,e.edges)}})},updateNodeData:function(t,n){e(function(e){var r=e.nodes.map(function(e){return e.id===t?h4(h4({},e),{},{data:h4(h4({},e.data),n)}):e});return{nodes:r,edges:b4(r,e.edges),nodesMap:new Map(r.map(function(e){return[e.id,e]}))}})},toggleNodeDisabled:function(t){e(function(e){var n=new Set(t),r=e.nodes.map(function(e){return n.has(e.id)?h4(h4({},e),{},{data:h4(h4({},e.data),{},{disabled:!e.data.disabled})}):e});return{nodes:r,nodesMap:new Map(r.map(function(e){return[e.id,e]}))}})},loadFlow:function(t,n){var r,o,i,a=(o=r4((r=t).edges),i=r.nodes.map(function(e){var t,n=$E.nodeDefinitionMap.get(e.type);if(!n)return e;for(var r=null!==(t=e.data._version)&&void 0!==t?t:0,i=a4({},e.data);r<n.currentVersion;){var a,s=r,l=null===(a=l4[e.type])||void 0===a?void 0:a[r];if(!l){console.warn('[Migration] No migration found for node type "'.concat(e.type,'" from version ').concat(r," to ").concat(r+1,". Halting migration for this node.")),i._version=n.currentVersion;break}if(l.node&&(i=l.node(i)),l.edge){var u=a4(a4({},e),{},{data:i});o=l.edge(u,o)}if((r=i._version)===s){console.error('[Migration] Migration for node "'.concat(e.type,'" from version ').concat(s," did not update the version number. Halting migration for this node to prevent an infinite loop.")),i._version=n.currentVersion;break}}return a4(a4({},e),{},{data:i})}),{nodes:i,edges:o}),s=Dr(a,n,Ir),l=(s.nodes||[]).map(g4);e({nodes:l,edges:(s.edges||[]).map(y4),nodesMap:new Map(l.map(function(e){return[e.id,e]}))})},getSpecFlow:function(){return{nodes:t().nodes.map(m4),edges:t().edges.map(v4)}},addNode:function(t){var n=h4(h4({},t),{},{id:WT()});return"ifNode"===n.type&&n.data.conditions&&(n.data.conditions=n.data.conditions.map(function(e){return h4(h4({},e),{},{id:WT()})})),e(function(e){var t=[].concat(c4(e.nodes),[n]);return{nodes:t,nodesMap:new Map(t.map(function(e){return[e.id,e]}))}}),n},duplicateNode:function(n){var r=t().nodesMap.get(n);if(r){var o=h4(h4({},structuredClone(r)),{},{id:WT(),position:{x:r.position.x+50,y:r.position.y+50},selected:!1});"ifNode"===o.type&&o.data.conditions&&(o.data.conditions=o.data.conditions.map(function(e){return h4(h4({},e),{},{id:WT()})})),e(function(e){var t=[].concat(c4(e.nodes),[o]);return{nodes:t,nodesMap:new Map(t.map(function(e){return[e.id,e]}))}})}},copySelection:function(){var n=t(),r=n.nodes,o=n.edges,i=r.filter(function(e){return e.selected});if(0!==i.length){var a=new Set(i.map(function(e){return e.id})),s=o.filter(function(e){return a.has(e.source)&&a.has(e.target)});e({clipboard:{nodes:structuredClone(i),edges:structuredClone(s)}})}},paste:function(n){var r=t().clipboard;if(r&&0!==r.nodes.length){var o=new Map,i=[],a=[],s=Math.min.apply(Math,c4(r.nodes.map(function(e){return e.position.x}))),l=Math.min.apply(Math,c4(r.nodes.map(function(e){return e.position.y})));r.nodes.forEach(function(e){var t=WT();o.set(e.id,t),"ifNode"===e.type&&e.data.conditions&&(e.data.conditions=e.data.conditions.map(function(e){return h4(h4({},e),{},{id:WT()})})),i.push(h4(h4({},e),{},{id:t,selected:!0,position:{x:n.x+(e.position.x-s),y:n.y+(e.position.y-l)}}))}),r.edges.forEach(function(e){var t=o.get(e.source),n=o.get(e.target);t&&n&&a.push(h4(h4({},e),{},{id:WT(),source:t,target:n}))}),e(function(e){var t=e.nodes.map(function(e){return h4(h4({},e),{},{selected:!1})}),n=[].concat(c4(t),i);return{nodes:n,edges:[].concat(c4(e.edges),a),nodesMap:new Map(n.map(function(e){return[e.id,e]}))}})}}}},{partialize:function(e){return{nodes:e.nodes,edges:e.edges}},limit:50}));function w4(e,t,n){var r,o;if(n.some(function(t){return t.target===e.target&&t.targetHandle===e.targetHandle}))return!1;var i=t.find(function(t){return t.id===e.source}),a=t.find(function(t){return t.id===e.target});if(!(i&&a&&i.type&&a.type))return!1;var s=RE(i,null!==(r=e.sourceHandle)&&void 0!==r?r:null,"output",t,n),l=RE(a,null!==(o=e.targetHandle)&&void 0!==o?o:null,"input",t,n),u=null==s?void 0:s.type,c=null==l?void 0:l.type;return!(!u||!c)&&OE(u,c)}function S4(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k4(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function x4(e){return function(e){if(Array.isArray(e))return _4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k4(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k4(e,t){if(e){if("string"==typeof e)return _4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_4(e,t):void 0}}function _4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P4(e,t,n,r){if("runFlowNode"!==t.type)return null;var o=t.data.flowId;if(!o)return null;var i=[].concat(x4(n),[e]);if(i.includes(o)){var a=[].concat(x4(i),[o]).map(function(e){var t;return(null===(t=r.find(function(t){return t.id===e}))||void 0===t?void 0:t.name)||e}).join(" -> ");return"Circular sub-flow reference detected: ".concat(a)}var s=r.find(function(e){return e.id===o});if(!s)return null;var l,u=S4(s.flow.nodes);try{for(u.s();!(l=u.n()).done;){var c=l.value,d=P4(o,c,i,r);if(d)return d}}catch(e){u.e(e)}finally{u.f()}return null}O4.subscribe(function(e,t){e.nodes!==t.nodes&&O4.setState({nodesMap:new Map(e.nodes.map(function(e){return[e.id,e]}))})});var E4=function(e,t,n,r){var o=[],i=new Set,a=new Set,s=new Map,l=function(e,t,n){s.has(e)||s.set(e,[]),s.get(e).push(n),"error"===n.severity&&(i.add(e),o.push("Node [".concat(t,"]: ").concat(n.message)))};if(!e.nodes||0===e.nodes.length)return{isValid:!0,errors:[],invalidNodeIds:i,invalidEdgeIds:a,errorsByNodeId:s};var u,c=new Set(e.nodes.map(function(e){return e.id})),d=S4(e.nodes);try{var f=function(){var o,i=u.value;if(null!==(o=i.data)&&void 0!==o&&o.disabled)return 1;var a=$E.nodeDefinitionMap.get(i.type);if(a){var s=a.dataSchema.safeParse(i.data);if(s.success||s.error.issues.forEach(function(e){l(i.id,i.type,{fieldId:e.path.join("."),message:e.message,severity:"error"})}),a.validate)a.validate(i,e.edges).forEach(function(e){return l(i.id,i.type,e)});var c=a.isDangerous;if("ifNode"===i.type&&(c=i.data.conditions.some(function(e){return"advanced"===e.mode})),c&&!t&&l(i.id,i.type,{message:"This dangerous node requires permission. Enable 'Allow Dangerous' in the flow settings.",severity:"error"}),"runFlowNode"===i.type){var d=i.data.flowId;if(d){var f=n.find(function(e){return e.id===d});if(f)if(f.enabled){if(r){var h=P4(r,i,[],n);h&&l(i.id,i.type,{fieldId:"flowId",message:h,severity:"error"})}}else l(i.id,i.type,{fieldId:"flowId",message:'Targets disabled flow: "'.concat(f.name,'".'),severity:"error"});else l(i.id,i.type,{fieldId:"flowId",message:"Targets a non-existent flow.",severity:"error"})}}if("forEachNode"===i.type){var p=i.data.flowId;if(p){var m=n.find(function(e){return e.id===p});if(m)if(m.enabled){var g=m.flow.nodes.some(function(e){return("forEachTriggerNode"===e.type||"manualTriggerNode"===e.type)&&!m.flow.edges.some(function(t){return t.target===e.id})});g||l(i.id,i.type,{fieldId:"flowId",message:'Selected flow must start with a "For Each Trigger" or "Manual / Sub-Flow Trigger".',severity:"error"})}else l(i.id,i.type,{fieldId:"flowId",message:'Targets disabled flow: "'.concat(m.name,'".'),severity:"error"});else l(i.id,i.type,{fieldId:"flowId",message:"Targets a non-existent flow.",severity:"error"})}}}else i.type&&!$E.nodeDefinitionMap.has(i.type)&&l(i.id,i.type,{message:'Unknown node type "'.concat(i.type,'".'),severity:"error"})};for(d.s();!(u=d.n()).done;)f()}catch(e){d.e(e)}finally{d.f()}var h,p=S4(e.edges);try{for(p.s();!(h=p.n()).done;){var m=h.value;c.has(m.source)||(o.push("Edge [".concat(m.id,']: Source node "').concat(m.source,'" not found.')),a.add(m.id)),c.has(m.target)||(o.push("Edge [".concat(m.id,']: Target node "').concat(m.target,'" not found.')),a.add(m.id))}}catch(e){p.e(e)}finally{p.f()}var g={};e.nodes.forEach(function(e){return g[e.id]=[]}),e.edges.forEach(function(e){g[e.source]&&g[e.source].push(e.target)});var v,y=new Set,b=new Set,O=function(e){y.add(e),b.add(e);var t,n=S4(g[e]||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(y.has(r)){if(b.has(r))return!0}else if(O(r))return!0}}catch(e){n.e(e)}finally{n.f()}return b.delete(e),!1},w=S4(e.nodes);try{for(w.s();!(v=w.n()).done;){var S=v.value;if(!y.has(S.id)&&O(S.id)){o.push("Flow has a cycle (circular dependency).");break}}}catch(e){w.e(e)}finally{w.f()}var x,k=new Set(["triggerNode","slashCommandNode","menuTriggerNode","messageToolbarTriggerNode","quickReplyTriggerNode","manualTriggerNode","forEachTriggerNode"]),_=S4(e.nodes);try{var P=function(){var t=x.value;if(!k.has(t.type))return 0;var n=e.edges.filter(function(e){return e.target===t.id});if(0===n.length)return 0;if("manualTriggerNode"===t.type||"forEachTriggerNode"===t.type){var r,o=S4(n);try{for(o.s();!(r=o.n()).done;){"schema"!==r.value.targetHandle&&l(t.id,t.type,{message:"This trigger can only accept incoming connections on the 'schema' handle.",severity:"error"})}}catch(e){o.e(e)}finally{o.f()}}else l(t.id,t.type,{message:"Trigger nodes cannot have incoming connections.",severity:"error"})};for(_.s();!(x=_.n()).done;)P()}catch(e){_.e(e)}finally{_.f()}var E,$=new Map,T=S4(n);try{for(T.s();!(E=T.n()).done;){var C=E.value;if(C.enabled){var j,N=S4(C.flow.nodes);try{var A=function(){var e=j.value;if("slashCommandNode"===e.type&&!e.data.disabled){var t=e.data,o="flow-".concat(t.commandName);if($.has(o)){var i,a=$.get(o),s=n.find(function(e){return e.id===a.flowId});if(C.id===r)l(e.id,e.type,{fieldId:"commandName",message:'Command name "'.concat(t.commandName,'" conflicts with a command in flow "').concat(null!==(i=null==s?void 0:s.name)&&void 0!==i?i:"another flow",'".'),severity:"error"})}else $.set(o,{flowId:C.id,nodeId:e.id})}};for(N.s();!(j=N.n()).done;)A()}catch(e){N.e(e)}finally{N.f()}}}}catch(e){T.e(e)}finally{T.f()}return{isValid:0===o.length,errors:o,invalidNodeIds:i,invalidEdgeIds:a,errorsByNodeId:s}};const $4=P,T4={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},C4=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",j4=new RegExp("^"+("["+C4+"]["+(C4+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*")+"$");function N4(e,t){const n=[];let r=t.exec(e);for(;r;){const o=[];o.startIndex=t.lastIndex-r[0].length;const i=r.length;for(let e=0;e<i;e++)o.push(r[e]);n.push(o),r=t.exec(e)}return n}const A4=function(e){const t=j4.exec(e);return!(null==t)};let I4;I4="function"!=typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class M4{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),void 0!==t&&(this.child[this.child.length-1][I4]={startIndex:t})}static getMetaDataSymbol(){return I4}}function D4(e,t){const n={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let r=1,o=!1,i=!1,a="";for(;t<e.length;t++)if("<"!==e[t]||i)if(">"===e[t]){if(i?"-"===e[t-1]&&"-"===e[t-2]&&(i=!1,r--):r--,0===r)break}else"["===e[t]?o=!0:a+=e[t];else{if(o&&F4(e,"!ENTITY",t)){let r,o;t+=7,[r,o,t]=Q4(e,t+1),-1===o.indexOf("&")&&(n[r]={regx:RegExp(`&${r};`,"g"),val:o})}else if(o&&F4(e,"!ELEMENT",t)){t+=8;const{index:n}=Z4(e,t+1);t=n}else if(o&&F4(e,"!ATTLIST",t))t+=8;else if(o&&F4(e,"!NOTATION",t)){t+=9;const{index:n}=z4(e,t+1);t=n}else{if(!F4(e,"!--",t))throw new Error("Invalid DOCTYPE");i=!0}r++,a=""}if(0!==r)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}}const R4=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function Q4(e,t){t=R4(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t])&&'"'!==e[t]&&"'"!==e[t];)n+=e[t],t++;if(U4(n),t=R4(e,t),"SYSTEM"===e.substring(t,t+6).toUpperCase())throw new Error("External entities are not supported");if("%"===e[t])throw new Error("Parameter entities are not supported");let r="";return[t,r]=L4(e,t,"entity"),[n,r,--t]}function z4(e,t){t=R4(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;U4(n),t=R4(e,t);const r=e.substring(t,t+6).toUpperCase();if("SYSTEM"!==r&&"PUBLIC"!==r)throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=R4(e,t);let o=null,i=null;if("PUBLIC"===r)[t,o]=L4(e,t,"publicIdentifier"),'"'!==e[t=R4(e,t)]&&"'"!==e[t]||([t,i]=L4(e,t,"systemIdentifier"));else if("SYSTEM"===r&&([t,i]=L4(e,t,"systemIdentifier"),!i))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:o,systemIdentifier:i,index:--t}}function L4(e,t,n){let r="";const o=e[t];if('"'!==o&&"'"!==o)throw new Error(`Expected quoted string, found "${o}"`);for(t++;t<e.length&&e[t]!==o;)r+=e[t],t++;if(e[t]!==o)throw new Error(`Unterminated ${n} value`);return[++t,r]}function Z4(e,t){t=R4(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!U4(n))throw new Error(`Invalid element name: "${n}"`);let r="";if("E"===e[t=R4(e,t)]&&F4(e,"MPTY",t))t+=4;else if("A"===e[t]&&F4(e,"NY",t))t+=2;else{if("("!==e[t])throw new Error(`Invalid Element Expression, found "${e[t]}"`);for(t++;t<e.length&&")"!==e[t];)r+=e[t],t++;if(")"!==e[t])throw new Error("Unterminated content model")}return{elementName:n,contentModel:r.trim(),index:t}}function F4(e,t,n){for(let r=0;r<t.length;r++)if(t[r]!==e[n+r+1])return!1;return!0}function U4(e){if(A4(e))return e;throw new Error(`Invalid entity name ${e}`)}const V4=/^[-+]?0x[a-fA-F0-9]+$/,G4=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,B4={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function X4(e,t={}){if(t=Object.assign({},B4,t),!e||"string"!=typeof e)return e;let n=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(n))return e;if("0"===e)return 0;if(t.hex&&V4.test(n))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(n,16);if(-1!==n.search(/.+[eE].+/))return function(e,t,n){if(!n.eNotation)return e;const r=t.match(Y4);if(r){let o=r[1]||"";const i=-1===r[3].indexOf("e")?"E":"e",a=r[2],s=o?e[a.length+1]===i:e[a.length]===i;return a.length>1&&s?e:1!==a.length||!r[3].startsWith(`.${i}`)&&r[3][0]!==i?n.leadingZeros&&!s?(t=(r[1]||"")+r[3],Number(t)):e:Number(t)}return e}(e,n,t);{const r=G4.exec(n);if(r){const o=r[1]||"",i=r[2];let a=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),e;return e}(r[3]);const s=o?"."===e[i.length+1]:"."===e[i.length];if(!t.leadingZeros&&(i.length>1||1===i.length&&!s))return e;{const r=Number(n),s=String(r);if(0===r)return r;if(-1!==s.search(/[eE]/))return t.eNotation?r:e;if(-1!==n.indexOf("."))return"0"===s||s===a||s===`${o}${a}`?r:e;let l=i?a:n;return i?l===s||o+l===s?r:e:l===s||l===o+s?r:e}}return e}}const Y4=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;class W4{constructor(e){var t;this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=q4,this.parseXml=t3,this.parseTextData=H4,this.resolveNameSpace=K4,this.buildAttributesMap=e3,this.isItStopNode=i3,this.replaceEntitiesValue=r3,this.readStopNodeData=l3,this.saveTextToParentTag=o3,this.addChild=n3,this.ignoreAttributesFn="function"==typeof(t=this.options.ignoreAttributes)?t:Array.isArray(t)?e=>{for(const n of t){if("string"==typeof n&&e===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}}:()=>!1}}function q4(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function H4(e,t,n,r,o,i,a){if(void 0!==e&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));const r=this.options.tagValueProcessor(t,e,n,o,i);if(null==r)return e;if(typeof r!=typeof e||r!==e)return r;if(this.options.trimValues)return u3(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?u3(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function K4(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}const J4=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function e3(e,t,n){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){const n=N4(e,J4),r=n.length,o={};for(let e=0;e<r;e++){const r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let i=n[e][4],a=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(a=this.options.transformAttributeName(a)),"__proto__"===a&&(a="#__proto__"),void 0!==i){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);const e=this.options.attributeValueProcessor(r,i,t);o[a]=null==e?i:typeof e!=typeof i||e!==i?e:u3(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[a]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=o,e}return o}}const t3=function(e){e=e.replace(/\r\n?/g,"\n");const t=new M4("!xml");let n=t,r="",o="";for(let i=0;i<e.length;i++){if("<"===e[i])if("/"===e[i+1]){const t=a3(e,">",i,"Closing Tag is not closed.");let a=e.substring(i+2,t).trim();if(this.options.removeNSPrefix){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&(r=this.saveTextToParentTag(r,n,o));const s=o.substring(o.lastIndexOf(".")+1);if(a&&-1!==this.options.unpairedTags.indexOf(a))throw new Error(`Unpaired tag can not be used as closing tag: </${a}>`);let l=0;s&&-1!==this.options.unpairedTags.indexOf(s)?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),n=this.tagsNodeStack.pop(),r="",i=t}else if("?"===e[i+1]){let t=s3(e,i,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,o),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new M4(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,o,t.tagName)),this.addChild(n,e,o,i)}i=t.closeIndex+1}else if("!--"===e.substr(i+1,3)){const t=a3(e,"--\x3e",i+4,"Comment is not closed.");if(this.options.commentPropName){const a=e.substring(i+4,t-2);r=this.saveTextToParentTag(r,n,o),n.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}i=t}else if("!D"===e.substr(i+1,2)){const t=D4(e,i);this.docTypeEntities=t.entities,i=t.i}else if("!["===e.substr(i+1,2)){const t=a3(e,"]]>",i,"CDATA is not closed.")-2,a=e.substring(i+9,t);r=this.saveTextToParentTag(r,n,o);let s=this.parseTextData(a,n.tagname,o,!0,!1,!0,!0);null==s&&(s=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]):n.add(this.options.textNodeName,s),i=t+2}else{let a=s3(e,i,this.options.removeNSPrefix),s=a.tagName;const l=a.rawTagName;let u=a.tagExp,c=a.attrExpPresent,d=a.closeIndex;this.options.transformTagName&&(s=this.options.transformTagName(s)),n&&r&&"!xml"!==n.tagname&&(r=this.saveTextToParentTag(r,n,o,!1));const f=n;f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(n=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),s!==t.tagname&&(o+=o?"."+s:s);const h=i;if(this.isItStopNode(this.options.stopNodes,o,s)){let t="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)"/"===s[s.length-1]?(s=s.substr(0,s.length-1),o=o.substr(0,o.length-1),u=s):u=u.substr(0,u.length-1),i=a.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(s))i=a.closeIndex;else{const n=this.readStopNodeData(e,l,d+1);if(!n)throw new Error(`Unexpected end of ${l}`);i=n.i,t=n.tagContent}const r=new M4(s);s!==u&&c&&(r[":@"]=this.buildAttributesMap(u,o,s)),t&&(t=this.parseTextData(t,s,o,!0,c,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),r.add(this.options.textNodeName,t),this.addChild(n,r,o,h)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===s[s.length-1]?(s=s.substr(0,s.length-1),o=o.substr(0,o.length-1),u=s):u=u.substr(0,u.length-1),this.options.transformTagName&&(s=this.options.transformTagName(s));const e=new M4(s);s!==u&&c&&(e[":@"]=this.buildAttributesMap(u,o,s)),this.addChild(n,e,o,h),o=o.substr(0,o.lastIndexOf("."))}else{const e=new M4(s);this.tagsNodeStack.push(n),s!==u&&c&&(e[":@"]=this.buildAttributesMap(u,o,s)),this.addChild(n,e,o,h),n=e}r="",i=d}}else r+=e[i]}return t.child};function n3(e,t,n,r){this.options.captureMetaData||(r=void 0);const o=this.options.updateTag(t.tagname,n,t[":@"]);!1===o||("string"==typeof o?(t.tagname=o,e.addChild(t,r)):e.addChild(t,r))}const r3=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function o3(e,t,n,r){return e&&(void 0===r&&(r=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,r))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function i3(e,t,n){const r="*."+n;for(const n in e){const o=e[n];if(r===o||t===o)return!0}return!1}function a3(e,t,n,r){const o=e.indexOf(t,n);if(-1===o)throw new Error(r);return o+t.length-1}function s3(e,t,n,r=">"){const o=function(e,t,n=">"){let r,o="";for(let i=t;i<e.length;i++){let t=e[i];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else if(t===n[0]){if(!n[1])return{data:o,index:i};if(e[i+1]===n[1])return{data:o,index:i}}else"\t"===t&&(t=" ");o+=t}}(e,t+1,r);if(!o)return;let i=o.data;const a=o.index,s=i.search(/\s/);let l=i,u=!0;-1!==s&&(l=i.substring(0,s),i=i.substring(s+1).trimStart());const c=l;if(n){const e=l.indexOf(":");-1!==e&&(l=l.substr(e+1),u=l!==o.data.substr(e+1))}return{tagName:l,tagExp:i,closeIndex:a,attrExpPresent:u,rawTagName:c}}function l3(e,t,n){const r=n;let o=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const i=a3(e,">",n,`${t} is not closed`);if(e.substring(n+2,i).trim()===t&&(o--,0===o))return{tagContent:e.substring(r,n),i};n=i}else if("?"===e[n+1]){n=a3(e,"?>",n+1,"StopNode is not closed.")}else if("!--"===e.substr(n+1,3)){n=a3(e,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===e.substr(n+1,2)){n=a3(e,"]]>",n,"StopNode is not closed.")-2}else{const r=s3(e,n,">");if(r){(r&&r.tagName)===t&&"/"!==r.tagExp[r.tagExp.length-1]&&o++,n=r.closeIndex}}}function u3(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&X4(e,n)}return function(e){return void 0!==e}(e)?e:""}const c3=M4.getMetaDataSymbol();function d3(e,t){return f3(e,t)}function f3(e,t,n){let r;const o={};for(let i=0;i<e.length;i++){const a=e[i],s=h3(a);let l="";if(l=void 0===n?s:n+"."+s,s===t.textNodeName)void 0===r?r=a[s]:r+=""+a[s];else{if(void 0===s)continue;if(a[s]){let e=f3(a[s],t,l);const n=m3(e,t);void 0!==a[c3]&&(e[c3]=a[c3]),a[":@"]?p3(e,a[":@"],l,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==o[s]&&o.hasOwnProperty(s)?(Array.isArray(o[s])||(o[s]=[o[s]]),o[s].push(e)):t.isArray(s,l,n)?o[s]=[e]:o[s]=e}}}return"string"==typeof r?r.length>0&&(o[t.textNodeName]=r):void 0!==r&&(o[t.textNodeName]=r),o}function h3(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function p3(e,t,n,r){if(t){const o=Object.keys(t),i=o.length;for(let a=0;a<i;a++){const i=o[a];r.isArray(i,n+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function m3(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return 0===r||!(1!==r||!e[n]&&"boolean"!=typeof e[n]&&0!==e[n])}const g3={allowBooleanAttributes:!1,unpairedTags:[]};function v3(e,t){t=Object.assign({},g3,t);const n=[];let r=!1,o=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++)if("<"===e[i]&&"?"===e[i+1]){if(i+=2,i=b3(e,i),i.err)return i}else{if("<"!==e[i]){if(y3(e[i]))continue;return E3("InvalidChar","char '"+e[i]+"' is not expected.",C3(e,i))}{let a=i;if(i++,"!"===e[i]){i=O3(e,i);continue}{let s=!1;"/"===e[i]&&(s=!0,i++);let l="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)l+=e[i];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),i--),!T3(l)){let t;return t=0===l.trim().length?"Invalid space after '<'.":"Tag '"+l+"' is an invalid name.",E3("InvalidTag",t,C3(e,i))}const u=x3(e,i);if(!1===u)return E3("InvalidAttr","Attributes for '"+l+"' have open quote.",C3(e,i));let c=u.value;if(i=u.index,"/"===c[c.length-1]){const n=i-c.length;c=c.substring(0,c.length-1);const o=_3(c,t);if(!0!==o)return E3(o.err.code,o.err.msg,C3(e,n+o.err.line));r=!0}else if(s){if(!u.tagClosed)return E3("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",C3(e,i));if(c.trim().length>0)return E3("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",C3(e,a));if(0===n.length)return E3("InvalidTag","Closing tag '"+l+"' has not been opened.",C3(e,a));{const t=n.pop();if(l!==t.tagName){let n=C3(e,t.tagStartPos);return E3("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+l+"'.",C3(e,a))}0==n.length&&(o=!0)}}else{const s=_3(c,t);if(!0!==s)return E3(s.err.code,s.err.msg,C3(e,i-c.length+s.err.line));if(!0===o)return E3("InvalidXml","Multiple possible root nodes found.",C3(e,i));-1!==t.unpairedTags.indexOf(l)||n.push({tagName:l,tagStartPos:a}),r=!0}for(i++;i<e.length;i++)if("<"===e[i]){if("!"===e[i+1]){i++,i=O3(e,i);continue}if("?"!==e[i+1])break;if(i=b3(e,++i),i.err)return i}else if("&"===e[i]){const t=P3(e,i);if(-1==t)return E3("InvalidChar","char '&' is not expected.",C3(e,i));i=t}else if(!0===o&&!y3(e[i]))return E3("InvalidXml","Extra text at the end",C3(e,i));"<"===e[i]&&i--}}}return r?1==n.length?E3("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",C3(e,n[0].tagStartPos)):!(n.length>0)||E3("InvalidXml","Invalid '"+JSON.stringify(n.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):E3("InvalidXml","Start tag expected.",1)}function y3(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function b3(e,t){const n=t;for(;t<e.length;t++)if("?"==e[t]||" "==e[t]){const r=e.substr(n,t-n);if(t>5&&"xml"===r)return E3("InvalidXml","XML declaration allowed only at the start of the document.",C3(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}continue}return t}function O3(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}const w3='"',S3="'";function x3(e,t){let n="",r="",o=!1;for(;t<e.length;t++){if(e[t]===w3||e[t]===S3)""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){o=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:o}}const k3=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function _3(e,t){const n=N4(e,k3),r={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return E3("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",j3(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return E3("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",j3(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return E3("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",j3(n[e]));const o=n[e][2];if(!$3(o))return E3("InvalidAttr","Attribute '"+o+"' is an invalid name.",j3(n[e]));if(r.hasOwnProperty(o))return E3("InvalidAttr","Attribute '"+o+"' is repeated.",j3(n[e]));r[o]=1}return!0}function P3(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function E3(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function $3(e){return A4(e)}function T3(e){return A4(e)}function C3(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function j3(e){return e.startIndex+e[1].length}const N3={validate:v3};var A3=new class{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},T4,e)}(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=v3(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new W4(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(e);return this.options.preserveOrder||void 0===r?r:d3(r,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return M4.getMetaDataSymbol()}}({ignoreAttributes:!0,textNodeName:"#text",trimValues:!0,allowBooleanAttributes:!0});function I3(e,t){if(t&&e){var n=function(n){"array"===t.properties[n].type&&e[n]&&!Array.isArray(e[n])&&(e[n]=[e[n]]),"object"===t.properties[n].type&&I3(e[n],t.properties[n]),"array"===t.properties[n].type&&"object"===t.properties[n].items.type&&(Array.isArray(e[n])?e[n].forEach(function(e){return I3(e,t.properties[n].items)}):I3(e[n],t.properties[n].items))};for(var r in t.properties)n(r)}}function M3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.match(/```(?:\w+\n|\n)([\s\S]*?)```/),o=r?r[1].trim():e.trim();try{switch(t){case"xml":var i=N3.validate(o);if(!0!==i)throw new Error("Model response is not valid XML: ".concat(i.err.msg));var a=A3.parse(o);return a.root&&(a=a.root),n.schema&&I3(a,n.schema),a;case"json":return JSON.parse(o);default:throw new Error("Unsupported format specified: ".concat(t))}}catch(e){if("xml"===t){if(e.message.startsWith("Model response is not valid XML:"))throw e;throw new Error("Model response is not valid XML.")}if("json"===t)throw new Error("Model response is not valid JSON.");throw new Error("Failed to parse response as ".concat(t,": ").concat(e.message))}}function D3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D3(Object(n),!0).forEach(function(t){Q3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Q3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=z3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z3(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z3(e){return z3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z3(e)}function L3(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Z3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="  ".repeat(t);if(Array.isArray(e))return e.map(function(e){return null!==e&&"object"===z3(e)?"".concat(n,"<item>\n").concat(Z3(e,t+1)).concat(n,"</item>\n"):"".concat(n,"<item>").concat(L3(e),"</item>\n")}).join("");if(null!==e&&"object"===z3(e)){for(var r="",o=0,i=Object.keys(e);o<i.length;o++){var a=i[o],s=e[a];null!==s&&"object"===z3(s)?r+="".concat(n,"<").concat(a,">\n").concat(Z3(s,t+1)).concat(n,"</").concat(a,">\n"):r+="".concat(n,"<").concat(a,">").concat(L3(s),"</").concat(a,">\n")}return r}return"".concat(n,"<value>").concat(L3(e),"</value>\n")}function F3(e,t){var n=U3(e);return"xml"===t?Z3(n).trim():JSON.stringify(n,null,2)}function U3(e){if(!e||"object"!==z3(e))return null;var t=Array.isArray(e.examples)?e.examples[0]:void 0,n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i=o[r];if(void 0!==i)return i}}(e.example,t,e.default);if(void 0!==n)return n;if(void 0!==e.const)return e.const;if(Array.isArray(e.enum)&&e.enum.length)return e.enum[0];var r=Array.isArray(e.anyOf)?e.anyOf[0]:Array.isArray(e.oneOf)?e.oneOf[0]:void 0;if(r)return U3(r);switch(function(e){var t;return Array.isArray(e)?null!==(t=e.find(function(e){return"null"!==e}))&&void 0!==t?t:e[0]:e}(e.type)){case"object":for(var o={},i=e.properties||{},a=0,s=Object.keys(i);a<s.length;a++){var l=s[a];o[l]=U3(i[l])}return e.additionalProperties&&"object"===z3(e.additionalProperties)&&(o.additionalProperty=U3(e.additionalProperties)),o;case"array":var u;return[U3(null!==(u=e.items)&&void 0!==u?u:{})];case"string":switch(e.format){case"date-time":return new Date(0).toISOString();case"date":return"1970-01-01";case"time":return"00:00:00";case"email":return"user@example.com";case"uri":case"url":return"https://example.com";case"uuid":return"00000000-0000-0000-0000-000000000000";default:return e.title||e.description||"string"}case"integer":case"number":return 0;case"boolean":return!1;case"null":return null;default:return e.properties||e.additionalProperties?U3(R3(R3({},e),{},{type:"object"})):e.items?U3(R3(R3({},e),{},{type:"array"})):null}}function V3(e){return V3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V3(e)}var G3=["startMessageId","endMessageId"];function B3(e){return function(e){if(Array.isArray(e))return X3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X3(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X3(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Y3(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return W3(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(W3(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,W3(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,W3(d,"constructor",u),W3(u,"constructor",l),l.displayName="GeneratorFunction",W3(u,o,"GeneratorFunction"),W3(d),W3(d,o,"Generator"),W3(d,r,function(){return this}),W3(d,"toString",function(){return"[object Generator]"}),(Y3=function(){return{w:i,m:f}})()}function W3(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}W3=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){W3(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},W3(e,t,n,r)}function q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q3(Object(n),!0).forEach(function(t){K3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function K3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V3(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J3(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function e5(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function t5(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){e5(i,r,o,a,s,"next",e)}function s(e){e5(i,r,o,a,s,"throw",e)}a(void 0)})}}function n5(e){return r5.apply(this,arguments)}function r5(){return r5=t5(Y3().m(function e(t){var n,r,o,i,a,s,l,u,c,d,f,h=arguments;return Y3().w(function(e){for(;;)switch(e.n){case 0:if(o=(r=h.length>1&&void 0!==h[1]?h[1]:{}).startMessageId,i=r.endMessageId,a=J3(r,G3),s=SillyTavern.getContext(),l=s.extensionSettings,u=s.CONNECT_API_MAP,c=null===(n=l.connectionManager)||void 0===n||null===(n=n.profiles)||void 0===n?void 0:n.find(function(e){return e.id===t}),c){e.n=1;break}throw new Error("Connection profile with ID ".concat(t," not found. Please configure it in Flowchart settings."));case 1:return d=null!=c&&c.api?u[c.api]:null,e.n=2,xr(null==d?void 0:d.selected,H3({targetCharacterId:Q.this_chid,messageIndexesBetween:{start:o,end:i},presetName:null==c?void 0:c.preset,contextName:null==c?void 0:c.context,instructName:null==c?void 0:c.instruct,syspromptName:null==c?void 0:c.sysprompt,includeNames:!!B.selected_group},a));case 2:return f=e.v,e.a(2,f.result)}},e)})),r5.apply(this,arguments)}var o5=new class{constructor(){yr(this,"requestMap"),this.requestMap=new Map}async abortRequest(e){var t;const n=this.requestMap.get(e);if(n){if(n.abortController)try{n.abortController.abort()}catch{}null!=(t=n.options)&&t.onFinish&&await n.options.onFinish(e),this.requestMap.delete(e)}}async generateRequest(e,t){var n;const r=SillyTavern.getContext(),o=r.uuidv4(),i=(null==(n=null==e?void 0:e.custom)?void 0:n.stream)??!1;if(this.requestMap.set(o,{abortController:null==t?void 0:t.abortController,isStream:i,options:t}),i)try{const n=await r.ConnectionManagerRequestService.sendRequest(e.profileId,e.prompt,e.maxTokens,e.custom,e.overridePayload);let i;null!=t&&t.onStart&&await t.onStart(o);for await(const e of n())i=e,null!=t&&t.onEntry&&await t.onEntry(o,e);null!=t&&t.onFinish&&await t.onFinish(o,i)}catch(e){null!=t&&t.onFinish&&await t.onFinish(o,void 0,e)}finally{this.requestMap.delete(o)}else try{null!=t&&t.onStart&&await t.onStart(o);const n=await r.ConnectionManagerRequestService.sendRequest(e.profileId,e.prompt,e.maxTokens,e.custom,e.overridePayload);this.requestMap.get(o)&&(null!=t&&t.onEntry&&await t.onEntry(o,n),null!=t&&t.onFinish&&await t.onFinish(o,n))}catch(e){null!=t&&t.onFinish&&await t.onFinish(o,void 0,e)}finally{this.requestMap.delete(o)}return o}getActiveRequest(e){var t;return null==(t=this.requestMap.get(e))?void 0:t.abortController}getAllActiveRequests(){const e=new Map;for(const[t,n]of this.requestMap)e.set(t,n.abortController);return e}};function i5(e,t,n,r,o,i){return a5.apply(this,arguments)}function a5(){return a5=t5(Y3().m(function e(t,n,r,o,i,a){var s,l;return Y3().w(function(e){for(;;)if(0===e.n)return s=!o.json_schema&&!!i,l="",e.a(2,new Promise(function(e,u){var c=new AbortController;o5.generateRequest({profileId:t,prompt:n,maxTokens:r,custom:{stream:s,signal:null!=a?a:c.signal},overridePayload:o},{abortController:c,onEntry:s?function(){var e=t5(Y3().m(function e(t,n){var r;return Y3().w(function(e){for(;;)switch(e.n){case 0:if(!(r=n.text)||!i){e.n=2;break}return e.n=1,i.onStream({chunk:r.slice(l.length),fullText:r});case 1:l=r;case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}():void 0,onFinish:function(t,n,r){return r?u(r):void 0===n&&void 0===r?s?e({content:l}):u(new DOMException("Request aborted by user","AbortError")):(n||u(new Error("No data received from LLM")),r?u(r):e(i?{content:l}:n))}})}))},e)})),a5.apply(this,arguments)}function s5(e,t,n,r,o){return l5.apply(this,arguments)}function l5(){return(l5=t5(Y3().m(function e(t,n,r,o,i){var a;return Y3().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i5(t,n,r,{},o?{onStream:o}:void 0,i);case 1:if(null!=(a=e.v)&&a.content){e.n=2;break}throw new Error("LLM request failed to return content.");case 2:return e.a(2,a.content)}},e)}))).apply(this,arguments)}function u5(e,t,n,r,o,i,a){return c5.apply(this,arguments)}function c5(){return c5=t5(Y3().m(function e(t,n,r,o,i,a,s){var l,u,c,d,f,h,p,m,g,v,y,b,O;return Y3().w(function(e){for(;;)switch(e.n){case 0:if(l=Gr.getSettings(),i!==Nr.NATIVE){e.n=3;break}return e.n=1,i5(t,n,a,{json_schema:{name:o,strict:!0,value:$4.toJSONSchema(r)}},void 0,s);case 1:if(u=e.v,null!==(d=u)&&void 0!==d&&d.content){e.n=2;break}throw new Error("Structured request for ".concat(o," failed to return content."));case 2:c=u.content,e.n=7;break;case 3:if(h=i,p=$4.toJSONSchema(r),m=F3(p,h),g=JSON.stringify(p,null,2),v=l.prompts[i]){e.n=4;break}throw new Error('Prompt template for mode "'.concat(i,'" not found.'));case 4:return y={example_response:m},"json"===h&&(y.schema=g),b=Oq().compile(v,{noEscape:!0,strict:!0})(y),e.n=5,i5(t,[].concat(B3(n),[{role:"user",content:b}]),a,{},void 0,s);case 5:if(u=e.v,null!==(f=u)&&void 0!==f&&f.content){e.n=6;break}throw new Error("Structured request for ".concat(o," failed to return content."));case 6:c=M3(u.content,h,{schema:p});case 7:if((O=r.safeParse(c)).success){e.n=8;break}throw console.error("Zod validation failed:",O.error.issues),console.error("Raw content parsed:",c),new Error("Model response failed schema validation for ".concat(o,"."));case 8:return e.a(2,O.data)}},e)})),c5.apply(this,arguments)}function d5(e){return d5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d5(e)}function f5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h5(r.key),r)}}function h5(e){var t=function(e,t){if("object"!=d5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d5(t)?t:t+""}var p5=function(){return function(e,t,n){return t&&f5(e.prototype,t),n&&f5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=h5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"events",{})},[{key:"on",value:function(e,t){(this.events[e]=this.events[e]||[]).push(t)}},{key:"off",value:function(e,t){var n=this.events[e];n&&(this.events[e]=n.filter(function(e){return e!==t}))}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.events[e];o&&o.forEach(function(e){return e.apply(void 0,n)})}}])}(),m5=new p5;function g5(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return v5(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(v5(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,v5(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,v5(d,"constructor",u),v5(u,"constructor",l),l.displayName="GeneratorFunction",v5(u,o,"GeneratorFunction"),v5(d),v5(d,o,"Generator"),v5(d,r,function(){return this}),v5(d,"toString",function(){return"[object Generator]"}),(g5=function(){return{w:i,m:f}})()}function v5(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}v5=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){v5(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},v5(e,t,n,r)}function y5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y5(Object(n),!0).forEach(function(t){O5(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O5(e,t,n){return(t=T5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w5(e){return w5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w5(e)}function S5(e){return function(e){if(Array.isArray(e))return _5(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k5(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x5(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k5(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function k5(e,t){if(e){if("string"==typeof e)return _5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_5(e,t):void 0}}function _5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P5(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function E5(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){P5(i,r,o,a,s,"next",e)}function s(e){P5(i,r,o,a,s,"throw",e)}a(void 0)})}}function $5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T5(r.key),r)}}function T5(e){var t=function(e,t){if("object"!=w5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w5(t)?t:t+""}var C5=new Set(["triggerNode","slashCommandNode","menuTriggerNode","messageToolbarTriggerNode","quickReplyTriggerNode","manualTriggerNode"]),j5=function(){return function(e,t,n){return t&&$5(e.prototype,t),n&&$5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeExecutors=t},[{key:"executeFlow",value:(t=E5(g5().m(function e(t,n,r,o,i,a){var s,l,u,c,d,f,h,p,m,g,v,y,b,O,w,S,x,k,_,P,E,$,T,C,j,N,A,I,M,D,R,Q,z,L,Z,F,U,V,G,B,X,Y,W,q,H,K,J,ee=arguments;return g5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(s=ee.length>6&&void 0!==ee[6]?ee[6]:{},l=ee.length>7&&void 0!==ee[7]?ee[7]:[],console.log("[Flowchart] Executing flow (runId: ".concat(t,", depth: ").concat(i,") with args"),r),u={},c=new Map,d={executedNodes:[]},f=void 0,h=n.nodes,p=n.edges,s.endNodeId){for(m=new Set,g=[s.endNodeId],m.add(s.endNodeId),v=new Map,n.nodes.forEach(function(e){return v.set(e.id,[])}),n.edges.forEach(function(e){var t;null===(t=v.get(e.target))||void 0===t||t.push(e.source)});g.length>0;){y=g.shift(),b=v.get(y)||[],O=x5(b);try{for(O.s();!(w=O.n()).done;)S=w.value,m.has(S)||(m.add(S),g.push(S))}catch(e){O.e(e)}finally{O.f()}}h=n.nodes.filter(function(e){return m.has(e.id)}),p=n.edges.filter(function(e){return m.has(e.source)&&m.has(e.target)})}x={},k=new Map(h.map(function(e){return[e.id,[]]})),_=new Map(h.map(function(e){return[e.id,e]})),P=x5(h);try{for(P.s();!(E=P.n()).done;)$=E.value,x[$.id]=0}catch(e){P.e(e)}finally{P.f()}T=x5(p);try{for(T.s();!(C=T.n()).done;)j=C.value,_.has(j.source)&&_.has(j.target)&&(x[j.target]++,k.get(j.source).push(j))}catch(e){T.e(e)}finally{T.f()}if(N=[],!s.startNodeId){e.n=2;break}if(_.get(s.startNodeId)){e.n=1;break}throw new Error('Start node with ID "'.concat(s.startNodeId,'" not found.'));case 1:N.push(s.startNodeId),e.n=3;break;case 2:N.push.apply(N,S5(h.filter(function(e){return 0===x[e.id]}).map(function(e){return e.id})));case 3:e.p=3;case 4:if(!(N.length>0)){e.n=16;break}if(null==a||!a.aborted){e.n=5;break}throw new DOMException("Flow execution was aborted.","AbortError");case 5:if(I=N.shift(),M=_.get(I),!s.activatedNodeId||!C5.has(M.type)||M.id===s.activatedNodeId){e.n=6;break}return e.a(3,4);case 6:if(null==(D=$E.nodeDefinitionMap.get(M.type))||!D.isVisual){e.n=7;break}return e.a(3,4);case 7:if(null===(A=M.data)||void 0===A||!A.disabled){e.n=8;break}return e.a(3,4);case 8:return R=0===x[I],Q={},s.activatedNodeId?I===s.activatedNodeId&&(Q=r):s.startNodeId?I===s.startNodeId&&(Q=r):R&&(Q=r),z=this.getNodeInputs(M,p,u,Q,_,s.startNodeId),m5.emit("node:run:start",{runId:t,nodeId:I}),L={status:"completed",input:z,output:{},error:void 0},e.p=9,e.n=10,this.executeNode(M,z,{runId:t,flow:n,dependencies:o,executionVariables:c,depth:i,signal:a,executionPath:l});case 10:if((Z=e.v)!==XC){e.n=11;break}return console.log("[Flowchart] Flow terminated gracefully by EndNode ".concat(M.id,".")),L.output={},f={},d.executedNodes.push({nodeId:M.id,type:M.type,input:z,output:"[TERMINATED]"}),d.lastOutput=f,e.a(2,d);case 11:F=(null==D?void 0:D.handles.inputs.some(function(e){return"main"===e.id}))&&(null==D?void 0:D.handles.outputs.some(function(e){return"main"===e.id})),U=Z,F&&(V=z.main,U="object"===w5(Z)&&null!==Z?b5(b5({},Z),{},{main:V}):b5(b5({},void 0!==Z?{result:Z}:{}),{},{main:V})),L.output=U,e.n=13;break;case 12:e.p=12,K=e.v,L.status="error",L.error=K.message,L.output=null;case 13:if(u[I]=L.output,f=L.output,d.executedNodes.push({nodeId:M.id,type:M.type,input:z,output:L.output}),m5.emit("node:run:end",{runId:t,nodeId:M.id,report:L}),"error"!==L.status){e.n=14;break}throw(G=new Error(L.error)).nodeId=M.id,G;case 14:if(I!==s.endNodeId){e.n=15;break}return console.log("[Flowchart] Flow execution stopped at designated node ".concat(I,".")),e.a(3,16);case 15:B=k.get(I)||[],X=B,null!=D&&D.determineEdgesToFollow&&(X=D.determineEdgesToFollow(L.output,B)),Y=x5(X);try{for(Y.s();!(W=Y.n()).done;)q=W.value,H=q.target,void 0!==x[H]&&(x[H]--,0===x[H]&&N.push(H))}catch(e){Y.e(e)}finally{Y.f()}e.n=4;break;case 16:e.n=18;break;case 17:e.p=17,(J=e.v)instanceof DOMException&&"AbortError"===J.name||console.error("[Flowchart] Flow execution aborted due to an error.",J),d.error={nodeId:J.nodeId||"unknown",message:J.message||String(J)};case 18:return d.lastOutput=f,console.log("[Flowchart] Flow execution finished."),e.a(2,d)}},e,this,[[9,12],[3,17]])})),function(e,n,r,o,i,a){return t.apply(this,arguments)})},{key:"getNodeInputs",value:function(e,t,n,r,o,i){var a=b5({},r);if(e.id===i)return a;var s,l=t.filter(function(t){return t.target===e.id}),u=x5(l);try{for(u.s();!(s=u.n()).done;){var c,d=s.value;if(!Object.prototype.hasOwnProperty.call(n,d.source)){var f,h,p=o.get(d.source),m=null!==(f=null==p?void 0:p.type)&&void 0!==f?f:"unknown";throw new Error('Required input for handle "'.concat(null!==(h=d.targetHandle)&&void 0!==h?h:"default",'" is missing. Its source node "').concat(m," (").concat(d.source,')" was not executed.'))}var g=n[d.source],v=o.get(d.source);if(void 0!==g){var y,b=null!==(c=d.targetHandle)&&void 0!==c?c:"main",O=void 0;if("ifNode"===(null==v?void 0:v.type))O=g.main;else O=g[null!==(y=d.sourceHandle)&&void 0!==y?y:"result"];a[b]=O}}}catch(e){u.e(e)}finally{u.f()}return a}},{key:"executeNode",value:(e=E5(g5().m(function e(t,n,r){var o,i,a,s;return g5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=this.nodeExecutors.get(t.type)){e.n=1;break}throw new Error('No executor found for node type "'.concat(t.type,"\". Make sure it's registered correctly."));case 1:return e.p=1,e.n=2,o(t,n,r);case 2:return e.a(2,e.v);case 3:throw e.p=3,s=e.v,i=s instanceof Error?s.message:String(s),(a=new Error("Execution failed at node ".concat(t.id," (").concat(t.type,"): ").concat(i))).nodeId=t.id,a;case 4:return e.a(2)}},e,this,[[1,3]])})),function(t,n,r){return e.apply(this,arguments)})}]);var e,t}(),N5=(e=>(e.APP_READY="app_ready",e.EXTRAS_CONNECTED="extras_connected",e.MESSAGE_SWIPED="message_swiped",e.MESSAGE_SENT="message_sent",e.MESSAGE_RECEIVED="message_received",e.MESSAGE_EDITED="message_edited",e.MESSAGE_DELETED="message_deleted",e.MESSAGE_UPDATED="message_updated",e.MESSAGE_FILE_EMBEDDED="message_file_embedded",e.MORE_MESSAGES_LOADED="more_messages_loaded",e.IMPERSONATE_READY="impersonate_ready",e.CHAT_CHANGED="chat_id_changed",e.GENERATION_AFTER_COMMANDS="GENERATION_AFTER_COMMANDS",e.GENERATION_STARTED="generation_started",e.GENERATION_STOPPED="generation_stopped",e.GENERATION_ENDED="generation_ended",e.EXTENSIONS_FIRST_LOAD="extensions_first_load",e.EXTENSION_SETTINGS_LOADED="extension_settings_loaded",e.SETTINGS_LOADED="settings_loaded",e.SETTINGS_UPDATED="settings_updated",e.GROUP_UPDATED="group_updated",e.MOVABLE_PANELS_RESET="movable_panels_reset",e.SETTINGS_LOADED_BEFORE="settings_loaded_before",e.SETTINGS_LOADED_AFTER="settings_loaded_after",e.CHATCOMPLETION_SOURCE_CHANGED="chatcompletion_source_changed",e.CHATCOMPLETION_MODEL_CHANGED="chatcompletion_model_changed",e.OAI_PRESET_CHANGED_BEFORE="oai_preset_changed_before",e.OAI_PRESET_CHANGED_AFTER="oai_preset_changed_after",e.OAI_PRESET_EXPORT_READY="oai_preset_export_ready",e.OAI_PRESET_IMPORT_READY="oai_preset_import_ready",e.WORLDINFO_SETTINGS_UPDATED="worldinfo_settings_updated",e.WORLDINFO_UPDATED="worldinfo_updated",e.CHARACTER_EDITED="character_edited",e.CHARACTER_PAGE_LOADED="character_page_loaded",e.CHARACTER_GROUP_OVERLAY_STATE_CHANGE_BEFORE="character_group_overlay_state_change_before",e.CHARACTER_GROUP_OVERLAY_STATE_CHANGE_AFTER="character_group_overlay_state_change_after",e.USER_MESSAGE_RENDERED="user_message_rendered",e.CHARACTER_MESSAGE_RENDERED="character_message_rendered",e.FORCE_SET_BACKGROUND="force_set_background",e.CHAT_DELETED="chat_deleted",e.CHAT_CREATED="chat_created",e.GROUP_CHAT_DELETED="group_chat_deleted",e.GROUP_CHAT_CREATED="group_chat_created",e.GENERATE_BEFORE_COMBINE_PROMPTS="generate_before_combine_prompts",e.GENERATE_AFTER_COMBINE_PROMPTS="generate_after_combine_prompts",e.GENERATE_AFTER_DATA="generate_after_data",e.GROUP_MEMBER_DRAFTED="group_member_drafted",e.GROUP_WRAPPER_STARTED="group_wrapper_started",e.GROUP_WRAPPER_FINISHED="group_wrapper_finished",e.WORLD_INFO_ACTIVATED="world_info_activated",e.TEXT_COMPLETION_SETTINGS_READY="text_completion_settings_ready",e.CHAT_COMPLETION_SETTINGS_READY="chat_completion_settings_ready",e.CHAT_COMPLETION_PROMPT_READY="chat_completion_prompt_ready",e.CHARACTER_FIRST_MESSAGE_SELECTED="character_first_message_selected",e.CHARACTER_DELETED="characterDeleted",e.CHARACTER_DUPLICATED="character_duplicated",e.CHARACTER_RENAMED="character_renamed",e.SMOOTH_STREAM_TOKEN_RECEIVED="stream_token_received",e.STREAM_TOKEN_RECEIVED="stream_token_received",e.STREAM_REASONING_DONE="stream_reasoning_done",e.FILE_ATTACHMENT_DELETED="file_attachment_deleted",e.WORLDINFO_FORCE_ACTIVATE="worldinfo_force_activate",e.OPEN_CHARACTER_LIBRARY="open_character_library",e.ONLINE_STATUS_CHANGED="online_status_changed",e.IMAGE_SWIPED="image_swiped",e.CONNECTION_PROFILE_LOADED="connection_profile_loaded",e.TOOL_CALLS_PERFORMED="tool_calls_performed",e.TOOL_CALLS_RENDERED="tool_calls_rendered",e))(N5||{});function A5(e){return function(e){if(Array.isArray(e))return R5(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D5(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||D5(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M5(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=D5(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function D5(e,t){if(e){if("string"==typeof e)return R5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R5(e,t):void 0}}function R5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q5(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return z5(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(z5(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,z5(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,z5(d,"constructor",u),z5(u,"constructor",l),l.displayName="GeneratorFunction",z5(u,o,"GeneratorFunction"),z5(d),z5(d,o,"Generator"),z5(d,r,function(){return this}),z5(d,"toString",function(){return"[object Generator]"}),(Q5=function(){return{w:i,m:f}})()}function z5(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}z5=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){z5(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},z5(e,t,n,r)}function L5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V5(r.key),r)}}function Z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z5(Object(n),!0).forEach(function(t){U5(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U5(e,t,n){return(t=V5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V5(e){var t=function(e,t){if("object"!=G5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=G5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G5(t)?t:t+""}function G5(e){return G5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G5(e)}function B5(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function X5(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){B5(i,r,o,a,s,"next",e)}function s(e){B5(i,r,o,a,s,"throw",e)}a(void 0)})}}var Y5="flowchart_execution_history",W5=["name","description","first_mes","personality","scenario","tags","avatar"];function q5(){return(q5=X5(Q5().m(function e(){var t,n,r;return Q5().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,SillyTavern.libs.localforage.getItem(Y5);case 1:if(t=e.v){e.n=2;break}return e.a(2);case 2:n=t.map(function(e){return F5(F5({},e),{},{timestamp:new Date(e.timestamp)})}),t6.splice.apply(t6,[0,t6.length].concat(A5(n))),e.n=4;break;case 3:e.p=3,r=e.v,console.error("[Flowchart] Failed to load execution history:",r);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function H5(e){if("string"==typeof e&&e.length>2048)return e.substring(0,2048)+"... [truncated]";if(Array.isArray(e))return e.map(H5);if("object"===G5(e)&&null!==e){if("name"in e&&"spec"in e&&"spec_version"in e){for(var t={},n=0,r=W5;n<r.length;n++){var o=r[n];o in e&&(t[o]=e[o])}return t["..."]="[character object sanitized]",t}var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=H5(e[a]));return i}return e}function K5(e){return F5(F5({},e),{},{executedNodes:e.executedNodes.map(function(e){return F5(F5({},e),{},{input:H5(e.input),output:H5(e.output)})})})}function J5(e){return e6.apply(this,arguments)}function e6(){return(e6=X5(Q5().m(function e(t){var n;return Q5().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,SillyTavern.libs.localforage.setItem(Y5,t);case 1:e.n=3;break;case 2:e.p=2,n=e.v,console.error("[Flowchart] Failed to save execution history:",n),t.length>0?(t.pop(),J5(t)):Hr("error","Flowchart: Could not save execution history. Storage quota exceeded.","execution");case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}var t6=[];!function(){q5.apply(this,arguments)}();var n6=function(){return function(e,t,n){return t&&L5(e.prototype,t),n&&L5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U5(this,"registeredEventListeners",new Map),U5(this,"registeredStaticCommands",[]),U5(this,"isListeningToEvents",!1),U5(this,"areDomListenersAttached",!1),U5(this,"abortController",null),U5(this,"isExecuting",!1),U5(this,"currentlyExecutingFlowId",null),U5(this,"flowQueue",[]),this.lowLevelRunner=new j5($E.nodeExecutors),this.dependencies=this.getDependencies(),this.setupEventListeners()},[{key:"getDependencies",value:function(){var e,t=this,n=SillyTavern.getContext().Popup;return{getBaseMessagesForProfile:n5,makeSimpleRequest:s5,makeStructuredRequest:u5,getSillyTavernContext:function(){return SillyTavern.getContext()},createCharacter:pr,saveCharacter:function(e){return async function(e,t){var n;const r=SillyTavern.getContext();if(!e.avatar)throw new Error("`data.avatar` (character filename) is required to save character attributes.");null==e||delete e.json_data,null==(n=null==e?void 0:e.data)||delete n.json_data;const o=r.getRequestHeaders(),i=await fetch("/api/characters/merge-attributes",{method:"POST",headers:o,body:JSON.stringify(e),cache:"no-cache"});if(!i.ok){const e=await i.json().catch(()=>({message:i.statusText}));throw new hr(e.message||`Request failed with status ${i.status}`,i)}t&&await r.getCharacters()}(e,!0)},st_createNewWorldInfo:function(e){return async function(e,{interactive:t=!1}={}){return await(0,z.createNewWorldInfo)(e,{interactive:t})}(e,{interactive:!0})},applyWorldInfoEntry:_r,getWorldInfos:kr,sendChatMessage:function(e,t,n){return async function(e,t,n,r,o){if("user"===t)await(0,Q.sendMessageAsUser)(e,null,o,!1,n??Q.name1,Z.user_avatar??r);else if("assistant"===t){const t=n??Q.name2,i=r??SillyTavern.getContext().characters[Q.this_chid].avatar;await(0,L.sendMessageAs)({name:t,at:o,avatar:i},e)}else await(0,L.sendNarratorMessage)({name:n,at:o},e)}(e,t,n)},deleteMessage:function(e){return SillyTavern.getContext().deleteMessage(e)},hideChatMessageRange:Br,saveChat:function(){return SillyTavern.getContext().saveChat()},st_updateMessageBlock:function(e,t,n){return function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).rerenderMessage,r=void 0===n||n;(0,Q.updateMessageBlock)(e,t,{rerenderMessage:r})}(e,t,n)},st_runRegexScript:function(e,t){return function(e,t,{characterOverride:n=null}={}){return(0,X.runRegexScript)(e,t,{characterOverride:n})}(e,t)},st_setLocalVariable:function(e,t){return function(e,t){Q.chat_metadata.variables||(Q.chat_metadata.variables={}),Q.chat_metadata.variables[e]=t}(e,t)},st_getLocalVariable:function(e){return function(e){var t,n;return null==(n=null==(t=Q.chat_metadata)?void 0:t.variables)?void 0:n[e]}(e)},st_setGlobalVariable:function(e,t){return function(e,t){SillyTavern.getContext().extensionSettings.variables.global[e]=t}(e,t)},st_getGlobalVariable:function(e){return function(e){return SillyTavern.getContext().extensionSettings.variables.global[e]}(e)},executeSlashCommandsWithOptions:function(e){return SillyTavern.getContext().executeSlashCommandsWithOptions(e)},executeSubFlow:(e=X5(Q5().m(function e(n,r,o,i,a){var s,l;return Q5().w(function(e){for(;;)switch(e.p=e.n){case 0:return s=t.currentlyExecutingFlowId,m5.emit("subflow:run:start",{subFlowId:n,parentFlowId:s}),e.p=1,e.n=2,t._executeFlowInternal(n,r,o,{},i,a);case 2:return l=e.v,e.a(2,l);case 3:return e.p=3,m5.emit("subflow:run:end",{subFlowId:n,parentFlowId:s}),e.f(3);case 4:return e.a(2)}},e,null,[[1,,3,4]])})),function(t,n,r,o,i){return e.apply(this,arguments)}),getChatInputValue:function(){var e=document.getElementById("send_textarea");return e?e.value:""},updateChatInputValue:function(e){var t=document.getElementById("send_textarea");t&&(t.value=e,t.dispatchEvent(new Event("input",{bubbles:!0})))},promptUser:function(e,t){return n.show.input("Question",e,t)},confirmUser:function(e){return n.show.confirm("Confirm",e)}}}},{key:"handleMessageToolbarClick",value:function(e){var t=e.target.closest(".flowchart-message-toolbar-button");if(t){var n=t.dataset,r=n.flowId,o=n.nodeId;if(r&&o){var i=e.target.closest(".mes"),a=null==i?void 0:i.getAttribute("mesid");if(a){var s=Number(a),l=SillyTavern.getContext().chat[s];if(l){var u={messageId:s,messageContent:l.mes,messageObject:F5({},l)};this.executeFlow(r,u,0,{activatedNodeId:o})}}}}}},{key:"handleQrButtonClick",value:function(e){var t=e.target.closest(".flowchart-qr-button");if(t){var n=t.dataset,r=n.flowId,o=n.nodeId;r&&o&&this.executeFlow(r,{},0,{activatedNodeId:o})}}},{key:"setupEventListeners",value:function(){if(!this.isListeningToEvents){var e=SillyTavern.getContext().eventSource;m5.on("flow:run:start",function(e){var t=e.runId;return XE.getState().startRun(t)}),m5.on("node:run:start",function(e){var t=e.runId,n=e.nodeId;return XE.getState().setActiveNode(t,n)}),m5.on("node:run:end",function(e){var t=e.runId,n=e.nodeId,r=e.report;return XE.getState().addNodeReport(t,n,r)}),m5.on("flow:run:end",function(e){var t=e.runId,n=e.status,r=e.executedNodes;return XE.getState().endRun(t,n,r)}),this.areDomListenersAttached||(document.addEventListener("click",this.handleMessageToolbarClick.bind(this)),document.addEventListener("click",this.handleQrButtonClick.bind(this)),this.areDomListenersAttached=!0),e.on(N5.CHAT_CHANGED,m0),this.isListeningToEvents=!0}}},{key:"reinitialize",value:function(){var e,t=this,n=SillyTavern.getContext(),r=n.eventSource,o=n.SlashCommandParser,i=n.SlashCommand,a=n.SlashCommandArgument,s=M5(this.registeredEventListeners.entries());try{for(s.s();!(e=s.n()).done;){var l=I5(e.value,2),u=l[0],c=l[1];r.removeListener(u,c)}}catch(e){s.e(e)}finally{s.f()}this.registeredEventListeners.clear(),this.registeredStaticCommands.forEach(function(e){return delete o.commands[e]}),this.registeredStaticCommands=[],Array.from($E.nodeDefinitionMap.values()).filter(function(e){return e.unregisterAll}).forEach(function(e){return e.unregisterAll()});var d=Gr.getSettings();if(d.enabled){var f,h={},p=Object.values(d.flows).filter(function(e){return e.enabled}),m=M5(p);try{for(m.s();!(f=m.n()).done;){var g=f.value,v=g.id,y=g.name,b=g.flow,O=g.allowDangerousExecution,w=E4(b,O,d.flows,v),S=w.isValid,x=w.errors;if(S){var k,_=M5(b.nodes);try{for(_.s();!(k=_.n()).done;){var P,E=k.value;if(null===(P=E.data)||void 0===P||!P.disabled){var $=$E.nodeDefinitionMap.get(E.type);if(null!=$&&$.register)try{$.register(v,E,this)}catch(e){console.error("[Flowchart] Failed to register trigger for node ".concat(E.id,' in flow "').concat(y,'":'),e)}else if("triggerNode"===E.type&&E.data.selectedEventType){var T=E.data.selectedEventType;h[T]||(h[T]=[]),h[T].push({flowId:v,nodeId:E.id})}}}}catch(e){_.e(e)}finally{_.f()}}else console.warn('[Flowchart] Flow "'.concat(y,'" (').concat(v,") is invalid and will not be run. Errors:"),x)}}catch(e){m.e(e)}finally{m.f()}m0();var C,j=i.fromProps({name:ur,helpString:"Manually runs a Flowchart flow by its name.",unnamedArgumentList:[a.fromProps({description:"The name of the flow to run.",isRequired:!0}),a.fromProps({description:"An optional JSON string for initial parameters."})],callback:(C=X5(Q5().m(function e(n,r){var o,i,a,s,l,u,c,f;return Q5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=Array.isArray(r)?r:[r],i=I5(o,2),a=i[0],s=i[1],l=Object.values(d.flows).find(function(e){return e.name===a}),l){e.n=1;break}return e.a(2,'Error: Flow with name "'.concat(a,'" not found.'));case 1:if(u={},!s){e.n=4;break}e.p=2,u=JSON.parse(s),e.n=4;break;case 3:return e.p=3,e.v,e.a(2,'Error: Invalid JSON parameters provided for flow "'.concat(a,'".'));case 4:return e.n=5,t.runFlowManually(l.id,u);case 5:if(null==(c=e.v)||!c.error){e.n=6;break}return e.a(2,"Flow Error: ".concat(c.error.message));case 6:if(null!=(f=null==c?void 0:c.lastOutput)){e.n=7;break}return e.a(2,'Flow "'.concat(a,'" executed successfully.'));case 7:return e.a(2,"object"===G5(f)?WE(f):String(f))}},e,null,[[2,3]])})),function(e,t){return C.apply(this,arguments)})});o.addCommandObject(j),this.registeredStaticCommands.push(ur);var N=i.fromProps({name:cr,helpString:"Stops the currently running Flowchart flow and clears the queue.",callback:function(){return t.abortAllRuns()}});o.addCommandObject(N),this.registeredStaticCommands.push(cr);var A=function(e){var n=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i,a=M5(h[e]);try{for(a.s();!(i=a.n()).done;){var s=i.value;t.executeFlowFromEvent(s.flowId,s.nodeId,r)}}catch(e){a.e(e)}finally{a.f()}};r.on(e,n),t.registeredEventListeners.set(e,n)};for(var I in h)A(I)}}},{key:"_processQueue",value:(s=X5(Q5().m(function e(){var t,n,r,o,i;return Q5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isExecuting&&0!==this.flowQueue.length){e.n=1;break}return e.a(2);case 1:return this.isExecuting=!0,t=this.flowQueue.shift(),n=t.flowId,r=t.initialInput,o=t.options,this.currentlyExecutingFlowId=n,e.p=2,e.n=3,this._executeFlowInternal(n,r,0,o);case 3:e.n=5;break;case 4:e.p=4,i=e.v,console.error("[Flowchart] Critical error during queued flow execution:",i);case 5:return e.p=5,this.isExecuting=!1,this.currentlyExecutingFlowId=null,this._processQueue(),e.f(5);case 6:return e.a(2)}},e,this,[[2,4,5,6]])})),function(){return s.apply(this,arguments)})},{key:"executeFlow",value:(a=X5(Q5().m(function e(t,n){var r,o,i,a,s=arguments;return Q5().w(function(e){for(;;)switch(e.n){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:0,o=s.length>3&&void 0!==s[3]?s[3]:{},i=s.length>4&&void 0!==s[4]?s[4]:[],a=Gr.getSettings().flows.find(function(e){return e.id===t}),a){e.n=1;break}throw new Error("Flow with id ".concat(t," not found."));case 1:if(!(r>10)){e.n=2;break}throw new Error("Flow execution depth limit exceeded (10). Possible infinite recursion.");case 2:if(0!==r){e.n=3;break}return this.flowQueue.push({flowId:t,initialInput:n,options:o}),this.isExecuting?Hr("info",'Flowchart: Another flow is running. "'.concat(a.name,'" has been queued.'),"execution"):this._processQueue(),e.a(2,{executedNodes:[],lastOutput:void 0});case 3:return e.a(2,this._executeFlowInternal(t,n,r,o,i))}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"_executeFlowInternal",value:(i=X5(Q5().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O,w,S,x,k=arguments;return Q5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=k.length>3&&void 0!==k[3]?k[3]:{},i=k.length>4&&void 0!==k[4]?k[4]:[],a=k.length>5?k[5]:void 0,s=Gr.getSettings().flows.find(function(e){return e.id===t}),s){e.n=1;break}return l="Flow with id ".concat(t," not found."),console.error("[Flowchart] ".concat(l)),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:l}});case 1:if(!i.includes(t)){e.n=2;break}return u=[].concat(A5(i),[t]).map(function(e){var t;return(null===(t=Gr.getSettings().flows.find(function(t){return t.id===e}))||void 0===t?void 0:t.name)||e}),Hr("error",c="Circular sub-flow execution detected: ".concat(u.join(" -> ")),"execution"),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:c}});case 2:if(s.enabled||!(r>0)){e.n=3;break}return Hr("error",d='Flow "'.concat(s.name,'" is disabled and cannot be run as a sub-flow.'),"execution"),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:d}});case 3:if(f=E4(s.flow,s.allowDangerousExecution,Gr.getSettings().flows,t),h=f.isValid,p=f.errors,h){e.n=4;break}return Hr("error",m='Flow "'.concat(s.name,'" is invalid and cannot be run. Errors: ').concat(p.join(", ")),"execution"),console.error("[Flowchart] ".concat(m)),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:"Validation failed: ".concat(p[0])}});case 4:return g=s.flow,v=[].concat(A5(i),[t]),y=0===r,b=a||WT(),y&&(this.abortController=new AbortController),e.p=5,y&&m5.emit("flow:run:start",{runId:b}),e.n=6,this.lowLevelRunner.executeFlow(b,g,n,this.dependencies,r,null===(w=this.abortController)||void 0===w?void 0:w.signal,o,v);case 6:O=e.v,y&&(O.error?(O.error.message.includes("aborted")?Hr("info",'Flow "'.concat(s.name,'" was stopped.'),"execution"):Hr("error",'Flow "'.concat(s.name,'" failed: ').concat(O.error.message),"execution"),m5.emit("flow:run:end",{runId:b,status:"error",executedNodes:O.executedNodes})):m5.emit("flow:run:end",{runId:b,status:"completed",executedNodes:O.executedNodes}),S=K5(O),t6.unshift(F5(F5({},S),{},{flowId:s.name,timestamp:new Date})),t6.length>50&&t6.pop(),J5(t6)),e.n=8;break;case 7:e.p=7,x=e.v,console.error("[Flowchart] Critical error during flow execution: ".concat(x.message)),O={executedNodes:[],error:{nodeId:"CRITICAL",message:x.message}};case 8:return e.p=8,y&&(this.abortController=null),e.f(8);case 9:return e.a(2,O)}},e,this,[[5,7,8,9]])})),function(e,t,n){return i.apply(this,arguments)})},{key:"executeFlowFromEvent",value:(o=X5(Q5().m(function e(t,n,r){var o,i,a,s,l,u,c,d,f,h,p;return Q5().w(function(e){for(;;)switch(e.n){case 0:if(i=Gr.getSettings().flows.find(function(e){return e.id===t}),i&&i.flow){e.n=1;break}return console.error("[Flowchart] Flow with id ".concat(t," not found for event trigger.")),e.a(2);case 1:if(a=i.flow.nodes.find(function(e){return e.id===n}),a){e.n=2;break}return e.a(2);case 2:if(null!==(o=a.data.preventRecursive)&&void 0!==o&&!o){e.n=3;break}if(s=this.isExecuting&&this.currentlyExecutingFlowId===t,l=this.flowQueue.some(function(e){return e.flowId===t}),!s&&!l){e.n=3;break}return console.log('[Flowchart] Suppressing recursive event trigger for flow "'.concat(i.name,'". It is already running or queued.')),e.a(2);case 3:if(u=a.data.selectedEventType,!((c=uE[u])&&Object.keys(c).length>0)){e.n=5;break}if(f=Object.fromEntries(Object.keys(c).map(function(e,t){return[e,r[t]]})),h=j_(c),(p=h.safeParse(f)).success){e.n=4;break}return console.error('[Flowchart] Event arguments for "'.concat(u,'" failed validation/coercion:'),p.error),Hr("error",'Flow "'.concat(i.name,'" could not start due to invalid event data.'),"execution"),e.a(2);case 4:d=p.data,e.n=6;break;case 5:d={allArgs:r},r.forEach(function(e,t){d["arg".concat(t)]=e});case 6:return e.a(2,this.executeFlow(t,d,0))}},e,this)})),function(e,t,n){return o.apply(this,arguments)})},{key:"executeFlowFromSlashCommand",value:(r=X5(Q5().m(function e(t,n,r,o){var i,a,s,l,u,c,d,f,h,p,m,g,v,y,b;return Q5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=Gr.getSettings().flows.find(function(e){return e.id===t}),i){e.n=1;break}return e.a(2,'Error: Flow with ID "'.concat(t,'" not found.'));case 1:if(a=i.flow.nodes.find(function(e){return e.id===n}),a&&"slashCommandNode"===a.type){e.n=2;break}return e.a(2,'Error: Could not find the corresponding Slash Command trigger in flow "'.concat(i.name,'".'));case 2:s=a.data,l={},u=M5(s.arguments),e.p=3,u.s();case 4:if((c=u.n()).done){e.n=19;break}if(d=c.value,null!=(f=r[d.name])){e.n=6;break}if(!d.isRequired){e.n=5;break}return e.a(2,'Error: Missing required argument "'.concat(d.name,'".'));case 5:return e.a(3,18);case 6:e.p=6,v=d.type,e.n="number"===v?7:"boolean"===v?9:"list"===v?14:15;break;case 7:if(h=parseFloat(f),!isNaN(h)){e.n=8;break}throw new Error("'".concat(f,"' is not a valid number."));case 8:return l[d.name]=h,e.a(3,16);case 9:if("boolean"!=typeof f){e.n=10;break}l[d.name]=f,e.n=13;break;case 10:if("true"!==(p=String(f).toLowerCase())){e.n=11;break}l[d.name]=!0,e.n=13;break;case 11:if("false"!==p){e.n=12;break}l[d.name]=!1,e.n=13;break;case 12:throw new Error("'".concat(f,"' is not a valid boolean (true/false)."));case 13:return e.a(3,16);case 14:return l[d.name]=String(f).split(",").map(function(e){return e.trim()}),e.a(3,16);case 15:return l[d.name]=String(f),e.a(3,16);case 16:e.n=18;break;case 17:return e.p=17,y=e.v,e.a(2,'Error processing argument "'.concat(d.name,'": ').concat(y.message));case 18:e.n=4;break;case 19:e.n=21;break;case 20:e.p=20,b=e.v,u.e(b);case 21:return e.p=21,u.f(),e.f(21);case 22:return m=F5(F5({},l),{},{unnamed:o||""}),e.n=23,this._executeFlowInternal(t,m,0,{activatedNodeId:n});case 23:if(null==(g=e.v)||!g.error){e.n=24;break}return e.a(2,"Flow Error: ".concat(g.error.message));case 24:if(void 0!==(null==g?void 0:g.lastOutput)&&null!==(null==g?void 0:g.lastOutput)){e.n=25;break}return e.a(2,"");case 25:if("object"!==G5(g.lastOutput)){e.n=26;break}return e.a(2,WE(g.lastOutput));case 26:return e.a(2,String(g.lastOutput))}},e,this,[[6,17],[3,20,21,22]])})),function(e,t,n,o){return r.apply(this,arguments)})},{key:"runFlowManually",value:(n=X5(Q5().m(function e(t,n){var r,o,i;return Q5().w(function(e){for(;;)switch(e.n){case 0:if(r=Gr.getSettings(),o=r.flows.find(function(e){return e.id===t}),o){e.n=1;break}return Hr("error",'Flow with ID "'.concat(t,'" not found for manual run.'),"execution"),e.a(2);case 1:if(i=r.flows.find(function(e){return e.id===t}),null!=i&&i.enabled){e.n=2;break}return Hr("error",'Flow "'.concat(o.name,'" is disabled and cannot be run.'),"execution"),e.a(2);case 2:return e.a(2,this.executeFlow(t,null!=n?n:{},0))}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"runFlowFromNode",value:(t=X5(Q5().m(function e(t,n){var r,o,i;return Q5().w(function(e){for(;;)switch(e.n){case 0:if(r=Gr.getSettings(),o=r.flows.find(function(e){return e.id===t}),o){e.n=1;break}return Hr("error",'Flow with ID "'.concat(t,'" not found for manual run.'),"execution"),e.a(2);case 1:if(i=r.flows.find(function(e){return e.id===t}),null!=i&&i.enabled){e.n=2;break}return Hr("error",'Flow "'.concat(o.name,'" is disabled and cannot be run.'),"execution"),e.a(2);case 2:return e.a(2,this.executeFlow(t,{},0,{startNodeId:n}))}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"runFlowToNode",value:(e=X5(Q5().m(function e(t,n){var r,o,i;return Q5().w(function(e){for(;;)switch(e.n){case 0:if(r=Gr.getSettings(),o=r.flows.find(function(e){return e.id===t}),o){e.n=1;break}return Hr("error",'Flow with ID "'.concat(t,'" not found for manual run.'),"execution"),e.a(2);case 1:if(i=r.flows.find(function(e){return e.id===t}),null!=i&&i.enabled){e.n=2;break}return Hr("error",'Flow "'.concat(o.name,'" is disabled and cannot be run.'),"execution"),e.a(2);case 2:return e.a(2,this.executeFlow(t,{},0,{endNodeId:n}))}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"abortCurrentRun",value:function(){var e;null===(e=this.abortController)||void 0===e||e.abort()}},{key:"abortAllRuns",value:function(){var e=this.flowQueue.length,t=this.isExecuting&&!!this.abortController&&!this.abortController.signal.aborted;e>0&&(this.flowQueue=[]),t&&this.abortCurrentRun();var n=[];t&&n.push("the current flow"),e>0&&n.push("".concat(e," queued flow").concat(e>1?"s":""));var r=n.length>0?"Flowchart: Stopped ".concat(n.join(" and "),"."):"Flowchart: No flows are currently running or queued.";return Hr("info",r,"execution"),r}}]);var e,t,n,r,o,i,a,s}(),r6=new n6;function o6(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a6(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function i6(e){return function(e){if(Array.isArray(e))return s6(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a6(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a6(e,t){if(e){if("string"==typeof e)return s6(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s6(e,t):void 0}}function s6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l6=function(e,t){var n=structuredClone(e||{});if(!t)return n;var r=structuredClone(t);return Object.assign(n,r)},u6=function(e,t){var n,r,o=null!==(n=null===(r=e.getSuggestionBlueprints)||void 0===r?void 0:r.call(e,{direction:t}))&&void 0!==n?n:[];return 0===o.length?[void 0]:[void 0].concat(i6(o.map(function(e){return e||void 0})))},c6=function(e,t,n,r,o){var i,a=e.handles[n],s=[],l=function(e,t){if(e.id){var n=s.findIndex(function(t){return t.spec.id===e.id});-1!==n?t&&(s[n]={spec:e,isDynamic:t}):s.push({spec:e,isDynamic:t})}else s.push({spec:e,isDynamic:t})},u=o6(a);try{for(u.s();!(i=u.n()).done;){l(i.value,!1)}}catch(e){u.e(e)}finally{u.f()}if(e.getDynamicHandles){var c,d=o6(e.getDynamicHandles(t,r,o)[n]);try{for(d.s();!(c=d.n()).done;){l(c.value,!0)}}catch(e){d.e(e)}finally{d.f()}}return s},d6=function(e,t){return e&&t?e===t?"exact":OE(e,t)?"convertible":"fallback":"fallback"},f6=function(e,t){return t.id?"".concat(e," (").concat(t.id,")"):e},h6=function(e){var t=e.matchQuality,n=e.familyMatch,r=e.connectingDataType,o=e.handleDataType;return"exact"===t||r&&o&&r===o?0:n&&"convertible"===t?1:"convertible"===t?2:3},p6=function(e,t){var n=l6(e.initialData,t);return n._version=e.currentVersion,n};function m6(e){return m6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m6(e)}function g6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g6(Object(n),!0).forEach(function(t){y6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y6(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m6(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O6(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O6(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w6=function(e){var t,n=e.edges,r=e.getNodes,o=e.addNode,i=e.duplicateNode,a=e.toggleNodeDisabled,s=e.copySelection,l=e.setNodes,u=e.deleteElements,c=e.screenToFlowPosition,d=e.resume,f=e.baseOnConnect,h=(0,$.useRef)(null),p=(0,$.useRef)(!1),m=(0,$.useRef)(!1),g=b6((0,$.useState)(null),2),v=g[0],y=g[1],b=eo(null!==(t=null==v?void 0:v.filter.searchTerm)&&void 0!==t?t:"",200),O=(0,$.useCallback)(function(){y(null),h.current=null,m.current=!1},[]),w=(0,$.useCallback)(function(e){p.current=!0,f(e)},[f]),S=(0,$.useCallback)(function(e,t){var o,i="source"===t.handleType||"target"===t.handleType?t.handleType:null;if(!i||!t.nodeId)return h.current=null,void(p.current=!1);var a,s=r(),l=s.find(function(e){return e.id===t.nodeId});if(l&&l.type){var u=$E.nodeDefinitionMap.get(l.type);if(u){var c,d=function(e,t,n,r,o,i){var a;return null===(a=c6(e,t,n,o,i).find(function(e){return e.spec.id===r}))||void 0===a?void 0:a.spec}(u,l,"source"===i?"outputs":"inputs",null!==(c=t.handleId)&&void 0!==c?c:null,s,n);a=null==d?void 0:d.type}}h.current={nodeId:t.nodeId,handleId:null!==(o=t.handleId)&&void 0!==o?o:null,handleKind:i,dataType:a},p.current=!1},[r,n]),x=(0,$.useCallback)(function(){m.current?m.current=!1:O()},[O]),k=(0,$.useCallback)(function(e,t){e.preventDefault(),d();var n=e.target.closest(".flowchart-editor-area");if(n){var o=n.getBoundingClientRect(),c=Gr.getSettings().activeFlow;m.current=!0,h.current=null,y({x:e.clientX-o.left,y:e.clientY-o.top,items:[{kind:"action",label:"Copy",action:function(){l(r().map(function(e){return v6(v6({},e),{},{selected:e.id===t.id})})),setTimeout(function(){s(),Hr("info","Node '".concat(t.data.label||t.type,"' copied."),"ui_action")},50),O()}},{kind:"action",label:"Duplicate",action:function(){i(t.id),O()}},{kind:"action",label:"Run From Here",action:function(){r6.runFlowFromNode(c,t.id),O()}},{kind:"action",label:"Run To Here",action:function(){r6.runFlowToNode(c,t.id),O()}},{kind:"action",label:"Delete",action:function(){u({nodes:[t]}),O()}},{kind:"action",label:t.data.disabled?"Enable":"Disable",action:function(){a([t.id]),O()}}],filter:{showSearch:!1,searchTerm:""}})}},[i,u,a,s,l,r,d,O]),_=(0,$.useCallback)(function(e){e.preventDefault(),d();var t=e.target.closest(".flowchart-editor-area");if(t){var n=t.getBoundingClientRect(),r=c({x:e.clientX,y:e.clientY});m.current=!0,h.current=null,y({x:e.clientX-n.left,y:e.clientY-n.top,items:$E.allNodeDefinitions.map(function(e){return{kind:"action",label:e.label,action:function(){!function(e,t){o({type:e,position:{x:r.x-75,y:r.y-25},data:t})}(e.type,p6(e)),O()}}}),filter:{showSearch:!0,searchTerm:""}})}},[c,o,d,O]),P=(0,$.useCallback)(function(e){var t=h.current;if(!t||p.current)return h.current=null,void(p.current&&(p.current=!1));e.stopPropagation();var i=t.nodeId,a=t.handleId,s=t.handleKind,l=t.dataType,u=r(),f=u.find(function(e){return e.id===i});if(f&&f.type){d();var g=function(e){return i6(e).sort(function(e,t){var n=h6(e)-h6(t);return 0!==n?n:e.handleDataType&&t.handleDataType&&e.handleDataType!==t.handleDataType?e.handleDataType.localeCompare(t.handleDataType):e.label.localeCompare(t.label)})}(function(e){var t=e.startNode,n=e.startHandleId,r=e.handleKind,o=e.nodes,i=e.edges,a=e.connectingDataType,s=[];if("source"===r){var l,u=o6($E.allNodeDefinitions);try{for(u.s();!(l=u.n()).done;){var c,d=l.value,f=o6(u6(d,"inputs"));try{for(f.s();!(c=f.n()).done;){var h,p,m=c.value,g={id:"temp-target",type:d.type,data:l6(d.initialData,null!==(h=null==m?void 0:m.dataOverrides)&&void 0!==h?h:void 0),position:{x:0,y:0}},v=[].concat(i6(o),[g]),y=o6(c6(d,g,"inputs",v,i));try{for(y.s();!(p=y.n()).done;){var b,O=p.value.spec;if(w4({source:t.id,sourceHandle:n,target:g.id,targetHandle:null!==(b=O.id)&&void 0!==b?b:null},v,i)){var w,S=null!=m&&m.labelSuffix?"".concat(d.label," ").concat(m.labelSuffix):d.label;s.push({nodeType:d.type,label:f6(S,O),sourceHandle:n,targetHandle:null!==(w=O.id)&&void 0!==w?w:null,handleDataType:O.type,matchQuality:d6(a,O.type),familyMatch:!!a&&!!O.type&&wE(a,O.type),connectingDataType:a,dataOverrides:null!=m&&m.dataOverrides?structuredClone(m.dataOverrides):void 0,blueprintId:null==m?void 0:m.id})}}}catch(e){y.e(e)}finally{y.f()}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){u.e(e)}finally{u.f()}}else{var x,k=o6($E.allNodeDefinitions);try{for(k.s();!(x=k.n()).done;){var _,P=x.value,E=o6(u6(P,"outputs"));try{for(E.s();!(_=E.n()).done;){var $,T,C=_.value,j={id:"temp-source",type:P.type,data:l6(P.initialData,null!==($=null==C?void 0:C.dataOverrides)&&void 0!==$?$:void 0),position:{x:0,y:0}},N=[].concat(i6(o),[j]),A=o6(c6(P,j,"outputs",N,i));try{for(A.s();!(T=A.n()).done;){var I,M=T.value.spec;if(w4({source:j.id,sourceHandle:null!==(I=M.id)&&void 0!==I?I:null,target:t.id,targetHandle:n},N,i)){var D,R=null!=C&&C.labelSuffix?"".concat(P.label," ").concat(C.labelSuffix):P.label;s.push({nodeType:P.type,label:f6(R,M),sourceHandle:null!==(D=M.id)&&void 0!==D?D:null,targetHandle:n,handleDataType:M.type,matchQuality:d6(a,M.type),familyMatch:!!a&&!!M.type&&wE(a,M.type),connectingDataType:a,dataOverrides:null!=C&&C.dataOverrides?structuredClone(C.dataOverrides):void 0,blueprintId:null==C?void 0:C.id})}}}catch(e){A.e(e)}finally{A.f()}}}catch(e){E.e(e)}finally{E.f()}}}catch(e){k.e(e)}finally{k.f()}}return s}({startNode:f,startHandleId:a,handleKind:s,nodes:u,edges:n,connectingDataType:l}));if(0!==g.length){var v="touches"in e?e.touches[0].clientX:e.clientX,b="touches"in e?e.touches[0].clientY:e.clientY,S=e.target.closest(".flowchart-editor-area");if(S){var x=S.getBoundingClientRect(),k=c({x:v,y:b}),_=v-x.left,P=b-x.top,E=function(e){var t=$E.nodeDefinitionMap.get(e.nodeType);if(t){O();var n="source"===s?50:-250,r=p6(t,e.dataOverrides),a=o({type:e.nodeType,position:{x:k.x+n,y:k.y},data:r}),l="source"===s?{source:i,sourceHandle:e.sourceHandle,target:a.id,targetHandle:e.targetHandle}:{source:a.id,sourceHandle:e.sourceHandle,target:i,targetHandle:e.targetHandle};h.current=null,setTimeout(function(){return w(l)},10)}};if(1!==g.length){var $=_,T=P;$+220>x.width&&($-=220),T+300>x.height&&(T=x.height-310),m.current=!0,y({x:$,y:T,items:g.map(function(e){return{kind:"connectionSuggestion",label:e.label,action:function(){return E(e)},meta:{nodeType:e.nodeType,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,handleKind:s,targetDataType:e.handleDataType,matchQuality:e.matchQuality,familyMatch:e.familyMatch,connectingDataType:e.connectingDataType,blueprintId:e.blueprintId}}}),filter:{showSearch:!0,searchTerm:""}}),h.current=null}else E(g[0])}else h.current=null}else h.current=null}else h.current=null},[r,n,d,c,o,O,w]),E=(0,$.useMemo)(function(){if(!v)return[];if(!v.filter.showSearch||!b)return v.items;var e=b.toLowerCase();return v.items.filter(function(t){return t.label.toLowerCase().includes(e)})},[v,b]),T=(0,$.useCallback)(function(e){y(function(t){return t?v6(v6({},t),{},{filter:v6(v6({},t.filter),{},{searchTerm:e})}):null})},[]);return{contextMenu:v,filteredMenuOptions:E,onConnect:w,onConnectStart:S,onConnectEnd:P,onNodeContextMenu:k,onPaneContextMenu:_,onPaneClick:x,closeContextMenu:O,updateSearchTerm:T}};function S6(e){return S6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S6(e)}function x6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x6(Object(n),!0).forEach(function(t){_6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _6(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=S6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S6(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P6=function(e){var t=e.invalidNodeIds,n=e.errorsByNodeId,r=O4(),o=r.nodes,i=r.edges,a=r.onNodesChange,s=r.onEdgesChange,l=r.onConnect,u=r.addNode,c=r.duplicateNode,d=r.toggleNodeDisabled,f=r.copySelection,h=r.setNodes,p=r.setEdges,m=Od(),g=m.screenToFlowPosition,v=m.getNodes,y=m.deleteElements,b=XE(function(e){return{isVisualizationVisible:e.isVisualizationVisible,nodeReports:e.nodeReports,activeNodeId:e.activeNodeId}}),O=b.isVisualizationVisible,w=b.nodeReports,S=b.activeNodeId,x=O4.temporal.getState(),k=x.pause,_=x.resume;(0,$.useEffect)(function(){var e=function(e){var t,n=!!document.querySelector(".flowchart-data-popup"),r=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||!(null===(t=document.activeElement)||void 0===t||!t.closest(".cm-content"));if(n&&!r&&"Space"===e.code){e.preventDefault();var o=v().filter(function(e){return e.selected});o.length>0&&d(o.map(function(e){return e.id}))}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[v,d]);var P,T=w6({edges:i,getNodes:v,addNode:u,duplicateNode:c,toggleNodeDisabled:d,copySelection:f,setNodes:h,deleteElements:y,screenToFlowPosition:g,resume:_,baseOnConnect:l}),C=T.contextMenu,N=T.filteredMenuOptions,A=T.onConnect,I=T.onConnectStart,M=T.onConnectEnd,D=T.onNodeContextMenu,R=T.onPaneContextMenu,Q=T.onPaneClick,z=T.closeContextMenu,L=T.updateSearchTerm,Z=(0,$.useCallback)(function(e){return w4(e,v(),i)},[v,i]),F=(0,$.useMemo)(function(){return o.map(function(e){var r=[];if(t.has(e.id)&&r.push("flow-node-invalid"),e.id===S)r.push("flow-node-executing");else if(O&&e.id in w){var o=w[e.id];r.push("error"===(null==o?void 0:o.status)?"flow-node-error":"flow-node-success")}var i=n.get(e.id);return k6(k6({},e),{},{data:k6(k6({},e.data),{},{_validationErrors:i}),className:r.join(" ")})})},[o,t,O,w,S,n]),U=(0,$.useMemo)(function(){var e=v();return i.map(function(t){var n,r=e.find(function(e){return e.id===t.source});if(!r)return t;var o=RE(r,t.sourceHandle||null,"output",e,i),a=vE[null!==(n=null==o?void 0:o.type)&&void 0!==n?n:mE.ANY];return k6(k6({},t),{},{style:{stroke:a,strokeWidth:2}})})},[i,v]),V=(0,$.useCallback)(function(){k(),z()},[k,z]),G=(0,$.useCallback)(function(){_()},[_]),B=(0,$.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),X=(0,$.useCallback)(function(e){e.preventDefault();var t=e.dataTransfer.getData("application/reactflow/node-type");if(t){var n=g({x:e.clientX,y:e.clientY}),r=$E.nodeDefinitionMap.get(t);r&&u({type:t,position:n,data:p6(r)})}},[g,u]);return(0,E.jsxs)("div",{className:"flowchart-editor-canvas",onContextMenu:function(e){return e.preventDefault()},children:[(0,E.jsxs)(Kf,{nodes:F,edges:U,onNodesChange:a,onEdgesChange:s,onConnect:A,onConnectStart:I,onConnectEnd:M,onNodeContextMenu:D,onEdgeClick:function(e,t){p(i.map(function(e){return k6(k6({},e),{},{selected:e.id===t.id})}))},onPaneClick:Q,onPaneContextMenu:R,onNodeDragStart:V,onNodeDragStop:G,onDragOver:B,onDrop:X,nodeTypes:$E.nodeTypesWithFallback,colorMode:"dark",fitView:!0,isValidConnection:Z,minZoom:.1,deleteKeyCode:["Delete","Backspace"],proOptions:{hideAttribution:!0},children:[(0,E.jsx)(lh,{color:"#444",gap:15,variant:oh.Dots}),(0,E.jsx)(vh,{}),(0,E.jsx)(Ph,{})]}),(P=C,P?(0,E.jsxs)("div",{className:"flowchart-context-menu",style:{top:P.y,left:P.x},onMouseDown:function(e){return e.stopPropagation()},children:[P.filter.showSearch&&(0,E.jsx)("div",{className:"context-menu-search-wrapper",children:(0,E.jsx)(j,{type:"text",placeholder:"Search to add...",value:P.filter.searchTerm,onChange:function(e){return L(e.target.value)},autoFocus:!0})}),(0,E.jsx)("ul",{children:N.length>0?N.map(function(e,t){return(0,E.jsx)("li",{onClick:e.action,title:e.label,children:e.label},t)}):P.filter.showSearch?(0,E.jsx)("li",{className:"no-results",children:"No matching nodes"}):(0,E.jsx)("li",{className:"no-actions",children:"No actions"})})]}):null)]})},E6=function(e){var t=e.flowItems,n=e.activeFlowId,r=e.presetButtons,o=e.onSelectFlow,i=e.onItemsChange,a=e.onCreateFlow,s=e.onRenameFlow,l=e.onDeleteFlow,u=e.isFlowEnabled,c=e.onToggleFlowEnabled,d=e.isDangerousAllowed,f=e.onToggleDangerous,h=e.runId,p=e.isVisualizationVisible,m=e.onToggleVisualization,g=e.onClearRun,v=e.isValid,y=e.errors,b=e.runStatus,O=e.onRunFlow,w=e.onStopFlow;return(0,E.jsxs)("div",{className:"flowchart-preset-selector",style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,E.jsx)(lr,{label:"Flow",items:t,value:n,onChange:o,onItemsChange:i,onCreate:a,onRename:s,onDelete:l,enableCreate:!0,enableRename:!0,enableDelete:!0,buttons:r}),(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,E.jsx)(j,{type:"checkbox",id:"flow-enabled-toggle",checked:u,onChange:c,title:"Enable or disable this flow from running automatically."}),(0,E.jsx)("label",{htmlFor:"flow-enabled-toggle",children:"Enabled"})]}),(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,E.jsx)(j,{type:"checkbox",id:"flow-dangerous-permission-toggle",checked:d,onChange:f,title:"Allow this flow to execute dangerous nodes like Execute JS or HTTP Request. This can be a security risk."}),(0,E.jsx)("label",{htmlFor:"flow-dangerous-permission-toggle",children:"Allow Dangerous"})]}),(0,E.jsx)("div",{style:{flex:1}}),h&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(C,{onClick:m,children:p?"Hide Last Run":"Show Last Run"}),(0,E.jsx)(C,{color:"secondary",onClick:g,children:"Clear Run"})]}),!v&&(0,E.jsxs)(C,{color:"warning",title:y.join("\n"),children:["Invalid (",y.length,")"]}),"running"===b?(0,E.jsxs)(C,{color:"danger",onClick:w,children:[(0,E.jsx)("i",{className:"fa-solid fa-stop"})," Stop"]}):(0,E.jsxs)(C,{color:"primary",onClick:O,title:"Run the flow starting from Manual Triggers, or from the beginning if none exist.",children:[(0,E.jsx)("i",{className:"fa-solid fa-play"})," Run"]})]})},$6=["Trigger","Logic","Input","Picker","Chat","API Request","Character","Lorebook","JSON","Data Processing","Math & Logic","System","Variables","User Interaction","Utility"];function T6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||C6(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C6(e,t){if(e){if("string"==typeof e)return j6(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j6(e,t):void 0}}function j6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N6=function(){var e=O4(function(e){return e.addNode}),t=Od().screenToFlowPosition,n=T6((0,$.useState)(""),2),r=n[0],o=n[1],i=T6((0,$.useState)(new Set(["Trigger"])),2),a=i[0],s=i[1],l=eo(r,200),u=(0,$.useMemo)(function(){var e=$E.allNodeDefinitions;if(!l)return e;var t=l.toLowerCase();return e.filter(function(e){return e.label.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)})},[l]),c=(0,$.useMemo)(function(){var e,t={},n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C6(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(u);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.category]||(t[r.category]=[]),t[r.category].push(r)}}catch(e){n.e(e)}finally{n.f()}var o=$6;return Object.entries(t).sort(function(e,t){var n=T6(e,1)[0],r=T6(t,1)[0],i=o.indexOf(n),a=o.indexOf(r);return-1!==i&&-1!==a?i-a:-1!==i?-1:-1!==a?1:n.localeCompare(r)})},[u]);return(0,E.jsxs)("div",{className:"flowchart-node-palette",children:[(0,E.jsxs)("div",{className:"palette-header",children:[(0,E.jsx)("h3",{children:"Nodes"}),(0,E.jsx)(j,{value:r,onChange:function(e){return o(e.target.value)},placeholder:"Search...",className:"palette-search"})]}),(0,E.jsx)("div",{className:"palette-categories",children:c.map(function(n){var r=T6(n,2),o=r[0],i=r[1];return(0,E.jsxs)("div",{className:"palette-category ".concat(a.has(o)?"open":""),children:[(0,E.jsxs)("div",{className:"category-label",onClick:function(){s(function(e){var t=new Set(e);return t.has(o)?t.delete(o):t.add(o),t})},children:[o,(0,E.jsx)("span",{className:"fa-solid fa-chevron-right"})]}),a.has(o)&&(0,E.jsx)("div",{className:"category-nodes",children:(0,E.jsx)("div",{className:"category-nodes-list",children:i.map(function(n){return(0,E.jsx)("div",{className:"node-item",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("application/reactflow/node-type",n.type),e.dataTransfer.effectAllowed="move"},onClick:function(r){var o=structuredClone(n.initialData||{});o._version=n.currentVersion,function(n,r,o){var i=document.querySelector(".react-flow"),a=i.clientWidth/2,s=i.clientHeight/2,l=t({x:i.getBoundingClientRect().left+a,y:i.getBoundingClientRect().top+s});e({type:r,position:{x:l.x-75,y:l.y-25},data:o})}(0,n.type,o)},title:n.label,children:n.label},n.type)})})})]},o)})})]})};function A6(e){return A6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A6(e)}function I6(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return M6(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(M6(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,M6(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,M6(d,"constructor",u),M6(u,"constructor",l),l.displayName="GeneratorFunction",M6(u,o,"GeneratorFunction"),M6(d),M6(d,o,"Generator"),M6(d,r,function(){return this}),M6(d,"toString",function(){return"[object Generator]"}),(I6=function(){return{w:i,m:f}})()}function M6(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}M6=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){M6(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},M6(e,t,n,r)}function D6(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function R6(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){D6(i,r,o,a,s,"next",e)}function s(e){D6(i,r,o,a,s,"throw",e)}a(void 0)})}}function Q6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q6(Object(n),!0).forEach(function(t){L6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L6(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=A6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A6(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z6(e){return function(e){if(Array.isArray(e))return V6(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U6(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||U6(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U6(e,t){if(e){if("string"==typeof e)return V6(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V6(e,t):void 0}}function V6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G6=function(e){return e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")},B6=function(){var e,t,n,r=O4(),o=r.nodes,i=r.edges,a=r.loadFlow,s=r.getSpecFlow,l=r.copySelection,u=r.paste,c=O4.temporal.getState(),d=c.undo,f=c.redo,h=Od(),p=h.getNodes,m=h.setViewport,g=h.screenToFlowPosition,v=h.fitView,y=h.getViewport,b=Gr.getSettings(),O=qr(),w=(0,$.useRef)(null),S=(0,$.useRef)(null),x=XE(),k=x.isVisualizationVisible,_=x.runId,P=x.runStatus,T=x.toggleVisualization,C=x.clearRun,j=b.flows.find(function(e){return e.id===b.activeFlow}),N=F6((0,$.useState)([]),2),A=N[0],I=N[1],M=(0,$.useCallback)(function(e){if(e&&b.flows.some(function(t){return t.id===e})){b.activeFlow=e;var t=b.flows.find(function(t){return t.id===e}).flow;a(structuredClone(t)),O4.temporal.getState().clear(),O()}},[b,a,O]);(0,$.useEffect)(function(){var e;b.flows.find(function(e){return e.id===b.activeFlow})||(b.activeFlow=(null===(e=b.flows[0])||void 0===e?void 0:e.id)||"",Gr.saveSettings(),O());var t=b.flows.find(function(e){return e.id===b.activeFlow}),n=(null==t?void 0:t.flow)||{nodes:[],edges:[]},r=null==t?void 0:t.flowVersion;a(structuredClone(n),r),O4.temporal.getState().clear()},[]),(0,$.useEffect)(function(){return w.current&&clearTimeout(w.current),w.current=setTimeout(function(){var e=b.flows.find(function(e){return e.id===b.activeFlow});e&&!A.length&&(e.flow=s(),e.flowVersion=Ir,Gr.saveSettings())},500),function(){w.current&&clearTimeout(w.current)}},[o,i,b.activeFlow,s,A.length]),(0,$.useEffect)(function(){var e=function(e){var t=e.subFlowId,n=e.parentFlowId;n&&I(function(e){return[].concat(Z6(e),[n])}),M(t)},t=function(){I(function(e){if(e.length>0){var t=Z6(e),n=t.pop();return n&&M(n),t}return e})};return m5.on("subflow:run:start",e),m5.on("subflow:run:end",t),function(){m5.off("subflow:run:start",e),m5.off("subflow:run:end",t)}},[M]),(0,$.useEffect)(function(){var e=function(e){var t,n=!!document.querySelector(".flowchart-data-popup"),r=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||!(null===(t=document.activeElement)||void 0===t||!t.closest(".cm-content"));if(n&&!r){var o=(e.ctrlKey||e.metaKey)&&"z"===e.key,i=(e.ctrlKey||e.metaKey)&&"y"===e.key;if(o)e.preventDefault(),d();else if(i)e.preventDefault(),f();else if(e.ctrlKey||e.metaKey)if("c"===e.key){e.preventDefault(),l();var a=p().filter(function(e){return e.selected}).length;a>0&&Hr("info","".concat(a," node(s) copied."),"ui_action")}else if("v"===e.key){e.preventDefault();var s=document.querySelector(".react-flow__pane");if(s){var c=s.getBoundingClientRect(),h=g({x:c.x+c.width/2,y:c.y+c.height/2});u(h)}}}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[l,u,p,g,d,f,v]);var D=(0,$.useMemo)(function(){var e;return E4(s(),null!==(e=null==j?void 0:j.allowDangerousExecution)&&void 0!==e&&e,b.flows,null==j?void 0:j.id)},[o,i,s,null==j?void 0:j.allowDangerousExecution,b.flows]),R=D.isValid,Q=D.errors,z=D.invalidNodeIds,L=D.errorsByNodeId,Z=(0,$.useMemo)(function(){return b.flows.map(function(e){return{value:e.id,label:e.name}})},[b.flows]),F=(0,$.useCallback)(function(e){var t=G6(e);return t?b.flows.some(function(e){return e.name===t})?(Hr("error",'A flow with the name "'.concat(t,'" already exists.'),"ui_action"),{confirmed:!1}):{confirmed:!0,value:{value:WT(),label:t}}:(Hr("error","Flow name cannot be empty.","ui_action"),{confirmed:!1})},[b.flows]),U=(0,$.useCallback)(function(e,t){var n=G6(t);return n?b.flows.some(function(t){return t.name===n&&t.id!==e})?(Hr("error",'A flow with the name "'.concat(n,'" already exists.'),"ui_action"),{confirmed:!1}):{confirmed:!0,value:{value:e,label:n}}:(Hr("error","Flow name cannot be empty.","ui_action"),{confirmed:!1})},[b.flows]),V=(0,$.useCallback)(function(e){return!(b.flows.length<=1)||(Hr("error","Cannot delete the last flow.","ui_action"),!1)},[b.flows]),G=(0,$.useCallback)(function(e){var t,n=b.flows,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=U6(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{var i=function(){var e=t.value,o=e.value,i=G6(e.label),a=n.find(function(e){return e.id===o});a?r.push(z6(z6({},a),{},{name:i})):r.push({id:o,name:i,flow:{nodes:[],edges:[]},flowVersion:Ir,allowDangerousExecution:!1,enabled:!0})};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}b.flows=r,b.flows.some(function(e){return e.id===b.activeFlow})||(b.activeFlow=e.length>0?e[0].value:""),Gr.saveSettings(),O()},[b,O]),B=(0,$.useCallback)(function(){R?(C(),r6.runFlowManually(b.activeFlow)):Hr("error","Cannot run an invalid flow. Please fix the errors first.","ui_action")},[R,b.activeFlow,C]),X=(0,$.useCallback)(R6(I6().m(function e(){var t,n,r,o;return I6().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=b.flows.find(function(e){return e.id===b.activeFlow}),t){e.n=1;break}return e.a(2);case 1:return e.p=1,n=s(),r=JSON.stringify(n,null,2),e.n=2,navigator.clipboard.writeText(r);case 2:Hr("info",'Flow "'.concat(t.name,'" copied to clipboard as JSON.'),"ui_action"),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Failed to copy flow:",o),Hr("error","Failed to copy flow to clipboard.","ui_action");case 4:return e.a(2)}},e,null,[[1,3]])})),[s,b.activeFlow,b.flows]),Y=(0,$.useCallback)(R6(I6().m(function e(){var t,n,r,o,i;return I6().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.clipboard.readText();case 1:if(t=e.v){e.n=2;break}return Hr("error","Clipboard is empty.","ui_action"),e.a(2);case 2:if((n=JSON.parse(t))&&Array.isArray(n.nodes)&&Array.isArray(n.edges)){e.n=3;break}throw new Error("Parsed JSON is not a valid flow structure.");case 3:r=void 0,n&&"object"===A6(n)&&"flowVersion"in n&&(n=(o=n).flow||n,r=o.flowVersion),a(n,r),O4.temporal.getState().clear(),Hr("success","Flow imported from clipboard.","ui_action"),e.n=5;break;case 4:e.p=4,i=e.v,console.error("Failed to paste flow:",i),Hr("error","Failed to paste flow: ".concat(i.message),"ui_action");case 5:return e.a(2)}},e,null,[[0,4]])})),[a]),W=(0,$.useCallback)(function(){var e=b.flows.find(function(e){return e.id===b.activeFlow});if(e){var t=z6(z6({},e),{},{flow:s(),flowVersion:Ir}),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download="".concat(e.name||"flowchart","-flow.json"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),Hr("info",'Flow "'.concat(e.name,'" exported to file.'),"ui_action")}},[s,b.activeFlow,b.flows]),q=(0,$.useCallback)(function(){var e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=function(){var e=R6(I6().m(function e(t){var n,r,o;return I6().w(function(e){for(;;)switch(e.n){case 0:if(r=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.n=1;break}return e.a(2);case 1:(o=new FileReader).onload=function(){var e=R6(I6().m(function e(t){var n,o,i,s,l,u,c,d,f,h,p,m,g,v;return I6().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,o=JSON.parse(null===(n=t.target)||void 0===n?void 0:n.result)){e.n=1;break}throw new Error("Invalid flow file structure.");case 1:if(i=Gr.getSettings(),(s=G6(r.name.replace(/\.json$/,"")))||(s="imported-flow"),l=new Set(i.flows.map(function(e){return e.name})),l.has(s)){for(u=1;l.has("".concat(s,"-").concat(u));)u++;s="".concat(s,"-").concat(u)}if(c=void 0,!o||"object"!==A6(o)){e.n=5;break}if(!("flowVersion"in o)){e.n=2;break}o=(d=o).flow||o,c=d.flowVersion,e.n=4;break;case 2:if(!("nodes"in o)||!("edges"in o)){e.n=3;break}e.n=4;break;case 3:throw new Error("Invalid flow file structure.");case 4:e.n=6;break;case 5:throw new Error("Invalid flow file structure.");case 6:if(!(f=!c)){e.n=8;break}return h=SillyTavern.getContext(),p=h.Popup,e.n=7,p.show.confirm("Flow Import","The imported flow may need to be migrated to work correctly with your current version. Do you want to proceed with import and migration?");case 7:if(e.v){e.n=8;break}return e.a(2);case 8:m={id:WT(),name:s,flow:o,flowVersion:c||Ir,allowDangerousExecution:!1,enabled:!0},i.flows=[].concat(Z6(i.flows),[m]),i.activeFlow=m.id,Gr.saveSettings(),a(o,c),O4.temporal.getState().clear(),O(),g=f?" (may require migration)":"",Hr("info",'Flow "'.concat(s,'" imported').concat(g," successfully."),"ui_action"),e.n=10;break;case 9:e.p=9,v=e.v,console.error("Failed to import flow:",v),Hr("error","Failed to import flow: ".concat(v.message),"ui_action");case 10:return e.a(2)}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),o.readAsText(r);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),e.click()},[a,O]),H=(0,$.useCallback)(R6(I6().m(function e(){var t,n,r,o,i,a,s,l,u,c,d,f;return I6().w(function(e){for(;;)switch(e.n){case 0:if(t=b.flows.find(function(e){return e.id===b.activeFlow}),t){e.n=1;break}return e.a(2);case 1:if(n=document.querySelector(".react-flow")){e.n=2;break}return Hr("error","Could not find the flow element to screenshot.","ui_action"),e.a(2);case 2:if(0!==(r=p()).length){e.n=3;break}return Hr("warning","Cannot take screenshot of an empty flow.","ui_action"),e.a(2);case 3:o=[],n.querySelectorAll("select").forEach(function(e){var t;if(-1!==e.selectedIndex){var n=document.createElement("span");n.textContent=e.options[e.selectedIndex].text,n.style.display="inline-block",n.style.width="".concat(e.offsetWidth,"px"),n.style.padding="4px 8px",n.style.border="1px solid var(--SmartThemeBorderColor)",n.style.borderRadius="4px",n.style.backgroundColor="var(--SmartThemeInputColor)",n.style.fontFamily="var(--mainFontFamily)",n.style.fontSize="var(--mainFontSize)",n.style.color="var(--text-color-main)",n.style.boxSizing="border-box",e.style.display="none",null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e),o.push({original:e,replacement:n})}}),i=2048,a=$l(r),s={width:a.width+80,height:a.height+80,x:a.x-40,y:a.y-40},u=Jl(s,i,l=s.height/s.width*i,.1,2,{}),c=y(),m(u,{duration:0}),d=document.querySelector(".react-flow__pane"),f=d.style.backgroundColor,d.style.backgroundColor="#202124",setTimeout(R6(I6().m(function e(){var r,a,s;return I6().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,mp(n,{backgroundColor:"#202124",width:i,height:l,filter:function(e){var t,n;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("react-flow__controls")||null!==(n=e.classList)&&void 0!==n&&n.contains("react-flow__minimap"))},skipFonts:!0,pixelRatio:2});case 1:r=e.v,(a=document.createElement("a")).href=r,a.download="flowchart-".concat(t.name,".png"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),Hr("info","Screenshot saved.","ui_action"),e.n=3;break;case 2:e.p=2,s=e.v,console.error("Failed to take screenshot:",s),Hr("error","Failed to take screenshot.","ui_action");case 3:return e.p=3,o.forEach(function(e){var t=e.original,n=e.replacement;t.style.display="",n.remove()}),m(c,{duration:0}),d.style.backgroundColor=f,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])})),100);case 4:return e.a(2)}},e)})),[p,m,y,b.activeFlow,b.flows]),K=(0,$.useMemo)(function(){return[{key:"copy-clipboard",icon:"fa-solid fa-copy",title:"Copy Flow JSON to Clipboard (Ctrl+C)",onClick:X},{key:"paste-clipboard",icon:"fa-solid fa-paste",title:"Paste Flow from Clipboard (Ctrl+V)",onClick:Y},{key:"export-file",icon:"fa-solid fa-file-export",title:"Export Flow to File",onClick:W},{key:"import-file",icon:"fa-solid fa-file-import",title:"Import Flow from File",onClick:q},{key:"screenshot",icon:"fa-solid fa-camera",title:"Take Screenshot",onClick:H}]},[X,Y,W,q,H]),J=(0,$.useCallback)(function(e){var t=b.flows.find(function(e){return e.id===b.activeFlow});t&&(t.enabled=e.target.checked,Gr.saveSettings(),O())},[b,O]),ee=(0,$.useCallback)(function(){var e=R6(I6().m(function e(t){var n,r,o,i;return I6().w(function(e){for(;;)switch(e.n){case 0:if(n=t.target.checked,r=b.flows.find(function(e){return e.id===b.activeFlow}),r){e.n=1;break}return e.a(2);case 1:if(!n){e.n=3;break}return o=SillyTavern.getContext(),i=o.Popup,e.n=2,i.show.confirm("Allow Dangerous Operations?","Enabling this allows the flow to run nodes that can execute arbitrary code or make external network requests. This can be a security risk if you import a flow from an untrusted source. Do you want to proceed?");case 2:e.v?r.allowDangerousExecution=!0:t.target.checked=!1,e.n=4;break;case 3:r.allowDangerousExecution=!1;case 4:Gr.saveSettings(),O();case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),[b,O]),te=(0,$.useCallback)(function(){b.isPaletteCollapsed=!b.isPaletteCollapsed,Gr.saveSettings(),O()},[b,O]),ne=null!==(e=null===(t=b.flows.find(function(e){return e.id===b.activeFlow}))||void 0===t?void 0:t.enabled)&&void 0!==e&&e,re=null!==(n=null==j?void 0:j.allowDangerousExecution)&&void 0!==n&&n;return(0,E.jsxs)("div",{className:"flowchart-editor-manager",children:[(0,E.jsx)(E6,{flowItems:Z,activeFlowId:b.activeFlow,presetButtons:K,onSelectFlow:M,onItemsChange:G,onCreateFlow:F,onRenameFlow:U,onDeleteFlow:V,isFlowEnabled:ne,onToggleFlowEnabled:J,isDangerousAllowed:re,onToggleDangerous:ee,runId:_,isVisualizationVisible:k,onToggleVisualization:T,onClearRun:C,isValid:R,errors:Q,runStatus:P,onRunFlow:B,onStopFlow:function(){return r6.abortCurrentRun()}}),(0,E.jsxs)("div",{className:"flowchart-editor-area ".concat(b.isPaletteCollapsed?"palette-collapsed":""),ref:S,children:[(0,E.jsx)("div",{className:"palette-toggle",onClick:te,title:"Toggle Node Palette",children:(0,E.jsx)("i",{className:"fa-solid fa-chevron-".concat(b.isPaletteCollapsed?"right":"left")})}),(0,E.jsx)(N6,{}),(0,E.jsx)(P6,{invalidNodeIds:z,errorsByNodeId:L})]})]})},X6=function(){return(0,E.jsx)(Wf,{children:(0,E.jsx)(B6,{})})};function Y6(e){return function(e){if(Array.isArray(e))return H6(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q6(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||q6(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q6(e,t){if(e){if("string"==typeof e)return H6(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H6(e,t):void 0}}function H6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var K6=function(){var e=W6((0,$.useState)(Y6(t6)),2),t=e[0],n=e[1];return(0,E.jsxs)("div",{className:"flowchart-popup-section",children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,E.jsx)("h3",{children:"Run History"}),(0,E.jsx)(C,{onClick:function(){t6.splice(0,t6.length),SillyTavern.libs.localforage.removeItem(Y5),n([])},color:"danger",children:"Clear History"})]}),0===t.length?(0,E.jsx)("p",{children:"No flow executions recorded yet."}):(0,E.jsx)("ul",{className:"flowchart-history-list",children:t.map(function(e,t){var n,r,o=!!e.error;return(0,E.jsx)("li",{children:(0,E.jsxs)("details",{children:[(0,E.jsxs)("summary",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px",color:o?"var(--danger)":"inherit"},children:[(0,E.jsxs)("span",{style:{flexGrow:1},children:["Flow: ",(0,E.jsx)("strong",{children:e.flowId})," at ",new Date(e.timestamp).toLocaleString()," (",e.executedNodes.length," nodes executed)",o&&" - FAILED"]}),(0,E.jsx)(C,{className:"fa-solid fa-copy",onClick:function(t){t.preventDefault(),function(e){var t=WE(e,2);navigator.clipboard.writeText(t).then(function(){Hr("info","History JSON copied to clipboard.","ui_action")}).catch(function(e){Hr("error","Failed to copy history JSON.","ui_action"),console.error("Failed to copy text: ",e)})}(e)},title:"Copy JSON",style:{flexShrink:0}})]}),o&&(0,E.jsxs)("div",{className:"flow-history-error",children:[(0,E.jsxs)("strong",{children:["Error at Node ",null===(n=e.error)||void 0===n?void 0:n.nodeId,":"]}),(0,E.jsx)("pre",{children:null===(r=e.error)||void 0===r?void 0:r.message})]}),(0,E.jsx)("pre",{children:WE(e.executedNodes,2)})]})},t)})})]})};function J6(e){return function(e){if(Array.isArray(e))return n8(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t8(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||t8(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t8(e,t){if(e){if("string"==typeof e)return n8(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?n8(e,t):void 0}}function n8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var r8=function(){var e=e8((0,$.useState)(null),2),t=e[0],n=e[1],r=(0,$.useMemo)(function(){var e=Gr.getSettings(),t=new Set;return e.flows.forEach(function(e){e.flow.nodes.forEach(function(e){if("quickReplyTriggerNode"===e.type){var n=e.data.group;t.add(n)}})}),Array.from(t)},[]),o=e8((0,$.useState)(function(){var e=Gr.getSettings().qrGroupOrder||[],t=new Set(e),n=r.filter(function(e){return!t.has(e)}).sort();return[].concat(J6(e.filter(function(e){return r.includes(e)})),J6(n))}),2),i=o[0],a=o[1],s=function(e){e.preventDefault()},l=function(){n(null)};return(0,E.jsxs)("div",{className:"flowchart-popup-section",children:[(0,E.jsx)("h3",{children:"Quick Reply Group Order"}),(0,E.jsx)("p",{children:"Drag and drop the group names to reorder the button rows in the Quick Reply bar."}),(0,E.jsx)("ul",{className:"qr-group-settings-list",children:i.map(function(e){return(0,E.jsxs)("li",{className:"qr-group-item ".concat(t===e?"dragging":""),draggable:!0,onDragStart:function(t){return function(e,t){n(t),e.dataTransfer.effectAllowed="move"}(t,e)},onDragOver:s,onDrop:function(n){return function(e,n){if(e.preventDefault(),t&&t!==n){var r=J6(i),o=r.indexOf(t),s=r.indexOf(n);r.splice(o,1),r.splice(s,0,t),a(r),Gr.getSettings().qrGroupOrder=r,Gr.saveSettings(),r6.reinitialize()}}(n,e)},onDragEnd:l,children:[(0,E.jsx)("i",{className:"fa-solid fa-grip-vertical"}),e]},e)})}),0===r.length&&(0,E.jsx)("p",{children:"No QR Button triggers found in any enabled flows."})]})};function o8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i8(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i8(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a8=function(e){var t=e.onSave,n=e.isFullscreen,r=e.toggleFullscreen,o=o8((0,$.useState)("editor"),2),i=o[0],a=o[1],s=o8((0,$.useState)(0),2),l=s[0],u=s[1];(0,$.useEffect)(function(){var e=function(){return u(function(e){return e+1})};return m5.on("flow:reset-all-settings",e),function(){m5.off("flow:reset-all-settings",e)}},[]);return(0,E.jsxs)("div",{className:"flowchart-data-popup ".concat(n?"fullscreen":""),children:[(0,E.jsxs)("div",{className:"flowchart-popup-header",children:[(0,E.jsxs)("div",{className:"flowchart-popup-tabs",children:[(0,E.jsx)(C,{onClick:function(){return a("editor")},children:"Editor"}),(0,E.jsx)(C,{onClick:function(){return a("prompts")},children:"Prompts"}),(0,E.jsx)(C,{onClick:function(){return a("history")},children:"History"}),(0,E.jsx)(C,{onClick:function(){return a("qr_groups")},children:"QR Groups"})]}),(0,E.jsx)("div",{className:"flowchart-popup-controls",children:(0,E.jsx)(C,{onClick:r,title:n?"Exit fullscreen":"Enter fullscreen",children:(0,E.jsx)("i",{className:"fa-solid fa-".concat(n?"compress":"expand")})})})]}),(0,E.jsxs)("div",{className:"flowchart-popup-content",children:["editor"===i&&(0,E.jsx)(X6,{},"editor-".concat(l)),"prompts"===i&&(0,E.jsx)(oo,{},"prompts-".concat(l)),"history"===i&&(0,E.jsx)(K6,{}),"qr_groups"===i&&(0,E.jsx)(r8,{})]}),(0,E.jsxs)("div",{className:"flowchart-popup-footer",children:[(0,E.jsx)("div",{style:{flex:1}}),(0,E.jsx)(C,{onClick:function(){t()},color:"primary",children:"Close"})]})]})};function s8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l8(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l8(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u8=function(){var e=s8((0,$.useState)(!1),2),t=e[0],n=e[1],r=s8((0,$.useState)(!1),2),o=r[0],i=r[1],a=function(){return n(!0)},s=function(){n(!1),i(!1),r6.reinitialize()};return(0,$.useEffect)(function(){return m5.on("openFlowchartDataPopup",a),function(){m5.off("openFlowchartDataPopup",a)}},[]),t?(0,E.jsx)(K,{content:(0,E.jsx)(a8,{onSave:s,isFullscreen:o,toggleFullscreen:function(){return i(!o)}}),type:M.DISPLAY,onComplete:s,preventEscape:!0,options:{large:!0,wide:!0}}):null};function c8(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return d8(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(d8(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,d8(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,d8(d,"constructor",u),d8(u,"constructor",l),l.displayName="GeneratorFunction",d8(u,o,"GeneratorFunction"),d8(d),d8(d,o,"Generator"),d8(d,r,function(){return this}),d8(d,"toString",function(){return"[object Generator]"}),(c8=function(){return{w:i,m:f}})()}function d8(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}d8=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){d8(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},d8(e,t,n,r)}function f8(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var h8=function(){var e=qr(),t=Gr.getSettings(),n=(0,$.useCallback)(function(t){t(Gr.getSettings()),Gr.saveSettings(),e()},[e]),r=function(){var t=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f8(i,r,o,a,s,"next",e)}function s(e){f8(i,r,o,a,s,"throw",e)}a(void 0)})}}(c8().m(function t(){var n,r,o,i;return c8().w(function(t){for(;;)switch(t.n){case 0:return n=SillyTavern.getContext(),r=n.Popup,t.n=1,r.show.confirm("Reset All Flowchart Settings","Are you sure you want to reset EVERYTHING, including all flows, prompts, and settings, to their original defaults? This action cannot be undone.");case 1:t.v&&(o=Gr.getSettings(),i=structuredClone(Vr),Object.keys(o).forEach(function(e){return delete o[e]}),Object.assign(o,i),Gr.saveSettings(),r6.reinitialize(),er("info","Flowchart has been reset to default settings."),e(),m5.emit("flow:reset-all-settings"));case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();return(0,E.jsxs)("div",{className:"flowchart-settings",children:[(0,E.jsxs)("div",{className:"inline-drawer",children:[(0,E.jsxs)("div",{className:"inline-drawer-toggle inline-drawer-header",children:[(0,E.jsx)("b",{children:"Flowchart"}),(0,E.jsx)("div",{className:"inline-drawer-icon fa-solid fa-circle-chevron-down down"})]}),(0,E.jsx)("div",{className:"inline-drawer-content",children:(0,E.jsxs)("div",{className:"flowchart-container",children:[(0,E.jsxs)("div",{className:"setting-row",children:[(0,E.jsx)("label",{children:"Enabled"}),(0,E.jsx)(j,{type:"checkbox",checked:t.enabled,onChange:function(e){var t=e.target.checked;n(function(e){return e.enabled=t}),r6.reinitialize()}})]}),(0,E.jsxs)("div",{className:"setting-row",children:[(0,E.jsx)("label",{title:"Show toast notifications for automatic flow events like 'flow started'. Does not affect errors or UI feedback.",children:"Show flow execution notifications"}),(0,E.jsx)(j,{type:"checkbox",checked:t.showExecutionNotifications,onChange:function(e){var t=e.target.checked;n(function(e){return e.showExecutionNotifications=t})}})]}),(0,E.jsx)("div",{className:"setting-row",children:(0,E.jsx)(C,{onClick:function(){return m5.emit("openFlowchartDataPopup")},children:"Customize Prompts & Data"})}),(0,E.jsx)("div",{className:"setting-row",children:(0,E.jsx)(C,{onClick:r,color:"danger",children:"Reset Everything to Default"})})]})})]}),(0,E.jsx)(u8,{})]})};Oq().helpers.slice||Oq().registerHelper("slice",function(e,t,n){return Array.isArray(e)?e.slice(t,n+1):[]}),Oq().helpers.add||Oq().registerHelper("add",function(e,t){return e+t}),Gr.initializeSettings().then(function(){!function(){var e=document.getElementById("extensions_settings");if(e){var t=document.getElementById("flowchart-react-settings-root");t||((t=document.createElement("div")).id="flowchart-react-settings-root",e.appendChild(t)),(0,T.createRoot)(t).render((0,E.jsx)($.StrictMode,{children:(0,E.jsx)(h8,{})}))}else console.error("Flowchart: Extension settings container not found.")}(),r6.reinitialize()}).catch(function(e){console.error(e),er("error","Flowchart data migration failed. Check console for details.")});