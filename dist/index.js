import*as e from"../../../../power-user.js";import*as t from"../../../../../script.js";import*as n from"../../../../world-info.js";import*as r from"../../../../slash-commands.js";import*as i from"../../../../personas.js";import*as o from"../../../../instruct-mode.js";import*as a from"../../../../chats.js";import*as s from"../../../../openai.js";import*as l from"../../../../authors-note.js";import*as u from"../../../../group-chats.js";import*as c from"../../../regex/engine.js";import*as d from"../../../../utils.js";import*as f from"../../../../slash-commands/SlashCommandCommonEnumsProvider.js";import*as h from"../../../../slash-commands/SlashCommandEnumValue.js";import*as p from"../../../../popup.js";import*as m from"../../../../../lib/dialog-polyfill.esm.js";import*as g from"../../../../variables.js";var v={27:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.parseWithoutProcessing=u,t.parse=function(e,t){var n=u(e,t);return new o.default(t).accept(n)};var i=r(n(201)),o=r(n(915)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(425)),s=n(849);t.parser=i.default;var l={};function u(e,t){return"Program"===e.type?e:(i.default.yy=l,l.locInfo=function(e){return new l.SourceLocation(t&&t.srcName,e)},i.default.parse(e))}s.extend(l,a)},97:(e,t,n)=>{t.__esModule=!0;var r=n(849);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,o=n.fn;if(!0===t)return o(this);if(!1===t||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(t,n)})},e.exports=t.default},127:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Compiler=l,t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var r=n.parse(e,t),o=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(o,t)},t.compile=function(e,t,n){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=o.extend({},t))||(t.data=!0);t.compat&&(t.useDepths=!0);var r=void 0;function a(){var r=n.parse(e,t),i=(new n.Compiler).compile(r,t),o=(new n.JavaScriptCompiler).compile(i,t,void 0,!0);return n.template(o)}function s(e,t){return r||(r=a()),r.call(this,e,t)}return s._setup=function(e){return r||(r=a()),r._setup(e)},s._child=function(e,t,n,i){return r||(r=a()),r._child(e,t,n,i)},s};var i=r(n(769)),o=n(849),a=r(n(919)),s=[].slice;function l(){}function u(e,t){if(e===t)return!0;if(o.isArray(e)&&o.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!u(e[n],t[n]))return!1;return!0}}function c(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}l.prototype={compiler:l,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||!u(r.args,i.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=o.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new i.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){c(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),r=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new i.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,o="SubExpression"===e.name.type;o&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var a=e.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a=""),this.opcode("invokePartial",o,r,a),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){c(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,i=r.parts[0],o=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),o=e.path,s=o.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new i.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",r.length,o.original,a.default.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=a.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length;for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:s.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=a.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&a.default.helpers.helperExpression(e),i=!n&&(r||t);if(i&&!r){var o=e.path.parts[0],s=this.options;s.knownHelpers[o]?r=!0:s.knownHelpersOnly&&(i=!1)}return r?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||a.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),i},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],i=r&&o.indexOf(r,e);if(r&&i>=0)return[t,i]}}}},148:(e,t)=>{t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},162:(e,t,n)=>{
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540),i=n(888);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=u(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]);var h=a(e,d[0],d[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},201:(e,t)=>{t.__esModule=!0;var n=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=r.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(o[s]),strip:r.stripFlags(o[s],o[s]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=r.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=r.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:r.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:r.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:r.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var l=r.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),u=r.prepareProgram([l],o[s-1].loc);u.chained=!0,this.$={strip:o[s-2].strip,program:u,chain:!0};break;case 21:this.$={path:o[s-1],strip:r.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=r.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],r.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:r.stripFlags(o[s-4],o[s]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:r.stripFlags(o[s-4],o[s])};break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(o[s-2]),value:o[s],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(o[s-1]);break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 42:this.$=r.preparePath(!0,o[s],this._$);break;case 43:this.$=r.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:r.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:r.id(o[s]),original:o[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:o[s-1].push(o[s]);break;case 98:case 100:this.$=[o[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;i.push(c);var d=this.lexer.options&&this.lexer.options.ranges;function f(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,p,m,g,v,y,b,O,w,x={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null==h&&(h=f()),g=o[m]&&o[m][h]),void 0===g||!g.length||!g[0]){var S="";if(!u){for(y in w=[],o[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+h);switch(g[0]){case 1:n.push(h),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(g[1]),h=null,p?(h=p,p=null):(l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[g[1]][1],x.$=r[r.length-b],x._$={first_line:i[i.length-(b||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(b||1)].first_column,last_column:i[i.length-1].last_column},d&&(x._$.range=[i[i.length-(b||1)].range[0],i[i.length-1].range[1]]),void 0!==(v=this.performAction.call(x,a,l,s,this.yy,g[1],r,i)))return v;b&&(n=n.slice(0,-1*b*2),r=r.slice(0,-1*b),i=i.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),r.push(x.$),i.push(x._$),O=o[n[n.length-2]][n[n.length-1]],n.push(O);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(n=this._input.match(this.rules[o[a]]))||t&&!(n[0].length>t[0].length)||(t=n,r=a,this.options.flex));a++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=n,e.exports=t.default},221:(e,t,n)=>{
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=u(t.as,t.crossOrigin);a.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},242:(e,t,n)=>{e.exports=n(162)},247:(e,t,n)=>{var r=n(982),i=n(540),o=n(961);
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),w=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var $=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===j?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case E:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case O:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return N(e(t))}catch(e){}}return null}var A=Array.isArray,I=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},R=[],Q=-1;function z(e){return{current:e}}function L(e){0>Q||(e.current=R[Q],R[Q]=null,Q--)}function Z(e,t){Q++,R[Q]=e.current,e.current=t}var F=z(null),U=z(null),V=z(null),G=z(null);function B(e,t){switch(Z(V,t),Z(U,e),Z(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(F),Z(F,e)}function X(){L(F),L(U),L(V)}function Y(e){null!==e.memoizedState&&Z(G,e);var t=F.current,n=od(t,e.type);t!==n&&(Z(U,e),Z(F,n))}function W(e){U.current===e&&(L(F),L(U)),G.current===e&&(L(G),Yd._currentValue=D)}var q=Object.prototype.hasOwnProperty,H=r.unstable_scheduleCallback,K=r.unstable_cancelCallback,J=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function fe(e){if("function"==typeof le&&ue(e),de&&"function"==typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(e){}}var he=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ye(r):0!==(a&=s)?i=ye(a):n||0!==(n=s&~e)&&(i=ye(n)):0!==(s=r&~o)?i=ye(s):0!==a?i=ye(a):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&4194048&n)?t:i}function Oe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=ge;return!(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ve;return!(62914560&(ve<<=1))&&(ve=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-he(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-he(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function $e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ce(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:cf(e.type)}var je=Math.random().toString(36).slice(2),Ne="__reactFiber$"+je,Ae="__reactProps$"+je,Ie="__reactContainer$"+je,Me="__reactEvents$"+je,De="__reactListeners$"+je,Re="__reactHandles$"+je,Qe="__reactResources$"+je,ze="__reactMarker$"+je;function Le(e){delete e[Ne],delete e[Ae],delete e[Me],delete e[De],delete e[Re]}function Ze(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ie]||n[Ne]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Ne])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Fe(e){if(e=e[Ne]||e[Ie]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ve(e){var t=e[Qe];return t||(t=e[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[ze]=!0}var Be=new Set,Xe={};function Ye(e,t){We(e,t),We(e+"Capture",t)}function We(e,t){for(Xe[e]=t,e=0;e<t.length;e++)Be.add(t[e])}var qe,He,Ke=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},et={};function tt(e,t,n){if(i=t,q.call(et,i)||!q.call(Je,i)&&(Ke.test(i)?et[i]=!0:(Je[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===qe)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);qe=t&&t[1]||"",He=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+qe+e+He}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ht(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ut(t)):null!=n?yt(e,a,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+ut(s):e.removeAttribute("name")}function vt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&ht(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ot(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(A(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&kt(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&kt(e,o,t[o])}function Pt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return $t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ct=null;function jt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,At=null;function It(e){var t=Fe(e);if(t&&(e=t.stateNode)){var n=e[Ae]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ae]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":Ot(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Dt(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Nt||null!==At)&&(Zu(),Nt&&(t=Nt,e=At,At=Nt=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Rt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ae]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Qt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),zt=!1;if(Qt)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(e){zt=!1}var Zt=null,Ft=null,Ut=null;function Vt(){if(Ut)return Ut;var e,t,n=Ft,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Ut=i.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Bt(){return!0}function Xt(){return!1}function Yt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Bt:Xt,this.isPropagationStopped=Xt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Bt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Bt)},persist:function(){},isPersistent:Bt}),t}var Wt,qt,Ht,Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=Yt(Kt),en=f({},Kt,{view:0,detail:0}),tn=Yt(en),nn=f({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ht&&(Ht&&"mousemove"===e.type?(Wt=e.screenX-Ht.screenX,qt=e.screenY-Ht.screenY):qt=Wt=0,Ht=e),Wt)},movementY:function(e){return"movementY"in e?e.movementY:qt}}),rn=Yt(nn),on=Yt(f({},nn,{dataTransfer:0})),an=Yt(f({},en,{relatedTarget:0})),sn=Yt(f({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(f({},Kt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Yt(f({},Kt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function pn(){return hn}var mn=Yt(f({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(f({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(f({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Yt(f({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Yt(f({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),On=Yt(f({},Kt,{newState:0,oldState:0})),wn=[9,13,27,32],xn=Qt&&"CompositionEvent"in window,Sn=null;Qt&&"documentMode"in document&&(Sn=document.documentMode);var kn=Qt&&"TextEvent"in window&&!Sn,_n=Qt&&(!xn||Sn&&8<Sn&&11>=Sn),Pn=String.fromCharCode(32),En=!1;function $n(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Cn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function An(e,t,n,r){Nt?At?At.push(r):At=[r]:Nt=r,0<(t=Vc(t,"onChange")).length&&(n=new Jt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var In=null,Mn=null;function Dn(e){Dc(e,0)}function Rn(e){if(ft(Ue(e)))return e}function Qn(e,t){if("change"===e)return t}var zn=!1;if(Qt){var Ln;if(Qt){var Zn="oninput"in document;if(!Zn){var Fn=document.createElement("div");Fn.setAttribute("oninput","return;"),Zn="function"==typeof Fn.oninput}Ln=Zn}else Ln=!1;zn=Ln&&(!document.documentMode||9<document.documentMode)}function Un(){In&&(In.detachEvent("onpropertychange",Vn),Mn=In=null)}function Vn(e){if("value"===e.propertyName&&Rn(Mn)){var t=[];An(t,Mn,e,jt(e)),Dt(Dn,t)}}function Gn(e,t,n){"focusin"===e?(Un(),Mn=n,(In=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Un()}function Bn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rn(Mn)}function Xn(e,t){if("click"===e)return Rn(t)}function Yn(e,t){if("input"===e||"change"===e)return Rn(t)}var Wn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function qn(e,t){if(Wn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!q.call(t,i)||!Wn(e[i],t[i]))return!1}return!0}function Hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kn(e,t){var n,r=Hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hn(r)}}function Jn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ht((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ht((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Qt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ht(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&qn(or,r)||(or=r,0<(r=Vc(ir,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},dr={};function fr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}Qt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var hr=fr("animationend"),pr=fr("animationiteration"),mr=fr("animationstart"),gr=fr("transitionrun"),vr=fr("transitionstart"),yr=fr("transitioncancel"),br=fr("transitionend"),Or=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){Or.set(e,t),Ye(t,[e])}wr.push("scrollEnd");var Sr=new WeakMap;function kr(e,t){if("object"==typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var _r=[],Pr=0,Er=0;function $r(){for(var e=Pr,t=Er=Pr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var i=_r[t];_r[t++]=null;var o=_r[t];if(_r[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&Nr(n,i,o)}}function Tr(e,t,n,r){_r[Pr++]=e,_r[Pr++]=t,_r[Pr++]=n,_r[Pr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Cr(e,t,n,r){return Tr(e,t,n,r),Ar(e)}function jr(e,t){return Tr(e,null,null,t),Ar(e)}function Nr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-he(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Ar(e){if(50<Nu)throw Nu=0,Au=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ir={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new Mr(e,t,n,r)}function Rr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Qr(e,t){var n=e.alternate;return null===n?((n=Dr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Lr(e,t,n,r,i,o){var s=0;if(r=e,"function"==typeof e)Rr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,F.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Dr(31,n,t,i)).elementType=E,e.lanes=o,e;case g:return Zr(n.children,i,o,t);case v:s=8,i|=24;break;case y:return(e=Dr(12,n,t,2|i)).elementType=y,e.lanes=o,e;case S:return(e=Dr(13,n,t,i)).elementType=S,e.lanes=o,e;case k:return(e=Dr(19,n,t,i)).elementType=k,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case w:s=10;break e;case O:s=9;break e;case x:s=11;break e;case _:s=14;break e;case P:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Dr(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Zr(e,t,n,r){return(e=Dr(7,e,r,t)).lanes=n,e}function Fr(e,t,n){return(e=Dr(6,e,null,t)).lanes=n,e}function Ur(e,t,n){return(t=Dr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Gr=0,Br=null,Xr=0,Yr=[],Wr=0,qr=null,Hr=1,Kr="";function Jr(e,t){Vr[Gr++]=Xr,Vr[Gr++]=Br,Br=e,Xr=t}function ei(e,t,n){Yr[Wr++]=Hr,Yr[Wr++]=Kr,Yr[Wr++]=qr,qr=e;var r=Hr;e=Kr;var i=32-he(r)-1;r&=~(1<<i),n+=1;var o=32-he(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Hr=1<<32-he(t)+i|n<<i|r,Kr=o+e}else Hr=1<<o|n<<i|r,Kr=e}function ti(e){null!==e.return&&(Jr(e,1),ei(e,1,0))}function ni(e){for(;e===Br;)Br=Vr[--Gr],Vr[Gr]=null,Xr=Vr[--Gr],Vr[Gr]=null;for(;e===qr;)qr=Yr[--Wr],Yr[Wr]=null,Kr=Yr[--Wr],Yr[Wr]=null,Hr=Yr[--Wr],Yr[Wr]=null}var ri=null,ii=null,oi=!1,ai=null,si=!1,li=Error(a(519));function ui(e){throw mi(kr(Error(a(418,"")),e)),li}function ci(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ne]=e,t[Ae]=r,n){case"dialog":Rc("cancel",t),Rc("close",t);break;case"iframe":case"object":case"embed":Rc("load",t);break;case"video":case"audio":for(n=0;n<Ic.length;n++)Rc(Ic[n],t);break;case"source":Rc("error",t);break;case"img":case"image":case"link":Rc("error",t),Rc("load",t);break;case"details":Rc("toggle",t);break;case"input":Rc("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Rc("invalid",t);break;case"textarea":Rc("invalid",t),wt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||qc(t.textContent,n)?(null!=r.popover&&(Rc("beforetoggle",t),Rc("toggle",t)),null!=r.onScroll&&Rc("scroll",t),null!=r.onScrollEnd&&Rc("scrollend",t),null!=r.onClick&&(t.onclick=Hc),t=!0):t=!1,t||ui(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function fi(e){if(e!==ri)return!1;if(!oi)return di(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,hd(e.type)?(e=yd,yd=null,ii=e):ii=n):ii=ri?vd(e.stateNode.nextSibling):null;return!0}function hi(){ii=ri=null,oi=!1}function pi(){var e=ai;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),ai=null),e}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=z(null),vi=null,yi=null;function bi(e,t,n){Z(gi,t._currentValue),t._currentValue=n}function Oi(e){e._currentValue=gi.current,L(gi)}function wi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xi(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var s=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),wi(o.return,n,e),r||(s=null);break e}o=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),wi(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function Si(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(524288&i.flags)o=!0;else if(262144&i.flags)break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var l=i.type;Wn(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(s=i.alternate))throw Error(a(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&xi(t,e,n,r),t.flags|=262144}function ki(e){for(e=e.firstContext;null!==e;){if(!Wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _i(e){vi=e,yi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Pi(e){return $i(vi,e)}function Ei(e,t){return null===vi&&_i(e),$i(e,t)}function $i(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yi){if(null===e)throw Error(a(308));yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yi=yi.next=t;return n}var Ti="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ci=r.unstable_scheduleCallback,ji=r.unstable_NormalPriority,Ni={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ai(){return{controller:new Ti,data:new Map,refCount:0}}function Ii(e){e.refCount--,0===e.refCount&&Ci(ji,function(){e.controller.abort()})}var Mi=null,Di=0,Ri=0,Qi=null;function zi(){if(0===--Di&&null!==Mi){null!==Qi&&(Qi.status="fulfilled");var e=Mi;Mi=null,Ri=0,Qi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Li=I.S;I.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Mi){var n=Mi=[];Di=0,Ri=Tc(),Qi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Di++,t.then(zi,zi)}(0,t),null!==Li&&Li(e,t)};var Zi=z(null);function Fi(){var e=Zi.current;return null!==e?e:ru.pooledCache}function Ui(e,t){Z(Zi,null===t?Zi.current:t.pool)}function Vi(){var e=Fi();return null===e?null:{parent:Ni._currentValue,pool:e}}var Gi=Error(a(460)),Bi=Error(a(474)),Xi=Error(a(542)),Yi={then:function(){}};function Wi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function qi(){}function Hi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(qi,qi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"==typeof t.status)t.then(qi,qi);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Ki=t,Gi}}var Ki=null;function Ji(){if(null===Ki)throw Error(a(459));var e=Ki;return Ki=null,e}function eo(e){if(e===Gi||e===Xi)throw Error(a(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&nu){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Ar(e),Nr(e,null,n),t}return Tr(e,r,t,n),Ar(e)}function ao(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function uo(){if(lo){if(null!==Qi)throw Qi}}function co(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(ou&h)===h:(r&h)===h){0!==h&&h===Ri&&(lo=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;h=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(v,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=g.payload)?m.call(v,d,h):m))break e;d=f({},d,h);break e;case 2:to=!0}}null!==(h=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===o&&(i.shared.lanes=0),hu|=a,e.lanes=a,e.memoizedState=d}}function fo(e,t){if("function"!=typeof e)throw Error(a(191,e));e.call(t)}function ho(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fo(n[e],t)}var po=z(null),mo=z(0);function go(e,t){Z(mo,e=du),Z(po,t),du=e|t.baseLanes}function vo(){Z(mo,du),Z(po,po.current)}function yo(){du=mo.current,L(po),L(mo)}var bo=0,Oo=null,wo=null,xo=null,So=!1,ko=!1,_o=!1,Po=0,Eo=0,$o=null,To=0;function Co(){throw Error(a(321))}function jo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wn(e[n],t[n]))return!1;return!0}function No(e,t,n,r,i,o){return bo=o,Oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Ba:Xa,_o=!1,o=n(r,i),_o=!1,ko&&(o=Io(t,n,r,i)),Ao(e),o}function Ao(e){I.H=Ga;var t=null!==wo&&null!==wo.next;if(bo=0,xo=wo=Oo=null,So=!1,Eo=0,$o=null,t)throw Error(a(300));null===e||Es||null!==(e=e.dependencies)&&ki(e)&&(Es=!0)}function Io(e,t,n,r){Oo=e;var i=0;do{if(ko&&($o=null),Eo=0,ko=!1,25<=i)throw Error(a(301));if(i+=1,xo=wo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}I.H=Ya,o=t(n,r)}while(ko);return o}function Mo(){var e=I.H,t=e.useState()[0];return t="function"==typeof t.then?Zo(t):t,e=e.useState()[0],(null!==wo?wo.memoizedState:null)!==e&&(Oo.flags|=1024),t}function Do(){var e=0!==Po;return Po=0,e}function Ro(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Qo(e){if(So){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}So=!1}bo=0,xo=wo=Oo=null,ko=!1,Eo=Po=0,$o=null}function zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xo?Oo.memoizedState=xo=e:xo=xo.next=e,xo}function Lo(){if(null===wo){var e=Oo.alternate;e=null!==e?e.memoizedState:null}else e=wo.next;var t=null===xo?Oo.memoizedState:xo.next;if(null!==t)xo=t,wo=e;else{if(null===e){if(null===Oo.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(wo=e).memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},null===xo?Oo.memoizedState=xo=e:xo=xo.next=e}return xo}function Zo(e){var t=Eo;return Eo+=1,null===$o&&($o=[]),e=Hi($o,e,t),t=Oo,null===(null===xo?t.memoizedState:xo.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Ba:Xa),e}function Fo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Zo(e);if(e.$$typeof===w)return Pi(e)}throw Error(a(438,String(e)))}function Uo(e){var t=null,n=Oo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Oo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Oo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=$;return t.index++,n}function Vo(e,t){return"function"==typeof t?t(e):t}function Go(e){return Bo(Lo(),wo,e)}function Bo(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=s=null,u=null,c=t=i.next,d=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(ou&f)===f:(bo&f)===f){var h=c.revertLane;if(0===h)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Ri&&(d=!0);else{if((bo&h)===h){c=c.next,h===Ri&&(d=!0);continue}f={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=o):u=u.next=f,Oo.lanes|=h,hu|=h}f=c.action,_o&&n(o,f),o=c.hasEagerState?c.eagerState:n(o,f)}else h={lane:f,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=o):u=u.next=h,Oo.lanes|=f,hu|=f;c=c.next}while(null!==c&&c!==t);if(null===u?s=o:u.next=l,!Wn(o,e.memoizedState)&&(Es=!0,d&&null!==(n=Qi)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=u,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Xo(e){var t=Lo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Wn(o,t.memoizedState)||(Es=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yo(e,t,n){var r=Oo,i=Lo(),o=oi;if(o){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Wn((wo||i).memoizedState,n);if(s&&(i.memoizedState=n,Es=!0),i=i.queue,va(2048,8,Ho.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==xo&&1&xo.memoizedState.tag){if(r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},qo.bind(null,r,i,n,t),null),null===ru)throw Error(a(349));o||124&bo||Wo(r,t,n)}return n}function Wo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Oo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function qo(e,t,n,r){t.value=n,t.getSnapshot=r,Ko(t)&&Jo(e)}function Ho(e,t,n){return n(function(){Ko(t)&&Jo(e)})}function Ko(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wn(e,n)}catch(e){return!0}}function Jo(e){var t=jr(e,2);null!==t&&Du(t,e,2)}function ea(e){var t=zo();if("function"==typeof e){var n=e;if(e=n(),_o){fe(!0);try{n()}finally{fe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Bo(e,wo,"function"==typeof r?r:Vo)}function na(e,t,n,r,i){if(Fa(e))throw Error(a(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==I.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ra(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ra(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=I.T,a={};I.T=a;try{var s=n(i,r),l=I.S;null!==l&&l(a,s),ia(e,t,s)}catch(n){aa(e,t,n)}finally{I.T=o}}else try{ia(e,t,o=n(i,r))}catch(n){aa(e,t,n)}}function ia(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){oa(e,t,n)},function(n){return aa(e,t,n)}):oa(e,t,n)}function oa(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ua(e,t){if(oi){var n=ru.formState;if(null!==n){e:{var r=Oo;if(oi){if(ii){t:{for(var i=ii,o=si;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=vd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=vd(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=zo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=za.bind(null,Oo,r),r.dispatch=n,r=ea(!1),o=Za.bind(null,Oo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=zo()).queue=i,n=na.bind(null,Oo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return da(Lo(),wo,e)}function da(e,t,n){if(t=Bo(e,t,la)[0],e=Go(Vo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Zo(t)}catch(e){if(e===Gi)throw Xi;throw e}else r=t;var i=(t=Lo()).queue,o=i.dispatch;return n!==t.memoizedState&&(Oo.flags|=2048,pa(9,{destroy:void 0,resource:void 0},fa.bind(null,i,n),null)),[r,o,e]}function fa(e,t){e.action=t}function ha(e){var t=Lo(),n=wo;if(null!==n)return da(t,n,e);Lo(),t=t.memoizedState;var r=(n=Lo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Oo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Oo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(){return Lo().memoizedState}function ga(e,t,n,r){var i=zo();r=void 0===r?null:r,Oo.flags|=e,i.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function va(e,t,n,r){var i=Lo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==wo&&null!==r&&jo(r,wo.memoizedState.deps)?i.memoizedState=pa(t,o,n,r):(Oo.flags|=e,i.memoizedState=pa(1|t,o,n,r))}function ya(e,t){ga(8390656,8,e,t)}function ba(e,t){va(2048,8,e,t)}function Oa(e,t){return va(4,2,e,t)}function wa(e,t){return va(4,4,e,t)}function xa(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Sa(e,t,n){n=null!=n?n.concat([e]):null,va(4,4,xa.bind(null,t,e),n)}function ka(){}function _a(e,t){var n=Lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&jo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pa(e,t){var n=Lo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&jo(t,r[1]))return r[0];if(r=e(),_o){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[r,t],r}function Ea(e,t,n){return void 0===n||1073741824&bo?e.memoizedState=t:(e.memoizedState=n,e=Mu(),Oo.lanes|=e,hu|=e,n)}function $a(e,t,n,r){return Wn(n,t)?n:null!==po.current?(e=Ea(e,n,r),Wn(e,t)||(Es=!0),e):42&bo?(e=Mu(),Oo.lanes|=e,hu|=e,t):(Es=!0,e.memoizedState=n)}function Ta(e,t,n,r,i){var o=M.p;M.p=0!==o&&8>o?o:8;var a,s,l,u=I.T,c={};I.T=c,Za(e,!1,t,n);try{var d=i(),f=I.S;if(null!==f&&f(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var h=(a=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l);La(e,t,h,Iu())}else La(e,t,r,Iu())}catch(n){La(e,t,{then:function(){},status:"rejected",reason:n},Iu())}finally{M.p=o,I.T=u}}function Ca(){}function ja(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=Na(e).queue;Ta(e,i,t,D,null===n?Ca:function(){return Aa(e),n(r)})}function Na(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Aa(e){La(e,Na(e).next.queue,{},Iu())}function Ia(){return Pi(Yd)}function Ma(){return Lo().memoizedState}function Da(){return Lo().memoizedState}function Ra(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Iu(),r=oo(t,e=io(n),n);return null!==r&&(Du(r,t,n),ao(r,t,n)),t={cache:Ai()},void(e.payload=t)}t=t.return}}function Qa(e,t,n){var r=Iu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Fa(e)?Ua(t,n):null!==(n=Cr(e,t,n,r))&&(Du(n,e,r),Va(n,t,r))}function za(e,t,n){La(e,t,n,Iu())}function La(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fa(e))Ua(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Wn(s,a))return Tr(e,t,i,0),null===ru&&$r(),!1}catch(e){}if(null!==(n=Cr(e,t,i,r)))return Du(n,e,r),Va(n,t,r),!0}return!1}function Za(e,t,n,r){if(r={lane:2,revertLane:Tc(),action:r,hasEagerState:!1,eagerState:null,next:null},Fa(e)){if(t)throw Error(a(479))}else null!==(t=Cr(e,n,r,2))&&Du(t,e,2)}function Fa(e){var t=e.alternate;return e===Oo||null!==t&&t===Oo}function Ua(e,t){ko=So=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Va(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Ga={readContext:Pi,use:Fo,useCallback:Co,useContext:Co,useEffect:Co,useImperativeHandle:Co,useLayoutEffect:Co,useInsertionEffect:Co,useMemo:Co,useReducer:Co,useRef:Co,useState:Co,useDebugValue:Co,useDeferredValue:Co,useTransition:Co,useSyncExternalStore:Co,useId:Co,useHostTransitionStatus:Co,useFormState:Co,useActionState:Co,useOptimistic:Co,useMemoCache:Co,useCacheRefresh:Co},Ba={readContext:Pi,use:Fo,useCallback:function(e,t){return zo().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:ya,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,ga(4194308,4,xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=zo();t=void 0===t?null:t;var r=e();if(_o){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zo();if(void 0!==n){var i=n(t);if(_o){fe(!0);try{n(t)}finally{fe(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Qa.bind(null,Oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zo().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=za.bind(null,Oo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ka,useDeferredValue:function(e,t){return Ea(zo(),e,t)},useTransition:function(){var e=ea(!1);return e=Ta.bind(null,Oo,e.queue,!0,!1),zo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Oo,i=zo();if(oi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ru)throw Error(a(349));124&ou||Wo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,ya(Ho.bind(null,r,o,e),[e]),r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},qo.bind(null,r,o,n,t),null),n},useId:function(){var e=zo(),t=ru.identifierPrefix;if(oi){var n=Kr;t="«"+t+"R"+(n=(Hr&~(1<<32-he(Hr)-1)).toString(32)+n),0<(n=Po++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=To++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Ia,useFormState:ua,useActionState:ua,useOptimistic:function(e){var t=zo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Za.bind(null,Oo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Uo,useCacheRefresh:function(){return zo().memoizedState=Ra.bind(null,Oo)}},Xa={readContext:Pi,use:Fo,useCallback:_a,useContext:Pi,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:Oa,useLayoutEffect:wa,useMemo:Pa,useReducer:Go,useRef:ma,useState:function(){return Go(Vo)},useDebugValue:ka,useDeferredValue:function(e,t){return $a(Lo(),wo.memoizedState,e,t)},useTransition:function(){var e=Go(Vo)[0],t=Lo().memoizedState;return["boolean"==typeof e?e:Zo(e),t]},useSyncExternalStore:Yo,useId:Ma,useHostTransitionStatus:Ia,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ta(Lo(),0,e,t)},useMemoCache:Uo,useCacheRefresh:Da},Ya={readContext:Pi,use:Fo,useCallback:_a,useContext:Pi,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:Oa,useLayoutEffect:wa,useMemo:Pa,useReducer:Xo,useRef:ma,useState:function(){return Xo(Vo)},useDebugValue:ka,useDeferredValue:function(e,t){var n=Lo();return null===wo?Ea(n,e,t):$a(n,wo.memoizedState,e,t)},useTransition:function(){var e=Xo(Vo)[0],t=Lo().memoizedState;return["boolean"==typeof e?e:Zo(e),t]},useSyncExternalStore:Yo,useId:Ma,useHostTransitionStatus:Ia,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Lo();return null!==wo?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:Da},Wa=null,qa=0;function Ha(e){var t=qa;return qa+=1,null===Wa&&(Wa=[]),Hi(Wa,e,t)}function Ka(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ja(e,t){if(t.$$typeof===h)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Qr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===P&&es(o)===t.type)?(Ka(t=i(t,n.props),n),t.return=e,t):(Ka(t=Lr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Zr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Fr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return Ka(n=Lr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Ur(t,e.mode,n)).return=e,t;case P:return f(e,t=(0,t._init)(t._payload),n)}if(A(t)||C(t))return(t=Zr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return f(e,Ha(t),n);if(t.$$typeof===w)return f(e,Ei(e,t),n);Ja(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?u(e,t,n,r):null;case m:return n.key===i?c(e,t,n,r):null;case P:return h(e,t,n=(i=n._init)(n._payload),r)}if(A(n)||C(n))return null!==i?null:d(e,t,n,r,null);if("function"==typeof n.then)return h(e,t,Ha(n),r);if(n.$$typeof===w)return h(e,t,Ei(e,n),r);Ja(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(A(r)||C(r))return d(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return v(e,t,n,Ha(r),i);if(r.$$typeof===w)return v(e,t,n,Ei(t,r),i);Ja(t,r)}return null}function y(l,u,c,d){if("object"==typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===g){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===P&&es(b)===u.type){n(l,u.sibling),Ka(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===g?((d=Zr(c.props.children,l.mode,d,c.key)).return=l,l=d):(Ka(d=Lr(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return s(l);case m:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=Ur(c,l.mode,d)).return=l,l=d}return s(l);case P:return y(l,u,c=(b=c._init)(c._payload),d)}if(A(c))return function(i,a,s,l){for(var u=null,c=null,d=a,p=a=0,m=null;null!==d&&p<s.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=h(i,d,s[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,p),null===c?u=g:c.sibling=g,c=g,d=m}if(p===s.length)return n(i,d),oi&&Jr(i,p),u;if(null===d){for(;p<s.length;p++)null!==(d=f(i,s[p],l))&&(a=o(d,a,p),null===c?u=d:c.sibling=d,c=d);return oi&&Jr(i,p),u}for(d=r(d);p<s.length;p++)null!==(m=v(d,i,p,s[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=o(m,a,p),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(i,e)}),oi&&Jr(i,p),u}(l,u,c,d);if(C(c)){if("function"!=typeof(b=C(c)))throw Error(a(150));return function(i,s,l,u){if(null==l)throw Error(a(151));for(var c=null,d=null,p=s,m=s=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=h(i,p,y.value,u);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(i,p),s=o(b,s,m),null===d?c=b:d.sibling=b,d=b,p=g}if(y.done)return n(i,p),oi&&Jr(i,m),c;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=f(i,y.value,u))&&(s=o(y,s,m),null===d?c=y:d.sibling=y,d=y);return oi&&Jr(i,m),c}for(p=r(p);!y.done;m++,y=l.next())null!==(y=v(p,i,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),s=o(y,s,m),null===d?c=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),oi&&Jr(i,m),c}(l,u,c=b.call(c),d)}if("function"==typeof c.then)return y(l,u,Ha(c),d);if(c.$$typeof===w)return y(l,u,Ei(l,c),d);Ja(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=Fr(c,l.mode,d)).return=l,l=d),s(l)):n(l,u)}return function(e,t,n,r){try{qa=0;var i=y(e,t,n,r);return Wa=null,i}catch(t){if(t===Gi||t===Xi)throw t;var o=Dr(29,t,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),is=z(null),os=null;function as(e){var t=e.alternate;Z(cs,1&cs.current),Z(is,e),null===os&&(null===t||null!==po.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(Z(cs,cs.current),Z(is,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else ls()}function ls(){Z(cs,cs.current),Z(is,is.current)}function us(e){L(is),os===e&&(os=null),L(cs)}var cs=z(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Iu(),i=io(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Du(t,e,r),ao(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Iu(),i=io(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Du(t,e,r),ao(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Iu(),r=io(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Du(t,e,n),ao(t,e,n))}};function ps(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!qn(n,r)||!qn(i,o))}function ms(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hs.enqueueReplaceState(t,t.state,null)}function gs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var vs="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ys(e){vs(e)}function bs(e){console.error(e)}function Os(e){vs(e)}function ws(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function xs(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Ss(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function ks(e){return(e=io(e)).tag=3,e}function _s(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){xs(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){xs(t,n,r),"function"!=typeof i&&(null===ku?ku=new Set([this]):ku.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ps=Error(a(461)),Es=!1;function $s(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function Ts(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return _i(t),r=No(e,t,n,a,o,i),s=Do(),null===e||Es?(oi&&s&&ti(t),t.flags|=1,$s(e,t,r,i),t.child):(Ro(e,t,i),Ws(e,t,i))}function Cs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Rr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Lr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,js(e,t,o,r,i))}if(o=e.child,!qs(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:qn)(a,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Qr(o,r)).ref=t.ref,e.return=t,t.child=e}function js(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(qn(o,r)&&e.ref===t.ref){if(Es=!1,t.pendingProps=r=o,!qs(e,i))return t.lanes=e.lanes,Ws(e,t,i);131072&e.flags&&(Es=!0)}}return Ms(e,t,n,r,i)}function Ns(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return As(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,As(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ui(0,null!==o?o.cachePool:null),null!==o?go(t,o):vo(),ss(t)}else null!==o?(Ui(0,o.cachePool),go(t,o),ls(),t.memoizedState=null):(null!==e&&Ui(0,null),vo(),ls());return $s(e,t,i,n),t.child}function As(e,t,n,r){var i=Fi();return i=null===i?null:{parent:Ni._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Ui(0,null),vo(),ss(t),null!==e&&Si(e,t,r,!0),null}function Is(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ms(e,t,n,r,i){return _i(t),n=No(e,t,n,r,void 0,i),r=Do(),null===e||Es?(oi&&r&&ti(t),t.flags|=1,$s(e,t,n,i),t.child):(Ro(e,t,i),Ws(e,t,i))}function Ds(e,t,n,r,i,o){return _i(t),t.updateQueue=null,n=Io(t,r,n,i),Ao(e),r=Do(),null===e||Es?(oi&&r&&ti(t),t.flags|=1,$s(e,t,n,o),t.child):(Ro(e,t,o),Ws(e,t,o))}function Rs(e,t,n,r,i){if(_i(t),null===t.stateNode){var o=Ir,a=n.contextType;"object"==typeof a&&null!==a&&(o=Pi(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=hs,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),a=n.contextType,o.context="object"==typeof a&&null!==a?Pi(a):Ir,o.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(fs(t,n,a,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(a=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&hs.enqueueReplaceState(o,o.state,null),co(t,r,o,i),uo(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=gs(n,s);o.props=l;var u=o.context,c=n.contextType;a=Ir,"object"==typeof c&&null!==c&&(a=Pi(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||u!==a)&&ms(t,o,r,a),to=!1;var f=t.memoizedState;o.state=f,co(t,r,o,i),uo(),u=t.memoizedState,s||f!==u||to?("function"==typeof d&&(fs(t,n,d,r),u=t.memoizedState),(l=to||ps(t,n,l,r,f,u,a))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=a,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),c=gs(n,a=t.memoizedProps),o.props=c,d=t.pendingProps,f=o.context,u=n.contextType,l=Ir,"object"==typeof u&&null!==u&&(l=Pi(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||f!==l)&&ms(t,o,r,l),to=!1,f=t.memoizedState,o.state=f,co(t,r,o,i),uo();var h=t.memoizedState;a!==d||f!==h||to||null!==e&&null!==e.dependencies&&ki(e.dependencies)?("function"==typeof s&&(fs(t,n,s,r),h=t.memoizedState),(c=to||ps(t,n,c,r,f,h,l)||null!==e&&null!==e.dependencies&&ki(e.dependencies))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Is(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,i),t.child=ns(t,null,n,i)):$s(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Ws(e,t,i),e}function Qs(e,t,n,r){return hi(),t.flags|=256,$s(e,t,n,r),t.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ls(e){return{baseLanes:e,cachePool:Vi()}}function Zs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gu),e}function Fs(e,t,n){var r,i=t.pendingProps,o=!1,s=!!(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&!!(2&cs.current)),r&&(o=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?as(t):ls(),oi){var l,u=ii;if(l=u){e:{for(l=u,u=si;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=vd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==qr?{id:Hr,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},(l=Dr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return gd(u)?t.lanes=32:t.lanes=536870912,null;us(t)}return u=i.children,i=i.fallback,o?(ls(),u=Vs({mode:"hidden",children:u},o=t.mode),i=Zr(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(o=t.child).memoizedState=Ls(n),o.childLanes=Zs(e,r,n),t.memoizedState=zs,i):(as(t),Us(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Gs(e,t,n)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),o=i.fallback,u=t.mode,i=Vs({mode:"visible",children:i.children},u),(o=Zr(o,u,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ns(t,e.child,null,n),(i=t.child).memoizedState=Ls(n),i.childLanes=Zs(e,r,n),t.memoizedState=zs,t=o);else if(as(t),gd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(a(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Gs(e,t,n)}else if(Es||Si(e,t,n,!1),r=0!==(n&e.childLanes),Es||r){if(null!==(r=ru)&&(0!==(i=0!==((i=42&(i=n&-n)?1:$e(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,jr(e,i),Du(r,e,i),Ps;"$?"===u.data||Xu(),t=Gs(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=vd(u.nextSibling),ri=t,oi=!0,ai=null,si=!1,null!==e&&(Yr[Wr++]=Hr,Yr[Wr++]=Kr,Yr[Wr++]=qr,Hr=e.id,Kr=e.overflow,qr=t),(t=Us(t,i.children)).flags|=4096);return t}return o?(ls(),o=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Qr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?o=Qr(c,o):(o=Zr(o,u,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(u=e.child.memoizedState)?u=Ls(n):(null!==(l=u.cachePool)?(c=Ni._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Vi(),u={baseLanes:u.baseLanes|n,cachePool:l}),o.memoizedState=u,o.childLanes=Zs(e,r,n),t.memoizedState=zs,i):(as(t),e=(n=e.child).sibling,(n=Qr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Us(e,t){return(t=Vs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vs(e,t){return(e=Dr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gs(e,t,n){return ns(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wi(e.return,t,n)}function Xs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ys(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if($s(e,t,r.children,n),2&(r=cs.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Z(cs,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xs(t,!0,n,null,o);break;case"together":Xs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),hu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Si(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Qr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Qr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ki(e))}function Hs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Es=!0;else{if(!(qs(e,n)||128&t.flags))return Es=!1,function(e,t,n){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),bi(0,Ni,e.memoizedState.cache),hi();break;case 27:case 5:Y(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(as(t),null!==(e=Ws(e,t,n))?e.sibling:null);as(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Si(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ys(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(cs,cs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n);case 24:bi(0,Ni,e.memoizedState.cache)}return Ws(e,t,n)}(e,t,n);Es=!!(131072&e.flags)}else Es=!1,oi&&1048576&t.flags&&ei(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((i=r.$$typeof)===x){t.tag=11,t=Ts(null,t,r,e,n);break e}if(i===_){t.tag=14,t=Cs(null,t,r,e,n);break e}}throw t=N(r)||r,Error(a(306,t,""))}Rr(r)?(e=gs(r,e),t.tag=1,t=Rs(null,t,r,e,n)):(t.tag=0,t=Ms(null,t,r,e,n))}return t;case 0:return Ms(e,t,t.type,t.pendingProps,n);case 1:return Rs(e,t,r=t.type,i=gs(r,t.pendingProps),n);case 3:e:{if(B(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),co(t,r,null,n);var s=t.memoizedState;if(r=s.cache,bi(0,Ni,r),r!==o.cache&&xi(t,[Ni],n,!0),uo(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Qs(e,t,r,n);break e}if(r!==i){mi(i=kr(Error(a(424)),t)),t=Qs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=vd(e.firstChild),ri=t,oi=!0,ai=null,si=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===i){t=Ws(e,t,n);break e}$s(e,t,r,n)}t=t.child}return t;case 26:return Is(e,t),null===e?(n=$d(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=rd(V.current).createElement(n))[Ne]=t,r[Ae]=e,ed(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=$d(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&oi&&(r=t.stateNode=Od(t.type,t.pendingProps,V.current),ri=t,si=!0,i=ii,hd(t.type)?(yd=i,ii=vd(r.firstChild)):ii=i),$s(e,t,t.pendingProps.children,n),Is(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,si))?(t.stateNode=r,ri=t,ii=vd(r.firstChild),si=!1,i=!0):i=!1),i||ui(t)),Y(t),i=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,ad(i,o)?r=null:null!==s&&ad(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=No(e,t,Mo,null,null,n),Yd._currentValue=i),Is(e,t),$s(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,si))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return Fs(e,t,n);case 4:return B(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):$s(e,t,r,n),t.child;case 11:return Ts(e,t,t.type,t.pendingProps,n);case 7:return $s(e,t,t.pendingProps,n),t.child;case 8:case 12:return $s(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),$s(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,_i(t),r=r(i=Pi(i)),t.flags|=1,$s(e,t,r,n),t.child;case 14:return Cs(e,t,t.type,t.pendingProps,n);case 15:return js(e,t,t.type,t.pendingProps,n);case 19:return Ys(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Vs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Qr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ns(e,t,n);case 24:return _i(t),r=Pi(Ni),null===e?(null===(i=Fi())&&(i=ru,o=Ai(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),bi(0,Ni,i)):(0!==(e.lanes&n)&&(ro(e,t),co(t,null,null,n),uo()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Ni,r)):(r=o.cache,bi(0,Ni,r),r!==i.cache&&xi(t,[Ni],n,!0))),$s(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Ks(e){e.flags|=4}function Js(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Zd(t)){if(null!==(t=is.current)&&((4194048&ou)===ou?null!==os:(62914560&ou)!==ou&&!(536870912&ou)||t!==os))throw Ki=Yi,Bi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,vu|=t)}function tl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Oi(Ni),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fi(t)?Ks(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ks(t),null!==n?(nl(t),Js(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ks(t),nl(t),Js(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ks(t),nl(t),t.flags&=-16777217),null;case 27:W(t),n=V.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=F.current,fi(t)?ci(t):(e=Od(i,r,n),t.stateNode=e,Ks(t))}return nl(t),null;case 5:if(W(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=F.current,fi(t))ci(t);else{switch(i=rd(V.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Ne]=t,e[Ae]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ks(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(e=V.current,fi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ne]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||qc(e.nodeValue,n)))||ui(t)}else(e=rd(e).createTextNode(r))[Ne]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Ne]=t}else hi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(us(t),t):(us(t),null)}if(us(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return X(),null===e&&Lc(t.stateNode.containerInfo),nl(t),null;case 10:return Oi(t.type),nl(t),null;case 19:if(L(cs),null===(i=t.memoizedState))return nl(t),null;if(r=!!(128&t.flags),null===(o=i.rendering))if(r)tl(i,!1);else{if(0!==fu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=ds(e))){for(t.flags|=128,tl(i,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return Z(cs,1&cs.current|2),t.child}e=e.sibling}null!==i.tail&&te()>xu&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nl(t),null}else 2*te()-i.renderingStartTime>xu&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=cs.current,Z(cs,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return us(t),yo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&L(Zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Oi(Ni),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Oi(Ni),X(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return W(t),null;case 13:if(us(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return L(cs),null;case 4:return X(),null;case 10:return Oi(t.type),null;case 22:case 23:return us(t),yo(),null!==e&&L(Zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Oi(Ni),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:Oi(Ni),X();break;case 26:case 27:case 5:W(t);break;case 4:X();break;case 13:us(t);break;case 19:L(cs);break;case 10:Oi(t.type);break;case 22:case 23:us(t),yo(),null!==e&&L(Zi);break;case 24:Oi(Ni)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(e){cc(t,t.return,e)}}function sl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,u=s;try{u()}catch(e){cc(i,l,e)}}}r=r.next}while(r!==o)}}catch(e){cc(t,t.return,e)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ho(t,n)}catch(t){cc(e,e.return,t)}}}function ul(e,t,n){n.props=gs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){cc(e,t,n)}}function cl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){cc(e,t,n)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){cc(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){cc(e,t,n)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){cc(e,e.return,t)}}function hl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,s=null,l=null,u=null,c=null,d=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&null!=f)switch(p){case"checked":case"value":break;case"defaultValue":u=f;default:r.hasOwnProperty(p)||Kc(e,t,p,null,r,f)}}for(var h in r){var p=r[h];if(f=n[h],r.hasOwnProperty(h)&&(null!=p||null!=f))switch(h){case"type":o=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==f&&Kc(e,t,h,p,r,f)}}return void gt(e,s,l,u,c,d,o,i);case"select":for(o in p=s=l=h=null,n)if(u=n[o],n.hasOwnProperty(o)&&null!=u)switch(o){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(o)||Kc(e,t,o,null,r,u)}for(i in r)if(o=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=o||null!=u))switch(i){case"value":h=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==u&&Kc(e,t,i,o,r,u)}return t=l,n=s,r=p,void(null!=h?bt(e,!!n,h,!1):!!r!=!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=h=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Kc(e,t,l,null,r,i)}for(s in r)if(i=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=i||null!=o))switch(s){case"value":h=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==o&&Kc(e,t,s,i,r,o)}return void Ot(e,h,p);case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&null!=h&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Kc(e,t,m,null,r,h);for(u in r)if(h=r[u],p=n[u],r.hasOwnProperty(u)&&h!==p&&(null!=h||null!=p))if("selected"===u)e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h;else Kc(e,t,u,h,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)h=n[g],n.hasOwnProperty(g)&&null!=h&&!r.hasOwnProperty(g)&&Kc(e,t,g,null,r,h);for(c in r)if(h=r[c],p=n[c],r.hasOwnProperty(c)&&h!==p&&(null!=h||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:Kc(e,t,c,h,r,p)}return;default:if(Pt(t)){for(var v in n)h=n[v],n.hasOwnProperty(v)&&void 0!==h&&!r.hasOwnProperty(v)&&Jc(e,t,v,void 0,r,h);for(d in r)h=r[d],p=n[d],!r.hasOwnProperty(d)||h===p||void 0===h&&void 0===p||Jc(e,t,d,h,r,p);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&null!=h&&!r.hasOwnProperty(y)&&Kc(e,t,y,null,r,h);for(f in r)h=r[f],p=n[f],!r.hasOwnProperty(f)||h===p||null==h&&null==p||Kc(e,t,f,h,r,p)}(r,e.type,n,t),r[Ae]=t}catch(t){cc(e,e.return,t)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&hd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&hd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Hc));else if(4!==r&&(27===r&&hd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&hd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Ne]=e,t[Ae]=n}catch(t){cc(e,e.return,t)}}var bl=!1,Ol=!1,wl=!1,xl="function"==typeof WeakSet?WeakSet:Set,Sl=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Rl(e,n),4&r&&al(5,n);break;case 1:if(Rl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){cc(n,n.return,e)}else{var i=gs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){cc(n,n.return,e)}}64&r&&ll(n),512&r&&cl(n,n.return);break;case 3:if(Rl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ho(e,t)}catch(e){cc(n,n.return,e)}}break;case 27:null===t&&4&r&&yl(n);case 26:case 5:Rl(e,n),null===t&&4&r&&fl(n),512&r&&cl(n,n.return);break;case 12:Rl(e,n);break;case 13:Rl(e,n),4&r&&Cl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||Ol,i=bl;var o=Ol;bl=r,(Ol=t)&&!o?zl(e,n,!!(8772&n.subtreeFlags)):Rl(e,n),bl=i,Ol=o}break;case 30:break;default:Rl(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Le(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pl=null,El=!1;function $l(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(de&&"function"==typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(e){}switch(n.tag){case 26:Ol||dl(n,t),$l(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ol||dl(n,t);var r=Pl,i=El;hd(n.type)&&(Pl=n.stateNode,El=!1),$l(e,t,n),wd(n.stateNode),Pl=r,El=i;break;case 5:Ol||dl(n,t);case 6:if(r=Pl,i=El,Pl=null,$l(e,t,n),El=i,null!==(Pl=r))if(El)try{(9===Pl.nodeType?Pl.body:"HTML"===Pl.nodeName?Pl.ownerDocument.body:Pl).removeChild(n.stateNode)}catch(e){cc(n,t,e)}else try{Pl.removeChild(n.stateNode)}catch(e){cc(n,t,e)}break;case 18:null!==Pl&&(El?(pd(9===(e=Pl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),$f(e)):pd(Pl,n.stateNode));break;case 4:r=Pl,i=El,Pl=n.stateNode.containerInfo,El=!0,$l(e,t,n),Pl=r,El=i;break;case 0:case 11:case 14:case 15:Ol||sl(2,n,t),Ol||sl(4,n,t),$l(e,t,n);break;case 1:Ol||(dl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),$l(e,t,n);break;case 21:$l(e,t,n);break;case 22:Ol=(r=Ol)||null!==n.memoizedState,$l(e,t,n),Ol=r;break;default:$l(e,t,n)}}function Cl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{$f(e)}catch(e){cc(t,t.return,e)}}function jl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new xl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new xl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Nl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(hd(l.type)){Pl=l.stateNode,El=!1;break e}break;case 5:Pl=l.stateNode,El=!1;break e;case 3:case 4:Pl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Pl)throw Error(a(160));Tl(o,s,i),Pl=null,El=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Al=null;function Il(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nl(t,e),Ml(e),4&r&&(sl(3,e,e.return),al(3,e),sl(5,e,e.return));break;case 1:Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Al;if(Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[ze]||o[Ne]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),ed(o,r,n),o[Ne]=e,Ge(o),r=o;break e;case"link":var s=zd("link","href",i).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(s=zd("meta","content",i).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(a(468,r))}o[Ne]=e,Ge(o),r=o}e.stateNode=r}else Ld(i,e.type,e.stateNode);else e.stateNode=Id(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Ld(i,e.type,e.stateNode):Id(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&hl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),null!==n&&4&r&&hl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Nl(t,e),Ml(e),512&r&&(Ol||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{xt(i,"")}catch(t){cc(e,e.return,t)}}4&r&&null!=e.stateNode&&hl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(wl=!0);break;case 6:if(Nl(t,e),Ml(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){cc(e,e.return,t)}}break;case 3:if(Qd=null,i=Al,Al=kd(t.containerInfo),Nl(t,e),Al=i,Ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$f(t.containerInfo)}catch(t){cc(e,e.return,t)}wl&&(wl=!1,Dl(e));break;case 4:r=Al,Al=kd(e.stateNode.containerInfo),Nl(t,e),Ml(e),Al=r;break;case 12:default:Nl(t,e),Ml(e);break;case 13:Nl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(wu=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=bl,d=Ol;if(bl=c||i,Ol=d||u,Nl(t,e),Ol=d,bl=c,Ml(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||bl||Ol||Ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,i)"function"==typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var f=u.memoizedProps.style,h=null!=f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(e){cc(u,u.return,e)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(e){cc(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,jl(e,n))));break;case 19:Nl(t,e),Ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;vl(e,ml(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(xt(o,""),n.flags&=-33),vl(e,ml(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;gl(e,ml(e),s);break;default:throw Error(a(161))}}catch(t){cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Ql(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&ul(t,t.return,n),Ql(t);break;case 27:wd(t.stateNode);case 26:case 5:dl(t,t.return),Ql(t);break;case 22:null===t.memoizedState&&Ql(t);break;default:Ql(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:zl(i,o,n),al(4,o);break;case 1:if(zl(i,o,n),"function"==typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){cc(r,r.return,e)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)fo(l[i],s)}catch(e){cc(r,r.return,e)}}n&&64&a&&ll(o),cl(o,o.return);break;case 27:yl(o);case 26:case 5:zl(i,o,n),n&&null===r&&4&a&&fl(o),cl(o,o.return);break;case 12:zl(i,o,n);break;case 13:zl(i,o,n),n&&4&a&&Cl(i,o);break;case 22:null===o.memoizedState&&zl(i,o,n),cl(o,o.return);break;case 30:break;default:zl(i,o,n)}t=t.sibling}}function Ll(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ii(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ii(e))}function Fl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,r),t=t.sibling}function Ul(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Fl(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:Fl(e,t,n,r);break;case 3:Fl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ii(e)));break;case 12:if(2048&i){Fl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){cc(t,t.return,e)}}else Fl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?Fl(e,t,n,r):Gl(e,t):2&o._visibility?Fl(e,t,n,r):(o._visibility|=2,Vl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&i&&Ll(a,t);break;case 24:Fl(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function Vl(e,t,n,r,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(o,a,s,l,i),al(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?Vl(o,a,s,l,i):Gl(o,a):(c._visibility|=2,Vl(o,a,s,l,i)),i&&2048&u&&Ll(a.alternate,a);break;case 24:Vl(o,a,s,l,i),i&&2048&u&&Zl(a.alternate,a);break;default:Vl(o,a,s,l,i)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Gl(n,r),2048&i&&Ll(r.alternate,r);break;case 24:Gl(n,r),2048&i&&Zl(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Bl=8192;function Xl(e){if(e.subtreeFlags&Bl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Xl(e),e.flags&Bl&&null!==e.memoizedState&&function(e,t,n){if(null===Fd)throw Error(a(475));var r=Fd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var i=Td(n.href),o=e.querySelector(Cd(i));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=Vd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ge(o);o=e.ownerDocument||e,n=jd(n),(i=xd.get(i))&&Dd(n,i),Ge(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=Vd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Al,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Al;Al=kd(e.stateNode.containerInfo),Xl(e),Al=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Bl,Bl=16777216,Xl(e),Bl=t):Xl(e))}}function Wl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ql(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Jl(r,e)}Wl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Hl(e),e=e.sibling}function Hl(e){switch(e.tag){case 0:case 11:case 15:ql(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Kl(e)):ql(e)}}function Kl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Jl(r,e)}Wl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),Kl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Kl(t));break;default:Kl(t)}e=e.sibling}}function Jl(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ii(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var i=(r=Sl).sibling,o=r.return;if(_l(r),r===n){Sl=null;break e}if(null!==i){i.return=o,Sl=i;break e}Sl=o}}}var eu={getCacheForType:function(e){var t=Pi(Ni),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"==typeof WeakMap?WeakMap:Map,nu=0,ru=null,iu=null,ou=0,au=0,su=null,lu=!1,uu=!1,cu=!1,du=0,fu=0,hu=0,pu=0,mu=0,gu=0,vu=0,yu=null,bu=null,Ou=!1,wu=0,xu=1/0,Su=null,ku=null,_u=0,Pu=null,Eu=null,$u=0,Tu=0,Cu=null,ju=null,Nu=0,Au=null;function Iu(){if(2&nu&&0!==ou)return ou&-ou;if(null!==I.T){return 0!==Ri?Ri:Tc()}return Ce()}function Mu(){0===gu&&(gu=536870912&ou&&!oi?536870912:xe());var e=is.current;return null!==e&&(e.flags|=32),gu}function Du(e,t,n){(e!==ru||2!==au&&9!==au)&&null===e.cancelPendingCommit||(Uu(e,0),Lu(e,ou,gu,!1)),_e(e,n),2&nu&&e===ru||(e===ru&&(!(2&nu)&&(pu|=n),4===fu&&Lu(e,ou,gu,!1)),xc(e))}function Ru(e,t,n){if(6&nu)throw Error(a(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||Oe(e,t),i=r?function(e,t){var n=nu;nu|=2;var r=Gu(),i=Bu();ru!==e||ou!==t?(Su=null,xu=te()+500,Uu(e,t)):uu=Oe(e,t);e:for(;;)try{if(0!==au&&null!==iu){t=iu;var o=su;t:switch(au){case 1:au=0,su=null,Ju(e,t,o,1);break;case 2:case 9:if(Wi(o)){au=0,su=null,Ku(t);break}t=function(){2!==au&&9!==au||ru!==e||(au=7),xc(e)},o.then(t,t);break e;case 3:au=7;break e;case 4:au=5;break e;case 7:Wi(o)?(au=0,su=null,Ku(t)):(au=0,su=null,Ju(e,t,o,7));break;case 5:var s=null;switch(iu.tag){case 26:s=iu.memoizedState;case 5:case 27:var l=iu;if(!s||Zd(s)){au=0,su=null;var u=l.sibling;if(null!==u)iu=u;else{var c=l.return;null!==c?(iu=c,ec(c)):iu=null}break t}}au=0,su=null,Ju(e,t,o,5);break;case 6:au=0,su=null,Ju(e,t,o,6);break;case 8:Fu(),fu=6;break e;default:throw Error(a(462))}}qu();break}catch(t){Vu(e,t)}return yi=vi=null,I.H=r,I.A=i,nu=n,null!==iu?0:(ru=null,ou=0,$r(),fu)}(e,t):Yu(e,t,!0),o=r;;){if(0===i){uu&&!r&&Lu(e,t,0,!1);break}if(n=e.current.alternate,!o||zu(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=yu;var u=l.current.memoizedState.isDehydrated;if(u&&(Uu(l,s).flags|=256),2!==(s=Yu(l,s,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=o,pu|=o,i=4;break e}o=bu,bu=i,null!==o&&(null===bu?bu=o:bu.push.apply(bu,o))}i=s}if(o=!1,2!==i)continue}}if(1===i){Uu(e,0),Lu(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Lu(r,t,gu,!lu);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=wu+300-te())){if(Lu(r,t,gu,!lu),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Qu.bind(null,r,n,bu,Su,Ou,t,gu,pu,vu,lu,o,2,-0,0),i)}else Qu(r,n,bu,Su,Ou,t,gu,pu,vu,lu,o,0,-0,0)}break}i=Yu(e,t,!1),o=!1}xc(e)}function Qu(e,t,n,r,i,o,s,l,u,c,d,f,h,p){if(e.timeoutHandle=-1,(8192&(f=t.subtreeFlags)||!(16785408&~f))&&(Fd={stylesheets:null,count:0,unsuspend:Ud},Yl(t),null!==(f=function(){if(null===Fd)throw Error(a(475));var e=Fd;return e.stylesheets&&0===e.count&&Bd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Bd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=f(nc.bind(null,e,t,o,n,r,i,s,l,u,d,1,h,p)),void Lu(e,o,s,!c);nc(e,t,o,n,r,i,s,l,u)}function zu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wn(o(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lu(e,t,n,r){t&=~mu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-he(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&Pe(e,n,t)}function Zu(){return!!(6&nu)||(Sc(0,!1),!1)}function Fu(){if(null!==iu){if(0===au)var e=iu.return;else yi=vi=null,Qo(e=iu),Wa=null,qa=0,e=iu;for(;null!==e;)ol(e.alternate,e),e=e.return;iu=null}}function Uu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Fu(),ru=e,iu=n=Qr(e.current,null),ou=t,au=0,su=null,lu=!1,uu=Oe(e,t),cu=!1,vu=gu=mu=pu=hu=fu=0,bu=yu=null,Ou=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-he(r),o=1<<i;t|=e[i],r&=~o}return du=t,$r(),n}function Vu(e,t){Oo=null,I.H=Ga,t===Gi||t===Xi?(t=Ji(),au=3):t===Bi?(t=Ji(),au=4):au=t===Ps?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,su=t,null===iu&&(fu=1,ws(e,kr(t,e.current)))}function Gu(){var e=I.H;return I.H=Ga,null===e?Ga:e}function Bu(){var e=I.A;return I.A=eu,e}function Xu(){fu=4,lu||(4194048&ou)!==ou&&null!==is.current||(uu=!0),!(134217727&hu)&&!(134217727&pu)||null===ru||Lu(ru,ou,gu,!1)}function Yu(e,t,n){var r=nu;nu|=2;var i=Gu(),o=Bu();ru===e&&ou===t||(Su=null,Uu(e,t)),t=!1;var a=fu;e:for(;;)try{if(0!==au&&null!==iu){var s=iu,l=su;switch(au){case 8:Fu(),a=6;break e;case 3:case 2:case 9:case 6:null===is.current&&(t=!0);var u=au;if(au=0,su=null,Ju(e,s,l,u),n&&uu){a=0;break e}break;default:u=au,au=0,su=null,Ju(e,s,l,u)}}Wu(),a=fu;break}catch(t){Vu(e,t)}return t&&e.shellSuspendCounter++,yi=vi=null,nu=r,I.H=i,I.A=o,null===iu&&(ru=null,ou=0,$r()),a}function Wu(){for(;null!==iu;)Hu(iu)}function qu(){for(;null!==iu&&!J();)Hu(iu)}function Hu(e){var t=Hs(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ku(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ds(n,t,t.pendingProps,t.type,void 0,ou);break;case 11:t=Ds(n,t,t.pendingProps,t.type.render,t.ref,ou);break;case 5:Qo(t);default:ol(n,t),t=Hs(n,t=iu=zr(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ju(e,t,n,r){yi=vi=null,Qo(t),Wa=null,qa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Si(t,n,i,!0),null!==(n=is.current)){switch(n.tag){case 13:return null===os?Xu():null===n.alternate&&0===fu&&(fu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),dc(e,r,i)),!1;case 22:return n.flags|=65536,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),dc(e,r,i)),!1}throw Error(a(435,n.tag))}return dc(e,r,i),Xu(),!1}if(oi)return null!==(t=is.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(kr(e=Error(a(422),{cause:r}),n))):(r!==li&&mi(kr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=kr(r,n),so(e,i=Ss(e.stateNode,r,i)),4!==fu&&(fu=2)),!1;var o=Error(a(520),{cause:r});if(o=kr(o,n),null===yu?yu=[o]:yu.push(o),4!==fu&&(fu=2),null===t)return!0;r=kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,so(n,e=Ss(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==ku&&ku.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,_s(i=ks(i),e,n,r),so(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ou))return fu=1,ws(e,kr(n,e.current)),void(iu=null)}catch(t){if(null!==i)throw iu=i,t;return fu=1,ws(e,kr(n,e.current)),void(iu=null)}32768&t.flags?(oi||1===r?e=!0:uu||536870912&ou?e=!1:(lu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=is.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(32768&t.flags)return void tc(t,lu);e=t.return;var n=rl(t.alternate,t,du);if(null!==n)return void(iu=n);if(null!==(t=t.sibling))return void(iu=t);iu=t=e}while(null!==t);0===fu&&(fu=5)}function tc(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(iu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(iu=e);iu=e=n}while(null!==e);fu=6,iu=null}function nc(e,t,n,r,i,o,s,l,u){e.cancelPendingCommit=null;do{sc()}while(0!==_u);if(6&nu)throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-he(n),d=1<<c;s[c]=0,l[c]=-1;var f=u[c];if(null!==f)for(u[c]=null,c=0;c<f.length;c++){var h=f[c];null!==h&&(h.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,o|=Er,s,l,u),e===ru&&(iu=ru=null,ou=0),Eu=t,Pu=e,$u=n,Tu=o,Cu=i,ju=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,H(oe,function(){return lc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=I.T,I.T=null,i=M.p,M.p=2,s=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,td=nf,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==o||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++c===i&&(l=s),h===o&&++d===r&&(u=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nf=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,1024&t.subtreeFlags&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(o=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=gs(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){cc(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nu=s,M.p=i,I.T=r}}_u=1,rc(),ic(),oc()}}function rc(){if(1===_u){_u=0;var e=Pu,t=Eu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=I.T,I.T=null;var r=M.p;M.p=2;var i=nu;nu|=4;try{Il(t,e);var o=nd,a=er(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&Jn(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var h=f.getSelection(),p=s.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!h.extend&&m>g&&(a=g,g=m,m=a);var v=Kn(s,m),y=Kn(s,g);if(v&&y&&(1!==h.rangeCount||h.anchorNode!==v.node||h.anchorOffset!==v.offset||h.focusNode!==y.node||h.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),h.removeAllRanges(),m>g?(h.addRange(b),h.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),h.addRange(b))}}}}for(d=[],h=s;h=h.parentNode;)1===h.nodeType&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var O=d[s];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}nf=!!td,nd=td=null}finally{nu=i,M.p=r,I.T=n}}e.current=t,_u=2}}function ic(){if(2===_u){_u=0;var e=Pu,t=Eu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=I.T,I.T=null;var r=M.p;M.p=2;var i=nu;nu|=4;try{kl(e,t.alternate,t)}finally{nu=i,M.p=r,I.T=n}}_u=3}}function oc(){if(4===_u||3===_u){_u=0,ee();var e=Pu,t=Eu,n=$u,r=ju;10256&t.subtreeFlags||10256&t.flags?_u=5:(_u=0,Eu=Pu=null,ac(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(ku=null),Te(n),t=t.stateNode,de&&"function"==typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=I.T,i=M.p,M.p=2,I.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{I.T=t,M.p=i}}3&$u&&sc(),xc(e),i=e.pendingLanes,4194090&n&&42&i?e===Au?Nu++:(Nu=0,Au=e):Nu=0,Sc(0,!1)}}function ac(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ii(t)))}function sc(e){return rc(),ic(),oc(),lc()}function lc(){if(5!==_u)return!1;var e=Pu,t=Tu;Tu=0;var n=Te($u),r=I.T,i=M.p;try{M.p=32>n?32:n,I.T=null,n=Cu,Cu=null;var o=Pu,s=$u;if(_u=0,Eu=Pu=null,$u=0,6&nu)throw Error(a(331));var l=nu;if(nu|=4,Hl(o.current),Ul(o,o.current,s,n),nu=l,Sc(0,!1),de&&"function"==typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,o)}catch(e){}return!0}finally{M.p=i,I.T=r,ac(e,t)}}function uc(e,t,n){t=kr(n,t),null!==(e=oo(e,t=Ss(e.stateNode,t,2),2))&&(_e(e,2),xc(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ku||!ku.has(r))){e=kr(n,e),null!==(r=oo(t,n=ks(2),2))&&(_s(n,r,t,e),_e(r,2),xc(r));break}}t=t.return}}function dc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(cu=!0,i.add(n),e=fc.bind(null,e,t,n),t.then(e,e))}function fc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(ou&n)===n&&(4===fu||3===fu&&(62914560&ou)===ou&&300>te()-wu?!(2&nu)&&Uu(e,0):mu|=n,vu===ou&&(vu=0)),xc(e)}function hc(e,t){0===t&&(t=Se()),null!==(e=jr(e,t))&&(_e(e,t),xc(e))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),hc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),hc(e,n)}var gc=null,vc=null,yc=!1,bc=!1,Oc=!1,wc=0;function xc(e){e!==vc&&null===e.next&&(null===vc?gc=vc=e:vc=vc.next=e),bc=!0,yc||(yc=!0,dd(function(){6&nu?H(re,kc):_c()}))}function Sc(e,t){if(!Oc&&bc){Oc=!0;do{for(var n=!1,r=gc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-he(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,$c(r,o))}else o=ou,!(3&(o=be(r,r===ru?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Oe(r,o)||(n=!0,$c(r,o));r=r.next}}while(n);Oc=!1}}function kc(){_c()}function _c(){bc=yc=!1;var e=0;0!==wc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=wc),wc=0);for(var t=te(),n=null,r=gc;null!==r;){var i=r.next,o=Pc(r,t);0===o?(r.next=null,null===n?gc=i:n.next=i,null===i&&(vc=n)):(n=r,(0!==e||3&o)&&(bc=!0)),r=i}Sc(e,!1)}function Pc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-he(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=we(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=ou,n=be(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===au||9===au)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&K(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Oe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&K(r),Te(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=se}return r=Ec.bind(null,e),n=H(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&K(r),e.callbackPriority=2,e.callbackNode=null,2}function Ec(e,t){if(0!==_u&&5!==_u)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sc()&&e.callbackNode!==n)return null;var r=ou;return 0===(r=be(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ru(e,r,t),Pc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ec.bind(null,e):null)}function $c(e,t){if(sc())return null;Ru(e,t,!0)}function Tc(){return 0===wc&&(wc=xe()),wc}function Cc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Tt(""+e)}function jc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Nc=0;Nc<wr.length;Nc++){var Ac=wr[Nc];xr(Ac.toLowerCase(),"on"+(Ac[0].toUpperCase()+Ac.slice(1)))}xr(hr,"onAnimationEnd"),xr(pr,"onAnimationIteration"),xr(mr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(gr,"onTransitionRun"),xr(vr,"onTransitionStart"),xr(yr,"onTransitionCancel"),xr(br,"onTransitionEnd"),We("onMouseEnter",["mouseout","mouseover"]),We("onMouseLeave",["mouseout","mouseover"]),We("onPointerEnter",["pointerout","pointerover"]),We("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function Dc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(e){vs(e)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(e){vs(e)}i.currentTarget=null,o=l}}}}function Rc(e,t){var n=t[Me];void 0===n&&(n=t[Me]=new Set);var r=e+"__bubble";n.has(r)||(Zc(t,e,2,!1),n.add(r))}function Qc(e,t,n){var r=0;t&&(r|=4),Zc(n,e,r,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Lc(e){if(!e[zc]){e[zc]=!0,Be.forEach(function(t){"selectionchange"!==t&&(Mc.has(t)||Qc(t,!1,e),Qc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zc]||(t[zc]=!0,Qc("selectionchange",!1,t))}}function Zc(e,t,n,r){switch(cf(t)){case 2:var i=rf;break;case 8:i=of;break;default:i=af}n=i.bind(null,t,n,e),i=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Fc(e,t,n,r,i){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==s;){if(null===(a=Ze(s)))return;if(5===(u=a.tag)||6===u||26===u||27===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Dt(function(){var r=o,i=jt(n),a=[];e:{var s=Or.get(e);if(void 0!==s){var u=Jt,c=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":u=mn;break;case"focusin":c="focus",u=an;break;case"focusout":c="blur",u=an;break;case"beforeblur":case"afterblur":u=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=vn;break;case hr:case pr:case mr:u=sn;break;case br:u=yn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=gn;break;case"toggle":case"beforetoggle":u=On}var d=!!(4&t),f=!d&&("scroll"===e||"scrollend"===e),h=d?null!==s?s+"Capture":null:s;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===h||null!=(g=Rt(m,h))&&d.push(Uc(m,g,p)),f)break;m=m.return}0<d.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ct||!(c=n.relatedTarget||n.fromElement)||!Ze(c)&&!c[Ie])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ze(c):null)&&(f=l(c),d=c.tag,c!==f||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=rn,g="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",h="onPointerEnter",m="pointer"),f=null==u?s:Ue(u),p=null==c?s:Ue(c),(s=new d(g,m+"leave",u,n,i)).target=f,s.relatedTarget=p,g=null,Ze(i)===r&&((d=new d(h,m+"enter",c,n,i)).target=p,d.relatedTarget=f,g=d),f=g,u&&c)e:{for(h=c,m=0,p=d=u;p;p=Gc(p))m++;for(p=0,g=h;g;g=Gc(g))p++;for(;0<m-p;)d=Gc(d),m--;for(;0<p-m;)h=Gc(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gc(d),h=Gc(h)}d=null}else d=null;null!==u&&Bc(a,s,u,d,!1),null!==c&&null!==f&&Bc(a,f,c,d,!0)}if("select"===(u=(s=r?Ue(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Qn;else if(Nn(s))if(zn)v=Yn;else{v=Bn;var y=Gn}else!(u=s.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Pt(r.elementType)&&(v=Qn):v=Xn;switch(v&&(v=v(e,r))?An(a,v,n,i):(y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&yt(s,"number",s.value)),y=r?Ue(r):window,e){case"focusin":(Nn(y)||"true"===y.contentEditable)&&(rr=y,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,i)}var b;if(xn)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Cn?$n(e,n)&&(O="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(O="onCompositionStart");O&&(_n&&"ko"!==n.locale&&(Cn||"onCompositionStart"!==O?"onCompositionEnd"===O&&Cn&&(b=Vt()):(Ft="value"in(Zt=i)?Zt.value:Zt.textContent,Cn=!0)),0<(y=Vc(r,O)).length&&(O=new un(O,e,null,n,i),a.push({event:O,listeners:y}),b?O.data=b:null!==(b=Tn(n))&&(O.data=b))),(b=kn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(En=!0,Pn);case"textInput":return(e=t.data)===Pn&&En?null:e;default:return null}}(e,n):function(e,t){if(Cn)return"compositionend"===e||!xn&&$n(e,t)?(e=Vt(),Ut=Ft=Zt=null,Cn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(O=Vc(r,"onBeforeInput")).length&&(y=new un("onBeforeInput","beforeinput",null,n,i),a.push({event:y,listeners:O}),y.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Cc((i[Ae]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ae]||null)?Cc(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new Jt("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wc){var e=a?jc(i,a):new FormData(i);ja(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"==typeof o&&(s.preventDefault(),e=a?jc(i,a):new FormData(i),ja(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,r,n,i)}Dc(a,t)})}function Uc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Rt(e,n))&&r.unshift(Uc(e,i,o)),null!=(i=Rt(e,t))&&r.push(Uc(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Gc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Bc(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=Rt(n,o))&&a.unshift(Uc(n,u,l)):i||null!=(u=Rt(n,o))&&a.push(Uc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xc=/\r\n?/g,Yc=/\u0000|\uFFFD/g;function Wc(e){return("string"==typeof e?e:""+e).replace(Xc,"\n").replace(Yc,"")}function qc(e,t){return t=Wc(t),Wc(e)===t}function Hc(){}function Kc(e,t,n,r,i,o){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||xt(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&xt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===n?("input"!==t&&Kc(e,t,"name",i.name,i,null),Kc(e,t,"formEncType",i.formEncType,i,null),Kc(e,t,"formMethod",i.formMethod,i,null),Kc(e,t,"formTarget",i.formTarget,i,null)):(Kc(e,t,"encType",i.encType,i,null),Kc(e,t,"method",i.method,i,null),Kc(e,t,"target",i.target,i,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Hc);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Rc("beforetoggle",e),Rc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,r)}}function Jc(e,t,n,r,i,o){switch(n){case"style":_t(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"==typeof r?xt(e,r):("number"==typeof r||"bigint"==typeof r)&&xt(e,""+r);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Xe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(o=null!=(o=e[Ae]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!=typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rc("error",e),Rc("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Kc(e,t,r,s,n,null)}}return o&&Kc(e,t,"srcSet",n.srcSet,n,null),void(i&&Kc(e,t,"src",n.src,n,null));case"input":Rc("invalid",e);var l=r=s=o=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Kc(e,t,i,d,n,null)}}return vt(e,r,l,u,c,s,o,!1),void dt(e);case"select":for(o in Rc("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:Kc(e,t,o,l,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(s in Rc("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Kc(e,t,s,l,n,null)}return wt(e,i,o,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i;else Kc(e,t,u,i,n,null);return;case"dialog":Rc("beforetoggle",e),Rc("toggle",e),Rc("cancel",e),Rc("close",e);break;case"iframe":case"object":Rc("load",e);break;case"video":case"audio":for(i=0;i<Ic.length;i++)Rc(Ic[i],e);break;case"image":Rc("error",e),Rc("load",e);break;case"details":Rc("toggle",e);break;case"embed":case"source":case"link":Rc("error",e),Rc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Kc(e,t,c,i,n,null)}return;default:if(Pt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Jc(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Kc(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ld="function"==typeof setTimeout?setTimeout:void 0,ud="function"==typeof clearTimeout?clearTimeout:void 0,cd="function"==typeof Promise?Promise:void 0,dd="function"==typeof queueMicrotask?queueMicrotask:void 0!==cd?function(e){return cd.resolve(null).then(e).catch(fd)}:ld;function fd(e){setTimeout(function(){throw e})}function hd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&wd(a.documentElement),2&n&&wd(a.body),4&n)for(wd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[ze]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void $f(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);$f(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),Le(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Od(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Le(e)}var xd=new Map,Sd=new Set;function kd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=M.d;M.d={f:function(){var e=_d.f(),t=Zu();return e||t},r:function(e){var t=Fe(e);null!==t&&5===t.tag&&"form"===t.type?Aa(t):_d.r(e)},D:function(e){_d.D(e),Ed("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Ed("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=Pd;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var o=i;switch(t){case"style":o=Td(e);break;case"script":o=Nd(e)}xd.has(o)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),xd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Cd(o))||"script"===t&&r.querySelector(Ad(o))||(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=Pd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Nd(e)}if(!xd.has(o)&&(e=f({rel:"modulepreload",href:e},t),xd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ad(o)))return}ed(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=Pd;if(n&&e){var r=Ve(n).hoistableScripts,i=Nd(e),o=r.get(i);o||((o=n.querySelector(Ad(i)))||(e=f({src:e,async:!0},t),(t=xd.get(i))&&Rd(e,t),Ge(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){_d.S(e,t,n);var r=Pd;if(r&&e){var i=Ve(r).hoistableStyles,o=Td(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Cd(o)))s.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=xd.get(o))&&Dd(e,n);var l=a=r.createElement("link");Ge(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Md(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){_d.M(e,t);var n=Pd;if(n&&e){var r=Ve(n).hoistableScripts,i=Nd(e),o=r.get(i);o||((o=n.querySelector(Ad(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=xd.get(i))&&Rd(e,t),Ge(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Pd="undefined"==typeof document?null:document;function Ed(e,t,n){var r=Pd;if(r&&"string"==typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),Sd.has(i)||(Sd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function $d(e,t,n,r){var i,o,s,l,u=(u=V.current)?kd(u):null;if(!u)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Td(n.href),(r=(n=Ve(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Td(n.href);var c=Ve(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Cd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),xd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xd.set(e,n),c||(i=u,o=e,s=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),ed(o,"link",s),Ge(o),i.head.appendChild(o))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Nd(n),(r=(n=Ve(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Td(e){return'href="'+mt(e)+'"'}function Cd(e){return'link[rel="stylesheet"]['+e+"]"}function jd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Nd(e){return'[src="'+mt(e)+'"]'}function Ad(e){return"script[async]"+e}function Id(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Md(r,n.precedence,e),t.instance=r;case"stylesheet":i=Td(n.href);var o=e.querySelector(Cd(i));if(o)return t.state.loading|=4,t.instance=o,Ge(o),o;r=jd(n),(i=xd.get(i))&&Dd(r,i),Ge(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",r),t.state.loading|=4,Md(o,n.precedence,e),t.instance=o;case"script":return o=Nd(n.src),(i=e.querySelector(Ad(o)))?(t.instance=i,Ge(i),i):(r=n,(i=xd.get(o))&&Rd(r=f({},n),i),Ge(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Md(r,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Rd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Qd=null;function zd(e,t,n){if(null===Qd){var r=new Map,i=Qd=new Map;i.set(n,r)}else(r=(i=Qd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[ze]||o[Ne]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Ld(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Zd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Fd=null;function Ud(){}function Vd(){if(this.count--,0===this.count)if(this.stylesheets)Bd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Bd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Xd,e),Gd=null,Vd.call(e))}function Xd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Vd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Wd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function qd(e,t,n,r,i,o,a,s,l,u,c,d){return e=new Wd(e,t,n,a,s,l,u,d),t=1,!0===o&&(t|=24),o=Dr(3,null,null,t),e.current=o,o.stateNode=e,(t=Ai()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Hd(e){return e?e=Ir:Ir}function Kd(e,t,n,r,i,o){i=Hd(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Du(n,0,t),ao(n,e,t))}function Jd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ef(e,t){Jd(e,t),(e=e.alternate)&&Jd(e,t)}function tf(e){if(13===e.tag){var t=jr(e,67108864);null!==t&&Du(t,0,67108864),ef(e,67108864)}}var nf=!0;function rf(e,t,n,r){var i=I.T;I.T=null;var o=M.p;try{M.p=2,af(e,t,n,r)}finally{M.p=o,I.T=i}}function of(e,t,n,r){var i=I.T;I.T=null;var o=M.p;try{M.p=8,af(e,t,n,r)}finally{M.p=o,I.T=i}}function af(e,t,n,r){if(nf){var i=sf(r);if(null===i)Fc(e,t,r,lf,n),bf(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return ff=Of(ff,e,t,n,r,i),!0;case"dragenter":return hf=Of(hf,e,t,n,r,i),!0;case"mouseover":return pf=Of(pf,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return mf.set(o,Of(mf.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,gf.set(o,Of(gf.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bf(e,r),4&t&&-1<yf.indexOf(e)){for(;null!==i;){var o=Fe(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ye(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-he(a);s.entanglements[1]|=l,a&=~l}xc(o),!(6&nu)&&(xu=te()+500,Sc(0,!1))}}break;case 13:null!==(s=jr(o,2))&&Du(s,0,2),Zu(),ef(o,2)}if(null===(o=sf(r))&&Fc(e,t,r,lf,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Fc(e,t,r,null,n)}}function sf(e){return uf(e=jt(e))}var lf=null;function uf(e){if(lf=null,null!==(e=Ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lf=e,null}function cf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var df=!1,ff=null,hf=null,pf=null,mf=new Map,gf=new Map,vf=[],yf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bf(e,t){switch(e){case"focusin":case"focusout":ff=null;break;case"dragenter":case"dragleave":hf=null;break;case"mouseover":case"mouseout":pf=null;break;case"pointerover":case"pointerout":mf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(t.pointerId)}}function Of(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Fe(t))&&tf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wf(e){var t=Ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}(e.priority,function(){if(13===n.tag){var e=Iu();e=$e(e);var t=jr(n,e);null!==t&&Du(t,0,e),ef(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sf(e.nativeEvent);if(null!==n)return null!==(t=Fe(n))&&tf(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ct=r,n.target.dispatchEvent(r),Ct=null,t.shift()}return!0}function Sf(e,t,n){xf(e)&&n.delete(t)}function kf(){df=!1,null!==ff&&xf(ff)&&(ff=null),null!==hf&&xf(hf)&&(hf=null),null!==pf&&xf(pf)&&(pf=null),mf.forEach(Sf),gf.forEach(Sf)}function _f(e,t){e.blockedOn===t&&(e.blockedOn=null,df||(df=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kf)))}var Pf=null;function Ef(e){Pf!==e&&(Pf=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Pf===e&&(Pf=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===uf(r||n))continue;break}var o=Fe(n);null!==o&&(e.splice(t,3),t-=3,ja(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function $f(e){function t(t){return _f(t,e)}null!==ff&&_f(ff,e),null!==hf&&_f(hf,e),null!==pf&&_f(pf,e),mf.forEach(t),gf.forEach(t);for(var n=0;n<vf.length;n++){var r=vf[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vf.length&&null===(n=vf[0]).blockedOn;)wf(n),null===n.blockedOn&&vf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[Ae]||null;if("function"==typeof o)a||Ef(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[Ae]||null)s=a.formAction;else if(null!==uf(i))continue}else s=a.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Ef(n)}}}function Tf(e){this._internalRoot=e}function Cf(e){this._internalRoot=e}Cf.prototype.render=Tf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kd(t.current,Iu(),e,t,null,null)},Cf.prototype.unmount=Tf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Kd(e.current,2,null,e,null,null),Zu(),t[Ie]=null}},Cf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ce();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vf.length&&0!==t&&t<vf[n].priority;n++);vf.splice(n,0,e),0===n&&wf(e)}};var jf=i.version;if("19.1.1"!==jf)throw Error(a(527,jf,"19.1.1"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return c(i),e;if(o===r)return c(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Nf={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{ce=Af.inject(Nf),de=Af}catch(e){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",i=ys,o=bs,l=Os;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=qd(e,1,!1,null,0,n,r,i,o,l,0,null),e[Ie]=t.current,Lc(e),new Tf(t)}},261:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var o=i(n(871)),a=r(n(613)),s=r(n(769)),l=i(n(849)),u=i(n(624)),c=r(n(148));function d(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=a.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var f=d();f.create=d,c.default(f),f.default=f,t.default=f,e.exports=t.default},277:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),o.default(e),a.default(e),s.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var i=r(n(97)),o=r(n(785)),a=r(n(353)),s=r(n(355)),l=r(n(300)),u=r(n(466)),c=r(n(908))},300:(e,t)=>{t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t.default},338:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(247)},350:(e,t,n)=>{t.__esModule=!0;var r,i=n(769),o=(r=i)&&r.__esModule?r:{default:r};function a(){this.parents=[]}function s(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function l(e){s.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function u(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}a.prototype={constructor:a,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!a.prototype[n.type])throw new o.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new o.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:s,Decorator:s,BlockStatement:l,DecoratorBlock:l,PartialStatement:u,PartialBlockStatement:function(e){u.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:s,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=a,e.exports=t.default},353:(e,t,n)=>{t.__esModule=!0;var r,i=n(769),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},355:(e,t,n)=>{t.__esModule=!0;var r,i=n(849),o=n(769),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new a.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){if(2!=arguments.length)throw new a.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},425:(e,t,n)=>{t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",i=[],a=0,s=0,l=t.length;s<l;s++){var u=t[s].part,c=t[s].original!==u;if(r+=(t[s].separator||"")+u,c||".."!==u&&"."!==u&&"this"!==u)i.push(u);else{if(i.length>0)throw new o.default("Invalid path: "+r,{loc:n});".."===u&&a++}}return{type:"PathExpression",data:e,depth:a,parts:i,original:r,loc:n}},t.prepareMustache=function(e,t,n,r,i,o){var a=r.charAt(3)||r.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:s,strip:i,loc:this.locInfo(o)}},t.prepareRawBlock=function(e,t,n,r){a(e,n),r=this.locInfo(r);var i={type:"Program",body:t,strip:{},loc:r};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}},t.prepareBlock=function(e,t,n,r,i,s){r&&r.path&&a(e,r);var l=/\*/.test(e.open);t.blockParams=e.blockParams;var u=void 0,c=void 0;if(n){if(l)throw new o.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),c=n.strip,u=n.program}i&&(i=u,u=t,t=i);return{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:u,openStrip:e.strip,inverseStrip:c,closeStrip:r&&r.strip,loc:this.locInfo(s)}},t.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,r=e[e.length-1].loc;n&&r&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,n,r){return a(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}};var r,i=n(769),o=(r=i)&&r.__esModule?r:{default:r};function a(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new o.default(e.path.original+" doesn't match "+t,n)}}},430:(e,t,n)=>{t.__esModule=!0;var r=n(849);t.default=function(e){e.registerDecorator("inline",function(e,t,n,i){var o=e;return t.partials||(t.partials={},o=function(i,o){var a=n.partials;n.partials=r.extend({},a,t.partials);var s=e(i,o);return n.partials=a,s}),t.partials[i.args[0]]=i.fn,o})},e.exports=t.default},466:(e,t)=>{t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,n){return e?n.lookupProperty(e,t):e})},e.exports=t.default},477:(e,t)=>{
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,O="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,k||(k=!0,S());else{var t=r(c);null!==t&&N(x,t.startTime-e)}}var S,k=!1,_=-1,P=5,E=-1;function $(){return!!v||!(t.unstable_now()-E<P)}function T(){if(v=!1,k){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(_),_=-1),p=!0;var o=h;try{t:{for(w(e),f=r(u);null!==f&&!(f.expirationTime>e&&$());){var a=f.callback;if("function"==typeof a){f.callback=null,h=f.priorityLevel;var s=a(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof s){f.callback=s,w(e),n=!0;break t}f===r(u)&&i(u),w(e)}else i(u);f=r(u)}if(null!==f)n=!0;else{var l=r(c);null!==l&&N(x,l.startTime-e),n=!1}}break e}finally{f=null,h=o,p=!1}n=void 0}}finally{n?S():k=!1}}}if("function"==typeof O)S=function(){O(T)};else if("undefined"!=typeof MessageChannel){var C=new MessageChannel,j=C.port2;C.port1.onmessage=T,S=function(){j.postMessage(null)}}else S=function(){y(T,0)};function N(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(b(_),_=-1):g=!0,N(x,o-a))):(e.sortIndex=s,n(u,e),m||p||(m=!0,k||(k=!0,S()))),e},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},493:(e,t,n)=>{
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s(function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})},[e,n,t]),a(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},540:(e,t,n)=>{e.exports=n(869)},566:(e,t,n)=>{t.__esModule=!0;var r=n(849),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];console[t].apply(console,r)}}};t.default=i,e.exports=t.default},613:(e,t)=>{function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},614:(e,t)=>{t.__esModule=!0,t.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},624:(e,t,n)=>{t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t>=s.LAST_COMPATIBLE_COMPILER_REVISION&&t<=s.COMPILER_REVISION)return;if(t<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[n],i=s.REVISION_CHANGES[t];throw new a.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new a.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new a.default("No environment passed to template");if(!e||!e.main)throw new a.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!e||!(t in e))throw new a.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||c.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){if(null!=(e[i]&&r.lookupProperty(e[i],t)))return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:function(n,r,o){o.hash&&(r=i.extend({},r,o.hash),o.ids&&(o.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,o);var s=i.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,r,s);if(null==l&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),l=o.partials[o.name](r,s)),null!=l){if(o.indent){for(var u=l.split("\n"),c=0,d=u.length;c<d&&(u[c]||c+1!==d);c++)u[c]=o.indent+u[c];l=u.join("\n")}return l}throw new a.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var o=this.programs[e],a=this.fn(e);return t||i||r||n?o=d(this,e,a,t,n,r,i):o||(o=this.programs[e]=d(this,e,a)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function o(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;o._setup(n),!n.partial&&e.useData&&(i=function(e,t){t&&"root"in t||((t=t?s.createFrame(t):{}).root=e);return t}(t,i));var a=void 0,l=e.useBlockParams?[]:void 0;function u(t){return""+e.main(r,t,r.helpers,r.partials,i,l,a)}return e.useDepths&&(a=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(u=h(e.main,u,r,n.depths||[],i,l))(t,n)}return o.isTop=!0,o._setup=function(o){if(o.partial)r.protoAccessControl=o.protoAccessControl,r.helpers=o.helpers,r.partials=o.partials,r.decorators=o.decorators,r.hooks=o.hooks;else{var a=i.extend({},t.helpers,o.helpers);!function(e,t){Object.keys(e).forEach(function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return u.wrapHelper(e,function(e){return i.extend({lookupProperty:n},e)})}(r,t)})}(a,r),r.helpers=a,e.usePartial&&(r.partials=r.mergeIfNeeded(o.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=i.extend({},t.decorators,o.decorators)),r.hooks={},r.protoAccessControl=c.createProtoAccessControl(o);var s=o.allowCallsToHelperMissing||n;l.moveHelperToHooks(r,"helperMissing",s),l.moveHelperToHooks(r,"blockHelperMissing",s)}},o._child=function(t,n,i,o){if(e.useBlockParams&&!i)throw new a.default("must pass block params");if(e.useDepths&&!o)throw new a.default("must pass parent depths");return d(r,t,e[t],n,0,i,o)},o},t.wrapProgram=d,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;n.fn&&n.fn!==f&&function(){n.data=s.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=i.extend({},n.partials,e.partials))}();void 0===e&&o&&(e=o);if(void 0===e)throw new a.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=f;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(849)),o=n(769),a=(r=o)&&r.__esModule?r:{default:r},s=n(871),l=n(277),u=n(614),c=n(865);function d(e,t,n,r,i,o,a){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),n(e,t,e.helpers,e.partials,i.data||r,o&&[i.blockParams].concat(o),s)}return(s=h(n,s,e,a,r,o)).program=t,s.depth=a?a.length:0,s.blockParams=i||0,s}function f(){return""}function h(e,t,n,r,o,a){if(e.decorator){var s={};t=e.decorator(t,s,n,r&&r[0],o,a,r),i.extend(t,s)}return t}},632:(e,t,n)=>{t.__esModule=!0;var r=n(849),i=void 0;try{}catch(e){}function o(e,t,n){if(r.isArray(e)){for(var i=[],o=0,a=e.length;o<a;o++)i.push(t.wrap(e[o],n));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function a(e){this.srcFile=e,this.source=[]}i||((i=function(e,t,n,r){this.src="",r&&this.add(r)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=o(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach(function(r){var i=o(e[r],t);"undefined"!==i&&n.push([t.quotedString(r),":",i])});var r=this.generateList(n);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),n=0,r=e.length;n<r;n++)n&&t.add(","),t.add(o(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=a,e.exports=t.default},639:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n(261)),o=r(n(919)),a=n(27),s=n(127),l=r(n(727)),u=r(n(350)),c=r(n(148)),d=i.default.create;function f(){var e=d();return e.compile=function(t,n){return s.compile(t,n,e)},e.precompile=function(t,n){return s.precompile(t,n,e)},e.AST=o.default,e.Compiler=s.Compiler,e.JavaScriptCompiler=l.default,e.Parser=a.parser,e.parse=a.parse,e.parseWithoutProcessing=a.parseWithoutProcessing,e}var h=f();h.create=f,c.default(h),h.Visitor=u.default,h.default=h,t.default=h,e.exports=t.default},698:(e,t)=>{
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},726:(e,t,n)=>{t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=n(849)},727:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(871),o=r(n(769)),a=n(849),s=r(n(632));function l(e){this.value=e}function u(){}u.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=i.COMPILER_REVISION;return[e,i.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return a.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,a=void 0,s=void 0,l=void 0,u=void 0;for(l=0,u=i.length;l<u;l++)a=i[l],this.source.currentLocation=a.loc,s=s||a.loc,this[a.opcode].apply(this,a.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(r);if(this.isChild)return c;var d={compiler:this.compilerInfo(),main:c};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var f=this.context,h=f.programs,p=f.decorators;for(l=0,u=h.length;l<u;l++)h[l]&&(d[l]=h[l],p[l]&&(d[l+"_d"]=p[l],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),r?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new s.default(this.options.srcName),this.decorators=new s.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",r=this.stackVars.concat(this.registers.list);r.length>0&&(n+=", "+r.join(", "));var i=0;Object.keys(this.aliases).forEach(function(e){var r=t.aliases[e];r.children&&r.referenceCount>1&&(n+=", alias"+ ++i+"="+e,r.children[0]="alias"+i)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var o=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var a=this.mergeSource(n);return e?(o.push(a),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,i=void 0,o=void 0,a=void 0;return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,a=e):(o&&(i?o.prepend("buffer += "):r=!0,a.add(";"),o=a=void 0),i=!0,t||(n=!1))}),n?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,r){var i=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,r,i){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,r,i){var o=t.popStack(),a=n.length;e&&a--;for(;r<a;r++)o=t.nameLookup(o,n[r],i);return e?[t.aliasable("container.strict"),"(",o,", ",t.quotedString(n[r]),", ",JSON.stringify(t.source.currentLocation)," )"]:o}(this.options.strict&&i,this,t,n,e));else for(var a=t.length;n<a;n++)this.replaceStack(function(i){var a=o.nameLookup(i,t[n],e);return r?[" && ",a]:[" != null ? ",a," : ",i]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,n){var r=this.popStack(),i=this.setupHelper(e,t),o=[];n&&o.push(i.name),o.push(r),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(o,"||"),")"],s=this.source.functionCall(a,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var r=1;r<e.length;r++)n.push(t,e[r]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],i=this.setupParams(t,1,r);e&&(t=this.popStack(),delete i.name),n&&(i.indent=JSON.stringify(n)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),r.push(i),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var o=this.hash;n&&(o.contexts[e]=n),r&&(o.types[e]=r),i&&(o.ids[e]=i),o.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(e,t){for(var n=e.children,r=void 0,i=void 0,o=0,a=n.length;o<a;o++){r=n[o],i=new this.compiler;var s=this.matchExistingProgram(r);if(null==s){this.context.programs.push("");var l=this.context.programs.length;r.index=l,r.name="program"+l,this.context.programs[l]=i.compile(r,t,this.context,!this.precompile),this.context.decorators[l]=i.decorators,this.context.environments[l]=r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=s.index,r.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof l||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new l(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,i=void 0;if(!this.isInline())throw new o.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof l)t=["(",n=[a.value]],i=!0;else{r=!0;var s=this.incrStack();t=["((",this.push(s)," = ",a,")"],n=this.topStack()}var u=e.call(this,n);i||this.popStack(),r&&this.stackSlot--,this.push(t.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof l)this.compileStack.push(r);else{var i=this.incrStack();this.pushSource([i," = ",r,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof l)return n.value;if(!t){if(!this.stackSlot)throw new o.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof l?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[];return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(e,t,n){var r={},i=[],o=[],a=[],s=!n,l=void 0;s&&(n=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(r.fn=c||"container.noop",r.inverse=u||"container.noop");for(var d=t;d--;)l=this.popStack(),n[d]=l,this.trackIds&&(a[d]=this.popStack()),this.stringParams&&(o[d]=this.popStack(),i[d]=this.popStack());return s&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(a)),this.stringParams&&(r.types=this.source.generateArray(o),r.contexts=this.source.generateArray(i)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var i=this.setupParams(e,t,n);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),r?(this.useRegister("options"),n.push("options"),["options=",i]):n?(n.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=u.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=u,e.exports=t.default},769:(e,t)=>{t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){var i=t&&t.loc,o=void 0,a=void 0,s=void 0,l=void 0;i&&(o=i.start.line,a=i.end.line,s=i.start.column,l=i.end.column,e+=" - "+o+":"+s);for(var u=Error.prototype.constructor.call(this,e),c=0;c<n.length;c++)this[n[c]]=u[n[c]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{i&&(this.lineNumber=o,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=s,this.endColumn=l))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},785:(e,t,n)=>{t.__esModule=!0;var r,i=n(849),o=n(769),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var n,r=t.fn,o=t.inverse,s=0,l="",u=void 0,c=void 0;function d(t,n,o){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!o,c&&(u.contextPath=c+t)),l+=r(e[t],{data:u,blockParams:i.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(u=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var f=e.length;s<f;s++)s in e&&d(s,s,s===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var h=[],p=e[Symbol.iterator](),m=p.next();!m.done;m=p.next())h.push(m.value);for(f=(e=h).length;s<f;s++)d(s,s,s===e.length-1)}else n=void 0,Object.keys(e).forEach(function(e){void 0!==n&&d(n,s-1),n=e,s++}),void 0!==n&&d(n,s-1,!0);return 0===s&&(l=o(this)),l})},e.exports=t.default},848:(e,t,n)=>{e.exports=n(698)},849:(e,t)=>{t.__esModule=!0,t.extend=a,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!i.test(e))return e;return e.replace(r,o)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=a({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,i=/[&<>"'`=]/;function o(e){return n[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var s=Object.prototype.toString;t.toString=s;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};t.isArray=u},865:(e,t,n)=>{t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:i.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:i.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return l("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(s).forEach(function(e){delete s[e]})};var r,i=n(726),o=n(566),a=(r=o)&&r.__esModule?r:{default:r},s=Object.create(null);function l(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==s[e]&&(s[e]=!0,a.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},869:(e,t)=>{
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var O=b.prototype=new y;O.constructor=b,m(O,v.prototype),O.isPureReactComponent=!0;var w=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function k(e,t,r,i,o,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function $(){}function T(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case f:return T((c=e._init)(e._payload),t,i,o,a)}}if(c)return a=a(e),c=""===o?"."+E(e,0):o,w(a)?(i="",null!=c&&(i=c.replace(P,"$&/")+"/"),T(a,t,i,"",function(e){return e})):null!=a&&(_(a)&&(l=a,u=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+c,a=k(l.type,u,void 0,0,0,l.props)),t.push(a)),1;c=0;var d,p=""===o?".":o+":";if(w(e))for(var m=0;m<e.length;m++)c+=T(o=e[m],t,i,s=p+E(o,m),a);else if("function"==typeof(m=null===(d=e)||"object"!=typeof d?null:"function"==typeof(d=h&&d[h]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(o=e.next()).done;)c+=T(o=o.value,t,i,s=p+E(o,m++),a);else if("object"===s){if("function"==typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then($,$):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",function(e){return t.call(n,e,i++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function A(){}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return k(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return k(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var r=e(),i=x.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(A,N)}catch(e){N(e)}finally{x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=x.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.1.1"},871:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=d;var i=n(849),o=r(n(769)),a=n(277),s=n(940),l=r(n(566)),u=n(865);t.VERSION="4.7.8";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function d(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},a.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}d.prototype={constructor:d,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(i.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===c)i.extend(this.partials,e);else{if(void 0===t)throw new o.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var f=l.default.log;t.log=f,t.createFrame=i.createFrame,t.logger=l.default},888:(e,t,n)=>{e.exports=n(493)},908:(e,t,n)=>{t.__esModule=!0;var r,i=n(849),o=n(769),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new a.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})})},e.exports=t.default},915:(e,t,n)=>{t.__esModule=!0;var r,i=n(350),o=(r=i)&&r.__esModule?r:{default:r};function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function s(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],i=e[t-2];return r?"ContentStatement"===r.type?(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function l(e,t,n){void 0===t&&(t=-1);var r=e[t+1],i=e[t+2];return r?"ContentStatement"===r.type?(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function u(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function c(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}a.prototype=new o.default,a.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,i=0,o=r.length;i<o;i++){var a=r[i],d=this.accept(a);if(d){var f=s(r,i,n),h=l(r,i,n),p=d.openStandalone&&f,m=d.closeStandalone&&h,g=d.inlineStandalone&&f&&h;d.close&&u(r,i,!0),d.open&&c(r,i,!0),t&&g&&(u(r,i),c(r,i)&&"PartialStatement"===a.type&&(a.indent=/([ \t]+$)/.exec(r[i-1].original)[1])),t&&p&&(u((a.program||a.inverse).body),c(r,i)),t&&m&&(u(r,i),c((a.inverse||a.program).body))}}return e},a.prototype.BlockStatement=a.prototype.DecoratorBlock=a.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,i=n;if(n&&n.chained)for(r=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var o={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:l(t.body),closeStandalone:s((r||t).body)};if(e.openStrip.close&&u(t.body,null,!0),n){var a=e.inverseStrip;a.open&&c(t.body,null,!0),a.close&&u(r.body,null,!0),e.closeStrip.open&&c(i.body,null,!0),!this.options.ignoreStandalone&&s(t.body)&&l(r.body)&&(c(t.body),u(r.body))}else e.closeStrip.open&&c(t.body,null,!0);return o},a.prototype.Decorator=a.prototype.MustacheStatement=function(e){return e.strip},a.prototype.PartialStatement=a.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=a,e.exports=t.default},919:(e,t)=>{t.__esModule=!0;var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};t.default=n,e.exports=t.default},940:(e,t,n)=>{t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var r,i=n(430),o=(r=i)&&r.__esModule?r:{default:r}},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(221)},982:(e,t,n)=>{e.exports=n(477)}},y={};function b(e){var t=y[e];if(void 0!==t)return t.exports;var n=y[e]={exports:{}};return v[e](n,n.exports,b),n.exports}b.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return b.d(t,{a:t}),t},b.d=(e,t)=>{for(var n in t)b.o(t,n)&&!b.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},b.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),b.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var O={};b.r(O),b.d(O,{BIGINT_FORMAT_RANGES:()=>um,Class:()=>jm,NUMBER_FORMAT_RANGES:()=>lm,aborted:()=>vm,allowsEval:()=>Wp,assert:()=>Tp,assertEqual:()=>_p,assertIs:()=>Ep,assertNever:()=>$p,assertNotEqual:()=>Pp,assignProp:()=>Lp,base64ToUint8Array:()=>_m,base64urlToUint8Array:()=>Em,cached:()=>Ap,captureStackTrace:()=>Xp,cleanEnum:()=>km,cleanRegex:()=>Mp,clone:()=>rm,cloneDef:()=>Fp,createTransparentProxy:()=>om,defineLazy:()=>Qp,esc:()=>Bp,escapeRegex:()=>nm,extend:()=>fm,finalizeIssue:()=>Om,floatSafeRemainder:()=>Dp,getElementAtPath:()=>Up,getEnumValues:()=>Cp,getLengthableOrigin:()=>xm,getParsedType:()=>Jp,getSizableOrigin:()=>wm,hexToUint8Array:()=>Tm,isObject:()=>Yp,isPlainObject:()=>qp,issue:()=>Sm,joinValues:()=>jp,jsonStringifyReplacer:()=>Np,merge:()=>pm,mergeDefs:()=>Zp,normalizeParams:()=>im,nullish:()=>Ip,numKeys:()=>Kp,objectClone:()=>zp,omit:()=>dm,optionalKeys:()=>sm,partial:()=>mm,pick:()=>cm,prefixIssues:()=>ym,primitiveTypes:()=>tm,promiseAllObject:()=>Vp,propertyKeyTypes:()=>em,randomString:()=>Gp,required:()=>gm,safeExtend:()=>hm,shallowClone:()=>Hp,stringifyPrimitive:()=>am,uint8ArrayToBase64:()=>Pm,uint8ArrayToBase64url:()=>$m,uint8ArrayToHex:()=>Cm,unwrapMessage:()=>bm});var w={};b.r(w),b.d(w,{base64:()=>Mg,base64url:()=>Dg,bigint:()=>Bg,boolean:()=>Wg,browserEmail:()=>$g,cidrv4:()=>Ag,cidrv6:()=>Ig,cuid:()=>cg,cuid2:()=>dg,date:()=>Zg,datetime:()=>Vg,domain:()=>Qg,duration:()=>gg,e164:()=>zg,email:()=>Sg,emoji:()=>Cg,extendedDuration:()=>vg,guid:()=>yg,hex:()=>ev,hostname:()=>Rg,html5Email:()=>kg,idnEmail:()=>Eg,integer:()=>Xg,ipv4:()=>jg,ipv6:()=>Ng,ksuid:()=>pg,lowercase:()=>Kg,md5_base64:()=>iv,md5_base64url:()=>ov,md5_hex:()=>rv,nanoid:()=>mg,null:()=>qg,number:()=>Yg,rfc5322Email:()=>_g,sha1_base64:()=>sv,sha1_base64url:()=>lv,sha1_hex:()=>av,sha256_base64:()=>cv,sha256_base64url:()=>dv,sha256_hex:()=>uv,sha384_base64:()=>hv,sha384_base64url:()=>pv,sha384_hex:()=>fv,sha512_base64:()=>gv,sha512_base64url:()=>vv,sha512_hex:()=>mv,string:()=>Gg,time:()=>Ug,ulid:()=>fg,undefined:()=>Hg,unicodeEmail:()=>Pg,uppercase:()=>Jg,uuid:()=>bg,uuid4:()=>Og,uuid6:()=>wg,uuid7:()=>xg,xid:()=>hg});var x={};b.r(x),b.d(x,{ar:()=>$b,az:()=>Cb,be:()=>Ab,ca:()=>Mb,cs:()=>Rb,da:()=>zb,de:()=>Zb,en:()=>Ub,eo:()=>Gb,es:()=>Xb,fa:()=>Wb,fi:()=>Hb,fr:()=>Jb,frCA:()=>tO,he:()=>rO,hu:()=>oO,id:()=>sO,is:()=>uO,it:()=>dO,ja:()=>hO,ka:()=>mO,kh:()=>yO,km:()=>vO,ko:()=>OO,lt:()=>_O,mk:()=>EO,ms:()=>TO,nl:()=>jO,no:()=>AO,ota:()=>MO,pl:()=>zO,ps:()=>RO,pt:()=>ZO,ru:()=>VO,sl:()=>BO,sv:()=>YO,ta:()=>qO,th:()=>KO,tr:()=>ew,ua:()=>rw,uk:()=>nw,ur:()=>ow,vi:()=>sw,yo:()=>hw,zhCN:()=>uw,zhTW:()=>dw});var S={};b.r(S);var k={};b.r(k),b.d(k,{$ZodAny:()=>$y,$ZodArray:()=>Iy,$ZodAsyncError:()=>wp,$ZodBase64:()=>hy,$ZodBase64URL:()=>my,$ZodBigInt:()=>Sy,$ZodBigIntFormat:()=>ky,$ZodBoolean:()=>xy,$ZodCIDRv4:()=>cy,$ZodCIDRv6:()=>dy,$ZodCUID:()=>Jv,$ZodCUID2:()=>ey,$ZodCatch:()=>fb,$ZodCheck:()=>yv,$ZodCheckBigIntFormat:()=>kv,$ZodCheckEndsWith:()=>Rv,$ZodCheckGreaterThan:()=>wv,$ZodCheckIncludes:()=>Mv,$ZodCheckLengthEquals:()=>Cv,$ZodCheckLessThan:()=>Ov,$ZodCheckLowerCase:()=>Av,$ZodCheckMaxLength:()=>$v,$ZodCheckMaxSize:()=>_v,$ZodCheckMimeType:()=>Lv,$ZodCheckMinLength:()=>Tv,$ZodCheckMinSize:()=>Pv,$ZodCheckMultipleOf:()=>xv,$ZodCheckNumberFormat:()=>Sv,$ZodCheckOverwrite:()=>Zv,$ZodCheckProperty:()=>zv,$ZodCheckRegex:()=>Nv,$ZodCheckSizeEquals:()=>Ev,$ZodCheckStartsWith:()=>Dv,$ZodCheckStringFormat:()=>jv,$ZodCheckUpperCase:()=>Iv,$ZodCodec:()=>gb,$ZodCustom:()=>_b,$ZodCustomStringFormat:()=>by,$ZodDate:()=>Ny,$ZodDefault:()=>ab,$ZodDiscriminatedUnion:()=>Fy,$ZodE164:()=>gy,$ZodEmail:()=>Wv,$ZodEmoji:()=>Hv,$ZodEncodeError:()=>xp,$ZodEnum:()=>Jy,$ZodError:()=>Am,$ZodFile:()=>tb,$ZodFunction:()=>xb,$ZodGUID:()=>Xv,$ZodIPv4:()=>ly,$ZodIPv6:()=>uy,$ZodISODate:()=>oy,$ZodISODateTime:()=>iy,$ZodISODuration:()=>sy,$ZodISOTime:()=>ay,$ZodIntersection:()=>Uy,$ZodJWT:()=>yy,$ZodKSUID:()=>ry,$ZodLazy:()=>kb,$ZodLiteral:()=>eb,$ZodMap:()=>Wy,$ZodNaN:()=>hb,$ZodNanoID:()=>Kv,$ZodNever:()=>Cy,$ZodNonOptional:()=>ub,$ZodNull:()=>Ey,$ZodNullable:()=>ob,$ZodNumber:()=>Oy,$ZodNumberFormat:()=>wy,$ZodObject:()=>Qy,$ZodObjectJIT:()=>zy,$ZodOptional:()=>ib,$ZodPipe:()=>pb,$ZodPrefault:()=>lb,$ZodPromise:()=>Sb,$ZodReadonly:()=>bb,$ZodRealError:()=>Im,$ZodRecord:()=>Yy,$ZodRegistry:()=>gw,$ZodSet:()=>Hy,$ZodString:()=>Gv,$ZodStringFormat:()=>Bv,$ZodSuccess:()=>db,$ZodSymbol:()=>_y,$ZodTemplateLiteral:()=>wb,$ZodTransform:()=>nb,$ZodTuple:()=>By,$ZodType:()=>Vv,$ZodULID:()=>ty,$ZodURL:()=>qv,$ZodUUID:()=>Yv,$ZodUndefined:()=>Py,$ZodUnion:()=>Zy,$ZodUnknown:()=>Ty,$ZodVoid:()=>jy,$ZodXID:()=>ny,$brand:()=>Op,$constructor:()=>bp,$input:()=>mw,$output:()=>pw,Doc:()=>Fv,JSONSchema:()=>S,JSONSchemaGenerator:()=>wS,NEVER:()=>yp,TimePrecision:()=>Uw,_any:()=>cx,_array:()=>Gx,_base64:()=>zw,_base64url:()=>Lw,_bigint:()=>rx,_boolean:()=>tx,_catch:()=>uS,_check:()=>yS,_cidrv4:()=>Rw,_cidrv6:()=>Qw,_coercedBigint:()=>ix,_coercedBoolean:()=>nx,_coercedDate:()=>mx,_coercedNumber:()=>Ww,_coercedString:()=>Ow,_cuid:()=>Cw,_cuid2:()=>jw,_custom:()=>mS,_date:()=>px,_decode:()=>qm,_decodeAsync:()=>eg,_default:()=>aS,_discriminatedUnion:()=>Xx,_e164:()=>Zw,_email:()=>ww,_emoji:()=>$w,_encode:()=>Ym,_encodeAsync:()=>Km,_endsWith:()=>Rx,_enum:()=>Jx,_file:()=>nS,_float32:()=>Hw,_float64:()=>Kw,_gt:()=>bx,_gte:()=>Ox,_guid:()=>xw,_includes:()=>Mx,_int:()=>qw,_int32:()=>Jw,_int64:()=>ox,_intersection:()=>Yx,_ipv4:()=>Mw,_ipv6:()=>Dw,_isoDate:()=>Gw,_isoDateTime:()=>Vw,_isoDuration:()=>Xw,_isoTime:()=>Bw,_jwt:()=>Fw,_ksuid:()=>Iw,_lazy:()=>hS,_length:()=>jx,_literal:()=>tS,_lowercase:()=>Ax,_lt:()=>vx,_lte:()=>yx,_map:()=>Hx,_max:()=>yx,_maxLength:()=>Tx,_maxSize:()=>Px,_mime:()=>zx,_min:()=>Ox,_minLength:()=>Cx,_minSize:()=>Ex,_multipleOf:()=>_x,_nan:()=>gx,_nanoid:()=>Tw,_nativeEnum:()=>eS,_negative:()=>xx,_never:()=>fx,_nonnegative:()=>kx,_nonoptional:()=>sS,_nonpositive:()=>Sx,_normalize:()=>Zx,_null:()=>ux,_nullable:()=>oS,_number:()=>Yw,_optional:()=>iS,_overwrite:()=>Lx,_parse:()=>Lm,_parseAsync:()=>Fm,_pipe:()=>cS,_positive:()=>wx,_promise:()=>pS,_property:()=>Qx,_readonly:()=>dS,_record:()=>qx,_refine:()=>gS,_regex:()=>Nx,_safeDecode:()=>ig,_safeDecodeAsync:()=>lg,_safeEncode:()=>ng,_safeEncodeAsync:()=>ag,_safeParse:()=>Vm,_safeParseAsync:()=>Bm,_set:()=>Kx,_size:()=>$x,_startsWith:()=>Dx,_string:()=>bw,_stringFormat:()=>OS,_stringbool:()=>bS,_success:()=>lS,_superRefine:()=>vS,_symbol:()=>sx,_templateLiteral:()=>fS,_toLowerCase:()=>Ux,_toUpperCase:()=>Vx,_transform:()=>rS,_trim:()=>Fx,_tuple:()=>Wx,_uint32:()=>ex,_uint64:()=>ax,_ulid:()=>Nw,_undefined:()=>lx,_union:()=>Bx,_unknown:()=>dx,_uppercase:()=>Ix,_url:()=>Ew,_uuid:()=>Sw,_uuidv4:()=>kw,_uuidv6:()=>_w,_uuidv7:()=>Pw,_void:()=>hx,_xid:()=>Aw,clone:()=>rm,config:()=>kp,decode:()=>Hm,decodeAsync:()=>tg,encode:()=>Wm,encodeAsync:()=>Jm,flattenError:()=>Mm,formatError:()=>Dm,globalConfig:()=>Sp,globalRegistry:()=>yw,isValidBase64:()=>fy,isValidBase64URL:()=>py,isValidJWT:()=>vy,locales:()=>x,parse:()=>Zm,parseAsync:()=>Um,prettifyError:()=>zm,regexes:()=>w,registry:()=>vw,safeDecode:()=>og,safeDecodeAsync:()=>ug,safeEncode:()=>rg,safeEncodeAsync:()=>sg,safeParse:()=>Gm,safeParseAsync:()=>Xm,toDotPath:()=>Qm,toJSONSchema:()=>xS,treeifyError:()=>Rm,util:()=>O,version:()=>Uv});var _={};b.r(_),b.d(_,{ZodISODate:()=>PS,ZodISODateTime:()=>kS,ZodISODuration:()=>CS,ZodISOTime:()=>$S,date:()=>ES,datetime:()=>_S,duration:()=>jS,time:()=>TS});var P={};b.r(P),b.d(P,{bigint:()=>XP,boolean:()=>BP,date:()=>YP,number:()=>GP,string:()=>VP});var E={};b.r(E),b.d(E,{$brand:()=>Op,$input:()=>mw,$output:()=>pw,NEVER:()=>yp,TimePrecision:()=>Uw,ZodAny:()=>f_,ZodArray:()=>x_,ZodBase64:()=>Nk,ZodBase64URL:()=>Ik,ZodBigInt:()=>t_,ZodBigIntFormat:()=>r_,ZodBoolean:()=>Jk,ZodCIDRv4:()=>$k,ZodCIDRv6:()=>Ck,ZodCUID:()=>pk,ZodCUID2:()=>gk,ZodCatch:()=>fP,ZodCodec:()=>yP,ZodCustom:()=>CP,ZodCustomStringFormat:()=>Lk,ZodDate:()=>O_,ZodDefault:()=>iP,ZodDiscriminatedUnion:()=>j_,ZodE164:()=>Dk,ZodEmail:()=>KS,ZodEmoji:()=>ck,ZodEnum:()=>V_,ZodError:()=>AS,ZodFile:()=>W_,ZodFirstPartyTypeKind:()=>FP,ZodFunction:()=>$P,ZodGUID:()=>ek,ZodIPv4:()=>kk,ZodIPv6:()=>Pk,ZodISODate:()=>PS,ZodISODateTime:()=>kS,ZodISODuration:()=>CS,ZodISOTime:()=>$S,ZodIntersection:()=>A_,ZodIssueCode:()=>zP,ZodJWT:()=>Qk,ZodKSUID:()=>xk,ZodLazy:()=>kP,ZodLiteral:()=>X_,ZodMap:()=>L_,ZodNaN:()=>pP,ZodNanoID:()=>fk,ZodNever:()=>g_,ZodNonOptional:()=>lP,ZodNull:()=>c_,ZodNullable:()=>tP,ZodNumber:()=>Gk,ZodNumberFormat:()=>Xk,ZodObject:()=>__,ZodOptional:()=>J_,ZodPipe:()=>gP,ZodPrefault:()=>aP,ZodPromise:()=>PP,ZodReadonly:()=>OP,ZodRealError:()=>IS,ZodRecord:()=>R_,ZodSet:()=>F_,ZodString:()=>WS,ZodStringFormat:()=>HS,ZodSuccess:()=>cP,ZodSymbol:()=>a_,ZodTemplateLiteral:()=>xP,ZodTransform:()=>H_,ZodTuple:()=>M_,ZodType:()=>XS,ZodULID:()=>yk,ZodURL:()=>sk,ZodUUID:()=>nk,ZodUndefined:()=>l_,ZodUnion:()=>T_,ZodUnknown:()=>p_,ZodVoid:()=>y_,ZodXID:()=>Ok,_ZodString:()=>YS,_default:()=>oP,_function:()=>TP,any:()=>h_,array:()=>S_,base64:()=>Ak,base64url:()=>Mk,bigint:()=>n_,boolean:()=>e_,catch:()=>hP,check:()=>jP,cidrv4:()=>Tk,cidrv6:()=>jk,clone:()=>rm,codec:()=>bP,coerce:()=>P,config:()=>kp,core:()=>k,cuid:()=>mk,cuid2:()=>vk,custom:()=>NP,date:()=>w_,decode:()=>LS,decodeAsync:()=>FS,discriminatedUnion:()=>N_,e164:()=>Rk,email:()=>JS,emoji:()=>dk,encode:()=>zS,encodeAsync:()=>ZS,endsWith:()=>Rx,enum:()=>G_,file:()=>q_,flattenError:()=>Mm,float32:()=>Wk,float64:()=>qk,formatError:()=>Dm,function:()=>TP,getErrorMap:()=>ZP,globalRegistry:()=>yw,gt:()=>bx,gte:()=>Ox,guid:()=>tk,hash:()=>Vk,hex:()=>Uk,hostname:()=>Fk,httpUrl:()=>uk,includes:()=>Mx,instanceof:()=>MP,int:()=>Yk,int32:()=>Hk,int64:()=>i_,intersection:()=>I_,ipv4:()=>_k,ipv6:()=>Ek,iso:()=>_,json:()=>RP,jwt:()=>zk,keyof:()=>k_,ksuid:()=>Sk,lazy:()=>_P,length:()=>jx,literal:()=>Y_,locales:()=>x,looseObject:()=>$_,lowercase:()=>Ax,lt:()=>vx,lte:()=>yx,map:()=>Z_,maxLength:()=>Tx,maxSize:()=>Px,mime:()=>zx,minLength:()=>Cx,minSize:()=>Ex,multipleOf:()=>_x,nan:()=>mP,nanoid:()=>hk,nativeEnum:()=>B_,negative:()=>xx,never:()=>v_,nonnegative:()=>kx,nonoptional:()=>uP,nonpositive:()=>Sx,normalize:()=>Zx,null:()=>d_,nullable:()=>nP,nullish:()=>rP,number:()=>Bk,object:()=>P_,optional:()=>eP,overwrite:()=>Lx,parse:()=>MS,parseAsync:()=>DS,partialRecord:()=>z_,pipe:()=>vP,positive:()=>wx,prefault:()=>sP,preprocess:()=>QP,prettifyError:()=>zm,promise:()=>EP,property:()=>Qx,readonly:()=>wP,record:()=>Q_,refine:()=>AP,regex:()=>Nx,regexes:()=>w,registry:()=>vw,safeDecode:()=>VS,safeDecodeAsync:()=>BS,safeEncode:()=>US,safeEncodeAsync:()=>GS,safeParse:()=>RS,safeParseAsync:()=>QS,set:()=>U_,setErrorMap:()=>LP,size:()=>$x,startsWith:()=>Dx,strictObject:()=>E_,string:()=>qS,stringFormat:()=>Zk,stringbool:()=>DP,success:()=>dP,superRefine:()=>IP,symbol:()=>s_,templateLiteral:()=>SP,toJSONSchema:()=>xS,toLowerCase:()=>Ux,toUpperCase:()=>Vx,transform:()=>K_,treeifyError:()=>Rm,trim:()=>Fx,tuple:()=>D_,uint32:()=>Kk,uint64:()=>o_,ulid:()=>bk,undefined:()=>u_,union:()=>C_,unknown:()=>m_,uppercase:()=>Ix,url:()=>lk,util:()=>O,uuid:()=>rk,uuidv4:()=>ik,uuidv6:()=>ok,uuidv7:()=>ak,void:()=>b_,xid:()=>wk});var $=b(848),T=b(540),C=b(338);const j=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const i=(0,T.useMemo)(()=>{const e=[];return n||e.push("menu_button","interactable"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,$.jsx)("button",{className:i,...r,children:e})},N=({label:e,className:t,overrideDefaults:n=!1,type:r="text",...i})=>{const o=(0,T.useMemo)(()=>{const e=[];return n||"text"!==r&&"number"!==r&&"password"!==r&&"email"!==r&&"search"!==r||e.push("text_pole"),e.push(t),e.filter(Boolean).join(" ")},[n,t,r]);if("checkbox"===r){const r=n?t:`checkbox_label ${t??""}`.trim();return(0,$.jsxs)("label",{className:r,children:[(0,$.jsx)("input",{type:"checkbox",...i}),e&&(0,$.jsx)("span",{children:e})]})}return(0,$.jsx)("input",{type:r,className:o,...i})},A=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const i=(0,T.useMemo)(()=>{const e=[];return n||e.push("text_pole"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,$.jsx)("select",{className:i,...r,children:e})},I=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const i=(0,T.useMemo)(()=>{const e=[];return n||e.push("text_pole","textarea_compact"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,$.jsx)("textarea",{className:i,...r,children:e})};var M,D,R=b(961);!function(e){e[e.TEXT=1]="TEXT",e[e.CONFIRM=2]="CONFIRM",e[e.INPUT=3]="INPUT",e[e.DISPLAY=4]="DISPLAY"}(M||(M={})),function(e){e[e.AFFIRMATIVE=1]="AFFIRMATIVE",e[e.NEGATIVE=0]="NEGATIVE",e[e.CANCELLED=null]="CANCELLED"}(D||(D={}));const Q=(e=>{var t={};return b.d(t,e),t})({persona_description_positions:()=>e.persona_description_positions,renderStoryString:()=>e.renderStoryString});const z=(e=>{var t={};return b.d(t,e),t})({baseChatReplace:()=>t.baseChatReplace,chat_metadata:()=>t.chat_metadata,depth_prompt_depth_default:()=>t.depth_prompt_depth_default,depth_prompt_role_default:()=>t.depth_prompt_role_default,extension_prompt_types:()=>t.extension_prompt_types,getMaxContextSize:()=>t.getMaxContextSize,name1:()=>t.name1,name2:()=>t.name2,parseMesExamples:()=>t.parseMesExamples,sendMessageAsUser:()=>t.sendMessageAsUser,this_chid:()=>t.this_chid,updateMessageBlock:()=>t.updateMessageBlock});const L=(e=>{var t={};return b.d(t,e),t})({METADATA_KEY:()=>n.METADATA_KEY,createNewWorldInfo:()=>n.createNewWorldInfo,createWorldInfoEntry:()=>n.createWorldInfoEntry,selected_world_info:()=>n.selected_world_info,wi_anchor_position:()=>n.wi_anchor_position,world_info:()=>n.world_info,world_info_include_names:()=>n.world_info_include_names,world_names:()=>n.world_names});const Z=(e=>{var t={};return b.d(t,e),t})({sendMessageAs:()=>r.sendMessageAs,sendNarratorMessage:()=>r.sendNarratorMessage});const F=(e=>{var t={};return b.d(t,e),t})({user_avatar:()=>i.user_avatar});const U=(e=>{var t={};return b.d(t,e),t})({formatInstructModeExamples:()=>o.formatInstructModeExamples,formatInstructModeSystemPrompt:()=>o.formatInstructModeSystemPrompt});const V=(e=>{var t={};return b.d(t,e),t})({appendFileContent:()=>a.appendFileContent,hideChatMessageRange:()=>a.hideChatMessageRange});const G=(e=>{var t={};return b.d(t,e),t})({formatWorldInfo:()=>s.formatWorldInfo,getPromptPosition:()=>s.getPromptPosition,getPromptRole:()=>s.getPromptRole,prepareOpenAIMessages:()=>s.prepareOpenAIMessages,setOpenAIMessageExamples:()=>s.setOpenAIMessageExamples,setOpenAIMessages:()=>s.setOpenAIMessages});const B=(e=>{var t={};return b.d(t,e),t})({metadata_keys:()=>l.metadata_keys});const X=(e=>{var t={};return b.d(t,e),t})({getGroupDepthPrompts:()=>u.getGroupDepthPrompts,selected_group:()=>u.selected_group});const Y=(e=>{var t={};return b.d(t,e),t})({getRegexedString:()=>c.getRegexedString,regex_placement:()=>c.regex_placement,runRegexScript:()=>c.runRegexScript});const W=(e=>{var t={};return b.d(t,e),t})({getCharaFilename:()=>d.getCharaFilename,removeFromArray:()=>d.removeFromArray,runAfterAnimation:()=>d.runAfterAnimation});(e=>{var t={};b.d(t,e)})({});(e=>{var t={};b.d(t,e)})({});const q=(e=>{var t={};return b.d(t,e),t})({Popup:()=>p.Popup,fixToastrForDialogs:()=>p.fixToastrForDialogs});const H=(e=>{var t={};return b.d(t,e),t})({default:()=>m.default});var K;async function J(e,t,{escapeHtml:n=!0}={}){await async function(e,...t){await SillyTavern.getContext().SlashCommandParser.commands[e].callback(...t)}("echo",{severity:e,escapeHtml:Boolean(n).toString()},t)}function ee(e){return(0,z.getMaxContextSize)(e)}function te(e,t){return(0,z.parseMesExamples)(e,t)}function ne(e,t,n){return(0,z.baseChatReplace)(e,t,n)}function re(e){return(0,G.getPromptRole)(e)}function ie(e,{wiFormat:t}={}){return(0,G.formatWorldInfo)(e,{wiFormat:t})}function oe(e){return(0,G.getPromptPosition)(e)}!function(e){e.APP_READY="app_ready",e.EXTRAS_CONNECTED="extras_connected",e.MESSAGE_SWIPED="message_swiped",e.MESSAGE_SENT="message_sent",e.MESSAGE_RECEIVED="message_received",e.MESSAGE_EDITED="message_edited",e.MESSAGE_DELETED="message_deleted",e.MESSAGE_UPDATED="message_updated",e.MESSAGE_FILE_EMBEDDED="message_file_embedded",e.MORE_MESSAGES_LOADED="more_messages_loaded",e.IMPERSONATE_READY="impersonate_ready",e.CHAT_CHANGED="chat_id_changed",e.GENERATION_AFTER_COMMANDS="GENERATION_AFTER_COMMANDS",e.GENERATION_STARTED="generation_started",e.GENERATION_STOPPED="generation_stopped",e.GENERATION_ENDED="generation_ended",e.EXTENSIONS_FIRST_LOAD="extensions_first_load",e.EXTENSION_SETTINGS_LOADED="extension_settings_loaded",e.SETTINGS_LOADED="settings_loaded",e.SETTINGS_UPDATED="settings_updated",e.GROUP_UPDATED="group_updated",e.MOVABLE_PANELS_RESET="movable_panels_reset",e.SETTINGS_LOADED_BEFORE="settings_loaded_before",e.SETTINGS_LOADED_AFTER="settings_loaded_after",e.CHATCOMPLETION_SOURCE_CHANGED="chatcompletion_source_changed",e.CHATCOMPLETION_MODEL_CHANGED="chatcompletion_model_changed",e.OAI_PRESET_CHANGED_BEFORE="oai_preset_changed_before",e.OAI_PRESET_CHANGED_AFTER="oai_preset_changed_after",e.OAI_PRESET_EXPORT_READY="oai_preset_export_ready",e.OAI_PRESET_IMPORT_READY="oai_preset_import_ready",e.WORLDINFO_SETTINGS_UPDATED="worldinfo_settings_updated",e.WORLDINFO_UPDATED="worldinfo_updated",e.CHARACTER_EDITED="character_edited",e.CHARACTER_PAGE_LOADED="character_page_loaded",e.CHARACTER_GROUP_OVERLAY_STATE_CHANGE_BEFORE="character_group_overlay_state_change_before",e.CHARACTER_GROUP_OVERLAY_STATE_CHANGE_AFTER="character_group_overlay_state_change_after",e.USER_MESSAGE_RENDERED="user_message_rendered",e.CHARACTER_MESSAGE_RENDERED="character_message_rendered",e.FORCE_SET_BACKGROUND="force_set_background",e.CHAT_DELETED="chat_deleted",e.CHAT_CREATED="chat_created",e.GROUP_CHAT_DELETED="group_chat_deleted",e.GROUP_CHAT_CREATED="group_chat_created",e.GENERATE_BEFORE_COMBINE_PROMPTS="generate_before_combine_prompts",e.GENERATE_AFTER_COMBINE_PROMPTS="generate_after_combine_prompts",e.GENERATE_AFTER_DATA="generate_after_data",e.GROUP_MEMBER_DRAFTED="group_member_drafted",e.GROUP_WRAPPER_STARTED="group_wrapper_started",e.GROUP_WRAPPER_FINISHED="group_wrapper_finished",e.WORLD_INFO_ACTIVATED="world_info_activated",e.TEXT_COMPLETION_SETTINGS_READY="text_completion_settings_ready",e.CHAT_COMPLETION_SETTINGS_READY="chat_completion_settings_ready",e.CHAT_COMPLETION_PROMPT_READY="chat_completion_prompt_ready",e.CHARACTER_FIRST_MESSAGE_SELECTED="character_first_message_selected",e.CHARACTER_DELETED="characterDeleted",e.CHARACTER_DUPLICATED="character_duplicated",e.CHARACTER_RENAMED="character_renamed",e.SMOOTH_STREAM_TOKEN_RECEIVED="stream_token_received",e.STREAM_TOKEN_RECEIVED="stream_token_received",e.STREAM_REASONING_DONE="stream_reasoning_done",e.FILE_ATTACHMENT_DELETED="file_attachment_deleted",e.WORLDINFO_FORCE_ACTIVATE="worldinfo_force_activate",e.OPEN_CHARACTER_LIBRARY="open_character_library",e.ONLINE_STATUS_CHANGED="online_status_changed",e.IMAGE_SWIPED="image_swiped",e.CONNECTION_PROFILE_LOADED="connection_profile_loaded",e.TOOL_CALLS_PERFORMED="tool_calls_performed",e.TOOL_CALLS_RENDERED="tool_calls_rendered"}(K||(K={}));const ae=SillyTavern.getContext(),se=({content:e,type:t,inputValue:n="",options:r={},preventEscape:i=!1,onComplete:o})=>{const a=(0,T.useRef)(null),s=(0,T.useRef)(null),[l,u]=(0,T.useState)(!1),[c,d]=(0,T.useState)(null),f=(0,T.useRef)(ae.uuidv4()),h=(0,T.useRef)({id:f.current,type:t,dlg:null,mainInput:null,lastFocus:null,value:void 0,result:void 0,inputResults:void 0});(0,T.useEffect)(()=>{const e=a.current;if(!e)return;const t=e=>{e.preventDefault(),i||p(D.CANCELLED)};if(e.addEventListener("cancel",t),h.current.dlg=e,h.current.mainInput=s.current,q.Popup.util.popups.push(h.current),!e.showModal){e.classList.add("poly_dialog"),H.default.registerDialog(e);new ResizeObserver(e=>{for(const t of e)H.default.reposition(t.target)}).observe(e)}return e.showModal(),(0,q.fixToastrForDialogs)(),()=>{(0,W.removeFromArray)(q.Popup.util.popups,h.current),(0,q.fixToastrForDialogs)(),e.removeEventListener("cancel",t)}},[]);const p=async e=>{let n=e;if(t===M.INPUT&&(n=e>=D.AFFIRMATIVE?s.current?.value:e!==D.NEGATIVE&&(e===D.CANCELLED&&null)),r.customInputs?.length){const e=new Map(r.customInputs.map(e=>{const t=a.current?.querySelector(`#${e.id}`);return[t.id,t.checked]}));h.current.inputResults=e}if(h.current.result=e,h.current.value=n,r.onClosing){if(!await r.onClosing(h.current))return u(!0),h.current.value=void 0,h.current.result=void 0,void(h.current.inputResults=void 0)}u(!1),q.Popup.util.lastResult={value:n,result:e,inputResults:h.current.inputResults};const i=a.current;i&&(i.setAttribute("closing",""),(0,q.fixToastrForDialogs)(),(0,W.runAfterAnimation)(i,async()=>{if(i.close(),r.onClose&&await r.onClose(h.current),(0,W.removeFromArray)(q.Popup.util.popups,h.current),q.Popup.util.popups.length>0){const e=document.activeElement?.closest(".popup"),t=e?.getAttribute("data-id"),n=q.Popup.util.popups.find(e=>e.id===t);n&&n.lastFocus&&n.lastFocus.focus()}o(n)}))};return(0,R.createPortal)((0,$.jsx)("dialog",{ref:a,className:(()=>{const e=["popup"];return r.wide&&e.push("wide_dialogue_popup"),r.wider&&e.push("wider_dialogue_popup"),r.large&&e.push("large_dialogue_popup"),r.transparent&&e.push("transparent_dialogue_popup"),r.allowHorizontalScrolling&&e.push("horizontal_scrolling_dialogue_popup"),r.allowVerticalScrolling&&e.push("vertical_scrolling_dialogue_popup"),r.animation&&e.push(`popup--animation-${r.animation}`),e.join(" ")})(),"data-id":f.current,onKeyDown:async e=>{},onFocus:e=>{e.target instanceof HTMLElement&&e.target!==a.current&&(d(e.target),h.current.lastFocus=e.target)},children:(0,$.jsxs)("div",{className:"popup-body",children:[(0,$.jsx)("div",{className:"popup-content",children:e}),t===M.INPUT&&(0,$.jsx)("textarea",{ref:s,className:"popup-input text_pole result-control auto-select",rows:r.rows??1,defaultValue:n,"data-result":"1","data-result-event":"submit"}),r.customInputs&&(0,$.jsx)("div",{className:"popup-inputs",children:r.customInputs.map(e=>(0,$.jsxs)("label",{className:"checkbox_label justifyCenter",htmlFor:e.id,children:[(0,$.jsx)("input",{type:"checkbox",id:e.id,defaultChecked:e.defaultState}),(0,$.jsx)("span",{"data-i18n":e.label,children:e.label}),e.tooltip&&(0,$.jsx)("div",{className:"fa-solid fa-circle-info opacity50p",title:e.tooltip,"data-i18n":`[title]${e.tooltip}`})]},e.id))}),t!==M.DISPLAY&&(0,$.jsxs)("div",{className:"popup-controls",children:[r.customButtons?.map((e,t)=>{const n="string"==typeof e?{text:e,result:t+2}:e;return(0,$.jsx)("div",{className:`menu_button popup-button-custom result-control ${n.classes??""}`,"data-result":n.result,onClick:()=>{n.action?.(),p(n.result??t+2)},"data-i18n":n.text,children:n.text},t)}),t!==M.DISPLAY&&!1!==r.okButton&&(0,$.jsx)("div",{className:"popup-button-ok menu_button result-control",onClick:()=>p(D.AFFIRMATIVE),"data-result":"1",children:"string"==typeof r.okButton?r.okButton:"OK"}),t!==M.DISPLAY&&!1!==r.cancelButton&&(0,$.jsx)("div",{className:"popup-button-cancel menu_button result-control",onClick:()=>p(D.NEGATIVE),"data-result":"0",children:"string"==typeof r.cancelButton?r.cancelButton:"Cancel"})]}),t===M.DISPLAY&&(0,$.jsx)("div",{className:"popup-button-close right_menu_button fa-solid fa-circle-xmark",onClick:()=>p(D.CANCELLED),"data-result":"0",title:"Close popup","data-i18n":"[title]Close popup"})]})}),document.body)},le=SillyTavern.getContext(),ue=(e,t,n)=>{if(!e||!e.api)return!1;const r=n[e.api];if(!r||!Object.hasOwn(t,r.selected))return!1;switch(r.selected){case"openai":return!!r.source;case"textgenerationwebui":return!!r.type}return!1},ce=({initialSelectedProfileId:e,allowedTypes:t={openai:"Chat Completion",textgenerationwebui:"Text Completion"},placeholder:n="Select a Connection Profile",onChange:r,onCreate:i,onUpdate:o,onDelete:a})=>{const[s,l]=(0,T.useState)(e??""),[u,c]=(0,T.useState)(Date.now()),{isEnabled:d,profiles:f,connectApiMap:h}=(0,T.useMemo)(()=>{const e=le.extensionSettings.disabledExtensions?.includes("connection-manager");return e?(console.error("Connection Manager extension is disabled."),{isEnabled:!1,profiles:[],connectApiMap:{}}):{isEnabled:!0,profiles:le.extensionSettings.connectionManager?.profiles??[],connectApiMap:le.CONNECT_API_MAP}},[u]);(0,T.useEffect)(()=>{if(!d)return;const e=e=>{ue(e,t,h)&&(c(Date.now()),i?.(e))},n=(e,n)=>{const i=ue(e,t,h),a=ue(n,t,h);(i||a)&&c(Date.now()),o?.(e,n),s!==e.id||a||(l(""),r?.(void 0))},u=e=>{ue(e,t,h)&&(c(Date.now()),a?.(e),s===e.id&&(l(""),r?.(void 0)))};return le.eventSource.on("CONNECTION_PROFILE_CREATED",e),le.eventSource.on("CONNECTION_PROFILE_UPDATED",n),le.eventSource.on("CONNECTION_PROFILE_DELETED",u),()=>{le.eventSource.removeListener("CONNECTION_PROFILE_CREATED",e),le.eventSource.removeListener("CONNECTION_PROFILE_UPDATED",n),le.eventSource.removeListener("CONNECTION_PROFILE_DELETED",u)}},[d,s,t,h,r,i,o,a]);const p=(0,T.useMemo)(()=>{if(!d)return[];const e=f.filter(e=>ue(e,t,h)),n={};for(const[e,r]of Object.entries(t))n[e]={label:r,profiles:[]};for(const t of e){const e=h[t.api];n[e.selected]&&n[e.selected].profiles.push(t)}for(const e of Object.values(n))e.profiles.sort((e,t)=>(e.name??"").localeCompare(t.name??""));return Object.values(n).filter(e=>e.profiles.length>0)},[d,f,t,h]),m=(0,T.useCallback)(e=>{const t=e.target.value;l(t);const n=f.find(e=>e.id===t);r?.(n)},[f,r]);return d?(0,$.jsxs)(A,{value:s,onChange:m,children:[(0,$.jsx)("option",{value:"",children:n}),p.map(e=>(0,$.jsx)("optgroup",{label:e.label,children:e.profiles.map(e=>(0,$.jsx)("option",{value:e.id,children:e.name},e.id))},e.label))]}):(0,$.jsx)(A,{disabled:!0,value:"",children:(0,$.jsx)("option",{children:"Connection Manager disabled"})})},de=SillyTavern.getContext(),fe=({value:e,items:t,readOnlyValues:n=[],label:r,onChange:i,onItemsChange:o,enableCreate:a=!1,enableRename:s=!1,enableDelete:l=!1,onCreate:u,onRename:c,onDelete:d,buttons:f})=>{const h=(0,T.useMemo)(()=>t.find(t=>t.value===e),[t,e]),p=(0,T.useCallback)(e=>!!e&&n.includes(e),[n]);return(0,$.jsxs)("div",{className:"preset-select-container",style:{display:"flex",alignItems:"center"},children:[(0,$.jsx)(A,{value:e??"",onChange:t=>i(t.target.value,e),children:t.map(e=>(0,$.jsx)("option",{value:e.value,children:e.label},e.value))}),a&&(0,$.jsx)(j,{className:"fa-solid fa-file-circle-plus",title:`Create a new ${r}`,onClick:async()=>{const n=await de.Popup.show.input(`Create a new ${r}`,`Please enter a name for the new ${r}:`,"");if(!n||""===n.trim())return;const a=n.trim();if(t.some(e=>e.value===a))return void await J("warning",`A ${r} with this name already exists.`);let s={value:a,label:a};if(u){const e=await Promise.resolve(u(a));if(!e.confirmed)return;e.value&&(s="string"==typeof e.value?{value:e.value,label:e.value}:e.value)}o([...t,s]),i(s.value,e)},"data-i18n":`[title]Create a new ${r}`}),s&&(0,$.jsx)(j,{className:"fa-solid fa-pencil",title:`Rename selected ${r}`,onClick:async()=>{if(!h)return void await J("warning",`Please select a ${r} to rename.`);if(p(h.value))return void await J("warning",`This ${r} cannot be renamed as it is read-only.`);const n=await de.Popup.show.input(`Rename ${r}`,`Please enter a new name for "${h.label}":`,h.label);if(!n||""===n.trim()||n.trim()===h.value)return;const a=n.trim();if(t.some(e=>e.value===a))return void await J("warning",`A ${r} with this name already exists.`);let s={value:a,label:a};if(c){const e=await Promise.resolve(c(h.value,a));if(!e.confirmed)return;e.value&&(s="string"==typeof e.value?{value:e.value,label:e.value}:e.value)}const l=t.map(e=>e.value===h.value?s:e);o(l),i(s.value,e)},disabled:!h,"data-i18n":`[title]Rename selected ${r}`}),l&&(0,$.jsx)(j,{className:"fa-solid fa-trash-can",title:`Delete selected ${r}`,onClick:async()=>{if(!h)return void await J("warning",`Please select a ${r} to delete.`);if(p(h.value))return void await J("warning",`This ${r} cannot be deleted as it is read-only.`);if(!await de.Popup.show.confirm(`Delete ${r}`,`Are you sure you want to delete "${h.label}"?`))return;if(d){if(!await Promise.resolve(d(h.value)))return}const n=t.findIndex(e=>e.value===h.value),a=t.filter(e=>e.value!==h.value);let s;if(o(a),a.length>0){const e=Math.min(n,a.length-1);s=a[e]?.value}i(s,e)},disabled:!h,"data-i18n":`[title]Delete selected ${r}`}),f?.map(e=>(0,$.jsx)(j,{className:e.icon,title:e.title,onClick:e.onClick,disabled:e.disabled,"data-i18n":e.i18n?`[title]${e.i18n}`:void 0},e.key))]})};
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach(function(t){ge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(){return ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function be(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Oe=be(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),we=be(/Edge/i),xe=be(/firefox/i),Se=be(/safari/i)&&!be(/chrome/i)&&!be(/android/i),ke=be(/iP(ad|od|hone)/i),_e=be(/chrome/i)&&be(/android/i),Pe={capture:!1,passive:!1};function Ee(e,t,n){e.addEventListener(t,n,!Oe&&Pe)}function $e(e,t,n){e.removeEventListener(t,n,!Oe&&Pe)}function Te(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function Ce(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function je(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&Te(e,t):Te(e,t))||r&&e===n)return e;if(e===n)break}while(e=Ce(e))}return null}var Ne,Ae=/\s+/g;function Ie(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Ae," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Ae," ")}}function Me(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function De(e,t){var n="";if("string"==typeof e)n=e;else do{var r=Me(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Re(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Qe(){var e=document.scrollingElement;return e||document.documentElement}function ze(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var o,a,s,l,u,c,d;if(e!==window&&e.parentNode&&e!==Qe()?(a=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,u=o.right,c=o.height,d=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Oe))do{if(i&&i.getBoundingClientRect&&("none"!==Me(i,"transform")||n&&"static"!==Me(i,"position"))){var f=i.getBoundingClientRect();a-=f.top+parseInt(Me(i,"border-top-width")),s-=f.left+parseInt(Me(i,"border-left-width")),l=a+o.height,u=s+o.width;break}}while(i=i.parentNode);if(r&&e!==window){var h=De(i||e),p=h&&h.a,m=h&&h.d;h&&(l=(a/=m)+(c/=m),u=(s/=p)+(d/=p))}return{top:a,left:s,bottom:l,right:u,width:d,height:c}}}function Le(e,t,n){for(var r=Ge(e,!0),i=ze(e)[t];r;){var o=ze(r)[n];if(!("top"===n||"left"===n?i>=o:i<=o))return r;if(r===Qe())break;r=Ge(r,!1)}return!1}function Ze(e,t,n,r){for(var i=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==qt.ghost&&(r||a[o]!==qt.dragged)&&je(a[o],n.draggable,e,!1)){if(i===t)return a[o];i++}o++}return null}function Fe(e,t){for(var n=e.lastElementChild;n&&(n===qt.ghost||"none"===Me(n,"display")||t&&!Te(n,t));)n=n.previousElementSibling;return n||null}function Ue(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===qt.clone||t&&!Te(e,t)||n++;return n}function Ve(e){var t=0,n=0,r=Qe();if(e)do{var i=De(e),o=i.a,a=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function Ge(e,t){if(!e||!e.getBoundingClientRect)return Qe();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Me(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Qe();if(r||t)return n;r=!0}}}while(n=n.parentNode);return Qe()}function Be(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Xe(e,t){return function(){if(!Ne){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),Ne=setTimeout(function(){Ne=void 0},t)}}}function Ye(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function We(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function qe(e,t,n){var r={};return Array.from(e.children).forEach(function(i){var o,a,s,l;if(je(i,t.draggable,e,!1)&&!i.animated&&i!==n){var u=ze(i);r.left=Math.min(null!==(o=r.left)&&void 0!==o?o:1/0,u.left),r.top=Math.min(null!==(a=r.top)&&void 0!==a?a:1/0,u.top),r.right=Math.max(null!==(s=r.right)&&void 0!==s?s:-1/0,u.right),r.bottom=Math.max(null!==(l=r.bottom)&&void 0!==l?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var He="Sortable"+(new Date).getTime();function Ke(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==Me(e,"display")&&e!==qt.ghost){t.push({target:e,rect:ze(e)});var n=pe({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=De(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var i=!1,o=0;t.forEach(function(e){var t=0,n=e.target,a=n.fromRect,s=ze(n),l=n.prevFromRect,u=n.prevToRect,c=e.rect,d=De(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&Be(l,s)&&!Be(a,s)&&(c.top-s.top)/(c.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,l,u,r.options)),Be(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,c,s,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(e),i?e=setTimeout(function(){"function"==typeof n&&n()},o):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){Me(e,"transition",""),Me(e,"transform","");var i=De(this.el),o=i&&i.a,a=i&&i.d,s=(t.left-n.left)/(o||1),l=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,Me(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Me(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Me(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){Me(e,"transition",""),Me(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}var Je=[],et={initializeByDefault:!0},tt={mount:function(e){for(var t in et)et.hasOwnProperty(t)&&!(t in e)&&(e[t]=et[t]);Je.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Je.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+"Global";Je.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](pe({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](pe({sortable:t},n)))})},initializePlugins:function(e,t,n,r){for(var i in Je.forEach(function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var o=new r(e,t,e.options);o.sortable=e,o.options=e.options,e[i]=o,ve(n,o.defaults)}}),e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);void 0!==o&&(e.options[i]=o)}},getEventProperties:function(e,t){var n={};return Je.forEach(function(r){"function"==typeof r.eventProperties&&ve(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return Je.forEach(function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))}),r}};function nt(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[He]){var m,g=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||Oe||we?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=s||n,m.item=i||n,m.clone=o,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=h?h.lastPutMode:void 0;var y=pe(pe({},p),tt.getEventProperties(r,t));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}var rt=["evt"],it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=ye(n,rt);tt.pluginEvent.bind(qt)(e,t,pe({dragEl:at,parentEl:st,ghostEl:lt,rootEl:ut,nextEl:ct,lastDownEl:dt,cloneEl:ft,cloneHidden:ht,dragStarted:Pt,putSortable:bt,activeSortable:qt.active,originalEvent:r,oldIndex:pt,oldDraggableIndex:gt,newIndex:mt,newDraggableIndex:vt,hideGhostForTarget:Bt,unhideGhostForTarget:Xt,cloneNowHidden:function(){ht=!0},cloneNowShown:function(){ht=!1},dispatchSortableEvent:function(e){ot({sortable:t,name:e,originalEvent:r})}},i))};function ot(e){nt(pe({putSortable:bt,cloneEl:ft,targetEl:at,rootEl:ut,oldIndex:pt,oldDraggableIndex:gt,newIndex:mt,newDraggableIndex:vt},e))}var at,st,lt,ut,ct,dt,ft,ht,pt,mt,gt,vt,yt,bt,Ot,wt,xt,St,kt,_t,Pt,Et,$t,Tt,Ct,jt=!1,Nt=!1,At=[],It=!1,Mt=!1,Dt=[],Rt=!1,Qt=[],zt="undefined"!=typeof document,Lt=ke,Zt=we||Oe?"cssFloat":"float",Ft=zt&&!_e&&!ke&&"draggable"in document.createElement("div"),Ut=function(){if(zt){if(Oe)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Vt=function(e,t){var n=Me(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Ze(e,0,t),o=Ze(e,1,t),a=i&&Me(i),s=o&&Me(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ze(i).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ze(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=r&&"none"===n[Zt]||o&&"none"===n[Zt]&&l+u>r)?"vertical":"horizontal"},Gt=function(e){function t(e,n){return function(r,i,o,a){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,i,o,a),n)(r,i,o,a);var l=(n?r:i).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;r&&"object"==me(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Bt=function(){!Ut&&lt&&Me(lt,"display","none")},Xt=function(){!Ut&&lt&&Me(lt,"display","")};zt&&!_e&&document.addEventListener("click",function(e){if(Nt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Nt=!1,!1},!0);var Yt=function(e){if(at){var t=function(e,t){var n;return At.some(function(r){var i=r[He].options.emptyInsertThreshold;if(i&&!Fe(r)){var o=ze(r),a=e>=o.left-i&&e<=o.right+i,s=t>=o.top-i&&t<=o.bottom+i;return a&&s?n=r:void 0}}),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[He]._onDragOver(n)}}},Wt=function(e){at&&at.parentNode[He]._isOutsideThisEl(e.target)};function qt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ve({},t),e[He]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Vt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==qt.supportPointer&&"PointerEvent"in window&&(!Se||ke),emptyInsertThreshold:5};for(var r in tt.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in Gt(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Ft,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ee(e,"pointerdown",this._onTapStart):(Ee(e,"mousedown",this._onTapStart),Ee(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ee(e,"dragover",this),Ee(e,"dragenter",this)),At.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ve(this,Ke())}function Ht(e,t,n,r,i,o,a,s){var l,u,c=e[He],d=c.options.onMove;return!window.CustomEvent||Oe||we?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=o||ze(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(u=d.call(c,l,a)),u}function Kt(e){e.draggable=!1}function Jt(){Rt=!1}function en(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function tn(e){return setTimeout(e,0)}function nn(e){return clearTimeout(e)}qt.prototype={constructor:qt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Et=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,at):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=r.filter;if(function(e){Qt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&Qt.push(r)}}(n),!at&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Se||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=je(s,r.draggable,n,!1))&&s.animated||dt===s)){if(pt=Ue(s),gt=Ue(s,r.draggable),"function"==typeof u){if(u.call(this,e,s,this))return ot({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),it("filter",t,{evt:e}),void(i&&e.preventDefault())}else if(u&&(u=u.split(",").some(function(r){if(r=je(l,r.trim(),n,!1))return ot({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),it("filter",t,{evt:e}),!0})))return void(i&&e.preventDefault());r.handle&&!je(l,r.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var r,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(n&&!at&&n.parentNode===o){var l=ze(n);if(ut=o,st=(at=n).parentNode,ct=at.nextSibling,dt=n,yt=a.group,qt.dragged=at,Ot={target:at,clientX:(t||e).clientX,clientY:(t||e).clientY},kt=Ot.clientX-l.left,_t=Ot.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,at.style["will-change"]="all",r=function(){it("delayEnded",i,{evt:e}),qt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!xe&&i.nativeDraggable&&(at.draggable=!0),i._triggerDragStart(e,t),ot({sortable:i,name:"choose",originalEvent:e}),Ie(at,a.chosenClass,!0))},a.ignore.split(",").forEach(function(e){Re(at,e.trim(),Kt)}),Ee(s,"dragover",Yt),Ee(s,"mousemove",Yt),Ee(s,"touchmove",Yt),a.supportPointer?(Ee(s,"pointerup",i._onDrop),!this.nativeDraggable&&Ee(s,"pointercancel",i._onDrop)):(Ee(s,"mouseup",i._onDrop),Ee(s,"touchend",i._onDrop),Ee(s,"touchcancel",i._onDrop)),xe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,at.draggable=!0),it("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(we||Oe))r();else{if(qt.eventCanceled)return void this._onDrop();a.supportPointer?(Ee(s,"pointerup",i._disableDelayedDrag),Ee(s,"pointercancel",i._disableDelayedDrag)):(Ee(s,"mouseup",i._disableDelayedDrag),Ee(s,"touchend",i._disableDelayedDrag),Ee(s,"touchcancel",i._disableDelayedDrag)),Ee(s,"mousemove",i._delayedDragTouchMoveHandler),Ee(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&Ee(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){at&&Kt(at),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;$e(e,"mouseup",this._disableDelayedDrag),$e(e,"touchend",this._disableDelayedDrag),$e(e,"touchcancel",this._disableDelayedDrag),$e(e,"pointerup",this._disableDelayedDrag),$e(e,"pointercancel",this._disableDelayedDrag),$e(e,"mousemove",this._delayedDragTouchMoveHandler),$e(e,"touchmove",this._delayedDragTouchMoveHandler),$e(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Ee(document,"pointermove",this._onTouchMove):Ee(document,t?"touchmove":"mousemove",this._onTouchMove):(Ee(at,"dragend",this),Ee(ut,"dragstart",this._onDragStart));try{document.selection?tn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(jt=!1,ut&&at){it("dragStarted",this,{evt:t}),this.nativeDraggable&&Ee(document,"dragover",Wt);var n=this.options;!e&&Ie(at,n.dragClass,!1),Ie(at,n.ghostClass,!0),qt.active=this,e&&this._appendGhost(),ot({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(wt){this._lastX=wt.clientX,this._lastY=wt.clientY,Bt();for(var e=document.elementFromPoint(wt.clientX,wt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(wt.clientX,wt.clientY))!==t;)t=e;if(at.parentNode[He]._isOutsideThisEl(e),t)do{if(t[He]){if(t[He]._onDragOver({clientX:wt.clientX,clientY:wt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=Ce(t));Xt()}},_onTouchMove:function(e){if(Ot){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=lt&&De(lt,!0),a=lt&&o&&o.a,s=lt&&o&&o.d,l=Lt&&Ct&&Ve(Ct),u=(i.clientX-Ot.clientX+r.x)/(a||1)+(l?l[0]-Dt[0]:0)/(a||1),c=(i.clientY-Ot.clientY+r.y)/(s||1)+(l?l[1]-Dt[1]:0)/(s||1);if(!qt.active&&!jt){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(lt){o?(o.e+=u-(xt||0),o.f+=c-(St||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Me(lt,"webkitTransform",d),Me(lt,"mozTransform",d),Me(lt,"msTransform",d),Me(lt,"transform",d),xt=u,St=c,wt=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!lt){var e=this.options.fallbackOnBody?document.body:ut,t=ze(at,!0,Lt,!0,e),n=this.options;if(Lt){for(Ct=e;"static"===Me(Ct,"position")&&"none"===Me(Ct,"transform")&&Ct!==document;)Ct=Ct.parentNode;Ct!==document.body&&Ct!==document.documentElement?(Ct===document&&(Ct=Qe()),t.top+=Ct.scrollTop,t.left+=Ct.scrollLeft):Ct=Qe(),Dt=Ve(Ct)}Ie(lt=at.cloneNode(!0),n.ghostClass,!1),Ie(lt,n.fallbackClass,!0),Ie(lt,n.dragClass,!0),Me(lt,"transition",""),Me(lt,"transform",""),Me(lt,"box-sizing","border-box"),Me(lt,"margin",0),Me(lt,"top",t.top),Me(lt,"left",t.left),Me(lt,"width",t.width),Me(lt,"height",t.height),Me(lt,"opacity","0.8"),Me(lt,"position",Lt?"absolute":"fixed"),Me(lt,"zIndex","100000"),Me(lt,"pointerEvents","none"),qt.ghost=lt,e.appendChild(lt),Me(lt,"transform-origin",kt/parseInt(lt.style.width)*100+"% "+_t/parseInt(lt.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;it("dragStart",this,{evt:e}),qt.eventCanceled?this._onDrop():(it("setupClone",this),qt.eventCanceled||((ft=We(at)).removeAttribute("id"),ft.draggable=!1,ft.style["will-change"]="",this._hideClone(),Ie(ft,this.options.chosenClass,!1),qt.clone=ft),n.cloneId=tn(function(){it("clone",n),qt.eventCanceled||(n.options.removeCloneOnHide||ut.insertBefore(ft,at),n._hideClone(),ot({sortable:n,name:"clone"}))}),!t&&Ie(at,i.dragClass,!0),t?(Nt=!0,n._loopId=setInterval(n._emulateDragOver,50)):($e(document,"mouseup",n._onDrop),$e(document,"touchend",n._onDrop),$e(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,at)),Ee(document,"drop",n),Me(at,"transform","translateZ(0)")),jt=!0,n._dragStartId=tn(n._dragStarted.bind(n,t,e)),Ee(document,"selectstart",n),Pt=!0,window.getSelection().removeAllRanges(),Se&&Me(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,i,o=this.el,a=e.target,s=this.options,l=s.group,u=qt.active,c=yt===l,d=s.sort,f=bt||u,h=this,p=!1;if(!Rt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=je(a,s.draggable,o,!0),T("dragOver"),qt.eventCanceled)return p;if(at.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return j(!1);if(Nt=!1,u&&!s.disabled&&(c?d||(r=st!==ut):bt===this||(this.lastPutMode=yt.checkPull(this,u,at,e))&&l.checkPut(this,u,at,e))){if(i="vertical"===this._getDirection(e,a),t=ze(at),T("dragOverValid"),qt.eventCanceled)return p;if(r)return st=ut,C(),this._hideClone(),T("revert"),qt.eventCanceled||(ct?ut.insertBefore(at,ct):ut.appendChild(at)),j(!0);var m=Fe(o,s.draggable);if(!m||function(e,t,n){var r=ze(Fe(n.el,n.options.draggable)),i=qe(n.el,n.options,lt),o=10;return t?e.clientX>i.right+o||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+o||e.clientX>r.right&&e.clientY>r.top}(e,i,this)&&!m.animated){if(m===at)return j(!1);if(m&&o===e.target&&(a=m),a&&(n=ze(a)),!1!==Ht(ut,o,at,t,a,n,e,!!a))return C(),m&&m.nextSibling?o.insertBefore(at,m.nextSibling):o.appendChild(at),st=o,N(),j(!0)}else if(m&&function(e,t,n){var r=ze(Ze(n.el,0,n.options,!0)),i=qe(n.el,n.options,lt),o=10;return t?e.clientX<i.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-o||e.clientY<r.bottom&&e.clientX<r.left}(e,i,this)){var g=Ze(o,0,s,!0);if(g===at)return j(!1);if(n=ze(a=g),!1!==Ht(ut,o,at,t,a,n,e,!1))return C(),o.insertBefore(at,g),st=o,N(),j(!0)}else if(a.parentNode===o){n=ze(a);var v,y,b,O=at.parentNode!==o,w=!function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===a||i===s||r+o/2===a+l/2}(at.animated&&at.toRect||t,a.animated&&a.toRect||n,i),x=i?"top":"left",S=Le(a,"top","top")||Le(at,"top","top"),k=S?S.scrollTop:void 0;if(Et!==a&&(y=n[x],It=!1,Mt=!w&&s.invertSwap||O),v=function(e,t,n,r,i,o,a,s){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!a)if(s&&Tt<u*i){if(!It&&(1===$t?l>c+u*o/2:l<d-u*o/2)&&(It=!0),It)f=!0;else if(1===$t?l<c+Tt:l>d-Tt)return-$t}else if(l>c+u*(1-i)/2&&l<d-u*(1-i)/2)return function(e){return Ue(at)<Ue(e)?1:-1}(t);if((f=f||a)&&(l<c+u*o/2||l>d-u*o/2))return l>c+u/2?1:-1;return 0}(e,a,n,i,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Mt,Et===a),0!==v){var _=Ue(at);do{_-=v,b=st.children[_]}while(b&&("none"===Me(b,"display")||b===lt))}if(0===v||b===a)return j(!1);Et=a,$t=v;var P=a.nextElementSibling,E=!1,$=Ht(ut,o,at,t,a,n,e,E=1===v);if(!1!==$)return 1!==$&&-1!==$||(E=1===$),Rt=!0,setTimeout(Jt,30),C(),E&&!P?o.appendChild(at):a.parentNode.insertBefore(at,E?P:a),S&&Ye(S,0,k-S.scrollTop),st=at.parentNode,void 0===y||Mt||(Tt=Math.abs(y-ze(a)[x])),N(),j(!0)}if(o.contains(at))return j(!1)}return!1}function T(s,l){it(s,h,pe({evt:e,isOwner:c,axis:i?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:a,completed:j,onMove:function(n,r){return Ht(ut,o,at,t,n,ze(n),e,r)},changed:N},l))}function C(){T("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function j(t){return T("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(h),h!==f&&(Ie(at,bt?bt.options.ghostClass:u.options.ghostClass,!1),Ie(at,s.ghostClass,!0)),bt!==h&&h!==qt.active?bt=h:h===qt.active&&bt&&(bt=null),f===h&&(h._ignoreWhileAnimating=a),h.animateAll(function(){T("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===at&&!at.animated||a===o&&!a.animated)&&(Et=null),s.dragoverBubble||e.rootEl||a===document||(at.parentNode[He]._isOutsideThisEl(e.target),!t&&Yt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function N(){mt=Ue(at),vt=Ue(at,s.draggable),ot({sortable:h,name:"change",toEl:o,newIndex:mt,newDraggableIndex:vt,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){$e(document,"mousemove",this._onTouchMove),$e(document,"touchmove",this._onTouchMove),$e(document,"pointermove",this._onTouchMove),$e(document,"dragover",Yt),$e(document,"mousemove",Yt),$e(document,"touchmove",Yt)},_offUpEvents:function(){var e=this.el.ownerDocument;$e(e,"mouseup",this._onDrop),$e(e,"touchend",this._onDrop),$e(e,"pointerup",this._onDrop),$e(e,"pointercancel",this._onDrop),$e(e,"touchcancel",this._onDrop),$e(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;mt=Ue(at),vt=Ue(at,n.draggable),it("drop",this,{evt:e}),st=at&&at.parentNode,mt=Ue(at),vt=Ue(at,n.draggable),qt.eventCanceled||(jt=!1,Mt=!1,It=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),nn(this.cloneId),nn(this._dragStartId),this.nativeDraggable&&($e(document,"drop",this),$e(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Se&&Me(document.body,"user-select",""),Me(at,"transform",""),e&&(Pt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),lt&&lt.parentNode&&lt.parentNode.removeChild(lt),(ut===st||bt&&"clone"!==bt.lastPutMode)&&ft&&ft.parentNode&&ft.parentNode.removeChild(ft),at&&(this.nativeDraggable&&$e(at,"dragend",this),Kt(at),at.style["will-change"]="",Pt&&!jt&&Ie(at,bt?bt.options.ghostClass:this.options.ghostClass,!1),Ie(at,this.options.chosenClass,!1),ot({sortable:this,name:"unchoose",toEl:st,newIndex:null,newDraggableIndex:null,originalEvent:e}),ut!==st?(mt>=0&&(ot({rootEl:st,name:"add",toEl:st,fromEl:ut,originalEvent:e}),ot({sortable:this,name:"remove",toEl:st,originalEvent:e}),ot({rootEl:st,name:"sort",toEl:st,fromEl:ut,originalEvent:e}),ot({sortable:this,name:"sort",toEl:st,originalEvent:e})),bt&&bt.save()):mt!==pt&&mt>=0&&(ot({sortable:this,name:"update",toEl:st,originalEvent:e}),ot({sortable:this,name:"sort",toEl:st,originalEvent:e})),qt.active&&(null!=mt&&-1!==mt||(mt=pt,vt=gt),ot({sortable:this,name:"end",toEl:st,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){it("nulling",this),ut=at=st=lt=ct=ft=dt=ht=Ot=wt=Pt=mt=vt=pt=gt=Et=$t=bt=yt=qt.dragged=qt.ghost=qt.clone=qt.active=null,Qt.forEach(function(e){e.checked=!0}),Qt.length=xt=St=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":at&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)je(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||en(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(e,t){var i=r.children[t];je(i,this.options.draggable,r,!1)&&(n[e]=i)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return je(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=tt.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&Gt(n)},destroy:function(){it("destroy",this);var e=this.el;e[He]=null,$e(e,"mousedown",this._onTapStart),$e(e,"touchstart",this._onTapStart),$e(e,"pointerdown",this._onTapStart),this.nativeDraggable&&($e(e,"dragover",this),$e(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),At.splice(At.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ht){if(it("hideClone",this),qt.eventCanceled)return;Me(ft,"display","none"),this.options.removeCloneOnHide&&ft.parentNode&&ft.parentNode.removeChild(ft),ht=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ht){if(it("showClone",this),qt.eventCanceled)return;at.parentNode!=ut||this.options.group.revertClone?ct?ut.insertBefore(ft,ct):ut.appendChild(ft):ut.insertBefore(ft,at),this.options.group.revertClone&&this.animate(at,ft),Me(ft,"display",""),ht=!1}}else this._hideClone()}},zt&&Ee(document,"touchmove",function(e){(qt.active||jt)&&e.cancelable&&e.preventDefault()}),qt.utils={on:Ee,off:$e,css:Me,find:Re,is:function(e,t){return!!je(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Xe,closest:je,toggleClass:Ie,clone:We,index:Ue,nextTick:tn,cancelNextTick:nn,detectDirection:Vt,getChild:Ze,expando:He},qt.get=function(e){return e[He]},qt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(qt.utils=pe(pe({},qt.utils),e.utils)),tt.mount(e)})},qt.create=function(e,t){return new qt(e,t)},qt.version="1.15.6";var rn,on,an,sn,ln,un,cn=[],dn=!1;function fn(){cn.forEach(function(e){clearInterval(e.pid)}),cn=[]}function hn(){clearInterval(un)}var pn=Xe(function(e,t,n,r){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=Qe(),c=!1;on!==n&&(on=n,fn(),rn=t.scroll,i=t.scrollFn,!0===rn&&(rn=Ge(n,!0)));var d=0,f=rn;do{var h=f,p=ze(h),m=p.top,g=p.bottom,v=p.left,y=p.right,b=p.width,O=p.height,w=void 0,x=void 0,S=h.scrollWidth,k=h.scrollHeight,_=Me(h),P=h.scrollLeft,E=h.scrollTop;h===u?(w=b<S&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),x=O<k&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(w=b<S&&("auto"===_.overflowX||"scroll"===_.overflowX),x=O<k&&("auto"===_.overflowY||"scroll"===_.overflowY));var $=w&&(Math.abs(y-o)<=s&&P+b<S)-(Math.abs(v-o)<=s&&!!P),T=x&&(Math.abs(g-a)<=s&&E+O<k)-(Math.abs(m-a)<=s&&!!E);if(!cn[d])for(var C=0;C<=d;C++)cn[C]||(cn[C]={});cn[d].vx==$&&cn[d].vy==T&&cn[d].el===h||(cn[d].el=h,cn[d].vx=$,cn[d].vy=T,clearInterval(cn[d].pid),0==$&&0==T||(c=!0,cn[d].pid=setInterval(function(){r&&0===this.layer&&qt.active._onTouchMove(ln);var t=cn[this.layer].vy?cn[this.layer].vy*l:0,n=cn[this.layer].vx?cn[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(qt.dragged.parentNode[He],n,t,e,ln,cn[this.layer].el)||Ye(cn[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==u&&(f=Ge(f,!1)));dn=c}},30),mn=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function gn(){}function vn(){}gn.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Ze(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:mn},ve(gn,{pluginName:"revertOnSpill"}),vn.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:mn},ve(vn,{pluginName:"removeOnSpill"});qt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Ee(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ee(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Ee(document,"touchmove",this._handleFallbackAutoScroll):Ee(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?$e(document,"dragover",this._handleAutoScroll):($e(document,"pointermove",this._handleFallbackAutoScroll),$e(document,"touchmove",this._handleFallbackAutoScroll),$e(document,"mousemove",this._handleFallbackAutoScroll)),hn(),fn(),clearTimeout(Ne),Ne=void 0},nulling:function(){ln=on=rn=dn=un=an=sn=null,cn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,i);if(ln=e,t||this.options.forceAutoScrollFallback||we||Oe||Se){pn(e,this.options,o,t);var a=Ge(o,!0);!dn||un&&r===an&&i===sn||(un&&hn(),un=setInterval(function(){var o=Ge(document.elementFromPoint(r,i),!0);o!==a&&(a=o,fn()),pn(e,n.options,o,t)},10),an=r,sn=i)}else{if(!this.options.bubbleScroll||Ge(o,!0)===Qe())return void fn();pn(e,this.options,Ge(o,!1),!1)}}},ve(e,{pluginName:"scroll",initializeByDefault:!0})}),qt.mount(vn,gn);T.memo(({item:e,showToggleButton:t,showDeleteButton:n,showSelectInput:r,onToggle:i,onDelete:o,onSelectChange:a})=>{const{id:s,label:l,enabled:u,canDelete:c=!0,canToggle:d=!0,showSelect:f=!0,canSelect:h=!0,selectOptions:p=[],selectValue:m}=e,g={display:"flex",alignItems:"center",padding:"8px 12px",border:"1px solid var(--SmartThemeBorderColor, #ccc)",color:"var(--SmartThemeBodyColor, #333)",marginBottom:"2px",opacity:t&&!u?.6:1},v={cursor:"pointer",flexShrink:0},y={display:"inline-block",flexShrink:0,marginRight:"10px"};return(0,$.jsxs)("li",{className:"sortable-list-item",style:g,"data-id":s,children:[(0,$.jsx)("span",{className:"drag-handle fas fa-bars",style:{cursor:"grab",marginRight:"10px",color:"var(--SmartThemeBodyColor, #555)",flexShrink:0}}),(0,$.jsx)("span",{className:"item-label",style:{flexGrow:1,marginRight:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l}),r&&f&&h&&(0,$.jsx)(A,{value:m,onChange:e=>a(s,e.target.value),disabled:!u,style:{marginRight:"10px",flexShrink:0,width:"unset"},children:0===p.length?(0,$.jsx)("option",{disabled:!0,children:"--"}):p.map(e=>(0,$.jsx)("option",{value:e.value,children:e.label},e.value))}),r&&(!f||!h)&&(0,$.jsx)("span",{style:y}),t&&d&&(0,$.jsx)(j,{overrideDefaults:!0,className:"toggle-button fas "+(u?"fa-toggle-on":"fa-toggle-off"),style:{...v,marginRight:"10px",fontSize:"1.2em",color:u?"var(--success-color, #4CAF50)":"var(--SmartThemeBodyColor, #555)",backgroundColor:"transparent",border:"none"},onClick:()=>i(s)}),t&&!d&&(0,$.jsx)("span",{style:y}),n&&c&&(0,$.jsx)(j,{overrideDefaults:!0,className:"delete-button fas fa-trash-can",style:{...v,color:"var(--error-color, #f44336)",backgroundColor:"transparent",border:"none"},onClick:()=>o(s)}),n&&!c&&(0,$.jsx)("span",{style:{...y,marginRight:0}})]})});function yn(e){return Array.isArray?Array.isArray(e):"[object Array]"===_n(e)}function bn(e){return"string"==typeof e}function On(e){return"number"==typeof e}function wn(e){return!0===e||!1===e||function(e){return xn(e)&&null!==e}(e)&&"[object Boolean]"==_n(e)}function xn(e){return"object"==typeof e}function Sn(e){return null!=e}function kn(e){return!e.trim().length}function _n(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Pn=Object.prototype.hasOwnProperty;class En{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=$n(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function $n(e){let t=null,n=null,r=null,i=1,o=null;if(bn(e)||yn(e))r=e,t=Tn(e),n=Cn(e);else{if(!Pn.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const a=e.name;if(r=a,Pn.call(e,"weight")&&(i=e.weight,i<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(a));t=Tn(a),n=Cn(a),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function Tn(e){return yn(e)?e:e.split(".")}function Cn(e){return yn(e)?e.join("."):e}const jn={useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const i=(e,t,o)=>{if(Sn(e))if(t[o]){const a=e[t[o]];if(!Sn(a))return;if(o===t.length-1&&(bn(a)||On(a)||wn(a)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(yn(a)){r=!0;for(let e=0,n=a.length;e<n;e+=1)i(a[e],t,o+1)}else t.length&&i(a,t,o+1)}else n.push(e)};return i(e,bn(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Nn={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...jn};const An=/[^ ]+/g;class In{constructor({getFn:e=Nn.getFn,fieldNormWeight:t=Nn.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(t){const i=t.match(An).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,bn(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();bn(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Sn(e)||kn(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,r)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Sn(i))if(yn(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(Sn(r))if(bn(r)&&!kn(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else yn(r)&&r.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[r]=e}else if(bn(i)&&!kn(i)){let e={v:i,n:this.norm.get(i)};n.$[r]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Mn(e,t,{getFn:n=Nn.getFn,fieldNormWeight:r=Nn.fieldNormWeight}={}){const i=new In({getFn:n,fieldNormWeight:r});return i.setKeys(e.map($n)),i.setSources(t),i.create(),i}function Dn(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Nn.distance,ignoreLocation:o=Nn.ignoreLocation}={}){const a=t/e.length;if(o)return a;const s=Math.abs(r-n);return i?a+s/i:s?1:a}const Rn=32;function Qn(e,t,n,{location:r=Nn.location,distance:i=Nn.distance,threshold:o=Nn.threshold,findAllMatches:a=Nn.findAllMatches,minMatchCharLength:s=Nn.minMatchCharLength,includeMatches:l=Nn.includeMatches,ignoreLocation:u=Nn.ignoreLocation}={}){if(t.length>Rn)throw new Error(`Pattern length exceeds max of ${Rn}.`);const c=t.length,d=e.length,f=Math.max(0,Math.min(r,d));let h=o,p=f;const m=s>1||l,g=m?Array(d):[];let v;for(;(v=e.indexOf(t,p))>-1;){let e=Dn(t,{currentLocation:v,expectedLocation:f,distance:i,ignoreLocation:u});if(h=Math.min(e,h),p=v+c,m){let e=0;for(;e<c;)g[v+e]=1,e+=1}}p=-1;let y=[],b=1,O=c+d;const w=1<<c-1;for(let r=0;r<c;r+=1){let o=0,s=O;for(;o<s;){Dn(t,{errors:r,currentLocation:f+s,expectedLocation:f,distance:i,ignoreLocation:u})<=h?o=s:O=s,s=Math.floor((O-o)/2+o)}O=s;let l=Math.max(1,f-s+1),v=a?d:Math.min(f+s,d)+c,x=Array(v+2);x[v+1]=(1<<r)-1;for(let o=v;o>=l;o-=1){let a=o-1,s=n[e.charAt(a)];if(m&&(g[a]=+!!s),x[o]=(x[o+1]<<1|1)&s,r&&(x[o]|=(y[o+1]|y[o])<<1|1|y[o+1]),x[o]&w&&(b=Dn(t,{errors:r,currentLocation:a,expectedLocation:f,distance:i,ignoreLocation:u}),b<=h)){if(h=b,p=a,p<=f)break;l=Math.max(1,2*f-p)}}if(Dn(t,{errors:r+1,currentLocation:f,expectedLocation:f,distance:i,ignoreLocation:u})>h)break;y=x}const x={isMatch:p>=0,score:Math.max(.001,b)};if(m){const e=function(e=[],t=Nn.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let a=e.length;o<a;o+=1){let a=e[o];a&&-1===r?r=o:a||-1===r||(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}(g,s);e.length?l&&(x.indices=e):x.isMatch=!1}return x}function zn(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Ln=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Zn{constructor(e,{location:t=Nn.location,threshold:n=Nn.threshold,distance:r=Nn.distance,includeMatches:i=Nn.includeMatches,findAllMatches:o=Nn.findAllMatches,minMatchCharLength:a=Nn.minMatchCharLength,isCaseSensitive:s=Nn.isCaseSensitive,ignoreDiacritics:l=Nn.ignoreDiacritics,ignoreLocation:u=Nn.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:u},e=s?e:e.toLowerCase(),e=l?Ln(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:zn(e),startIndex:t})},d=this.pattern.length;if(d>Rn){let e=0;const t=d%Rn,n=d-t;for(;e<n;)c(this.pattern.substr(e,Rn),e),e+=Rn;if(t){const e=d-Rn;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=t?e:e.toLowerCase(),e=n?Ln(e):e,this.pattern===e){let t={isMatch:!0,score:0};return r&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:o,threshold:a,findAllMatches:s,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],d=0,f=!1;this.chunks.forEach(({pattern:t,alphabet:n,startIndex:h})=>{const{isMatch:p,score:m,indices:g}=Qn(e,t,n,{location:i+h,distance:o,threshold:a,findAllMatches:s,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});p&&(f=!0),d+=m,p&&g&&(c=[...c,...g])});let h={isMatch:f,score:f?d/this.chunks.length:1};return f&&r&&(h.indices=c),h}}class Fn{constructor(e){this.pattern=e}static isMultiMatch(e){return Un(e,this.multiRegex)}static isSingleMatch(e){return Un(e,this.singleRegex)}search(){}}function Un(e,t){const n=e.match(t);return n?n[1]:null}class Vn extends Fn{constructor(e,{location:t=Nn.location,threshold:n=Nn.threshold,distance:r=Nn.distance,includeMatches:i=Nn.includeMatches,findAllMatches:o=Nn.findAllMatches,minMatchCharLength:a=Nn.minMatchCharLength,isCaseSensitive:s=Nn.isCaseSensitive,ignoreDiacritics:l=Nn.ignoreDiacritics,ignoreLocation:u=Nn.ignoreLocation}={}){super(e),this._bitapSearch=new Zn(e,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Gn extends Fn{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const Bn=[class extends Fn{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Gn,class extends Fn{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Fn{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Fn{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Fn{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends Fn{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Vn],Xn=Bn.length,Yn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Wn=new Set([Vn.type,Gn.type]);class qn{constructor(e,{isCaseSensitive:t=Nn.isCaseSensitive,ignoreDiacritics:n=Nn.ignoreDiacritics,includeMatches:r=Nn.includeMatches,minMatchCharLength:i=Nn.minMatchCharLength,ignoreLocation:o=Nn.ignoreLocation,findAllMatches:a=Nn.findAllMatches,location:s=Nn.location,threshold:l=Nn.threshold,distance:u=Nn.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:i,findAllMatches:a,ignoreLocation:o,location:s,threshold:l,distance:u},e=t?e:e.toLowerCase(),e=n?Ln(e):e,this.pattern=e,this.query=function(e,t={}){return e.split("|").map(e=>{let n=e.trim().split(Yn).filter(e=>e&&!!e.trim()),r=[];for(let e=0,i=n.length;e<i;e+=1){const i=n[e];let o=!1,a=-1;for(;!o&&++a<Xn;){const e=Bn[a];let n=e.isMultiMatch(i);n&&(r.push(new e(n,t)),o=!0)}if(!o)for(a=-1;++a<Xn;){const e=Bn[a];let n=e.isSingleMatch(i);if(n){r.push(new e(n,t));break}}}return r})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:i}=this.options;e=r?e:e.toLowerCase(),e=i?Ln(e):e;let o=0,a=[],s=0;for(let r=0,i=t.length;r<i;r+=1){const i=t[r];a.length=0,o=0;for(let t=0,r=i.length;t<r;t+=1){const r=i[t],{isMatch:l,indices:u,score:c}=r.search(e);if(!l){s=0,o=0,a.length=0;break}if(o+=1,s+=c,n){const e=r.constructor.type;Wn.has(e)?a=[...a,...u]:a.push(u)}}if(o){let e={isMatch:!0,score:s/o};return n&&(e.indices=a),e}}return{isMatch:!1,score:1}}}const Hn=[];function Kn(e,t){for(let n=0,r=Hn.length;n<r;n+=1){let r=Hn[n];if(r.condition(e,t))return new r(e,t)}return new Zn(e,t)}const Jn="$and",er="$or",tr="$path",nr="$val",rr=e=>!(!e[Jn]&&!e[er]),ir=e=>({[Jn]:Object.keys(e).map(t=>({[t]:e[t]}))});function or(e,t,{auto:n=!0}={}){const r=e=>{let i=Object.keys(e);const o=(e=>!!e[tr])(e);if(!o&&i.length>1&&!rr(e))return r(ir(e));if((e=>!yn(e)&&xn(e)&&!rr(e))(e)){const r=o?e[tr]:i[0],a=o?e[nr]:e[r];if(!bn(a))throw new Error((e=>`Invalid value for key ${e}`)(r));const s={keyId:Cn(r),pattern:a};return n&&(s.searcher=Kn(a,t)),s}let a={children:[],operator:i[0]};return i.forEach(t=>{const n=e[t];yn(n)&&n.forEach(e=>{a.children.push(r(e))})}),a};return rr(e)||(e=ir(e)),r(e)}function ar(e,t){const n=e.matches;t.matches=[],Sn(n)&&n.forEach(e=>{if(!Sn(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let i={indices:n,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)})}function sr(e,t){t.score=e.score}class lr{constructor(e,t={},n){this.options={...Nn,...t},this.options.useExtendedSearch,this._keyStore=new En(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof In))throw new Error("Incorrect 'index' type");this._myIndex=t||Mn(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Sn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let s=bn(e)?bn(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Nn.ignoreFieldNorm}){e.forEach(e=>{let n=1;e.matches.forEach(({key:e,norm:r,score:i})=>{const o=e?e.weight:null;n*=Math.pow(0===i&&o?Number.EPSILON:i,(o||1)*(t?1:r))}),e.score=n})}(s,{ignoreFieldNorm:a}),i&&s.sort(o),On(t)&&t>-1&&(s=s.slice(0,t)),function(e,t,{includeMatches:n=Nn.includeMatches,includeScore:r=Nn.includeScore}={}){const i=[];return n&&i.push(ar),r&&i.push(sr),e.map(e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return i.length&&i.forEach(t=>{t(e,r)}),r})}(s,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=Kn(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:e,i:n,n:i})=>{if(!Sn(e))return;const{isMatch:o,score:a,indices:s}=t.searchIn(e);o&&r.push({item:e,idx:n,matches:[{score:a,value:e,norm:i,indices:s}]})}),r}_searchLogical(e){const t=or(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:i}=e,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return o&&o.length?[{idx:r,item:t,matches:o}]:[]}const i=[];for(let o=0,a=e.children.length;o<a;o+=1){const a=e.children[o],s=n(a,t,r);if(s.length)i.push(...s);else if(e.operator===Jn)return[]}return i},r=this._myIndex.records,i={},o=[];return r.forEach(({$:e,i:r})=>{if(Sn(e)){let a=n(t,e,r);a.length&&(i[r]||(i[r]={idx:r,item:e,matches:[]},o.push(i[r])),a.forEach(({matches:e})=>{i[r].matches.push(...e)}))}}),o}_searchObjectList(e){const t=Kn(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach(({$:e,i:r})=>{if(!Sn(e))return;let o=[];n.forEach((n,r)=>{o.push(...this._findMatches({key:n,value:e[r],searcher:t}))}),o.length&&i.push({idx:r,item:e,matches:o})}),i}_findMatches({key:e,value:t,searcher:n}){if(!Sn(t))return[];let r=[];if(yn(t))t.forEach(({v:t,i,n:o})=>{if(!Sn(t))return;const{isMatch:a,score:s,indices:l}=n.searchIn(t);a&&r.push({score:s,key:e,value:t,idx:i,norm:o,indices:l})});else{const{v:i,n:o}=t,{isMatch:a,score:s,indices:l}=n.searchIn(i);a&&r.push({score:s,key:e,value:i,norm:o,indices:l})}return r}}lr.version="7.1.0",lr.createIndex=Mn,lr.parseIndex=function(e,{getFn:t=Nn.getFn,fieldNormWeight:n=Nn.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new In({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o},lr.config=Nn,lr.parseQuery=or,function(...e){Hn.push(...e)}(qn);const ur=({items:e,value:t,onChange:n,placeholder:r="Select items...",closeOnSelect:i=!1,multiple:o=!0,disabled:a=!1,onBeforeSelection:s,enableSearch:l=!1,searchPlaceholder:u="Search...",searchNoResultsText:c="No results found",searchFuseOptions:d,inputClasses:f,containerClasses:h})=>{const[p,m]=(0,T.useState)(!1),[g,v]=(0,T.useState)(""),y=(0,T.useRef)(null);(0,T.useEffect)(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,T.useEffect)(()=>{p||v("")},[p]);const b=(0,T.useMemo)(()=>{if(!l)return null;const t={includeScore:!1,threshold:.4,keys:["label","value"],...d};return new lr(e,t)},[e,l,d]),O=(0,T.useMemo)(()=>l&&g.trim()&&b?b.search(g.trim()).map(e=>e.item):e,[e,g,l,b]),w=async e=>{let r;if(r=o?t.includes(e)?t.filter(t=>t!==e):[...t,e]:t.includes(e)?[]:[e],s){if(!await Promise.resolve(s(t,r)))return}n(r),i&&m(!1)},x=(0,T.useMemo)(()=>0===t.length?r:1===t.length?e.find(e=>e.value===t[0])?.label??t[0]:`${t.length} items selected`,[t,e,r]);return(0,$.jsxs)("div",{ref:y,className:`fancy-dropdown-container ${h??""}`,style:{position:"relative",userSelect:"none",opacity:a?.6:1,pointerEvents:a?"none":"auto"},children:[(0,$.jsxs)("div",{className:"fancy-dropdown-trigger",onClick:()=>!a&&m(!p),style:{padding:"8px 12px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-color)",color:"var(--text-color)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,$.jsx)("span",{className:"fancy-dropdown-trigger-text",children:x}),(0,$.jsx)("i",{className:"fas "+(p?"fa-chevron-up":"fa-chevron-down"),style:{marginLeft:"8px"}})]}),p&&(0,$.jsxs)("div",{className:"fancy-dropdown-list",style:{position:"absolute",top:"100%",left:"0",right:"0",maxHeight:"300px",zIndex:1050,border:"1px solid var(--border-color)",borderTop:"none",backgroundColor:"var(--bg-color-popup, var(--bg-color-secondary, var(--greyCAIbg, var(--grey30))))",color:"var(--text-color)",borderRadius:"0 0 4px 4px",boxShadow:"0 4px 8px var(--black50a)",overflowY:"auto",display:"flex",flexDirection:"column"},children:[l&&(0,$.jsx)("div",{style:{padding:"8px",borderBottom:"1px solid var(--border-color)",position:"sticky",top:0,backgroundColor:"inherit"},children:(0,$.jsx)(N,{type:"text",placeholder:u,value:g,onChange:e=>v(e.target.value),autoFocus:!0,className:f})}),(0,$.jsx)("ul",{style:{listStyle:"none",margin:0,padding:0},children:O.length>0?O.map(e=>(0,$.jsx)(cr,{item:e,isSelected:t.includes(e.value),onClick:w},e.value)):(0,$.jsx)("div",{style:{padding:"8px 12px",textAlign:"center",color:"var(--text-color-secondary, var(--grey50))"},children:c})})]})]})},cr=T.memo(({item:e,isSelected:t,onClick:n})=>{const[r,i]=(0,T.useState)(!1);return(0,$.jsxs)("li",{onClick:()=>n(e.value),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:t?"var(--accent-color-bg, var(--link-color))":r?"var(--hover-color, var(--white20a))":"transparent"},children:[(0,$.jsx)("span",{children:e.label}),t&&(0,$.jsx)("i",{className:"checkmark fa-solid fa-check",style:{marginLeft:"8px"}})]})});const dr=(e=>{var t={};return b.d(t,e),t})({getGlobalVariable:()=>g.getGlobalVariable,getLocalVariable:()=>g.getLocalVariable,setGlobalVariable:()=>g.setGlobalVariable,setLocalVariable:()=>g.setLocalVariable});var fr="flow-run",hr="flow-stop";class pr extends Error{data;constructor(e,t){super(e),this.data=t}toString(){return this.message}}async function mr(e,t){const n=SillyTavern.getContext(),r=new FormData;r.append("avatar",new Blob([JSON.stringify(e)],{type:"application/json"}),"character.json"),r.append("file_type","json");const i=n.getRequestHeaders();delete i["Content-Type"];const o=await fetch("/api/characters/import",{method:"POST",headers:i,body:r,cache:"no-cache"});if(!o.ok)throw new pr(o.statusText,o);t&&await n.getCharacters()}class gr{encode(e){const t=Math.ceil(e.length/4);return new Array(t).fill(" ")}decode(e){return e.join("")}}class vr{messages=[];tokenizer;maxContext;currentTokenCount=0;constructor(e){this.tokenizer=new gr,this.maxContext=e}getTokenCount(e){return e.content?e.source?.extra?.token_count??this.tokenizer.encode(e.content).length:0}canFit(e){return this.currentTokenCount+this.getTokenCount(e)<=this.maxContext}add(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.push(e),this.currentTokenCount+=t,!0)}addFront(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.unshift(e),this.currentTokenCount+=t,!0)}addMany(e){const t=e.filter(e=>e.content),n=t.map(e=>this.getTokenCount(e)),r=n.reduce((e,t)=>e+t,0);if(this.currentTokenCount+r<=this.maxContext)return this.messages.push(...t),this.currentTokenCount+=r,!0;let i=0;const o=[];for(let e=t.length-1;e>=0;e--){const r=t[e],a=n[e];if(!(this.currentTokenCount+i+a<=this.maxContext))break;o.unshift(r),i+=a}return o.length>0&&(this.messages.push(...o),this.currentTokenCount+=i),o.length===t.length}insert(e,t){if(!t.content)return!0;const n=this.getTokenCount(t);return!(this.currentTokenCount+n>this.maxContext)&&(this.messages.splice(e,0,t),this.currentTokenCount+=n,!0)}getMessages(){return this.messages}}async function yr(e,{targetCharacterId:t,presetName:n,instructName:r,contextName:i,syspromptName:o,maxContext:a,includeNames:s,ignoreCharacterFields:l,ignoreAuthorNote:u,ignoreWorldInfo:c,messageIndexesBetween:d}={}){if(!["textgenerationwebui","openai"].includes(e))throw new Error("Unsupported API");const f=SillyTavern.getContext();let{description:h,personality:p,persona:m,scenario:g,mesExamples:v,system:y,jailbreak:b}=l?{description:"",personality:"",persona:"",scenario:"",mesExamples:"",system:"",jailbreak:""}:f.getCharacterCardFields({chid:t});const O="textgenerationwebui"===e?f.getPresetManager("instruct")?.getCompletionPresetByName(r):void 0,w=!!O?.enabled;let x=te(v,w);let S=[];const k=function(){if("number"==typeof a)return a;if(!a)return ee();if("active"===a||!n)return ee();if("number"==typeof a)return a;let t;if("textgenerationwebui"===e){const e=f.getPresetManager("textgenerationwebui")?.getCompletionPresetByName(n);t=e?.max_length}else{const e=f.getPresetManager("openai")?.getCompletionPresetByName(n);t=e?.openai_max_context}return"number"==typeof t?t:ee()}();if(k<=0)return{result:[],warnings:S};const _=new vr(k),P=f.ToolManager.isToolCallingSupported(),E=d?.start??0,$=d?.end?d.end+1:void 0;let T=-1===E&&0===$?[]:f.chat.slice(E,$).filter(e=>!e.is_system||P&&Array.isArray(e.extra?.tool_invocations));T=await Promise.all(T.map(async(e,t)=>{let n=function(e,t,{characterOverride:n,isMarkdown:r,isPrompt:i,isEdit:o,depth:a}){return(0,Y.getRegexedString)(e,t,{characterOverride:n,isMarkdown:r,isPrompt:i,isEdit:o,depth:a})}(e.mes,e.is_user?Y.regex_placement.USER_INPUT:Y.regex_placement.AI_OUTPUT,{isPrompt:!0,depth:T.length-t-1});return n=await async function(e,t){return await(0,V.appendFileContent)(e,t)}(e,n),e?.extra?.append_title&&e?.extra?.title&&(n=`${n}\n\n${e.extra.title}`),{...e,mes:n,index:t}}));const C=T.map(e=>L.world_info_include_names?`${e.name}: ${e.mes}`:e.mes).reverse(),{worldInfoString:j,worldInfoBefore:N,worldInfoAfter:A,worldInfoExamples:I,worldInfoDepth:M,anBefore:D,anAfter:R}=c?{worldInfoString:"",worldInfoBefore:"",worldInfoAfter:"",worldInfoExamples:[],worldInfoDepth:[],anBefore:[],anAfter:[]}:await f.getWorldInfoPrompt(C,k,!1);for(const se of I){const le=se.content;if(0===le.length)continue;const ue=te(ne(le,z.name1,z.name2),w);se.position===L.wi_anchor_position.before?x.unshift(...ue):x.push(...ue)}function Z(){const e=[];for(let t=T.length-1;t>=0;t--){const n=T[t],r="System"!==n.name||n.is_user?n.is_user?"user":"assistant":"system";e.unshift({role:r,content:s&&"system"!=r?`${n.name}: ${n.mes}`:n.mes,source:n})}_.addMany(e)}if("textgenerationwebui"===e){const ce=[...x];x&&(x=function(e,t,n){return(0,U.formatInstructModeExamples)(e,t,n)}(x,z.name1,z.name2));const de=f.getPresetManager("sysprompt")?.getCompletionPresetByName(o);de&&(y=f.powerUserSettings.prefer_character_prompt&&y?y:ne(de.content,z.name1,z.name2),y=w?(W=f.substituteParams(y,z.name1,z.name2,de.content),q=O,(0,U.formatInstructModeSystemPrompt)(W,q)):y);const fe={description:h,personality:p,persona:f.powerUserSettings.persona_description_position==Q.persona_description_positions.IN_PROMPT?m:"",scenario:g,system:y,char:z.name2,user:z.name1,wiBefore:N,wiAfter:A,loreBefore:N,loreAfter:A,mesExamples:x.join(""),mesExamplesRaw:ce.join("")},he=f.getPresetManager("context")?.getCompletionPresetByName(i);let pe=function(e,{customStoryString:t,customInstructSettings:n}={}){return(0,Q.renderStoryString)(e,{customStoryString:t,customInstructSettings:n})}(fe,{customInstructSettings:O,customStoryString:he?.story_string});pe&&_.add({role:"system",content:pe,ignoreInstruct:!0}),Z()}else{let me=(F=T,(0,G.setOpenAIMessages)(F)),ge=function(e){return(0,G.setOpenAIMessageExamples)(e)}(x);async function ve(){let[e,t]=await function({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:i,worldInfoAfter:o,bias:a,type:s,quietPrompt:l,quietImage:u,extensionPrompts:c,cyclePrompt:d,systemPromptOverride:f,jailbreakPromptOverride:h,personaDescription:p,messages:m,messageExamples:g},v){return(0,G.prepareOpenAIMessages)({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:i,worldInfoAfter:o,bias:a,type:s,quietPrompt:l,quietImage:u,cyclePrompt:d,systemPromptOverride:f,jailbreakPromptOverride:h,personaDescription:p,extensionPrompts:c,messages:m,messageExamples:g},v)}({name2:z.name2,charDescription:h,charPersonality:p,Scenario:g,worldInfoBefore:N,worldInfoAfter:A,extensionPrompts:f.extensionPrompts,bias:"",type:"normal",quietPrompt:void 0,quietImage:void 0,cyclePrompt:"",systemPromptOverride:y,jailbreakPromptOverride:b,personaDescription:m,messages:me,messageExamples:ge},!1);_.addMany(e)}if(!n)return S.push("No preset name provided. Using default preset."),await ve(),{result:_.getMessages(),warnings:S};const ye=f.getPresetManager("openai")?.getCompletionPresetByName(n);if(!ye)return console.warn(`Preset not found: ${n}. Using current preset.`),S.push(`Preset not found: ${n}. Using current preset.`),ve(),{result:_.getMessages(),warnings:S};let be=ye.prompt_order?.find(e=>e.character_id===z.this_chid);if(!be&&ye.prompt_order&&ye.prompt_order.length>0&&(be=ye.prompt_order[0]),!be)return console.warn(`No prompt order found for preset: ${n}. Using current preset.`),S.push(`No prompt order found for preset: ${n}. Using current preset.`),ve(),{result:_.getMessages(),warnings:S};const Oe=g&&ye.scenario_format?f.substituteParams(ye.scenario_format):"",we=p&&ye.personality_format?f.substituteParams(ye.personality_format):"",xe=f.substituteParams(ye.group_nudge_prompt),Se=ye.impersonation_prompt?f.substituteParams(ye.impersonation_prompt):"",ke=[];c||ke.push({role:"system",content:ie(N,{wiFormat:ye.wi_format}),identifier:"worldInfoBefore"},{role:"system",content:ie(A,{wiFormat:ye.wi_format}),identifier:"worldInfoAfter"}),l||ke.push({role:"system",content:h,identifier:"charDescription"},{role:"system",content:we,identifier:"charPersonality"},{role:"system",content:Oe,identifier:"scenario"}),ke.push({role:"system",content:Se,identifier:"impersonate"},{role:"system",content:xe,identifier:"groupNudge"});const _e=f.extensionPrompts["1_memory"];_e&&_e.value&&ke.push({role:re(_e.role),content:_e.value,identifier:"summary",position:oe(_e.position)});const Pe=f.extensionPrompts["2_floating_prompt"];!u&&Pe&&Pe.value&&ke.push({role:re(Pe.role),content:Pe.value,identifier:"authorsNote",position:oe(Pe.position)});const Ee=f.extensionPrompts["3_vectors"];Ee&&Ee.value&&ke.push({role:"system",content:Ee.value,identifier:"vectorsMemory",position:oe(Ee.position)});const $e=f.extensionPrompts["4_vectors_data_bank"];$e&&$e.value&&ke.push({role:re($e.role),content:$e.value,identifier:"vectorsDataBank",position:oe($e.position)});const Te=f.extensionPrompts.chromadb;function Ce(e){const t=ke.find(t=>t.identifier===e);if(t)return t;const n=ye.prompts.find(t=>t.identifier===e);return n||void 0}Te&&Te.value&&ke.push({role:"system",content:Te.value,identifier:"smartContext",position:oe(Te.position)}),!l&&f.powerUserSettings.persona_description&&f.powerUserSettings.persona_description_position===Q.persona_description_positions.IN_PROMPT&&ke.push({role:"system",content:f.powerUserSettings.persona_description,identifier:"personaDescription"}),be.order.forEach(e=>{if(!e.enabled)return;const t=Ce(e.identifier);t&&t.content?_.add({role:t.role??"system",content:f.substituteParams(t.content)}):"chatHistory"===e.identifier&&Z()})}var F,W,q;const H=["1_memory","2_floating_prompt","3_vectors","4_vectors_data_bank","chromadb","PERSONA_DESCRIPTION","QUIET_PROMPT","DEPTH_PROMPT"];for(const je in f.extensionPrompts)if(Object.hasOwn(f.extensionPrompts,je)){const Ne=f.extensionPrompts[je];if(H.includes(je))continue;if(!f.extensionPrompts[je].value)continue;if(![z.extension_prompt_types.BEFORE_PROMPT,z.extension_prompt_types.IN_PROMPT].includes(Ne.position))continue;if("function"==typeof Ne.filter&&!await Ne.filter())continue;const Ae={role:re(Ne.role)??"system",content:Ne.value};if(Ne.position===z.extension_prompt_types.BEFORE_PROMPT)_.insert(Ne.depth,Ae);else if(Ne.position===z.extension_prompt_types.IN_PROMPT){const Ie=_.getMessages();_.insert(Ie.length-Ne.depth,Ae)}}for(const Me of M){const De=_.getMessages();_.insert(De.length-Me.depth,{role:re(Me.role),content:Me.entries.join("\n")})}if(!l){const Re=(K=X.selected_group,J=Number(z.this_chid),(0,X.getGroupDepthPrompts)(K,J));if(X.selected_group&&Array.isArray(Re)&&Re.length>0)Re.filter(e=>e.text).forEach((e,t)=>{const n=_.getMessages();_.insert(n.length-e.depth,{role:e.role,content:e.text})});else{const Qe=ne(f.characters[z.this_chid]?.data?.extensions?.depth_prompt?.prompt?.trim(),z.name1,z.name2)||"";if(Qe){const ze=z.depth_prompt_depth_default,Le=f.characters[z.this_chid]?.data?.extensions?.depth_prompt?.role??z.depth_prompt_role_default,Ze=_.getMessages();_.insert(Ze.length-ze,{role:re(Le),content:Qe})}}}var K,J;let ae=-1;if(!u){const Fe={prompt:z.chat_metadata[B.metadata_keys.prompt],interval:z.chat_metadata[B.metadata_keys.interval],position:z.chat_metadata[B.metadata_keys.position],depth:z.chat_metadata[B.metadata_keys.depth],role:z.chat_metadata[B.metadata_keys.role]};if(Fe.prompt){Fe.prompt=ne(Fe.prompt,z.name1,z.name2);const Ue={role:re(Fe.role),content:Fe.prompt};switch(Fe.position){case z.extension_prompt_types.IN_PROMPT:_.insert(1,Ue),ae=1;break;case z.extension_prompt_types.IN_CHAT:ae=_.getMessages().length-Fe.depth,_.insert(ae,Ue);break;case z.extension_prompt_types.BEFORE_PROMPT:_.addFront(Ue),ae=0}}}return ae>=0&&(D.length>0&&(_.insert(ae,{role:"system",content:D.join("\n")}),ae++),R.length>0&&_.insert(ae+1,{role:"system",content:R.join("\n")})),{result:_.getMessages(),warnings:S}}async function br(e,t,n){function r(t){return e.includes("all")||e.includes(t)}const i=SillyTavern.getContext();let o={};const a=t?L.selected_world_info:L.world_names;if(r("global")&&a?.length)for(const e of a){const t=await wr(e);t&&(o[e]||(o[e]=[]),Object.values(t).forEach(t=>{o[e].push(t)}))}if(r("chat")){const e=i.chatMetadata[L.METADATA_KEY];if(e&&!o[e]){o[e]=[];const t=await i.loadWorldInfo(e);t&&Object.values(t.entries).forEach(t=>{o[e].push(t)})}}if(r("character")&&n){const e=i.characters[n];let t=new Set;const r=e?.data?.extensions?.world;r&&t.add(r);const a=function(e,{manualAvatarKey:t}={}){return(0,W.getCharaFilename)(e,{manualAvatarKey:t})}(n),s=L.world_info.charLore?.find(e=>e.name===a);s&&(t=new Set([...t,...s.extraBooks]));for(const e of t){const t=await i.loadWorldInfo(e);t&&!o[e]&&(o[e]=[],Object.values(t.entries).forEach(t=>{o[e].push(t)}))}}if(r("persona")){const e=i.powerUserSettings.persona_description_lorebook;if(e&&!o[e]){o[e]=[];const t=await i.loadWorldInfo(e);t&&Object.values(t.entries).forEach(t=>{o[e].push(t)})}}return o}async function Or({entry:e,selectedWorldName:t,skipSave:n=!1,skipReload:r=!1,operation:i="auto"}){const o=SillyTavern.getContext(),a=await o.loadWorldInfo(t);if(!a)throw new Error("Failed to load world info");const s=Object.values(a.entries),l=s.length>0?s[s.length-1]:void 0;let u;if("update"===i||"auto"===i){const t=Object.values(a.entries).find(t=>t.uid===e.uid);if(t)("auto"===i||"update"===i)&&(u=t);else if("update"===i)throw new Error("Entry not found for update operation")}const c=u?"update":"add";if(!u){if(u=function(e,t){return(0,L.createWorldInfoEntry)(e,t)}(t,a),!u)throw new Error("Failed to create entry");if(l){const e=u.uid;Object.assign(u,l),u.uid=e}}return u.key=e.key,u.content=e.content,u.comment=e.comment,n||await o.saveWorldInfo(t,a),r||o.reloadWorldInfoEditor(t,!0),{entry:u,operation:c}}async function wr(e){const t=await SillyTavern.getContext().loadWorldInfo(e);return t?Object.values(t.entries):null}function xr(e){return function(e){if(Array.isArray(e))return Sr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Sr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kr,_r,Pr,Er,$r="1.0",Tr=$r,Cr={};function jr(e,t,n){var r=t||$r;if(r===n)return e;var i=function(e,t){if(e===t)return[];for(var n=new Set,r=[{version:e,path:[e]}];r.length>0;){var i=r.shift(),o=i.version,a=i.path;if(o===t)return a;if(!n.has(o)){n.add(o);var s=Cr[o];if(s)for(var l in s)n.has(l)||r.push({version:l,path:[].concat(xr(a),[l])})}}return null}(r,n);if(!i)return console.warn("[Flowchart] No migration path found from ".concat(r," to ").concat(n,". Flow may not work correctly.")),e;for(var o=e,a=0;a<i.length-1;a++){var s,l=i[a],u=i[a+1],c=null===(s=Cr[l])||void 0===s?void 0:s[u];if(!c){console.warn("[Flowchart] No migration function found for ".concat(l," -> ").concat(u));break}try{o=c(o),console.log("[Flowchart] Migrated flow from ".concat(l," to ").concat(u))}catch(e){console.error("[Flowchart] Failed to migrate flow from ".concat(l," to ").concat(u,":"),e);break}}return o}function Nr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Ar(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Ar(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Ar(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Ar(d,"constructor",u),Ar(u,"constructor",l),l.displayName="GeneratorFunction",Ar(u,i,"GeneratorFunction"),Ar(d),Ar(d,i,"Generator"),Ar(d,r,function(){return this}),Ar(d,"toString",function(){return"[object Generator]"}),(Nr=function(){return{w:o,m:f}})()}function Ar(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Ar=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Ar(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Ar(e,t,n,r)}function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Mr(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Dr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ir(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ir(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_r=$r,Pr=function(e){return e},Cr[kr=$r]||(Cr[kr]={}),Cr[kr][_r]=Pr,function(e){e.NATIVE="native",e.JSON="json",e.XML="xml"}(Er||(Er={}));var Rr="json";var Qr="default",zr={version:"0.3.0",formatVersion:"F_1.0",enabled:!0,prompts:Dr(Dr({},Rr,"You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid JSON object that strictly adheres to the provided JSON schema.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire JSON object in a markdown code block (```json\\n...\\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The JSON object inside the code block MUST be valid and conform to the schema.\n\n**TASK:**\n{{instructions}}\n\n**JSON SCHEMA TO FOLLOW:**\n```json\n{{schema}}\n```\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```json\n{{example_response}}\n```"),"xml","You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid XML structure that strictly adheres to the provided example.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire XML object in a markdown code block (```xml\\n...\\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The XML object inside the code block MUST be valid.\n\n**TASK:**\n{{instructions}}\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```xml\n<root>\n{{example_response}}\n</root>\n```"),activeFlow:Qr,flows:[{id:Qr,name:"default",flow:{nodes:[],edges:[]},flowVersion:Tr,allowDangerousExecution:!1,enabled:!0}],isPaletteCollapsed:!1,showExecutionNotifications:!0},Lr=new class{settingsKey;defaultSettings;constructor(e,t){this.settingsKey=e,this.defaultSettings=t}async initializeSettings(e={}){const{strategy:t="recursive"}=e,n=this.defaultSettings.version,r=this.defaultSettings.formatVersion,i=SillyTavern.getContext().extensionSettings[this.settingsKey],o={version:{changed:!1,new:n??""},formatVersion:{changed:!1,new:r??""},oldSettings:null,newSettings:this.defaultSettings};if(!i)return SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings(),o;const a={...o,oldSettings:structuredClone(i),version:{changed:!1,old:i.version,new:i.version},formatVersion:{changed:!1,old:i.formatVersion,new:i.formatVersion}};if("recursive"===t){function s(e,t){let n=!1;for(const r of Object.keys(t))void 0===e[r]?(e[r]=t[r],n=!0):"object"==typeof t[r]&&null!==t[r]&&(e[r]=e[r]||{},s(e[r],t[r])&&(n=!0));return n}n&&i.version!==n&&(a.version.changed=!0,a.version.new=n,i.version=n),r&&"*"!==r&&i.formatVersion!==r&&(a.formatVersion.changed=!0,a.formatVersion.new=r,i.formatVersion=r),(s(i,this.defaultSettings)||a.version.changed||a.formatVersion.changed)&&this.saveSettings()}else if(Array.isArray(t)){n&&!i.version&&(i.version=n,a.version.changed=!0,a.version.new=n),r&&!i.formatVersion&&(i.formatVersion=r,a.formatVersion.changed=!0,a.formatVersion.new=r);let l=structuredClone(i),u=i.formatVersion;try{let c;do{c=!1;let d=t.find(e=>e.from===u);if(d&&d.to>u)l=await d.action(l),u=d.to,l.formatVersion=d.to,c=!0;else for(const f of t)if("*"===f.from&&f.to>u&&u!==f.to){l=await f.action(l),u=f.to,l.formatVersion=f.to,c=!0;break}}while(c);if(u!==i.formatVersion){a.formatVersion.changed=!0,a.formatVersion.new=u;const h=this.defaultSettings.version;h&&(l.version=h)}if(a.formatVersion.changed){for(const p of Object.keys(i))delete i[p];Object.assign(i,l),this.saveSettings()}}catch(m){throw console.error("Failed to apply version changes:",m),new Error(`Version migration failed: ${m instanceof Error?m.message:m}`,{cause:m})}}return a.newSettings=i,a}getSettings(){return SillyTavern.getContext().extensionSettings[this.settingsKey]}updateSetting(e,t){SillyTavern.getContext().extensionSettings[this.settingsKey][e]=t,this.saveSettings()}saveSettings(){SillyTavern.getContext().saveSettingsDebounced()}resetSettings(){SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings()}}("flowchart",zr);function Zr(e,t,n){return Fr.apply(this,arguments)}function Fr(){var e;return e=Nr().m(function e(t,n,r){return Nr().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,V.hideChatMessageRange)(t,n,r);case 1:return e.a(2)}},e)}),Fr=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Mr(o,r,i,a,s,"next",e)}function s(e){Mr(o,r,i,a,s,"throw",e)}a(void 0)})},Fr.apply(this,arguments)}function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Gr(){var e=Ur((0,T.useState)(0),2)[1];return(0,T.useCallback)(function(){return e(function(e){return e+1})},[])}function Br(e,t,n){var r=Lr.getSettings();("info"!==e||"execution"!==n||r.showExecutionNotifications)&&J(e,t)}function Xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Wr(e,t){var n=Xr((0,T.useState)(e),2),r=n[0],i=n[1];return(0,T.useEffect)(function(){var n=setTimeout(function(){i(e)},t);return function(){clearTimeout(n)}},[e,t]),r}function qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Kr=[Rr,"xml"],Jr=function(){var e=Gr(),t=Lr.getSettings(),n=Wr(t.prompts,500);(0,T.useEffect)(function(){Lr.saveSettings()},[n]);return(0,$.jsxs)("div",{className:"flowchart-popup-section",children:[(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,$.jsx)("h3",{children:"Prompt Templates"}),(0,$.jsx)(j,{onClick:function(){for(var n="new_prompt",r=1;t.prompts[n];)n="new_prompt_".concat(r++);t.prompts[n]="Your new prompt template here. Use {{handlebars}} for variables.",e()},children:"Add New Prompt"})]}),Object.entries(t.prompts).map(function(n){var r=qr(n,2),i=r[0],o=r[1],a=Kr.includes(i);return(0,$.jsxs)("div",{className:"setting-row",style:{border:"1px solid #555",padding:"10px",borderRadius:"4px"},children:[(0,$.jsxs)("div",{className:"title_restorable",children:[a?(0,$.jsx)("label",{style:{textTransform:"capitalize"},children:i.replace(/([A-Z])/g," $1")}):(0,$.jsx)(N,{defaultValue:i,onBlur:function(n){n.target.value!==i&&function(n,r){if(!r||Kr.includes(r)||t.prompts[r])return Br("error","Invalid or duplicate prompt name: ".concat(r),"ui_action"),void e();var i=t.prompts[n];delete t.prompts[n],t.prompts[r]=i,e()}(i,n.target.value)},title:"Rename prompt and press Enter or click away"}),(0,$.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[a&&(0,$.jsx)("button",{className:"fa-solid fa-undo",title:"Restore ".concat(i," to default"),onClick:function(){return n=i,t.prompts[n]=zr.prompts[n],void e();var n}}),!a&&(0,$.jsx)(j,{color:"danger",onClick:function(){return n=i,void(Kr.includes(n)||(delete t.prompts[n],e()));var n},children:"Delete"})]})]}),(0,$.jsx)(I,{value:o,onChange:function(n){return function(n,r){t.prompts[n]=r,e()}(i,n.target.value)},rows:8})]},i)})]})};function ei(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=ei(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ti={value:()=>{}};function ni(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new ri(r)}function ri(e){this._=e}function ii(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function oi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ti,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ri.prototype=ni.prototype={constructor:ri,on:function(e,t){var n,r=this._,i=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=oi(r[n],e.name,t);else if(null==t)for(n in r)r[n]=oi(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=ii(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ri(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const ai=ni;function si(){}function li(e){return null==e?si:function(){return this.querySelector(e)}}function ui(){return[]}function ci(e){return null==e?ui:function(){return this.querySelectorAll(e)}}function di(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function fi(e){return function(){return this.matches(e)}}function hi(e){return function(t){return t.matches(e)}}var pi=Array.prototype.find;function mi(){return this.firstElementChild}var gi=Array.prototype.filter;function vi(){return Array.from(this.children)}function yi(e){return new Array(e.length)}function bi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Oi(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new bi(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function wi(e,t,n,r,i,o,a){var s,l,u,c=new Map,d=t.length,f=o.length,h=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(h[s]=u=a.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<f;++s)u=a.call(e,o[s],s,o)+"",(l=c.get(u))?(r[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new bi(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(h[s])===l&&(i[s]=l)}function xi(e){return e.__data__}function Si(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function ki(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}bi.prototype={constructor:bi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var _i="http://www.w3.org/1999/xhtml";const Pi={svg:"http://www.w3.org/2000/svg",xhtml:_i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ei(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Pi.hasOwnProperty(t)?{space:Pi[t],local:e}:e}function $i(e){return function(){this.removeAttribute(e)}}function Ti(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ci(e,t){return function(){this.setAttribute(e,t)}}function ji(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ni(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ai(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ii(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Mi(e){return function(){this.style.removeProperty(e)}}function Di(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ri(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Qi(e,t){return e.style.getPropertyValue(t)||Ii(e).getComputedStyle(e,null).getPropertyValue(t)}function zi(e){return function(){delete this[e]}}function Li(e,t){return function(){this[e]=t}}function Zi(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Fi(e){return e.trim().split(/^|\s+/)}function Ui(e){return e.classList||new Vi(e)}function Vi(e){this._node=e,this._names=Fi(e.getAttribute("class")||"")}function Gi(e,t){for(var n=Ui(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Bi(e,t){for(var n=Ui(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Xi(e){return function(){Gi(this,e)}}function Yi(e){return function(){Bi(this,e)}}function Wi(e,t){return function(){(t.apply(this,arguments)?Gi:Bi)(this,e)}}function qi(){this.textContent=""}function Hi(e){return function(){this.textContent=e}}function Ki(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Ji(){this.innerHTML=""}function eo(e){return function(){this.innerHTML=e}}function to(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function no(){this.nextSibling&&this.parentNode.appendChild(this)}function ro(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function io(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_i&&t.documentElement.namespaceURI===_i?t.createElement(e):t.createElementNS(n,e)}}function oo(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ao(e){var t=Ei(e);return(t.local?oo:io)(t)}function so(){return null}function lo(){var e=this.parentNode;e&&e.removeChild(this)}function uo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function co(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fo(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function ho(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function po(e,t,n){var r=Ii(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function mo(e,t){return function(){return po(this,e,t)}}function go(e,t){return function(){return po(this,e,t.apply(this,arguments))}}Vi.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var vo=[null];function yo(e,t){this._groups=e,this._parents=t}function bo(){return new yo([[document.documentElement]],vo)}yo.prototype=bo.prototype={constructor:yo,select:function(e){"function"!=typeof e&&(e=li(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new yo(r,this._parents)},selectAll:function(e){e="function"==typeof e?di(e):ci(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new yo(r,i)},selectChild:function(e){return this.select(null==e?mi:function(e){return function(){return pi.call(this.children,e)}}("function"==typeof e?e:hi(e)))},selectChildren:function(e){return this.selectAll(null==e?vi:function(e){return function(){return gi.call(this.children,e)}}("function"==typeof e?e:hi(e)))},filter:function(e){"function"!=typeof e&&(e=fi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new yo(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,xi);var n=t?wi:Oi,r=this._parents,i=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=i[u],f=d.length,h=Si(e.call(c,c&&c.__data__,u,r)),p=h.length,m=s[u]=new Array(p),g=a[u]=new Array(p);n(c,d,m,g,l[u]=new Array(f),h,t);for(var v,y,b=0,O=0;b<p;++b)if(v=m[b]){for(b>=O&&(O=b+1);!(y=g[O])&&++O<p;);v._next=y||null}}return(a=new yo(a,r))._enter=s,a._exit=l,a},enter:function(){return new yo(this._enter||this._groups.map(yi),this._parents)},exit:function(){return new yo(this._exit||this._groups.map(yi),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u,c=n[l],d=r[l],f=c.length,h=s[l]=new Array(f),p=0;p<f;++p)(u=c[p]||d[p])&&(h[p]=u);for(;l<i;++l)s[l]=n[l];return new yo(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ki);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new yo(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Ei(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Ti:$i:"function"==typeof t?n.local?Ai:Ni:n.local?ji:Ci)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Mi:"function"==typeof t?Ri:Di)(e,t,null==n?"":n)):Qi(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?zi:"function"==typeof t?Zi:Li)(e,t)):this.node()[e]},classed:function(e,t){var n=Fi(e+"");if(arguments.length<2){for(var r=Ui(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Wi:t?Xi:Yi)(n,t))},text:function(e){return arguments.length?this.each(null==e?qi:("function"==typeof e?Ki:Hi)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Ji:("function"==typeof e?to:eo)(e)):this.node().innerHTML},raise:function(){return this.each(no)},lower:function(){return this.each(ro)},append:function(e){var t="function"==typeof e?e:ao(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:ao(e),r=null==t?so:"function"==typeof t?t:li(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(lo)},clone:function(e){return this.select(e?co:uo)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?ho:fo,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?go:mo)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Oo=bo;function wo(e){return"string"==typeof e?new yo([[document.querySelector(e)]],[document.documentElement]):new yo([[e]],vo)}function xo(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const So={passive:!1},ko={capture:!0,passive:!1};function _o(e){e.stopImmediatePropagation()}function Po(e){e.preventDefault(),e.stopImmediatePropagation()}function Eo(e){var t=e.document.documentElement,n=wo(e).on("dragstart.drag",Po,ko);"onselectstart"in t?n.on("selectstart.drag",Po,ko):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $o(e,t){var n=e.document.documentElement,r=wo(e).on("dragstart.drag",null);t&&(r.on("click.drag",Po,ko),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const To=e=>()=>e;function Co(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function jo(e){return!e.ctrlKey&&!e.button}function No(){return this.parentNode}function Ao(e,t){return null==t?{x:e.x,y:e.y}:t}function Io(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mo(){var e,t,n,r,i=jo,o=No,a=Ao,s=Io,l={},u=ai("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,So).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,s){if(!r&&i.call(this,a,s)){var l=b(this,o.call(this,a,s),a,s,"mouse");l&&(wo(a.view).on("mousemove.drag",p,ko).on("mouseup.drag",m,ko),Eo(a.view),_o(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function p(r){if(Po(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>d}l.mouse("drag",r)}function m(e){wo(e.view).on("mousemove.drag mouseup.drag",null),$o(e.view,n),Po(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=b(this,s,e,t,a[n].identifier,a[n]))&&(_o(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(Po(e),n("drag",e,r[t]))}function y(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<o;++t)(n=l[i[t].identifier])&&(_o(e),n("end",e,i[t]))}function b(e,t,n,r,i,o){var s,d,h,p=u.copy(),m=xo(o||n,t);if(null!=(h=a.call(e,new Co("beforestart",{sourceEvent:n,target:f,identifier:i,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=h.x-m[0]||0,d=h.y-m[1]||0,function n(o,a,u){var g,v=m;switch(o){case"start":l[i]=n,g=c++;break;case"end":delete l[i],--c;case"drag":m=xo(u||a,t),g=c}p.call(o,e,new Co(o,{sourceEvent:a,subject:h,target:f,identifier:i,active:g,x:m[0]+s,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(i="function"==typeof e?e:To(!!e),f):i},f.container=function(e){return arguments.length?(o="function"==typeof e?e:To(e),f):o},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:To(e),f):a},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:To(!!e),f):s},f.on=function(){var e=u.on.apply(u,arguments);return e===u?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}Co.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Do(e){return((e=Math.exp(e))+1/e)/2}const Ro=function e(t,n,r){function i(e,i){var o,a,s=e[0],l=e[1],u=e[2],c=i[0],d=i[1],f=i[2],h=c-s,p=d-l,m=h*h+p*p;if(m<1e-12)a=Math.log(f/u)/t,o=function(e){return[s+e*h,l+e*p,u*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),v=(f*f-u*u+r*m)/(2*u*n*g),y=(f*f-u*u-r*m)/(2*f*n*g),b=Math.log(Math.sqrt(v*v+1)-v),O=Math.log(Math.sqrt(y*y+1)-y);a=(O-b)/t,o=function(e){var r=e*a,i=Do(b),o=u/(n*g)*(i*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+o*h,l+o*p,u*i/Do(t*r+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);var Qo,zo,Lo=0,Zo=0,Fo=0,Uo=0,Vo=0,Go=0,Bo="object"==typeof performance&&performance.now?performance:Date,Xo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yo(){return Vo||(Xo(Wo),Vo=Bo.now()+Go)}function Wo(){Vo=0}function qo(){this._call=this._time=this._next=null}function Ho(e,t,n){var r=new qo;return r.restart(e,t,n),r}function Ko(){Vo=(Uo=Bo.now())+Go,Lo=Zo=0;try{!function(){Yo(),++Lo;for(var e,t=Qo;t;)(e=Vo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Lo}()}finally{Lo=0,function(){var e,t,n=Qo,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Qo=t);zo=e,ea(r)}(),Vo=0}}function Jo(){var e=Bo.now(),t=e-Uo;t>1e3&&(Go-=t,Uo=e)}function ea(e){Lo||(Zo&&(Zo=clearTimeout(Zo)),e-Vo>24?(e<1/0&&(Zo=setTimeout(Ko,e-Bo.now()-Go)),Fo&&(Fo=clearInterval(Fo))):(Fo||(Uo=Bo.now(),Fo=setInterval(Jo,1e3)),Lo=1,Xo(Ko)))}function ta(e,t,n){var r=new qo;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}qo.prototype=Ho.prototype={constructor:qo,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Yo():+n)+(null==t?0:+t),this._next||zo===this||(zo?zo._next=this:Qo=this,zo=this),this._call=e,this._time=n,ea()},stop:function(){this._call&&(this._call=null,this._time=1/0,ea())}};var na=ai("start","end","cancel","interrupt"),ra=[];function ia(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var u,c,d,f;if(1!==n.state)return l();for(u in i)if((f=i[u]).name===n.name){if(3===f.state)return ta(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[u])}if(ta(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Ho(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:na,tween:ra,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function oa(e,t){var n=sa(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function aa(e,t){var n=sa(e,t);if(n.state>3)throw new Error("too late; already running");return n}function sa(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function la(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function ua(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ca,da=180/Math.PI,fa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ha(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*da,skewX:Math.atan(l)*da,scaleX:a,scaleY:s}}function pa(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:ua(e,i)},{i:l-2,x:ua(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ua(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ua(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ua(e,n)},{i:s-2,x:ua(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var ma=pa(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fa:ha(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),ga=pa(function(e){return null==e?fa:(ca||(ca=document.createElementNS("http://www.w3.org/2000/svg","g")),ca.setAttribute("transform",e),(e=ca.transform.baseVal.consolidate())?ha((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):fa)},", ",")",")");function va(e,t){var n,r;return function(){var i=aa(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function ya(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=aa(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function ba(e,t,n){var r=e._id;return e.each(function(){var e=aa(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return sa(e,r).value[t]}}function Oa(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xa(){}var Sa=.7,ka=1/Sa,_a="\\s*([+-]?\\d+)\\s*",Pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$a=/^#([0-9a-f]{3,8})$/,Ta=new RegExp(`^rgb\\(${_a},${_a},${_a}\\)$`),Ca=new RegExp(`^rgb\\(${Ea},${Ea},${Ea}\\)$`),ja=new RegExp(`^rgba\\(${_a},${_a},${_a},${Pa}\\)$`),Na=new RegExp(`^rgba\\(${Ea},${Ea},${Ea},${Pa}\\)$`),Aa=new RegExp(`^hsl\\(${Pa},${Ea},${Ea}\\)$`),Ia=new RegExp(`^hsla\\(${Pa},${Ea},${Ea},${Pa}\\)$`),Ma={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Da(){return this.rgb().formatHex()}function Ra(){return this.rgb().formatRgb()}function Qa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$a.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?za(t):3===n?new Fa(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?La(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?La(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ta.exec(e))?new Fa(t[1],t[2],t[3],1):(t=Ca.exec(e))?new Fa(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ja.exec(e))?La(t[1],t[2],t[3],t[4]):(t=Na.exec(e))?La(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Aa.exec(e))?Ya(t[1],t[2]/100,t[3]/100,1):(t=Ia.exec(e))?Ya(t[1],t[2]/100,t[3]/100,t[4]):Ma.hasOwnProperty(e)?za(Ma[e]):"transparent"===e?new Fa(NaN,NaN,NaN,0):null}function za(e){return new Fa(e>>16&255,e>>8&255,255&e,1)}function La(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fa(e,t,n,r)}function Za(e,t,n,r){return 1===arguments.length?((i=e)instanceof xa||(i=Qa(i)),i?new Fa((i=i.rgb()).r,i.g,i.b,i.opacity):new Fa):new Fa(e,t,n,null==r?1:r);var i}function Fa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ua(){return`#${Xa(this.r)}${Xa(this.g)}${Xa(this.b)}`}function Va(){const e=Ga(this.opacity);return`${1===e?"rgb(":"rgba("}${Ba(this.r)}, ${Ba(this.g)}, ${Ba(this.b)}${1===e?")":`, ${e})`}`}function Ga(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ba(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xa(e){return((e=Ba(e))<16?"0":"")+e.toString(16)}function Ya(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qa(e,t,n,r)}function Wa(e){if(e instanceof qa)return new qa(e.h,e.s,e.l,e.opacity);if(e instanceof xa||(e=Qa(e)),!e)return new qa;if(e instanceof qa)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new qa(a,s,l,e.opacity)}function qa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ha(e){return(e=(e||0)%360)<0?e+360:e}function Ka(e){return Math.max(0,Math.min(1,e||0))}function Ja(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function es(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Oa(xa,Qa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Da,formatHex:Da,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Wa(this).formatHsl()},formatRgb:Ra,toString:Ra}),Oa(Fa,Za,wa(xa,{brighter(e){return e=null==e?ka:Math.pow(ka,e),new Fa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Sa:Math.pow(Sa,e),new Fa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fa(Ba(this.r),Ba(this.g),Ba(this.b),Ga(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ua,formatHex:Ua,formatHex8:function(){return`#${Xa(this.r)}${Xa(this.g)}${Xa(this.b)}${Xa(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Va,toString:Va})),Oa(qa,function(e,t,n,r){return 1===arguments.length?Wa(e):new qa(e,t,n,null==r?1:r)},wa(xa,{brighter(e){return e=null==e?ka:Math.pow(ka,e),new qa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Sa:Math.pow(Sa,e),new qa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fa(Ja(e>=240?e-240:e+120,i,r),Ja(e,i,r),Ja(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qa(Ha(this.h),Ka(this.s),Ka(this.l),Ga(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ga(this.opacity);return`${1===e?"hsl(":"hsla("}${Ha(this.h)}, ${100*Ka(this.s)}%, ${100*Ka(this.l)}%${1===e?")":`, ${e})`}`}}));const ts=e=>()=>e;function ns(e,t){return function(n){return e+n*t}}function rs(e){return 1===(e=+e)?is:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ts(isNaN(t)?n:t)}}function is(e,t){var n=t-e;return n?ns(e,n):ts(isNaN(e)?t:e)}const os=function e(t){var n=rs(t);function r(e,t){var r=n((e=Za(e)).r,(t=Za(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=is(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function as(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Za(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}as(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return es((n-r/t)*t,a,i,o,s)}}),as(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return es((n-r/t)*t,i,o,a,s)}});var ss=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ls=new RegExp(ss.source,"g");function us(e,t){var n,r,i,o=ss.lastIndex=ls.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=ss.exec(e))&&(r=ls.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ua(n,r)})),o=ls.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function cs(e,t){var n;return("number"==typeof t?ua:t instanceof Qa?os:(n=Qa(t))?(t=n,os):us)(e,t)}function ds(e){return function(){this.removeAttribute(e)}}function fs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hs(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function ps(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function ms(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function gs(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function vs(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function ys(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function bs(e,t){return function(){oa(this,e).delay=+t.apply(this,arguments)}}function Os(e,t){return t=+t,function(){oa(this,e).delay=t}}function ws(e,t){return function(){aa(this,e).duration=+t.apply(this,arguments)}}function xs(e,t){return t=+t,function(){aa(this,e).duration=t}}var Ss=Oo.prototype.constructor;function ks(e){return function(){this.style.removeProperty(e)}}var _s=0;function Ps(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Es(){return++_s}var $s=Oo.prototype;Ps.prototype=function(e){return Oo().transition(e)}.prototype={constructor:Ps,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=li(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],c=u.length,d=o[a]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=e.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),d[f]=l,ia(d[f],t,n,f,d,sa(s,n)));return new Ps(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ci(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var f,h=e.call(l,l.__data__,d,u),p=sa(l,n),m=0,g=h.length;m<g;++m)(f=h[m])&&ia(f,t,n,m,h,p);o.push(h),a.push(l)}return new Ps(o,a,t,n)},selectChild:$s.selectChild,selectChildren:$s.selectChildren,filter:function(e){"function"!=typeof e&&(e=fi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new Ps(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,f=a[s]=new Array(d),h=0;h<d;++h)(l=u[h]||c[h])&&(f[h]=l);for(;s<r;++s)a[s]=t[s];return new Ps(a,this._parents,this._name,this._id)},selection:function(){return new Ss(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Es(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=sa(a,t);ia(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ps(r,this._parents,e,n)},call:$s.call,nodes:$s.nodes,node:$s.node,size:$s.size,empty:$s.empty,each:$s.each,on:function(e,t){var n=this._id;return arguments.length<2?sa(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?oa:aa;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=Ei(e),r="transform"===n?ga:cs;return this.attrTween(e,"function"==typeof t?(n.local?gs:ms)(n,r,ba(this,"attr."+e,t)):null==t?(n.local?fs:ds)(n):(n.local?ps:hs)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Ei(e);return this.tween(n,(r.local?vs:ys)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?ma:cs;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Qi(this,e),a=(this.style.removeProperty(e),Qi(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,ks(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Qi(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Qi(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,ba(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=aa(this,e),u=l.on,c=null==l.value[a]?o||(o=ks(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Qi(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ba(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=sa(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?va:ya)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?bs:Os)(t,e)):sa(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ws:xs)(t,e)):sa(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){aa(this,e).ease=t}}(t,e)):sa(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;aa(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each(function(){var n=aa(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===i&&o()})},[Symbol.iterator]:$s[Symbol.iterator]};var Ts={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Cs(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Oo.prototype.interrupt=function(e){return this.each(function(){la(this,e)})},Oo.prototype.transition=function(e){var t,n;e instanceof Ps?(t=e._id,e=e._name):(t=Es(),(n=Ts).time=Yo(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&ia(a,e,t,u,s,n||Cs(a,t));return new Ps(r,this._parents,e,t)};const js=e=>()=>e;function Ns(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function As(e,t,n){this.k=e,this.x=t,this.y=n}As.prototype={constructor:As,scale:function(e){return 1===e?this:new As(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new As(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Is=new As(1,0,0);function Ms(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Is;return e.__zoom}function Ds(e){e.stopImmediatePropagation()}function Rs(e){e.preventDefault(),e.stopImmediatePropagation()}function Qs(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function zs(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Ls(){return this.__zoom||Is}function Zs(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fs(){return navigator.maxTouchPoints||"ontouchstart"in this}function Us(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Vs(){var e,t,n,r=Qs,i=zs,o=Us,a=Zs,s=Fs,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Ro,f=ai("start","zoom","end"),h=0,p=10;function m(e){e.property("__zoom",Ls).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",_).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new As(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new As(e.k,r,i)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",function(){O(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,o=arguments,a=O(e,o).event(r),s=i.apply(e,o),l=null==n?y(s):"function"==typeof n?n.apply(e,o):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,o):t,h=d(c.invert(l).concat(u/c.k),f.invert(l).concat(u/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=u/t[2];e=new As(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}})}function O(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function x(e,...t){if(r.apply(this,arguments)){var n=O(this,t).event(e),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,a.apply(this,arguments)))),c=xo(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],la(this),n.start()}Rs(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",o(v(g(i,s),n.mouse[0],n.mouse[1]),n.extent,u))}}function S(e,...t){if(!n&&r.apply(this,arguments)){var i=e.currentTarget,a=O(this,t,!0).event(e),s=wo(e.view).on("mousemove.zoom",function(e){if(Rs(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>h}a.event(e).zoom("mouse",o(v(a.that.__zoom,a.mouse[0]=xo(e,i),a.mouse[1]),a.extent,u))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),$o(e.view,a.moved),Rs(e),a.event(e).end()},!0),l=xo(e,i),c=e.clientX,d=e.clientY;Eo(e.view),Ds(e),a.mouse=[l,this.__zoom.invert(l)],la(this),a.start()}}function k(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,a=xo(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),d=o(v(g(n,l),a,s),i.apply(this,t),u);Rs(e),c>0?wo(this).transition().duration(c).call(b,d,a,e):wo(this).call(m.transform,d,a,e)}}function _(n,...i){if(r.apply(this,arguments)){var o,a,s,l,u=n.touches,c=u.length,d=O(this,i,n.changedTouches.length===c).event(n);for(Ds(n),a=0;a<c;++a)l=[l=xo(s=u[a],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,o=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),la(this),d.start())}}function P(e,...t){if(this.__zooming){var n,r,i,a,s=O(this,t).event(e),l=e.changedTouches,c=l.length;for(Rs(e),n=0;n<c;++n)i=xo(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var d=s.touch0[0],f=s.touch0[1],h=s.touch1[0],p=s.touch1[1],m=(m=h[0]-d[0])*m+(m=h[1]-d[1])*m,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;r=g(r,Math.sqrt(m/y)),i=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(v(r,i,a),s.extent,u))}}function E(e,...r){if(this.__zooming){var i,o,a=O(this,r).event(e),s=e.changedTouches,l=s.length;for(Ds(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<l;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=xo(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<p)){var u=wo(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",Ls),e!==i?b(e,t,n,r):i.interrupt().each(function(){O(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=i.apply(this,arguments),r=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return o(v(g(r,l),a,s),e,u)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),u)},null,r)},m.translateTo=function(e,t,n,r,a){m.transform(e,function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==r?y(e):"function"==typeof r?r.apply(this,arguments):r;return o(Is.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)},r,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=wo(this.that).datum();f.call(e,this.that,new Ns(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:js(+e),m):a},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:js(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:js(!!e),m):s},m.extent=function(e){return arguments.length?(i="function"==typeof e?e:js([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(o=e,m):o},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}function Gs(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Ws(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function Bs(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xs(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Ws(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function Ys(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function Ws(e,t){var n,r=typeof t;return null==t||"boolean"===r?ts(t):("number"===r?ua:"string"===r?(n=Qa(t))?(t=n,os):us:t instanceof Qa?os:t instanceof Date?Bs:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Ys:Array.isArray(t)?Gs:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Xs:ua)(e,t)}Ms.prototype=As.prototype;const qs=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",Hs=e=>`Node type "${e}" not found. Using fallback type "default".`,Ks=()=>"The React Flow parent container needs a width and a height to render the graph.",Js=()=>"Only child nodes can use a parent extent.",el=()=>"Can't create edge. An edge needs a source and a target.",tl=e=>`Marker type "${e}" doesn't exist.`,nl=(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,rl=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",il=e=>`Edge type "${e}" not found. Using fallback type "default".`,ol=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,al=()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",sl=()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.",ll=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ul=["Enter"," ","Escape"],cl={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var dl,fl,hl;!function(e){e.Strict="strict",e.Loose="loose"}(dl||(dl={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(fl||(fl={})),function(e){e.Partial="partial",e.Full="full"}(hl||(hl={}));const pl={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ml,gl,vl;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(ml||(ml={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(gl||(gl={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(vl||(vl={}));const yl={[vl.Left]:vl.Right,[vl.Right]:vl.Left,[vl.Top]:vl.Bottom,[vl.Bottom]:vl.Top};function bl(e){return null===e?null:e?"valid":"invalid"}const Ol=e=>"id"in e&&"source"in e&&"target"in e,wl=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),xl=(e,t=[0,0])=>{const{width:n,height:r}=Hl(e),i=e.origin??t,o=n*i[0],a=r*i[1];return{x:e.position.x-o,y:e.position.y-a}},Sl=(e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const r="string"==typeof n;let i=t.nodeLookup||r?void 0:n;t.nodeLookup&&(i=r?t.nodeLookup.get(n):wl(n)?n:t.nodeLookup.get(n.id));const o=i?Ql(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Il(e,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Dl(n)},kl=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){const t=Ql(e);n=Il(n,t)}}),Dl(n)},_l=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1)=>{const s={...Gl(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:r=!1}=t;if(a&&!n||r)continue;const i=e.width??t.width??t.initialWidth??null,u=e.height??t.height??t.initialHeight??null,c=Ll(s,Rl(t)),d=(i??0)*(u??0),f=o&&c>0;(!t.internals.handleBounds||f||c>=d||t.dragging)&&l.push(t)}return l};async function Pl({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},a){if(0===e.size)return Promise.resolve(!0);const s=function(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{!e.measured.width||!e.measured.height||!t?.includeHiddenNodes&&e.hidden||r&&!r.has(e.id)||n.set(e.id,e)}),n}(e,a),l=kl(s),u=Yl(l,t,n,a?.minZoom??i,a?.maxZoom??o,a?.padding??.1);return await r.setViewport(u,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function El({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:u}=s?s.internals.positionAbsolute:{x:0,y:0},c=a.origin??r;let d=a.extent||i;if("parent"!==a.extent||a.expandParent)s&&ql(a.extent)&&(d=[[a.extent[0][0]+l,a.extent[0][1]+u],[a.extent[1][0]+l,a.extent[1][1]+u]]);else if(s){const e=s.measured.width,t=s.measured.height;e&&t&&(d=[[l,u],[l+e,u+t]])}else o?.("005",Js());const f=ql(d)?Cl(t,d,a.measured):t;return void 0!==a.measured.width&&void 0!==a.measured.height||o?.("015",sl()),{position:{x:f.x-l+(a.measured.width??0)*c[0],y:f.y-u+(a.measured.height??0)*c[1]},positionAbsolute:f}}async function $l({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(e=>e.id)),a=[];for(const e of n){if(!1===e.deletable)continue;const t=o.has(e.id),n=!t&&e.parentId&&a.find(t=>t.id===e.parentId);(t||n)&&a.push(e)}const s=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),u=((e,t)=>{const n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))})(a,l),c=u;for(const e of l){s.has(e.id)&&!c.find(t=>t.id===e.id)&&c.push(e)}if(!i)return{edges:c,nodes:a};const d=await i({nodes:a,edges:c});return"boolean"==typeof d?d?{edges:c,nodes:a}:{edges:[],nodes:[]}:d}const Tl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Cl=(e={x:0,y:0},t,n)=>({x:Tl(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Tl(e.y,t[0][1],t[1][1]-(n?.height??0))});function jl(e,t,n){const{width:r,height:i}=Hl(n),{x:o,y:a}=n.internals.positionAbsolute;return Cl(e,[[o,a],[o+r,a+i]],t)}const Nl=(e,t,n)=>e<t?Tl(Math.abs(e-t),1,t)/t:e>n?-Tl(Math.abs(e-n),1,t)/t:0,Al=(e,t,n=15,r=40)=>[Nl(e.x,r,t.width-r)*n,Nl(e.y,r,t.height-r)*n],Il=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ml=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Dl=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Rl=(e,t=[0,0])=>{const{x:n,y:r}=wl(e)?e.internals.positionAbsolute:xl(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ql=(e,t=[0,0])=>{const{x:n,y:r}=wl(e)?e.internals.positionAbsolute:xl(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},zl=(e,t)=>Dl(Il(Ml(e),Ml(t))),Ll=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Zl=e=>Fl(e.width)&&Fl(e.height)&&Fl(e.x)&&Fl(e.y),Fl=e=>!isNaN(e)&&isFinite(e),Ul=(e,t)=>{0},Vl=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Gl=({x:e,y:t},[n,r,i],o=!1,a=[1,1])=>{const s={x:(e-n)/i,y:(t-r)/i};return o?Vl(s,a):s},Bl=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Xl(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const Yl=(e,t,n,r,i,o)=>{const a=function(e,t,n){if("string"==typeof e||"number"==typeof e){const r=Xl(e,n),i=Xl(e,t);return{top:r,right:i,bottom:r,left:i,x:2*i,y:2*r}}if("object"==typeof e){const r=Xl(e.top??e.y??0,n),i=Xl(e.bottom??e.y??0,n),o=Xl(e.left??e.x??0,t),a=Xl(e.right??e.x??0,t);return{top:r,right:a,bottom:i,left:o,x:o+a,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(o,t,n),s=(t-a.x)/e.width,l=(n-a.y)/e.height,u=Math.min(s,l),c=Tl(u,r,i),d=t/2-(e.x+e.width/2)*c,f=n/2-(e.y+e.height/2)*c,h=function(e,t,n,r,i,o){const{x:a,y:s}=Bl(e,[t,n,r]),{x:l,y:u}=Bl({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,d=o-u;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}(e,d,f,c,t,n),p=Math.min(h.left-a.left,0),m=Math.min(h.top-a.top,0);return{x:d-p+Math.min(h.right-a.right,0),y:f-m+Math.min(h.bottom-a.bottom,0),zoom:c}},Wl=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function ql(e){return null!=e&&"parent"!==e}function Hl(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Kl(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function Jl(e,t={width:0,height:0},n,r,i){const o={...e},a=r.get(n);if(a){const e=a.origin||i;o.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return o}function eu(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function tu(e){return{...cl,...e||{}}}function nu(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:a}=lu(e),s=Gl({x:o-(i?.left??0),y:a-(i?.top??0)},r),{x:l,y:u}=n?Vl(s,t):s;return{xSnapped:l,ySnapped:u,...s}}const ru=e=>({width:e.offsetWidth,height:e.offsetHeight}),iu=e=>e?.getRootNode?.()||window?.document,ou=["INPUT","SELECT","TEXTAREA"];function au(e){const t=e.composedPath?.()?.[0]||e.target;if(1!==t?.nodeType)return!1;return ou.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const su=e=>"clientX"in e,lu=(e,t)=>{const n=su(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},uu=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return o&&o.length?Array.from(o).map(t=>{const o=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:i,position:t.getAttribute("data-handlepos"),x:(o.left-n.left)/r,y:(o.top-n.top)/r,...ru(t)}}):null};function cu({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const l=.125*e+.375*i+.375*a+.125*n,u=.125*t+.375*o+.375*s+.125*r;return[l,u,Math.abs(l-e),Math.abs(u-t)]}function du(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function fu({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case vl.Left:return[t-du(t-r,o),n];case vl.Right:return[t+du(r-t,o),n];case vl.Top:return[t,n-du(n-i,o)];case vl.Bottom:return[t,n+du(i-n,o)]}}function hu({sourceX:e,sourceY:t,sourcePosition:n=vl.Bottom,targetX:r,targetY:i,targetPosition:o=vl.Top,curvature:a=.25}){const[s,l]=fu({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[u,c]=fu({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[d,f,h,p]=cu({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${l} ${u},${c} ${r},${i}`,d,f,h,p]}function pu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2;return[o,r<t?r+a:r-a,i,a]}function mu({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=Il(Ql(e),Ql(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Ll(a,Dl(o))>0}const gu=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,vu=(e,t)=>{if(!e.source||!e.target)return Ul(0,el()),t;let n;return n=Ol(e)?{...e}:{...e,id:gu(e)},((e,t)=>t.some(t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function yu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=pu({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const bu={[vl.Left]:{x:-1,y:0},[vl.Right]:{x:1,y:0},[vl.Top]:{x:0,y:-1},[vl.Bottom]:{x:0,y:1}},Ou=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function wu({source:e,sourcePosition:t=vl.Bottom,target:n,targetPosition:r=vl.Top,center:i,offset:o,stepPosition:a}){const s=bu[t],l=bu[r],u={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+l.x*o,y:n.y+l.y*o},d=(({source:e,sourcePosition:t=vl.Bottom,target:n})=>t===vl.Left||t===vl.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:u,sourcePosition:t,target:c}),f=0!==d.x?"x":"y",h=d[f];let p,m,g=[];const v={x:0,y:0},y={x:0,y:0},[,,b,O]=pu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*l[f]===-1){"x"===f?(p=i.x??u.x+(c.x-u.x)*a,m=i.y??(u.y+c.y)/2):(p=i.x??(u.x+c.x)/2,m=i.y??u.y+(c.y-u.y)*a);const e=[{x:p,y:u.y},{x:p,y:c.y}],t=[{x:u.x,y:m},{x:c.x,y:m}];g=s[f]===h?"x"===f?e:t:"x"===f?t:e}else{const i=[{x:u.x,y:c.y}],a=[{x:c.x,y:u.y}];if(g="x"===f?s.x===h?a:i:s.y===h?i:a,t===r){const t=Math.abs(e[f]-n[f]);if(t<=o){const r=Math.min(o-1,o-t);s[f]===h?v[f]=(u[f]>e[f]?-1:1)*r:y[f]=(c[f]>n[f]?-1:1)*r}}if(t!==r){const e="x"===f?"y":"x",t=s[f]===l[e],n=u[e]>c[e],r=u[e]<c[e];(1===s[f]&&(!t&&n||t&&r)||1!==s[f]&&(!t&&r||t&&n))&&(g="x"===f?i:a)}const d={x:u.x+v.x,y:u.y+v.y},b={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(d.x-g[0].x),Math.abs(b.x-g[0].x))>=Math.max(Math.abs(d.y-g[0].y),Math.abs(b.y-g[0].y))?(p=(d.x+b.x)/2,m=g[0].y):(p=g[0].x,m=(d.y+b.y)/2)}return[[e,{x:u.x+v.x,y:u.y+v.y},...g,{x:c.x+y.x,y:c.y+y.y},n],p,m,b,O]}function xu({sourceX:e,sourceY:t,sourcePosition:n=vl.Bottom,targetX:r,targetY:i,targetPosition:o=vl.Top,borderRadius:a=5,centerX:s,centerY:l,offset:u=20,stepPosition:c=.5}){const[d,f,h,p,m]=wu({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:l},offset:u,stepPosition:c}),g=d.reduce((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const i=Math.min(Ou(e,t)/2,Ou(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a)return`L ${o+i*(e.x<n.x?-1:1)},${a}Q ${o},${a} ${o},${a+i*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${o},${a+i*(e.y<n.y?-1:1)}Q ${o},${a} ${o+i*s},${a}`}(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=r},"");return[g,f,h,p,m]}function Su(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function ku(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function _u(e,t,n=vl.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??Hl(e);if(r)return{x:i+a/2,y:o+s/2};switch(t?.position??n){case vl.Top:return{x:i+a/2,y:o};case vl.Right:return{x:i+a,y:o+s/2};case vl.Bottom:return{x:i+a/2,y:o+s};case vl.Left:return{x:i,y:o+s/2}}}function Pu(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function Eu(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}const $u={nodeOrigin:[0,0],nodeExtent:ll,elevateNodesOnSelect:!0,defaults:{}},Tu={...$u,checkEquality:!0};function Cu(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function ju(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const t of e.handles){const i={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(i):"target"===t.type&&r.push(i)}return{source:n,target:r}}function Nu(e,t,n,r){const i=Cu(Tu,r);let o=e.length>0;const a=new Map(t),s=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let e=a.get(l.id);if(i.checkEquality&&l===e?.internals.userNode)t.set(l.id,e);else{const n=xl(l,i.nodeOrigin),r=ql(l.extent)?l.extent:i.nodeExtent,o=Cl(n,r,Hl(l));e={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:o,handleBounds:ju(l,e),z:Iu(l,s),userNode:l}},t.set(l.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(o=!1),l.parentId&&Au(e,t,n,r)}return o}function Au(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:a}=Cu($u,r),s=e.parentId,l=t.get(s);if(!l)return void console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const u=i?1e3:0,{x:c,y:d,z:f}=function(e,t,n,r,i){const{x:o,y:a}=t.internals.positionAbsolute,s=Hl(e),l=xl(e,n),u=ql(e.extent)?Cl(l,e.extent,s):l;let c=Cl({x:o+u.x,y:a+u.y},r,s);"parent"===e.extent&&(c=jl(c,s,t));const d=Iu(e,i),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>=d?f+1:d}}(e,l,o,a,u),{positionAbsolute:h}=e.internals,p=c!==h.x||d!==h.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:c,y:d}:h,z:f}})}function Iu(e,t){return(Fl(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Mu(e,t,n,r=[0,0]){const i=[],o=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const r=o.get(n.parentId)?.expandedRect??Rl(e),i=zl(r,n.rect);o.set(n.parentId,{expandedRect:i,parent:e})}return o.size>0&&o.forEach(({expandedRect:t,parent:o},a)=>{const s=o.internals.positionAbsolute,l=Hl(o),u=o.origin??r,c=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,d=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,f=Math.max(l.width,Math.round(t.width)),h=Math.max(l.height,Math.round(t.height)),p=(f-l.width)*u[0],m=(h-l.height)*u[1];(c>0||d>0||p||m)&&(i.push({id:a,type:"position",position:{x:o.position.x-c+p,y:o.position.y-d+m}}),n.get(a)?.forEach(t=>{e.some(e=>e.id===t.id)||i.push({id:t.id,type:"position",position:{x:t.position.x+c,y:t.position.y+d}})})),(l.width<t.width||l.height<t.height||c||d)&&i.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:f+(c?u[0]*c-p:0),height:h+(d?u[1]*d-m:0)}})}),i}function Du(e,t,n,r,i,o){let a=i;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${i}-${e}`;const l=r.get(a)||new Map;if(r.set(a,l.set(n,t)),o){a=`${i}-${e}-${o}`;const s=r.get(a)||new Map;r.set(a,s.set(n,t))}}function Ru(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:i,sourceHandle:o=null,targetHandle:a=null}=r,s={edgeId:r.id,source:n,target:i,sourceHandle:o,targetHandle:a},l=`${n}-${o}--${i}-${a}`;Du("source",s,`${i}-${a}--${n}-${o}`,e,n,o),Du("target",s,l,e,i,a),t.set(r.id,r)}}function Qu(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Qu(n,t))}function zu(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Lu({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[e,o]of t){const t=n.get(e)?.internals.userNode;t&&i.push({...t,position:o.position,dragging:r})}if(!e)return[i[0],i];const o=n.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:r}:i[0],i]}function Zu({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},a=0,s=new Map,l=!1,u={x:0,y:0},c=null,d=!1,f=null,h=!1,p=!1,m=null;return{update:function({noDragClassName:g,handleSelector:v,domNode:y,isSelectable:b,nodeId:O,nodeClickDistance:w=0}){function x({x:e,y:n}){const{nodeLookup:i,nodeExtent:a,snapGrid:l,snapToGrid:u,nodeOrigin:c,onNodeDrag:d,onSelectionDrag:f,onError:h,updateNodePositions:g}=t();o={x:e,y:n};let v=!1;const y=s.size>1,b=y&&a?Ml(kl(s)):null,w=y&&u?function({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},a=Vl(o,t);return{x:a.x-o.x,y:a.y-o.y}}({dragItems:s,snapGrid:l,x:e,y:n}):null;for(const[t,r]of s){if(!i.has(t))continue;let o={x:e-r.distance.x,y:n-r.distance.y};u&&(o=w?{x:Math.round(o.x+w.x),y:Math.round(o.y+w.y)}:Vl(o,l));let s=null;if(y&&a&&!r.extent&&b){const{positionAbsolute:e}=r.internals,t=e.x-b.x+a[0][0],n=e.x+r.measured.width-b.x2+a[1][0];s=[[t,e.y-b.y+a[0][1]],[n,e.y+r.measured.height-b.y2+a[1][1]]]}const{position:d,positionAbsolute:f}=El({nodeId:t,nextPosition:o,nodeLookup:i,nodeExtent:s||a,nodeOrigin:c,onError:h});v=v||r.position.x!==d.x||r.position.y!==d.y,r.position=d,r.internals.positionAbsolute=f}if(p=p||v,v&&(g(s,!0),m&&(r||d||!O&&f))){const[e,t]=Lu({nodeId:O,dragItems:s,nodeLookup:i});r?.(m,s,e,t),d?.(m,e,t),O||f?.(m,t)}}async function S(){if(!c)return;const{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:i}=t();if(!i)return l=!1,void cancelAnimationFrame(a);const[s,d]=Al(u,c,r);0===s&&0===d||(o.x=(o.x??0)-s/e[2],o.y=(o.y??0)-d/e[2],await n({x:s,y:d})&&x(o)),a=requestAnimationFrame(S)}function k(r){const{nodeLookup:i,multiSelectionActive:a,nodesDraggable:l,transform:u,snapGrid:f,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:m,onSelectionDragStart:g,unselectNodesAndEdges:v}=t();d=!0,p&&b||a||!O||i.get(O)?.selected||v(),b&&p&&O&&e?.(O);const y=nu(r.sourceEvent,{transform:u,snapGrid:f,snapToGrid:h,containerBounds:c});if(o=y,s=function(e,t,n,r){const i=new Map;for(const[o,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!Qu(a,e))&&(a.draggable||t&&void 0===a.draggable)){const t=e.get(o);t&&i.set(o,{id:o,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return i}(i,l,y,O),s.size>0&&(n||m||!O&&g)){const[e,t]=Lu({nodeId:O,dragItems:s,nodeLookup:i});n?.(r.sourceEvent,s,e,t),m?.(r.sourceEvent,e,t),O||g?.(r.sourceEvent,t)}}f=wo(y);const _=Mo().clickDistance(w).on("start",e=>{const{domNode:n,nodeDragThreshold:r,transform:i,snapGrid:a,snapToGrid:s}=t();c=n?.getBoundingClientRect()||null,h=!1,p=!1,m=e.sourceEvent,0===r&&k(e);const l=nu(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:s,containerBounds:c});o=l,u=lu(e.sourceEvent,c)}).on("drag",e=>{const{autoPanOnNodeDrag:n,transform:r,snapGrid:i,snapToGrid:a,nodeDragThreshold:f,nodeLookup:p}=t(),g=nu(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:a,containerBounds:c});if(m=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||O&&!p.has(O))&&(h=!0),!h){if(!l&&n&&d&&(l=!0,S()),!d){const t=lu(e.sourceEvent,c),n=t.x-u.x,r=t.y-u.y;Math.sqrt(n*n+r*r)>f&&k(e)}(o.x!==g.xSnapped||o.y!==g.ySnapped)&&s&&d&&(u=lu(e.sourceEvent,c),x(g))}}).on("end",e=>{if(d&&!h&&(l=!1,d=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:n,updateNodePositions:r,onNodeDragStop:o,onSelectionDragStop:a}=t();if(p&&(r(s,!1),p=!1),i||o||!O&&a){const[t,r]=Lu({nodeId:O,dragItems:s,nodeLookup:n,dragging:!1});i?.(e.sourceEvent,s,t,r),o?.(e.sourceEvent,t,r),O||a?.(e.sourceEvent,r)}}}).filter(e=>{const t=e.target;return!e.button&&(!g||!zu(t,`.${g}`,y))&&(!v||zu(t,v,y))});f.call(_)},destroy:function(){f?.on(".drag",null)}}}function Fu(e,t,n,r){let i=[],o=1/0;const a=function(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())Ll(i,Rl(e))>0&&r.push(e);return r}(e,n,t+250);for(const n of a){const a=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const s of a){if(r.nodeId===s.nodeId&&r.type===s.type&&r.id===s.id)continue;const{x:a,y:l}=_u(n,s,s.position,!0),u=Math.sqrt(Math.pow(a-e.x,2)+Math.pow(l-e.y,2));u>t||(u<o?(i=[{...s,x:a,y:l}],o=u):u===o&&i.push({...s,x:a,y:l}))}}if(!i.length)return null;if(i.length>1){const e="source"===r.type?"target":"source";return i.find(t=>t.type===e)??i[0]}return i[0]}function Uu(e,t,n,r,i,o=!1){const a=r.get(e);if(!a)return null;const s="strict"===i?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],l=(n?s?.find(e=>e.id===n):s?.[0])??null;return l&&o?{...l,..._u(a,l,l.position,!0)}:l}function Vu(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const Gu=()=>!0;function Bu(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:a,lib:s,flowId:l,isValidConnection:u=Gu,nodeLookup:c}){const d="target"===o,f=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:p}=lu(e),m=a.elementFromPoint(h,p),g=m?.classList.contains(`${s}-flow__handle`)?m:f,v={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const e=Vu(void 0,g),t=g.getAttribute("data-nodeid"),o=g.getAttribute("data-handleid"),a=g.classList.contains("connectable"),s=g.classList.contains("connectableend");if(!t||!e)return v;const l={source:d?t:r,sourceHandle:d?o:i,target:d?r:t,targetHandle:d?i:o};v.connection=l;const f=a&&s&&(n===dl.Strict?d&&"source"===e||!d&&"target"===e:t!==r||o!==i);v.isValid=f&&u(l),v.toHandle=Uu(t,e,o,c,n,!0)}return v}const Xu={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:a,domNode:s,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:m,onConnectEnd:g,isValidConnection:v=Gu,onReconnectEnd:y,updateConnection:b,getTransform:O,getFromHandle:w,autoPanSpeed:x,dragThreshold:S=1,handleDomNode:k}){const _=iu(e.target);let P,E=0;const{x:$,y:T}=lu(e),C=Vu(o,k),j=s?.getBoundingClientRect();let N=!1;if(!j||!C)return;const A=Uu(i,C,r,l,t);if(!A)return;let I=lu(e,j),M=!1,D=null,R=!1,Q=null;function z(){if(!c||!j)return;const[e,t]=Al(I,j,x);f({x:e,y:t}),E=requestAnimationFrame(z)}const L={...A,nodeId:i,type:C,position:A.position},Z=l.get(i);let F={inProgress:!0,isValid:null,from:_u(Z,L,vl.Left,!0),fromHandle:L,fromPosition:L.position,fromNode:Z,to:I,toHandle:null,toPosition:yl[L.position],toNode:null};function U(){N=!0,b(F),p?.(e,{nodeId:i,handleId:r,handleType:C})}function V(e){if(!N){const{x:t,y:n}=lu(e),r=t-$,i=n-T;if(!(r*r+i*i>S*S))return;U()}if(!w()||!L)return void G(e);const o=O();I=lu(e,j),P=Fu(Gl(I,o,!1,[1,1]),n,l,L),M||(z(),M=!0);const s=Bu(e,{handle:P,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:a?"target":"source",isValidConnection:v,doc:_,lib:u,flowId:d,nodeLookup:l});Q=s.handleDomNode,D=s.connection,R=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!P,s.isValid);const c={...F,isValid:R,to:s.toHandle&&R?Bl({x:s.toHandle.x,y:s.toHandle.y},o):I,toHandle:s.toHandle,toPosition:R&&s.toHandle?s.toHandle.position:yl[L.position],toNode:s.toHandle?l.get(s.toHandle.nodeId):null};R&&P&&F.toHandle&&c.toHandle&&F.toHandle.type===c.toHandle.type&&F.toHandle.nodeId===c.toHandle.nodeId&&F.toHandle.id===c.toHandle.id&&F.to.x===c.to.x&&F.to.y===c.to.y||(b(c),F=c)}function G(e){if(!("touches"in e&&e.touches.length>0)){if(N){(P||Q)&&D&&R&&m?.(D);const{inProgress:t,...n}=F,r={...n,toPosition:F.toHandle?F.toPosition:null};g?.(e,r),o&&y?.(e,r)}h(),cancelAnimationFrame(E),M=!1,R=!1,D=null,Q=null,_.removeEventListener("mousemove",V),_.removeEventListener("mouseup",G),_.removeEventListener("touchmove",V),_.removeEventListener("touchend",G)}}0===S&&U(),_.addEventListener("mousemove",V),_.addEventListener("mouseup",G),_.addEventListener("touchmove",V),_.addEventListener("touchend",G)},isValid:Bu};const Yu=e=>({x:e.x,y:e.y,zoom:e.k}),Wu=({x:e,y:t,zoom:n})=>Is.translate(e,t).scale(n),qu=(e,t)=>e.target.closest(`.${t}`),Hu=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Ku=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Ju=(e,t=0,n=Ku,r=()=>{})=>{const i="number"==typeof t&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},ec=e=>{const t=e.ctrlKey&&Wl()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function tc({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Vs().clickDistance(!Fl(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),h=wo(e).call(f);y({x:o.x,y:o.y,zoom:Tl(o.zoom,t,n)},[[0,0],[d.width,d.height]],i);const p=h.on("wheel.zoom"),m=h.on("dblclick.zoom");function g(e,t){return h?new Promise(n=>{f?.interpolate("linear"===t?.interpolate?Ws:Ro).transform(Ju(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function v(){f.on("zoom",null)}async function y(e,t,n){const r=Wu(e),i=f?.constrain()(r,t,n);return i&&await g(i),new Promise(e=>e(i))}return f.wheelDelta(ec),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:i,panOnDrag:o,panOnScrollMode:d,panOnScrollSpeed:g,preventScrolling:y,zoomOnPinch:b,zoomOnScroll:O,zoomOnDoubleClick:w,zoomActivationKeyPressed:x,lib:S,onTransformChange:k,connectionInProgress:_}){r&&!c.isZoomingOrPanning&&v();const P=i&&!x&&!r?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(qu(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&a){const e=xo(c),t=ec(c),i=d*Math.pow(2,t);return void r.scaleTo(n,i,e,c)}const f=1===c.deltaMode?20:1;let h=i===fl.Vertical?0:c.deltaX*f,p=i===fl.Horizontal?0:c.deltaY*f;!Wl()&&c.shiftKey&&i!==fl.Vertical&&(h=c.deltaY*f,p=0),r.translateBy(n,-h/d*o,-p/d*o,{internal:!0});const m=Yu(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s?.(c,m)),e.isPanScrolling&&(l?.(c,m),e.panScrollTimeout=setTimeout(()=>{u?.(c,m),e.isPanScrolling=!1},150))}}({zoomPanValues:c,noWheelClassName:e,d3Selection:h,d3Zoom:f,panOnScrollMode:d,panOnScrollSpeed:g,zoomOnPinch:b,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o="wheel"===r.type,a=!t&&o&&!r.ctrlKey,s=qu(r,e);if(r.ctrlKey&&o&&s&&r.preventDefault(),a||s)return null;r.preventDefault(),n.call(this,r,i)}}({noWheelClassName:e,preventScrolling:y,d3ZoomHandler:p});if(h.on("wheel.zoom",P,{passive:!1}),!r){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Yu(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,"mousedown"===r.sourceEvent?.type&&t(!0),n&&n?.(r.sourceEvent,i)}}({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});f.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{e.usedRightMouseButton=!(!n||!Hu(t,e.mouseButton??0)),o.sourceEvent?.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!o.sourceEvent?.internal&&i?.(o.sourceEvent,Yu(o.transform))}}({zoomPanValues:c,panOnDrag:o,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:k});f.on("zoom",t);const r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return a=>{var s,l;if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,o&&Hu(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&(s=e.prevViewport,l=a.transform,s.x!==l.x||s.y!==l.y||s.zoom!==l.k))){const t=Yu(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(a.sourceEvent,t)},n?150:0)}}}({zoomPanValues:c,panOnDrag:o,panOnScroll:i,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:u});f.on("end",r)}const E=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:u,connectionInProgress:c}){return d=>{const f=e||t,h=n&&d.ctrlKey,p="wheel"===d.type;if(1===d.button&&"mousedown"===d.type&&(qu(d,`${u}-flow__node`)||qu(d,`${u}-flow__edge`)))return!0;if(!(r||f||i||o||n))return!1;if(a)return!1;if(c&&!p)return!1;if(qu(d,s)&&p)return!1;if(qu(d,l)&&(!p||i&&p&&!e))return!1;if(!n&&d.ctrlKey&&p)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!i&&!h&&p)return!1;if(!r&&("mousedown"===d.type||"touchstart"===d.type))return!1;if(Array.isArray(r)&&!r.includes(d.button)&&"mousedown"===d.type)return!1;const m=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||p)&&m}}({zoomActivationKeyPressed:x,panOnDrag:o,zoomOnScroll:O,panOnScroll:i,zoomOnDoubleClick:w,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:S,connectionInProgress:_});f.filter(E),w?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)},destroy:v,setViewport:async function(e,t){const n=Wu(e);return await g(n,t),new Promise(e=>e(n))},setViewportConstrained:y,getViewport:function(){const e=h?Ms(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise(n=>{f?.interpolate("linear"===t?.interpolate?Ws:Ro).scaleTo(Ju(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise(n=>{f?.interpolate("linear"===t?.interpolate?Ws:Ro).scaleBy(Ju(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(h){const t=Wu(e),n=h.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||f?.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Fl(e)||e<0?0:e;f?.clickDistance(t)}}}var nc;!function(e){e.Line="line",e.Handle="handle"}(nc||(nc={}));const rc=["top-left","top-right","bottom-left","bottom-right"],ic=["top","right","bottom","left"];function oc(e,t){return Math.max(0,t-e)}function ac(e,t){return Math.max(0,e-t)}function sc(e,t,n){return Math.max(0,t-e,e-n)}function lc(e,t){return e?!t:t}const uc={width:0,height:0,x:0,y:0},cc={...uc,pointerX:0,pointerY:0,aspectRatio:1};function dc(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,a=e.measured.height??0,s=n[0]*o,l=n[1]*a;return[[r-s,i-l],[r+o-s,i+a-l]]}function fc({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=wo(e);return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:s,resizeDirection:l,onResizeStart:u,onResize:c,onResizeEnd:d,shouldResize:f}){let h={...uc},p={...cc};const m=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let g,v,y,b,O=null,w=[],x=!1;const S=Mo().on("start",e=>{const{nodeLookup:r,transform:i,snapGrid:o,snapToGrid:a,nodeOrigin:s,paneDomNode:l}=n();if(g=r.get(t),!g)return;O=l?.getBoundingClientRect()??null;const{xSnapped:c,ySnapped:d}=nu(e.sourceEvent,{transform:i,snapGrid:o,snapToGrid:a,containerBounds:O});h={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},p={...h,pointerX:c,pointerY:d,aspectRatio:h.width/h.height},v=void 0,g.parentId&&("parent"===g.extent||g.expandParent)&&(v=r.get(g.parentId),y=v&&"parent"===g.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(v):void 0),w=[],b=void 0;for(const[e,n]of r)if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=dc(n,g,n.origin??s);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}u?.(e,{...h})}).on("drag",e=>{const{transform:t,snapGrid:i,snapToGrid:o,nodeOrigin:u}=n(),d=nu(e.sourceEvent,{transform:t,snapGrid:i,snapToGrid:o,containerBounds:O}),S=[];if(!g)return;const{x:k,y:_,width:P,height:E}=h,$={},T=g.origin??u,{width:C,height:j,x:N,y:A}=function(e,t,n,r,i,o,a,s){let{affectsX:l,affectsY:u}=t;const{isHorizontal:c,isVertical:d}=t,f=c&&d,{xSnapped:h,ySnapped:p}=n,{minWidth:m,maxWidth:g,minHeight:v,maxHeight:y}=r,{x:b,y:O,width:w,height:x,aspectRatio:S}=e;let k=Math.floor(c?h-e.pointerX:0),_=Math.floor(d?p-e.pointerY:0);const P=w+(l?-k:k),E=x+(u?-_:_),$=-o[0]*w,T=-o[1]*x;let C=sc(P,m,g),j=sc(E,v,y);if(a){let e=0,t=0;l&&k<0?e=oc(b+k+$,a[0][0]):!l&&k>0&&(e=ac(b+P+$,a[1][0])),u&&_<0?t=oc(O+_+T,a[0][1]):!u&&_>0&&(t=ac(O+E+T,a[1][1])),C=Math.max(C,e),j=Math.max(j,t)}if(s){let e=0,t=0;l&&k>0?e=ac(b+k,s[0][0]):!l&&k<0&&(e=oc(b+P,s[1][0])),u&&_>0?t=ac(O+_,s[0][1]):!u&&_<0&&(t=oc(O+E,s[1][1])),C=Math.max(C,e),j=Math.max(j,t)}if(i){if(c){const e=sc(P/S,v,y)*S;if(C=Math.max(C,e),a){let e=0;e=!l&&!u||l&&!u&&f?ac(O+T+P/S,a[1][1])*S:oc(O+T+(l?k:-k)/S,a[0][1])*S,C=Math.max(C,e)}if(s){let e=0;e=!l&&!u||l&&!u&&f?oc(O+P/S,s[1][1])*S:ac(O+(l?k:-k)/S,s[0][1])*S,C=Math.max(C,e)}}if(d){const e=sc(E*S,m,g)/S;if(j=Math.max(j,e),a){let e=0;e=!l&&!u||u&&!l&&f?ac(b+E*S+$,a[1][0])/S:oc(b+(u?_:-_)*S+$,a[0][0])/S,j=Math.max(j,e)}if(s){let e=0;e=!l&&!u||u&&!l&&f?oc(b+E*S,s[1][0])/S:ac(b+(u?_:-_)*S,s[0][0])/S,j=Math.max(j,e)}}}_+=_<0?j:-j,k+=k<0?C:-C,i&&(f?P>E*S?_=(lc(l,u)?-k:k)/S:k=(lc(l,u)?-_:_)*S:c?(_=k/S,u=l):(k=_*S,l=u));const N=l?b+k:b,A=u?O+_:O;return{width:w+(l?-k:k),height:x+(u?-_:_),x:o[0]*k*(l?-1:1)+N,y:o[1]*_*(u?-1:1)+A}}(p,m,d,a,s,T,y,b),I=C!==P,M=j!==E,D=N!==k&&I,R=A!==_&&M;if(!(D||R||I||M))return;if((D||R||1===T[0]||1===T[1])&&($.x=D?N:h.x,$.y=R?A:h.y,h.x=$.x,h.y=$.y,w.length>0)){const e=N-k,t=A-_;for(const n of w)n.position={x:n.position.x-e+T[0]*(C-P),y:n.position.y-t+T[1]*(j-E)},S.push(n)}if((I||M)&&($.width=!I||l&&"horizontal"!==l?h.width:C,$.height=!M||l&&"vertical"!==l?h.height:j,h.width=$.width,h.height=$.height),v&&g.expandParent){const e=T[0]*($.width??0);$.x&&$.x<e&&(h.x=e,p.x=p.x-($.x-e));const t=T[1]*($.height??0);$.y&&$.y<t&&(h.y=t,p.y=p.y-($.y-t))}const Q=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const a=e-t,s=n-r,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&i&&(l[0]=-1*l[0]),s&&o&&(l[1]=-1*l[1]),l}({width:h.width,prevWidth:P,height:h.height,prevHeight:E,affectsX:m.affectsX,affectsY:m.affectsY}),z={...h,direction:Q},L=f?.(e,z);!1!==L&&(x=!0,c?.(e,z),r($,S))}).on("end",e=>{x&&(d?.(e,{...h}),i?.({...h}),x=!1)});o.call(S)},destroy:function(){o.on(".drag",null)}}}var hc=b(242);const pc=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,i,o);return o},mc=e=>e?pc(e):pc;const{useDebugValue:gc}=T,{useSyncExternalStoreWithSelector:vc}=hc,yc=e=>e;function bc(e,t=yc,n){const r=vc(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return gc(r),r}const Oc=(e,t)=>{const n=mc(e),r=(e,r=t)=>bc(n,e,r);return Object.assign(r,n),r};function wc(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const xc=(0,T.createContext)(null),Sc=xc.Provider,kc=qs();function _c(e,t){const n=(0,T.useContext)(xc);if(null===n)throw new Error(kc);return bc(n,e,t)}function Pc(){const e=(0,T.useContext)(xc);if(null===e)throw new Error(kc);return(0,T.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Ec={display:"none"},$c={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Tc="react-flow__node-desc",Cc="react-flow__edge-desc",jc=e=>e.ariaLiveMessage,Nc=e=>e.ariaLabelConfig;function Ac({rfId:e}){const t=_c(jc);return(0,$.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:$c,children:t})}function Ic({rfId:e,disableKeyboardA11y:t}){const n=_c(Nc);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{id:`${Tc}-${e}`,style:Ec,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,$.jsx)("div",{id:`${Cc}-${e}`,style:Ec,children:n["edge.a11yDescription.default"]}),!t&&(0,$.jsx)(Ac,{rfId:e})]})}const Mc=(0,T.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...i},o)=>{const a=`${e}`.split("-");return(0,$.jsx)("div",{className:ei(["react-flow__panel",n,...a]),style:r,ref:o,...i,children:t})});function Dc({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,$.jsx)(Mc,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,$.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}Mc.displayName="Panel";const Rc=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},Qc=e=>e.id;function zc(e,t){return wc(e.selectedNodes.map(Qc),t.selectedNodes.map(Qc))&&wc(e.selectedEdges.map(Qc),t.selectedEdges.map(Qc))}function Lc({onSelectionChange:e}){const t=Pc(),{selectedNodes:n,selectedEdges:r}=_c(Rc,zc);return(0,T.useEffect)(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(e=>e(i))},[n,r,e]),null}const Zc=e=>!!e.onSelectionChangeHandlers;function Fc({onSelectionChange:e}){const t=_c(Zc);return e||t?(0,$.jsx)(Lc,{onSelectionChange:e}):null}const Uc=[0,0],Vc={x:0,y:0,zoom:1},Gc=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],Bc=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Xc={translateExtent:ll,nodeOrigin:Uc,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Yc(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:o,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:l,setPaneClickDistance:u}=_c(Bc,wc),c=Pc();(0,T.useEffect)(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=Xc,s()}),[]);const d=(0,T.useRef)(Xc);return(0,T.useEffect)(()=>{for(const s of Gc){const l=e[s];l!==d.current[s]&&(void 0!==e[s]&&("nodes"===s?t(l):"edges"===s?n(l):"minZoom"===s?r(l):"maxZoom"===s?i(l):"translateExtent"===s?o(l):"nodeExtent"===s?a(l):"paneClickDistance"===s?u(l):"ariaLabelConfig"===s?c.setState({ariaLabelConfig:tu(l)}):"fitView"===s?c.setState({fitViewQueued:l}):"fitViewOptions"===s?c.setState({fitViewOptions:l}):c.setState({[s]:l})))}d.current=e},Gc.map(t=>e[t])),null}function Wc(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const qc="undefined"!=typeof document?document:null;function Hc(e=null,t={target:qc,actInsideInputWithModifier:!0}){const[n,r]=(0,T.useState)(!1),i=(0,T.useRef)(!1),o=(0,T.useRef)(new Set([])),[a,s]=(0,T.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,T.useEffect)(()=>{const n=t?.target??qc,l=t?.actInsideInputWithModifier??!0;if(null!==e){const e=e=>{i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!i.current||i.current&&!l)&&au(e))return!1;const n=Jc(e.code,s);if(o.current.add(e[n]),Kc(a,o.current,!1)){const n=e.composedPath?.()?.[0]||e.target,o="BUTTON"===n?.nodeName||"A"===n?.nodeName;!1===t.preventDefault||!i.current&&o||e.preventDefault(),r(!0)}},u=e=>{const t=Jc(e.code,s);Kc(a,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(e[t]),"Meta"===e.key&&o.current.clear(),i.current=!1},c=()=>{o.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",u),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",u),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}},[e,r]),n}function Kc(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Jc(e,t){return t.includes(e)?"code":"key"}function ed(e,t){const n=[],r=new Map,i=[];for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{const e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}else i.push(t);for(const e of t){const t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const i={...e};for(const e of t)td(e,i);n.push(i)}return i.length&&i.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function td(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function nd(e,t){return ed(e,t)}function rd(e,t){return ed(e,t)}function id(e,t){return{id:e,type:"select",selected:t}}function od(e,t=new Set,n=!1){const r=[];for(const[i,o]of e){const e=t.has(i);void 0===o.selected&&!e||o.selected===e||(n&&(o.selected=e),r.push(id(o.id,e)))}return r}function ad({items:e=[],lookup:t}){const n=[],r=new Map(e.map(e=>[e.id,e]));for(const[r,i]of e.entries()){const e=t.get(i.id),o=e?.internals?.userNode??e;void 0!==o&&o!==i&&n.push({id:i.id,item:i,type:"replace"}),void 0===o&&n.push({item:i,type:"add",index:r})}for(const[e]of t){void 0===r.get(e)&&n.push({id:e,type:"remove"})}return n}function sd(e){return{id:e.id,type:"remove"}}const ld=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function ud(e){return(0,T.forwardRef)(e)}const cd="undefined"!=typeof window?T.useLayoutEffect:T.useEffect;function dd(e){const[t,n]=(0,T.useState)(BigInt(0)),[r]=(0,T.useState)(()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}(()=>n(e=>e+BigInt(1))));return cd(()=>{const t=r.get();t.length&&(e(t),r.reset())},[t]),r}const fd=(0,T.createContext)(null);function hd({children:e}){const t=Pc(),n=(0,T.useCallback)(e=>{const{nodes:n=[],setNodes:r,hasDefaultNodes:i,onNodesChange:o,nodeLookup:a,fitViewQueued:s}=t.getState();let l=n;for(const t of e)l="function"==typeof t?t(l):t;const u=ad({items:l,lookup:a});i&&r(l),u.length>0?o?.(u):s&&window.requestAnimationFrame(()=>{const{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[]),r=dd(n),i=dd((0,T.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:o,edgeLookup:a}=t.getState();let s=n;for(const t of e)s="function"==typeof t?t(s):t;i?r(s):o&&o(ad({items:s,lookup:a}))},[])),o=(0,T.useMemo)(()=>({nodeQueue:r,edgeQueue:i}),[]);return(0,$.jsx)(fd.Provider,{value:o,children:e})}const pd=e=>!!e.panZoom;function md(){const e=(()=>{const e=Pc();return(0,T.useMemo)(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,o],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:o,maxZoom:a,panZoom:s}=e.getState(),l=Yl(t,r,i,o,a,n?.padding??.1);return s?(await s.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:s,y:l}=a.getBoundingClientRect(),u={x:t.x-s,y:t.y-l},c=n.snapGrid??i,d=n.snapToGrid??o;return Gl(u,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),a=Bl(t,n);return{x:a.x+i,y:a.y+o}}}),[])})(),t=Pc(),n=function(){const e=(0,T.useContext)(fd);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),r=_c(pd),i=(0,T.useMemo)(()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},i=e=>{n.edgeQueue.push(e)},o=e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState(),i=ld(e)?e:n.get(e.id),o=i.parentId?Jl(i.position,i.measured,i.parentId,n,r):i.position,a={...i,position:o,width:i.measured?.width??i.width,height:i.measured?.height??i.height};return Rl(a)},a=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&ld(e)?e:{...r,...e}}return r}))},s=(e,t,n={replace:!1})=>{i(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&Ol(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:i,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[i,o,a]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:i,y:o,zoom:a}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:r,edges:i,onNodesDelete:o,onEdgesDelete:a,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:u,onBeforeDelete:c}=t.getState(),{nodes:d,edges:f}=await $l({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:i,onBeforeDelete:c}),h=f.length>0,p=d.length>0;if(h){const e=f.map(sd);a?.(f),l(e)}if(p){const e=d.map(sd);o?.(d),s(e)}return(p||h)&&u?.({nodes:d,edges:f}),{deletedNodes:d,deletedEdges:f}},getIntersectingNodes:(e,n=!0,r)=>{const i=Zl(e),a=i?e:o(e),s=void 0!==r;return a?(r||t.getState().nodes).filter(r=>{const o=t.getState().nodeLookup.get(r.id);if(o&&!i&&(r.id===e.id||!o.internals.positionAbsolute))return!1;const l=Rl(s?r:o),u=Ll(l,a);return n&&u>0||u>=l.width*l.height||u>=a.width*a.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{const r=Zl(e)?e:o(e);if(!r)return!1;const i=Ll(r,t);return n&&i>0||i>=t.width*t.height||i>=r.width*r.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return Sl(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{const r=t.getState().fitViewResolver??function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:r}),n.nodeQueue.push(e=>[...e]),r.promise}}},[]);return(0,T.useMemo)(()=>({...i,...e,viewportInitialized:r}),[r])}const gd=e=>e.selected,vd="undefined"!=typeof window?window:void 0;const yd={position:"absolute",width:"100%",height:"100%",top:0,left:0},bd=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function Od({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:o=fl.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:h=!0,children:p,noWheelClassName:m,noPanClassName:g,onViewportChange:v,isControlledViewport:y,paneClickDistance:b}){const O=Pc(),w=(0,T.useRef)(null),{userSelectionActive:x,lib:S,connectionInProgress:k}=_c(bd,wc),_=Hc(f),P=(0,T.useRef)();!function(e){const t=Pc();(0,T.useEffect)(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??1))return!1;const n=ru(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",Ks()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(w);const E=(0,T.useCallback)(e=>{v?.({x:e[0],y:e[1],zoom:e[2]}),y||O.setState({transform:e})},[v,y]);return(0,T.useEffect)(()=>{if(w.current){P.current=tc({domNode:w.current,minZoom:c,maxZoom:d,translateExtent:u,viewport:l,paneClickDistance:b,onDraggingChange:e=>O.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=O.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=O.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=O.getState();r?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=P.current.getViewport();return O.setState({panZoom:P.current,transform:[e,t,n],domNode:w.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),(0,T.useEffect)(()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:o,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:_,preventScrolling:h,noPanClassName:g,userSelectionActive:x,noWheelClassName:m,lib:S,onTransformChange:E,connectionInProgress:k})},[e,t,n,r,i,o,a,s,_,h,g,x,m,S,E,k]),(0,$.jsx)("div",{className:"react-flow__renderer",ref:w,style:yd,children:p})}const wd=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function xd(){const{userSelectionActive:e,userSelectionRect:t}=_c(wd,wc);return e&&t?(0,$.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Sd=(e,t)=>n=>{n.target===t.current&&e?.(n)},kd=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function _d({isSelecting:e,selectionKeyPressed:t,selectionMode:n=hl.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:o,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:f,children:h}){const p=Pc(),{userSelectionActive:m,elementsSelectable:g,dragging:v,connectionInProgress:y}=_c(kd,wc),b=g&&(e||m),O=(0,T.useRef)(null),w=(0,T.useRef)(),x=(0,T.useRef)(new Set),S=(0,T.useRef)(new Set),k=(0,T.useRef)(!1),_=(0,T.useRef)(!1),P=e=>{k.current||y?k.current=!1:(s?.(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1}))},E=u?e=>u(e):void 0,C=!0===r||Array.isArray(r)&&r.includes(0);return(0,$.jsxs)("div",{className:ei(["react-flow__pane",{draggable:C,dragging:v,selection:e}]),onClick:b?void 0:Sd(P,O),onContextMenu:Sd(e=>{Array.isArray(r)&&r?.includes(2)?e.preventDefault():l?.(e)},O),onWheel:Sd(E,O),onPointerEnter:b?void 0:c,onPointerDown:b?t=>{const{resetSelectedElements:n,domNode:r}=p.getState();if(w.current=r?.getBoundingClientRect(),!g||!e||0!==t.button||t.target!==O.current||!w.current)return;t.target?.setPointerCapture?.(t.pointerId),_.current=!0,k.current=!1;const{x:i,y:a}=lu(t.nativeEvent,w.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:i,startY:a,x:i,y:a}}),o?.(t)}:d,onPointerMove:b?e=>{const{userSelectionRect:t,transform:r,nodeLookup:i,edgeLookup:o,connectionLookup:a,triggerNodeChanges:s,triggerEdgeChanges:l,defaultEdgeOptions:u}=p.getState();if(!w.current||!t)return;k.current=!0;const{x:c,y:d}=lu(e.nativeEvent,w.current),{startX:f,startY:h}=t,m={startX:f,startY:h,x:c<f?c:f,y:d<h?d:h,width:Math.abs(c-f),height:Math.abs(d-h)},g=x.current,v=S.current;x.current=new Set(_l(i,m,r,n===hl.Partial,!0).map(e=>e.id)),S.current=new Set;const y=u?.selectable??!0;for(const e of x.current){const t=a.get(e);if(t)for(const{edgeId:e}of t.values()){const t=o.get(e);t&&(t.selectable??y)&&S.current.add(e)}}if(!eu(g,x.current)){s(od(i,x.current,!0))}if(!eu(v,S.current)){l(od(o,S.current))}p.setState({userSelectionRect:m,userSelectionActive:!0,nodesSelectionActive:!1})}:d,onPointerUp:b?e=>{if(0!==e.button||!_.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:n}=p.getState();!m&&n&&e.target===O.current&&P?.(e),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:x.current.size>0}),a?.(e),(t||i)&&(k.current=!1),_.current=!1}:void 0,onPointerLeave:f,ref:O,style:yd,children:[h,(0,$.jsx)(xd,{})]})}function Pd({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),u=s.get(e);u?(t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&a)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])):l?.("012",ol(e))}function Ed({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,nodeClickDistance:a}){const s=Pc(),[l,u]=(0,T.useState)(!1),c=(0,T.useRef)();return(0,T.useEffect)(()=>{c.current=Zu({getStoreItems:()=>s.getState(),onNodeMouseDown:t=>{Pd({id:t,store:s,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),(0,T.useEffect)(()=>{if(t)c.current?.destroy();else if(e.current)return c.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:i,nodeClickDistance:a}),()=>{c.current?.destroy()}},[n,r,t,o,e,i]),l}function $d(){const e=Pc(),t=(0,T.useCallback)(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:i,nodesDraggable:o,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:u}=e.getState(),c=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(o),f=r?i[0]:5,h=r?i[1]:5,p=t.direction.x*f*t.factor,m=t.direction.y*h*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+m};r&&(t=Vl(t,i));const{position:o,positionAbsolute:s}=El({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:u,onError:a});e.position=o,e.internals.positionAbsolute=s,c.set(e.id,e)}s(c)},[]);return t}const Td=(0,T.createContext)(null),Cd=Td.Provider;Td.Consumer;const jd=()=>(0,T.useContext)(Td),Nd=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Ad=(0,T.memo)(ud(function({type:e="source",position:t=vl.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:a,onConnect:s,children:l,className:u,onMouseDown:c,onTouchStart:d,...f},h){const p=a||null,m="target"===e,g=Pc(),v=jd(),{connectOnClick:y,noPanClassName:b,rfId:O}=_c(Nd,wc),{connectingFrom:w,connectingTo:x,clickConnecting:S,isPossibleEndHandle:k,connectionInProcess:_,clickConnectionInProcess:P,valid:E}=_c(((e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:o,connection:a}=r,{fromHandle:s,toHandle:l,isValid:u}=a,c=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:s?.nodeId===e&&s?.id===t&&s?.type===n,connectingTo:c,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:o===dl.Strict?s?.type!==n:e!==s?.nodeId||t!==s?.id,connectionInProcess:!!s,clickConnectionInProcess:!!i,valid:c&&u}})(v,p,e),wc);v||g.getState().onError?.("010",rl());const T=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=g.getState(),i={...t,...e};if(r){const{edges:e,setEdges:t}=g.getState();t(vu(i,e))}n?.(i),s?.(i)},C=e=>{if(!v)return;const t=su(e.nativeEvent);if(i&&(t&&0===e.button||!t)){const t=g.getState();Xu.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:m,handleId:p,nodeId:v,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:T,isValidConnection:n||t.isValidConnection,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?c?.(e):d?.(e)};return(0,$.jsx)("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${O}-${v}-${p}-${e}`,className:ei(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,u,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:o,clickconnecting:S,connectingfrom:w,connectingto:x,valid:E,connectionindicator:r&&(!_||k)&&(_||P?o:i)}]),onMouseDown:C,onTouchStart:C,onClick:y?t=>{const{onClickConnectStart:r,onClickConnectEnd:o,connectionClickStartHandle:a,connectionMode:s,isValidConnection:l,lib:u,rfId:c,nodeLookup:d,connection:f}=g.getState();if(!v||!a&&!i)return;if(!a)return r?.(t.nativeEvent,{nodeId:v,handleId:p,handleType:e}),void g.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});const h=iu(t.target),m=n||l,{connection:y,isValid:b}=Xu.isValid(t.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:s,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:m,flowId:c,doc:h,lib:u,nodeLookup:d});b&&y&&T(y);const O=structuredClone(f);delete O.inProgress,O.toPosition=O.toHandle?O.toHandle.position:null,o?.(t,O),g.setState({connectionClickStartHandle:null})}:void 0,ref:h,...f,children:l})}));const Id={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Md={input:function({data:e,isConnectable:t,sourcePosition:n=vl.Bottom}){return(0,$.jsxs)($.Fragment,{children:[e?.label,(0,$.jsx)(Ad,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=vl.Top,sourcePosition:r=vl.Bottom}){return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Ad,{type:"target",position:n,isConnectable:t}),e?.label,(0,$.jsx)(Ad,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=vl.Top}){return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Ad,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}};const Dd=e=>{const{width:t,height:n,x:r,y:i}=kl(e.nodeLookup,{filter:e=>!!e.selected});return{width:Fl(t)?t:null,height:Fl(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Rd({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Pc(),{width:i,height:o,transformString:a,userSelectionActive:s}=_c(Dd,wc),l=$d(),u=(0,T.useRef)(null);if((0,T.useEffect)(()=>{n||u.current?.focus({preventScroll:!0})},[n]),Ed({nodeRef:u}),s||!i||!o)return null;const c=e?t=>{const n=r.getState().nodes.filter(e=>e.selected);e(t,n)}:void 0;return(0,$.jsx)("div",{className:ei(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:(0,$.jsx)("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(Id,e.key)&&(e.preventDefault(),l({direction:Id[e.key],factor:e.shiftKey?4:1}))},style:{width:i,height:o}})})}const Qd="undefined"!=typeof window?window:void 0,zd=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ld({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:O,panOnScrollSpeed:w,panOnScrollMode:x,zoomOnDoubleClick:S,panOnDrag:k,defaultViewport:_,translateExtent:P,minZoom:E,maxZoom:C,preventScrolling:j,onSelectionContextMenu:N,noWheelClassName:A,noPanClassName:I,disableKeyboardA11y:M,onViewportChange:D,isControlledViewport:R}){const{nodesSelectionActive:Q,userSelectionActive:z}=_c(zd),L=Hc(u,{target:Qd}),Z=Hc(m,{target:Qd}),F=Z||k,U=Z||O,V=c&&!0!==F,G=L||z||V;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Pc(),{deleteElements:r}=md(),i=Hc(e,{actInsideInputWithModifier:!1}),o=Hc(t,{target:vd});(0,T.useEffect)(()=>{if(i){const{edges:e,nodes:t}=n.getState();r({nodes:t.filter(gd),edges:e.filter(gd)}),n.setState({nodesSelectionActive:!1})}},[i]),(0,T.useEffect)(()=>{n.setState({multiSelectionActive:o})},[o])}({deleteKeyCode:l,multiSelectionKeyCode:p}),(0,$.jsx)(Od,{onPaneContextMenu:o,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:U,panOnScrollSpeed:w,panOnScrollMode:x,zoomOnDoubleClick:S,panOnDrag:!L&&F,defaultViewport:_,translateExtent:P,minZoom:E,maxZoom:C,zoomActivationKeyCode:g,preventScrolling:j,noWheelClassName:A,noPanClassName:I,onViewportChange:D,isControlledViewport:R,paneClickDistance:s,children:(0,$.jsxs)(_d,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:F,isSelecting:!!G,selectionMode:d,selectionKeyPressed:L,selectionOnDrag:V,children:[e,Q&&(0,$.jsx)(Rd,{onSelectionContextMenu:N,noPanClassName:I,disableKeyboardA11y:M})]})})}Ld.displayName="FlowRenderer";const Zd=(0,T.memo)(Ld);function Fd(e){const t=_c((0,T.useCallback)((e=>t=>e?_l(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()))(e),[e]),wc);return t}const Ud=e=>e.updateNodeInternals;function Vd({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:o,onDoubleClick:a,nodesDraggable:s,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:p,rfId:m,nodeTypes:g,nodeClickDistance:v,onError:y}){const{node:b,internals:O,isParent:w}=_c(t=>{const n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},wc);let x=b.type||"default",S=g?.[x]||Md[x];void 0===S&&(y?.("003",Hs(x)),x="default",S=g?.default||Md.default);const k=!!(b.draggable||s&&void 0===b.draggable),_=!!(b.selectable||l&&void 0===b.selectable),P=!!(b.connectable||u&&void 0===b.connectable),E=!!(b.focusable||c&&void 0===b.focusable),C=Pc(),j=Kl(b),N=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=Pc(),o=(0,T.useRef)(null),a=(0,T.useRef)(null),s=(0,T.useRef)(e.sourcePosition),l=(0,T.useRef)(e.targetPosition),u=(0,T.useRef)(t),c=n&&!!e.internals.handleBounds;return(0,T.useEffect)(()=>{!o.current||e.hidden||c&&a.current===o.current||(a.current&&r?.unobserve(a.current),r?.observe(o.current),a.current=o.current)},[c,e.hidden]),(0,T.useEffect)(()=>()=>{a.current&&(r?.unobserve(a.current),a.current=null)},[]),(0,T.useEffect)(()=>{if(o.current){const n=u.current!==t,r=s.current!==e.sourcePosition,a=l.current!==e.targetPosition;(n||r||a)&&(u.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}({node:b,nodeType:x,hasDimensions:j,resizeObserver:d}),A=Ed({nodeRef:N,disabled:b.hidden||!k,noDragClassName:f,handleSelector:b.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:v}),I=$d();if(b.hidden)return null;const M=Hl(b),D=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(b),R=_||k||t||n||r||i,Q=n?e=>n(e,{...O.userNode}):void 0,z=r?e=>r(e,{...O.userNode}):void 0,L=i?e=>i(e,{...O.userNode}):void 0,Z=o?e=>o(e,{...O.userNode}):void 0,F=a?e=>a(e,{...O.userNode}):void 0;return(0,$.jsx)("div",{className:ei(["react-flow__node",`react-flow__node-${x}`,{[h]:k},b.className,{selected:b.selected,selectable:_,parent:w,draggable:k,dragging:A}]),ref:N,style:{zIndex:O.z,transform:`translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:j?"visible":"hidden",...b.style,...D},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Q,onMouseMove:z,onMouseLeave:L,onContextMenu:Z,onClick:n=>{const{selectNodesOnDrag:r,nodeDragThreshold:i}=C.getState();_&&(!r||!k||i>0)&&Pd({id:e,store:C,nodeRef:N}),t&&t(n,{...O.userNode})},onDoubleClick:F,onKeyDown:E?t=>{if(!au(t.nativeEvent)&&!p)if(ul.includes(t.key)&&_){const n="Escape"===t.key;Pd({id:e,store:C,unselect:n,nodeRef:N})}else if(k&&b.selected&&Object.prototype.hasOwnProperty.call(Id,t.key)){t.preventDefault();const{ariaLabelConfig:e}=C.getState();C.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~O.positionAbsolute.x,y:~~O.positionAbsolute.y})}),I({direction:Id[t.key],factor:t.shiftKey?4:1})}}:void 0,tabIndex:E?0:void 0,onFocus:E?()=>{if(p||!N.current?.matches(":focus-visible"))return;const{transform:t,width:n,height:r,autoPanOnNodeFocus:i,setCenter:o}=C.getState();if(!i)return;_l(new Map([[e,b]]),{x:0,y:0,width:n,height:r},t,!0).length>0||o(b.position.x+M.width/2,b.position.y+M.height/2,{zoom:t[2]})}:void 0,role:b.ariaRole??(E?"group":void 0),"aria-roledescription":"node","aria-describedby":p?void 0:`${Tc}-${m}`,"aria-label":b.ariaLabel,...b.domAttributes,children:(0,$.jsx)(Cd,{value:e,children:(0,$.jsx)(S,{id:e,data:b.data,type:x,positionAbsoluteX:O.positionAbsolute.x,positionAbsoluteY:O.positionAbsolute.y,selected:b.selected??!1,selectable:_,draggable:k,deletable:b.deletable??!0,isConnectable:P,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:A,dragHandle:b.dragHandle,zIndex:O.z,parentId:b.parentId,...M})})})}const Gd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Bd(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:o}=_c(Gd,wc),a=Fd(e.onlyRenderVisibleElements),s=function(){const e=_c(Ud),[t]=(0,T.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{const n=new Map;t.forEach(e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,T.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,$.jsx)("div",{className:"react-flow__nodes",style:yd,children:a.map(a=>(0,$.jsx)(Vd,{id:a,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:o},a))})}Bd.displayName="NodeRenderer";const Xd=(0,T.memo)(Bd);const Yd={[gl.Arrow]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return(0,$.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[gl.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,$.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const Wd=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const l=function(e){const t=Pc();return(0,T.useMemo)(()=>Object.prototype.hasOwnProperty.call(Yd,e)?Yd[e]:(t.getState().onError?.("009",tl(e)),null),[e])}(t);return l?(0,$.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0",children:(0,$.jsx)(l,{color:n,strokeWidth:a})}):null},qd=({defaultColor:e,rfId:t})=>{const n=_c(e=>e.edges),r=_c(e=>e.defaultEdgeOptions),i=(0,T.useMemo)(()=>{const i=function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((e,a)=>([a.markerStart||r,a.markerEnd||i].forEach(r=>{if(r&&"object"==typeof r){const i=Eu(r,t);o.has(i)||(e.push({id:i,color:r.color||n,...r}),o.add(i))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd});return i},[n,r,t,e]);return i.length?(0,$.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,$.jsx)("defs",{children:i.map(e=>(0,$.jsx)(Wd,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};qd.displayName="MarkerDefinitions";var Hd=(0,T.memo)(qd);function Kd({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:o,labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:l,className:u,...c}){const[d,f]=(0,T.useState)({x:1,y:0,width:0,height:0}),h=ei(["react-flow__edge-textwrapper",u]),p=(0,T.useRef)(null);return(0,T.useEffect)(()=>{if(p.current){const e=p.current.getBBox();f({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n?(0,$.jsxs)("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[i&&(0,$.jsx)("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),(0,$.jsx)("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:p,style:r,children:n}),l]}):null}Kd.displayName="EdgeText";const Jd=(0,T.memo)(Kd);function ef({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("path",{...c,d:e,fill:"none",className:ei(["react-flow__edge-path",c.className])}),u?(0,$.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,r&&Fl(t)&&Fl(n)?(0,$.jsx)(Jd,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l}):null]})}function tf({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===vl.Left||e===vl.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function nf({sourceX:e,sourceY:t,sourcePosition:n=vl.Bottom,targetX:r,targetY:i,targetPosition:o=vl.Top}){const[a,s]=tf({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=tf({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,d,f,h]=cu({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${s} ${l},${u} ${r},${i}`,c,d,f,h]}function rf(e){return(0,T.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:a,targetPosition:s,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:v})=>{const[y,b,O]=nf({sourceX:n,sourceY:r,sourcePosition:a,targetX:i,targetY:o,targetPosition:s}),w=e.isInternal?void 0:t;return(0,$.jsx)(ef,{id:w,path:y,labelX:b,labelY:O,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:v})})}const of=rf({isInternal:!1}),af=rf({isInternal:!0});function sf(e){return(0,T.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,sourcePosition:h=vl.Bottom,targetPosition:p=vl.Top,markerEnd:m,markerStart:g,pathOptions:v,interactionWidth:y})=>{const[b,O,w]=xu({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:o,targetPosition:p,borderRadius:v?.borderRadius,offset:v?.offset,stepPosition:v?.stepPosition}),x=e.isInternal?void 0:t;return(0,$.jsx)(ef,{id:x,path:b,labelX:O,labelY:w,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:g,interactionWidth:y})})}of.displayName="SimpleBezierEdge",af.displayName="SimpleBezierEdgeInternal";const lf=sf({isInternal:!1}),uf=sf({isInternal:!0});function cf(e){return(0,T.memo)(({id:t,...n})=>{const r=e.isInternal?void 0:t;return(0,$.jsx)(lf,{...n,id:r,pathOptions:(0,T.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}lf.displayName="SmoothStepEdge",uf.displayName="SmoothStepEdgeInternal";const df=cf({isInternal:!1}),ff=cf({isInternal:!0});function hf(e){return(0,T.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:m})=>{const[g,v,y]=yu({sourceX:n,sourceY:r,targetX:i,targetY:o}),b=e.isInternal?void 0:t;return(0,$.jsx)(ef,{id:b,path:g,labelX:v,labelY:y,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:m})})}df.displayName="StepEdge",ff.displayName="StepEdgeInternal";const pf=hf({isInternal:!1}),mf=hf({isInternal:!0});function gf(e){return(0,T.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:a=vl.Bottom,targetPosition:s=vl.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,pathOptions:v,interactionWidth:y})=>{const[b,O,w]=hu({sourceX:n,sourceY:r,sourcePosition:a,targetX:i,targetY:o,targetPosition:s,curvature:v?.curvature}),x=e.isInternal?void 0:t;return(0,$.jsx)(ef,{id:x,path:b,labelX:O,labelY:w,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:y})})}pf.displayName="StraightEdge",mf.displayName="StraightEdgeInternal";const vf=gf({isInternal:!1}),yf=gf({isInternal:!0});vf.displayName="BezierEdge",yf.displayName="BezierEdgeInternal";const bf={default:yf,straight:mf,step:ff,smoothstep:uf,simplebezier:af},Of={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},wf=(e,t,n)=>n===vl.Left?e-t:n===vl.Right?e+t:e,xf=(e,t,n)=>n===vl.Top?e-t:n===vl.Bottom?e+t:e,Sf="react-flow__edgeupdater";function kf({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:s}){return(0,$.jsx)("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:ei([Sf,`${Sf}-${s}`]),cx:wf(t,r,e),cy:xf(n,r,e),r,stroke:"transparent",fill:"transparent"})}function _f({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:o,targetY:a,sourcePosition:s,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){const p=Pc(),m=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:r,domNode:i,isValidConnection:o,connectionMode:a,connectionRadius:s,lib:l,onConnectStart:h,onConnectEnd:m,cancelConnection:g,nodeLookup:v,rfId:y,panBy:b,updateConnection:O}=p.getState(),w="target"===t.type;Xu.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:a,connectionRadius:s,domNode:i,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:y,cancelConnection:g,panBy:b,isValidConnection:o,onConnect:e=>u?.(n,e),onConnectStart:(r,i)=>{f(!0),c?.(e,n,t.type),h?.(r,i)},onConnectEnd:m,onReconnectEnd:(e,r)=>{f(!1),d?.(e,n,t.type,r)},updateConnection:O,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle,dragThreshold:p.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},g=()=>h(!0),v=()=>h(!1);return(0,$.jsxs)($.Fragment,{children:[(!0===e||"source"===e)&&(0,$.jsx)(kf,{position:s,centerX:r,centerY:i,radius:t,onMouseDown:e=>m(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:g,onMouseOut:v,type:"source"}),(!0===e||"target"===e)&&(0,$.jsx)(kf,{position:l,centerX:o,centerY:a,radius:t,onMouseDown:e=>m(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:g,onMouseOut:v,type:"target"})]})}function Pf({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:o,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:u,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,rfId:p,edgeTypes:m,noPanClassName:g,onError:v,disableKeyboardA11y:y}){let b=_c(t=>t.edgeLookup.get(e));const O=_c(e=>e.defaultEdgeOptions);b=O?{...O,...b}:b;let w=b.type||"default",x=m?.[w]||bf[w];void 0===x&&(v?.("011",il(w)),w="default",x=m?.default||bf.default);const S=!!(b.focusable||t&&void 0===b.focusable),k=void 0!==d&&(b.reconnectable||n&&void 0===b.reconnectable),_=!!(b.selectable||r&&void 0===b.selectable),P=(0,T.useRef)(null),[E,C]=(0,T.useState)(!1),[j,N]=(0,T.useState)(!1),A=Pc(),{zIndex:I,sourceX:M,sourceY:D,targetX:R,targetY:Q,sourcePosition:z,targetPosition:L}=_c((0,T.useCallback)(t=>{const n=t.nodeLookup.get(b.source),r=t.nodeLookup.get(b.target);if(!n||!r)return{zIndex:b.zIndex,...Of};const i=function(e){const{sourceNode:t,targetNode:n}=e;if(!Su(t)||!Su(n))return null;const r=t.internals.handleBounds||ku(t.handles),i=n.internals.handleBounds||ku(n.handles),o=Pu(r?.source??[],e.sourceHandle),a=Pu(e.connectionMode===dl.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!o||!a)return e.onError?.("008",nl(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=o?.position||vl.Bottom,l=a?.position||vl.Top,u=_u(t,o,s),c=_u(n,a,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:s,targetPosition:l}}({id:e,sourceNode:n,targetNode:r,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:t.connectionMode,onError:v}),o=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){return void 0!==r?r:(i&&n?1e3:0)+Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0)}({selected:b.selected,zIndex:b.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect});return{zIndex:o,...i||Of}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),wc),Z=(0,T.useMemo)(()=>b.markerStart?`url('#${Eu(b.markerStart,p)}')`:void 0,[b.markerStart,p]),F=(0,T.useMemo)(()=>b.markerEnd?`url('#${Eu(b.markerEnd,p)}')`:void 0,[b.markerEnd,p]);if(b.hidden||null===M||null===D||null===R||null===Q)return null;const U=o?e=>{o(e,{...b})}:void 0,V=a?e=>{a(e,{...b})}:void 0,G=s?e=>{s(e,{...b})}:void 0,B=l?e=>{l(e,{...b})}:void 0,X=u?e=>{u(e,{...b})}:void 0;return(0,$.jsx)("svg",{style:{zIndex:I},children:(0,$.jsxs)("g",{className:ei(["react-flow__edge",`react-flow__edge-${w}`,b.className,g,{selected:b.selected,animated:b.animated,inactive:!_&&!i,updating:E,selectable:_}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:o}=A.getState();_&&(A.setState({nodesSelectionActive:!1}),b.selected&&o?(r({nodes:[],edges:[b]}),P.current?.blur()):n([e])),i&&i(t,b)},onDoubleClick:U,onContextMenu:V,onMouseEnter:G,onMouseMove:B,onMouseLeave:X,onKeyDown:S?t=>{if(!y&&ul.includes(t.key)&&_){const{unselectNodesAndEdges:n,addSelectedEdges:r}=A.getState();"Escape"===t.key?(P.current?.blur(),n({edges:[b]})):r([e])}}:void 0,tabIndex:S?0:void 0,role:b.ariaRole??(S?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===b.ariaLabel?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":S?`${Cc}-${p}`:void 0,ref:P,...b.domAttributes,children:[!j&&(0,$.jsx)(x,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:_,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:M,sourceY:D,targetX:R,targetY:Q,sourcePosition:z,targetPosition:L,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:Z,markerEnd:F,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),k&&(0,$.jsx)(_f,{edge:b,isReconnectable:k,reconnectRadius:c,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,sourceX:M,sourceY:D,targetX:R,targetY:Q,sourcePosition:z,targetPosition:L,setUpdateHover:C,setReconnecting:N})]})})}const Ef=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function $f({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:o,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:m}){const{edgesFocusable:g,edgesReconnectable:v,elementsSelectable:y,onError:b}=_c(Ef,wc),O=(w=t,_c((0,T.useCallback)(e=>{if(!w)return e.edges.map(e=>e.id);const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),i=e.nodeLookup.get(n.target);r&&i&&mu({sourceNode:r,targetNode:i,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[w]),wc));var w;return(0,$.jsxs)("div",{className:"react-flow__edges",children:[(0,$.jsx)(Hd,{defaultColor:e,rfId:n}),O.map(e=>(0,$.jsx)(Pf,{id:e,edgesFocusable:g,edgesReconnectable:v,elementsSelectable:y,noPanClassName:i,onReconnect:o,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:m},e))]})}$f.displayName="EdgeRenderer";const Tf=(0,T.memo)($f),Cf=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function jf({children:e}){const t=_c(Cf);return(0,$.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const Nf=e=>e.panZoom?.syncViewport;function Af(e){return e.connection.inProgress?{...e.connection,to:Gl(e.connection.to,e.transform)}:{...e.connection}}function If(e){const t=function(e){if(e)return t=>{const n=Af(t);return e(n)};return Af}(e);return _c(t,wc)}const Mf=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Df({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:o,height:a,isValid:s,inProgress:l}=_c(Mf,wc);return!!(o&&i&&l)?(0,$.jsx)("svg",{style:e,width:o,height:a,className:"react-flow__connectionline react-flow__container",children:(0,$.jsx)("g",{className:ei(["react-flow__connection",bl(s)]),children:(0,$.jsx)(Rf,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const Rf=({style:e,type:t=ml.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:o,fromNode:a,fromHandle:s,fromPosition:l,to:u,toNode:c,toHandle:d,toPosition:f}=If();if(!i)return;if(n)return(0,$.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:f,connectionStatus:bl(r),toNode:c,toHandle:d});let h="";const p={sourceX:o.x,sourceY:o.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case ml.Bezier:[h]=hu(p);break;case ml.SimpleBezier:[h]=nf(p);break;case ml.Step:[h]=xu({...p,borderRadius:0});break;case ml.SmoothStep:[h]=xu(p);break;default:[h]=yu(p)}return(0,$.jsx)("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Rf.displayName="ConnectionLine";const Qf={};function zf(e=Qf){(0,T.useRef)(e),Pc();(0,T.useEffect)(()=>{0},[e])}function Lf({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:o,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:m,connectionLineComponent:g,connectionLineContainerStyle:v,selectionKeyCode:y,selectionOnDrag:b,selectionMode:O,multiSelectionKeyCode:w,panActivationKeyCode:x,zoomActivationKeyCode:S,deleteKeyCode:k,onlyRenderVisibleElements:_,elementsSelectable:P,defaultViewport:E,translateExtent:C,minZoom:j,maxZoom:N,preventScrolling:A,defaultMarkerColor:I,zoomOnScroll:M,zoomOnPinch:D,panOnScroll:R,panOnScrollSpeed:Q,panOnScrollMode:z,zoomOnDoubleClick:L,panOnDrag:Z,onPaneClick:F,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:G,onPaneScroll:B,onPaneContextMenu:X,paneClickDistance:Y,nodeClickDistance:W,onEdgeContextMenu:q,onEdgeMouseEnter:H,onEdgeMouseMove:K,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,noDragClassName:ie,noWheelClassName:oe,noPanClassName:ae,disableKeyboardA11y:se,nodeExtent:le,rfId:ue,viewport:ce,onViewportChange:de}){return zf(e),zf(t),Pc(),(0,T.useRef)(!1),(0,T.useEffect)(()=>{},[]),function(e){const t=md(),n=(0,T.useRef)(!1);(0,T.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(n),function(e){const t=_c(Nf),n=Pc();(0,T.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ce),(0,$.jsx)(Zd,{onPaneClick:F,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:G,onPaneContextMenu:X,onPaneScroll:B,paneClickDistance:Y,deleteKeyCode:k,selectionKeyCode:y,selectionOnDrag:b,selectionMode:O,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:w,panActivationKeyCode:x,zoomActivationKeyCode:S,elementsSelectable:P,zoomOnScroll:M,zoomOnPinch:D,zoomOnDoubleClick:L,panOnScroll:R,panOnScrollSpeed:Q,panOnScrollMode:z,panOnDrag:Z,defaultViewport:E,translateExtent:C,minZoom:j,maxZoom:N,onSelectionContextMenu:d,preventScrolling:A,noDragClassName:ie,noWheelClassName:oe,noPanClassName:ae,disableKeyboardA11y:se,onViewportChange:de,isControlledViewport:!!ce,children:(0,$.jsxs)(jf,{children:[(0,$.jsx)(Tf,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:a,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,onlyRenderVisibleElements:_,onEdgeContextMenu:q,onEdgeMouseEnter:H,onEdgeMouseMove:K,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:I,noPanClassName:ae,disableKeyboardA11y:se,rfId:ue}),(0,$.jsx)(Df,{style:m,type:p,component:g,containerStyle:v}),(0,$.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,$.jsx)(Xd,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:W,onlyRenderVisibleElements:_,noPanClassName:ae,noDragClassName:ie,disableKeyboardA11y:se,nodeExtent:le,rfId:ue}),(0,$.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Lf.displayName="GraphView";const Zf=(0,T.memo)(Lf),Ff=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:a,fitViewOptions:s,minZoom:l=.5,maxZoom:u=2,nodeOrigin:c,nodeExtent:d}={})=>{const f=new Map,h=new Map,p=new Map,m=new Map,g=r??t??[],v=n??e??[],y=c??[0,0],b=d??ll;Ru(p,m,g);const O=Nu(v,f,h,{nodeOrigin:y,nodeExtent:b,elevateNodesOnSelect:!1});let w=[0,0,1];if(a&&i&&o){const e=kl(f,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=Yl(e,i,o,l,u,s?.padding??.1);w=[t,n,r]}return{rfId:"1",width:i??0,height:o??0,transform:w,nodes:v,nodesInitialized:O,nodeLookup:f,parentLookup:h,edges:g,edgeLookup:m,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:l,maxZoom:u,translateExtent:ll,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:dl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:s,fitViewResolver:null,connection:{...pl},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Ul,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:cl}},Uf=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d})=>{return f=(f,h)=>{async function p(){const{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:i,height:o,minZoom:a,maxZoom:s}=h();t&&(await Pl({nodes:e,width:i,height:o,panZoom:t,minZoom:a,maxZoom:s},n),r?.resolve(!0),f({fitViewResolver:null}))}return{...Ff({nodes:e,edges:t,width:i,height:o,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:i,fitViewQueued:o}=h(),a=Nu(e,t,n,{nodeOrigin:r,nodeExtent:d,elevateNodesOnSelect:i,checkEquality:!0});o&&a?(p(),f({nodes:e,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):f({nodes:e,nodesInitialized:a})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=h();Ru(t,n,e),f({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=h();t(e),f({hasDefaultNodes:!0})}if(t){const{setEdges:e}=h();e(t),f({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:i,nodeOrigin:o,nodeExtent:a,debug:s,fitViewQueued:l}=h(),{changes:u,updatedInternals:c}=function(e,t,n,r,i,o){const a=r?.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],u=window.getComputedStyle(a),{m22:c}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const r of e.values()){const e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),s=!0;continue}const a=ru(r.nodeElement),u=e.measured.width!==a.width||e.measured.height!==a.height;if(a.width&&a.height&&(u||!e.internals.handleBounds||r.force)){const f=r.nodeElement.getBoundingClientRect(),h=ql(e.extent)?e.extent:o;let{positionAbsolute:p}=e.internals;e.parentId&&"parent"===e.extent?p=jl(p,a,t.get(e.parentId)):h&&(p=Cl(p,h,a));const m={...e,measured:a,internals:{...e.internals,positionAbsolute:p,handleBounds:{source:uu("source",r.nodeElement,f,c,e.id),target:uu("target",r.nodeElement,f,c,e.id)}}};t.set(e.id,m),e.parentId&&Au(m,t,n,{nodeOrigin:i}),s=!0,u&&(l.push({id:e.id,type:"dimensions",dimensions:a}),e.expandParent&&e.parentId&&d.push({id:e.id,parentId:e.parentId,rect:Rl(m,i)}))}}if(d.length>0){const e=Mu(d,t,n,i);l.push(...e)}return{changes:l,updatedInternals:s}}(e,n,r,i,o,a);c&&(function(e,t,n){const r=Cu($u,n);for(const n of e.values())if(n.parentId)Au(n,e,t,r);else{const e=xl(n,r.nodeOrigin),t=ql(n.extent)?n.extent:r.nodeExtent,i=Cl(e,t,Hl(n));n.internals.positionAbsolute=i}}(n,r,{nodeOrigin:o,nodeExtent:a}),l?(p(),f({fitViewQueued:!1,fitViewOptions:void 0})):f({}),u?.length>0&&(s&&console.log("React Flow: trigger node changes",u),t?.(u)))},updateNodePositions:(e,t=!1)=>{const n=[],r=[],{nodeLookup:i,triggerNodeChanges:o}=h();for(const[o,a]of e){const e=i.get(o),s=!!(e?.expandParent&&e?.parentId&&a?.position),l={id:o,type:"position",position:s?{x:Math.max(0,a.position.x),y:Math.max(0,a.position.y)}:a.position,dragging:t};s&&e.parentId&&n.push({id:o,parentId:e.parentId,rect:{...a.internals.positionAbsolute,width:a.measured.width??0,height:a.measured.height??0}}),r.push(l)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=h(),o=Mu(n,i,e,t);r.push(...o)}o(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:i,debug:o}=h();e?.length&&(i&&n(nd(e,r)),o&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:i,debug:o}=h();e?.length&&(i&&n(rd(e,r)),o&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:o}=h();t?i(e.map(e=>id(e,!0))):(i(od(r,new Set([...e]),!0)),o(od(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:o}=h();t?o(e.map(e=>id(e,!0))):(o(od(n,new Set([...e]))),i(od(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:r,nodeLookup:i,triggerNodeChanges:o,triggerEdgeChanges:a}=h(),s=t||n,l=(e||r).map(e=>{const t=i.get(e.id);return t&&(t.selected=!1),id(e.id,!1)}),u=s.map(e=>id(e.id,!1));o(l),a(u)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=h();t?.setScaleExtent([e,n]),f({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=h();t?.setScaleExtent([n,e]),f({maxZoom:e})},setTranslateExtent:e=>{h().panZoom?.setTranslateExtent(e),f({translateExtent:e})},setPaneClickDistance:e=>{h().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:i}=h();if(!i)return;const o=t.reduce((e,t)=>t.selected?[...e,id(t.id,!1)]:e,[]),a=e.reduce((e,t)=>t.selected?[...e,id(t.id,!1)]:e,[]);n(o),r(a)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:i,elevateNodesOnSelect:o,nodeExtent:a}=h();e[0][0]===a[0][0]&&e[0][1]===a[0][1]&&e[1][0]===a[1][0]&&e[1][1]===a[1][1]||(Nu(t,n,r,{nodeOrigin:i,nodeExtent:e,elevateNodesOnSelect:o,checkEquality:!1}),f({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:i,translateExtent:o}=h();return async function({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}({delta:e,panZoom:i,transform:t,translateExtent:o,width:n,height:r})},setCenter:async(e,t,n)=>{const{width:r,height:i,maxZoom:o,panZoom:a}=h();if(!a)return Promise.resolve(!1);const s=void 0!==n?.zoom?n.zoom:o;return await a.setViewport({x:r/2-e*s,y:i/2-t*s,zoom:s},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{f({connection:{...pl}})},updateConnection:e=>{f({connection:e})},reset:()=>f({...Ff()})}},h=Object.is,f?Oc(f,h):Oc;var f,h};function Vf({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:o,initialMinZoom:a,initialMaxZoom:s,initialFitViewOptions:l,fitView:u,nodeOrigin:c,nodeExtent:d,children:f}){const[h]=(0,T.useState)(()=>Uf({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:u,minZoom:a,maxZoom:s,fitViewOptions:l,nodeOrigin:c,nodeExtent:d}));return(0,$.jsx)(Sc,{value:h,children:(0,$.jsx)(hd,{children:f})})}function Gf({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f}){return(0,T.useContext)(xc)?(0,$.jsx)($.Fragment,{children:e}):(0,$.jsx)(Vf,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:a,fitView:s,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:c,nodeOrigin:d,nodeExtent:f,children:e})}const Bf={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var Xf=ud(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o,edgeTypes:a,onNodeClick:s,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:v,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:O,onNodeContextMenu:w,onNodeDoubleClick:x,onNodeDragStart:S,onNodeDrag:k,onNodeDragStop:_,onNodesDelete:P,onEdgesDelete:E,onDelete:C,onSelectionChange:j,onSelectionDragStart:N,onSelectionDrag:A,onSelectionDragStop:I,onSelectionContextMenu:M,onSelectionStart:D,onSelectionEnd:R,onBeforeDelete:Q,connectionMode:z,connectionLineType:L=ml.Bezier,connectionLineStyle:Z,connectionLineComponent:F,connectionLineContainerStyle:U,deleteKeyCode:V="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:B=!1,selectionMode:X=hl.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:W=(Wl()?"Meta":"Control"),zoomActivationKeyCode:q=(Wl()?"Meta":"Control"),snapToGrid:H,snapGrid:K,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:ee,nodesDraggable:te,autoPanOnNodeFocus:ne,nodesConnectable:re,nodesFocusable:ie,nodeOrigin:oe=Uc,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le=!0,defaultViewport:ue=Vc,minZoom:ce=.5,maxZoom:de=2,translateExtent:fe=ll,preventScrolling:he=!0,nodeExtent:pe,defaultMarkerColor:me="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:ve=!0,panOnScroll:ye=!1,panOnScrollSpeed:be=.5,panOnScrollMode:Oe=fl.Free,zoomOnDoubleClick:we=!0,panOnDrag:xe=!0,onPaneClick:Se,onPaneMouseEnter:ke,onPaneMouseMove:_e,onPaneMouseLeave:Pe,onPaneScroll:Ee,onPaneContextMenu:$e,paneClickDistance:Te=0,nodeClickDistance:Ce=0,children:je,onReconnect:Ne,onReconnectStart:Ae,onReconnectEnd:Ie,onEdgeContextMenu:Me,onEdgeDoubleClick:De,onEdgeMouseEnter:Re,onEdgeMouseMove:Qe,onEdgeMouseLeave:ze,reconnectRadius:Le=10,onNodesChange:Ze,onEdgesChange:Fe,noDragClassName:Ue="nodrag",noWheelClassName:Ve="nowheel",noPanClassName:Ge="nopan",fitView:Be,fitViewOptions:Xe,connectOnClick:Ye,attributionPosition:We,proOptions:qe,defaultEdgeOptions:He,elevateNodesOnSelect:Ke,elevateEdgesOnSelect:Je,disableKeyboardA11y:et=!1,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:rt,connectionRadius:it,isValidConnection:ot,onError:at,style:st,id:lt,nodeDragThreshold:ut,connectionDragThreshold:ct,viewport:dt,onViewportChange:ft,width:ht,height:pt,colorMode:mt="light",debug:gt,onScroll:vt,ariaLabelConfig:yt,...bt},Ot){const wt=lt||"1",xt=function(e){const[t,n]=(0,T.useState)("system"===e?null:e);return(0,T.useEffect)(()=>{if("system"!==e)return void n(e);const t=Wc(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}},[e]),null!==t?t:Wc()?.matches?"dark":"light"}(mt),St=(0,T.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),vt?.(e)},[vt]);return(0,$.jsx)("div",{"data-testid":"rf__wrapper",...bt,onScroll:St,style:{...st,...Bf},ref:Ot,className:ei(["react-flow",i,xt]),id:lt,role:"application",children:(0,$.jsxs)(Gf,{nodes:e,edges:t,width:ht,height:pt,fitView:Be,fitViewOptions:Xe,minZoom:ce,maxZoom:de,nodeOrigin:oe,nodeExtent:pe,children:[(0,$.jsx)(Zf,{onInit:u,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:O,onNodeContextMenu:w,onNodeDoubleClick:x,nodeTypes:o,edgeTypes:a,connectionLineType:L,connectionLineStyle:Z,connectionLineComponent:F,connectionLineContainerStyle:U,selectionKeyCode:G,selectionOnDrag:B,selectionMode:X,deleteKeyCode:V,multiSelectionKeyCode:W,panActivationKeyCode:Y,zoomActivationKeyCode:q,onlyRenderVisibleElements:J,defaultViewport:ue,translateExtent:fe,minZoom:ce,maxZoom:de,preventScrolling:he,zoomOnScroll:ge,zoomOnPinch:ve,zoomOnDoubleClick:we,panOnScroll:ye,panOnScrollSpeed:be,panOnScrollMode:Oe,panOnDrag:xe,onPaneClick:Se,onPaneMouseEnter:ke,onPaneMouseMove:_e,onPaneMouseLeave:Pe,onPaneScroll:Ee,onPaneContextMenu:$e,paneClickDistance:Te,nodeClickDistance:Ce,onSelectionContextMenu:M,onSelectionStart:D,onSelectionEnd:R,onReconnect:Ne,onReconnectStart:Ae,onReconnectEnd:Ie,onEdgeContextMenu:Me,onEdgeDoubleClick:De,onEdgeMouseEnter:Re,onEdgeMouseMove:Qe,onEdgeMouseLeave:ze,reconnectRadius:Le,defaultMarkerColor:me,noDragClassName:Ue,noWheelClassName:Ve,noPanClassName:Ge,rfId:wt,disableKeyboardA11y:et,nodeExtent:pe,viewport:dt,onViewportChange:ft}),(0,$.jsx)(Yc,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:v,nodesDraggable:te,autoPanOnNodeFocus:ne,nodesConnectable:re,nodesFocusable:ie,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le,elevateNodesOnSelect:Ke,elevateEdgesOnSelect:Je,minZoom:ce,maxZoom:de,nodeExtent:pe,onNodesChange:Ze,onEdgesChange:Fe,snapToGrid:H,snapGrid:K,connectionMode:z,translateExtent:fe,connectOnClick:Ye,defaultEdgeOptions:He,fitView:Be,fitViewOptions:Xe,onNodesDelete:P,onEdgesDelete:E,onDelete:C,onNodeDragStart:S,onNodeDrag:k,onNodeDragStop:_,onSelectionDrag:A,onSelectionDragStart:N,onSelectionDragStop:I,onMove:c,onMoveStart:d,onMoveEnd:f,noPanClassName:Ge,nodeOrigin:oe,rfId:wt,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:rt,onError:at,connectionRadius:it,isValidConnection:ot,selectNodesOnDrag:ee,nodeDragThreshold:ut,connectionDragThreshold:ct,onBeforeDelete:Q,paneClickDistance:Te,debug:gt,ariaLabelConfig:yt}),(0,$.jsx)(Fc,{onSelectionChange:j}),je,(0,$.jsx)(Dc,{proOptions:qe,position:We}),(0,$.jsx)(Ic,{rfId:wt,disableKeyboardA11y:et})]})})});const Yf=e=>e.nodes;const Wf=e=>e.edges;function qf(){return _c(Wf,wc)}al();function Hf({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,$.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ei(["react-flow__background-pattern",n,r])})}function Kf({radius:e,className:t}){return(0,$.jsx)("circle",{cx:e,cy:e,r:e,className:ei(["react-flow__background-pattern","dots",t])})}var Jf;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Jf||(Jf={}));const eh={[Jf.Dots]:1,[Jf.Lines]:1,[Jf.Cross]:6},th=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function nh({id:e,variant:t=Jf.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=0,color:a,bgColor:s,style:l,className:u,patternClassName:c}){const d=(0,T.useRef)(null),{transform:f,patternId:h}=_c(th,wc),p=r||eh[t],m=t===Jf.Dots,g=t===Jf.Cross,v=Array.isArray(n)?n:[n,n],y=[v[0]*f[2]||1,v[1]*f[2]||1],b=p*f[2],O=Array.isArray(o)?o:[o,o],w=g?[b,b]:y,x=[O[0]*f[2]||1+w[0]/2,O[1]*f[2]||1+w[1]/2],S=`${h}${e||""}`;return(0,$.jsxs)("svg",{className:ei(["react-flow__background",u]),style:{...l,...yd,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:d,"data-testid":"rf__background",children:[(0,$.jsx)("pattern",{id:S,x:f[0]%y[0],y:f[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`,children:m?(0,$.jsx)(Kf,{radius:b/2,className:c}):(0,$.jsx)(Hf,{dimensions:w,lineWidth:i,variant:t,className:c})}),(0,$.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}nh.displayName="Background";const rh=(0,T.memo)(nh);function ih(){return(0,$.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,$.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function oh(){return(0,$.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,$.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function ah(){return(0,$.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,$.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sh(){return(0,$.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,$.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function lh(){return(0,$.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,$.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function uh({children:e,className:t,...n}){return(0,$.jsx)("button",{type:"button",className:ei(["react-flow__controls-button",t]),...n,children:e})}const ch=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function dh({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:s,onInteractiveChange:l,className:u,children:c,position:d="bottom-left",orientation:f="vertical","aria-label":h}){const p=Pc(),{isInteractive:m,minZoomReached:g,maxZoomReached:v,ariaLabelConfig:y}=_c(ch,wc),{zoomIn:b,zoomOut:O,fitView:w}=md(),x="horizontal"===f?"horizontal":"vertical";return(0,$.jsxs)(Mc,{className:ei(["react-flow__controls",x,u]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??y["controls.ariaLabel"],children:[t&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(uh,{onClick:()=>{b(),o?.()},className:"react-flow__controls-zoomin",title:y["controls.zoomIn.ariaLabel"],"aria-label":y["controls.zoomIn.ariaLabel"],disabled:v,children:(0,$.jsx)(ih,{})}),(0,$.jsx)(uh,{onClick:()=>{O(),a?.()},className:"react-flow__controls-zoomout",title:y["controls.zoomOut.ariaLabel"],"aria-label":y["controls.zoomOut.ariaLabel"],disabled:g,children:(0,$.jsx)(oh,{})})]}),n&&(0,$.jsx)(uh,{className:"react-flow__controls-fitview",onClick:()=>{w(i),s?.()},title:y["controls.fitView.ariaLabel"],"aria-label":y["controls.fitView.ariaLabel"],children:(0,$.jsx)(ah,{})}),r&&(0,$.jsx)(uh,{className:"react-flow__controls-interactive",onClick:()=>{p.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l?.(!m)},title:y["controls.interactive.ariaLabel"],"aria-label":y["controls.interactive.ariaLabel"],children:m?(0,$.jsx)(lh,{}):(0,$.jsx)(sh,{})}),c]})}dh.displayName="Controls";const fh=(0,T.memo)(dh);const hh=(0,T.memo)(function({id:e,x:t,y:n,width:r,height:i,style:o,color:a,strokeColor:s,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,selected:f,onClick:h}){const{background:p,backgroundColor:m}=o||{},g=a||p||m;return(0,$.jsx)("rect",{className:ei(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:g,stroke:s,strokeWidth:l},shapeRendering:d,onClick:h?t=>h(t,e):void 0})}),ph=e=>e.nodes.map(e=>e.id),mh=e=>e instanceof Function?e:()=>e;const gh=(0,T.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:a,NodeComponent:s,onClick:l}){const{node:u,x:c,y:d,width:f,height:h}=_c(t=>{const{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:i,y:o}=n.positionAbsolute,{width:a,height:s}=Hl(r);return{node:r,x:i,y:o,width:a,height:s}},wc);return u&&!u.hidden&&Kl(u)?(0,$.jsx)(s,{x:c,y:d,width:f,height:h,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:o,shapeRendering:a,onClick:l,id:u.id}):null});var vh=(0,T.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:o=hh,onClick:a}){const s=_c(ph,wc),l=mh(t),u=mh(e),c=mh(n),d="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,$.jsx)($.Fragment,{children:s.map(e=>(0,$.jsx)(gh,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:o,onClick:a,shapeRendering:d},e))})});const yh=e=>!e.hidden,bh=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?zl(kl(e.nodeLookup,{filter:yh}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function Oh({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:m=!1,zoomable:g=!1,ariaLabel:v,inversePan:y,zoomStep:b=1,offsetScale:O=5}){const w=Pc(),x=(0,T.useRef)(null),{boundingRect:S,viewBB:k,rfId:_,panZoom:P,translateExtent:E,flowWidth:C,flowHeight:j,ariaLabelConfig:N}=_c(bh,wc),A=e?.width??200,I=e?.height??150,M=S.width/A,D=S.height/I,R=Math.max(M,D),Q=R*A,z=R*I,L=O*R,Z=S.x-(Q-S.width)/2-L,F=S.y-(z-S.height)/2-L,U=Q+2*L,V=z+2*L,G=`react-flow__minimap-desc-${_}`,B=(0,T.useRef)(0),X=(0,T.useRef)();B.current=R,(0,T.useEffect)(()=>{if(x.current&&P)return X.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=wo(e);return{update:function({translateExtent:e,width:o,height:a,zoomStep:s=1,pannable:l=!0,zoomable:u=!0,inversePan:c=!1}){let d=[0,0];const f=Vs().on("start",e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?i=>{const s=n();if("mousemove"!==i.sourceEvent.type&&"touchmove"!==i.sourceEvent.type||!t)return;const l=[i.sourceEvent.clientX??i.sourceEvent.touches[0].clientX,i.sourceEvent.clientY??i.sourceEvent.touches[0].clientY],u=[l[0]-d[0],l[1]-d[1]];d=l;const f=r()*Math.max(s[2],Math.log(s[2]))*(c?-1:1),h={x:s[0]-u[0]*f,y:s[1]-u[1]*f},p=[[0,0],[o,a]];t.setViewportConstrained({x:h.x,y:h.y,zoom:s[2]},p,e)}:null).on("zoom.wheel",u?e=>{if("wheel"!==e.sourceEvent.type||!t)return;const r=n(),i=e.sourceEvent.ctrlKey&&Wl()?10:1,o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,a=r[2]*Math.pow(2,o*i);t.scaleTo(a)}:null);i.call(f,{})},destroy:function(){i.on("zoom",null)},pointer:xo}}({domNode:x.current,panZoom:P,getTransform:()=>w.getState().transform,getViewScale:()=>B.current}),()=>{X.current?.destroy()}},[P]),(0,T.useEffect)(()=>{X.current?.update({translateExtent:E,width:C,height:j,inversePan:y,pannable:m,zoomStep:b,zoomable:g})},[m,g,y,b,E,C,j]);const Y=h?e=>{const[t,n]=X.current?.pointer(e)||[0,0];h(e,{x:t,y:n})}:void 0,W=p?(0,T.useCallback)((e,t)=>{const n=w.getState().nodeLookup.get(t).internals.userNode;p(e,n)},[]):void 0,q=v??N["minimap.ariaLabel"];return(0,$.jsx)(Mc,{position:f,style:{...e,"--xy-minimap-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof u?u:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof c?c:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof d?d*R:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof a?a:void 0},className:ei(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,$.jsxs)("svg",{width:A,height:I,viewBox:`${Z} ${F} ${U} ${V}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:x,onClick:Y,children:[q&&(0,$.jsx)("title",{id:G,children:q}),(0,$.jsx)(vh,{onClick:W,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:a,nodeComponent:s}),(0,$.jsx)("path",{className:"react-flow__minimap-mask",d:`M${Z-L},${F-L}h${U+2*L}v${V+2*L}h${-U-2*L}z\n        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Oh.displayName="MiniMap";const wh=(0,T.memo)(Oh),xh={[nc.Line]:"right",[nc.Handle]:"bottom-right"};const Sh=(0,T.memo)(function({nodeId:e,position:t,variant:n=nc.Handle,className:r,style:i,children:o,color:a,minWidth:s=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:f,autoScale:h=!0,shouldResize:p,onResizeStart:m,onResize:g,onResizeEnd:v}){const y=jd(),b="string"==typeof e?e:y,O=Pc(),w=(0,T.useRef)(null),x=n===nc.Handle,S=_c((0,T.useCallback)((k=x&&h,e=>k?`${Math.max(1/e.transform[2],1)}`:void 0),[x,h]),wc);var k;const _=(0,T.useRef)(null),P=t??xh[n];(0,T.useEffect)(()=>{if(w.current&&b)return _.current||(_.current=fc({domNode:w.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,domNode:o}=O.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,paneDomNode:o}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:i,nodeOrigin:o}=O.getState(),a=[],s={x:e.x,y:e.y},l=r.get(b);if(l&&l.expandParent&&l.parentId){const t=l.origin??o,n=e.width??l.measured.width??0,u=e.height??l.measured.height??0,c=Mu([{id:l.id,parentId:l.parentId,rect:{width:n,height:u,...Jl({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:u},l.parentId,r,t)}}],r,i,o);a.push(...c),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*u,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:b,type:"position",position:{...s}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:b,type:"dimensions",resizing:!0,setAttributes:!f||("horizontal"===f?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const e of t){const t={...e,type:"position"};a.push(t)}n(a)},onEnd:({width:e,height:t})=>{const n={id:b,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}};O.getState().triggerNodeChanges([n])}})),_.current.update({controlPosition:P,boundaries:{minWidth:s,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:d,resizeDirection:f,onResizeStart:m,onResize:g,onResizeEnd:v,shouldResize:p}),()=>{_.current?.destroy()}},[P,s,l,u,c,d,m,g,v,p]);const E=P.split("-");return(0,$.jsx)("div",{className:ei(["react-flow__resize-control","nodrag",...E,n,r]),ref:w,style:{...i,scale:S,...a&&{[x?"backgroundColor":"borderColor"]:a}},children:o})});function kh({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:o,color:a,minWidth:s=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,autoScale:f=!0,shouldResize:h,onResizeStart:p,onResize:m,onResizeEnd:g}){return t?(0,$.jsxs)($.Fragment,{children:[ic.map(t=>(0,$.jsx)(Sh,{className:i,style:o,nodeId:e,position:t,variant:nc.Line,color:a,minWidth:s,minHeight:l,maxWidth:u,maxHeight:c,onResizeStart:p,keepAspectRatio:d,autoScale:f,shouldResize:h,onResize:m,onResizeEnd:g},t)),rc.map(t=>(0,$.jsx)(Sh,{className:n,style:r,nodeId:e,position:t,color:a,minWidth:s,minHeight:l,maxWidth:u,maxHeight:c,onResizeStart:p,keepAspectRatio:d,autoScale:f,shouldResize:h,onResize:m,onResizeEnd:g},t))]}):null}const _h=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${e}`)})();function Ph(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function Eh(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function $h(e,t={}){const n=t.width||function(e){const t=Eh(e,"border-left-width"),n=Eh(e,"border-right-width");return e.clientWidth+t+n}(e),r=t.height||function(e){const t=Eh(e,"border-top-width"),n=Eh(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:n,height:r}}const Th=16384;function Ch(e){return new Promise((t,n)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function jh(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(e),async function(e){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}(i)}const Nh=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||Nh(n,t))};function Ah(e,t,n){const r=`.${e}:${t}`,i=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e){return Ph(e).map(t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`).join(" ")}(n);return document.createTextNode(`${r}{${i}}`)}function Ih(e,t,n){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const o=_h();try{t.className=`${t.className} ${o}`}catch(e){return}const a=document.createElement("style");a.appendChild(Ah(o,n,r)),t.appendChild(a)}const Mh="application/font-woff",Dh="image/jpeg",Rh={woff:Mh,woff2:Mh,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Dh,jpeg:Dh,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Qh(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return Rh[t]||""}function zh(e){return-1!==e.search(/^(data:)/)}function Lh(e,t){return`data:${t};base64,${e}`}async function Zh(e,t,n){const r=await fetch(e,t);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((e,t)=>{const o=new FileReader;o.onerror=t,o.onloadend=()=>{try{e(n({res:r,result:o.result}))}catch(e){t(e)}},o.readAsDataURL(i)})}const Fh={};async function Uh(e,t,n){const r=function(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}(e,t,n.includeQueryParams);if(null!=Fh[r])return Fh[r];let i;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const r=await Zh(e,n.fetchRequestInit,({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n)));i=Lh(r,t)}catch(t){i=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${e}`;t&&(r="string"==typeof t?t:t.message),r&&console.warn(r)}return Fh[r]=i,i}async function Vh(e,t){return Nh(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Ch(t)}(e):Nh(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),Ch(t.toDataURL())}const n=e.poster,r=Qh(n);return Ch(await Uh(n,r,t))}(e,t):Nh(e,HTMLIFrameElement)?async function(e){var t;try{if(null===(t=null==e?void 0:e.contentDocument)||void 0===t?void 0:t.body)return await Xh(e.contentDocument.body,{},!0)}catch(e){}return e.cloneNode(!1)}(e):e.cloneNode(!1)}const Gh=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();function Bh(e,t){return Nh(t,Element)&&(function(e,t){const n=t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Ph(r).forEach(i=>{let o=r.getPropertyValue(i);if("font-size"===i&&o.endsWith("px")){const e=Math.floor(parseFloat(o.substring(0,o.length-2)))-.1;o=`${e}px`}Nh(e,HTMLIFrameElement)&&"display"===i&&"inline"===o&&(o="block"),"d"===i&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),n.setProperty(i,o,r.getPropertyPriority(i))})}(e,t),function(e,t){Ih(e,t,":before"),Ih(e,t,":after")}(e,t),function(e,t){Nh(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Nh(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(Nh(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(t=>e.value===t.getAttribute("value"));r&&r.setAttribute("selected","")}}(e,t)),t}async function Xh(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>Vh(e,t)).then(n=>async function(e,t,n){var r,i;let o=[];return o=Gh(e)&&e.assignedNodes?Ph(e.assignedNodes()):Nh(e,HTMLIFrameElement)&&(null===(r=e.contentDocument)||void 0===r?void 0:r.body)?Ph(e.contentDocument.body.childNodes):Ph((null!==(i=e.shadowRoot)&&void 0!==i?i:e).childNodes),0===o.length||Nh(e,HTMLVideoElement)||await o.reduce((e,r)=>e.then(()=>Xh(r,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}(e,n,t)).then(t=>Bh(e,t)).then(e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const r={};for(let i=0;i<n.length;i++){const o=n[i].getAttribute("xlink:href");if(o){const n=e.querySelector(o),i=document.querySelector(o);n||!i||r[o]||(r[o]=await Xh(i,t,!0))}}const i=Object.values(r);if(i.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(t,"defs");n.appendChild(r);for(let e=0;e<i.length;e++)r.appendChild(i[e]);e.appendChild(n)}return e}(e,t)):null}const Yh=/url\((['"]?)([^'"]+?)\1\)/g,Wh=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,qh=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function Hh(e,t,n,r,i){try{const o=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}(t,n):t,a=Qh(t);let s;if(i){s=Lh(await i(o),a)}else s=await Uh(o,a,r);return e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${s}$3`)}catch(e){}return e}function Kh(e){return-1!==e.search(Yh)}async function Jh(e,t,n){if(!Kh(e))return e;const r=function(e,{preferredFontFormat:t}){return t?e.replace(qh,e=>{for(;;){const[n,,r]=Wh.exec(e)||[];if(!r)return"";if(r===t)return`src: ${n};`}}):e}(e,n),i=function(e){const t=[];return e.replace(Yh,(e,n,r)=>(t.push(r),e)),t.filter(e=>!zh(e))}(r);return i.reduce((e,r)=>e.then(e=>Hh(e,r,t,n)),Promise.resolve(r))}async function ep(e,t,n){var r;const i=null===(r=t.style)||void 0===r?void 0:r.getPropertyValue(e);if(i){const r=await Jh(i,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function tp(e,t){Nh(e,Element)&&(await async function(e,t){await ep("background",e,t)||await ep("background-image",e,t),await ep("mask",e,t)||await ep("mask-image",e,t)}(e,t),await async function(e,t){const n=Nh(e,HTMLImageElement);if((!n||zh(e.src))&&(!Nh(e,SVGImageElement)||zh(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await Uh(r,Qh(r),t);await new Promise((t,r)=>{e.onload=t,e.onerror=r;const o=e;o.decode&&(o.decode=t),"lazy"===o.loading&&(o.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}(e,t),await async function(e,t){const n=Ph(e.childNodes).map(e=>tp(e,t));await Promise.all(n).then(()=>e)}(e,t))}const np={};async function rp(e){let t=np[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},np[e]=t,t}async function ip(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Zh(o,t.fetchRequestInit,({result:e})=>(n=n.replace(i,`url(${e})`),[i,e]))});return Promise.all(i).then(()=>n)}function op(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=r.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(r,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=i.exec(n);if(null===e){if(e=o.exec(n),null===e)break;i.lastIndex=o.lastIndex}else o.lastIndex=i.lastIndex;t.push(e[0])}return t}async function ap(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=Ph(e.ownerDocument.styleSheets),r=await async function(e,t){const n=[],r=[];return e.forEach(n=>{if("cssRules"in n)try{Ph(n.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let o=i+1;const a=rp(e.href).then(e=>ip(e,t)).then(e=>op(e).forEach(e=>{try{n.insertRule(e,e.startsWith("@import")?o+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});r.push(a)}})}catch(i){const o=e.find(e=>null==e.href)||document.styleSheets[0];null!=n.href&&r.push(rp(n.href).then(e=>ip(e,t)).then(e=>op(e).forEach(e=>{o.insertRule(e,n.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",i)}}),Promise.all(r).then(()=>(e.forEach(e=>{if("cssRules"in e)try{Ph(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),n))}(n,t);return function(e){return e.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Kh(e.style.getPropertyValue("src")))}(r)}async function sp(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await async function(e,t){const n=await ap(e,t);return(await Promise.all(n.map(e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return Jh(e.cssText,n,t)}))).join("\n")}(e,t);if(n){const t=document.createElement("style"),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function lp(e,t={}){const{width:n,height:r}=$h(e,t),i=await Xh(e,t,!0);await sp(i,t),await tp(i,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;null!=r&&Object.keys(r).forEach(e=>{n[e]=r[e]})}(i,t);return await jh(i,n,r)}async function up(e,t={}){const{width:n,height:r}=$h(e,t),i=await lp(e,t),o=await Ch(i),a=document.createElement("canvas"),s=a.getContext("2d"),l=t.pixelRatio||function(){let e,t;try{t=process}catch(e){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),u=t.canvasWidth||n,c=t.canvasHeight||r;return a.width=u*l,a.height=c*l,t.skipAutoScale||function(e){(e.width>Th||e.height>Th)&&(e.width>Th&&e.height>Th?e.width>e.height?(e.height*=Th/e.width,e.width=Th):(e.width*=Th/e.height,e.height=Th):e.width>Th?(e.height*=Th/e.width,e.width=Th):(e.width*=Th/e.height,e.height=Th))}(a),a.style.width=`${u}`,a.style.height=`${c}`,t.backgroundColor&&(s.fillStyle=t.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(o,0,0,a.width,a.height),a}async function cp(e,t={}){return(await up(e,t)).toDataURL()}const{useDebugValue:dp}=T,{useSyncExternalStoreWithSelector:fp}=hc;let hp=!1;const pp=e=>e;const mp=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?mc(e):e,n=(e,n)=>function(e,t=pp,n){n&&!hp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hp=!0);const r=fp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return dp(r),r}(t,e,n);return Object.assign(n,t),n},gp=e=>e?mp(e):mp;var vp=(e,t,n)=>(r,i)=>({pastStates:n?.pastStates||[],futureStates:n?.futureStates||[],undo:(o=1)=>{if(i().pastStates.length){const a=n?.partialize?.(t())||t(),s=i().pastStates.splice(-o,o),l=s.shift();e(l),r({pastStates:i().pastStates,futureStates:i().futureStates.concat(n?.diff?.(a,l)||a,s.reverse())})}},redo:(o=1)=>{if(i().futureStates.length){const a=n?.partialize?.(t())||t(),s=i().futureStates.splice(-o,o),l=s.shift();e(l),r({pastStates:i().pastStates.concat(n?.diff?.(a,l)||a,s.reverse()),futureStates:i().futureStates})}},clear:()=>r({pastStates:[],futureStates:[]}),isTracking:!0,pause:()=>r({isTracking:!1}),resume:()=>r({isTracking:!0}),setOnSave:e=>r({_onSave:e}),_onSave:n?.onSave,_handleSet:(e,t,o,a)=>{n?.limit&&i().pastStates.length>=n?.limit&&i().pastStates.shift(),i()._onSave?.(e,o),r({pastStates:i().pastStates.concat(a||e),futureStates:[]})}});const yp=Object.freeze({status:"aborted"});function bp(e,t,n){function r(n,r){var i;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in a.prototype)e in n||Object.defineProperty(n,e,{value:a.prototype[e].bind(n)});n._zod.constr=a,n._zod.def=r}const i=n?.Parent??Object;class o extends i{}function a(e){var t;const i=n?.Parent?new o:this;r(i,e),(t=i._zod).deferred??(t.deferred=[]);for(const e of i._zod.deferred)e();return i}return Object.defineProperty(o,"name",{value:e}),Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}const Op=Symbol("zod_brand");class wp extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class xp extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Sp={};function kp(e){return e&&Object.assign(Sp,e),Sp}function _p(e){return e}function Pp(e){return e}function Ep(e){}function $p(e){throw new Error}function Tp(e){}function Cp(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function jp(e,t="|"){return e.map(e=>am(e)).join(t)}function Np(e,t){return"bigint"==typeof t?t.toString():t}function Ap(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Ip(e){return null==e}function Mp(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Dp(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let i=(r.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(r)){const e=r.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}const o=n>i?n:i;return Number.parseInt(e.toFixed(o).replace(".",""))%Number.parseInt(t.toFixed(o).replace(".",""))/10**o}const Rp=Symbol("evaluating");function Qp(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Rp)return void 0===r&&(r=Rp,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function zp(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Lp(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Zp(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function Fp(e){return Zp(e._zod.def)}function Up(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function Vp(e){const t=Object.keys(e),n=t.map(t=>e[t]);return Promise.all(n).then(e=>{const n={};for(let r=0;r<t.length;r++)n[t[r]]=e[r];return n})}function Gp(e=10){const t="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<e;r++)n+=t[Math.floor(26*Math.random())];return n}function Bp(e){return JSON.stringify(e)}const Xp="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Yp(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const Wp=Ap(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function qp(e){if(!1===Yp(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==Yp(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}function Hp(e){return qp(e)?{...e}:Array.isArray(e)?[...e]:e}function Kp(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}const Jp=e=>{const t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":null===e?"null":e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?"promise":"undefined"!=typeof Map&&e instanceof Map?"map":"undefined"!=typeof Set&&e instanceof Set?"set":"undefined"!=typeof Date&&e instanceof Date?"date":"undefined"!=typeof File&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},em=new Set(["string","number","symbol"]),tm=new Set(["string","number","bigint","boolean","symbol","undefined"]);function nm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rm(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function im(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function om(e){let t;return new Proxy({},{get:(n,r,i)=>(t??(t=e()),Reflect.get(t,r,i)),set:(n,r,i,o)=>(t??(t=e()),Reflect.set(t,r,i,o)),has:(n,r)=>(t??(t=e()),Reflect.has(t,r)),deleteProperty:(n,r)=>(t??(t=e()),Reflect.deleteProperty(t,r)),ownKeys:n=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(n,r)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,r)),defineProperty:(n,r,i)=>(t??(t=e()),Reflect.defineProperty(t,r,i))})}function am(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function sm(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}const lm={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},um={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function cm(e,t){const n=e._zod.def;return rm(e,Zp(e._zod.def,{get shape(){const e={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return Lp(this,"shape",e),e},checks:[]}))}function dm(e,t){const n=e._zod.def,r=Zp(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return Lp(this,"shape",r),r},checks:[]});return rm(e,r)}function fm(e,t){if(!qp(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Zp(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return Lp(this,"shape",n),n},checks:[]});return rm(e,r)}function hm(e,t){if(!qp(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return Lp(this,"shape",n),n},checks:e._zod.def.checks};return rm(e,n)}function pm(e,t){const n=Zp(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Lp(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return rm(e,n)}function mm(e,t,n){const r=Zp(t._zod.def,{get shape(){const r=t._zod.def.shape,i={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)i[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return Lp(this,"shape",i),i},checks:[]});return rm(t,r)}function gm(e,t,n){const r=Zp(t._zod.def,{get shape(){const r=t._zod.def.shape,i={...r};if(n)for(const t in n){if(!(t in i))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)i[t]=new e({type:"nonoptional",innerType:r[t]});return Lp(this,"shape",i),i},checks:[]});return rm(t,r)}function vm(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function ym(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function bm(e){return"string"==typeof e?e:e?.message}function Om(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const i=bm(e.inst?._zod.def?.error?.(e))??bm(t?.error?.(e))??bm(n.customError?.(e))??bm(n.localeError?.(e))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function wm(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function xm(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function Sm(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}function km(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function _m(e){const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function Pm(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function Em(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");return _m(t+"=".repeat((4-t.length%4)%4))}function $m(e){return Pm(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Tm(e){const t=e.replace(/^0x/,"");if(t.length%2!=0)throw new Error("Invalid hex string length");const n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)n[e/2]=Number.parseInt(t.slice(e,e+2),16);return n}function Cm(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class jm{constructor(...e){}}const Nm=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Np,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Am=bp("$ZodError",Nm),Im=bp("$ZodError",Nm,{Parent:Error});function Mm(e,t=e=>e.message){const n={},r=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function Dm(e,t){const n=t||function(e){return e.message},r={_errors:[]},i=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>i({issues:e}));else if("invalid_key"===t.code)i({issues:t.issues});else if("invalid_element"===t.code)i({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,i=0;for(;i<t.path.length;){const r=t.path[i];i===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(e),r}function Rm(e,t){const n=t||function(e){return e.message},r={errors:[]},i=(e,t=[])=>{var o,a;for(const s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>i({issues:e},s.path));else if("invalid_key"===s.code)i({issues:s.issues},s.path);else if("invalid_element"===s.code)i({issues:s.issues},s.path);else{const e=[...t,...s.path];if(0===e.length){r.errors.push(n(s));continue}let i=r,l=0;for(;l<e.length;){const t=e[l],r=l===e.length-1;"string"==typeof t?(i.properties??(i.properties={}),(o=i.properties)[t]??(o[t]={errors:[]}),i=i.properties[t]):(i.items??(i.items=[]),(a=i.items)[t]??(a[t]={errors:[]}),i=i.items[t]),r&&i.errors.push(n(s)),l++}}};return i(e),r}function Qm(e){const t=[],n=e.map(e=>"object"==typeof e?e.key:e);for(const e of n)"number"==typeof e?t.push(`[${e}]`):"symbol"==typeof e?t.push(`[${JSON.stringify(String(e))}]`):/[^\w$]/.test(e)?t.push(`[${JSON.stringify(e)}]`):(t.length&&t.push("."),t.push(e));return t.join("")}function zm(e){const t=[],n=[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length);for(const e of n)t.push(`✖ ${e.message}`),e.path?.length&&t.push(`  → at ${Qm(e.path)}`);return t.join("\n")}const Lm=e=>(t,n,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise)throw new wp;if(a.issues.length){const t=new(i?.Err??e)(a.issues.map(e=>Om(e,o,kp())));throw Xp(t,i?.callee),t}return a.value},Zm=Lm(Im),Fm=e=>async(t,n,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const t=new(i?.Err??e)(a.issues.map(e=>Om(e,o,kp())));throw Xp(t,i?.callee),t}return a.value},Um=Fm(Im),Vm=e=>(t,n,r)=>{const i=r?{...r,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new wp;return o.issues.length?{success:!1,error:new(e??Am)(o.issues.map(e=>Om(e,i,kp())))}:{success:!0,data:o.value}},Gm=Vm(Im),Bm=e=>async(t,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(e=>Om(e,i,kp())))}:{success:!0,data:o.value}},Xm=Bm(Im),Ym=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Lm(e)(t,n,i)},Wm=Ym(Im),qm=e=>(t,n,r)=>Lm(e)(t,n,r),Hm=qm(Im),Km=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Fm(e)(t,n,i)},Jm=Km(Im),eg=e=>async(t,n,r)=>Fm(e)(t,n,r),tg=eg(Im),ng=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Vm(e)(t,n,i)},rg=ng(Im),ig=e=>(t,n,r)=>Vm(e)(t,n,r),og=ig(Im),ag=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Bm(e)(t,n,i)},sg=ag(Im),lg=e=>async(t,n,r)=>Bm(e)(t,n,r),ug=lg(Im),cg=/^[cC][^\s-]{8,}$/,dg=/^[0-9a-z]+$/,fg=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,hg=/^[0-9a-vA-V]{20}$/,pg=/^[A-Za-z0-9]{27}$/,mg=/^[a-zA-Z0-9_-]{21}$/,gg=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,vg=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yg=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,bg=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Og=bg(4),wg=bg(6),xg=bg(7),Sg=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,kg=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_g=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Pg=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,Eg=Pg,$g=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Tg="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Cg(){return new RegExp(Tg,"u")}const jg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ng=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ag=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ig=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Mg=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Dg=/^[A-Za-z0-9_-]*$/,Rg=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Qg=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,zg=/^\+(?:[0-9]){6,14}[0-9]$/,Lg="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Zg=new RegExp(`^${Lg}$`);function Fg(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ug(e){return new RegExp(`^${Fg(e)}$`)}function Vg(e){const t=Fg({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Lg}T(?:${r})$`)}const Gg=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),Bg=/^-?\d+n?$/,Xg=/^-?\d+$/,Yg=/^-?\d+(?:\.\d+)?/,Wg=/^(?:true|false)$/i,qg=/^null$/i,Hg=/^undefined$/i,Kg=/^[^A-Z]*$/,Jg=/^[^a-z]*$/,ev=/^[0-9a-fA-F]*$/;function tv(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function nv(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}const rv=/^[0-9a-fA-F]{32}$/,iv=tv(22,"=="),ov=nv(22),av=/^[0-9a-fA-F]{40}$/,sv=tv(27,"="),lv=nv(27),uv=/^[0-9a-fA-F]{64}$/,cv=tv(43,"="),dv=nv(43),fv=/^[0-9a-fA-F]{96}$/,hv=tv(64,""),pv=nv(64),mv=/^[0-9a-fA-F]{128}$/,gv=tv(86,"=="),vv=nv(86),yv=bp("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),bv={number:"number",bigint:"bigint",object:"date"},Ov=bp("$ZodCheckLessThan",(e,t)=>{yv.init(e,t);const n=bv[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),wv=bp("$ZodCheckGreaterThan",(e,t)=>{yv.init(e,t);const n=bv[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),xv=bp("$ZodCheckMultipleOf",(e,t)=>{yv.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===Dp(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Sv=bp("$ZodCheckNumberFormat",(e,t)=>{yv.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[i,o]=lm[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=i,r.maximum=o,n&&(r.pattern=Xg)}),e._zod.check=a=>{const s=a.value;if(n){if(!Number.isInteger(s))return void a.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}s<i&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>o&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:o,inst:e})}}),kv=bp("$ZodCheckBigIntFormat",(e,t)=>{yv.init(e,t);const[n,r]=um[t.format];e._zod.onattach.push(e=>{const i=e._zod.bag;i.format=t.format,i.minimum=n,i.maximum=r}),e._zod.check=i=>{const o=i.value;o<n&&i.issues.push({origin:"bigint",input:o,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),o>r&&i.issues.push({origin:"bigint",input:o,code:"too_big",maximum:r,inst:e})}}),_v=bp("$ZodCheckMaxSize",(e,t)=>{var n;yv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ip(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;r.size<=t.maximum||n.issues.push({origin:wm(r),code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Pv=bp("$ZodCheckMinSize",(e,t)=>{var n;yv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ip(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;r.size>=t.minimum||n.issues.push({origin:wm(r),code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Ev=bp("$ZodCheckSizeEquals",(e,t)=>{var n;yv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ip(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.size,n.maximum=t.size,n.size=t.size}),e._zod.check=n=>{const r=n.value,i=r.size;if(i===t.size)return;const o=i>t.size;n.issues.push({origin:wm(r),...o?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),$v=bp("$ZodCheckMaxLength",(e,t)=>{var n;yv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ip(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const i=xm(r);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Tv=bp("$ZodCheckMinLength",(e,t)=>{var n;yv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ip(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const i=xm(r);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Cv=bp("$ZodCheckLengthEquals",(e,t)=>{var n;yv.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ip(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,i=r.length;if(i===t.length)return;const o=xm(r),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),jv=bp("$ZodCheckStringFormat",(e,t)=>{var n,r;yv.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Nv=bp("$ZodCheckRegex",(e,t)=>{jv.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Av=bp("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Kg),jv.init(e,t)}),Iv=bp("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Jg),jv.init(e,t)}),Mv=bp("$ZodCheckIncludes",(e,t)=>{yv.init(e,t);const n=nm(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),Dv=bp("$ZodCheckStartsWith",(e,t)=>{yv.init(e,t);const n=new RegExp(`^${nm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Rv=bp("$ZodCheckEndsWith",(e,t)=>{yv.init(e,t);const n=new RegExp(`.*${nm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}});function Qv(e,t,n){e.issues.length&&t.issues.push(...ym(n,e.issues))}const zv=bp("$ZodCheckProperty",(e,t)=>{yv.init(e,t),e._zod.check=e=>{const n=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(n instanceof Promise)return n.then(n=>Qv(n,e,t.property));Qv(n,e,t.property)}}),Lv=bp("$ZodCheckMimeType",(e,t)=>{yv.init(e,t);const n=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=r=>{n.has(r.value.type)||r.issues.push({code:"invalid_value",values:t.mime,input:r.value.type,inst:e,continue:!t.abort})}}),Zv=bp("$ZodCheckOverwrite",(e,t)=>{yv.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class Fv{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of r)this.content.push(e)}compile(){const e=Function,t=this?.args,n=[...(this?.content??[""]).map(e=>`  ${e}`)];return new e(...t,n.join("\n"))}}const Uv={major:4,minor:1,patch:11},Vv=bp("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Uv;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const t of r)for(const n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,i=vm(e);for(const o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(i)continue;const t=e.issues.length,a=o._zod.check(e);if(a instanceof Promise&&!1===n?.async)throw new wp;if(r||a instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await a;e.issues.length!==t&&(i||(i=vm(e,t)))});else{if(e.issues.length===t)continue;i||(i=vm(e,t))}}return r?r.then(()=>e):e},n=(n,i,o)=>{if(vm(n))return n.aborted=!0,n;const a=t(i,r,o);if(a instanceof Promise){if(!1===o.async)throw new wp;return a.then(t=>e._zod.parse(t,o))}return e._zod.parse(a,o)};e._zod.run=(i,o)=>{if(o.skipChecks)return e._zod.parse(i,o);if("backward"===o.direction){const t=e._zod.parse({value:i.value,issues:[]},{...o,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,i,o)):n(t,i,o)}const a=e._zod.parse(i,o);if(a instanceof Promise){if(!1===o.async)throw new wp;return a.then(e=>t(e,r,o))}return t(a,r,o)}}e["~standard"]={validate:t=>{try{const n=Gm(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return Xm(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Gv=bp("$ZodString",(e,t)=>{Vv.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Gg(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(r){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Bv=bp("$ZodStringFormat",(e,t)=>{jv.init(e,t),Gv.init(e,t)}),Xv=bp("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=yg),Bv.init(e,t)}),Yv=bp("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=bg(e))}else t.pattern??(t.pattern=bg());Bv.init(e,t)}),Wv=bp("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Sg),Bv.init(e,t)}),qv=bp("$ZodURL",(e,t)=>{Bv.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Rg.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(t.normalize?n.value=i.href:n.value=r)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Hv=bp("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Cg()),Bv.init(e,t)}),Kv=bp("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=mg),Bv.init(e,t)}),Jv=bp("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=cg),Bv.init(e,t)}),ey=bp("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=dg),Bv.init(e,t)}),ty=bp("$ZodULID",(e,t)=>{t.pattern??(t.pattern=fg),Bv.init(e,t)}),ny=bp("$ZodXID",(e,t)=>{t.pattern??(t.pattern=hg),Bv.init(e,t)}),ry=bp("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=pg),Bv.init(e,t)}),iy=bp("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Vg(t)),Bv.init(e,t)}),oy=bp("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Zg),Bv.init(e,t)}),ay=bp("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Ug(t)),Bv.init(e,t)}),sy=bp("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=gg),Bv.init(e,t)}),ly=bp("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=jg),Bv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),uy=bp("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ng),Bv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),cy=bp("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ag),Bv.init(e,t)}),dy=bp("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ig),Bv.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(2!==r.length)throw new Error;const[e,t]=r;if(!t)throw new Error;const n=Number(t);if(`${n}`!==t)throw new Error;if(n<0||n>128)throw new Error;new URL(`http://[${e}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function fy(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const hy=bp("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Mg),Bv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{fy(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function py(e){if(!Dg.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return fy(t.padEnd(4*Math.ceil(t.length/4),"="))}const my=bp("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Dg),Bv.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{py(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),gy=bp("$ZodE164",(e,t)=>{t.pattern??(t.pattern=zg),Bv.init(e,t)});function vy(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return(!("typ"in i)||"JWT"===i?.typ)&&(!!i.alg&&(!t||"alg"in i&&i.alg===t))}catch{return!1}}const yy=bp("$ZodJWT",(e,t)=>{Bv.init(e,t),e._zod.check=n=>{vy(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),by=bp("$ZodCustomStringFormat",(e,t)=>{Bv.init(e,t),e._zod.check=n=>{t.fn(n.value)||n.issues.push({code:"invalid_format",format:t.format,input:n.value,inst:e,continue:!t.abort})}}),Oy=bp("$ZodNumber",(e,t)=>{Vv.init(e,t),e._zod.pattern=e._zod.bag.pattern??Yg,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const i=n.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return n;const o="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),n}}),wy=bp("$ZodNumber",(e,t)=>{Sv.init(e,t),Oy.init(e,t)}),xy=bp("$ZodBoolean",(e,t)=>{Vv.init(e,t),e._zod.pattern=Wg,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const i=n.value;return"boolean"==typeof i||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),Sy=bp("$ZodBigInt",(e,t)=>{Vv.init(e,t),e._zod.pattern=Bg,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch(e){}return"bigint"==typeof n.value||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:e}),n}}),ky=bp("$ZodBigInt",(e,t)=>{kv.init(e,t),Sy.init(e,t)}),_y=bp("$ZodSymbol",(e,t)=>{Vv.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return"symbol"==typeof r||t.issues.push({expected:"symbol",code:"invalid_type",input:r,inst:e}),t}}),Py=bp("$ZodUndefined",(e,t)=>{Vv.init(e,t),e._zod.pattern=Hg,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,n)=>{const r=t.value;return void 0===r||t.issues.push({expected:"undefined",code:"invalid_type",input:r,inst:e}),t}}),Ey=bp("$ZodNull",(e,t)=>{Vv.init(e,t),e._zod.pattern=qg,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{const r=t.value;return null===r||t.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),t}}),$y=bp("$ZodAny",(e,t)=>{Vv.init(e,t),e._zod.parse=e=>e}),Ty=bp("$ZodUnknown",(e,t)=>{Vv.init(e,t),e._zod.parse=e=>e}),Cy=bp("$ZodNever",(e,t)=>{Vv.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),jy=bp("$ZodVoid",(e,t)=>{Vv.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return void 0===r||t.issues.push({expected:"void",code:"invalid_type",input:r,inst:e}),t}}),Ny=bp("$ZodDate",(e,t)=>{Vv.init(e,t),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=new Date(n.value)}catch(e){}const i=n.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:i,...o?{received:"Invalid Date"}:{},inst:e}),n}});function Ay(e,t,n){e.issues.length&&t.issues.push(...ym(n,e.issues)),t.value[n]=e.value}const Iy=bp("$ZodArray",(e,t)=>{Vv.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const o=[];for(let e=0;e<i.length;e++){const a=i[e],s=t.element._zod.run({value:a,issues:[]},r);s instanceof Promise?o.push(s.then(t=>Ay(t,n,e))):Ay(s,n,e)}return o.length?Promise.all(o).then(()=>n):n}});function My(e,t,n,r){e.issues.length&&t.issues.push(...ym(n,e.issues)),void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function Dy(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=sm(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function Ry(e,t,n,r,i,o){const a=[],s=i.keySet,l=i.catchall._zod,u=l.def.type;for(const i of Object.keys(t)){if(s.has(i))continue;if("never"===u){a.push(i);continue}const o=l.run({value:t[i],issues:[]},r);o instanceof Promise?e.push(o.then(e=>My(e,n,i,t))):My(o,n,i,t)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:o}),e.length?Promise.all(e).then(()=>n):n}const Qy=bp("$ZodObject",(e,t)=>{Vv.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const n={...e};return Object.defineProperty(t,"shape",{value:n}),n}})}const r=Ap(()=>Dy(t));Qp(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const i=Yp,o=t.catchall;let a;e._zod.parse=(t,n)=>{a??(a=r.value);const s=t.value;if(!i(s))return t.issues.push({expected:"object",code:"invalid_type",input:s,inst:e}),t;t.value={};const l=[],u=a.shape;for(const e of a.keys){const r=u[e]._zod.run({value:s[e],issues:[]},n);r instanceof Promise?l.push(r.then(n=>My(n,t,e,s))):My(r,t,e,s)}return o?Ry(l,s,t,n,r.value,e):l.length?Promise.all(l).then(()=>t):t}}),zy=bp("$ZodObjectJIT",(e,t)=>{Qy.init(e,t);const n=e._zod.parse,r=Ap(()=>Dy(t));let i;const o=Yp,a=!Sp.jitless,s=a&&Wp.value,l=t.catchall;let u;e._zod.parse=(c,d)=>{u??(u=r.value);const f=c.value;return o(f)?a&&s&&!1===d?.async&&!0!==d.jitless?(i||(i=(e=>{const t=new Fv(["shape","payload","ctx"]),n=r.value,i=e=>{const t=Bp(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const o=Object.create(null);let a=0;for(const e of n.keys)o[e]="key_"+a++;t.write("const newResult = {};");for(const e of n.keys){const n=o[e],r=Bp(e);t.write(`const ${n} = ${i(e)};`),t.write(`\n        if (${n}.issues.length) {\n          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${r}, ...iss.path] : [${r}]\n          })));\n        }\n        \n        \n        if (${n}.value === undefined) {\n          if (${r} in input) {\n            newResult[${r}] = undefined;\n          }\n        } else {\n          newResult[${r}] = ${n}.value;\n        }\n        \n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const s=t.compile();return(t,n)=>s(e,t,n)})(t.shape)),c=i(c,d),l?Ry([],f,c,d,u,e):c):n(c,d):(c.issues.push({expected:"object",code:"invalid_type",input:f,inst:e}),c)}});function Ly(e,t,n,r){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;const i=e.filter(e=>!vm(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>Om(e,r,kp())))}),t)}const Zy=bp("$ZodUnion",(e,t)=>{Vv.init(e,t),Qp(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),Qp(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),Qp(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),Qp(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>Mp(e.source)).join("|")})$`)}});const n=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(i,o)=>{if(n)return r(i,o);let a=!1;const s=[];for(const e of t.options){const t=e._zod.run({value:i.value,issues:[]},o);if(t instanceof Promise)s.push(t),a=!0;else{if(0===t.issues.length)return t;s.push(t)}}return a?Promise.all(s).then(t=>Ly(t,i,e,o)):Ly(s,i,e,o)}}),Fy=bp("$ZodDiscriminatedUnion",(e,t)=>{Zy.init(e,t);const n=e._zod.parse;Qp(e._zod,"propValues",()=>{const e={};for(const n of t.options){const r=n._zod.propValues;if(!r||0===Object.keys(r).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(const r of n)e[t].add(r)}}return e});const r=Ap(()=>{const e=t.options,n=new Map;for(const r of e){const e=r._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n});e._zod.parse=(i,o)=>{const a=i.value;if(!Yp(a))return i.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),i;const s=r.value.get(a?.[t.discriminator]);return s?s._zod.run(i,o):t.unionFallback?n(i,o):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),i)}}),Uy=bp("$ZodIntersection",(e,t)=>{Vv.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,i=t.left._zod.run({value:r,issues:[]},n),o=t.right._zod.run({value:r,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([t,n])=>Gy(e,t,n)):Gy(e,i,o)}});function Vy(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(qp(e)&&qp(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(const n of r){const r=Vy(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};i[n]=r.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const i=Vy(e[r],t[r]);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Gy(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),vm(e))return e;const r=Vy(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const By=bp("$ZodTuple",(e,t)=>{Vv.init(e,t);const n=t.items,r=n.length-[...n].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(i,o)=>{const a=i.value;if(!Array.isArray(a))return i.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];const s=[];if(!t.rest){const t=a.length>n.length,o=a.length<r-1;if(t||o)return i.issues.push({...t?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:a,inst:e,origin:"array"}),i}let l=-1;for(const e of n){if(l++,l>=a.length&&l>=r)continue;const t=e._zod.run({value:a[l],issues:[]},o);t instanceof Promise?s.push(t.then(e=>Xy(e,i,l))):Xy(t,i,l)}if(t.rest){const e=a.slice(n.length);for(const n of e){l++;const e=t.rest._zod.run({value:n,issues:[]},o);e instanceof Promise?s.push(e.then(e=>Xy(e,i,l))):Xy(e,i,l)}}return s.length?Promise.all(s).then(()=>i):i}});function Xy(e,t,n){e.issues.length&&t.issues.push(...ym(n,e.issues)),t.value[n]=e.value}const Yy=bp("$ZodRecord",(e,t)=>{Vv.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!qp(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),n;const o=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;n.value={};for(const e of a)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const a=t.valueType._zod.run({value:i[e],issues:[]},r);a instanceof Promise?o.push(a.then(t=>{t.issues.length&&n.issues.push(...ym(e,t.issues)),n.value[e]=t.value})):(a.issues.length&&n.issues.push(...ym(e,a.issues)),n.value[e]=a.value)}let s;for(const e in i)a.has(e)||(s=s??[],s.push(e));s&&s.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:s})}else{n.value={};for(const a of Reflect.ownKeys(i)){if("__proto__"===a)continue;const s=t.keyType._zod.run({value:a,issues:[]},r);if(s instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(s.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:s.issues.map(e=>Om(e,r,kp())),input:a,path:[a],inst:e}),n.value[s.value]=s.value;continue}const l=t.valueType._zod.run({value:i[a],issues:[]},r);l instanceof Promise?o.push(l.then(e=>{e.issues.length&&n.issues.push(...ym(a,e.issues)),n.value[s.value]=e.value})):(l.issues.length&&n.issues.push(...ym(a,l.issues)),n.value[s.value]=l.value)}}return o.length?Promise.all(o).then(()=>n):n}}),Wy=bp("$ZodMap",(e,t)=>{Vv.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!(i instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),n;const o=[];n.value=new Map;for(const[a,s]of i){const l=t.keyType._zod.run({value:a,issues:[]},r),u=t.valueType._zod.run({value:s,issues:[]},r);l instanceof Promise||u instanceof Promise?o.push(Promise.all([l,u]).then(([t,o])=>{qy(t,o,n,a,i,e,r)})):qy(l,u,n,a,i,e,r)}return o.length?Promise.all(o).then(()=>n):n}});function qy(e,t,n,r,i,o,a){e.issues.length&&(em.has(typeof r)?n.issues.push(...ym(r,e.issues)):n.issues.push({code:"invalid_key",origin:"map",input:i,inst:o,issues:e.issues.map(e=>Om(e,a,kp()))})),t.issues.length&&(em.has(typeof r)?n.issues.push(...ym(r,t.issues)):n.issues.push({origin:"map",code:"invalid_element",input:i,inst:o,key:r,issues:t.issues.map(e=>Om(e,a,kp()))})),n.value.set(e.value,t.value)}const Hy=bp("$ZodSet",(e,t)=>{Vv.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!(i instanceof Set))return n.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),n;const o=[];n.value=new Set;for(const e of i){const i=t.valueType._zod.run({value:e,issues:[]},r);i instanceof Promise?o.push(i.then(e=>Ky(e,n))):Ky(i,n)}return o.length?Promise.all(o).then(()=>n):n}});function Ky(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}const Jy=bp("$ZodEnum",(e,t)=>{Vv.init(e,t);const n=Cp(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(e=>em.has(typeof e)).map(e=>"string"==typeof e?nm(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{const o=t.value;return r.has(o)||t.issues.push({code:"invalid_value",values:n,input:o,inst:e}),t}}),eb=bp("$ZodLiteral",(e,t)=>{if(Vv.init(e,t),0===t.values.length)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?nm(e):e?nm(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,r)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),n}}),tb=bp("$ZodFile",(e,t)=>{Vv.init(e,t),e._zod.parse=(t,n)=>{const r=t.value;return r instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:r,inst:e}),t}}),nb=bp("$ZodTransform",(e,t)=>{Vv.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new xp(e.constructor.name);const i=t.transform(n.value,n);if(r.async){return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(n.value=e,n))}if(i instanceof Promise)throw new wp;return n.value=i,n}});function rb(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const ib=bp("$ZodOptional",(e,t)=>{Vv.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Qp(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Qp(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Mp(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>rb(t,e.value)):rb(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),ob=bp("$ZodNullable",(e,t)=>{Vv.init(e,t),Qp(e._zod,"optin",()=>t.innerType._zod.optin),Qp(e._zod,"optout",()=>t.innerType._zod.optout),Qp(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Mp(e.source)}|null)$`):void 0}),Qp(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),ab=bp("$ZodDefault",(e,t)=>{Vv.init(e,t),e._zod.optin="optional",Qp(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>sb(e,t)):sb(r,t)}});function sb(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const lb=bp("$ZodPrefault",(e,t)=>{Vv.init(e,t),e._zod.optin="optional",Qp(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>("backward"===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),ub=bp("$ZodNonOptional",(e,t)=>{Vv.init(e,t),Qp(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(t=>cb(t,e)):cb(i,e)}});function cb(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const db=bp("$ZodSuccess",(e,t)=>{Vv.init(e,t),e._zod.parse=(e,n)=>{if("backward"===n.direction)throw new xp("ZodSuccess");const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===r.issues.length,e)}}),fb=bp("$ZodCatch",(e,t)=>{Vv.init(e,t),Qp(e._zod,"optin",()=>t.innerType._zod.optin),Qp(e._zod,"optout",()=>t.innerType._zod.optout),Qp(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Om(e,n,kp()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Om(e,n,kp()))},input:e.value}),e.issues=[]),e)}}),hb=bp("$ZodNaN",(e,t)=>{Vv.init(e,t),e._zod.parse=(t,n)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),pb=bp("$ZodPipe",(e,t)=>{Vv.init(e,t),Qp(e._zod,"values",()=>t.in._zod.values),Qp(e._zod,"optin",()=>t.in._zod.optin),Qp(e._zod,"optout",()=>t.out._zod.optout),Qp(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("backward"===n.direction){const r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>mb(e,t.in,n)):mb(r,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>mb(e,t.out,n)):mb(r,t.out,n)}});function mb(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const gb=bp("$ZodCodec",(e,t)=>{Vv.init(e,t),Qp(e._zod,"values",()=>t.in._zod.values),Qp(e._zod,"optin",()=>t.in._zod.optin),Qp(e._zod,"optout",()=>t.out._zod.optout),Qp(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("forward"===(n.direction||"forward")){const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>vb(e,t,n)):vb(r,t,n)}{const r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>vb(e,t,n)):vb(r,t,n)}}});function vb(e,t,n){if(e.issues.length)return e.aborted=!0,e;if("forward"===(n.direction||"forward")){const r=t.transform(e.value,e);return r instanceof Promise?r.then(r=>yb(e,r,t.out,n)):yb(e,r,t.out,n)}{const r=t.reverseTransform(e.value,e);return r instanceof Promise?r.then(r=>yb(e,r,t.in,n)):yb(e,r,t.in,n)}}function yb(e,t,n,r){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:t,issues:e.issues},r)}const bb=bp("$ZodReadonly",(e,t)=>{Vv.init(e,t),Qp(e._zod,"propValues",()=>t.innerType._zod.propValues),Qp(e._zod,"values",()=>t.innerType._zod.values),Qp(e._zod,"optin",()=>t.innerType._zod.optin),Qp(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Ob):Ob(r)}});function Ob(e){return e.value=Object.freeze(e.value),e}const wb=bp("$ZodTemplateLiteral",(e,t)=>{Vv.init(e,t);const n=[];for(const e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);const t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw new Error(`Invalid template literal part: ${e._zod.traits}`);const r=t.startsWith("^")?1:0,i=t.endsWith("$")?t.length-1:t.length;n.push(t.slice(r,i))}else{if(null!==e&&!tm.has(typeof e))throw new Error(`Invalid template literal part: ${e}`);n.push(nm(`${e}`))}e._zod.pattern=new RegExp(`^${n.join("")}$`),e._zod.parse=(n,r)=>"string"!=typeof n.value?(n.issues.push({input:n.value,inst:e,expected:"template_literal",code:"invalid_type"}),n):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),n)}),xb=bp("$ZodFunction",(e,t)=>(Vv.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw new Error("implement() must be called with a function");return function(...n){const r=e._def.input?Zm(e._def.input,n):n,i=Reflect.apply(t,this,r);return e._def.output?Zm(e._def.output,i):i}},e.implementAsync=t=>{if("function"!=typeof t)throw new Error("implementAsync() must be called with a function");return async function(...n){const r=e._def.input?await Um(e._def.input,n):n,i=await Reflect.apply(t,this,r);return e._def.output?await Um(e._def.output,i):i}},e._zod.parse=(t,n)=>{if("function"!=typeof t.value)return t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}),t;const r=e._def.output&&"promise"===e._def.output._zod.def.type;return t.value=r?e.implementAsync(t.value):e.implement(t.value),t},e.input=(...t)=>{const n=e.constructor;return Array.isArray(t[0])?new n({type:"function",input:new By({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}):new n({type:"function",input:t[0],output:e._def.output})},e.output=t=>new(0,e.constructor)({type:"function",input:e._def.input,output:t}),e)),Sb=bp("$ZodPromise",(e,t)=>{Vv.init(e,t),e._zod.parse=(e,n)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},n))}),kb=bp("$ZodLazy",(e,t)=>{Vv.init(e,t),Qp(e._zod,"innerType",()=>t.getter()),Qp(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),Qp(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),Qp(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),Qp(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,n)=>e._zod.innerType._zod.run(t,n)}),_b=bp("$ZodCustom",(e,t)=>{yv.init(e,t),Vv.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(t=>Pb(t,n,r,e));Pb(i,n,r,e)}});function Pb(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(Sm(e))}}const Eb=()=>{const e={string:{unit:"حرف",verb:"أن يحوي"},file:{unit:"بايت",verb:"أن يحوي"},array:{unit:"عنصر",verb:"أن يحوي"},set:{unit:"عنصر",verb:"أن يحوي"}};function t(t){return e[t]??null}const n={regex:"مدخل",email:"بريد إلكتروني",url:"رابط",emoji:"إيموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاريخ ووقت بمعيار ISO",date:"تاريخ بمعيار ISO",time:"وقت بمعيار ISO",duration:"مدة بمعيار ISO",ipv4:"عنوان IPv4",ipv6:"عنوان IPv6",cidrv4:"مدى عناوين بصيغة IPv4",cidrv6:"مدى عناوين بصيغة IPv6",base64:"نَص بترميز base64-encoded",base64url:"نَص بترميز base64url-encoded",json_string:"نَص على هيئة JSON",e164:"رقم هاتف بمعيار E.164",jwt:"JWT",template_literal:"مدخل"};return e=>{switch(e.code){case"invalid_type":return`مدخلات غير مقبولة: يفترض إدخال ${e.expected}، ولكن تم إدخال ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`مدخلات غير مقبولة: يفترض إدخال ${am(e.values[0])}`:`اختيار غير مقبول: يتوقع انتقاء أحد هذه الخيارات: ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?` أكبر من اللازم: يفترض أن تكون ${e.origin??"القيمة"} ${n} ${e.maximum.toString()} ${r.unit??"عنصر"}`:`أكبر من اللازم: يفترض أن تكون ${e.origin??"القيمة"} ${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`أصغر من اللازم: يفترض لـ ${e.origin} أن يكون ${n} ${e.minimum.toString()} ${r.unit}`:`أصغر من اللازم: يفترض لـ ${e.origin} أن يكون ${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`نَص غير مقبول: يجب أن يبدأ بـ "${e.prefix}"`:"ends_with"===t.format?`نَص غير مقبول: يجب أن ينتهي بـ "${t.suffix}"`:"includes"===t.format?`نَص غير مقبول: يجب أن يتضمَّن "${t.includes}"`:"regex"===t.format?`نَص غير مقبول: يجب أن يطابق النمط ${t.pattern}`:`${n[t.format]??e.format} غير مقبول`}case"not_multiple_of":return`رقم غير مقبول: يجب أن يكون من مضاعفات ${e.divisor}`;case"unrecognized_keys":return`معرف${e.keys.length>1?"ات":""} غريب${e.keys.length>1?"ة":""}: ${jp(e.keys,"، ")}`;case"invalid_key":return`معرف غير مقبول في ${e.origin}`;case"invalid_union":default:return"مدخل غير مقبول";case"invalid_element":return`مدخل غير مقبول في ${e.origin}`}}};function $b(){return{localeError:Eb()}}const Tb=()=>{const e={string:{unit:"simvol",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"element",verb:"olmalıdır"},set:{unit:"element",verb:"olmalıdır"}};function t(t){return e[t]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Yanlış dəyər: gözlənilən ${e.expected}, daxil olan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Yanlış dəyər: gözlənilən ${am(e.values[0])}`:`Yanlış seçim: aşağıdakılardan biri olmalıdır: ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Çox böyük: gözlənilən ${e.origin??"dəyər"} ${n}${e.maximum.toString()} ${r.unit??"element"}`:`Çox böyük: gözlənilən ${e.origin??"dəyər"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Çox kiçik: gözlənilən ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:`Çox kiçik: gözlənilən ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Yanlış mətn: "${t.prefix}" ilə başlamalıdır`:"ends_with"===t.format?`Yanlış mətn: "${t.suffix}" ilə bitməlidir`:"includes"===t.format?`Yanlış mətn: "${t.includes}" daxil olmalıdır`:"regex"===t.format?`Yanlış mətn: ${t.pattern} şablonuna uyğun olmalıdır`:`Yanlış ${n[t.format]??e.format}`}case"not_multiple_of":return`Yanlış ədəd: ${e.divisor} ilə bölünə bilən olmalıdır`;case"unrecognized_keys":return`Tanınmayan açar${e.keys.length>1?"lar":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`${e.origin} daxilində yanlış açar`;case"invalid_union":default:return"Yanlış dəyər";case"invalid_element":return`${e.origin} daxilində yanlış dəyər`}}};function Cb(){return{localeError:Tb()}}function jb(e,t,n,r){const i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?r:1===o?t:o>=2&&o<=4?n:r}const Nb=()=>{const e={string:{unit:{one:"сімвал",few:"сімвалы",many:"сімвалаў"},verb:"мець"},array:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},set:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},file:{unit:{one:"байт",few:"байты",many:"байтаў"},verb:"мець"}};function t(t){return e[t]??null}const n={regex:"увод",email:"email адрас",url:"URL",emoji:"эмодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата і час",date:"ISO дата",time:"ISO час",duration:"ISO працягласць",ipv4:"IPv4 адрас",ipv6:"IPv6 адрас",cidrv4:"IPv4 дыяпазон",cidrv6:"IPv6 дыяпазон",base64:"радок у фармаце base64",base64url:"радок у фармаце base64url",json_string:"JSON радок",e164:"нумар E.164",jwt:"JWT",template_literal:"увод"};return e=>{switch(e.code){case"invalid_type":return`Няправільны ўвод: чакаўся ${e.expected}, атрымана ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"лік";case"object":if(Array.isArray(e))return"масіў";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Няправільны ўвод: чакалася ${am(e.values[0])}`:`Няправільны варыянт: чакаўся адзін з ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);if(r){const t=jb(Number(e.maximum),r.unit.one,r.unit.few,r.unit.many);return`Занадта вялікі: чакалася, што ${e.origin??"значэнне"} павінна ${r.verb} ${n}${e.maximum.toString()} ${t}`}return`Занадта вялікі: чакалася, што ${e.origin??"значэнне"} павінна быць ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);if(r){const t=jb(Number(e.minimum),r.unit.one,r.unit.few,r.unit.many);return`Занадта малы: чакалася, што ${e.origin} павінна ${r.verb} ${n}${e.minimum.toString()} ${t}`}return`Занадта малы: чакалася, што ${e.origin} павінна быць ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Няправільны радок: павінен пачынацца з "${t.prefix}"`:"ends_with"===t.format?`Няправільны радок: павінен заканчвацца на "${t.suffix}"`:"includes"===t.format?`Няправільны радок: павінен змяшчаць "${t.includes}"`:"regex"===t.format?`Няправільны радок: павінен адпавядаць шаблону ${t.pattern}`:`Няправільны ${n[t.format]??e.format}`}case"not_multiple_of":return`Няправільны лік: павінен быць кратным ${e.divisor}`;case"unrecognized_keys":return`Нераспазнаны ${e.keys.length>1?"ключы":"ключ"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Няправільны ключ у ${e.origin}`;case"invalid_union":default:return"Няправільны ўвод";case"invalid_element":return`Няправільнае значэнне ў ${e.origin}`}}};function Ab(){return{localeError:Nb()}}const Ib=()=>{const e={string:{unit:"caràcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(t){return e[t]??null}const n={regex:"entrada",email:"adreça electrònica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreça IPv4",ipv6:"adreça IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipus invàlid: s'esperava ${e.expected}, s'ha rebut ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Valor invàlid: s'esperava ${am(e.values[0])}`:`Opció invàlida: s'esperava una de ${jp(e.values," o ")}`;case"too_big":{const n=e.inclusive?"com a màxim":"menys de",r=t(e.origin);return r?`Massa gran: s'esperava que ${e.origin??"el valor"} contingués ${n} ${e.maximum.toString()} ${r.unit??"elements"}`:`Massa gran: s'esperava que ${e.origin??"el valor"} fos ${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?"com a mínim":"més de",r=t(e.origin);return r?`Massa petit: s'esperava que ${e.origin} contingués ${n} ${e.minimum.toString()} ${r.unit}`:`Massa petit: s'esperava que ${e.origin} fos ${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Format invàlid: ha de començar amb "${t.prefix}"`:"ends_with"===t.format?`Format invàlid: ha d'acabar amb "${t.suffix}"`:"includes"===t.format?`Format invàlid: ha d'incloure "${t.includes}"`:"regex"===t.format?`Format invàlid: ha de coincidir amb el patró ${t.pattern}`:`Format invàlid per a ${n[t.format]??e.format}`}case"not_multiple_of":return`Número invàlid: ha de ser múltiple de ${e.divisor}`;case"unrecognized_keys":return`Clau${e.keys.length>1?"s":""} no reconeguda${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Clau invàlida a ${e.origin}`;case"invalid_union":default:return"Entrada invàlida";case"invalid_element":return`Element invàlid a ${e.origin}`}}};function Mb(){return{localeError:Ib()}}const Db=()=>{const e={string:{unit:"znaků",verb:"mít"},file:{unit:"bajtů",verb:"mít"},array:{unit:"prvků",verb:"mít"},set:{unit:"prvků",verb:"mít"}};function t(t){return e[t]??null}const n={regex:"regulární výraz",email:"e-mailová adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a čas ve formátu ISO",date:"datum ve formátu ISO",time:"čas ve formátu ISO",duration:"doba trvání ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"řetězec zakódovaný ve formátu base64",base64url:"řetězec zakódovaný ve formátu base64url",json_string:"řetězec ve formátu JSON",e164:"číslo E.164",jwt:"JWT",template_literal:"vstup"};return e=>{switch(e.code){case"invalid_type":return`Neplatný vstup: očekáváno ${e.expected}, obdrženo ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"číslo";case"string":return"řetězec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neplatný vstup: očekáváno ${am(e.values[0])}`:`Neplatná možnost: očekávána jedna z hodnot ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Hodnota je příliš velká: ${e.origin??"hodnota"} musí mít ${n}${e.maximum.toString()} ${r.unit??"prvků"}`:`Hodnota je příliš velká: ${e.origin??"hodnota"} musí být ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Hodnota je příliš malá: ${e.origin??"hodnota"} musí mít ${n}${e.minimum.toString()} ${r.unit??"prvků"}`:`Hodnota je příliš malá: ${e.origin??"hodnota"} musí být ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Neplatný řetězec: musí začínat na "${t.prefix}"`:"ends_with"===t.format?`Neplatný řetězec: musí končit na "${t.suffix}"`:"includes"===t.format?`Neplatný řetězec: musí obsahovat "${t.includes}"`:"regex"===t.format?`Neplatný řetězec: musí odpovídat vzoru ${t.pattern}`:`Neplatný formát ${n[t.format]??e.format}`}case"not_multiple_of":return`Neplatné číslo: musí být násobkem ${e.divisor}`;case"unrecognized_keys":return`Neznámé klíče: ${jp(e.keys,", ")}`;case"invalid_key":return`Neplatný klíč v ${e.origin}`;case"invalid_union":default:return"Neplatný vstup";case"invalid_element":return`Neplatná hodnota v ${e.origin}`}}};function Rb(){return{localeError:Db()}}const Qb=()=>{const e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"sæt",file:"fil"};function n(t){return e[t]??null}function r(e){return t[e]??e}const i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslæt",date:"ISO-dato",time:"ISO-klokkeslæt",duration:"ISO-varighed",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Ugyldigt input: forventede ${r(e.expected)}, fik ${r((e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tal";case"object":return Array.isArray(e)?"liste":null===e?"null":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objekt"}return t})(e.input))}`;case"invalid_value":return 1===e.values.length?`Ugyldig værdi: forventede ${am(e.values[0])}`:`Ugyldigt valg: forventede en af følgende ${jp(e.values,"|")}`;case"too_big":{const t=e.inclusive?"<=":"<",i=n(e.origin),o=r(e.origin);return i?`For stor: forventede ${o??"value"} ${i.verb} ${t} ${e.maximum.toString()} ${i.unit??"elementer"}`:`For stor: forventede ${o??"value"} havde ${t} ${e.maximum.toString()}`}case"too_small":{const t=e.inclusive?">=":">",i=n(e.origin),o=r(e.origin);return i?`For lille: forventede ${o} ${i.verb} ${t} ${e.minimum.toString()} ${i.unit}`:`For lille: forventede ${o} havde ${t} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ugyldig streng: skal starte med "${t.prefix}"`:"ends_with"===t.format?`Ugyldig streng: skal ende med "${t.suffix}"`:"includes"===t.format?`Ugyldig streng: skal indeholde "${t.includes}"`:"regex"===t.format?`Ugyldig streng: skal matche mønsteret ${t.pattern}`:`Ugyldig ${i[t.format]??e.format}`}case"not_multiple_of":return`Ugyldigt tal: skal være deleligt med ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukendte nøgler":"Ukendt nøgle"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Ugyldig nøgle i ${e.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig værdi i ${e.origin}`;default:return"Ugyldigt input"}}};function zb(){return{localeError:Qb()}}const Lb=()=>{const e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(t){return e[t]??null}const n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return e=>{switch(e.code){case"invalid_type":return`Ungültige Eingabe: erwartet ${e.expected}, erhalten ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ungültige Eingabe: erwartet ${am(e.values[0])}`:`Ungültige Option: erwartet eine von ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Zu groß: erwartet, dass ${e.origin??"Wert"} ${n}${e.maximum.toString()} ${r.unit??"Elemente"} hat`:`Zu groß: erwartet, dass ${e.origin??"Wert"} ${n}${e.maximum.toString()} ist`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Zu klein: erwartet, dass ${e.origin} ${n}${e.minimum.toString()} ${r.unit} hat`:`Zu klein: erwartet, dass ${e.origin} ${n}${e.minimum.toString()} ist`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ungültiger String: muss mit "${t.prefix}" beginnen`:"ends_with"===t.format?`Ungültiger String: muss mit "${t.suffix}" enden`:"includes"===t.format?`Ungültiger String: muss "${t.includes}" enthalten`:"regex"===t.format?`Ungültiger String: muss dem Muster ${t.pattern} entsprechen`:`Ungültig: ${n[t.format]??e.format}`}case"not_multiple_of":return`Ungültige Zahl: muss ein Vielfaches von ${e.divisor} sein`;case"unrecognized_keys":return`${e.keys.length>1?"Unbekannte Schlüssel":"Unbekannter Schlüssel"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Ungültiger Schlüssel in ${e.origin}`;case"invalid_union":default:return"Ungültige Eingabe";case"invalid_element":return`Ungültiger Wert in ${e.origin}`}}};function Zb(){return{localeError:Lb()}}const Fb=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(t){return e[t]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Invalid input: expected ${e.expected}, received ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${am(e.values[0])}`:`Invalid option: expected one of ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Too big: expected ${e.origin??"value"} to have ${n}${e.maximum.toString()} ${r.unit??"elements"}`:`Too big: expected ${e.origin??"value"} to be ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Too small: expected ${e.origin} to have ${n}${e.minimum.toString()} ${r.unit}`:`Too small: expected ${e.origin} to be ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Invalid string: must start with "${t.prefix}"`:"ends_with"===t.format?`Invalid string: must end with "${t.suffix}"`:"includes"===t.format?`Invalid string: must include "${t.includes}"`:"regex"===t.format?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function Ub(){return{localeError:Fb()}}const Vb=()=>{const e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(t){return e[t]??null}const n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoĝio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daŭro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return e=>{switch(e.code){case"invalid_type":return`Nevalida enigo: atendiĝis ${e.expected}, riceviĝis ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Nevalida enigo: atendiĝis ${am(e.values[0])}`:`Nevalida opcio: atendiĝis unu el ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Tro granda: atendiĝis ke ${e.origin??"valoro"} havu ${n}${e.maximum.toString()} ${r.unit??"elementojn"}`:`Tro granda: atendiĝis ke ${e.origin??"valoro"} havu ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Tro malgranda: atendiĝis ke ${e.origin} havu ${n}${e.minimum.toString()} ${r.unit}`:`Tro malgranda: atendiĝis ke ${e.origin} estu ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Nevalida karaktraro: devas komenciĝi per "${t.prefix}"`:"ends_with"===t.format?`Nevalida karaktraro: devas finiĝi per "${t.suffix}"`:"includes"===t.format?`Nevalida karaktraro: devas inkluzivi "${t.includes}"`:"regex"===t.format?`Nevalida karaktraro: devas kongrui kun la modelo ${t.pattern}`:`Nevalida ${n[t.format]??e.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${e.divisor}`;case"unrecognized_keys":return`Nekonata${e.keys.length>1?"j":""} ŝlosilo${e.keys.length>1?"j":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Nevalida ŝlosilo en ${e.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${e.origin}`}}};function Gb(){return{localeError:Vb()}}const Bb=()=>{const e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"número",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"número grande",symbol:"símbolo",undefined:"indefinido",null:"nulo",function:"función",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeración",union:"unión",literal:"literal",promise:"promesa",void:"vacío",never:"nunca",unknown:"desconocido",any:"cualquiera"};function n(t){return e[t]??null}function r(e){return t[e]??e}const i={regex:"entrada",email:"dirección de correo electrónico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duración ISO",ipv4:"dirección IPv4",ipv6:"dirección IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Entrada inválida: se esperaba ${r(e.expected)}, recibido ${r((e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":return Array.isArray(e)?"array":null===e?"null":Object.getPrototypeOf(e)!==Object.prototype?e.constructor.name:"object"}return t})(e.input))}`;case"invalid_value":return 1===e.values.length?`Entrada inválida: se esperaba ${am(e.values[0])}`:`Opción inválida: se esperaba una de ${jp(e.values,"|")}`;case"too_big":{const t=e.inclusive?"<=":"<",i=n(e.origin),o=r(e.origin);return i?`Demasiado grande: se esperaba que ${o??"valor"} tuviera ${t}${e.maximum.toString()} ${i.unit??"elementos"}`:`Demasiado grande: se esperaba que ${o??"valor"} fuera ${t}${e.maximum.toString()}`}case"too_small":{const t=e.inclusive?">=":">",i=n(e.origin),o=r(e.origin);return i?`Demasiado pequeño: se esperaba que ${o} tuviera ${t}${e.minimum.toString()} ${i.unit}`:`Demasiado pequeño: se esperaba que ${o} fuera ${t}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Cadena inválida: debe comenzar con "${t.prefix}"`:"ends_with"===t.format?`Cadena inválida: debe terminar en "${t.suffix}"`:"includes"===t.format?`Cadena inválida: debe incluir "${t.includes}"`:"regex"===t.format?`Cadena inválida: debe coincidir con el patrón ${t.pattern}`:`Inválido ${i[t.format]??e.format}`}case"not_multiple_of":return`Número inválido: debe ser múltiplo de ${e.divisor}`;case"unrecognized_keys":return`Llave${e.keys.length>1?"s":""} desconocida${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Llave inválida en ${r(e.origin)}`;case"invalid_union":default:return"Entrada inválida";case"invalid_element":return`Valor inválido en ${r(e.origin)}`}}};function Xb(){return{localeError:Bb()}}const Yb=()=>{const e={string:{unit:"کاراکتر",verb:"داشته باشد"},file:{unit:"بایت",verb:"داشته باشد"},array:{unit:"آیتم",verb:"داشته باشد"},set:{unit:"آیتم",verb:"داشته باشد"}};function t(t){return e[t]??null}const n={regex:"ورودی",email:"آدرس ایمیل",url:"URL",emoji:"ایموجی",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاریخ و زمان ایزو",date:"تاریخ ایزو",time:"زمان ایزو",duration:"مدت زمان ایزو",ipv4:"IPv4 آدرس",ipv6:"IPv6 آدرس",cidrv4:"IPv4 دامنه",cidrv6:"IPv6 دامنه",base64:"base64-encoded رشته",base64url:"base64url-encoded رشته",json_string:"JSON رشته",e164:"E.164 عدد",jwt:"JWT",template_literal:"ورودی"};return e=>{switch(e.code){case"invalid_type":return`ورودی نامعتبر: می‌بایست ${e.expected} می‌بود، ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"عدد";case"object":if(Array.isArray(e))return"آرایه";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} دریافت شد`;case"invalid_value":return 1===e.values.length?`ورودی نامعتبر: می‌بایست ${am(e.values[0])} می‌بود`:`گزینه نامعتبر: می‌بایست یکی از ${jp(e.values,"|")} می‌بود`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`خیلی بزرگ: ${e.origin??"مقدار"} باید ${n}${e.maximum.toString()} ${r.unit??"عنصر"} باشد`:`خیلی بزرگ: ${e.origin??"مقدار"} باید ${n}${e.maximum.toString()} باشد`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`خیلی کوچک: ${e.origin} باید ${n}${e.minimum.toString()} ${r.unit} باشد`:`خیلی کوچک: ${e.origin} باید ${n}${e.minimum.toString()} باشد`}case"invalid_format":{const t=e;return"starts_with"===t.format?`رشته نامعتبر: باید با "${t.prefix}" شروع شود`:"ends_with"===t.format?`رشته نامعتبر: باید با "${t.suffix}" تمام شود`:"includes"===t.format?`رشته نامعتبر: باید شامل "${t.includes}" باشد`:"regex"===t.format?`رشته نامعتبر: باید با الگوی ${t.pattern} مطابقت داشته باشد`:`${n[t.format]??e.format} نامعتبر`}case"not_multiple_of":return`عدد نامعتبر: باید مضرب ${e.divisor} باشد`;case"unrecognized_keys":return`کلید${e.keys.length>1?"های":""} ناشناس: ${jp(e.keys,", ")}`;case"invalid_key":return`کلید ناشناس در ${e.origin}`;case"invalid_union":default:return"ورودی نامعتبر";case"invalid_element":return`مقدار نامعتبر در ${e.origin}`}}};function Wb(){return{localeError:Yb()}}const qb=()=>{const e={string:{unit:"merkkiä",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"päivämäärän"}};function t(t){return e[t]??null}const n={regex:"säännöllinen lauseke",email:"sähköpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-päivämäärä",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return e=>{switch(e.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${e.expected}, oli ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Virheellinen syöte: täytyy olla ${am(e.values[0])}`:`Virheellinen valinta: täytyy olla yksi seuraavista: ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Liian suuri: ${r.subject} täytyy olla ${n}${e.maximum.toString()} ${r.unit}`.trim():`Liian suuri: arvon täytyy olla ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Liian pieni: ${r.subject} täytyy olla ${n}${e.minimum.toString()} ${r.unit}`.trim():`Liian pieni: arvon täytyy olla ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Virheellinen syöte: täytyy alkaa "${t.prefix}"`:"ends_with"===t.format?`Virheellinen syöte: täytyy loppua "${t.suffix}"`:"includes"===t.format?`Virheellinen syöte: täytyy sisältää "${t.includes}"`:"regex"===t.format?`Virheellinen syöte: täytyy vastata säännöllistä lauseketta ${t.pattern}`:`Virheellinen ${n[t.format]??e.format}`}case"not_multiple_of":return`Virheellinen luku: täytyy olla luvun ${e.divisor} monikerta`;case"unrecognized_keys":return`${e.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${jp(e.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syöte"}}};function Hb(){return{localeError:qb()}}const Kb=()=>{const e={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function t(t){return e[t]??null}const n={regex:"entrée",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return e=>{switch(e.code){case"invalid_type":return`Entrée invalide : ${e.expected} attendu, ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} reçu`;case"invalid_value":return 1===e.values.length?`Entrée invalide : ${am(e.values[0])} attendu`:`Option invalide : une valeur parmi ${jp(e.values,"|")} attendue`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Trop grand : ${e.origin??"valeur"} doit ${r.verb} ${n}${e.maximum.toString()} ${r.unit??"élément(s)"}`:`Trop grand : ${e.origin??"valeur"} doit être ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Trop petit : ${e.origin} doit ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Trop petit : ${e.origin} doit être ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chaîne invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chaîne invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chaîne invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chaîne invalide : doit correspondre au modèle ${t.pattern}`:`${n[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${e.divisor}`;case"unrecognized_keys":return`Clé${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${jp(e.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${e.origin}`;case"invalid_union":default:return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}};function Jb(){return{localeError:Kb()}}const eO=()=>{const e={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function t(t){return e[t]??null}const n={regex:"entrée",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return e=>{switch(e.code){case"invalid_type":return`Entrée invalide : attendu ${e.expected}, reçu ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entrée invalide : attendu ${am(e.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"≤":"<",r=t(e.origin);return r?`Trop grand : attendu que ${e.origin??"la valeur"} ait ${n}${e.maximum.toString()} ${r.unit}`:`Trop grand : attendu que ${e.origin??"la valeur"} soit ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?"≥":">",r=t(e.origin);return r?`Trop petit : attendu que ${e.origin} ait ${n}${e.minimum.toString()} ${r.unit}`:`Trop petit : attendu que ${e.origin} soit ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chaîne invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chaîne invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chaîne invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chaîne invalide : doit correspondre au motif ${t.pattern}`:`${n[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${e.divisor}`;case"unrecognized_keys":return`Clé${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${jp(e.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${e.origin}`;case"invalid_union":default:return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}};function tO(){return{localeError:eO()}}const nO=()=>{const e={string:{unit:"אותיות",verb:"לכלול"},file:{unit:"בייטים",verb:"לכלול"},array:{unit:"פריטים",verb:"לכלול"},set:{unit:"פריטים",verb:"לכלול"}};function t(t){return e[t]??null}const n={regex:"קלט",email:"כתובת אימייל",url:"כתובת רשת",emoji:"אימוג'י",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"תאריך וזמן ISO",date:"תאריך ISO",time:"זמן ISO",duration:"משך זמן ISO",ipv4:"כתובת IPv4",ipv6:"כתובת IPv6",cidrv4:"טווח IPv4",cidrv6:"טווח IPv6",base64:"מחרוזת בבסיס 64",base64url:"מחרוזת בבסיס 64 לכתובות רשת",json_string:"מחרוזת JSON",e164:"מספר E.164",jwt:"JWT",template_literal:"קלט"};return e=>{switch(e.code){case"invalid_type":return`קלט לא תקין: צריך ${e.expected}, התקבל ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`קלט לא תקין: צריך ${am(e.values[0])}`:`קלט לא תקין: צריך אחת מהאפשרויות  ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`גדול מדי: ${e.origin??"value"} צריך להיות ${n}${e.maximum.toString()} ${r.unit??"elements"}`:`גדול מדי: ${e.origin??"value"} צריך להיות ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`קטן מדי: ${e.origin} צריך להיות ${n}${e.minimum.toString()} ${r.unit}`:`קטן מדי: ${e.origin} צריך להיות ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`מחרוזת לא תקינה: חייבת להתחיל ב"${t.prefix}"`:"ends_with"===t.format?`מחרוזת לא תקינה: חייבת להסתיים ב "${t.suffix}"`:"includes"===t.format?`מחרוזת לא תקינה: חייבת לכלול "${t.includes}"`:"regex"===t.format?`מחרוזת לא תקינה: חייבת להתאים לתבנית ${t.pattern}`:`${n[t.format]??e.format} לא תקין`}case"not_multiple_of":return`מספר לא תקין: חייב להיות מכפלה של ${e.divisor}`;case"unrecognized_keys":return`מפתח${e.keys.length>1?"ות":""} לא מזוה${e.keys.length>1?"ים":"ה"}: ${jp(e.keys,", ")}`;case"invalid_key":return`מפתח לא תקין ב${e.origin}`;case"invalid_union":default:return"קלט לא תקין";case"invalid_element":return`ערך לא תקין ב${e.origin}`}}};function rO(){return{localeError:nO()}}const iO=()=>{const e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(t){return e[t]??null}const n={regex:"bemenet",email:"email cím",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO időbélyeg",date:"ISO dátum",time:"ISO idő",duration:"ISO időintervallum",ipv4:"IPv4 cím",ipv6:"IPv6 cím",cidrv4:"IPv4 tartomány",cidrv6:"IPv6 tartomány",base64:"base64-kódolt string",base64url:"base64url-kódolt string",json_string:"JSON string",e164:"E.164 szám",jwt:"JWT",template_literal:"bemenet"};return e=>{switch(e.code){case"invalid_type":return`Érvénytelen bemenet: a várt érték ${e.expected}, a kapott érték ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szám";case"object":if(Array.isArray(e))return"tömb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Érvénytelen bemenet: a várt érték ${am(e.values[0])}`:`Érvénytelen opció: valamelyik érték várt ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Túl nagy: ${e.origin??"érték"} mérete túl nagy ${n}${e.maximum.toString()} ${r.unit??"elem"}`:`Túl nagy: a bemeneti érték ${e.origin??"érték"} túl nagy: ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Túl kicsi: a bemeneti érték ${e.origin} mérete túl kicsi ${n}${e.minimum.toString()} ${r.unit}`:`Túl kicsi: a bemeneti érték ${e.origin} túl kicsi ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Érvénytelen string: "${t.prefix}" értékkel kell kezdődnie`:"ends_with"===t.format?`Érvénytelen string: "${t.suffix}" értékkel kell végződnie`:"includes"===t.format?`Érvénytelen string: "${t.includes}" értéket kell tartalmaznia`:"regex"===t.format?`Érvénytelen string: ${t.pattern} mintának kell megfelelnie`:`Érvénytelen ${n[t.format]??e.format}`}case"not_multiple_of":return`Érvénytelen szám: ${e.divisor} többszörösének kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Érvénytelen kulcs ${e.origin}`;case"invalid_union":default:return"Érvénytelen bemenet";case"invalid_element":return`Érvénytelen érték: ${e.origin}`}}};function oO(){return{localeError:iO()}}const aO=()=>{const e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(t){return e[t]??null}const n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak valid: diharapkan ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak valid: diharapkan ${am(e.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Terlalu besar: diharapkan ${e.origin??"value"} memiliki ${n}${e.maximum.toString()} ${r.unit??"elemen"}`:`Terlalu besar: diharapkan ${e.origin??"value"} menjadi ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Terlalu kecil: diharapkan ${e.origin} memiliki ${n}${e.minimum.toString()} ${r.unit}`:`Terlalu kecil: diharapkan ${e.origin} menjadi ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`String tidak valid: harus dimulai dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak valid: harus berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak valid: harus menyertakan "${t.includes}"`:"regex"===t.format?`String tidak valid: harus sesuai pola ${t.pattern}`:`${n[t.format]??e.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${e.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${e.origin}`}}};function sO(){return{localeError:aO()}}const lO=()=>{const e={string:{unit:"stafi",verb:"að hafa"},file:{unit:"bæti",verb:"að hafa"},array:{unit:"hluti",verb:"að hafa"},set:{unit:"hluti",verb:"að hafa"}};function t(t){return e[t]??null}const n={regex:"gildi",email:"netfang",url:"vefslóð",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tími",date:"ISO dagsetning",time:"ISO tími",duration:"ISO tímalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tölugildi",jwt:"JWT",template_literal:"gildi"};return e=>{switch(e.code){case"invalid_type":return`Rangt gildi: Þú slóst inn ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"númer";case"object":if(Array.isArray(e))return"fylki";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} þar sem á að vera ${e.expected}`;case"invalid_value":return 1===e.values.length?`Rangt gildi: gert ráð fyrir ${am(e.values[0])}`:`Ógilt val: má vera eitt af eftirfarandi ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Of stórt: gert er ráð fyrir að ${e.origin??"gildi"} hafi ${n}${e.maximum.toString()} ${r.unit??"hluti"}`:`Of stórt: gert er ráð fyrir að ${e.origin??"gildi"} sé ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Of lítið: gert er ráð fyrir að ${e.origin} hafi ${n}${e.minimum.toString()} ${r.unit}`:`Of lítið: gert er ráð fyrir að ${e.origin} sé ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ógildur strengur: verður að byrja á "${t.prefix}"`:"ends_with"===t.format?`Ógildur strengur: verður að enda á "${t.suffix}"`:"includes"===t.format?`Ógildur strengur: verður að innihalda "${t.includes}"`:"regex"===t.format?`Ógildur strengur: verður að fylgja mynstri ${t.pattern}`:`Rangt ${n[t.format]??e.format}`}case"not_multiple_of":return`Röng tala: verður að vera margfeldi af ${e.divisor}`;case"unrecognized_keys":return`Óþekkt ${e.keys.length>1?"ir lyklar":"ur lykill"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Rangur lykill í ${e.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi í ${e.origin}`}}};function uO(){return{localeError:lO()}}const cO=()=>{const e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(t){return e[t]??null}const n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input non valido: atteso ${e.expected}, ricevuto ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input non valido: atteso ${am(e.values[0])}`:`Opzione non valida: atteso uno tra ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Troppo grande: ${e.origin??"valore"} deve avere ${n}${e.maximum.toString()} ${r.unit??"elementi"}`:`Troppo grande: ${e.origin??"valore"} deve essere ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Troppo piccolo: ${e.origin} deve avere ${n}${e.minimum.toString()} ${r.unit}`:`Troppo piccolo: ${e.origin} deve essere ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Stringa non valida: deve iniziare con "${t.prefix}"`:"ends_with"===t.format?`Stringa non valida: deve terminare con "${t.suffix}"`:"includes"===t.format?`Stringa non valida: deve includere "${t.includes}"`:"regex"===t.format?`Stringa non valida: deve corrispondere al pattern ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${e.divisor}`;case"unrecognized_keys":return`Chiav${e.keys.length>1?"i":"e"} non riconosciut${e.keys.length>1?"e":"a"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${e.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${e.origin}`}}};function dO(){return{localeError:cO()}}const fO=()=>{const e={string:{unit:"文字",verb:"である"},file:{unit:"バイト",verb:"である"},array:{unit:"要素",verb:"である"},set:{unit:"要素",verb:"である"}};function t(t){return e[t]??null}const n={regex:"入力値",email:"メールアドレス",url:"URL",emoji:"絵文字",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日時",date:"ISO日付",time:"ISO時刻",duration:"ISO期間",ipv4:"IPv4アドレス",ipv6:"IPv6アドレス",cidrv4:"IPv4範囲",cidrv6:"IPv6範囲",base64:"base64エンコード文字列",base64url:"base64urlエンコード文字列",json_string:"JSON文字列",e164:"E.164番号",jwt:"JWT",template_literal:"入力値"};return e=>{switch(e.code){case"invalid_type":return`無効な入力: ${e.expected}が期待されましたが、${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"数値";case"object":if(Array.isArray(e))return"配列";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}が入力されました`;case"invalid_value":return 1===e.values.length?`無効な入力: ${am(e.values[0])}が期待されました`:`無効な選択: ${jp(e.values,"、")}のいずれかである必要があります`;case"too_big":{const n=e.inclusive?"以下である":"より小さい",r=t(e.origin);return r?`大きすぎる値: ${e.origin??"値"}は${e.maximum.toString()}${r.unit??"要素"}${n}必要があります`:`大きすぎる値: ${e.origin??"値"}は${e.maximum.toString()}${n}必要があります`}case"too_small":{const n=e.inclusive?"以上である":"より大きい",r=t(e.origin);return r?`小さすぎる値: ${e.origin}は${e.minimum.toString()}${r.unit}${n}必要があります`:`小さすぎる値: ${e.origin}は${e.minimum.toString()}${n}必要があります`}case"invalid_format":{const t=e;return"starts_with"===t.format?`無効な文字列: "${t.prefix}"で始まる必要があります`:"ends_with"===t.format?`無効な文字列: "${t.suffix}"で終わる必要があります`:"includes"===t.format?`無効な文字列: "${t.includes}"を含む必要があります`:"regex"===t.format?`無効な文字列: パターン${t.pattern}に一致する必要があります`:`無効な${n[t.format]??e.format}`}case"not_multiple_of":return`無効な数値: ${e.divisor}の倍数である必要があります`;case"unrecognized_keys":return`認識されていないキー${e.keys.length>1?"群":""}: ${jp(e.keys,"、")}`;case"invalid_key":return`${e.origin}内の無効なキー`;case"invalid_union":default:return"無効な入力";case"invalid_element":return`${e.origin}内の無効な値`}}};function hO(){return{localeError:fO()}}const pO=()=>{const e={string:{unit:"სიმბოლო",verb:"უნდა შეიცავდეს"},file:{unit:"ბაიტი",verb:"უნდა შეიცავდეს"},array:{unit:"ელემენტი",verb:"უნდა შეიცავდეს"},set:{unit:"ელემენტი",verb:"უნდა შეიცავდეს"}};function t(t){return e[t]??null}const n={regex:"შეყვანა",email:"ელ-ფოსტის მისამართი",url:"URL",emoji:"ემოჯი",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"თარიღი-დრო",date:"თარიღი",time:"დრო",duration:"ხანგრძლივობა",ipv4:"IPv4 მისამართი",ipv6:"IPv6 მისამართი",cidrv4:"IPv4 დიაპაზონი",cidrv6:"IPv6 დიაპაზონი",base64:"base64-კოდირებული სტრინგი",base64url:"base64url-კოდირებული სტრინგი",json_string:"JSON სტრინგი",e164:"E.164 ნომერი",jwt:"JWT",template_literal:"შეყვანა"};return e=>{switch(e.code){case"invalid_type":return`არასწორი შეყვანა: მოსალოდნელი ${e.expected}, მიღებული ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"რიცხვი";case"object":if(Array.isArray(e))return"მასივი";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return{string:"სტრინგი",boolean:"ბულეანი",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"ფუნქცია"}[t]??t})(e.input)}`;case"invalid_value":return 1===e.values.length?`არასწორი შეყვანა: მოსალოდნელი ${am(e.values[0])}`:`არასწორი ვარიანტი: მოსალოდნელია ერთ-ერთი ${jp(e.values,"|")}-დან`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`ზედმეტად დიდი: მოსალოდნელი ${e.origin??"მნიშვნელობა"} ${r.verb} ${n}${e.maximum.toString()} ${r.unit}`:`ზედმეტად დიდი: მოსალოდნელი ${e.origin??"მნიშვნელობა"} იყოს ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`ზედმეტად პატარა: მოსალოდნელი ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`ზედმეტად პატარა: მოსალოდნელი ${e.origin} იყოს ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`არასწორი სტრინგი: უნდა იწყებოდეს "${t.prefix}"-ით`:"ends_with"===t.format?`არასწორი სტრინგი: უნდა მთავრდებოდეს "${t.suffix}"-ით`:"includes"===t.format?`არასწორი სტრინგი: უნდა შეიცავდეს "${t.includes}"-ს`:"regex"===t.format?`არასწორი სტრინგი: უნდა შეესაბამებოდეს შაბლონს ${t.pattern}`:`არასწორი ${n[t.format]??e.format}`}case"not_multiple_of":return`არასწორი რიცხვი: უნდა იყოს ${e.divisor}-ის ჯერადი`;case"unrecognized_keys":return`უცნობი გასაღებ${e.keys.length>1?"ები":"ი"}: ${jp(e.keys,", ")}`;case"invalid_key":return`არასწორი გასაღები ${e.origin}-ში`;case"invalid_union":default:return"არასწორი შეყვანა";case"invalid_element":return`არასწორი მნიშვნელობა ${e.origin}-ში`}}};function mO(){return{localeError:pO()}}const gO=()=>{const e={string:{unit:"តួអក្សរ",verb:"គួរមាន"},file:{unit:"បៃ",verb:"គួរមាន"},array:{unit:"ធាតុ",verb:"គួរមាន"},set:{unit:"ធាតុ",verb:"គួរមាន"}};function t(t){return e[t]??null}const n={regex:"ទិន្នន័យបញ្ចូល",email:"អាសយដ្ឋានអ៊ីមែល",url:"URL",emoji:"សញ្ញាអារម្មណ៍",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"កាលបរិច្ឆេទ និងម៉ោង ISO",date:"កាលបរិច្ឆេទ ISO",time:"ម៉ោង ISO",duration:"រយៈពេល ISO",ipv4:"អាសយដ្ឋាន IPv4",ipv6:"អាសយដ្ឋាន IPv6",cidrv4:"ដែនអាសយដ្ឋាន IPv4",cidrv6:"ដែនអាសយដ្ឋាន IPv6",base64:"ខ្សែអក្សរអ៊ិកូដ base64",base64url:"ខ្សែអក្សរអ៊ិកូដ base64url",json_string:"ខ្សែអក្សរ JSON",e164:"លេខ E.164",jwt:"JWT",template_literal:"ទិន្នន័យបញ្ចូល"};return e=>{switch(e.code){case"invalid_type":return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${e.expected} ប៉ុន្តែទទួលបាន ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"មិនមែនជាលេខ (NaN)":"លេខ";case"object":if(Array.isArray(e))return"អារេ (Array)";if(null===e)return"គ្មានតម្លៃ (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${am(e.values[0])}`:`ជម្រើសមិនត្រឹមត្រូវ៖ ត្រូវជាមួយក្នុងចំណោម ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`ធំពេក៖ ត្រូវការ ${e.origin??"តម្លៃ"} ${n} ${e.maximum.toString()} ${r.unit??"ធាតុ"}`:`ធំពេក៖ ត្រូវការ ${e.origin??"តម្លៃ"} ${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`តូចពេក៖ ត្រូវការ ${e.origin} ${n} ${e.minimum.toString()} ${r.unit}`:`តូចពេក៖ ត្រូវការ ${e.origin} ${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវចាប់ផ្តើមដោយ "${t.prefix}"`:"ends_with"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវបញ្ចប់ដោយ "${t.suffix}"`:"includes"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវមាន "${t.includes}"`:"regex"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវតែផ្គូផ្គងនឹងទម្រង់ដែលបានកំណត់ ${t.pattern}`:`មិនត្រឹមត្រូវ៖ ${n[t.format]??e.format}`}case"not_multiple_of":return`លេខមិនត្រឹមត្រូវ៖ ត្រូវតែជាពហុគុណនៃ ${e.divisor}`;case"unrecognized_keys":return`រកឃើញសោមិនស្គាល់៖ ${jp(e.keys,", ")}`;case"invalid_key":return`សោមិនត្រឹមត្រូវនៅក្នុង ${e.origin}`;case"invalid_union":default:return"ទិន្នន័យមិនត្រឹមត្រូវ";case"invalid_element":return`ទិន្នន័យមិនត្រឹមត្រូវនៅក្នុង ${e.origin}`}}};function vO(){return{localeError:gO()}}function yO(){return vO()}const bO=()=>{const e={string:{unit:"문자",verb:"to have"},file:{unit:"바이트",verb:"to have"},array:{unit:"개",verb:"to have"},set:{unit:"개",verb:"to have"}};function t(t){return e[t]??null}const n={regex:"입력",email:"이메일 주소",url:"URL",emoji:"이모지",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 날짜시간",date:"ISO 날짜",time:"ISO 시간",duration:"ISO 기간",ipv4:"IPv4 주소",ipv6:"IPv6 주소",cidrv4:"IPv4 범위",cidrv6:"IPv6 범위",base64:"base64 인코딩 문자열",base64url:"base64url 인코딩 문자열",json_string:"JSON 문자열",e164:"E.164 번호",jwt:"JWT",template_literal:"입력"};return e=>{switch(e.code){case"invalid_type":return`잘못된 입력: 예상 타입은 ${e.expected}, 받은 타입은 ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}입니다`;case"invalid_value":return 1===e.values.length?`잘못된 입력: 값은 ${am(e.values[0])} 이어야 합니다`:`잘못된 옵션: ${jp(e.values,"또는 ")} 중 하나여야 합니다`;case"too_big":{const n=e.inclusive?"이하":"미만",r="미만"===n?"이어야 합니다":"여야 합니다",i=t(e.origin),o=i?.unit??"요소";return i?`${e.origin??"값"}이 너무 큽니다: ${e.maximum.toString()}${o} ${n}${r}`:`${e.origin??"값"}이 너무 큽니다: ${e.maximum.toString()} ${n}${r}`}case"too_small":{const n=e.inclusive?"이상":"초과",r="이상"===n?"이어야 합니다":"여야 합니다",i=t(e.origin),o=i?.unit??"요소";return i?`${e.origin??"값"}이 너무 작습니다: ${e.minimum.toString()}${o} ${n}${r}`:`${e.origin??"값"}이 너무 작습니다: ${e.minimum.toString()} ${n}${r}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`잘못된 문자열: "${t.prefix}"(으)로 시작해야 합니다`:"ends_with"===t.format?`잘못된 문자열: "${t.suffix}"(으)로 끝나야 합니다`:"includes"===t.format?`잘못된 문자열: "${t.includes}"을(를) 포함해야 합니다`:"regex"===t.format?`잘못된 문자열: 정규식 ${t.pattern} 패턴과 일치해야 합니다`:`잘못된 ${n[t.format]??e.format}`}case"not_multiple_of":return`잘못된 숫자: ${e.divisor}의 배수여야 합니다`;case"unrecognized_keys":return`인식할 수 없는 키: ${jp(e.keys,", ")}`;case"invalid_key":return`잘못된 키: ${e.origin}`;case"invalid_union":default:return"잘못된 입력";case"invalid_element":return`잘못된 값: ${e.origin}`}}};function OO(){return{localeError:bO()}}const wO=(e,t=void 0)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skaičius";case"bigint":return"sveikasis skaičius";case"string":return"eilutė";case"boolean":return"loginė reikšmė";case"undefined":case"void":return"neapibrėžta reikšmė";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return void 0===t?"nežinomas objektas":null===t?"nulinė reikšmė":Array.isArray(t)?"masyvas":Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:"objektas";case"null":return"nulinė reikšmė"}return e},xO=e=>e.charAt(0).toUpperCase()+e.slice(1);function SO(e){const t=Math.abs(e),n=t%10,r=t%100;return r>=11&&r<=19||0===n?"many":1===n?"one":"few"}const kO=()=>{const e={string:{unit:{one:"simbolis",few:"simboliai",many:"simbolių"},verb:{smaller:{inclusive:"turi būti ne ilgesnė kaip",notInclusive:"turi būti trumpesnė kaip"},bigger:{inclusive:"turi būti ne trumpesnė kaip",notInclusive:"turi būti ilgesnė kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"baitų"},verb:{smaller:{inclusive:"turi būti ne didesnis kaip",notInclusive:"turi būti mažesnis kaip"},bigger:{inclusive:"turi būti ne mažesnis kaip",notInclusive:"turi būti didesnis kaip"}}},array:{unit:{one:"elementą",few:"elementus",many:"elementų"},verb:{smaller:{inclusive:"turi turėti ne daugiau kaip",notInclusive:"turi turėti mažiau kaip"},bigger:{inclusive:"turi turėti ne mažiau kaip",notInclusive:"turi turėti daugiau kaip"}}},set:{unit:{one:"elementą",few:"elementus",many:"elementų"},verb:{smaller:{inclusive:"turi turėti ne daugiau kaip",notInclusive:"turi turėti mažiau kaip"},bigger:{inclusive:"turi turėti ne mažiau kaip",notInclusive:"turi turėti daugiau kaip"}}}};function t(t,n,r,i){const o=e[t]??null;return null===o?o:{unit:o.unit[n],verb:o.verb[i][r?"inclusive":"notInclusive"]}}const n={regex:"įvestis",email:"el. pašto adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukmė",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 užkoduota eilutė",base64url:"base64url užkoduota eilutė",json_string:"JSON eilutė",e164:"E.164 numeris",jwt:"JWT",template_literal:"įvestis"};return e=>{switch(e.code){case"invalid_type":return`Gautas tipas ${(e=>wO(typeof e,e))(e.input)}, o tikėtasi - ${wO(e.expected)}`;case"invalid_value":return 1===e.values.length?`Privalo būti ${am(e.values[0])}`:`Privalo būti vienas iš ${jp(e.values,"|")} pasirinkimų`;case"too_big":{const n=wO(e.origin),r=t(e.origin,SO(Number(e.maximum)),e.inclusive??!1,"smaller");if(r?.verb)return`${xO(n??e.origin??"reikšmė")} ${r.verb} ${e.maximum.toString()} ${r.unit??"elementų"}`;const i=e.inclusive?"ne didesnis kaip":"mažesnis kaip";return`${xO(n??e.origin??"reikšmė")} turi būti ${i} ${e.maximum.toString()} ${r?.unit}`}case"too_small":{const n=wO(e.origin),r=t(e.origin,SO(Number(e.minimum)),e.inclusive??!1,"bigger");if(r?.verb)return`${xO(n??e.origin??"reikšmė")} ${r.verb} ${e.minimum.toString()} ${r.unit??"elementų"}`;const i=e.inclusive?"ne mažesnis kaip":"didesnis kaip";return`${xO(n??e.origin??"reikšmė")} turi būti ${i} ${e.minimum.toString()} ${r?.unit}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Eilutė privalo prasidėti "${t.prefix}"`:"ends_with"===t.format?`Eilutė privalo pasibaigti "${t.suffix}"`:"includes"===t.format?`Eilutė privalo įtraukti "${t.includes}"`:"regex"===t.format?`Eilutė privalo atitikti ${t.pattern}`:`Neteisingas ${n[t.format]??e.format}`}case"not_multiple_of":return`Skaičius privalo būti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpažint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${jp(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga įvestis";case"invalid_element":{const t=wO(e.origin);return`${xO(t??e.origin??"reikšmė")} turi klaidingą įvestį`}}}};function _O(){return{localeError:kO()}}const PO=()=>{const e={string:{unit:"знаци",verb:"да имаат"},file:{unit:"бајти",verb:"да имаат"},array:{unit:"ставки",verb:"да имаат"},set:{unit:"ставки",verb:"да имаат"}};function t(t){return e[t]??null}const n={regex:"внес",email:"адреса на е-пошта",url:"URL",emoji:"емоџи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO датум и време",date:"ISO датум",time:"ISO време",duration:"ISO времетраење",ipv4:"IPv4 адреса",ipv6:"IPv6 адреса",cidrv4:"IPv4 опсег",cidrv6:"IPv6 опсег",base64:"base64-енкодирана низа",base64url:"base64url-енкодирана низа",json_string:"JSON низа",e164:"E.164 број",jwt:"JWT",template_literal:"внес"};return e=>{switch(e.code){case"invalid_type":return`Грешен внес: се очекува ${e.expected}, примено ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"број";case"object":if(Array.isArray(e))return"низа";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${am(e.values[0])}`:`Грешана опција: се очекува една ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Премногу голем: се очекува ${e.origin??"вредноста"} да има ${n}${e.maximum.toString()} ${r.unit??"елементи"}`:`Премногу голем: се очекува ${e.origin??"вредноста"} да биде ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Премногу мал: се очекува ${e.origin} да има ${n}${e.minimum.toString()} ${r.unit}`:`Премногу мал: се очекува ${e.origin} да биде ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Неважечка низа: мора да започнува со "${t.prefix}"`:"ends_with"===t.format?`Неважечка низа: мора да завршува со "${t.suffix}"`:"includes"===t.format?`Неважечка низа: мора да вклучува "${t.includes}"`:"regex"===t.format?`Неважечка низа: мора да одгоара на патернот ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case"not_multiple_of":return`Грешен број: мора да биде делив со ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Непрепознаени клучеви":"Непрепознаен клуч"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Грешен клуч во ${e.origin}`;case"invalid_union":default:return"Грешен внес";case"invalid_element":return`Грешна вредност во ${e.origin}`}}};function EO(){return{localeError:PO()}}const $O=()=>{const e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(t){return e[t]??null}const n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak sah: dijangka ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak sah: dijangka ${am(e.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Terlalu besar: dijangka ${e.origin??"nilai"} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??"elemen"}`:`Terlalu besar: dijangka ${e.origin??"nilai"} adalah ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Terlalu kecil: dijangka ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Terlalu kecil: dijangka ${e.origin} adalah ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`String tidak sah: mesti bermula dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak sah: mesti berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak sah: mesti mengandungi "${t.includes}"`:"regex"===t.format?`String tidak sah: mesti sepadan dengan corak ${t.pattern}`:`${n[t.format]??e.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${jp(e.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${e.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${e.origin}`}}};function TO(){return{localeError:$O()}}const CO=()=>{const e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function t(t){return e[t]??null}const n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return e=>{switch(e.code){case"invalid_type":return`Ongeldige invoer: verwacht ${e.expected}, ontving ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ongeldige invoer: verwacht ${am(e.values[0])}`:`Ongeldige optie: verwacht één van ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Te lang: verwacht dat ${e.origin??"waarde"} ${n}${e.maximum.toString()} ${r.unit??"elementen"} bevat`:`Te lang: verwacht dat ${e.origin??"waarde"} ${n}${e.maximum.toString()} is`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Te kort: verwacht dat ${e.origin} ${n}${e.minimum.toString()} ${r.unit} bevat`:`Te kort: verwacht dat ${e.origin} ${n}${e.minimum.toString()} is`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ongeldige tekst: moet met "${t.prefix}" beginnen`:"ends_with"===t.format?`Ongeldige tekst: moet op "${t.suffix}" eindigen`:"includes"===t.format?`Ongeldige tekst: moet "${t.includes}" bevatten`:"regex"===t.format?`Ongeldige tekst: moet overeenkomen met patroon ${t.pattern}`:`Ongeldig: ${n[t.format]??e.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${e.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${e.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${e.origin}`}}};function jO(){return{localeError:CO()}}const NO=()=>{const e={string:{unit:"tegn",verb:"å ha"},file:{unit:"bytes",verb:"å ha"},array:{unit:"elementer",verb:"å inneholde"},set:{unit:"elementer",verb:"å inneholde"}};function t(t){return e[t]??null}const n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Ugyldig input: forventet ${e.expected}, fikk ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ugyldig verdi: forventet ${am(e.values[0])}`:`Ugyldig valg: forventet en av ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`For stor(t): forventet ${e.origin??"value"} til å ha ${n}${e.maximum.toString()} ${r.unit??"elementer"}`:`For stor(t): forventet ${e.origin??"value"} til å ha ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`For lite(n): forventet ${e.origin} til å ha ${n}${e.minimum.toString()} ${r.unit}`:`For lite(n): forventet ${e.origin} til å ha ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ugyldig streng: må starte med "${t.prefix}"`:"ends_with"===t.format?`Ugyldig streng: må ende med "${t.suffix}"`:"includes"===t.format?`Ugyldig streng: må inneholde "${t.includes}"`:"regex"===t.format?`Ugyldig streng: må matche mønsteret ${t.pattern}`:`Ugyldig ${n[t.format]??e.format}`}case"not_multiple_of":return`Ugyldig tall: må være et multiplum av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukjente nøkler":"Ukjent nøkkel"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Ugyldig nøkkel i ${e.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${e.origin}`}}};function AO(){return{localeError:NO()}}const IO=()=>{const e={string:{unit:"harf",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"unsur",verb:"olmalıdır"},set:{unit:"unsur",verb:"olmalıdır"}};function t(t){return e[t]??null}const n={regex:"giren",email:"epostagâh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengâmı",date:"ISO tarihi",time:"ISO zamanı",duration:"ISO müddeti",ipv4:"IPv4 nişânı",ipv6:"IPv6 nişânı",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-şifreli metin",base64url:"base64url-şifreli metin",json_string:"JSON metin",e164:"E.164 sayısı",jwt:"JWT",template_literal:"giren"};return e=>{switch(e.code){case"invalid_type":return`Fâsit giren: umulan ${e.expected}, alınan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Fâsit giren: umulan ${am(e.values[0])}`:`Fâsit tercih: mûteberler ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Fazla büyük: ${e.origin??"value"}, ${n}${e.maximum.toString()} ${r.unit??"elements"} sahip olmalıydı.`:`Fazla büyük: ${e.origin??"value"}, ${n}${e.maximum.toString()} olmalıydı.`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Fazla küçük: ${e.origin}, ${n}${e.minimum.toString()} ${r.unit} sahip olmalıydı.`:`Fazla küçük: ${e.origin}, ${n}${e.minimum.toString()} olmalıydı.`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Fâsit metin: "${t.prefix}" ile başlamalı.`:"ends_with"===t.format?`Fâsit metin: "${t.suffix}" ile bitmeli.`:"includes"===t.format?`Fâsit metin: "${t.includes}" ihtivâ etmeli.`:"regex"===t.format?`Fâsit metin: ${t.pattern} nakşına uymalı.`:`Fâsit ${n[t.format]??e.format}`}case"not_multiple_of":return`Fâsit sayı: ${e.divisor} katı olmalıydı.`;case"unrecognized_keys":return`Tanınmayan anahtar ${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`${e.origin} için tanınmayan anahtar var.`;case"invalid_union":return"Giren tanınamadı.";case"invalid_element":return`${e.origin} için tanınmayan kıymet var.`;default:return"Kıymet tanınamadı."}}};function MO(){return{localeError:IO()}}const DO=()=>{const e={string:{unit:"توکي",verb:"ولري"},file:{unit:"بایټس",verb:"ولري"},array:{unit:"توکي",verb:"ولري"},set:{unit:"توکي",verb:"ولري"}};function t(t){return e[t]??null}const n={regex:"ورودي",email:"بریښنالیک",url:"یو آر ال",emoji:"ایموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"نیټه او وخت",date:"نېټه",time:"وخت",duration:"موده",ipv4:"د IPv4 پته",ipv6:"د IPv6 پته",cidrv4:"د IPv4 ساحه",cidrv6:"د IPv6 ساحه",base64:"base64-encoded متن",base64url:"base64url-encoded متن",json_string:"JSON متن",e164:"د E.164 شمېره",jwt:"JWT",template_literal:"ورودي"};return e=>{switch(e.code){case"invalid_type":return`ناسم ورودي: باید ${e.expected} وای, مګر ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"عدد";case"object":if(Array.isArray(e))return"ارې";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} ترلاسه شو`;case"invalid_value":return 1===e.values.length?`ناسم ورودي: باید ${am(e.values[0])} وای`:`ناسم انتخاب: باید یو له ${jp(e.values,"|")} څخه وای`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`ډیر لوی: ${e.origin??"ارزښت"} باید ${n}${e.maximum.toString()} ${r.unit??"عنصرونه"} ولري`:`ډیر لوی: ${e.origin??"ارزښت"} باید ${n}${e.maximum.toString()} وي`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`ډیر کوچنی: ${e.origin} باید ${n}${e.minimum.toString()} ${r.unit} ولري`:`ډیر کوچنی: ${e.origin} باید ${n}${e.minimum.toString()} وي`}case"invalid_format":{const t=e;return"starts_with"===t.format?`ناسم متن: باید د "${t.prefix}" سره پیل شي`:"ends_with"===t.format?`ناسم متن: باید د "${t.suffix}" سره پای ته ورسيږي`:"includes"===t.format?`ناسم متن: باید "${t.includes}" ولري`:"regex"===t.format?`ناسم متن: باید د ${t.pattern} سره مطابقت ولري`:`${n[t.format]??e.format} ناسم دی`}case"not_multiple_of":return`ناسم عدد: باید د ${e.divisor} مضرب وي`;case"unrecognized_keys":return`ناسم ${e.keys.length>1?"کلیډونه":"کلیډ"}: ${jp(e.keys,", ")}`;case"invalid_key":return`ناسم کلیډ په ${e.origin} کې`;case"invalid_union":default:return"ناسمه ورودي";case"invalid_element":return`ناسم عنصر په ${e.origin} کې`}}};function RO(){return{localeError:DO()}}const QO=()=>{const e={string:{unit:"znaków",verb:"mieć"},file:{unit:"bajtów",verb:"mieć"},array:{unit:"elementów",verb:"mieć"},set:{unit:"elementów",verb:"mieć"}};function t(t){return e[t]??null}const n={regex:"wyrażenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciąg znaków zakodowany w formacie base64",base64url:"ciąg znaków zakodowany w formacie base64url",json_string:"ciąg znaków w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejście"};return e=>{switch(e.code){case"invalid_type":return`Nieprawidłowe dane wejściowe: oczekiwano ${e.expected}, otrzymano ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Nieprawidłowe dane wejściowe: oczekiwano ${am(e.values[0])}`:`Nieprawidłowa opcja: oczekiwano jednej z wartości ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Za duża wartość: oczekiwano, że ${e.origin??"wartość"} będzie mieć ${n}${e.maximum.toString()} ${r.unit??"elementów"}`:`Zbyt duż(y/a/e): oczekiwano, że ${e.origin??"wartość"} będzie wynosić ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Za mała wartość: oczekiwano, że ${e.origin??"wartość"} będzie mieć ${n}${e.minimum.toString()} ${r.unit??"elementów"}`:`Zbyt mał(y/a/e): oczekiwano, że ${e.origin??"wartość"} będzie wynosić ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Nieprawidłowy ciąg znaków: musi zaczynać się od "${t.prefix}"`:"ends_with"===t.format?`Nieprawidłowy ciąg znaków: musi kończyć się na "${t.suffix}"`:"includes"===t.format?`Nieprawidłowy ciąg znaków: musi zawierać "${t.includes}"`:"regex"===t.format?`Nieprawidłowy ciąg znaków: musi odpowiadać wzorcowi ${t.pattern}`:`Nieprawidłow(y/a/e) ${n[t.format]??e.format}`}case"not_multiple_of":return`Nieprawidłowa liczba: musi być wielokrotnością ${e.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Nieprawidłowy klucz w ${e.origin}`;case"invalid_union":default:return"Nieprawidłowe dane wejściowe";case"invalid_element":return`Nieprawidłowa wartość w ${e.origin}`}}};function zO(){return{localeError:QO()}}const LO=()=>{const e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(t){return e[t]??null}const n={regex:"padrão",email:"endereço de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duração ISO",ipv4:"endereço IPv4",ipv6:"endereço IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipo inválido: esperado ${e.expected}, recebido ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"número";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entrada inválida: esperado ${am(e.values[0])}`:`Opção inválida: esperada uma das ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Muito grande: esperado que ${e.origin??"valor"} tivesse ${n}${e.maximum.toString()} ${r.unit??"elementos"}`:`Muito grande: esperado que ${e.origin??"valor"} fosse ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Muito pequeno: esperado que ${e.origin} tivesse ${n}${e.minimum.toString()} ${r.unit}`:`Muito pequeno: esperado que ${e.origin} fosse ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Texto inválido: deve começar com "${t.prefix}"`:"ends_with"===t.format?`Texto inválido: deve terminar com "${t.suffix}"`:"includes"===t.format?`Texto inválido: deve incluir "${t.includes}"`:"regex"===t.format?`Texto inválido: deve corresponder ao padrão ${t.pattern}`:`${n[t.format]??e.format} inválido`}case"not_multiple_of":return`Número inválido: deve ser múltiplo de ${e.divisor}`;case"unrecognized_keys":return`Chave${e.keys.length>1?"s":""} desconhecida${e.keys.length>1?"s":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Chave inválida em ${e.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido em ${e.origin}`;default:return"Campo inválido"}}};function ZO(){return{localeError:LO()}}function FO(e,t,n,r){const i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?r:1===o?t:o>=2&&o<=4?n:r}const UO=()=>{const e={string:{unit:{one:"символ",few:"символа",many:"символов"},verb:"иметь"},file:{unit:{one:"байт",few:"байта",many:"байт"},verb:"иметь"},array:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"},set:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"}};function t(t){return e[t]??null}const n={regex:"ввод",email:"email адрес",url:"URL",emoji:"эмодзи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата и время",date:"ISO дата",time:"ISO время",duration:"ISO длительность",ipv4:"IPv4 адрес",ipv6:"IPv6 адрес",cidrv4:"IPv4 диапазон",cidrv6:"IPv6 диапазон",base64:"строка в формате base64",base64url:"строка в формате base64url",json_string:"JSON строка",e164:"номер E.164",jwt:"JWT",template_literal:"ввод"};return e=>{switch(e.code){case"invalid_type":return`Неверный ввод: ожидалось ${e.expected}, получено ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"число";case"object":if(Array.isArray(e))return"массив";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Неверный ввод: ожидалось ${am(e.values[0])}`:`Неверный вариант: ожидалось одно из ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);if(r){const t=FO(Number(e.maximum),r.unit.one,r.unit.few,r.unit.many);return`Слишком большое значение: ожидалось, что ${e.origin??"значение"} будет иметь ${n}${e.maximum.toString()} ${t}`}return`Слишком большое значение: ожидалось, что ${e.origin??"значение"} будет ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);if(r){const t=FO(Number(e.minimum),r.unit.one,r.unit.few,r.unit.many);return`Слишком маленькое значение: ожидалось, что ${e.origin} будет иметь ${n}${e.minimum.toString()} ${t}`}return`Слишком маленькое значение: ожидалось, что ${e.origin} будет ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Неверная строка: должна начинаться с "${t.prefix}"`:"ends_with"===t.format?`Неверная строка: должна заканчиваться на "${t.suffix}"`:"includes"===t.format?`Неверная строка: должна содержать "${t.includes}"`:"regex"===t.format?`Неверная строка: должна соответствовать шаблону ${t.pattern}`:`Неверный ${n[t.format]??e.format}`}case"not_multiple_of":return`Неверное число: должно быть кратным ${e.divisor}`;case"unrecognized_keys":return`Нераспознанн${e.keys.length>1?"ые":"ый"} ключ${e.keys.length>1?"и":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Неверный ключ в ${e.origin}`;case"invalid_union":default:return"Неверные входные данные";case"invalid_element":return`Неверное значение в ${e.origin}`}}};function VO(){return{localeError:UO()}}const GO=()=>{const e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(t){return e[t]??null}const n={regex:"vnos",email:"e-poštni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in čas",date:"ISO datum",time:"ISO čas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 številka",jwt:"JWT",template_literal:"vnos"};return e=>{switch(e.code){case"invalid_type":return`Neveljaven vnos: pričakovano ${e.expected}, prejeto ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"število";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neveljaven vnos: pričakovano ${am(e.values[0])}`:`Neveljavna možnost: pričakovano eno izmed ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Preveliko: pričakovano, da bo ${e.origin??"vrednost"} imelo ${n}${e.maximum.toString()} ${r.unit??"elementov"}`:`Preveliko: pričakovano, da bo ${e.origin??"vrednost"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Premajhno: pričakovano, da bo ${e.origin} imelo ${n}${e.minimum.toString()} ${r.unit}`:`Premajhno: pričakovano, da bo ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Neveljaven niz: mora se začeti z "${t.prefix}"`:"ends_with"===t.format?`Neveljaven niz: mora se končati z "${t.suffix}"`:"includes"===t.format?`Neveljaven niz: mora vsebovati "${t.includes}"`:"regex"===t.format?`Neveljaven niz: mora ustrezati vzorcu ${t.pattern}`:`Neveljaven ${n[t.format]??e.format}`}case"not_multiple_of":return`Neveljavno število: mora biti večkratnik ${e.divisor}`;case"unrecognized_keys":return`Neprepoznan${e.keys.length>1?"i ključi":" ključ"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Neveljaven ključ v ${e.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${e.origin}`}}};function BO(){return{localeError:GO()}}const XO=()=>{const e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehålla"},set:{unit:"objekt",verb:"att innehålla"}};function t(t){return e[t]??null}const n={regex:"reguljärt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad sträng",base64url:"base64url-kodad sträng",json_string:"JSON-sträng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return e=>{switch(e.code){case"invalid_type":return`Ogiltig inmatning: förväntat ${e.expected}, fick ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ogiltig inmatning: förväntat ${am(e.values[0])}`:`Ogiltigt val: förväntade en av ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`För stor(t): förväntade ${e.origin??"värdet"} att ha ${n}${e.maximum.toString()} ${r.unit??"element"}`:`För stor(t): förväntat ${e.origin??"värdet"} att ha ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`För lite(t): förväntade ${e.origin??"värdet"} att ha ${n}${e.minimum.toString()} ${r.unit}`:`För lite(t): förväntade ${e.origin??"värdet"} att ha ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ogiltig sträng: måste börja med "${t.prefix}"`:"ends_with"===t.format?`Ogiltig sträng: måste sluta med "${t.suffix}"`:"includes"===t.format?`Ogiltig sträng: måste innehålla "${t.includes}"`:"regex"===t.format?`Ogiltig sträng: måste matcha mönstret "${t.pattern}"`:`Ogiltig(t) ${n[t.format]??e.format}`}case"not_multiple_of":return`Ogiltigt tal: måste vara en multipel av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Okända nycklar":"Okänd nyckel"}: ${jp(e.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${e.origin??"värdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt värde i ${e.origin??"värdet"}`}}};function YO(){return{localeError:XO()}}const WO=()=>{const e={string:{unit:"எழுத்துக்கள்",verb:"கொண்டிருக்க வேண்டும்"},file:{unit:"பைட்டுகள்",verb:"கொண்டிருக்க வேண்டும்"},array:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"},set:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"}};function t(t){return e[t]??null}const n={regex:"உள்ளீடு",email:"மின்னஞ்சல் முகவரி",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO தேதி நேரம்",date:"ISO தேதி",time:"ISO நேரம்",duration:"ISO கால அளவு",ipv4:"IPv4 முகவரி",ipv6:"IPv6 முகவரி",cidrv4:"IPv4 வரம்பு",cidrv6:"IPv6 வரம்பு",base64:"base64-encoded சரம்",base64url:"base64url-encoded சரம்",json_string:"JSON சரம்",e164:"E.164 எண்",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${e.expected}, பெறப்பட்டது ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"எண் அல்லாதது":"எண்";case"object":if(Array.isArray(e))return"அணி";if(null===e)return"வெறுமை";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${am(e.values[0])}`:`தவறான விருப்பம்: எதிர்பார்க்கப்பட்டது ${jp(e.values,"|")} இல் ஒன்று`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${e.origin??"மதிப்பு"} ${n}${e.maximum.toString()} ${r.unit??"உறுப்புகள்"} ஆக இருக்க வேண்டும்`:`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${e.origin??"மதிப்பு"} ${n}${e.maximum.toString()} ஆக இருக்க வேண்டும்`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${e.origin} ${n}${e.minimum.toString()} ${r.unit} ஆக இருக்க வேண்டும்`:`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${e.origin} ${n}${e.minimum.toString()} ஆக இருக்க வேண்டும்`}case"invalid_format":{const t=e;return"starts_with"===t.format?`தவறான சரம்: "${t.prefix}" இல் தொடங்க வேண்டும்`:"ends_with"===t.format?`தவறான சரம்: "${t.suffix}" இல் முடிவடைய வேண்டும்`:"includes"===t.format?`தவறான சரம்: "${t.includes}" ஐ உள்ளடக்க வேண்டும்`:"regex"===t.format?`தவறான சரம்: ${t.pattern} முறைபாட்டுடன் பொருந்த வேண்டும்`:`தவறான ${n[t.format]??e.format}`}case"not_multiple_of":return`தவறான எண்: ${e.divisor} இன் பலமாக இருக்க வேண்டும்`;case"unrecognized_keys":return`அடையாளம் தெரியாத விசை${e.keys.length>1?"கள்":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`${e.origin} இல் தவறான விசை`;case"invalid_union":default:return"தவறான உள்ளீடு";case"invalid_element":return`${e.origin} இல் தவறான மதிப்பு`}}};function qO(){return{localeError:WO()}}const HO=()=>{const e={string:{unit:"ตัวอักษร",verb:"ควรมี"},file:{unit:"ไบต์",verb:"ควรมี"},array:{unit:"รายการ",verb:"ควรมี"},set:{unit:"รายการ",verb:"ควรมี"}};function t(t){return e[t]??null}const n={regex:"ข้อมูลที่ป้อน",email:"ที่อยู่อีเมล",url:"URL",emoji:"อิโมจิ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"วันที่เวลาแบบ ISO",date:"วันที่แบบ ISO",time:"เวลาแบบ ISO",duration:"ช่วงเวลาแบบ ISO",ipv4:"ที่อยู่ IPv4",ipv6:"ที่อยู่ IPv6",cidrv4:"ช่วง IP แบบ IPv4",cidrv6:"ช่วง IP แบบ IPv6",base64:"ข้อความแบบ Base64",base64url:"ข้อความแบบ Base64 สำหรับ URL",json_string:"ข้อความแบบ JSON",e164:"เบอร์โทรศัพท์ระหว่างประเทศ (E.164)",jwt:"โทเคน JWT",template_literal:"ข้อมูลที่ป้อน"};return e=>{switch(e.code){case"invalid_type":return`ประเภทข้อมูลไม่ถูกต้อง: ควรเป็น ${e.expected} แต่ได้รับ ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"ไม่ใช่ตัวเลข (NaN)":"ตัวเลข";case"object":if(Array.isArray(e))return"อาร์เรย์ (Array)";if(null===e)return"ไม่มีค่า (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`ค่าไม่ถูกต้อง: ควรเป็น ${am(e.values[0])}`:`ตัวเลือกไม่ถูกต้อง: ควรเป็นหนึ่งใน ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"ไม่เกิน":"น้อยกว่า",r=t(e.origin);return r?`เกินกำหนด: ${e.origin??"ค่า"} ควรมี${n} ${e.maximum.toString()} ${r.unit??"รายการ"}`:`เกินกำหนด: ${e.origin??"ค่า"} ควรมี${n} ${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?"อย่างน้อย":"มากกว่า",r=t(e.origin);return r?`น้อยกว่ากำหนด: ${e.origin} ควรมี${n} ${e.minimum.toString()} ${r.unit}`:`น้อยกว่ากำหนด: ${e.origin} ควรมี${n} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`รูปแบบไม่ถูกต้อง: ข้อความต้องขึ้นต้นด้วย "${t.prefix}"`:"ends_with"===t.format?`รูปแบบไม่ถูกต้อง: ข้อความต้องลงท้ายด้วย "${t.suffix}"`:"includes"===t.format?`รูปแบบไม่ถูกต้อง: ข้อความต้องมี "${t.includes}" อยู่ในข้อความ`:"regex"===t.format?`รูปแบบไม่ถูกต้อง: ต้องตรงกับรูปแบบที่กำหนด ${t.pattern}`:`รูปแบบไม่ถูกต้อง: ${n[t.format]??e.format}`}case"not_multiple_of":return`ตัวเลขไม่ถูกต้อง: ต้องเป็นจำนวนที่หารด้วย ${e.divisor} ได้ลงตัว`;case"unrecognized_keys":return`พบคีย์ที่ไม่รู้จัก: ${jp(e.keys,", ")}`;case"invalid_key":return`คีย์ไม่ถูกต้องใน ${e.origin}`;case"invalid_union":return"ข้อมูลไม่ถูกต้อง: ไม่ตรงกับรูปแบบยูเนียนที่กำหนดไว้";case"invalid_element":return`ข้อมูลไม่ถูกต้องใน ${e.origin}`;default:return"ข้อมูลไม่ถูกต้อง"}}};function KO(){return{localeError:HO()}}const JO=()=>{const e={string:{unit:"karakter",verb:"olmalı"},file:{unit:"bayt",verb:"olmalı"},array:{unit:"öğe",verb:"olmalı"},set:{unit:"öğe",verb:"olmalı"}};function t(t){return e[t]??null}const n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO süre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralığı",cidrv6:"IPv6 aralığı",base64:"base64 ile şifrelenmiş metin",base64url:"base64url ile şifrelenmiş metin",json_string:"JSON dizesi",e164:"E.164 sayısı",jwt:"JWT",template_literal:"Şablon dizesi"};return e=>{switch(e.code){case"invalid_type":return`Geçersiz değer: beklenen ${e.expected}, alınan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Geçersiz değer: beklenen ${am(e.values[0])}`:`Geçersiz seçenek: aşağıdakilerden biri olmalı: ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Çok büyük: beklenen ${e.origin??"değer"} ${n}${e.maximum.toString()} ${r.unit??"öğe"}`:`Çok büyük: beklenen ${e.origin??"değer"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Çok küçük: beklenen ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:`Çok küçük: beklenen ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Geçersiz metin: "${t.prefix}" ile başlamalı`:"ends_with"===t.format?`Geçersiz metin: "${t.suffix}" ile bitmeli`:"includes"===t.format?`Geçersiz metin: "${t.includes}" içermeli`:"regex"===t.format?`Geçersiz metin: ${t.pattern} desenine uymalı`:`Geçersiz ${n[t.format]??e.format}`}case"not_multiple_of":return`Geçersiz sayı: ${e.divisor} ile tam bölünebilmeli`;case"unrecognized_keys":return`Tanınmayan anahtar${e.keys.length>1?"lar":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`${e.origin} içinde geçersiz anahtar`;case"invalid_union":default:return"Geçersiz değer";case"invalid_element":return`${e.origin} içinde geçersiz değer`}}};function ew(){return{localeError:JO()}}const tw=()=>{const e={string:{unit:"символів",verb:"матиме"},file:{unit:"байтів",verb:"матиме"},array:{unit:"елементів",verb:"матиме"},set:{unit:"елементів",verb:"матиме"}};function t(t){return e[t]??null}const n={regex:"вхідні дані",email:"адреса електронної пошти",url:"URL",emoji:"емодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"дата та час ISO",date:"дата ISO",time:"час ISO",duration:"тривалість ISO",ipv4:"адреса IPv4",ipv6:"адреса IPv6",cidrv4:"діапазон IPv4",cidrv6:"діапазон IPv6",base64:"рядок у кодуванні base64",base64url:"рядок у кодуванні base64url",json_string:"рядок JSON",e164:"номер E.164",jwt:"JWT",template_literal:"вхідні дані"};return e=>{switch(e.code){case"invalid_type":return`Неправильні вхідні дані: очікується ${e.expected}, отримано ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"число";case"object":if(Array.isArray(e))return"масив";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Неправильні вхідні дані: очікується ${am(e.values[0])}`:`Неправильна опція: очікується одне з ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Занадто велике: очікується, що ${e.origin??"значення"} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??"елементів"}`:`Занадто велике: очікується, що ${e.origin??"значення"} буде ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Занадто мале: очікується, що ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Занадто мале: очікується, що ${e.origin} буде ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Неправильний рядок: повинен починатися з "${t.prefix}"`:"ends_with"===t.format?`Неправильний рядок: повинен закінчуватися на "${t.suffix}"`:"includes"===t.format?`Неправильний рядок: повинен містити "${t.includes}"`:"regex"===t.format?`Неправильний рядок: повинен відповідати шаблону ${t.pattern}`:`Неправильний ${n[t.format]??e.format}`}case"not_multiple_of":return`Неправильне число: повинно бути кратним ${e.divisor}`;case"unrecognized_keys":return`Нерозпізнаний ключ${e.keys.length>1?"і":""}: ${jp(e.keys,", ")}`;case"invalid_key":return`Неправильний ключ у ${e.origin}`;case"invalid_union":default:return"Неправильні вхідні дані";case"invalid_element":return`Неправильне значення у ${e.origin}`}}};function nw(){return{localeError:tw()}}function rw(){return nw()}const iw=()=>{const e={string:{unit:"حروف",verb:"ہونا"},file:{unit:"بائٹس",verb:"ہونا"},array:{unit:"آئٹمز",verb:"ہونا"},set:{unit:"آئٹمز",verb:"ہونا"}};function t(t){return e[t]??null}const n={regex:"ان پٹ",email:"ای میل ایڈریس",url:"یو آر ایل",emoji:"ایموجی",uuid:"یو یو آئی ڈی",uuidv4:"یو یو آئی ڈی وی 4",uuidv6:"یو یو آئی ڈی وی 6",nanoid:"نینو آئی ڈی",guid:"جی یو آئی ڈی",cuid:"سی یو آئی ڈی",cuid2:"سی یو آئی ڈی 2",ulid:"یو ایل آئی ڈی",xid:"ایکس آئی ڈی",ksuid:"کے ایس یو آئی ڈی",datetime:"آئی ایس او ڈیٹ ٹائم",date:"آئی ایس او تاریخ",time:"آئی ایس او وقت",duration:"آئی ایس او مدت",ipv4:"آئی پی وی 4 ایڈریس",ipv6:"آئی پی وی 6 ایڈریس",cidrv4:"آئی پی وی 4 رینج",cidrv6:"آئی پی وی 6 رینج",base64:"بیس 64 ان کوڈڈ سٹرنگ",base64url:"بیس 64 یو آر ایل ان کوڈڈ سٹرنگ",json_string:"جے ایس او این سٹرنگ",e164:"ای 164 نمبر",jwt:"جے ڈبلیو ٹی",template_literal:"ان پٹ"};return e=>{switch(e.code){case"invalid_type":return`غلط ان پٹ: ${e.expected} متوقع تھا، ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"نمبر";case"object":if(Array.isArray(e))return"آرے";if(null===e)return"نل";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} موصول ہوا`;case"invalid_value":return 1===e.values.length?`غلط ان پٹ: ${am(e.values[0])} متوقع تھا`:`غلط آپشن: ${jp(e.values,"|")} میں سے ایک متوقع تھا`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`بہت بڑا: ${e.origin??"ویلیو"} کے ${n}${e.maximum.toString()} ${r.unit??"عناصر"} ہونے متوقع تھے`:`بہت بڑا: ${e.origin??"ویلیو"} کا ${n}${e.maximum.toString()} ہونا متوقع تھا`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`بہت چھوٹا: ${e.origin} کے ${n}${e.minimum.toString()} ${r.unit} ہونے متوقع تھے`:`بہت چھوٹا: ${e.origin} کا ${n}${e.minimum.toString()} ہونا متوقع تھا`}case"invalid_format":{const t=e;return"starts_with"===t.format?`غلط سٹرنگ: "${t.prefix}" سے شروع ہونا چاہیے`:"ends_with"===t.format?`غلط سٹرنگ: "${t.suffix}" پر ختم ہونا چاہیے`:"includes"===t.format?`غلط سٹرنگ: "${t.includes}" شامل ہونا چاہیے`:"regex"===t.format?`غلط سٹرنگ: پیٹرن ${t.pattern} سے میچ ہونا چاہیے`:`غلط ${n[t.format]??e.format}`}case"not_multiple_of":return`غلط نمبر: ${e.divisor} کا مضاعف ہونا چاہیے`;case"unrecognized_keys":return`غیر تسلیم شدہ کی${e.keys.length>1?"ز":""}: ${jp(e.keys,"، ")}`;case"invalid_key":return`${e.origin} میں غلط کی`;case"invalid_union":default:return"غلط ان پٹ";case"invalid_element":return`${e.origin} میں غلط ویلیو`}}};function ow(){return{localeError:iw()}}const aw=()=>{const e={string:{unit:"ký tự",verb:"có"},file:{unit:"byte",verb:"có"},array:{unit:"phần tử",verb:"có"},set:{unit:"phần tử",verb:"có"}};function t(t){return e[t]??null}const n={regex:"đầu vào",email:"địa chỉ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngày giờ ISO",date:"ngày ISO",time:"giờ ISO",duration:"khoảng thời gian ISO",ipv4:"địa chỉ IPv4",ipv6:"địa chỉ IPv6",cidrv4:"dải IPv4",cidrv6:"dải IPv6",base64:"chuỗi mã hóa base64",base64url:"chuỗi mã hóa base64url",json_string:"chuỗi JSON",e164:"số E.164",jwt:"JWT",template_literal:"đầu vào"};return e=>{switch(e.code){case"invalid_type":return`Đầu vào không hợp lệ: mong đợi ${e.expected}, nhận được ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"số";case"object":if(Array.isArray(e))return"mảng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Đầu vào không hợp lệ: mong đợi ${am(e.values[0])}`:`Tùy chọn không hợp lệ: mong đợi một trong các giá trị ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Quá lớn: mong đợi ${e.origin??"giá trị"} ${r.verb} ${n}${e.maximum.toString()} ${r.unit??"phần tử"}`:`Quá lớn: mong đợi ${e.origin??"giá trị"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Quá nhỏ: mong đợi ${e.origin} ${r.verb} ${n}${e.minimum.toString()} ${r.unit}`:`Quá nhỏ: mong đợi ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chuỗi không hợp lệ: phải bắt đầu bằng "${t.prefix}"`:"ends_with"===t.format?`Chuỗi không hợp lệ: phải kết thúc bằng "${t.suffix}"`:"includes"===t.format?`Chuỗi không hợp lệ: phải bao gồm "${t.includes}"`:"regex"===t.format?`Chuỗi không hợp lệ: phải khớp với mẫu ${t.pattern}`:`${n[t.format]??e.format} không hợp lệ`}case"not_multiple_of":return`Số không hợp lệ: phải là bội số của ${e.divisor}`;case"unrecognized_keys":return`Khóa không được nhận dạng: ${jp(e.keys,", ")}`;case"invalid_key":return`Khóa không hợp lệ trong ${e.origin}`;case"invalid_union":default:return"Đầu vào không hợp lệ";case"invalid_element":return`Giá trị không hợp lệ trong ${e.origin}`}}};function sw(){return{localeError:aw()}}const lw=()=>{const e={string:{unit:"字符",verb:"包含"},file:{unit:"字节",verb:"包含"},array:{unit:"项",verb:"包含"},set:{unit:"项",verb:"包含"}};function t(t){return e[t]??null}const n={regex:"输入",email:"电子邮件",url:"URL",emoji:"表情符号",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日期时间",date:"ISO日期",time:"ISO时间",duration:"ISO时长",ipv4:"IPv4地址",ipv6:"IPv6地址",cidrv4:"IPv4网段",cidrv6:"IPv6网段",base64:"base64编码字符串",base64url:"base64url编码字符串",json_string:"JSON字符串",e164:"E.164号码",jwt:"JWT",template_literal:"输入"};return e=>{switch(e.code){case"invalid_type":return`无效输入：期望 ${e.expected}，实际接收 ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"非数字(NaN)":"数字";case"object":if(Array.isArray(e))return"数组";if(null===e)return"空值(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`无效输入：期望 ${am(e.values[0])}`:`无效选项：期望以下之一 ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`数值过大：期望 ${e.origin??"值"} ${n}${e.maximum.toString()} ${r.unit??"个元素"}`:`数值过大：期望 ${e.origin??"值"} ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`数值过小：期望 ${e.origin} ${n}${e.minimum.toString()} ${r.unit}`:`数值过小：期望 ${e.origin} ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`无效字符串：必须以 "${t.prefix}" 开头`:"ends_with"===t.format?`无效字符串：必须以 "${t.suffix}" 结尾`:"includes"===t.format?`无效字符串：必须包含 "${t.includes}"`:"regex"===t.format?`无效字符串：必须满足正则表达式 ${t.pattern}`:`无效${n[t.format]??e.format}`}case"not_multiple_of":return`无效数字：必须是 ${e.divisor} 的倍数`;case"unrecognized_keys":return`出现未知的键(key): ${jp(e.keys,", ")}`;case"invalid_key":return`${e.origin} 中的键(key)无效`;case"invalid_union":default:return"无效输入";case"invalid_element":return`${e.origin} 中包含无效值(value)`}}};function uw(){return{localeError:lw()}}const cw=()=>{const e={string:{unit:"字元",verb:"擁有"},file:{unit:"位元組",verb:"擁有"},array:{unit:"項目",verb:"擁有"},set:{unit:"項目",verb:"擁有"}};function t(t){return e[t]??null}const n={regex:"輸入",email:"郵件地址",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 日期時間",date:"ISO 日期",time:"ISO 時間",duration:"ISO 期間",ipv4:"IPv4 位址",ipv6:"IPv6 位址",cidrv4:"IPv4 範圍",cidrv6:"IPv6 範圍",base64:"base64 編碼字串",base64url:"base64url 編碼字串",json_string:"JSON 字串",e164:"E.164 數值",jwt:"JWT",template_literal:"輸入"};return e=>{switch(e.code){case"invalid_type":return`無效的輸入值：預期為 ${e.expected}，但收到 ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`無效的輸入值：預期為 ${am(e.values[0])}`:`無效的選項：預期為以下其中之一 ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`數值過大：預期 ${e.origin??"值"} 應為 ${n}${e.maximum.toString()} ${r.unit??"個元素"}`:`數值過大：預期 ${e.origin??"值"} 應為 ${n}${e.maximum.toString()}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`數值過小：預期 ${e.origin} 應為 ${n}${e.minimum.toString()} ${r.unit}`:`數值過小：預期 ${e.origin} 應為 ${n}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`無效的字串：必須以 "${t.prefix}" 開頭`:"ends_with"===t.format?`無效的字串：必須以 "${t.suffix}" 結尾`:"includes"===t.format?`無效的字串：必須包含 "${t.includes}"`:"regex"===t.format?`無效的字串：必須符合格式 ${t.pattern}`:`無效的 ${n[t.format]??e.format}`}case"not_multiple_of":return`無效的數字：必須為 ${e.divisor} 的倍數`;case"unrecognized_keys":return`無法識別的鍵值${e.keys.length>1?"們":""}：${jp(e.keys,"、")}`;case"invalid_key":return`${e.origin} 中有無效的鍵值`;case"invalid_union":default:return"無效的輸入值";case"invalid_element":return`${e.origin} 中有無效的值`}}};function dw(){return{localeError:cw()}}const fw=()=>{const e={string:{unit:"àmi",verb:"ní"},file:{unit:"bytes",verb:"ní"},array:{unit:"nkan",verb:"ní"},set:{unit:"nkan",verb:"ní"}};function t(t){return e[t]??null}const n={regex:"ẹ̀rọ ìbáwọlé",email:"àdírẹ́sì ìmẹ́lì",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"àkókò ISO",date:"ọjọ́ ISO",time:"àkókò ISO",duration:"àkókò tó pé ISO",ipv4:"àdírẹ́sì IPv4",ipv6:"àdírẹ́sì IPv6",cidrv4:"àgbègbè IPv4",cidrv6:"àgbègbè IPv6",base64:"ọ̀rọ̀ tí a kọ́ ní base64",base64url:"ọ̀rọ̀ base64url",json_string:"ọ̀rọ̀ JSON",e164:"nọ́mbà E.164",jwt:"JWT",template_literal:"ẹ̀rọ ìbáwọlé"};return e=>{switch(e.code){case"invalid_type":return`Ìbáwọlé aṣìṣe: a ní láti fi ${e.expected}, àmọ̀ a rí ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nọ́mbà";case"object":if(Array.isArray(e))return"akopọ";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ìbáwọlé aṣìṣe: a ní láti fi ${am(e.values[0])}`:`Àṣàyàn aṣìṣe: yan ọ̀kan lára ${jp(e.values,"|")}`;case"too_big":{const n=e.inclusive?"<=":"<",r=t(e.origin);return r?`Tó pọ̀ jù: a ní láti jẹ́ pé ${e.origin??"iye"} ${r.verb} ${n}${e.maximum} ${r.unit}`:`Tó pọ̀ jù: a ní láti jẹ́ ${n}${e.maximum}`}case"too_small":{const n=e.inclusive?">=":">",r=t(e.origin);return r?`Kéré ju: a ní láti jẹ́ pé ${e.origin} ${r.verb} ${n}${e.minimum} ${r.unit}`:`Kéré ju: a ní láti jẹ́ ${n}${e.minimum}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ bẹ̀rẹ̀ pẹ̀lú "${t.prefix}"`:"ends_with"===t.format?`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ parí pẹ̀lú "${t.suffix}"`:"includes"===t.format?`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ ní "${t.includes}"`:"regex"===t.format?`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ bá àpẹẹrẹ mu ${t.pattern}`:`Aṣìṣe: ${n[t.format]??e.format}`}case"not_multiple_of":return`Nọ́mbà aṣìṣe: gbọ́dọ̀ jẹ́ èyà pípín ti ${e.divisor}`;case"unrecognized_keys":return`Bọtìnì àìmọ̀: ${jp(e.keys,", ")}`;case"invalid_key":return`Bọtìnì aṣìṣe nínú ${e.origin}`;case"invalid_union":default:return"Ìbáwọlé aṣìṣe";case"invalid_element":return`Iye aṣìṣe nínú ${e.origin}`}}};function hw(){return{localeError:fw()}}const pw=Symbol("ZodOutput"),mw=Symbol("ZodInput");class gw{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};delete n.id;const r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function vw(){return new gw}const yw=vw();function bw(e,t){return new e({type:"string",...im(t)})}function Ow(e,t){return new e({type:"string",coerce:!0,...im(t)})}function ww(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...im(t)})}function xw(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...im(t)})}function Sw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...im(t)})}function kw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...im(t)})}function _w(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...im(t)})}function Pw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...im(t)})}function Ew(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...im(t)})}function $w(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...im(t)})}function Tw(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...im(t)})}function Cw(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...im(t)})}function jw(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...im(t)})}function Nw(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...im(t)})}function Aw(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...im(t)})}function Iw(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...im(t)})}function Mw(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...im(t)})}function Dw(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...im(t)})}function Rw(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...im(t)})}function Qw(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...im(t)})}function zw(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...im(t)})}function Lw(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...im(t)})}function Zw(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...im(t)})}function Fw(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...im(t)})}const Uw={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Vw(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...im(t)})}function Gw(e,t){return new e({type:"string",format:"date",check:"string_format",...im(t)})}function Bw(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...im(t)})}function Xw(e,t){return new e({type:"string",format:"duration",check:"string_format",...im(t)})}function Yw(e,t){return new e({type:"number",checks:[],...im(t)})}function Ww(e,t){return new e({type:"number",coerce:!0,checks:[],...im(t)})}function qw(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...im(t)})}function Hw(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...im(t)})}function Kw(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...im(t)})}function Jw(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...im(t)})}function ex(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...im(t)})}function tx(e,t){return new e({type:"boolean",...im(t)})}function nx(e,t){return new e({type:"boolean",coerce:!0,...im(t)})}function rx(e,t){return new e({type:"bigint",...im(t)})}function ix(e,t){return new e({type:"bigint",coerce:!0,...im(t)})}function ox(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...im(t)})}function ax(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...im(t)})}function sx(e,t){return new e({type:"symbol",...im(t)})}function lx(e,t){return new e({type:"undefined",...im(t)})}function ux(e,t){return new e({type:"null",...im(t)})}function cx(e){return new e({type:"any"})}function dx(e){return new e({type:"unknown"})}function fx(e,t){return new e({type:"never",...im(t)})}function hx(e,t){return new e({type:"void",...im(t)})}function px(e,t){return new e({type:"date",...im(t)})}function mx(e,t){return new e({type:"date",coerce:!0,...im(t)})}function gx(e,t){return new e({type:"nan",...im(t)})}function vx(e,t){return new Ov({check:"less_than",...im(t),value:e,inclusive:!1})}function yx(e,t){return new Ov({check:"less_than",...im(t),value:e,inclusive:!0})}function bx(e,t){return new wv({check:"greater_than",...im(t),value:e,inclusive:!1})}function Ox(e,t){return new wv({check:"greater_than",...im(t),value:e,inclusive:!0})}function wx(e){return bx(0,e)}function xx(e){return vx(0,e)}function Sx(e){return yx(0,e)}function kx(e){return Ox(0,e)}function _x(e,t){return new xv({check:"multiple_of",...im(t),value:e})}function Px(e,t){return new _v({check:"max_size",...im(t),maximum:e})}function Ex(e,t){return new Pv({check:"min_size",...im(t),minimum:e})}function $x(e,t){return new Ev({check:"size_equals",...im(t),size:e})}function Tx(e,t){return new $v({check:"max_length",...im(t),maximum:e})}function Cx(e,t){return new Tv({check:"min_length",...im(t),minimum:e})}function jx(e,t){return new Cv({check:"length_equals",...im(t),length:e})}function Nx(e,t){return new Nv({check:"string_format",format:"regex",...im(t),pattern:e})}function Ax(e){return new Av({check:"string_format",format:"lowercase",...im(e)})}function Ix(e){return new Iv({check:"string_format",format:"uppercase",...im(e)})}function Mx(e,t){return new Mv({check:"string_format",format:"includes",...im(t),includes:e})}function Dx(e,t){return new Dv({check:"string_format",format:"starts_with",...im(t),prefix:e})}function Rx(e,t){return new Rv({check:"string_format",format:"ends_with",...im(t),suffix:e})}function Qx(e,t,n){return new zv({check:"property",property:e,schema:t,...im(n)})}function zx(e,t){return new Lv({check:"mime_type",mime:e,...im(t)})}function Lx(e){return new Zv({check:"overwrite",tx:e})}function Zx(e){return Lx(t=>t.normalize(e))}function Fx(){return Lx(e=>e.trim())}function Ux(){return Lx(e=>e.toLowerCase())}function Vx(){return Lx(e=>e.toUpperCase())}function Gx(e,t,n){return new e({type:"array",element:t,...im(n)})}function Bx(e,t,n){return new e({type:"union",options:t,...im(n)})}function Xx(e,t,n,r){return new e({type:"union",options:n,discriminator:t,...im(r)})}function Yx(e,t,n){return new e({type:"intersection",left:t,right:n})}function Wx(e,t,n,r){const i=n instanceof Vv;return new e({type:"tuple",items:t,rest:i?n:null,...im(i?r:n)})}function qx(e,t,n,r){return new e({type:"record",keyType:t,valueType:n,...im(r)})}function Hx(e,t,n,r){return new e({type:"map",keyType:t,valueType:n,...im(r)})}function Kx(e,t,n){return new e({type:"set",valueType:t,...im(n)})}function Jx(e,t,n){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...im(n)})}function eS(e,t,n){return new e({type:"enum",entries:t,...im(n)})}function tS(e,t,n){return new e({type:"literal",values:Array.isArray(t)?t:[t],...im(n)})}function nS(e,t){return new e({type:"file",...im(t)})}function rS(e,t){return new e({type:"transform",transform:t})}function iS(e,t){return new e({type:"optional",innerType:t})}function oS(e,t){return new e({type:"nullable",innerType:t})}function aS(e,t,n){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof n?n():Hp(n)}})}function sS(e,t,n){return new e({type:"nonoptional",innerType:t,...im(n)})}function lS(e,t){return new e({type:"success",innerType:t})}function uS(e,t,n){return new e({type:"catch",innerType:t,catchValue:"function"==typeof n?n:()=>n})}function cS(e,t,n){return new e({type:"pipe",in:t,out:n})}function dS(e,t){return new e({type:"readonly",innerType:t})}function fS(e,t,n){return new e({type:"template_literal",parts:t,...im(n)})}function hS(e,t){return new e({type:"lazy",getter:t})}function pS(e,t){return new e({type:"promise",innerType:t})}function mS(e,t,n){const r=im(n);r.abort??(r.abort=!0);return new e({type:"custom",check:"custom",fn:t,...r})}function gS(e,t,n){return new e({type:"custom",check:"custom",fn:t,...im(n)})}function vS(e){const t=yS(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(Sm(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Sm(r))}},e(n.value,n)));return t}function yS(e,t){const n=new yv({check:"custom",...im(t)});return n._zod.check=e,n}function bS(e,t){const n=im(t);let r=n.truthy??["true","1","yes","on","y","enabled"],i=n.falsy??["false","0","no","off","n","disabled"];"sensitive"!==n.case&&(r=r.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));const o=new Set(r),a=new Set(i),s=e.Codec??gb,l=e.Boolean??xy,u=new s({type:"pipe",in:new(e.String??Gv)({type:"string",error:n.error}),out:new l({type:"boolean",error:n.error}),transform:(e,t)=>{let r=e;return"sensitive"!==n.case&&(r=r.toLowerCase()),!!o.has(r)||!a.has(r)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...a],input:t.value,inst:u,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?r[0]||"true":i[0]||"false",error:n.error});return u}function OS(e,t,n,r={}){const i=im(r),o={...im(r),check:"string_format",type:"string",format:t,fn:"function"==typeof n?n:e=>n.test(e),...i};n instanceof RegExp&&(o.pattern=n);return new e(o)}class wS{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??yw,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var n;const r=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(e);if(o){o.count++;return t.schemaPath.includes(e)&&(o.cycle=t.path),o.schema}const a={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,a);const s=e._zod.toJSONSchema?.();if(s)a.schema=s;else{const n={...t,schemaPath:[...t.schemaPath,e],path:t.path},o=e._zod.parent;if(o)a.ref=o,this.process(o,n),this.seen.get(o).isParent=!0;else{const t=a.schema;switch(r.type){case"string":{const n=t;n.type="string";const{minimum:r,maximum:o,format:s,patterns:l,contentEncoding:u}=e._zod.bag;if("number"==typeof r&&(n.minLength=r),"number"==typeof o&&(n.maxLength=o),s&&(n.format=i[s]??s,""===n.format&&delete n.format),u&&(n.contentEncoding=u),l&&l.size>0){const e=[...l];1===e.length?n.pattern=e[0].source:e.length>1&&(a.schema.allOf=[...e.map(e=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{const n=t,{minimum:r,maximum:i,format:o,multipleOf:a,exclusiveMaximum:s,exclusiveMinimum:l}=e._zod.bag;"string"==typeof o&&o.includes("int")?n.type="integer":n.type="number","number"==typeof l&&("draft-4"===this.target||"openapi-3.0"===this.target?(n.minimum=l,n.exclusiveMinimum=!0):n.exclusiveMinimum=l),"number"==typeof r&&(n.minimum=r,"number"==typeof l&&"draft-4"!==this.target&&(l>=r?delete n.minimum:delete n.exclusiveMinimum)),"number"==typeof s&&("draft-4"===this.target||"openapi-3.0"===this.target?(n.maximum=s,n.exclusiveMaximum=!0):n.exclusiveMaximum=s),"number"==typeof i&&(n.maximum=i,"number"==typeof s&&"draft-4"!==this.target&&(s<=i?delete n.maximum:delete n.exclusiveMaximum)),"number"==typeof a&&(n.multipleOf=a);break}case"boolean":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw new Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw new Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw new Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw new Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw new Error("Date cannot be represented in JSON Schema");break;case"array":{const i=t,{minimum:o,maximum:a}=e._zod.bag;"number"==typeof o&&(i.minItems=o),"number"==typeof a&&(i.maxItems=a),i.type="array",i.items=this.process(r.element,{...n,path:[...n.path,"items"]});break}case"object":{const e=t;e.type="object",e.properties={};const i=r.shape;for(const t in i)e.properties[t]=this.process(i[t],{...n,path:[...n.path,"properties",t]});const o=new Set(Object.keys(i)),a=new Set([...o].filter(e=>{const t=r.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));a.size>0&&(e.required=Array.from(a)),"never"===r.catchall?._zod.def.type?e.additionalProperties=!1:r.catchall?r.catchall&&(e.additionalProperties=this.process(r.catchall,{...n,path:[...n.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":{const e=t,i=r.options.map((e,t)=>this.process(e,{...n,path:[...n.path,"anyOf",t]}));e.anyOf=i;break}case"intersection":{const e=t,i=this.process(r.left,{...n,path:[...n.path,"allOf",0]}),o=this.process(r.right,{...n,path:[...n.path,"allOf",1]}),a=e=>"allOf"in e&&1===Object.keys(e).length,s=[...a(i)?i.allOf:[i],...a(o)?o.allOf:[o]];e.allOf=s;break}case"tuple":{const i=t;i.type="array";const o="draft-2020-12"===this.target?"prefixItems":"items",a="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",s=r.items.map((e,t)=>this.process(e,{...n,path:[...n.path,o,t]})),l=r.rest?this.process(r.rest,{...n,path:[...n.path,a,..."openapi-3.0"===this.target?[r.items.length]:[]]}):null;"draft-2020-12"===this.target?(i.prefixItems=s,l&&(i.items=l)):"openapi-3.0"===this.target?(i.items={anyOf:s},l&&i.items.anyOf.push(l),i.minItems=s.length,l||(i.maxItems=s.length)):(i.items=s,l&&(i.additionalItems=l));const{minimum:u,maximum:c}=e._zod.bag;"number"==typeof u&&(i.minItems=u),"number"==typeof c&&(i.maxItems=c);break}case"record":{const e=t;e.type="object","draft-7"!==this.target&&"draft-2020-12"!==this.target||(e.propertyNames=this.process(r.keyType,{...n,path:[...n.path,"propertyNames"]})),e.additionalProperties=this.process(r.valueType,{...n,path:[...n.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw new Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw new Error("Set cannot be represented in JSON Schema");break;case"enum":{const e=t,n=Cp(r.entries);n.every(e=>"number"==typeof e)&&(e.type="number"),n.every(e=>"string"==typeof e)&&(e.type="string"),e.enum=n;break}case"literal":{const e=t,n=[];for(const e of r.values)if(void 0===e){if("throw"===this.unrepresentable)throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e){if("throw"===this.unrepresentable)throw new Error("BigInt literals cannot be represented in JSON Schema");n.push(Number(e))}else n.push(e);if(0===n.length);else if(1===n.length){const t=n[0];e.type=null===t?"null":typeof t,"draft-4"===this.target||"openapi-3.0"===this.target?e.enum=[t]:e.const=t}else n.every(e=>"number"==typeof e)&&(e.type="number"),n.every(e=>"string"==typeof e)&&(e.type="string"),n.every(e=>"boolean"==typeof e)&&(e.type="string"),n.every(e=>null===e)&&(e.type="null"),e.enum=n;break}case"file":{const n=t,r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:i,maximum:o,mime:a}=e._zod.bag;void 0!==i&&(r.minLength=i),void 0!==o&&(r.maxLength=o),a?1===a.length?(r.contentMediaType=a[0],Object.assign(n,r)):n.anyOf=a.map(e=>({...r,contentMediaType:e})):Object.assign(n,r);break}case"transform":if("throw"===this.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{const e=this.process(r.innerType,n);"openapi-3.0"===this.target?(a.ref=r.innerType,t.nullable=!0):t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(r.innerType,n),a.ref=r.innerType;break;case"success":t.type="boolean";break;case"default":this.process(r.innerType,n),a.ref=r.innerType,t.default=JSON.parse(JSON.stringify(r.defaultValue));break;case"prefault":this.process(r.innerType,n),a.ref=r.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(r.defaultValue)));break;case"catch":{let e;this.process(r.innerType,n),a.ref=r.innerType;try{e=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw new Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{const n=t,r=e._zod.pattern;if(!r)throw new Error("Pattern not found in template literal");n.type="string",n.pattern=r.source;break}case"pipe":{const e="input"===this.io?"transform"===r.in._zod.def.type?r.out:r.in:r.out;this.process(e,n),a.ref=e;break}case"readonly":this.process(r.innerType,n),a.ref=r.innerType,t.readOnly=!0;break;case"lazy":{const t=e._zod.innerType;this.process(t,n),a.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw new Error("Function types cannot be represented in JSON Schema")}}}const l=this.metadataRegistry.get(e);l&&Object.assign(a.schema,l),"input"===this.io&&SS(e)&&(delete a.schema.examples,delete a.schema.default),"input"===this.io&&a.schema._prefault&&((n=a.schema).default??(n.default=a.schema._prefault)),delete a.schema._prefault;return this.seen.get(e).schema}emit(e,t){const n={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},r=this.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=e=>{const t="draft-2020-12"===this.target?"$defs":"definitions";if(n.external){const r=n.external.registry.get(e[0])?.id,i=n.external.uri??(e=>e);if(r)return{ref:i(r)};const o=e[1].defId??e[1].schema.id??"schema"+this.counter++;return e[1].defId=o,{defId:o,ref:`${i("__shared")}#/${t}/${o}`}}if(e[1]===r)return{ref:"#"};const i=`#/${t}/`,o=e[1].schema.id??"__schema"+this.counter++;return{defId:o,ref:i+o}},o=e=>{if(e[1].schema.$ref)return;const t=e[1],{ref:n,defId:r}=i(e);t.def={...t.schema},r&&(t.defId=r);const o=t.schema;for(const e in o)delete o[e];o.$ref=n};if("throw"===n.cycles)for(const e of this.seen.entries()){const t=e[1];if(t.cycle)throw new Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const t of this.seen.entries()){const r=t[1];if(e===t[0]){o(t);continue}if(n.external){const r=n.external.registry.get(t[0])?.id;if(e!==t[0]&&r){o(t);continue}}const i=this.metadataRegistry.get(t[0])?.id;i?o(t):(r.cycle||r.count>1&&"ref"===n.reused)&&o(t)}const a=(e,t)=>{const n=this.seen.get(e),r=n.def??n.schema,i={...r};if(null===n.ref)return;const o=n.ref;if(n.ref=null,o){a(o,t);const e=this.seen.get(o).schema;!e.$ref||"draft-7"!==t.target&&"draft-4"!==t.target&&"openapi-3.0"!==t.target?(Object.assign(r,e),Object.assign(r,i)):(r.allOf=r.allOf??[],r.allOf.push(e))}n.isParent||this.override({zodSchema:e,jsonSchema:r,path:n.path??[]})};for(const e of[...this.seen.entries()].reverse())a(e[0],{target:this.target});const s={};if("draft-2020-12"===this.target?s.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?s.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?s.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),n.external?.uri){const t=n.external.registry.get(e)?.id;if(!t)throw new Error("Schema is missing an `id` property");s.$id=n.external.uri(t)}Object.assign(s,r.def);const l=n.external?.defs??{};for(const e of this.seen.entries()){const t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}n.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?s.$defs=l:s.definitions=l);try{return JSON.parse(JSON.stringify(s))}catch(e){throw new Error("Error converting schema to JSON.")}}}function xS(e,t){if(e instanceof gw){const n=new wS(t),r={};for(const t of e._idmap.entries()){const[e,r]=t;n.process(r)}const i={},o={registry:e,uri:t?.uri,defs:r};for(const r of e._idmap.entries()){const[e,a]=r;i[e]=n.emit(a,{...t,external:o})}if(Object.keys(r).length>0){const e="draft-2020-12"===n.target?"$defs":"definitions";i.__shared={[e]:r}}return{schemas:i}}const n=new wS(t);return n.process(e),n.emit(e,t)}function SS(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;switch(r.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return SS(r.element,n);case"object":for(const e in r.shape)if(SS(r.shape[e],n))return!0;return!1;case"union":for(const e of r.options)if(SS(e,n))return!0;return!1;case"intersection":return SS(r.left,n)||SS(r.right,n);case"tuple":for(const e of r.items)if(SS(e,n))return!0;return!(!r.rest||!SS(r.rest,n));case"record":case"map":return SS(r.keyType,n)||SS(r.valueType,n);case"set":return SS(r.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return SS(r.innerType,n);case"lazy":return SS(r.getter(),n);case"transform":return!0;case"pipe":return SS(r.in,n)||SS(r.out,n)}throw new Error(`Unknown schema type: ${r.type}`)}const kS=bp("ZodISODateTime",(e,t)=>{iy.init(e,t),HS.init(e,t)});function _S(e){return Vw(kS,e)}const PS=bp("ZodISODate",(e,t)=>{oy.init(e,t),HS.init(e,t)});function ES(e){return Gw(PS,e)}const $S=bp("ZodISOTime",(e,t)=>{ay.init(e,t),HS.init(e,t)});function TS(e){return Bw($S,e)}const CS=bp("ZodISODuration",(e,t)=>{sy.init(e,t),HS.init(e,t)});function jS(e){return Xw(CS,e)}const NS=(e,t)=>{Am.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>Dm(e,t)},flatten:{value:t=>Mm(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,Np,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,Np,2)}},isEmpty:{get:()=>0===e.issues.length}})},AS=bp("ZodError",NS),IS=bp("ZodError",NS,{Parent:Error}),MS=Lm(IS),DS=Fm(IS),RS=Vm(IS),QS=Bm(IS),zS=Ym(IS),LS=qm(IS),ZS=Km(IS),FS=eg(IS),US=ng(IS),VS=ig(IS),GS=ag(IS),BS=lg(IS),XS=bp("ZodType",(e,t)=>(Vv.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(Zp(t,{checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,n)=>rm(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>MS(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>RS(e,t,n),e.parseAsync=async(t,n)=>DS(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>QS(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>zS(e,t,n),e.decode=(t,n)=>LS(e,t,n),e.encodeAsync=async(t,n)=>ZS(e,t,n),e.decodeAsync=async(t,n)=>FS(e,t,n),e.safeEncode=(t,n)=>US(e,t,n),e.safeDecode=(t,n)=>VS(e,t,n),e.safeEncodeAsync=async(t,n)=>GS(e,t,n),e.safeDecodeAsync=async(t,n)=>BS(e,t,n),e.refine=(t,n)=>e.check(AP(t,n)),e.superRefine=t=>e.check(IP(t)),e.overwrite=t=>e.check(Lx(t)),e.optional=()=>eP(e),e.nullable=()=>nP(e),e.nullish=()=>eP(nP(e)),e.nonoptional=t=>uP(e,t),e.array=()=>S_(e),e.or=t=>C_([e,t]),e.and=t=>I_(e,t),e.transform=t=>vP(e,K_(t)),e.default=t=>oP(e,t),e.prefault=t=>sP(e,t),e.catch=t=>hP(e,t),e.pipe=t=>vP(e,t),e.readonly=()=>wP(e),e.describe=t=>{const n=e.clone();return yw.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>yw.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return yw.get(e);const n=e.clone();return yw.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),YS=bp("_ZodString",(e,t)=>{Gv.init(e,t),XS.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(Nx(...t)),e.includes=(...t)=>e.check(Mx(...t)),e.startsWith=(...t)=>e.check(Dx(...t)),e.endsWith=(...t)=>e.check(Rx(...t)),e.min=(...t)=>e.check(Cx(...t)),e.max=(...t)=>e.check(Tx(...t)),e.length=(...t)=>e.check(jx(...t)),e.nonempty=(...t)=>e.check(Cx(1,...t)),e.lowercase=t=>e.check(Ax(t)),e.uppercase=t=>e.check(Ix(t)),e.trim=()=>e.check(Fx()),e.normalize=(...t)=>e.check(Zx(...t)),e.toLowerCase=()=>e.check(Ux()),e.toUpperCase=()=>e.check(Vx())}),WS=bp("ZodString",(e,t)=>{Gv.init(e,t),YS.init(e,t),e.email=t=>e.check(ww(KS,t)),e.url=t=>e.check(Ew(sk,t)),e.jwt=t=>e.check(Fw(Qk,t)),e.emoji=t=>e.check($w(ck,t)),e.guid=t=>e.check(xw(ek,t)),e.uuid=t=>e.check(Sw(nk,t)),e.uuidv4=t=>e.check(kw(nk,t)),e.uuidv6=t=>e.check(_w(nk,t)),e.uuidv7=t=>e.check(Pw(nk,t)),e.nanoid=t=>e.check(Tw(fk,t)),e.guid=t=>e.check(xw(ek,t)),e.cuid=t=>e.check(Cw(pk,t)),e.cuid2=t=>e.check(jw(gk,t)),e.ulid=t=>e.check(Nw(yk,t)),e.base64=t=>e.check(zw(Nk,t)),e.base64url=t=>e.check(Lw(Ik,t)),e.xid=t=>e.check(Aw(Ok,t)),e.ksuid=t=>e.check(Iw(xk,t)),e.ipv4=t=>e.check(Mw(kk,t)),e.ipv6=t=>e.check(Dw(Pk,t)),e.cidrv4=t=>e.check(Rw($k,t)),e.cidrv6=t=>e.check(Qw(Ck,t)),e.e164=t=>e.check(Zw(Dk,t)),e.datetime=t=>e.check(_S(t)),e.date=t=>e.check(ES(t)),e.time=t=>e.check(TS(t)),e.duration=t=>e.check(jS(t))});function qS(e){return bw(WS,e)}const HS=bp("ZodStringFormat",(e,t)=>{Bv.init(e,t),YS.init(e,t)}),KS=bp("ZodEmail",(e,t)=>{Wv.init(e,t),HS.init(e,t)});function JS(e){return ww(KS,e)}const ek=bp("ZodGUID",(e,t)=>{Xv.init(e,t),HS.init(e,t)});function tk(e){return xw(ek,e)}const nk=bp("ZodUUID",(e,t)=>{Yv.init(e,t),HS.init(e,t)});function rk(e){return Sw(nk,e)}function ik(e){return kw(nk,e)}function ok(e){return _w(nk,e)}function ak(e){return Pw(nk,e)}const sk=bp("ZodURL",(e,t)=>{qv.init(e,t),HS.init(e,t)});function lk(e){return Ew(sk,e)}function uk(e){return Ew(sk,{protocol:/^https?$/,hostname:Qg,...im(e)})}const ck=bp("ZodEmoji",(e,t)=>{Hv.init(e,t),HS.init(e,t)});function dk(e){return $w(ck,e)}const fk=bp("ZodNanoID",(e,t)=>{Kv.init(e,t),HS.init(e,t)});function hk(e){return Tw(fk,e)}const pk=bp("ZodCUID",(e,t)=>{Jv.init(e,t),HS.init(e,t)});function mk(e){return Cw(pk,e)}const gk=bp("ZodCUID2",(e,t)=>{ey.init(e,t),HS.init(e,t)});function vk(e){return jw(gk,e)}const yk=bp("ZodULID",(e,t)=>{ty.init(e,t),HS.init(e,t)});function bk(e){return Nw(yk,e)}const Ok=bp("ZodXID",(e,t)=>{ny.init(e,t),HS.init(e,t)});function wk(e){return Aw(Ok,e)}const xk=bp("ZodKSUID",(e,t)=>{ry.init(e,t),HS.init(e,t)});function Sk(e){return Iw(xk,e)}const kk=bp("ZodIPv4",(e,t)=>{ly.init(e,t),HS.init(e,t)});function _k(e){return Mw(kk,e)}const Pk=bp("ZodIPv6",(e,t)=>{uy.init(e,t),HS.init(e,t)});function Ek(e){return Dw(Pk,e)}const $k=bp("ZodCIDRv4",(e,t)=>{cy.init(e,t),HS.init(e,t)});function Tk(e){return Rw($k,e)}const Ck=bp("ZodCIDRv6",(e,t)=>{dy.init(e,t),HS.init(e,t)});function jk(e){return Qw(Ck,e)}const Nk=bp("ZodBase64",(e,t)=>{hy.init(e,t),HS.init(e,t)});function Ak(e){return zw(Nk,e)}const Ik=bp("ZodBase64URL",(e,t)=>{my.init(e,t),HS.init(e,t)});function Mk(e){return Lw(Ik,e)}const Dk=bp("ZodE164",(e,t)=>{gy.init(e,t),HS.init(e,t)});function Rk(e){return Zw(Dk,e)}const Qk=bp("ZodJWT",(e,t)=>{yy.init(e,t),HS.init(e,t)});function zk(e){return Fw(Qk,e)}const Lk=bp("ZodCustomStringFormat",(e,t)=>{by.init(e,t),HS.init(e,t)});function Zk(e,t,n={}){return OS(Lk,e,t,n)}function Fk(e){return OS(Lk,"hostname",Rg,e)}function Uk(e){return OS(Lk,"hex",ev,e)}function Vk(e,t){const n=`${e}_${t?.enc??"hex"}`,r=w[n];if(!r)throw new Error(`Unrecognized hash format: ${n}`);return OS(Lk,n,r,t)}const Gk=bp("ZodNumber",(e,t)=>{Oy.init(e,t),XS.init(e,t),e.gt=(t,n)=>e.check(bx(t,n)),e.gte=(t,n)=>e.check(Ox(t,n)),e.min=(t,n)=>e.check(Ox(t,n)),e.lt=(t,n)=>e.check(vx(t,n)),e.lte=(t,n)=>e.check(yx(t,n)),e.max=(t,n)=>e.check(yx(t,n)),e.int=t=>e.check(Yk(t)),e.safe=t=>e.check(Yk(t)),e.positive=t=>e.check(bx(0,t)),e.nonnegative=t=>e.check(Ox(0,t)),e.negative=t=>e.check(vx(0,t)),e.nonpositive=t=>e.check(yx(0,t)),e.multipleOf=(t,n)=>e.check(_x(t,n)),e.step=(t,n)=>e.check(_x(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Bk(e){return Yw(Gk,e)}const Xk=bp("ZodNumberFormat",(e,t)=>{wy.init(e,t),Gk.init(e,t)});function Yk(e){return qw(Xk,e)}function Wk(e){return Hw(Xk,e)}function qk(e){return Kw(Xk,e)}function Hk(e){return Jw(Xk,e)}function Kk(e){return ex(Xk,e)}const Jk=bp("ZodBoolean",(e,t)=>{xy.init(e,t),XS.init(e,t)});function e_(e){return tx(Jk,e)}const t_=bp("ZodBigInt",(e,t)=>{Sy.init(e,t),XS.init(e,t),e.gte=(t,n)=>e.check(Ox(t,n)),e.min=(t,n)=>e.check(Ox(t,n)),e.gt=(t,n)=>e.check(bx(t,n)),e.gte=(t,n)=>e.check(Ox(t,n)),e.min=(t,n)=>e.check(Ox(t,n)),e.lt=(t,n)=>e.check(vx(t,n)),e.lte=(t,n)=>e.check(yx(t,n)),e.max=(t,n)=>e.check(yx(t,n)),e.positive=t=>e.check(bx(BigInt(0),t)),e.negative=t=>e.check(vx(BigInt(0),t)),e.nonpositive=t=>e.check(yx(BigInt(0),t)),e.nonnegative=t=>e.check(Ox(BigInt(0),t)),e.multipleOf=(t,n)=>e.check(_x(t,n));const n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function n_(e){return rx(t_,e)}const r_=bp("ZodBigIntFormat",(e,t)=>{ky.init(e,t),t_.init(e,t)});function i_(e){return ox(r_,e)}function o_(e){return ax(r_,e)}const a_=bp("ZodSymbol",(e,t)=>{_y.init(e,t),XS.init(e,t)});function s_(e){return sx(a_,e)}const l_=bp("ZodUndefined",(e,t)=>{Py.init(e,t),XS.init(e,t)});function u_(e){return lx(l_,e)}const c_=bp("ZodNull",(e,t)=>{Ey.init(e,t),XS.init(e,t)});function d_(e){return ux(c_,e)}const f_=bp("ZodAny",(e,t)=>{$y.init(e,t),XS.init(e,t)});function h_(){return cx(f_)}const p_=bp("ZodUnknown",(e,t)=>{Ty.init(e,t),XS.init(e,t)});function m_(){return dx(p_)}const g_=bp("ZodNever",(e,t)=>{Cy.init(e,t),XS.init(e,t)});function v_(e){return fx(g_,e)}const y_=bp("ZodVoid",(e,t)=>{jy.init(e,t),XS.init(e,t)});function b_(e){return hx(y_,e)}const O_=bp("ZodDate",(e,t)=>{Ny.init(e,t),XS.init(e,t),e.min=(t,n)=>e.check(Ox(t,n)),e.max=(t,n)=>e.check(yx(t,n));const n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function w_(e){return px(O_,e)}const x_=bp("ZodArray",(e,t)=>{Iy.init(e,t),XS.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(Cx(t,n)),e.nonempty=t=>e.check(Cx(1,t)),e.max=(t,n)=>e.check(Tx(t,n)),e.length=(t,n)=>e.check(jx(t,n)),e.unwrap=()=>e.element});function S_(e,t){return Gx(x_,e,t)}function k_(e){const t=e._zod.def.shape;return G_(Object.keys(t))}const __=bp("ZodObject",(e,t)=>{zy.init(e,t),XS.init(e,t),Qp(e,"shape",()=>t.shape),e.keyof=()=>G_(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:m_()}),e.loose=()=>e.clone({...e._zod.def,catchall:m_()}),e.strict=()=>e.clone({...e._zod.def,catchall:v_()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>fm(e,t),e.safeExtend=t=>hm(e,t),e.merge=t=>pm(e,t),e.pick=t=>cm(e,t),e.omit=t=>dm(e,t),e.partial=(...t)=>mm(J_,e,t[0]),e.required=(...t)=>gm(lP,e,t[0])});function P_(e,t){const n={type:"object",shape:e??{},...im(t)};return new __(n)}function E_(e,t){return new __({type:"object",shape:e,catchall:v_(),...im(t)})}function $_(e,t){return new __({type:"object",shape:e,catchall:m_(),...im(t)})}const T_=bp("ZodUnion",(e,t)=>{Zy.init(e,t),XS.init(e,t),e.options=t.options});function C_(e,t){return new T_({type:"union",options:e,...im(t)})}const j_=bp("ZodDiscriminatedUnion",(e,t)=>{T_.init(e,t),Fy.init(e,t)});function N_(e,t,n){return new j_({type:"union",options:t,discriminator:e,...im(n)})}const A_=bp("ZodIntersection",(e,t)=>{Uy.init(e,t),XS.init(e,t)});function I_(e,t){return new A_({type:"intersection",left:e,right:t})}const M_=bp("ZodTuple",(e,t)=>{By.init(e,t),XS.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})});function D_(e,t,n){const r=t instanceof Vv;return new M_({type:"tuple",items:e,rest:r?t:null,...im(r?n:t)})}const R_=bp("ZodRecord",(e,t)=>{Yy.init(e,t),XS.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Q_(e,t,n){return new R_({type:"record",keyType:e,valueType:t,...im(n)})}function z_(e,t,n){const r=rm(e);return r._zod.values=void 0,new R_({type:"record",keyType:r,valueType:t,...im(n)})}const L_=bp("ZodMap",(e,t)=>{Wy.init(e,t),XS.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Z_(e,t,n){return new L_({type:"map",keyType:e,valueType:t,...im(n)})}const F_=bp("ZodSet",(e,t)=>{Hy.init(e,t),XS.init(e,t),e.min=(...t)=>e.check(Ex(...t)),e.nonempty=t=>e.check(Ex(1,t)),e.max=(...t)=>e.check(Px(...t)),e.size=(...t)=>e.check($x(...t))});function U_(e,t){return new F_({type:"set",valueType:e,...im(t)})}const V_=bp("ZodEnum",(e,t)=>{Jy.init(e,t),XS.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const i={};for(const r of e){if(!n.has(r))throw new Error(`Key ${r} not found in enum`);i[r]=t.entries[r]}return new V_({...t,checks:[],...im(r),entries:i})},e.exclude=(e,r)=>{const i={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete i[t]}return new V_({...t,checks:[],...im(r),entries:i})}});function G_(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new V_({type:"enum",entries:n,...im(t)})}function B_(e,t){return new V_({type:"enum",entries:e,...im(t)})}const X_=bp("ZodLiteral",(e,t)=>{eb.init(e,t),XS.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Y_(e,t){return new X_({type:"literal",values:Array.isArray(e)?e:[e],...im(t)})}const W_=bp("ZodFile",(e,t)=>{tb.init(e,t),XS.init(e,t),e.min=(t,n)=>e.check(Ex(t,n)),e.max=(t,n)=>e.check(Px(t,n)),e.mime=(t,n)=>e.check(zx(Array.isArray(t)?t:[t],n))});function q_(e){return nS(W_,e)}const H_=bp("ZodTransform",(e,t)=>{nb.init(e,t),XS.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new xp(e.constructor.name);n.addIssue=r=>{if("string"==typeof r)n.issues.push(Sm(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),n.issues.push(Sm(t))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(e=>(n.value=e,n)):(n.value=i,n)}});function K_(e){return new H_({type:"transform",transform:e})}const J_=bp("ZodOptional",(e,t)=>{ib.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType});function eP(e){return new J_({type:"optional",innerType:e})}const tP=bp("ZodNullable",(e,t)=>{ob.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nP(e){return new tP({type:"nullable",innerType:e})}function rP(e){return eP(nP(e))}const iP=bp("ZodDefault",(e,t)=>{ab.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function oP(e,t){return new iP({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():Hp(t)}})}const aP=bp("ZodPrefault",(e,t)=>{lb.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType});function sP(e,t){return new aP({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():Hp(t)}})}const lP=bp("ZodNonOptional",(e,t)=>{ub.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType});function uP(e,t){return new lP({type:"nonoptional",innerType:e,...im(t)})}const cP=bp("ZodSuccess",(e,t)=>{db.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dP(e){return new cP({type:"success",innerType:e})}const fP=bp("ZodCatch",(e,t)=>{fb.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function hP(e,t){return new fP({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}const pP=bp("ZodNaN",(e,t)=>{hb.init(e,t),XS.init(e,t)});function mP(e){return gx(pP,e)}const gP=bp("ZodPipe",(e,t)=>{pb.init(e,t),XS.init(e,t),e.in=t.in,e.out=t.out});function vP(e,t){return new gP({type:"pipe",in:e,out:t})}const yP=bp("ZodCodec",(e,t)=>{gP.init(e,t),gb.init(e,t)});function bP(e,t,n){return new yP({type:"pipe",in:e,out:t,transform:n.decode,reverseTransform:n.encode})}const OP=bp("ZodReadonly",(e,t)=>{bb.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType});function wP(e){return new OP({type:"readonly",innerType:e})}const xP=bp("ZodTemplateLiteral",(e,t)=>{wb.init(e,t),XS.init(e,t)});function SP(e,t){return new xP({type:"template_literal",parts:e,...im(t)})}const kP=bp("ZodLazy",(e,t)=>{kb.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.getter()});function _P(e){return new kP({type:"lazy",getter:e})}const PP=bp("ZodPromise",(e,t)=>{Sb.init(e,t),XS.init(e,t),e.unwrap=()=>e._zod.def.innerType});function EP(e){return new PP({type:"promise",innerType:e})}const $P=bp("ZodFunction",(e,t)=>{xb.init(e,t),XS.init(e,t)});function TP(e){return new $P({type:"function",input:Array.isArray(e?.input)?D_(e?.input):e?.input??S_(m_()),output:e?.output??m_()})}const CP=bp("ZodCustom",(e,t)=>{_b.init(e,t),XS.init(e,t)});function jP(e){const t=new yv({check:"custom"});return t._zod.check=e,t}function NP(e,t){return mS(CP,e??(()=>!0),t)}function AP(e,t={}){return gS(CP,e,t)}function IP(e){return vS(e)}function MP(e,t={error:`Input not instance of ${e.name}`}){const n=new CP({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...im(t)});return n._zod.bag.Class=e,n}const DP=(...e)=>bS({Codec:yP,Boolean:Jk,String:WS},...e);function RP(e){const t=_P(()=>C_([qS(e),Bk(),e_(),d_(),S_(t),Q_(qS(),t)]));return t}function QP(e,t){return vP(K_(e),t)}const zP={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function LP(e){kp({customError:e})}function ZP(){return kp().customError}var FP,UP;function VP(e){return Ow(WS,e)}function GP(e){return Ww(Gk,e)}function BP(e){return nx(Jk,e)}function XP(e){return ix(t_,e)}function YP(e){return mx(O_,e)}function WP(e){return WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WP(e)}function qP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return HP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HP(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function HP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function KP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=WP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=WP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WP(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}FP||(FP={}),kp(Ub());var JP=function(e){return e.toLowerCase()},eE={"Core Messaging Events":{MESSAGE_RECEIVED:{description:"Emitted when a new message is received/inserted into chat.",params:{messageId:GP().describe("The ID of the message."),type:qS().optional().describe("The type of message.")}},CHARACTER_MESSAGE_RENDERED:{description:"Emitted after a character message is rendered in the UI.",params:{messageId:GP().describe("The ID of the message."),type:qS().optional().describe("The type of message.")}},MESSAGE_SENT:{description:"Emitted when a user sends a message.",params:{index:GP().describe("The index of the sent message.")}},USER_MESSAGE_RENDERED:{description:"Emitted after a user message is rendered in the UI.",params:{index:GP().describe("The index of the rendered message.")}},MESSAGE_EDITED:{description:"Emitted when a message is edited.",params:{messageId:GP().describe("The ID of the edited message.")}},MESSAGE_DELETED:{description:"Emitted when a message is deleted.",params:{chatLength:GP().describe("The new length of the chat.")}},MESSAGE_UPDATED:{description:"Emitted when a message is updated.",params:{messageId:GP().describe("The ID of the updated message.")}},MESSAGE_SWIPED:{description:"Emitted when a message is swiped.",params:{messageIndex:GP().describe("The index of the message that was swiped.")}},MESSAGE_SWIPE_DELETED:{description:"Emitted when a message swipe is deleted.",params:{data:P_({messageId:GP(),swipeId:GP(),newSwipeId:GP()}).describe("Object containing details about the deleted swipe.")}},MORE_MESSAGES_LOADED:{description:"Emitted when more messages are loaded (e.g., by scrolling up)."},IMPERSONATE_READY:{description:"Emitted when an impersonation message is ready to be sent.",params:{text:qS().describe("The content of the impersonation message.")}},MESSAGE_FILE_EMBEDDED:{description:"Emitted when a file is embedded in a message.",params:{messageId:GP().describe("The ID of the message with the embedded file.")}},MESSAGE_REASONING_EDITED:{description:"Emitted when a message's reasoning (metadata) is edited."},MESSAGE_REASONING_DELETED:{description:"Emitted when a message's reasoning (metadata) is deleted."}},"Chat/Group Management Events":{CHAT_CHANGED:{description:"Emitted when the current chat changes.",params:{chatId:qS().describe("The ID of the new chat.")}},CHAT_DELETED:{description:"Emitted when a chat is deleted.",params:{chatName:qS().describe("The name of the deleted chat.")}},CHAT_CREATED:{description:"Emitted when a chat is created."},GROUP_CHAT_DELETED:{description:"Emitted when a group chat is deleted.",params:{chatId:qS().describe("The ID of the deleted group chat.")}},GROUP_CHAT_CREATED:{description:"Emitted when a new group chat is created."},GROUP_UPDATED:{description:"Emitted when group information is updated."},GROUP_MEMBER_DRAFTED:{description:"Emitted when a group member is drafted.",params:{chId:GP().describe("The ID of the drafted character.")}},GROUP_WRAPPER_STARTED:{description:"Emitted when a group message generation process starts.",params:{data:P_({selected_group:qS(),type:qS()}).describe("Data related to the group wrapper start.")}},GROUP_WRAPPER_FINISHED:{description:"Emitted when a group message generation process finishes.",params:{data:h_().describe("Data related to the group wrapper finish.")}}},"Preset Management Events":{PRESET_CHANGED:{description:"Emitted when a generation preset is changed for an API.",params:{data:P_({apiId:qS(),name:qS()}).describe("Preset change details.")}},PRESET_DELETED:{description:"Emitted when a generation preset is deleted.",params:{data:P_({apiId:qS(),name:qS()}).describe("Deleted preset details.")}},PRESET_RENAMED:{description:"Emitted after a generation preset is renamed.",params:{data:P_({apiId:qS(),oldName:qS(),newName:qS()}).describe("Preset rename details.")}}},"World Info Events":{WORLDINFO_SETTINGS_UPDATED:{description:"Emitted when world info settings are updated."},WORLDINFO_UPDATED:{description:"Emitted when world info entries are updated.",params:{name:qS().describe("The name of the updated world info."),data:h_()}},WORLD_INFO_ACTIVATED:{description:"Emitted when world info entries are activated for context.",params:{entries:S_(h_()).describe("A list of activated world info entries.")}},WORLDINFO_FORCE_ACTIVATE:{description:"Emitted to force world info activation."},WORLDINFO_ENTRIES_LOADED:{description:"Emitted when world info entries are loaded."}},"API/Model Events":{CHATCOMPLETION_SOURCE_CHANGED:{description:"Emitted when the chat completion source (API provider) changes.",params:{value:qS().describe("The new API provider key.")}},CHATCOMPLETION_MODEL_CHANGED:{description:"Emitted when the chat completion model changes.",params:{value:qS().describe("The new model name.")}}},"Extension Events":{EXTENSIONS_FIRST_LOAD:{description:"Emitted on the first load of extensions after the UI is ready."},EXTRAS_CONNECTED:{description:"Emitted when extras modules (like TTS, STT) are connected.",params:{modules:S_(h_()).describe("A list of connected modules.")}},EXTENSION_SETTINGS_LOADED:{description:"Emitted when extension settings are loaded from the server.",params:{response:h_().describe("The settings response object.")}}},"UI Rendering Events":{APP_READY:{description:"Emitted when the main application UI is ready."},FORCE_SET_BACKGROUND:{description:"Emitted to force a background update."},MOVABLE_PANELS_RESET:{description:"Emitted to reset the positions of movable UI panels."}},"Generation/Streaming Events":{GENERATION_STARTED:{description:"Emitted when a new message generation starts.",params:{type:qS().describe("The type of generation."),options:h_().describe("Generation options."),dryRun:e_().describe("Whether it is a dry run.")}},GENERATION_STOPPED:{description:"Emitted when a generation is manually stopped by the user."},GENERATION_ENDED:{description:"Emitted when a generation finishes successfully.",params:{chatLength:GP().describe("The new length of the chat.")}},GENERATION_AFTER_COMMANDS:{description:"Emitted after slash commands in a message are processed, but before generation.",params:{type:qS().describe("The type of generation."),options:h_().describe("Generation options."),dryRun:e_().describe("Whether it is a dry run.")}},SD_PROMPT_PROCESSING:{description:"Emitted during Stable Diffusion prompt processing."},STREAM_TOKEN_RECEIVED:{description:"Emitted for each token received during a streaming generation.",params:{text:qS().describe("The text token received.")}}},"Character Management Events":{CHARACTER_EDITOR_OPENED:{description:"Emitted when the character editor is opened.",params:{chid:qS().describe("The ID of the character being edited.")}},CHARACTER_EDITED:{description:"Emitted when a character's data is saved.",params:{data:h_().describe("An object containing character details.")}},CHARACTER_PAGE_LOADED:{description:"Emitted when the character management page is loaded."},CHARACTER_DELETED:{description:"Emitted when a character is deleted.",params:{data:h_().describe("An object containing details of the deleted character.")}},CHARACTER_DUPLICATED:{description:"Emitted when a character is duplicated.",params:{data:P_({oldAvatar:qS(),newAvatar:qS()}).describe("Avatar filenames.")}},CHARACTER_RENAMED:{description:"Emitted when a character is renamed.",params:{oldAvatar:qS().describe("The old avatar filename."),newAvatar:qS().describe("The new avatar filename.")}},CHARACTER_RENAMED_IN_PAST_CHAT:{description:"Emitted when a character rename affects past chats.",params:{currentChat:h_().describe("The current chat object."),oldAvatar:qS().describe("The old avatar filename."),newAvatar:qS().describe("The new avatar filename.")}},CHARACTER_FIRST_MESSAGE_SELECTED:{description:"Emitted when a character's greeting (first message) is selected.",params:{eventArgs:h_()}},OPEN_CHARACTER_LIBRARY:{description:"Emitted when the character library is opened."}},"Settings Events":{SETTINGS_LOADED:{description:"Emitted when global settings are loaded."},SETTINGS_UPDATED:{description:"Emitted when global settings are updated."}},"Connection Profile Events":{CONNECTION_PROFILE_LOADED:{description:"Emitted when a connection profile is loaded.",params:{profileName:qS().describe("The name of the loaded profile.")}},CONNECTION_PROFILE_CREATED:{description:"Emitted when a new connection profile is created.",params:{profile:h_().describe("The new profile object.")}},CONNECTION_PROFILE_DELETED:{description:"Emitted when a connection profile is deleted.",params:{profile:h_().describe("The deleted profile object.")}},CONNECTION_PROFILE_UPDATED:{description:"Emitted when a connection profile is updated.",params:{oldProfile:h_().describe("The old profile object."),newProfile:h_().describe("The new profile object.")}}},"Tool Calling Events":{TOOL_CALLS_PERFORMED:{description:"Emitted when tool calls are performed."},TOOL_CALLS_RENDERED:{description:"Emitted when tool calls are rendered in the UI."}},"API Events":{MAIN_API_CHANGED:{description:"Emitted when the main API provider changes.",params:{data:P_({apiId:qS()}).describe("An object containing the new API ID.")}}},"Online Status Events":{ONLINE_STATUS_CHANGED:{description:"Emitted when the application's online status changes.",params:{onlineStatus:e_().describe("True if online, false if offline.")}}},"Image Events":{IMAGE_SWIPED:{description:"Emitted when an image is swiped within a message.",params:{data:h_().describe("Data about the swipe event.")}}}},tE={},nE={},rE={},iE={};for(var oE in eE)for(var aE in tE[oE]=[],eE[oE]){var sE=eE[oE][aE],lE=aE,uE=JP(lE);nE[lE]=uE,tE[oE].push(uE),rE[uE]=sE.description,iE[uE]=sE.params||{}}var cE,dE=nE;!function(e){e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.OBJECT="object",e.PROFILE_ID="profileId",e.MESSAGES="messages",e.SCHEMA="schema",e.STRUCTURED_RESULT="structuredResult",e.CHARACTER_AVATAR="characterAvatar",e.LOREBOOK_NAME="lorebookName",e.REGEX_SCRIPT_ID="regexScriptId",e.FLOW_ID="flowId",e.ANY="any"}(cE||(cE={}));var fE=(KP(KP(KP(KP(KP(KP(KP(KP(KP(KP(UP={},cE.STRING,"#f4e04d"),cE.NUMBER,"#4df48c"),cE.BOOLEAN,"#f44d4d"),cE.OBJECT,"#4d8cf4"),cE.MESSAGES,"#a94df4"),cE.SCHEMA,"#f4a94d"),cE.PROFILE_ID,"#4df4e0"),cE.STRUCTURED_RESULT,"#4d8cf4"),cE.CHARACTER_AVATAR,"#f47d4d"),cE.LOREBOOK_NAME,"#f44dd9"),KP(KP(KP(UP,cE.REGEX_SCRIPT_ID,"#4dd4f4"),cE.FLOW_ID,"#8ff44d"),cE.ANY,"#ffffff")),hE=[new Set([cE.STRING,cE.PROFILE_ID,cE.CHARACTER_AVATAR,cE.LOREBOOK_NAME,cE.REGEX_SCRIPT_ID,cE.FLOW_ID]),new Set([cE.OBJECT,cE.STRUCTURED_RESULT])],pE=function(){for(var e=new Map,t=function(t){return e.has(t)||e.set(t,new Set),e.get(t)},n=0,r=hE;n<r.length;n++){var i,o=r[n],a=qP(o);try{for(a.s();!(i=a.n()).done;){var s,l=i.value,u=t(l),c=qP(o);try{for(c.s();!(s=c.n()).done;){var d=s.value;d!==l&&u.add(d)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}}return e}();function mE(e,t){if(e===t)return!0;if(e===cE.ANY||t===cE.ANY)return!0;var n=pE.get(e);return void 0!==n&&n.has(t)}function gE(e,t){if(e===t)return!0;if(e===cE.ANY||t===cE.ANY)return!1;var n=pE.get(e);return!!n&&n.has(t)}var vE=function(e){e.id;var t=e.data,n=e.selected,r=(null==t?void 0:t.label)||"Unknown Node";return(0,$.jsxs)("div",{className:n?"node-selected":"",style:{border:"1px solid #777",padding:"10px",background:"#333",fontSize:"12px",minWidth:180,position:"relative"},children:[(0,$.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:(0,$.jsx)("label",{children:r})}),(0,$.jsxs)("div",{style:{color:"#ff6b6b",fontStyle:"italic"},children:[(0,$.jsx)("p",{children:"Unknown node type"}),(0,$.jsx)("p",{children:"This node cannot be executed"})]}),(0,$.jsx)(Ad,{type:"target",position:vl.Left,id:"input"}),(0,$.jsx)(Ad,{type:"source",position:vl.Right,id:"output"})]})};function yE(e){return yE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yE(e)}function bE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wE(r.key),r)}}function OE(e,t,n){return(t=wE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wE(e){var t=function(e,t){if("object"!=yE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yE(t)?t:t+""}var xE=function(){return function(e,t,n){return t&&bE(e.prototype,t),n&&bE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),OE(this,"nodeTypes",{}),OE(this,"nodeDefinitionMap",new Map),OE(this,"nodeExecutors",new Map),OE(this,"allNodeDefinitions",[])},[{key:"register",value:function(e){this.nodeDefinitionMap.has(e.type)&&console.warn('Node type "'.concat(e.type,'" is being registered more than once. The last one wins.')),this.nodeTypes[e.type]=e.component,this.nodeDefinitionMap.set(e.type,e),this.nodeExecutors.set(e.type,e.execute),this.allNodeDefinitions.push(e)}},{key:"nodeTypesWithFallback",get:function(){return new Proxy(this.nodeTypes,{get:function(e,t){return"string"!=typeof t||t in e?e[t]:vE}})}}])}(),SE=new xE;function kE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function PE(e,t,n){var r;return null!==(r=e[n])&&void 0!==r?r:t[n]}var EE=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=e,o=kE(t.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean));try{for(o.s();!(n=o.n()).done;){var a=n.value;if(null==i)return r;i=i[a]}}catch(e){o.e(e)}finally{o.f()}return void 0===i?r:i};const $E=new Map,TE=e=>{const t=$E.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},CE=(e,t={})=>(n,r,i)=>{const{enabled:o,anonymousActionType:a,store:s,...l}=t;let u;try{u=(null==o||o)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!u)return o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:c,...d}=((e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};const r=$E.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return $E.set(n.name,i),{type:"tracked",store:e,...i}})(s,u,l);let f=!0;i.setState=(e,t,o)=>{const u=n(e,t);if(!f)return u;const d=void 0===o?{type:a||"anonymous"}:"string"==typeof o?{type:o}:o;return void 0===s?(null==c||c.send(d,r()),u):(null==c||c.send({...d,type:`${s}/${d.type}`},{...TE(l.name),[s]:i.getState()}),u)};const h=(...e)=>{const t=f;f=!1,n(...e),f=t},p=e(i.setState,r,i);if("untracked"===d.type?null==c||c.init(p):(d.stores[d.store]=i,null==c||c.init(Object.fromEntries(Object.entries(d.stores).map(([e,t])=>[e,e===d.store?p:t.getState()])))),i.dispatchFromDevtools&&"function"==typeof i.dispatch){let e=!1;const t=i.dispatch;i.dispatch=(...n)=>{"__setState"!==n[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...n)}}return c.subscribe(e=>{var t;switch(e.type){case"ACTION":return"string"!=typeof e.payload?void console.error("[zustand devtools middleware] Unsupported action format"):jE(e.payload,e=>{if("__setState"===e.type){if(void 0===s)return void h(e.state);1!==Object.keys(e.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const t=e.state[s];if(null==t)return;return void(JSON.stringify(i.getState())!==JSON.stringify(t)&&h(t))}i.dispatchFromDevtools&&"function"==typeof i.dispatch&&i.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":return h(p),void 0===s?null==c?void 0:c.init(i.getState()):null==c?void 0:c.init(TE(l.name));case"COMMIT":return void 0===s?void(null==c||c.init(i.getState())):null==c?void 0:c.init(TE(l.name));case"ROLLBACK":return jE(e.state,e=>{if(void 0===s)return h(e),void(null==c||c.init(i.getState()));h(e[s]),null==c||c.init(TE(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return jE(e.state,e=>{void 0!==s?JSON.stringify(i.getState())!==JSON.stringify(e[s])&&h(e[s]):h(e)});case"IMPORT_STATE":{const{nextLiftedState:n}=e.payload,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;return h(void 0===s?r:r[s]),void(null==c||c.send(null,n))}case"PAUSE_RECORDING":return f=!f}return}}),p},jE=(e,t)=>{let n;try{n=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==n&&t(n)};var NE=gp()(CE(function(e){return{runId:null,runStatus:"idle",nodeReports:new Map,executionOrder:[],isVisualizationVisible:!1,activeNodeId:null,startRun:function(t){return e({runId:t,runStatus:"running",nodeReports:new Map,activeNodeId:null,executionOrder:[]})},setActiveNode:function(t,n){return e(function(e){return e.runId!==t?{}:{activeNodeId:n}})},addNodeReport:function(t,n,r){return e(function(e){if(e.runId!==t)return{};var i=new Map(e.nodeReports);return i.set(n,r),{nodeReports:i}})},endRun:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e(function(e){return e.runId!==t?{}:{runStatus:n,isVisualizationVisible:!0,activeNodeId:null,executionOrder:r.map(function(e){return e.nodeId})}})},toggleVisualization:function(){return e(function(e){return{isVisualizationVisible:!e.isVisualizationVisible}})},clearRun:function(){return e({runId:null,runStatus:"idle",nodeReports:new Map,isVisualizationVisible:!1,activeNodeId:null,executionOrder:[]})}}},{name:"FlowRunStore"}));function AE(e){return AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AE(e)}function IE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new Set;return JSON.stringify(e,function(e,t){if("object"===AE(t)&&null!==t){if(n.has(t))return"[Circular Reference]";n.add(t)}return t},t)}function ME(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return DE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var RE=function(e){var t=e.report,n=ME((0,T.useState)("output"),2),r=n[0],i=n[1];return(0,$.jsx)("div",{className:"node-run-report",children:(0,$.jsxs)("details",{children:[(0,$.jsxs)("summary",{children:["Status: ",(0,$.jsx)("span",{className:"status-".concat(t.status),children:t.status})]}),(0,$.jsxs)("div",{className:"report-content",children:[t.error&&(0,$.jsx)("pre",{className:"report-error",children:t.error}),(0,$.jsxs)("div",{className:"report-tabs",children:[(0,$.jsx)(j,{onClick:function(){return i("input")},className:"input"===r?"active":"",children:"Input"}),(0,$.jsx)(j,{onClick:function(){return i("output")},className:"output"===r?"active":"",children:"Output"}),(0,$.jsx)("div",{style:{flex:1}}),(0,$.jsx)(j,{className:"fa-solid fa-copy",onClick:function(){return function(e){navigator.clipboard.writeText(IE(e)).then(function(){return Br("info","Copied to clipboard.","ui_action")}).catch(function(){return Br("error","Failed to copy.","ui_action")})}("input"===r?t.input:t.output)}})]}),(0,$.jsx)("pre",{className:"report-data",children:IE("input"===r?t.input:t.output)})]})]})})},QE=function(e){var t=e.id,n=e.title,r=e.children,i=e.selected,o=e.contentGrows,a=e.minWidth,s=void 0===a?180:a,l=NE(function(e){return{isVisualizationVisible:e.isVisualizationVisible,nodeReports:e.nodeReports,executionOrder:e.executionOrder}}),u=l.isVisualizationVisible,c=l.nodeReports,d=l.executionOrder,f=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),h=null==f?void 0:f.disabled,p=null==f?void 0:f._validationErrors,m=(0,T.useMemo)(function(){var e;return null!==(e=null==p?void 0:p.filter(function(e){return!e.fieldId}))&&void 0!==e?e:[]},[p]),g=c.get(t),v=u&&g,y=v?"run-".concat(g.status):"";h&&(y+=" node-disabled");var b=u?d.indexOf(t)+1:0,O={border:"1px solid #777",padding:"10px",background:"#333",fontSize:"12px",minWidth:s,position:"relative"};o&&(O.display="flex",O.flexDirection="column",O.height="100%");var w=o?(0,$.jsx)("div",{style:{flexGrow:1,minHeight:0,position:"relative"},children:r}):r;return(0,$.jsxs)("div",{className:y,style:O,children:[b>0&&(0,$.jsx)("div",{className:"execution-order-badge",children:b}),m.length>0&&(0,$.jsx)("div",{className:"node-validation-error-icon",title:m.map(function(e){return e.message}).join("\n"),children:(0,$.jsx)("i",{className:"fa-solid fa-triangle-exclamation"})}),(0,$.jsx)(kh,{isVisible:i,minWidth:s,minHeight:50}),(0,$.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:(0,$.jsx)("label",{children:n})}),w,v&&(0,$.jsx)(RE,{report:g})]})};function zE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return LE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ZE(e){return e instanceof __?e.shape:"unwrap"in e&&"function"==typeof e.unwrap?ZE(e.unwrap()):"innerType"in e&&"function"==typeof e.innerType?ZE(e.innerType()):null}function FE(e){return e instanceof __?"object":e instanceof x_?"Array<".concat(FE(e.element),">"):e instanceof WS?"string":e instanceof Gk?"number":e instanceof Jk?"boolean":e instanceof V_?"enum":"unwrap"in e&&"function"==typeof e.unwrap?FE(e.unwrap()):"innerType"in e&&"function"==typeof e.innerType?FE(e.innerType()):"any"}function UE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="  ".repeat(t),r=ZE(e);if(r){var i=Object.entries(r).map(function(e){var r=zE(e,2),i=r[0],o=r[1],a=o.description?" // ".concat(o.description):"";return ZE(o)?"".concat(n,"  ").concat(i,": {\n").concat(UE(o,t+2),"\n").concat(n,"  }").concat(a):"".concat(n,"  ").concat(i,": ").concat(FE(o)).concat(a)}).join("\n");return"{\n".concat(i,"\n").concat(n,"}")}return FE(e)}function VE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("unwrap"in e&&"function"==typeof e.unwrap)return VE(e.unwrap(),t);if("innerType"in e&&"function"==typeof e.innerType)return VE(e.innerType(),t);if(e instanceof __){var n=e.shape;return Object.entries(n).flatMap(function(e){var n=zE(e,2),r=n[0];return VE(n[1],t?"".concat(t,".").concat(r):r)})}return e instanceof x_?VE(e.element,"".concat(t,"[0]")):t?[t]:[]}function GE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return BE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function BE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var XE=function(e){var t=qf();return(0,T.useMemo)(function(){var n,r=new Set,i=GE(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.target===e&&o.targetHandle&&r.add(o.targetHandle)}}catch(e){i.e(e)}finally{i.f()}return r},[t,e])};function YE(e){return YE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YE(e)}function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=YE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=YE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==YE(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HE(e){return function(e){if(Array.isArray(e))return KE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return KE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KE(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var JE=function(e){var t=e.nodeId,n=e.definition,r=e.type,i=e.fields,o=e.data,a=e.updateNodeData,s=e.exclude,l=void 0===s?[]:s,u=W1(function(e){var n,r;return{node:e.nodesMap.get(t),allNodes:e.nodes,allEdges:e.edges,validationIssues:null!==(n=null===(r=e.nodesMap.get(t))||void 0===r||null===(r=r.data)||void 0===r?void 0:r._validationErrors)&&void 0!==n?n:[]}}),c=u.node,d=u.allNodes,f=u.allEdges,h=u.validationIssues,p=XE(t),m=(0,T.useMemo)(function(){if(!c)return[];var e="input"===r?n.handles.inputs:n.handles.outputs,t=[];if(n.getDynamicHandles){var i=n.getDynamicHandles(c,d,f);t="input"===r?i.inputs:i.outputs}var o=e.filter(function(e){return!t.some(function(t){return t.id===e.id})});return[].concat(HE(o),HE(t)).filter(function(e){return e.id}).filter(function(e){return!l.includes(e.id)})},[c,d,f,n,r,l]),g="input"===r?vl.Left:vl.Right,v="input"===r?"flex-start":"flex-end";return 0===m.length?null:(0,$.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:m.map(function(e){var n,s,l=e.schema?UE(e.schema):e.type,u="input"===r&&i?i.find(function(t){return t.id===e.id}):void 0,c=p.has(e.id),d=u&&!c,f=h.find(function(t){return t.fieldId===e.id}),m=(0,$.jsx)(Ad,{type:"input"===r?"target":"source",position:g,id:e.id,style:{position:"relative",transform:"none",top:0,left:0,right:0,backgroundColor:fE[e.type]}}),y=null;if(d&&o&&a){var b,O,w,x=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(t){qE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({className:"nodrag",onChange:function(e){if(u.customChangeHandler)u.customChangeHandler(e,{nodeId:t,updateNodeData:a});else{var n=u.getValueFromEvent?u.getValueFromEvent(e):e.target.value;a(t,qE({},u.id,n))}}},u.props);if("checkbox"===(null===(b=u.props)||void 0===b?void 0:b.type))x.checked=null!==(O=o[u.id])&&void 0!==O&&O;else x.value=u.formatValue?u.formatValue(o[u.id]):null!==(w=o[u.id])&&void 0!==w?w:"";y=T.createElement(u.component,x)}var S=null!==(n=null!==(s=null==u?void 0:u.label)&&void 0!==s?s:e.label)&&void 0!==n?n:e.id,k=(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("label",{style:{margin:"0 10px",textTransform:"capitalize"},children:S}),(0,$.jsxs)("span",{className:"handle-label",children:["(",e.type,")"]})]});return(0,$.jsxs)("div",{className:f?"flow-node-field-invalid":"",style:{display:"flex",flexDirection:"column",gap:"4px"},title:null==f?void 0:f.message,children:[(0,$.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:v},title:l,children:"input"===r?(0,$.jsxs)($.Fragment,{children:[m,k]}):(0,$.jsxs)($.Fragment,{children:[k,m]})}),y]},e.id)})})};var e$=[{id:"value",label:"Value",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"true",children:"True"}),(0,$.jsx)("option",{value:"false",children:"False"})]})},getValueFromEvent:function(e){return"true"===e.target.value},formatValue:function(e){return String(e)}}];function t$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return n$(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(n$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,n$(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,n$(d,"constructor",u),n$(u,"constructor",l),l.displayName="GeneratorFunction",n$(u,i,"GeneratorFunction"),n$(d),n$(d,i,"Generator"),n$(d,r,function(){return this}),n$(d,"toString",function(){return"[object Generator]"}),(t$=function(){return{w:o,m:f}})()}function n$(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}n$=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){n$(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},n$(e,t,n,r)}function r$(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var i$=P_({value:e_().default(!1),_version:Bk().optional()}),o$=function(){var e,t=(e=t$().m(function e(t,n){var r,i;return t$().w(function(e){for(;;)if(0===e.n)return r=i$.parse(t.data),i=PE(n,r,"value"),e.a(2,{value:Boolean(i)})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){r$(o,r,i,a,s,"next",e)}function s(e){r$(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),a$={type:"booleanNode",label:"Boolean",category:"Input",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Boolean",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:e$,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:i$,currentVersion:1,initialData:{value:!1},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.BOOLEAN}]},execute:o$};SE.register(a$);var s$=[{id:"message",label:"Confirmation Message",component:I,props:{rows:3}}];function l$(e,t){return function(n,r){var i=n.data,o=r.some(function(t){return t.target===n.id&&t.targetHandle===e});if(!i[e]&&0!==i[e]&&!o)return{fieldId:e,message:t,severity:"error"}}}function u$(e,t){return function(n,r){if(!r.some(function(t){return t.target===n.id&&t.targetHandle===e}))return{message:t,severity:"error"}}}function c$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=(0,o[i])(e,n);a&&r.push(a)}return r}}function d$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return f$(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(f$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f$(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,f$(d,"constructor",u),f$(u,"constructor",l),l.displayName="GeneratorFunction",f$(u,i,"GeneratorFunction"),f$(d),f$(d,i,"Generator"),f$(d,r,function(){return this}),f$(d,"toString",function(){return"[object Generator]"}),(d$=function(){return{w:o,m:f}})()}function f$(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}f$=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){f$(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},f$(e,t,n,r)}function h$(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var p$=P_({message:qS().optional(),_version:Bk().optional()}),m$=function(){var e,t=(e=d$().m(function e(t,n,r){var i,o,a,s;return d$().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=p$.parse(t.data),a=PE(n,o,"message")){e.n=1;break}throw new Error("Confirmation message is required.");case 1:return e.n=2,i.confirmUser(a);case 2:return s=e.v,e.a(2,{activatedHandle:s?"true":"false"})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){h$(o,r,i,a,s,"next",e)}function s(e){h$(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),g$={type:"confirmUserNode",label:"Confirm With User",category:"User Interaction",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Confirm With User",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:s$,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px",marginTop:"5px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:p$,currentVersion:1,initialData:{message:"Are you sure?"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"message",type:cE.STRING}],outputs:[{id:"true",type:cE.ANY},{id:"false",type:cE.ANY}]},validate:c$(l$("message","Message is required.")),execute:m$,determineEdgesToFollow:function(e,t){return null!=e&&e.activatedHandle?t.filter(function(t){return t.sourceHandle===e.activatedHandle}):[]}};SE.register(g$);var v$=[{id:"name",label:"Name",component:N,props:{type:"text"}},{id:"description",label:"Description",component:I,props:{rows:2}},{id:"first_mes",label:"First Message",component:I,props:{rows:2}},{id:"scenario",label:"Scenario",component:I,props:{rows:2}},{id:"personality",label:"Personality",component:I,props:{rows:2}},{id:"mes_example",label:"Message Examples",component:I,props:{rows:2}},{id:"tags",label:"Tags (comma-separated)",component:N,props:{type:"text"}}];function y$(e){return y$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y$(e)}function b$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return O$(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(O$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,O$(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,O$(d,"constructor",u),O$(u,"constructor",l),l.displayName="GeneratorFunction",O$(u,i,"GeneratorFunction"),O$(d),O$(d,i,"Generator"),O$(d,r,function(){return this}),O$(d,"toString",function(){return"[object Generator]"}),(b$=function(){return{w:o,m:f}})()}function O$(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}O$=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){O$(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},O$(e,t,n,r)}function w$(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function x$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x$(Object(n),!0).forEach(function(t){k$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k$(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=y$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _$=P_(S$(S$({},{name:qS().optional(),description:qS().optional(),first_mes:qS().optional(),scenario:qS().optional(),personality:qS().optional(),mes_example:qS().optional(),tags:qS().optional()}),{},{_version:Bk().optional()})),P$=function(){var e,t=(e=b$().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h,p;return b$().w(function(e){for(;;)switch(e.n){case 0:if(c=r.dependencies,d=_$.parse(t.data),f=PE(n,d,"name")){e.n=1;break}throw new Error("Character name is required.");case 1:return h=null!==(i=PE(n,d,"tags"))&&void 0!==i?i:"",p={name:f,description:null!==(o=PE(n,d,"description"))&&void 0!==o?o:"",first_mes:null!==(a=PE(n,d,"first_mes"))&&void 0!==a?a:"",scenario:null!==(s=PE(n,d,"scenario"))&&void 0!==s?s:"",personality:null!==(l=PE(n,d,"personality"))&&void 0!==l?l:"",mes_example:null!==(u=PE(n,d,"mes_example"))&&void 0!==u?u:"",tags:h.split(",").map(function(e){return e.trim()}).filter(Boolean),avatar:"none",spec:"chara_card_v3",spec_version:"3.0",data:{}},e.n=2,c.createCharacter(p);case 2:return e.a(2,{result:f})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){w$(o,r,i,a,s,"next",e)}function s(e){w$(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),E$={type:"createCharacterNode",label:"Create Character",category:"Character",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Create Character",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:v$,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:_$,currentVersion:1,initialData:{name:"New Character"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"name",type:cE.STRING},{id:"description",type:cE.STRING},{id:"first_mes",type:cE.STRING},{id:"scenario",type:cE.STRING},{id:"personality",type:cE.STRING},{id:"mes_example",type:cE.STRING},{id:"tags",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.STRING}]},validate:c$(l$("name","Name is required.")),execute:P$};function $$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T$(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(E$);var C$=P_({uid:Bk(),key:S_(qS()).describe("The trigger words for the WI entry."),content:qS().describe("The content of the WI entry."),comment:qS().describe("The comment for the WI entry. It works like a title.")}),j$=S_(C$),N$=P_({id:Bk().describe("The index of the message in the chat."),name:qS().describe("The name of the sender."),mes:qS().describe("The content of the message."),is_user:e_().describe("True if the message is from the user."),is_system:e_().describe("True if the message is a system message (hidden from LLM context).")});function A$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return I$(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(I$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,I$(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,I$(d,"constructor",u),I$(u,"constructor",l),l.displayName="GeneratorFunction",I$(u,i,"GeneratorFunction"),I$(d),I$(d,i,"Generator"),I$(d,r,function(){return this}),I$(d,"toString",function(){return"[object Generator]"}),(A$=function(){return{w:o,m:f}})()}function I$(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}I$=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){I$(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},I$(e,t,n,r)}function M$(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var D$=P_({worldName:qS().optional(),key:qS().optional(),content:qS().optional(),comment:qS().optional(),_version:Bk().optional()}),R$=function(){var e,t=(e=A$().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f;return A$().w(function(e){for(;;)switch(e.n){case 0:if(s=r.dependencies,l=D$.parse(t.data),u=PE(n,l,"worldName"),c=null!==(i=PE(n,l,"key"))&&void 0!==i?i:"",u){e.n=1;break}throw new Error("World name is required.");case 1:if(c){e.n=2;break}throw new Error("Key(s) are required.");case 2:return d={uid:-1,key:c.split(",").map(function(e){return e.trim()}),content:null!==(o=PE(n,l,"content"))&&void 0!==o?o:"",comment:null!==(a=PE(n,l,"comment"))&&void 0!==a?a:"",disable:!1,keysecondary:[]},e.n=3,s.applyWorldInfoEntry({entry:d,selectedWorldName:u,operation:"add"});case 3:return f=e.v,e.a(2,{result:f.entry})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){M$(o,r,i,a,s,"next",e)}function s(e){M$(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),Q$={type:"createLorebookEntryNode",label:"Create Lorebook Entry",category:"Lorebook",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=$$((0,T.useState)([]),2),s=a[0],l=a[1],u=SE.nodeDefinitionMap.get(r);(0,T.useEffect)(function(){br(["all"]).then(function(e){l(Object.keys(e))})},[]);var c=(0,T.useMemo)(function(){return s.map(function(e){return{value:e,label:e}})},[s]),d=(0,T.useMemo)(function(){return[{id:"worldName",label:"Lorebook Name",component:ur,props:{items:c,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}},{id:"key",label:"Keys (comma-separated)",component:N,props:{type:"text"}},{id:"comment",label:"Comment (Title)",component:N,props:{type:"text"}},{id:"content",label:"Content",component:I,props:{rows:2}}]},[c]);return i&&u?(0,$.jsxs)(QE,{id:t,title:"Create Lorebook Entry",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:u,type:"input",fields:d,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:u,type:"output"})})]}):null},dataSchema:D$,currentVersion:1,initialData:{worldName:"",key:"",content:"",comment:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"worldName",type:cE.LOREBOOK_NAME},{id:"key",type:cE.STRING},{id:"content",type:cE.STRING},{id:"comment",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.OBJECT,schema:C$}]},validate:c$(l$("worldName","Lorebook Name is required."),l$("key","Keys are required.")),execute:R$};SE.register(Q$);var z$=[{id:"worldName",label:"Lorebook Name",component:N,props:{type:"text"}}];function L$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Z$(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Z$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Z$(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Z$(d,"constructor",u),Z$(u,"constructor",l),l.displayName="GeneratorFunction",Z$(u,i,"GeneratorFunction"),Z$(d),Z$(d,i,"Generator"),Z$(d,r,function(){return this}),Z$(d,"toString",function(){return"[object Generator]"}),(L$=function(){return{w:o,m:f}})()}function Z$(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Z$=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Z$(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Z$(e,t,n,r)}function F$(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var U$=P_({worldName:qS().optional(),_version:Bk().optional()}),V$=function(){var e,t=(e=L$().m(function e(t,n,r){var i,o,a;return L$().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=U$.parse(t.data),a=PE(n,o,"worldName")){e.n=1;break}throw new Error("World name is required.");case 1:return e.n=2,i.st_createNewWorldInfo(a);case 2:if(e.v){e.n=3;break}throw new Error('Failed to create lorebook "'.concat(a,'". It might already exist.'));case 3:return e.a(2,{result:a})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){F$(o,r,i,a,s,"next",e)}function s(e){F$(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),G$={type:"createLorebookNode",label:"Create Lorebook",category:"Lorebook",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Create Lorebook",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:z$,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:U$,currentVersion:1,initialData:{worldName:"My Lorebook"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"worldName",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.LOREBOOK_NAME}]},validate:c$(l$("worldName","Lorebook Name is required.")),execute:V$};SE.register(G$);function B$(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return X$(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(X$(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,X$(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,X$(d,"constructor",u),X$(u,"constructor",l),l.displayName="GeneratorFunction",X$(u,i,"GeneratorFunction"),X$(d),X$(d,i,"Generator"),X$(d,r,function(){return this}),X$(d,"toString",function(){return"[object Generator]"}),(B$=function(){return{w:o,m:f}})()}function X$(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}X$=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){X$(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},X$(e,t,n,r)}function Y$(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var W$=P_({profileId:qS().optional(),startMessageId:Bk().optional(),endMessageId:Bk().optional(),ignoreCharacterFields:e_().default(!1),ignoreAuthorNote:e_().default(!1),ignoreWorldInfo:e_().default(!1),_version:Bk().optional()}),q$=function(){var e,t=(e=B$().m(function e(t,n,r){var i,o,a,s,l;return B$().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=W$.parse(t.data),a=PE(n,o,"profileId")){e.n=1;break}throw new Error("Profile ID not provided.");case 1:return s={startMessageId:PE(n,o,"startMessageId"),endMessageId:PE(n,o,"endMessageId"),ignoreCharacterFields:PE(n,o,"ignoreCharacterFields"),ignoreAuthorNote:PE(n,o,"ignoreAuthorNote"),ignoreWorldInfo:PE(n,o,"ignoreWorldInfo")},e.n=2,i.getBaseMessagesForProfile(a,s);case 2:return l=e.v,e.a(2,{result:l})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Y$(o,r,i,a,s,"next",e)}function s(e){Y$(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),H$={type:"createMessagesNode",label:"Create Messages",category:"API Request",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=(0,T.useMemo)(function(){return[{id:"profileId",label:"Connection Profile",component:ce,props:{initialSelectedProfileId:null==i?void 0:i.profileId},customChangeHandler:function(e){o(t,{profileId:(null==e?void 0:e.id)||""})}},{id:"startMessageId",label:"Start Message ID (Optional)",component:N,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}},{id:"endMessageId",label:"End Message ID (Optional)",component:N,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}},{id:"ignoreCharacterFields",label:"Ignore Character Fields",component:N,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}},{id:"ignoreAuthorNote",label:"Ignore Author Note",component:N,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}},{id:"ignoreWorldInfo",label:"Ignore World Info",component:N,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}}]},[null==i?void 0:i.profileId,t,o]);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Create Messages",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:s,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:W$,currentVersion:1,initialData:{profileId:"",ignoreCharacterFields:!1,ignoreAuthorNote:!1,ignoreWorldInfo:!1},handles:{inputs:[{id:"main",type:cE.ANY},{id:"profileId",type:cE.PROFILE_ID},{id:"startMessageId",type:cE.NUMBER},{id:"endMessageId",type:cE.NUMBER},{id:"ignoreCharacterFields",type:cE.BOOLEAN},{id:"ignoreAuthorNote",type:cE.BOOLEAN},{id:"ignoreWorldInfo",type:cE.BOOLEAN}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.MESSAGES}]},validate:c$(l$("profileId","Connection Profile is required.")),execute:q$};SE.register(H$);const K$={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let J$;const eT=new Uint8Array(16);const tT=[];for(let e=0;e<256;++e)tT.push((e+256).toString(16).slice(1));function nT(e,t=0){return(tT[e[t+0]]+tT[e[t+1]]+tT[e[t+2]]+tT[e[t+3]]+"-"+tT[e[t+4]]+tT[e[t+5]]+"-"+tT[e[t+6]]+tT[e[t+7]]+"-"+tT[e[t+8]]+tT[e[t+9]]+"-"+tT[e[t+10]]+tT[e[t+11]]+tT[e[t+12]]+tT[e[t+13]]+tT[e[t+14]]+tT[e[t+15]]).toLowerCase()}function rT(e,t,n){const r=(e=e||{}).random??e.rng?.()??function(){if(!J$){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");J$=crypto.getRandomValues.bind(crypto)}return J$(eT)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return nT(r)}const iT=function(e,t,n){return!K$.randomUUID||t||e?rT(e,t,n):K$.randomUUID()};function oT(){return iT()}function aT(e){return aT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aT(e)}function sT(e){return function(e){if(Array.isArray(e))return lT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return lT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lT(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(t){dT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=aT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=aT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fT(e){return fT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fT(e)}function hT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return pT(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(pT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,pT(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,pT(d,"constructor",u),pT(u,"constructor",l),l.displayName="GeneratorFunction",pT(u,i,"GeneratorFunction"),pT(d),pT(d,i,"Generator"),pT(d,r,function(){return this}),pT(d,"toString",function(){return"[object Generator]"}),(hT=function(){return{w:o,m:f}})()}function pT(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}pT=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){pT(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},pT(e,t,n,r)}function mT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=fT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gT(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var vT=P_({messages:S_(P_({id:qS(),role:G_(["system","user","assistant"]),content:qS()})),_version:Bk().optional()}),yT=function(){var e,t=(e=hT().m(function e(t,n){var r,i;return hT().w(function(e){for(;;)if(0===e.n)return r=vT.parse(t.data),i=r.messages.map(function(e){var t=e.id,r=e.role,i=e.content;return{role:PE(n,mT({},"".concat(t,"_role"),r),"".concat(t,"_role")),content:PE(n,mT({},t,i),t)}}),e.a(2,{result:i})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){gT(o,r,i,a,s,"next",e)}function s(e){gT(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),bT={type:"customMessageNode",label:"Custom Message",category:"API Request",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=qf(),s=SE.nodeDefinitionMap.get(r);if(!i||!s)return null;var l=function(e,n,r){var a=i.messages.map(function(t){return t.id===e?cT(cT({},t),{},dT({},n,r)):t});o(t,{messages:a})},u=function(e){return a.some(function(n){return n.target===t&&n.targetHandle===e})};return(0,$.jsxs)(QE,{id:t,title:"Custom Messages",selected:n,children:[(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(i.messages||[]).map(function(e){return(0,$.jsxs)("div",{style:{border:"1px solid #555",padding:"5px",borderRadius:"4px"},children:[(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[(0,$.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,$.jsx)(Ad,{type:"target",position:vl.Left,id:"".concat(e.id,"_role"),style:{top:"50%",transform:"translateY(-50%)"}}),u("".concat(e.id,"_role"))?(0,$.jsx)("span",{style:{marginLeft:"10px",fontSize:"10px",color:"#888"},children:"Role from connection"}):(0,$.jsxs)(A,{className:"nodrag",value:e.role,onChange:function(t){return l(e.id,"role",t.target.value)},children:[(0,$.jsx)("option",{value:"system",children:"system"}),(0,$.jsx)("option",{value:"user",children:"user"}),(0,$.jsx)("option",{value:"assistant",children:"assistant"})]})]}),(0,$.jsx)(j,{onClick:function(){return n=e.id,r=i.messages.filter(function(e){return e.id!==n}),void o(t,{messages:r});var n,r},children:"Remove"})]}),(0,$.jsxs)("div",{style:{position:"relative"},children:[(0,$.jsx)(Ad,{type:"target",position:vl.Left,id:e.id,style:{top:"50%",transform:"translateY(-50%)"}}),u(e.id)?(0,$.jsx)("span",{style:{marginLeft:"10px",fontSize:"10px",color:"#888"},children:"Content from connection"}):(0,$.jsx)(I,{className:"nodrag",value:e.content,onChange:function(t){return l(e.id,"content",t.target.value)},rows:3,style:{width:"100%"}})]})]},e.id)}),(0,$.jsx)(j,{className:"nodrag",onClick:function(){var e={id:oT(),role:"user",content:""};o(t,{messages:[].concat(sT(i.messages||[]),[e])})},style:{marginTop:"5px"},children:"Add Message"})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:s,type:"output"})})]})},dataSchema:vT,currentVersion:1,initialData:{messages:[{id:oT(),role:"system",content:"You are a helpful assistant."}]},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.MESSAGES}]},execute:yT,getDynamicHandles:function(e){return{inputs:(e.data.messages||[]).flatMap(function(e){return[{id:e.id,type:cE.STRING},{id:"".concat(e.id,"_role"),type:cE.STRING}]}),outputs:[]}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("input"===n&&t){var i=t.endsWith("_role")?t.slice(0,-5):t;if(r.data.messages.some(function(e){return e.id===i}))return cE.STRING}}};SE.register(bT);var OT=[{id:"format",label:"Format (Optional)",component:N,props:{placeholder:"Default: ISO String",type:"text"}}];function wT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return xT(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(xT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,xT(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,xT(d,"constructor",u),xT(u,"constructor",l),l.displayName="GeneratorFunction",xT(u,i,"GeneratorFunction"),xT(d),xT(d,i,"Generator"),xT(d,r,function(){return this}),xT(d,"toString",function(){return"[object Generator]"}),(wT=function(){return{w:o,m:f}})()}function xT(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}xT=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){xT(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},xT(e,t,n,r)}function ST(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var kT=P_({format:qS().optional(),_version:Bk().optional()});function _T(e){return String(e).padStart(2,"0")}function PT(e,t){var n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l={YYYY:String(n),yyyy:String(n),YY:String(n).slice(-2),MM:_T(r),M:String(r),DD:_T(i),D:String(i),HH:_T(o),H:String(o),mm:_T(a),m:String(a),ss:_T(s),s:String(s)};return t.replace(/YYYY|yyyy|YY|MM|M|DD|D|HH|H|mm|m|ss|s/g,function(e){return l[e]})}var ET=function(){var e,t=(e=wT().m(function e(t,n){var r,i,o;return wT().w(function(e){for(;;)if(0===e.n)return r=kT.parse(t.data),i=new Date,o=PE(n,r,"format"),e.a(2,{iso:i.toISOString(),timestamp:i.getTime(),year:i.getFullYear(),month:i.getMonth()+1,day:i.getDate(),hour:i.getHours(),minute:i.getMinutes(),second:i.getSeconds(),formatted:o?PT(i,o):i.toISOString()})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){ST(o,r,i,a,s,"next",e)}function s(e){ST(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),$T={type:"dateTimeNode",label:"Date/Time",category:"Utility",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Date/Time",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:OT,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:kT,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:cE.ANY},{id:"format",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"iso",type:cE.STRING},{id:"formatted",type:cE.STRING},{id:"timestamp",type:cE.NUMBER},{id:"year",type:cE.NUMBER},{id:"month",type:cE.NUMBER},{id:"day",type:cE.NUMBER},{id:"hour",type:cE.NUMBER},{id:"minute",type:cE.NUMBER},{id:"second",type:cE.NUMBER}]},execute:ET};SE.register($T);function TT(e){return TT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TT(e)}function CT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return jT(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(jT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,jT(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,jT(d,"constructor",u),jT(u,"constructor",l),l.displayName="GeneratorFunction",jT(u,i,"GeneratorFunction"),jT(d),jT(d,i,"Generator"),jT(d,r,function(){return this}),jT(d,"toString",function(){return"[object Generator]"}),(CT=function(){return{w:o,m:f}})()}function jT(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}jT=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){jT(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},jT(e,t,n,r)}function NT(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AT(Object(n),!0).forEach(function(t){MT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=TT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=TT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DT=P_(IT(IT({},{name:qS().optional(),description:qS().optional(),first_mes:qS().optional(),scenario:qS().optional(),personality:qS().optional(),mes_example:qS().optional(),tags:qS().optional()}),{},{characterAvatar:qS().default(""),_version:Bk().optional()})),RT=function(){var e,t=(e=CT().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f;return CT().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=DT.parse(t.data),a=PE(n,o,"characterAvatar")){e.n=1;break}throw new Error("Character avatar is required.");case 1:if(s=i.getSillyTavernContext(),l=s.characters.find(function(e){return e.avatar===a})){e.n=2;break}throw new Error('Character with avatar "'.concat(a,'" not found.'));case 2:if(u=["name","description","first_mes","scenario","personality","mes_example"],c={avatar:l.avatar},d=!1,u.forEach(function(e){var t=PE(n,o,e);t&&(c[e]=t,c.data||(c.data={}),c.data[e]=t,d=!0)}),(f=PE(n,o,"tags"))&&(c.tags=f.split(",").map(function(e){return e.trim()}).filter(Boolean),d=!0),d){e.n=3;break}throw new Error("No changes provided to update the character.");case 3:return e.n=4,i.saveCharacter(c);case 4:return e.a(2,{result:l.name})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){NT(o,r,i,a,s,"next",e)}function s(e){NT(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),QT={type:"editCharacterNode",label:"Edit Character",category:"Character",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SillyTavern.getContext().characters,s=SE.nodeDefinitionMap.get(r),l=(0,T.useMemo)(function(){return a.map(function(e){return{value:e.avatar,label:e.name}})},[a]),u=(0,T.useMemo)(function(){return[{id:"characterAvatar",label:"Character to Edit",component:ur,props:{items:l,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}},{id:"name",label:"New Name",component:N,props:{type:"text"}},{id:"description",label:"Description",component:I,props:{rows:2}},{id:"first_mes",label:"First Message",component:I,props:{rows:2}},{id:"scenario",label:"Scenario",component:I,props:{rows:2}},{id:"personality",label:"Personality",component:I,props:{rows:2}},{id:"mes_example",label:"Message Examples",component:I,props:{rows:2}},{id:"tags",label:"Tags (comma-separated)",component:N,props:{type:"text"}}]},[l]);return i&&s?(0,$.jsxs)(QE,{id:t,title:"Edit Character",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:s,type:"input",fields:u,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:s,type:"output"})})]}):null},dataSchema:DT,currentVersion:1,initialData:{characterAvatar:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"characterAvatar",type:cE.CHARACTER_AVATAR},{id:"name",type:cE.STRING},{id:"description",type:cE.STRING},{id:"first_mes",type:cE.STRING},{id:"scenario",type:cE.STRING},{id:"personality",type:cE.STRING},{id:"mes_example",type:cE.STRING},{id:"tags",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.STRING}]},validate:c$(l$("characterAvatar","Character to Edit is required.")),execute:RT};SE.register(QT);var zT=[{id:"messageId",label:"Message ID",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"message",label:"New Message Content",component:I,props:{rows:3}}];function LT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return ZT(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(ZT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ZT(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,ZT(d,"constructor",u),ZT(u,"constructor",l),l.displayName="GeneratorFunction",ZT(u,i,"GeneratorFunction"),ZT(d),ZT(d,i,"Generator"),ZT(d,r,function(){return this}),ZT(d,"toString",function(){return"[object Generator]"}),(LT=function(){return{w:o,m:f}})()}function ZT(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}ZT=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){ZT(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},ZT(e,t,n,r)}function FT(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var UT=P_({messageId:Bk().optional(),message:qS().default(""),_version:Bk().optional()}),VT=function(){var e,t=(e=LT().m(function e(t,n,r){var i,o,a,s,l,u,c;return LT().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=UT.parse(t.data),a=PE(n,o,"messageId"),s=PE(n,o,"message"),void 0!==a){e.n=1;break}throw new Error("Message ID is required.");case 1:if(void 0!==s){e.n=2;break}throw new Error("New message content is required.");case 2:if(l=i.getSillyTavernContext(),u=l.chat,c=u[a]){e.n=3;break}throw new Error("Message with ID ".concat(a," not found."));case 3:return c.mes=s,i.st_updateMessageBlock(a,c),e.n=4,i.saveChat();case 4:return e.a(2,{messageObject:structuredClone(c),message:s})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){FT(o,r,i,a,s,"next",e)}function s(e){FT(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),GT={type:"editChatMessageNode",label:"Edit Chat Message",category:"Chat",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Edit Chat Message",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:zT,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:UT,currentVersion:1,initialData:{message:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"messageId",type:cE.NUMBER},{id:"message",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"messageObject",type:cE.OBJECT,schema:N$},{id:"message",type:cE.STRING}]},validate:c$(l$("messageId","Message ID is required."),l$("message","New Message Content is required.")),execute:VT};function BT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return XT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XT(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(GT);function YT(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return WT(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(WT(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,WT(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,WT(d,"constructor",u),WT(u,"constructor",l),l.displayName="GeneratorFunction",WT(u,i,"GeneratorFunction"),WT(d),WT(d,i,"Generator"),WT(d,r,function(){return this}),WT(d,"toString",function(){return"[object Generator]"}),(YT=function(){return{w:o,m:f}})()}function WT(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}WT=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){WT(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},WT(e,t,n,r)}function qT(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var HT=P_({worldName:qS().optional(),entryUid:Bk().optional(),key:qS().optional(),content:qS().optional(),comment:qS().optional(),_version:Bk().optional()}),KT=function(){var e,t=(e=YT().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h,p;return YT().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=HT.parse(t.data),a=PE(n,o,"worldName"),s=PE(n,o,"entryUid"),a){e.n=1;break}throw new Error("World name is required to find the entry.");case 1:if(void 0!==s){e.n=2;break}throw new Error("Entry UID is required to identify the entry to edit.");case 2:return e.n=3,i.getWorldInfos(["all"]);case 3:if(l=e.v,u=l[a]){e.n=4;break}throw new Error('Lorebook "'.concat(a,'" not found.'));case 4:if(c=u.find(function(e){return e.uid===s})){e.n=5;break}throw new Error('Entry with UID "'.concat(s,'" not found in "').concat(a,'".'));case 5:return(d=PE(n,o,"key"))&&(c.key=d.split(",").map(function(e){return e.trim()})),(f=PE(n,o,"content"))&&(c.content=f),(h=PE(n,o,"comment"))&&(c.comment=h),e.n=6,i.applyWorldInfoEntry({entry:c,selectedWorldName:a,operation:"update"});case 6:return p=e.v,e.a(2,{result:p.entry})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){qT(o,r,i,a,s,"next",e)}function s(e){qT(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),JT={type:"editLorebookEntryNode",label:"Edit Lorebook Entry",category:"Lorebook",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=BT((0,T.useState)({}),2),s=a[0],l=a[1],u=SE.nodeDefinitionMap.get(r);(0,T.useEffect)(function(){br(["all"]).then(function(e){l(e)})},[]);var c=(0,T.useMemo)(function(){return Object.keys(s).map(function(e){return{value:e,label:e}})},[s]),d=(0,T.useMemo)(function(){return null!=i&&i.worldName&&s[i.worldName]?s[i.worldName].map(function(e){return{value:String(e.uid),label:e.comment||"Entry UID: ".concat(e.uid)}}):[]},[null==i?void 0:i.worldName,s]),f=(0,T.useMemo)(function(){return[{id:"worldName",label:"Lorebook Name",component:ur,props:{items:c,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{worldName:e[0],entryUid:void 0})},formatValue:function(e){return[null!=e?e:""]}},{id:"entryUid",label:"Entry to Edit",component:ur,props:{items:d,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0,disabled:!(null!=i&&i.worldName)},getValueFromEvent:function(e){return Number(e[0])},formatValue:function(e){return[String(null!=e?e:"")]}},{id:"key",label:"New Keys (comma-separated)",component:N,props:{type:"text"}},{id:"comment",label:"New Comment (Title)",component:N,props:{type:"text"}},{id:"content",label:"New Content",component:I,props:{rows:2}}]},[c,d,null==i?void 0:i.worldName]);return i&&u?(0,$.jsxs)(QE,{id:t,title:"Edit Lorebook Entry",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:u,type:"input",fields:f,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:u,type:"output"})})]}):null},dataSchema:HT,currentVersion:1,initialData:{worldName:"",entryUid:void 0},handles:{inputs:[{id:"main",type:cE.ANY},{id:"worldName",type:cE.LOREBOOK_NAME},{id:"entryUid",type:cE.NUMBER},{id:"key",type:cE.STRING},{id:"content",type:cE.STRING},{id:"comment",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.OBJECT,schema:C$}]},validate:c$(l$("worldName","Lorebook Name is required."),l$("entryUid","Entry to Edit is required.")),execute:KT};SE.register(JT);function eC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return tC(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(tC(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,tC(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,tC(d,"constructor",u),tC(u,"constructor",l),l.displayName="GeneratorFunction",tC(u,i,"GeneratorFunction"),tC(d),tC(d,i,"Generator"),tC(d,r,function(){return this}),tC(d,"toString",function(){return"[object Generator]"}),(eC=function(){return{w:o,m:f}})()}function tC(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}tC=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){tC(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},tC(e,t,n,r)}function nC(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var rC=Symbol("FlowTerminationSentinel"),iC=P_({_version:Bk().optional()}),oC=function(){var e,t=(e=eC().m(function e(){return eC().w(function(e){for(;;)if(0===e.n)return e.a(2,rC)},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){nC(o,r,i,a,s,"next",e)}function s(e){nC(o,r,i,a,s,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}(),aC={type:"endNode",label:"End Flow",category:"Logic",component:function(e){var t=e.id,n=e.selected,r=e.type,i=SE.nodeDefinitionMap.get(r);return i?(0,$.jsxs)(QE,{id:t,title:"End Flow",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:i,type:"input"}),(0,$.jsx)("div",{style:{padding:"10px 0",textAlign:"center",color:"#aaa"},children:"Execution stops here."})]}):null},dataSchema:iC,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[]},execute:oC};function sC(){return sC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sC.apply(null,arguments)}SE.register(aC);let lC=[],uC=[];function cC(e){if(e<768)return!1;for(let t=0,n=lC.length;;){let r=t+n>>1;if(e<lC[r])n=r;else{if(!(e>=uC[r]))return!0;t=r+1}if(t==n)return!1}}function dC(e){return e>=127462&&e<=127487}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,n=0;t<e.length;t++)(t%2?uC:lC).push(n+=e[t])})();function fC(e,t,n=!0,r=!0){return(n?hC:pC)(e,t,r)}function hC(e,t,n){if(t==e.length)return t;t&&gC(e.charCodeAt(t))&&vC(e.charCodeAt(t-1))&&t--;let r=mC(e,t);for(t+=yC(r);t<e.length;){let i=mC(e,t);if(8205==r||8205==i||n&&cC(i))t+=yC(i),r=i;else{if(!dC(i))break;{let n=0,r=t-2;for(;r>=0&&dC(mC(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function pC(e,t,n){for(;t>0;){let r=hC(e,t-2,n);if(r<t)return r;t--}return 0}function mC(e,t){let n=e.charCodeAt(t);if(!vC(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return gC(r)?r-56320+(n-55296<<10)+65536:n}function gC(e){return e>=56320&&e<57344}function vC(e){return e>=55296&&e<56320}function yC(e){return e<65536?1:2}class bC{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=$C(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),wC.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=$C(this,e,t);let n=[];return this.decompose(e,t,n,0),wC.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new kC(this),i=new kC(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new kC(this,e)}iterRange(e,t=this.length){return new _C(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new PC(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new OC(e):wC.from(OC.split(e,[])):bC.empty}}class OC extends bC{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],a=r+o.length;if((t?n:a)>=e)return new EC(r,a,n,o);r=a+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new OC(SC(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=xC(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new OC(t,e.length+i.length));else{let e=t.length>>1;n.push(new OC(t.slice(0,e)),new OC(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof OC))return super.replace(e,t,n);[e,t]=$C(this,e,t);let r=xC(this.text,xC(n.text,SC(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new OC(r,i):wC.from(OC.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){[e,t]=$C(this,e,t);let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let a=this.text[o],s=i+a.length;i>e&&o&&(r+=n),e<s&&t>i&&(r+=a.slice(Math.max(0,e-i),t-i)),i=s+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new OC(n,r)),n=[],r=-1);return r>-1&&t.push(new OC(n,r)),t}}class wC extends bC{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],a=r+o.length,s=n+o.lines-1;if((t?s:a)>=e)return o.lineInner(e,t,n,r);r=a+1,n=s+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let a=this.children[i],s=o+a.length;if(e<=s&&t>=o){let i=r&((o<=e?1:0)|(s>=t?2:0));o>=e&&s<=t&&!i?n.push(a):a.decompose(e-o,t-o,n,i)}o=s+1}}replace(e,t,n){if([e,t]=$C(this,e,t),n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.length;if(e>=i&&t<=a){let s=o.replace(e-i,t-i,n),l=this.lines-o.lines+s.lines;if(s.lines<l>>4&&s.lines>l>>6){let i=this.children.slice();return i[r]=s,new wC(i,this.length-(t-e)+n.length)}return super.replace(i,a,s)}i=a+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){[e,t]=$C(this,e,t);let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let a=this.children[i],s=o+a.length;o>e&&i&&(r+=n),e<s&&t>o&&(r+=a.sliceString(e-o,t-o,n)),o=s+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof wC))return 0;let n=0,[r,i,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==a)return n;let s=this.children[r],l=e.children[i];if(s!=l)return n+s.scanIdentical(l,t);n+=s.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new OC(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,a=[],s=0,l=-1,u=[];function c(e){let t;if(e.lines>i&&e instanceof wC)for(let t of e.children)c(t);else e.lines>o&&(s>o||!s)?(d(),a.push(e)):e instanceof OC&&s&&(t=u[u.length-1])instanceof OC&&e.lines+t.lines<=32?(s+=e.lines,l+=e.length+1,u[u.length-1]=new OC(t.text.concat(e.text),t.length+1+e.length)):(s+e.lines>r&&d(),s+=e.lines,l+=e.length+1,u.push(e))}function d(){0!=s&&(a.push(1==u.length?u[0]:wC.from(u,l)),l=-1,s=u.length=0)}for(let t of e)c(t);return d(),1==a.length?a[0]:new wC(a,t)}}function xC(e,t,n=0,r=1e9){for(let i=0,o=0,a=!0;o<e.length&&i<=r;o++){let s=e[o],l=i+s.length;l>=n&&(l>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),a?(t[t.length-1]+=s,a=!1):t.push(s)),i=l+1}return t}function SC(e,t,n){return xC(e,[""],t,n)}bC.empty=new OC([""],0);class kC{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof OC?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,a=r instanceof OC?r.text.length:r.children.length;if(o==(t>0?a:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof OC){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof OC?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class _C{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new kC(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class PC{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(bC.prototype[Symbol.iterator]=function(){return this.iter()},kC.prototype[Symbol.iterator]=_C.prototype[Symbol.iterator]=PC.prototype[Symbol.iterator]=function(){return this});class EC{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function $C(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}function TC(e,t,n=!0,r=!0){return fC(e,t,n,r)}function CC(e,t){let n=e.charCodeAt(t);if(!(r=n,r>=55296&&r<56320&&t+1!=e.length))return n;var r;let i=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(i)?i-56320+(n-55296<<10)+65536:n}function jC(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function NC(e){return e<65536?1:2}const AC=/\r\n?|\n/;var IC=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(IC||(IC={}));class MC{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){zC(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new MC(e)}composeDesc(e){return this.empty?e:e.empty?this:ZC(this,e)}mapDesc(e,t=!1){return e.empty?this:LC(this,e,t)}mapPos(e,t=-1,n=IC.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],s=this.sections[o++],l=r+a;if(s<0){if(l>e)return i+(e-r);i+=a}else{if(n!=IC.Simple&&l>=e&&(n==IC.TrackDel&&r<e&&l>e||n==IC.TrackBefore&&r<e||n==IC.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!a)return e==r||t<0?i:i+s;i+=s}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeDesc");return new MC(e)}static create(e){return new MC(e)}}class DC extends MC{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return zC(this,(t,n,r,i,o)=>e=e.replace(r,r+(n-t),o),!1),e}mapDesc(e,t=!1){return LC(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=o;let s=r>>1;for(;n.length<s;)n.push(bC.empty);n.push(o?e.slice(i,i+o):bC.empty)}i+=o}return new DC(t,n)}compose(e){return this.empty?e:e.empty?this:ZC(this,e,!0)}map(e,t=!1){return e.empty?this:LC(this,e,t,!0)}iterChanges(e,t=!1){zC(this,e,t)}get desc(){return MC.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new FC(this);e:for(let o=0,a=0;;){let s=o==e.length?1e9:e[o++];for(;a<s||a==s&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,s-a);RC(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;RC(t,e,o),o>0&&QC(n,t,i.text),i.forward(e),a+=e}let l=e[o++];for(;a<l;){if(i.done)break e;let e=Math.min(i.len,l-a);RC(t,e,-1),RC(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),a+=e}}return{changes:new DC(t,n),filtered:MC.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,a=null;function s(e=!1){if(!e&&!r.length)return;o<t&&RC(r,t-o,-1);let n=new DC(r,i);a=a?a.compose(n.map(a)):n,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof DC){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);s(),a=a?a.compose(l.map(a)):l}else{let{from:e,to:a=e,insert:u}=l;if(e>a||e<0||a>t)throw new RangeError(`Invalid change range ${e} to ${a} (in doc of length ${t})`);let c=u?"string"==typeof u?bC.of(u.split(n||AC)):u:bC.empty,d=c.length;if(e==a&&0==d)return;e<o&&s(),e>o&&RC(r,e-o,-1),RC(r,a-e,d),QC(i,r,c),o=a}}(e),s(!a),a}static empty(e){return new DC(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some((e,t)=>t&&"string"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(bC.empty);n[r]=bC.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new DC(t,n)}static createSet(e,t){return new DC(e,t)}}function RC(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:i>=0&&0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function QC(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(bC.empty);e.push(n)}}function zC(e,t,n){let r=e.inserted;for(let i=0,o=0,a=0;a<e.sections.length;){let s=e.sections[a++],l=e.sections[a++];if(l<0)i+=s,o+=s;else{let u=i,c=o,d=bC.empty;for(;u+=s,c+=l,l&&r&&(d=d.append(r[a-2>>1])),!(n||a==e.sections.length||e.sections[a+1]<0);)s=e.sections[a++],l=e.sections[a++];t(i,u,o,c,d),i=u,o=c}}}function LC(e,t,n,r=!1){let i=[],o=r?[]:null,a=new FC(e),s=new FC(t);for(let e=-1;;){if(a.done&&s.len||s.done&&a.len)throw new Error("Mismatched change set lengths");if(-1==a.ins&&-1==s.ins){let e=Math.min(a.len,s.len);RC(i,e,-1),a.forward(e),s.forward(e)}else if(s.ins>=0&&(a.ins<0||e==a.i||0==a.off&&(s.len<a.len||s.len==a.len&&!n))){let t=s.len;for(RC(i,s.ins,-1);t;){let n=Math.min(a.len,t);a.ins>=0&&e<a.i&&a.len<=n&&(RC(i,0,a.ins),o&&QC(o,i,a.text),e=a.i),a.forward(n),t-=n}s.next()}else{if(!(a.ins>=0)){if(a.done&&s.done)return o?DC.createSet(i,o):MC.create(i);throw new Error("Mismatched change set lengths")}{let t=0,n=a.len;for(;n;)if(-1==s.ins){let e=Math.min(n,s.len);t+=e,n-=e,s.forward(e)}else{if(!(0==s.ins&&s.len<n))break;n-=s.len,s.next()}RC(i,t,e<a.i?a.ins:0),o&&e<a.i&&QC(o,i,a.text),e=a.i,a.forward(a.len-n)}}}}function ZC(e,t,n=!1){let r=[],i=n?[]:null,o=new FC(e),a=new FC(t);for(let e=!1;;){if(o.done&&a.done)return i?DC.createSet(r,i):MC.create(r);if(0==o.ins)RC(r,o.len,0,e),o.next();else if(0!=a.len||a.done){if(o.done||a.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,a.len),n=r.length;if(-1==o.ins){let n=-1==a.ins?-1:a.off?0:a.ins;RC(r,t,n,e),i&&n&&QC(i,r,a.text)}else-1==a.ins?(RC(r,o.off?0:o.len,t,e),i&&QC(i,r,o.textBit(t))):(RC(r,o.off?0:o.len,a.off?0:a.ins,e),i&&!a.off&&QC(i,r,a.text));e=(o.ins>t||a.ins>=0&&a.len>t)&&(e||r.length>n),o.forward2(t),a.forward(t)}}else RC(r,0,a.ins,e),i&&QC(i,r,a.text),a.next()}}class FC{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?bC.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?bC.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class UC{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new UC(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return VC.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return VC.range(this.anchor,n)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return VC.range(e.anchor,e.head)}static create(e,t,n){return new UC(e,t,n)}}class VC{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:VC.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new VC([this.main],0)}addRange(e,t=!0){return VC.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,VC.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new VC(e.ranges.map(e=>UC.fromJSON(e)),e.main)}static single(e,t=e){return new VC([VC.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return VC.normalized(e.slice(),t);n=i.to}return new VC(e,t)}static cursor(e,t=0,n,r){return UC.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!=r?r:16777215)<<6)}static range(e,t,n,r){let i=(null!=n?n:16777215)<<6|(null==r?7:Math.min(6,r));return t<e?UC.create(t,e,48|i):UC.create(e,t,(t>e?8:0)|i)}static normalized(e,t=0){let n=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,a=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?VC.range(a,o):VC.range(o,a))}}return new VC(e,t)}}function GC(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let BC=0;class XC{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=BC++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(e={}){return new XC(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:YC),!!e.static,e.enables)}of(e){return new WC([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new WC(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new WC(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],n=>t(n.field(e)))}}function YC(e,t){return e==t||e.length==t.length&&e.every((e,n)=>e===t[n])}class WC{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=BC++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,a=2==this.type,s=!1,l=!1,u=[];for(let n of this.dependencies)"doc"==n?s=!0:"selection"==n?l=!0:1&(null!==(t=e[n.id])&&void 0!==t?t:1)||u.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(s&&t.docChanged||l&&(t.docChanged||t.selection)||HC(e,u)){let t=n(e);if(a?!qC(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let s,l=t.config.address[i];if(null!=l){let i=fj(t,l);if(this.dependencies.every(n=>n instanceof XC?t.facet(n)===e.facet(n):!(n instanceof ej)||t.field(n,!1)==e.field(n,!1))||(a?qC(s=n(e),i,r):r(s=n(e),i)))return e.values[o]=i,0}else s=n(e);return e.values[o]=s,1}}}}function qC(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function HC(e,t){let n=!1;for(let r of t)1&dj(e,r)&&(n=!0);return n}function KC(e,t,n){let r=n.map(t=>e[t.id]),i=n.map(e=>e.type),o=r.filter(e=>!(1&e)),a=e[t.id]>>1;function s(e){let n=[];for(let t=0;t<r.length;t++){let o=fj(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)dj(e,t);return e.values[a]=s(e),1},update(e,n){if(!HC(e,o))return 0;let r=s(e);return t.compare(r,e.values[a])?0:(e.values[a]=r,1)},reconfigure(e,i){let o=HC(e,r),l=i.config.facets[t.id],u=i.facet(t);if(l&&!o&&YC(n,l))return e.values[a]=u,0;let c=s(e);return t.compare(c,u)?(e.values[a]=u,0):(e.values[a]=c,1)}}}const JC=XC.define({static:!0});class ej{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new ej(BC++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(JC).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>{let r,i=e.facet(JC),o=n.facet(JC);return(r=i.find(e=>e.field==this))&&r!=o.find(e=>e.field==this)?(e.values[t]=r.create(e),1):null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,JC.of({field:this,create:e})]}get extension(){return this}}const tj=4,nj=3,rj=2,ij=1;function oj(e){return t=>new sj(t,e)}const aj={highest:oj(0),high:oj(ij),default:oj(rj),low:oj(nj),lowest:oj(tj)};class sj{constructor(e,t){this.inner=e,this.prec=t}}class lj{of(e){return new uj(this,e)}reconfigure(e){return lj.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class uj{constructor(e,t){this.compartment=e,this.inner=t}}class cj{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,a){let s=i.get(e);if(null!=s){if(s<=a)return;let t=r[s].indexOf(e);t>-1&&r[s].splice(t,1),e instanceof uj&&n.delete(e.compartment)}if(i.set(e,a),Array.isArray(e))for(let t of e)o(t,a);else if(e instanceof uj){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,a)}else if(e instanceof sj)o(e.inner,e.prec);else if(e instanceof ej)r[a].push(e),e.provides&&o(e.provides,a);else if(e instanceof WC)r[a].push(e),e.facet.extensions&&o(e.facet.extensions,rj);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,a)}}return o(e,rj),r.reduce((e,t)=>e.concat(t))}(e,t,o))n instanceof ej?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let a=Object.create(null),s=[],l=[];for(let e of r)a[e.id]=l.length<<1,l.push(t=>e.slot(t));let u=null==n?void 0:n.config.facets;for(let e in i){let t=i[e],r=t[0].facet,o=u&&u[e]||[];if(t.every(e=>0==e.type))if(a[r.id]=s.length<<1|1,YC(o,t))s.push(n.facet(r));else{let e=r.combine(t.map(e=>e.value));s.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(a[e.id]=s.length<<1|1,s.push(e.value)):(a[e.id]=l.length<<1,l.push(t=>e.dynamicSlot(t)));a[r.id]=l.length<<1,l.push(e=>KC(e,r,t))}}let c=l.map(e=>e(a));return new cj(e,o,c,a,s,i)}}function dj(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function fj(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const hj=XC.define(),pj=XC.define({combine:e=>e.some(e=>e),static:!0}),mj=XC.define({combine:e=>e.length?e[0]:void 0,static:!0}),gj=XC.define(),vj=XC.define(),yj=XC.define(),bj=XC.define({combine:e=>!!e.length&&e[0]});class Oj{constructor(e,t){this.type=e,this.value=t}static define(){return new wj}}class wj{of(e){return new Oj(this,e)}}class xj{constructor(e){this.map=e}of(e){return new Sj(this,e)}}class Sj{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Sj(this.type,t)}is(e){return this.type==e}static define(e={}){return new xj(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Sj.reconfigure=Sj.define(),Sj.appendConfig=Sj.define();class kj{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&GC(n,t.newLength),i.some(e=>e.type==kj.time)||(this.annotations=i.concat(kj.time.of(Date.now())))}static create(e,t,n,r,i,o){return new kj(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(kj.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function _j(e,t){let n=[];for(let r=0,i=0;;){let o,a;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],a=e[r++];else{if(!(i<t.length))return n;o=t[i++],a=t[i++]}!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function Pj(e,t,n){var r;let i,o,a;return n?(i=t.changes,o=DC.empty(t.changes.length),a=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),a=e.changes.compose(i)),{changes:a,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:Sj.mapEffects(e.effects,i).concat(Sj.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Ej(e,t,n){let r=t.selection,i=Cj(t.annotations);return t.userEvent&&(i=i.concat(kj.userEvent.of(t.userEvent))),{changes:t.changes instanceof DC?t.changes:DC.of(t.changes||[],n,e.facet(mj)),selection:r&&(r instanceof VC?r:VC.single(r.anchor,r.head)),effects:Cj(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function $j(e,t,n){let r=Ej(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);let o=!!t[i].sequential;r=Pj(r,Ej(e,t[i],o?r.changes.newLength:e.doc.length),o)}let i=kj.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(yj),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=Pj(r,Ej(t,o,e.changes.newLength),!0))}return r==e?e:kj.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(gj)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:_j(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=DC.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.mapDesc(t.changes).invertedDesc}e=kj.create(t,r,e.selection&&e.selection.map(i),Sj.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(vj);for(let n=r.length-1;n>=0;n--){let i=r[n](e);e=i instanceof kj?i:Array.isArray(i)&&1==i.length&&i[0]instanceof kj?i[0]:$j(t,Cj(i),!1)}return e}(i):i)}kj.time=Oj.define(),kj.userEvent=Oj.define(),kj.addToHistory=Oj.define(),kj.remote=Oj.define();const Tj=[];function Cj(e){return null==e?Tj:Array.isArray(e)?e:[e]}var jj=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(jj||(jj={}));const Nj=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Aj;try{Aj=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function Ij(e){return t=>{if(!/\S/.test(t))return jj.Space;if(function(e){if(Aj)return Aj.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Nj.test(n)))return!0}return!1}(t))return jj.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return jj.Word;return jj.Other}}class Mj{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)dj(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return dj(this,n),fj(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return $j(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(lj.reconfigure)?(n&&(i=new Map,n.compartments.forEach((e,t)=>i.set(t,e)),n=null),i.set(t.value.compartment,t.value.extension)):t.is(Sj.reconfigure)?(n=null,r=t.value):t.is(Sj.appendConfig)&&(n=null,r=Cj(r).concat(t.value));if(n)t=e.startState.values.slice();else{n=cj.resolve(r,i,this),t=new Mj(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values}let o=e.startState.facet(pj)?e.newSelection:e.newSelection.asSingle();new Mj(n,e.newDoc,o,t,(t,n)=>n.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:VC.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=Cj(n.effects);for(let n=1;n<t.ranges.length;n++){let a=e(t.ranges[n]),s=this.changes(a.changes),l=s.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let u=r.mapDesc(s,!0);i.push(a.range.map(u)),r=r.compose(l),o=Sj.mapEffects(o,l).concat(Sj.mapEffects(Cj(a.effects),u))}return{changes:r,selection:VC.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof DC?e:DC.of(e,this.doc.length,this.facet(Mj.lineSeparator))}toText(e){return bC.of(e.split(this.facet(Mj.lineSeparator)||AC))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(dj(this,t),fj(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof ej&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let i=n[t],o=e[t];r.push(i.init(e=>i.spec.fromJSON(o,e)))}return Mj.create({doc:e.doc,selection:VC.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=cj.resolve(e.extensions||[],new Map),n=e.doc instanceof bC?e.doc:bC.of((e.doc||"").split(t.staticFacet(Mj.lineSeparator)||AC)),r=e.selection?e.selection instanceof VC?e.selection:VC.single(e.selection.anchor,e.selection.head):VC.single(0);return GC(r,n.length),t.staticFacet(pj)||(r=r.asSingle()),new Mj(t,n,r,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(Mj.tabSize)}get lineBreak(){return this.facet(Mj.lineSeparator)||"\n"}get readOnly(){return this.facet(bj)}phrase(e,...t){for(let t of this.facet(Mj.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(hj))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Ij(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,a=e-n;for(;o>0;){let e=TC(t,o,!1);if(i(t.slice(e,o))!=jj.Word)break;o=e}for(;a<r;){let e=TC(t,a);if(i(t.slice(a,e))!=jj.Word)break;a=e}return o==a?null:VC.range(o+n,a+n)}}function Dj(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,i)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}Mj.allowMultipleSelections=pj,Mj.tabSize=XC.define({combine:e=>e.length?e[0]:4}),Mj.lineSeparator=mj,Mj.readOnly=bj,Mj.phrases=XC.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(n=>e[n]==t[n])}}),Mj.languageData=hj,Mj.changeFilter=gj,Mj.transactionFilter=vj,Mj.transactionExtender=yj,lj.reconfigure=Sj.define();class Rj{eq(e){return this==e}range(e,t=e){return Qj.create(e,t,this)}}Rj.prototype.startSide=Rj.prototype.endSide=0,Rj.prototype.point=!1,Rj.prototype.mapMode=IC.TrackDel;class Qj{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Qj(e,t,n)}}function zj(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Lj{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,a=i.length;;){if(o==a)return o;let r=o+a>>1,s=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return s>=0?o:a;s>=0?a=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,a=-1;for(let s=0;s<this.value.length;s++){let l,u,c=this.value[s],d=this.from[s]+e,f=this.to[s]+e;if(d==f){let e=t.mapPos(d,c.startSide,c.mapMode);if(null==e)continue;if(l=u=e,c.startSide!=c.endSide&&(u=t.mapPos(d,c.endSide),u<l))continue}else if(l=t.mapPos(d,c.startSide),u=t.mapPos(f,c.endSide),l>u||l==u&&c.startSide>0&&c.endSide<=0)continue;(u-l||c.endSide-c.startSide)<0||(o<0&&(o=l),c.point&&(a=Math.max(a,u-l)),n.push(c),r.push(l-o),i.push(u-o))}return{mapped:n.length?new Lj(r,i,n,a):null,pos:o}}}class Zj{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Zj(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(zj)),this.isEmpty)return t.length?Zj.of(t):this;let a=new Vj(this,null,-1).goto(0),s=0,l=[],u=new Fj;for(;a.value||s<t.length;)if(s<t.length&&(a.from-t[s].from||a.startSide-t[s].value.startSide)>=0){let e=t[s++];u.addInner(e.from,e.to,e.value)||l.push(e)}else 1==a.rangeIndex&&a.chunkIndex<this.chunk.length&&(s==t.length||this.chunkEnd(a.chunkIndex)<t[s].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||i<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||i<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||l.push(Qj.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!l.length?Zj.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],a=this.chunk[i],s=e.touchesRange(o,o+a.length);if(!1===s)r=Math.max(r,a.maxPoint),t.push(a),n.push(e.mapPos(o));else if(!0===s){let{mapped:i,pos:s}=a.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(s))}}let i=this.nextLayer.map(e);return 0==t.length?i:new Zj(n,t,i||Zj.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return Gj.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Gj.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),a=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),s=Uj(o,a,n),l=new Xj(o,s,i),u=new Xj(a,s,i);n.iterGaps((e,t,n)=>Yj(l,e,u,t,n,r)),n.empty&&0==n.length&&Yj(l,0,u,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=999999999);let i=e.filter(e=>!e.isEmpty&&t.indexOf(e)<0),o=t.filter(t=>!t.isEmpty&&e.indexOf(t)<0);if(i.length!=o.length)return!1;if(!i.length)return!0;let a=Uj(i,o),s=new Xj(i,a,0).goto(n),l=new Xj(o,a,0).goto(n);for(;;){if(s.to!=l.to||!Wj(s.active,l.active)||s.point&&(!l.point||!s.point.eq(l.point)))return!1;if(s.to>r)return!0;s.next(),l.next()}}static spans(e,t,n,r,i=-1){let o=new Xj(e,null,i).goto(t),a=t,s=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),i=o.pointFrom<t?n.length+1:o.point.startSide<0?n.length:Math.min(n.length,s);r.point(a,e,o.point,n,i,o.pointRank),s=Math.min(o.openEnd(e),n.length)}else e>a&&(r.span(a,e,o.active,s),s=o.openEnd(e));if(o.to>n)return s+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(e,t=!1){let n=new Fj;for(let r of e instanceof Qj?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(zj(t,r)>0)return e.slice().sort(zj);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return Zj.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=Zj.empty;r=r.nextLayer)t=new Zj(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Zj.empty=new Zj([],[],null,-1),Zj.empty.nextLayer=Zj.empty;class Fj{finishChunk(e){this.chunks.push(new Lj(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Fj)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Zj.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Zj.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Uj(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(n?n.mapPos(o):o)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(o,o+e.chunk[t].length))||i.add(e.chunk[t])}return i}class Vj{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Gj{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new Vj(o,t,n,i));return 1==r.length?r[0]:new Gj(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Bj(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Bj(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Bj(this.heap,0)}}}function Bj(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class Xj{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Gj.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){qj(this.active,e),qj(this.activeTo,e),qj(this.activeRank,e),this.minActive=Kj(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&(i-this.activeRank[t]||r-this.activeTo[t])>0;)t++;Hj(this.active,t,n),Hj(this.activeTo,t,r),Hj(this.activeRank,t,i),e&&Hj(e,t,this.cursor.from),this.minActive=Kj(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&qj(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Yj(e,t,n,r,i,o){e.goto(t),n.goto(r);let a=r+i,s=r,l=r-t;for(;;){let t=e.to+l-n.to,r=t||e.endSide-n.endSide,i=r<0?e.to+l:n.to,u=Math.min(i,a);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Wj(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(s,u,e.point,n.point):u>s&&!Wj(e.active,n.active)&&o.compareRange(s,u,e.active,n.active),i>a)break;(t||e.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(i),s=i,r<=0&&e.next(),r>=0&&n.next()}}function Wj(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function qj(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function Hj(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function Kj(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function Jj(e,t,n=e.length){let r=0;for(let i=0;i<n&&i<e.length;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=TC(e,i));return r}function eN(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=TC(e,r)}return!0===r?-1:e.length}const tN="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),nN="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),rN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class iN{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,a){let s=[],l=/^@(\w+)\b/.exec(e[0]),u=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let a=t[n];if(/&/.test(n))i(n.split(/,\s*/).map(t=>e.map(e=>t.replace(/&/,e))).reduce((e,t)=>e.concat(t)),a,o);else if(a&&"object"==typeof a){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),a,s,u)}else null!=a&&s.push(n.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+a+";")}(s.length||u)&&o.push((!n||l||a?e:e.map(n)).join(", ")+" {"+s.join(" ")+"}")}for(let t in e)i(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=rN[tN]||1;return rN[tN]=e+1,"ͼ"+e.toString(36)}static mount(e,t,n){let r=e[nN],i=n&&n.nonce;r?i&&r.setNonce(i):r=new aN(e,i),r.mount(Array.isArray(t)?t:[t],e)}}let oN=new Map;class aN{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=oN.get(n);if(t)return e[nN]=t;this.sheet=new r.CSSStyleSheet,oN.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[nN]=this}mount(e,t){let n=this.sheet,r=0,i=0;for(let t=0;t<e.length;t++){let o=e[t],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),-1==a){if(this.modules.splice(i++,0,o),n)for(let e=0;e<o.rules.length;e++)n.insertRule(o.rules[e],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var sN={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},lN={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uN="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),cN="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),dN=0;dN<10;dN++)sN[48+dN]=sN[96+dN]=String(dN);for(dN=1;dN<=24;dN++)sN[dN+111]="F"+dN;for(dN=65;dN<=90;dN++)sN[dN]=String.fromCharCode(dN+32),lN[dN]=String.fromCharCode(dN);for(var fN in sN)lN.hasOwnProperty(fN)||(lN[fN]=sN[fN]);let hN="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},pN="undefined"!=typeof document?document:{documentElement:{style:{}}};const mN=/Edge\/(\d+)/.exec(hN.userAgent),gN=/MSIE \d/.test(hN.userAgent),vN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hN.userAgent),yN=!!(gN||vN||mN),bN=!yN&&/gecko\/(\d+)/i.test(hN.userAgent),ON=!yN&&/Chrome\/(\d+)/.exec(hN.userAgent),wN="webkitFontSmoothing"in pN.documentElement.style,xN=!yN&&/Apple Computer/.test(hN.vendor),SN=xN&&(/Mobile\/\w+/.test(hN.userAgent)||hN.maxTouchPoints>2);var kN={mac:SN||/Mac/.test(hN.platform),windows:/Win/.test(hN.platform),linux:/Linux|X11/.test(hN.platform),ie:yN,ie_version:gN?pN.documentMode||6:vN?+vN[1]:mN?+mN[1]:0,gecko:bN,gecko_version:bN?+(/Firefox\/(\d+)/.exec(hN.userAgent)||[0,0])[1]:0,chrome:!!ON,chrome_version:ON?+ON[1]:0,ios:SN,android:/Android\b/.test(hN.userAgent),webkit:wN,webkit_version:wN?+(/\bAppleWebKit\/(\d+)/.exec(hN.userAgent)||[0,0])[1]:0,safari:xN,safari_version:xN?+(/\bVersion\/(\d+(\.\d+)?)/.exec(hN.userAgent)||[0,0])[1]:0,tabSize:null!=pN.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function _N(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function PN(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function EN(e,t){if(!t.anchorNode)return!1;try{return PN(e,t.anchorNode)}catch(e){return!1}}function $N(e){return 3==e.nodeType?ZN(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function TN(e,t,n,r){return!!n&&(NN(e,t,n,r,-1)||NN(e,t,n,r,1))}function CN(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function jN(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function NN(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:AN(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=CN(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?AN(e):0}}}function AN(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function IN(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function MN(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function DN(e,t){let n=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.height-e.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}class RN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?AN(t):0),n,Math.min(e.focusOffset,n?AN(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let QN,zN=null;function LN(e){if(e.setActive)return e.setActive();if(zN)return e.focus(zN);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==zN?{get preventScroll(){return zN={preventScroll:!0},!0}}:void 0),!zN){zN=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function ZN(e,t,n=t){let r=QN||(QN=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function FN(e,t,n,r){let i={key:t,code:t,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,e.dispatchEvent(o);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,e.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function UN(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function VN(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function GN(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r>0)return{node:n,offset:r};if(1==n.nodeType&&r>0){if("false"==n.contentEditable)return null;n=n.childNodes[r-1],r=AN(n)}else{if(!n.parentNode||jN(n))return null;r=CN(n),n=n.parentNode}}}function BN(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r<n.nodeValue.length)return{node:n,offset:r};if(1==n.nodeType&&r<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[r],r=0}else{if(!n.parentNode||jN(n))return null;r=CN(n)+1,n=n.parentNode}}}kN.safari&&kN.safari_version>=26&&(zN=!1);class XN{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new XN(e.parentNode,CN(e),t)}static after(e,t){return new XN(e.parentNode,CN(e)+1,t)}}const YN=[];class WN{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,r=this.dom,i=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=i?i.nextSibling:r.firstChild)){let e=WN.get(n);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e,t),o.flags&=-8}if(n=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;n&&n!=o.dom;)n=qN(n);else r.insertBefore(o.dom,n);i=o.dom}for(n=i?i.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);n;)n=qN(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==AN(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!WN.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,a=-1;for(let s=0,l=n,u=n;s<this.children.length;s++){let n=this.children[s],c=l+n.length;if(l<e&&c>t)return n.domBoundsAround(e,t,l);if(c>=e&&-1==r&&(r=s,i=l),l>t&&n.dom.parentNode==this.dom){o=s,a=u;break}u=c,l=c+n.breakAfter}return{from:i,to:a<0?n+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=YN){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&n.indexOf(e)<0&&e.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new HN(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function qN(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}WN.prototype.breakAfter=0;class HN{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function KN(e,t,n,r,i,o,a,s,l){let{children:u}=e,c=u.length?u[t]:null,d=o.length?o[o.length-1]:null,f=d?d.breakAfter:a;if(!(t==r&&c&&!a&&!f&&o.length<2&&c.merge(n,i,o.length?d:null,0==n,s,l))){if(r<u.length){let e=u[r];e&&(i<e.length||e.breakAfter&&(null==d?void 0:d.breakAfter))?(t==r&&(e=e.split(i),i=0),!f&&d&&e.merge(0,i,d,!0,0,l)?o[o.length-1]=e:((i||e.children.length&&!e.children[0].length)&&e.merge(0,i,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(d?d.breakAfter=1:a=1),r++}for(c&&(c.breakAfter=a,n>0&&(!a&&o.length&&c.merge(n,c.length,o[0],!1,s,0)?c.breakAfter=o.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,s,0),t++));t<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:s;else{if(!u[t].become(o[0]))break;t++,o.shift(),s=o.length?0:l}!o.length&&t&&r<u.length&&!u[t-1].breakAfter&&u[r].merge(0,0,u[t-1],!1,s,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function JN(e,t,n,r,i,o){let a=e.childCursor(),{i:s,off:l}=a.findPos(n,1),{i:u,off:c}=a.findPos(t,-1),d=t-n;for(let e of r)d+=e.length;e.length+=d,KN(e,u,c,s,l,r,0,i,o)}class eA extends WN{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof eA)||this.length-(t-e)+n.length>256||8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new eA(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new XN(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,a=0;0==t&&n<0||t==r&&n>=0?kN.chrome||kN.gecko||(t?(i--,a=1):o<r&&(o++,a=-1)):n<0?i--:o<r&&o++;let s=ZN(e,i,o).getClientRects();if(!s.length)return null;let l=s[(a?a<0:n>=0)?0:s.length-1];kN.safari&&!a&&0==l.width&&(l=Array.prototype.find.call(s,e=>e.width)||l);return a?IN(l,a<0):l||null}(this.dom,e,t)}}class tA extends WN{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(UN(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof tA&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(JN(this,e,t,n?n.children.slice():[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let o of this.children){let a=n+o.length;a>e&&t.push(n<e?o.split(e-n):o),r<0&&n>=e&&(r=i),n=a,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new tA(this.mark,t,o)}domAtPos(e){return iA(this,e)}coordsAt(e,t){return aA(this,e,t)}}class nA extends WN{static create(e,t,n){return new nA(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=nA.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof nA&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof nA&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return bC.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):bC.empty}domAtPos(e){return(this.length?0==e:this.side>0)?XN.before(this.dom):XN.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),i=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let t=o?r.length-1:0;i=r[t],!(e>0?0==t:t==r.length-1||i.top<i.bottom);t+=o?-1:1);return IN(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class rA extends WN{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof rA&&e.side==this.side}split(){return new rA(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?XN.before(this.dom):XN.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return bC.empty}get isHidden(){return!0}}function iA(e,t){let n=e.dom,{children:r}=e,i=0;for(let e=0;i<r.length;i++){let o=r[i],a=e+o.length;if(!(a==e&&o.getSide()<=0)){if(t>e&&t<a&&o.dom.parentNode==n)return o.domAtPos(t-e);if(t<=e)break;e=a}}for(let e=i;e>0;e--){let t=r[e-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let e=i;e<r.length;e++){let t=r[e];if(t.dom.parentNode==n)return t.domAtPos(0)}return new XN(n,0)}function oA(e,t,n){let r,{children:i}=e;n>0&&t instanceof tA&&i.length&&(r=i[i.length-1])instanceof tA&&r.mark.eq(t.mark)?oA(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function aA(e,t,n){let r=null,i=-1,o=null,a=-1;!function e(t,s){for(let l=0,u=0;l<t.children.length&&u<=s;l++){let c=t.children[l],d=u+c.length;d>=s&&(c.children.length?e(c,s-u):(!o||o.isHidden&&(n>0||sA(o,c)))&&(d>s||u==d&&c.getSide()>0)?(o=c,a=s-u):(u<s||u==d&&c.getSide()<0&&!c.isHidden)&&(r=c,i=s-u)),u=d}}(e,t);let s=(n<0?r:o)||r||o;return s?s.coordsAt(Math.max(0,s==r?i:a),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=$N(t);return n[n.length-1]||null}(e)}function sA(e,t){let n=e.coordsAt(0,1),r=t.coordsAt(0,1);return n&&r&&r.top<n.bottom}function lA(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}eA.prototype.children=nA.prototype.children=rA.prototype.children=YN;const uA=Object.create(null);function cA(e,t,n){if(e==t)return!0;e||(e=uA),t||(t=uA);let r=Object.keys(e),i=Object.keys(t);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(-1==i.indexOf(o)||e[o]!==t[o]))return!1;return!0}function dA(e,t,n){let r=!1;if(t)for(let i in t)n&&i in n||(r=!0,"style"==i?e.style.cssText="":e.removeAttribute(i));if(n)for(let i in n)t&&t[i]==n[i]||(r=!0,"style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r}function fA(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t[r.name]=r.value}return t}class hA{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var pA=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(pA||(pA={}));class mA extends Rj{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new gA(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new yA(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=bA(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new yA(e,t,n,r,e.widget||null,!0)}static line(e){return new vA(e)}static set(e,t=!1){return Zj.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}mA.none=Zj.empty;class gA extends mA{constructor(e){let{start:t,end:n}=bA(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof gA&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&cA(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}gA.prototype.point=!1;class vA extends mA{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof vA&&this.spec.class==e.spec.class&&cA(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}vA.prototype.mapMode=IC.TrackBefore,vA.prototype.point=!0;class yA extends mA{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?IC.TrackBefore:IC.TrackAfter:IC.TrackDel}get type(){return this.startSide!=this.endSide?pA.WidgetRange:this.startSide<=0?pA.WidgetBefore:pA.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof yA&&(t=this.widget,n=e.widget,t==n||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function bA(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function OA(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}yA.prototype.point=!0;class wA extends WN{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof wA))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),JN(this,e,t,n?n.children.slice():[],i,o),!0}split(e){let t=new wA;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){cA(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){oA(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=lA(t,this.attrs||{})),n&&(this.attrs=lA({class:n},this.attrs||{}))}domAtPos(e){return iA(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(UN(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(dA(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&WN.get(r)instanceof tA;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(n=WN.get(r))||void 0===n?void 0:n.isEditable)||kN.ios&&this.children.some(e=>e instanceof eA)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof eA)||/[^ -~]/.test(n.text))return null;let r=$N(n.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=aA(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return e instanceof wA&&0==this.children.length&&0==e.children.length&&cA(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof wA)return i;if(o>t)break}r=o+i.breakAfter}return null}}class xA extends WN{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof xA&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?XN.before(this.dom):XN.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new xA(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return YN}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):bC.empty}domBoundsAround(){return null}become(e){return e instanceof xA&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof SA?null:IN(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class SA extends hA{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class kA{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof xA&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new wA),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(_A(new rA(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof xA||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),i=Math.min(r,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(_A(new eA(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=r<=i?0:t.length}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof yA){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(n instanceof yA)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new xA(n.widget||PA.block,a,n));else{let o=nA.create(n.widget||PA.inline,a,a?0:n.startSide),s=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||i>r.length||n.startSide<=0),u=this.getLine();2!=this.pendingBuffer||s||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),s&&(u.append(_A(new rA(1),r),i),i=r.length+Math.max(0,i-r.length)),u.append(_A(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new kA(e,t,n,i);return o.openEnd=Zj.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function _A(e,t){for(let n of t)e=new tA(n,[e],e.length);return e}class PA extends hA{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}PA.inline=new PA("span"),PA.block=new PA("div");var EA=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(EA||(EA={}));const $A=EA.LTR,TA=EA.RTL;function CA(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const jA=CA("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),NA=CA("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),AA=Object.create(null),IA=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);AA[t]=n,AA[n]=-t}function MA(e){return e<=247?jA[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?NA[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const DA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class RA{get dir(){return this.level%2?TA:$A}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(i<0||(0!=r?r<0?a.from<t:a.to>t:e[i].level>a.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function QA(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!QA(r.inner,i.inner))return!1}return!0}const zA=[];function LA(e,t,n,r,i,o,a){let s=r%2?2:1;if(r%2==i%2)for(let l=t,u=0;l<n;){let t=!0,c=!1;if(u==o.length||l<o[u].from){let e=zA[l];e!=s&&(t=!1,c=16==e)}let d=t||1!=s?null:[],f=t?r:r+1,h=l;e:for(;;)if(u<o.length&&h==o[u].from){if(c)break e;let p=o[u];if(!t)for(let e=p.to,t=u+1;;){if(e==n)break e;if(!(t<o.length&&o[t].from==e)){if(zA[e]==s)break e;break}e=o[t++].to}if(u++,d)d.push(p);else{p.from>l&&a.push(new RA(l,p.from,f)),ZA(e,p.direction==$A!=!(f%2)?r+1:r,i,p.inner,p.from,p.to,a),l=p.to}h=p.to}else{if(h==n||(t?zA[h]!=s:zA[h]==s))break;h++}d?LA(e,l,h,r+1,i,d,a):l<h&&a.push(new RA(l,h,f)),l=h}else for(let l=n,u=o.length;l>t;){let n=!0,c=!1;if(!u||l>o[u-1].to){let e=zA[l-1];e!=s&&(n=!1,c=16==e)}let d=n||1!=s?null:[],f=n?r:r+1,h=l;e:for(;;)if(u&&h==o[u-1].to){if(c)break e;let p=o[--u];if(!n)for(let e=p.from,n=u;;){if(e==t)break e;if(!n||o[n-1].to!=e){if(zA[e-1]==s)break e;break}e=o[--n].from}if(d)d.push(p);else{p.to<l&&a.push(new RA(p.to,l,f)),ZA(e,p.direction==$A!=!(f%2)?r+1:r,i,p.inner,p.from,p.to,a),l=p.from}h=p.from}else{if(h==t||(n?zA[h-1]!=s:zA[h-1]==s))break;h--}d?LA(e,h,l,r+1,i,d,a):h<l&&a.push(new RA(h,l,f)),l=h}}function ZA(e,t,n,r,i,o,a){let s=t%2?2:1;!function(e,t,n,r,i){for(let o=0;o<=r.length;o++){let a=o?r[o-1].to:t,s=o<r.length?r[o].from:n,l=o?256:i;for(let t=a,n=l,r=l;t<s;t++){let i=MA(e.charCodeAt(t));512==i?i=n:8==i&&4==r&&(i=16),zA[t]=4==i?2:i,7&i&&(r=i),n=i}for(let e=a,t=l,r=l;e<s;e++){let i=zA[e];if(128==i)e<s-1&&t==zA[e+1]&&24&t?i=zA[e]=t:zA[e]=256;else if(64==i){let i=e+1;for(;i<s&&64==zA[i];)i++;let o=e&&8==t||i<n&&8==zA[i]?1==r?1:8:256;for(let t=e;t<i;t++)zA[t]=o;e=i-1}else 8==i&&1==r&&(zA[e]=1);t=i,7&i&&(r=i)}}}(e,i,o,r,s),function(e,t,n,r,i){let o=1==i?2:1;for(let a=0,s=0,l=0;a<=r.length;a++){let u=a?r[a-1].to:t,c=a<r.length?r[a].from:n;for(let t,n,r,a=u;a<c;a++)if(n=AA[t=e.charCodeAt(a)])if(n<0){for(let e=s-3;e>=0;e-=3)if(IA[e+1]==-n){let t=IA[e+2],n=2&t?i:4&t?1&t?o:i:0;n&&(zA[a]=zA[IA[e]]=n),s=e;break}}else{if(189==IA.length)break;IA[s++]=a,IA[s++]=t,IA[s++]=l}else if(2==(r=zA[a])||1==r){let e=r==i;l=e?0:1;for(let t=s-3;t>=0;t-=3){let n=IA[t+2];if(2&n)break;if(e)IA[t+2]|=2;else{if(4&n)break;IA[t+2]|=4}}}}}(e,i,o,r,s),function(e,t,n,r){for(let i=0,o=r;i<=n.length;i++){let a=i?n[i-1].to:e,s=i<n.length?n[i].from:t;for(let l=a;l<s;){let a=zA[l];if(256==a){let a=l+1;for(;;)if(a==s){if(i==n.length)break;a=n[i++].to,s=i<n.length?n[i].from:t}else{if(256!=zA[a])break;a++}let u=1==o,c=u==(1==(a<t?zA[a]:r))?u?1:2:r;for(let t=a,r=i,o=r?n[r-1].to:e;t>l;)t==o&&(t=n[--r].from,o=r?n[r-1].to:e),zA[--t]=c;l=a}else o=a,l++}}}(i,o,r,s),LA(e,i,o,t,n,r,a)}function FA(e,t,n){if(!e)return[new RA(0,0,t==TA?1:0)];if(t==$A&&!n.length&&!DA.test(e))return UA(e.length);if(n.length)for(;e.length>zA.length;)zA[zA.length]=256;let r=[],i=t==$A?0:1;return ZA(e,i,i,n,0,e.length,r),r}function UA(e){return[new RA(0,e,0)]}let VA="";function GA(e,t,n,r,i){var o;let a=r.head-e.from,s=RA.find(t,a,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc),l=t[s],u=l.side(i,n);if(a==u){let e=s+=i?1:-1;if(e<0||e>=t.length)return null;l=t[s=e],a=l.side(!i,n),u=l.side(i,n)}let c=TC(e.text,a,l.forward(i,n));(c<l.from||c>l.to)&&(c=u),VA=e.text.slice(Math.min(a,c),Math.max(a,c));let d=s==(i?t.length-1:0)?null:t[s+(i?1:-1)];return d&&c==u&&d.level+(i?0:1)<l.level?VC.cursor(d.side(!i,n)+e.from,d.forward(i,n)?1:-1,d.level):VC.cursor(c+e.from,l.forward(i,n)?-1:1,l.level)}function BA(e,t,n){for(let r=t;r<n;r++){let t=MA(e.charCodeAt(r));if(1==t)return $A;if(2==t||4==t)return TA}return $A}const XA=XC.define(),YA=XC.define(),WA=XC.define(),qA=XC.define(),HA=XC.define(),KA=XC.define(),JA=XC.define(),eI=XC.define(),tI=XC.define(),nI=XC.define({combine:e=>e.some(e=>e)}),rI=XC.define({combine:e=>e.some(e=>e)}),iI=XC.define();class oI{constructor(e,t="nearest",n="nearest",r=5,i=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new oI(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new oI(VC.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const aI=Sj.define({map:(e,t)=>e.map(t)}),sI=Sj.define();function lI(e,t,n){let r=e.facet(qA);r.length?r[0](t):window.onerror&&window.onerror(String(t),n,void 0,void 0,t)||(n?console.error(n+":",t):console.error(t))}const uI=XC.define({combine:e=>!e.length||e[0]});let cI=0;const dI=XC.define({combine:e=>e.filter((t,n)=>{for(let r=0;r<n;r++)if(e[r].plugin==t.plugin)return!1;return!0})});class fI{constructor(e,t,n,r,i){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.baseExtensions=i(this),this.extension=this.baseExtensions.concat(dI.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(dI.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:i,decorations:o}=t||{};return new fI(cI++,e,n,r,e=>{let t=[];return o&&t.push(gI.of(t=>{let n=t.plugin(e);return n?o(n):mA.none})),i&&t.push(i(e)),t})}static fromClass(e,t){return fI.define((t,n)=>new e(t,n),t)}}class hI{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(lI(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){lI(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){lI(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const pI=XC.define(),mI=XC.define(),gI=XC.define(),vI=XC.define(),yI=XC.define(),bI=XC.define();function OI(e,t){let n=e.state.facet(bI);if(!n.length)return n;let r=n.map(t=>t instanceof Function?t(e):t),i=[];return Zj.spans(r,t.from,t.to,{point(){},span(e,n,r,o){let a=e-t.from,s=n-t.from,l=i;for(let e=r.length-1;e>=0;e--,o--){let n,i=r[e].spec.bidiIsolate;if(null==i&&(i=BA(t.text,a,s)),o>0&&l.length&&(n=l[l.length-1]).to==a&&n.direction==i)n.to=s,l=n.inner;else{let e={from:a,to:s,direction:i,inner:[]};l.push(e),l=e.inner}}}}),i}const wI=XC.define();function xI(e){let t=0,n=0,r=0,i=0;for(let o of e.state.facet(wI)){let a=o(e);a&&(null!=a.left&&(t=Math.max(t,a.left)),null!=a.right&&(n=Math.max(n,a.right)),null!=a.top&&(r=Math.max(r,a.top)),null!=a.bottom&&(i=Math.max(i,a.bottom)))}return{left:t,right:n,top:r,bottom:i}}const SI=XC.define();class kI{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new kI(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,a=0;;r++){let s=r==e.length?null:e[r],l=o-a,u=s?s.fromB:1e9;for(;i<t.length&&t[i]<u;){let e=t[i],r=t[i+1],o=Math.max(a,e),s=Math.min(u,r);if(o<=s&&new kI(o+l,s+l,o,s).addToSet(n),r>u)break;i+=2}if(!s)return n;new kI(s.fromA,s.toA,s.fromB,s.toB).addToSet(n),o=s.toA,a=s.toB}}}class _I{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=DC.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges((e,t,n,i)=>r.push(new kI(e,t,n,i))),this.changedRanges=r}static create(e,t,n){return new _I(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class PI extends WN{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=mA.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new wA],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new kI(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?r=this.domChanged.newSel.head:function(e,t){let n=!1;t&&e.iterChangedRanges((e,r)=>{e<t.to&&r>t.from&&(n=!0)});return n}(e.changes,this.hasComposition)||e.selectionSet||(r=e.state.selection.main.head));let i=r>-1?function(e,t,n){let r=EI(e,n);if(!r)return null;let{node:i,from:o,to:a}=r,s=i.nodeValue;if(/[\n\r]/.test(s))return null;if(e.state.doc.sliceString(r.from,r.to)!=s)return null;let l=t.invertedDesc,u=new kI(l.mapPos(o),l.mapPos(a),o,a),c=[];for(let t=i.parentNode;;t=t.parentNode){let n=WN.get(t);if(n instanceof tA)c.push({node:t,deco:n.mark});else{if(n instanceof wA||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:u,text:i,marks:c,line:t};if(t==e.contentDOM)return null;c.push({node:t,deco:new gA({inclusive:!0,attributes:fA(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:r}=this.hasComposition;n=new kI(t,r,e.changes.mapPos(t,-1),e.changes.mapPos(r,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(kN.ie||kN.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=function(e,t,n){let r=new $I;return Zj.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return n=kI.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=kN.chrome||kN.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof xA&&e.widget instanceof SA&&i.push(e.dom);r.updateGaps(i)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,i=this.childCursor(t);for(let e=r.length-1;;e--){let t=e>=0?r[e]:null;if(!t)break;let o,a,s,l,{fromA:u,toA:c,fromB:d,toB:f}=t;if(n&&n.range.fromB<f&&n.range.toB>d){let e=kA.build(this.view.state.doc,d,n.range.fromB,this.decorations,this.dynamicDecorationMap),t=kA.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);a=e.breakAtStart,s=e.openStart,l=t.openEnd;let r=this.compositionView(n);t.breakAtStart?r.breakAfter=1:t.content.length&&r.merge(r.length,r.length,t.content[0],!1,t.openStart,0)&&(r.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&r.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),o=e.content.concat(r).concat(t.content)}else({content:o,breakAtStart:a,openStart:s,openEnd:l}=kA.build(this.view.state.doc,d,f,this.decorations,this.dynamicDecorationMap));let{i:h,off:p}=i.findPos(c,1),{i:m,off:g}=i.findPos(u,-1);KN(this,m,g,h,p,o,a,s,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(sI)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new eA(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new tA(n,[t],t.length);let n=new wA;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some(e=>7&e.flags)?1:0),this.markedForComposition.add(t);let n=WN.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let i=e.marks.length-1;i>=-1;i--)n=r.childPos(n.off,1),r=r.children[n.i],t(i>=0?e.marks[i].node:e.text,r)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,i=!r&&!(this.view.state.facet(uI)||this.dom.tabIndex>-1)&&EN(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||i))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,s=this.moveToLine(this.domAtPos(a.anchor)),l=a.empty?s:this.moveToLine(this.domAtPos(a.head));if(kN.gecko&&a.empty&&!this.hasComposition&&(1==(u=s).node.nodeType&&u.node.firstChild&&(0==u.offset||"false"==u.node.childNodes[u.offset-1].contentEditable)&&(u.offset==u.node.childNodes.length||"false"==u.node.childNodes[u.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(e,s.node.childNodes[s.offset]||null)),s=l=new XN(e,0),o=!0}var u;let c=this.view.observer.selectionRange;!o&&c.focusNode&&(TN(s.node,s.offset,c.anchorNode,c.anchorOffset)&&TN(l.node,l.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,a))||(this.view.observer.ignore(()=>{kN.android&&kN.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=_N(this.view.root);if(e)if(a.empty){if(kN.gecko){let e=function(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}(s.node,s.offset);if(e&&3!=e){let t=(1==e?GN:BN)(s.node,s.offset);t&&(s=new XN(t.node,t.offset))}}e.collapse(s.node,s.offset),null!=a.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=a.bidiLevel)}else if(e.extend){e.collapse(s.node,s.offset);try{e.extend(l.node,l.offset)}catch(e){}}else{let t=document.createRange();a.anchor>a.head&&([s,l]=[l,s]),t.setEnd(l.node,l.offset),t.setStart(s.node,s.offset),e.removeAllRanges(),e.addRange(t)}else;i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(s,l)),this.impreciseAnchor=s.precise?null:new XN(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new XN(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&TN(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=_N(e.root),{anchorNode:r,anchorOffset:i}=e.observer.selectionRange;if(!(n&&t.empty&&t.assoc&&n.modify))return;let o=wA.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let s=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!s||!l||s.bottom>l.top)return;let u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&n.collapse(r,i)}moveToLine(e){let t,n=this.dom;if(e.node!=n)return e;for(let r=e.offset;!t&&r<n.childNodes.length;r++){let e=WN.get(n.childNodes[r]);e instanceof wA&&(t=e.domAtPos(0))}for(let r=e.offset-1;!t&&r>=0;r--){let e=WN.get(n.childNodes[r]);e instanceof wA&&(t=e.domAtPos(e.length))}return t?new XN(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=WN.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof wA)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],s=i-a.breakAfter,l=s-a.length;if(s<e)break;if(l<=e&&(l<e||a.covers(-1))&&(s>e||a.covers(1))&&(!n||a instanceof wA&&!(n instanceof wA&&t>=0)))n=a,r=l;else if(n&&l==e&&s==e&&a instanceof xA&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(n=null)}i=l}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof wA))return null;for(;r.children.length;){let{i:e,off:t}=r.childPos(n,1);for(;;e++){if(e==r.children.length)return null;if((r=r.children[e]).length)break}n=t}if(!(r instanceof eA))return null;let i=TC(r.text,n);if(i==n)return null;let o=ZN(r.dom,n,i).getClientRects();for(let e=0;e<o.length;e++){let t=o[e];if(e==o.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,s=this.view.textDirection==EA.LTR;for(let e=0,l=0;l<this.children.length;l++){let u=this.children[l],c=e+u.length;if(c>r)break;if(e>=n){let n=u.dom.getBoundingClientRect();if(t.push(n.height),o){let t=u.dom.lastChild,r=t?$N(t):[];if(r.length){let t=r[r.length-1],o=s?t.right-n.left:n.right-t.left;o>a&&(a=o,this.minWidth=i,this.minWidthFrom=e,this.minWidthTo=c)}}}e=c+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?EA.RTL:EA.LTR}measureTextSize(){for(let e of this.children)if(e instanceof wA){let t=e.measureTextSize();if(t)return t}let e,t,n,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(r);let i=$N(r.firstChild)[0];e=r.getBoundingClientRect().height,t=i?i.width/27:7,n=i?i.height:e,r.remove()}),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new HN(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(mA.replace({widget:new SA(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return mA.set(e)}updateDeco(){let e=1,t=this.view.state.facet(gI).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),n=!1,r=this.view.state.facet(vI).map((e,t)=>{let r="function"==typeof e;return r&&(n=!0),r?e(this.view):e});for(r.length&&(this.dynamicDecorationMap[e++]=n,t.push(Zj.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let t of this.view.state.facet(iI))try{if(t(this.view,e.range,e))return!0}catch(e){lI(this.view.state,e,"scroll handler")}let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=xI(this.view),o={left:r.left-i.left,top:r.top-i.top,right:r.right+i.right,bottom:r.bottom+i.bottom},{offsetWidth:a,offsetHeight:s}=this.view.scrollDOM;!function(e,t,n,r,i,o,a,s){let l=e.ownerDocument,u=l.defaultView||window;for(let c=e,d=!1;c&&!d;)if(1==c.nodeType){let e,f=c==l.body,h=1,p=1;if(f)e=MN(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();({scaleX:h,scaleY:p}=DN(c,t)),e={left:t.left,right:t.left+c.clientWidth*h,top:t.top,bottom:t.top+c.clientHeight*p}}let m=0,g=0;if("nearest"==i)t.top<e.top?(g=t.top-(e.top+a),n>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+a)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+a,n<0&&t.top-g<e.top&&(g=t.top-(e.top+a)));else{let r=t.bottom-t.top,o=e.bottom-e.top;g=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-a:t.bottom-o+a)-e.top}if("nearest"==r?t.left<e.left?(m=t.left-(e.left+o),n>0&&t.right>e.right+m&&(m=t.right-e.right+o)):t.right>e.right&&(m=t.right-e.right+o,n<0&&t.left<e.left+m&&(m=t.left-(e.left+o))):m=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==s?t.left-o:t.right-(e.right-e.left)+o)-e.left,m||g)if(f)u.scrollBy(m,g);else{let e=0,n=0;if(g){let e=c.scrollTop;c.scrollTop+=g/p,n=(c.scrollTop-e)*p}if(m){let t=c.scrollLeft;c.scrollLeft+=m/h,e=(c.scrollLeft-t)*h}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-m)<1&&(r="nearest"),n&&Math.abs(n-g)<1&&(i="nearest")}if(f)break;(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)&&(t={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}),c=c.assignedSlot||c.parentNode}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,s),-s),this.view.textDirection==EA.LTR)}}function EI(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let r=GN(n.focusNode,n.focusOffset),i=BN(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let t=WN.get(i.node);if(!t||t instanceof eA&&t.text!=i.node.nodeValue)o=i;else if(e.docView.lastCompositionAfterCursor){let e=WN.get(r.node);!e||e instanceof eA&&e.text!=r.node.nodeValue||(o=i)}}if(e.docView.lastCompositionAfterCursor=o!=r,!o)return null;let a=t-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}let $I=class{constructor(){this.changes=[]}compareRange(e,t){OA(e,t,this.changes)}comparePoint(e,t){OA(e,t,this.changes)}boundChange(e){OA(e,e,this.changes)}};function TI(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function CI(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function jI(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function NI(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function AI(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function II(e,t,n){let r,i,o,a,s,l,u,c,d=!1;for(let f=e.firstChild;f;f=f.nextSibling){let e=$N(f);for(let h=0;h<e.length;h++){let p=e[h];i&&jI(i,p)&&(p=NI(AI(p,i.bottom),i.top));let m=TI(t,p),g=CI(n,p);if(0==m&&0==g)return 3==f.nodeType?MI(f,t,n):II(f,t,n);(!r||a>g||a==g&&o>m)&&(r=f,i=p,o=m,a=g,d=!m||(t<p.left?h>0:h<e.length-1)),0==m?n>p.bottom&&(!u||u.bottom<p.bottom)?(s=f,u=p):n<p.top&&(!c||c.top>p.top)&&(l=f,c=p):u&&jI(u,p)?u=AI(u,p.bottom):c&&jI(c,p)&&(c=NI(c,p.top))}}if(u&&u.bottom>=n?(r=s,i=u):c&&c.top<=n&&(r=l,i=c),!r)return{node:e,offset:0};let f=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?MI(r,f,n):d&&"false"!=r.contentEditable?II(r,f,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}}function MI(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,a=0;for(let s=0;s<r;s++){let r=ZN(e,s,s+1).getClientRects();for(let l=0;l<r.length;l++){let u=r[l];if(u.top==u.bottom)continue;a||(a=t-u.left);let c=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=t&&u.right+1>=t&&c<o){let n=t>=(u.left+u.right)/2,r=n;if(kN.chrome||kN.gecko){ZN(e,s).getBoundingClientRect().left==u.right&&(r=!n)}if(c<=0)return{node:e,offset:s+(r?1:0)};i=s+(r?1:0),o=c}}}return{node:e,offset:i>-1?i:a>0?e.nodeValue.length:0}}function DI(e,t,n,r=-1){var i,o;let a,s=e.contentDOM.getBoundingClientRect(),l=s.top+e.viewState.paddingTop,{docHeight:u}=e.viewState,{x:c,y:d}=t,f=d-l;if(f<0)return 0;if(f>u)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,i=!1;a=e.elementAtHeight(f),a.type!=pA.Text;)for(;f=r>0?a.bottom+t:a.top-t,!(f>=0&&f<=u);){if(i)return n?null:0;i=!0,r=-r}d=l+f;let h=a.from;if(h<e.viewport.from)return 0==e.viewport.from?0:n?null:RI(e,s,a,c,d);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:RI(e,s,a,c,d);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,g=m.elementFromPoint(c,d);g&&!e.contentDOM.contains(g)&&(g=null),g||(c=Math.max(s.left+1,Math.min(s.right-1,c)),g=m.elementFromPoint(c,d),g&&!e.contentDOM.contains(g)&&(g=null));let v,y=-1;if(g&&0!=(null===(i=e.docView.nearest(g))||void 0===i?void 0:i.isEditable)){if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(c,d);e&&({offsetNode:v,offset:y}=e)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(c,d);e&&({startContainer:v,startOffset:y}=e)}v&&(!e.contentDOM.contains(v)||kN.safari&&function(e,t,n){return QI(e,t,n)}(v,y,c)||kN.chrome&&function(e,t,n){if(0!=t)return QI(e,t,n);for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}let r=1==e.nodeType?e.getBoundingClientRect():ZN(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}(v,y,c))&&(v=void 0),v&&(y=Math.min(AN(v),y))}if(!v||!e.docView.dom.contains(v)){let t=wA.find(e.docView,h);if(!t)return f>a.top+a.height/2?a.to:a.from;({node:v,offset:y}=II(t.dom,c,d))}let b=e.docView.nearest(v);if(!b)return null;if(b.isWidget&&1==(null===(o=b.dom)||void 0===o?void 0:o.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(v,y)+b.posAtStart}function RI(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((i-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let a=e.state.sliceDoc(n.from,n.to);return n.from+eN(a,o,e.state.tabSize)}function QI(e,t,n){let r,i=e;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(;;){let e=i.nextSibling;if(e){if("BR"==e.nodeName)break;return!1}{let e=i.parentNode;if(!e||"DIV"==e.nodeName)break;i=e}}return ZN(e,r-1,r).getBoundingClientRect().right>n}function zI(e,t,n){let r=e.lineBlockAt(t);if(Array.isArray(r.type)){let e;for(let i of r.type){if(i.from>t)break;if(!(i.to<t)){if(i.from<t&&i.to>t)return i;e&&(i.type!=pA.Text||e.type==i.type&&!(n<0?i.from<t:i.to>t))||(e=i)}}return e||r}return r}function LI(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),a=e.textDirectionAt(i.from);for(let s=t,l=null;;){let t=GA(i,o,a,s,n),u=VA;if(!t){if(i.number==(n?e.state.doc.lines:1))return s;u="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=e.visualLineSide(i,!n)}if(l){if(!l(u))return s}else{if(!r)return t;l=r(u)}s=t}}function ZI(e,t,n){for(;;){let r=0;for(let i of e)i.between(t-1,t+1,(e,i,o)=>{if(t>e&&t<i){let o=r||n||(t-e<i-t?-1:1);t=o<0?e:i,r=o}});if(!r)return t}}function FI(e,t){let n=null;for(let r=0;r<t.ranges.length;r++){let i=t.ranges[r],o=null;if(i.empty){let t=ZI(e,i.from,0);t!=i.from&&(o=VC.cursor(t,-1))}else{let t=ZI(e,i.from,-1),n=ZI(e,i.to,1);t==i.from&&n==i.to||(o=VC.range(i.from==i.anchor?t:n,i.from==i.head?t:n))}o&&(n||(n=t.ranges.slice()),n[r]=o)}return n?VC.create(n,t.mainIndex):t}function UI(e,t,n){let r=ZI(e.state.facet(yI).map(t=>t(e)),n.from,t.head>n.from?-1:1);return r==n.from?n:VC.cursor(r,r<n.from?1:-1)}const VI="￿";class GI{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Mj.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=VI}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let i=r.nextSibling;if(i==t)break;let o=WN.get(r),a=WN.get(i);(o&&a?o.breakAfter:(o?o.breakAfter:jN(r))||jN(i)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&!XI(i,t)&&this.lineBreak(),r=i}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,a=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,a=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=a-1);n=o+a}}readNode(e){if(e.cmIgnore)return;let t=WN.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(BI(e,n.node,n.offset)?t:0))}}function BI(e,t,n){for(;;){if(!t||n<AN(t))return!1;if(t==e)return!0;n=CN(t)+1,t=t.parentNode}}function XI(e,t){let n;for(;e!=t&&e;e=e.nextSibling){let t=WN.get(e);if(!(null==t?void 0:t.isWidget)&&!e.cmIgnore)return!1;t&&(n||(n=[])).push(t)}if(n)for(let e of n){let t=e.overrideDOMText;if(null==t?void 0:t.length)return!1}return!0}class YI{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class WI{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=i||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;n&&(t.push(new YI(n,r)),i==n&&o==r||t.push(new YI(i,o)));return t}(e),n=new GI(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?VC.single(n+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!PN(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!PN(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),a=e.viewport;if((kN.ios||kN.chrome)&&e.state.selection.main.empty&&n!=r&&(a.from>0||a.to<e.state.doc.length)){let t=Math.min(n,r),i=Math.max(n,r),o=a.from-t,s=a.to-i;0!=o&&1!=o&&0!=t||0!=s&&-1!=s&&i!=e.state.doc.length||(n=0,r=e.state.doc.length)}this.newSel=VC.single(r,n)}}}function qI(e,t){let n,{newSel:r}=t,i=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:a}=t.bounds,s=i.from,l=null;(8===o||kN.android&&t.text.length<a-r)&&(s=i.to,l="end");let u=KI(e.state.doc.sliceString(r,a,VI),t.text,s-r,l);u&&(kN.chrome&&13==o&&u.toB==u.from+2&&t.text.slice(u.from,u.toB)==VI+VI&&u.toB--,n={from:r+u.from,to:r+u.toA,insert:bC.of(t.text.slice(u.from,u.toB).split(VI))})}else r&&(!e.hasFocus&&e.state.facet(uI)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:(kN.mac||kN.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=VC.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:bC.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,i.to))}:kN.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(r&&(r=VC.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:bC.of([" "])}),n)return HI(e,n,r,o);if(r&&!r.main.eq(i)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin,"select.pointer"==n&&(r=FI(e.state.facet(yI).map(t=>t(e)),r))),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}return!1}function HI(e,t,n,r=-1){if(kN.ios&&e.inputState.flushIOSKey(t))return!0;let i=e.state.selection.main;if(kN.android&&(t.to==i.to&&(t.from==i.from||t.from==i.from-1&&" "==e.state.sliceDoc(t.from,i.from))&&1==t.insert.length&&2==t.insert.lines&&FN(e.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&0==t.insert.length||8==r&&t.insert.length<t.to-t.from&&t.to>i.head)&&FN(e.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&FN(e.contentDOM,"Delete",46)))return!0;let o,a=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let s=()=>o||(o=function(e,t,n){let r,i=e.state,o=i.selection.main,a=-1;if(t.from==t.to&&t.from<o.from||t.from>o.to){let n=t.from<o.from?-1:1,r=n<0?o.from:o.to,s=ZI(i.facet(yI).map(t=>t(e)),r,n);t.from==s&&(a=s)}if(a>-1)r={changes:t,selection:VC.cursor(t.from+t.insert.length,-1)};else if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=o.from<t.from?i.sliceDoc(o.from,t.from):"",a=o.to>t.to?i.sliceDoc(t.to,o.to):"";r=i.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+a))}else{let a=i.changes(t),s=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let l,u=e.state.sliceDoc(t.from,t.to),c=n&&EI(e,n.main.head);if(c){let e=t.insert.length-(t.to-t.from);l={from:c.from,to:c.to-e}}else l=e.state.doc.lineAt(o.head);let d=o.to-t.to,f=o.to-o.from;r=i.changeByRange(n=>{if(n.from==o.from&&n.to==o.to)return{changes:a,range:s||n.map(a)};let r=n.to-d,c=r-u.length;if(n.to-n.from!=f||e.state.sliceDoc(c,r)!=u||n.to>=l.from&&n.from<=l.to)return{range:n};let h=i.changes({from:c,to:r,insert:t.insert}),p=n.to-o.to;return{changes:h,range:s?VC.range(Math.max(0,s.anchor+p),Math.max(0,s.head+p)):n.map(h)}})}else r={changes:a,selection:s&&i.selection.replaceRange(s)}}let s="input.type";(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,s+=".compose",e.inputState.compositionFirstChange&&(s+=".start",e.inputState.compositionFirstChange=!1));return i.update(r,{userEvent:s,scrollIntoView:!0})}(e,t,n));return e.state.facet(KA).some(n=>n(e,t.from,t.to,a,s))||e.dispatch(s()),!0}function KI(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let a=e.length,s=t.length;for(;a>0&&s>0&&e.charCodeAt(a-1)==t.charCodeAt(s-1);)a--,s--;if("end"==r){n-=a+Math.max(0,o-Math.min(a,s))-o}if(a<o&&e.length<t.length){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}else if(s<o){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}return{from:o,toA:a,toB:s}}class JI{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,kN.safari&&e.contentDOM.addEventListener("input",()=>null),kN.gecko&&function(e){PM.has(e)||(PM.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=WN.get(r))&&n.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e)))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=tM(e),n=this.handlers,r=this.view.contentDOM;for(let e in t)if("scroll"!=e){let i=!t[e].handlers.length,o=n[e];o&&i!=!o.handlers.length&&(r.removeEventListener(e,this.handleEvent),o=null),o||r.addEventListener(e,this.handleEvent,{passive:i})}for(let e in n)"scroll"==e||t[e]||r.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&iM.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),kN.android&&kN.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!kN.ios||e.synthetic||e.altKey||e.metaKey||!((t=nM.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||rM.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,FN(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0)))}ignoreDuringComposition(e){return!(!/^key/.test(e.type)||e.synthetic)&&(this.composing>0||!!(kN.safari&&!kN.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function eM(e,t){return(n,r)=>{try{return t.call(e,r,n)}catch(e){lI(n.state,e)}}}function tM(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec,r=e&&e.plugin.domEventHandlers,i=e&&e.plugin.domEventObservers;if(r)for(let e in r){let i=r[e];i&&n(e).handlers.push(eM(t.value,i))}if(i)for(let e in i){let r=i[e];r&&n(e).observers.push(eM(t.value,r))}}for(let e in sM)n(e).handlers.push(sM[e]);for(let e in lM)n(e).observers.push(lM[e]);return t}const nM=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rM="dthko",iM=[16,17,18,20,91,92,224,225];function oM(e){return.7*Math.max(0,e)+8}class aM{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,n,r=e.ownerDocument;for(let i=e.parentNode;i&&!(i==r.body||t&&n);)if(1==i.nodeType)!n&&i.scrollHeight>i.clientHeight&&(n=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}return{x:t,y:n}}(e.contentDOM),this.atoms=e.state.facet(yI).map(t=>t(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Mj.allowMultipleSelections)&&function(e,t){let n=e.state.facet(XA);return n.length?n[0](t):kN.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=_N(e.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=OM(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(t=this.startEvent,n=e,Math.max(Math.abs(t.clientX-n.clientX),Math.abs(t.clientY-n.clientY))<10))return;var t,n;this.select(this.lastEvent=e);let r=0,i=0,o=0,a=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:a,bottom:l}=this.scrollParents.y.getBoundingClientRect());let u=xI(this.view);e.clientX-u.left<=o+6?r=-oM(o-e.clientX):e.clientX+u.right>=s-6&&(r=oM(e.clientX-s)),e.clientY-u.top<=a+6?i=-oM(a-e.clientY):e.clientY+u.bottom>=l-6&&(i=oM(e.clientY-l)),this.setScrollSpeed(r,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}select(e){let{view:t}=this,n=FI(this.atoms,this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}const sM=Object.create(null),lM=Object.create(null),uM=kN.ie&&kN.ie_version<15||kN.ios&&kN.webkit_version<604;function cM(e,t,n){for(let r of e.facet(t))n=r(n,e);return n}function dM(e,t){t=cM(e.state,eI,t);let n,{state:r}=e,i=1,o=r.toText(t),a=o.lines==r.selection.ranges.length;if(null!=xM&&r.selection.ranges.every(e=>e.empty)&&xM==o.toString()){let e=-1;n=r.changeByRange(n=>{let s=r.doc.lineAt(n.from);if(s.from==e)return{range:n};e=s.from;let l=r.toText((a?o.line(i++).text:t)+r.lineBreak);return{changes:{from:s.from,insert:l},range:VC.cursor(n.from+l.length)}})}else n=a?r.changeByRange(e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:VC.cursor(e.from+t.length)}}):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function fM(e,t,n,r){if(1==r)return VC.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return VC.cursor(t);0==o?n=1:o==i.length&&(n=-1);let a=o,s=o;n<0?a=TC(i.text,o,!1):s=TC(i.text,o);let l=r(i.text.slice(a,s));for(;a>0;){let e=TC(i.text,a,!1);if(r(i.text.slice(e,a))!=l)break;a=e}for(;s<i.length;){let e=TC(i.text,s);if(r(i.text.slice(s,e))!=l)break;s=e}return VC.range(a+i.from,s+i.from)}(e.state,t,n);{let n=wA.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,VC.range(i,o)}}lM.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},sM.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),lM.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},lM.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},sM.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of e.state.facet(WA))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=mM(e,t),r=OM(t),i=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),i=i.map(e.changes))},get(t,o,a){let s,l=mM(e,t),u=fM(e,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let t=fM(e,n.pos,n.bias,r),i=Math.min(t.from,u.from),o=Math.max(t.to,u.to);u=i<u.from?VC.range(i,o):VC.range(o,i)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&1==r&&i.ranges.length>1&&(s=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:r,to:i}=e.ranges[n];if(r<=t&&i>=t)return VC.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(i,l.pos))?s:a?i.addRange(u):VC.create([u])}}}(e,t)),n){let r=!e.hasFocus;e.inputState.startMouseSelection(new aM(e,t,n,r)),r&&e.observer.ignore(()=>{LN(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let i=e.inputState.mouseSelection;if(i)return i.start(t),!1===i.dragging}else e.inputState.setSelectionOrigin("select.pointer");return!1};let hM=(e,t,n)=>t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right;function pM(e,t,n,r){let i=wA.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let a=i.coordsAt(o,-1);if(a&&hM(n,r,a))return-1;let s=i.coordsAt(o,1);return s&&hM(n,r,s)?1:a&&a.bottom>=r?-1:1}function mM(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:pM(e,n,t.clientX,t.clientY)}}const gM=kN.ie&&kN.ie_version<=11;let vM=null,yM=0,bM=0;function OM(e){if(!gM)return e.detail;let t=vM,n=bM;return vM=e,bM=Date.now(),yM=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(yM+1)%3:1}function wM(e,t,n,r){if(!(n=cM(e.state,eI,n)))return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=e.inputState,a=r&&o&&function(e,t){let n=e.state.facet(YA);return n.length?n[0](t):kN.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:o.from,to:o.to}:null,s={from:i,insert:n},l=e.state.changes(a?[a,s]:s);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"}),e.inputState.draggedContent=null}sM.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let r=e.docView.nearest(t.target);if(r&&r.isWidget){let e=r.posAtStart,t=e+r.length;(e>=n.to||t<=n.from)&&(n=VC.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",cM(e.state,tI,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},sM.dragend=e=>(e.inputState.draggedContent=null,!1),sM.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&wM(e,t,r.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return wM(e,t,n,!0),!0}return!1},sM.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=uM?null:t.clipboardData;return n?(dM(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{e.focus(),n.remove(),dM(e,n.value)},50)}(e),!1)};let xM=null;sM.copy=sM.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:cM(e,tI,t.join(e.lineBreak)),ranges:n,linewise:r}}(e.state);if(!n&&!i)return!1;xM=i?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=uM?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}(e,n),!1)};const SM=Oj.define();function kM(e,t){let n=[];for(let r of e.facet(JA)){let i=r(e,t);i&&n.push(i)}return n.length?e.update({effects:n,annotations:SM.of(!0)}):null}function _M(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=kM(e.state,t);n?e.dispatch(n):e.update([])}},10)}lM.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),_M(e)},lM.blur=e=>{e.observer.clearSelectionRange(),_M(e)},lM.compositionstart=lM.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},lM.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,kN.chrome&&kN.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},lM.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},sM.beforeinput=(e,t)=>{var n,r;if("insertReplacementText"==t.inputType&&e.observer.editContext){let r=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),i=t.getTargetRanges();if(r&&i.length){let t=i[0],n=e.posAtDOM(t.startContainer,t.startOffset),o=e.posAtDOM(t.endContainer,t.endOffset);return HI(e,{from:n,to:o,insert:e.state.toText(r)},null),!0}}let i;if(kN.chrome&&kN.android&&(i=nM.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0;setTimeout(()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return kN.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),kN.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>lM.compositionend(e,t),20),!1};const PM=new Set;const EM=["pre-wrap","normal","pre-line","break-spaces"];let $M=!1;function TM(){$M=!1}class CM{constructor(e){this.lineWrapping=e,this.doc=bC.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return EM.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i,o){let a=EM.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=i,s){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class jM{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class NM{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this._content=i}get type(){return"number"==typeof this._content?pA.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof yA?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new NM(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var AM=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(AM||(AM={}));const IM=.001;class MM{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>IM&&($M=!0),this.height=e)}replace(e,t,n){return MM.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this,o=n.doc;for(let a=r.length-1;a>=0;a--){let{fromA:s,toA:l,fromB:u,toB:c}=r[a],d=i.lineAt(s,AM.ByPosNoHeight,n.setDoc(t),0,0),f=d.to>=l?d:i.lineAt(l,AM.ByPosNoHeight,n,0,0);for(c+=f.to-l,l=f.to;a>0&&d.from<=r[a-1].toA;)s=r[a-1].fromA,u=r[a-1].fromB,a--,s<d.from&&(d=i.lineAt(s,AM.ByPosNoHeight,n,0,0));u+=d.from-s,s=d.from;let h=FM.build(n.setDoc(o),e,u,c);i=DM(i,i.replace(s,l,h))}return i.updateHeight(n,0)}static empty(){return new QM(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new LM(MM.of(e.slice(0,t)),o,MM.of(e.slice(n)))}}function DM(e,t){return e==t?e:(e.constructor!=t.constructor&&($M=!0),t)}MM.prototype.size=1;class RM extends MM{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new NM(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class QM extends RM{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new NM(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof QM||r instanceof zM&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof zM?r=new QM(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):MM.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zM extends MM{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,a=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*o);n=t/o,this.length>o+1&&(a=(this.height-t)/(this.length-o-1))}else n=this.height/o;return{firstLine:r,lastLine:i,perLine:n,perChar:a}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,perLine:a,perChar:s}=this.heightMetrics(t,r);if(t.lineWrapping){let i=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),o=t.doc.lineAt(i),l=a+o.length*s,u=Math.max(n,e-l/2);return new NM(o.from,o.length,u,l,0)}{let r=Math.max(0,Math.min(o-i,Math.floor((e-n)/a))),{from:s,length:l}=t.doc.line(i+r);return new NM(s,l,n+a*r,a,0)}}lineAt(e,t,n,r,i){if(t==AM.ByHeight)return this.blockAt(e,n,r,i);if(t==AM.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new NM(t,r-t,0,0,0)}let{firstLine:o,perLine:a,perChar:s}=this.heightMetrics(n,i),l=n.doc.lineAt(e),u=a+l.length*s,c=l.number-o,d=r+a*c+s*(l.from-i-c);return new NM(l.from,l.length,Math.max(r,Math.min(d,r+this.height-u)),u,0)}forEachLine(e,t,n,r,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:a,perLine:s,perChar:l}=this.heightMetrics(n,i);for(let u=e,c=r;u<=t;){let t=n.doc.lineAt(u);if(u==e){let n=t.number-a;c+=s*n+l*(e-i-n)}let r=s+l*t.length;o(new NM(t.from,t.length,c,r,0)),c+=r,u=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof zM?n[n.length-1]=new zM(e.length+r):n.push(null,new zM(r-1))}if(e>0){let t=n[0];t instanceof zM?n[0]=new zM(e+t.length):n.unshift(new zM(e-1),null)}return MM.of(n)}decomposeLeft(e,t){t.push(new zM(e-1),null)}decomposeRight(e,t){t.push(null,new zM(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),a=-1;for(r.from>t&&n.push(new zM(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==a?a=i:Math.abs(i-a)>=IM&&(a=-2);let s=new QM(t,i);s.outdated=!1,n.push(s),o+=t+1}o<=i&&n.push(null,new zM(i-o).updateHeight(e,o));let s=MM.of(n);return(a<0||Math.abs(s.height-this.height)>=IM||Math.abs(a-this.heightMetrics(e,t).perLine)>=IM)&&($M=!0),DM(this,s)}return(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class LM extends MM{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,a=i+this.left.length+this.break,s=t==AM.ByHeight?e<o:e<a,l=s?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,a);if(this.break||(s?l.to<a:l.from>a))return l;let u=t==AM.ByPosNoHeight?AM.ByPosNoHeight:AM.ByPos;return s?l.join(this.right.lineAt(a,u,n,o,a)):this.left.lineAt(a,u,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let a=r+this.left.height,s=i+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,r,i,o),t>=s&&this.right.forEachLine(e,t,n,a,s,o);else{let l=this.lineAt(s,AM.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,a,s,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let e of n)i.push(e);if(e>0&&ZM(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),ZM(i,e)}return MM.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?MM.of(this.break?[e,null,t]:[e,t]):(this.left=DM(this.left,e),this.right=DM(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,a=t+i.length+this.break,s=null;return r&&r.from<=t+i.length&&r.more?s=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=a+o.length&&r.more?s=o=o.updateHeight(e,a,n,r):o.updateHeight(e,a,n),s?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ZM(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof zM&&(r=e[t+1])instanceof zM&&e.splice(t-1,3,new zM(n.length+1+r.length))}class FM{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof QM?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new QM(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new RM(o,r,n)):(o||i||r>=5)&&this.addLineDeco(r,i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new QM(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new zM(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof QM)return e;let t=new QM(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof QM||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new QM(0,-1));let n=e;for(let e of this.nodes)e instanceof QM&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new FM(n,e);return Zj.spans(t,n,r,i,0),i.finish(n)}}class UM{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&OA(e,t,this.changes,5)}}function VM(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),a=Math.min(i.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let n=t,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();o=Math.max(o,r.left),a=Math.min(a,r.right),s=Math.max(s,r.top),l=Math.min(t==e.parentNode?i.innerHeight:l,r.bottom)}t="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+t),bottom:Math.max(s,l)-(n.top+t)}}function GM(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class BM{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e,t){return mA.replace({widget:new XM(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class XM extends hA{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class YM{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=KM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=EA.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(mI).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new CM(t),this.stateDeco=e.facet(gI).filter(e=>"function"!=typeof e),this.heightMap=MM.empty().applyChanges(this.stateDeco,bC.empty,this.heightOracle.setDoc(e.doc),[new kI(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=mA.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:e,to:t})=>r>=e&&r<=t)){let{from:t,to:n}=this.lineBlockAt(r);e.push(new WM(t,n))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?KM:new JM(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(eD(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(gI).filter(e=>"function"!=typeof e);let r=e.changedRanges,i=kI.extendWithRanges(r,function(e,t,n){let r=new UM;return Zj.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:DC.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);TM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),(this.heightMap.height!=o||$M)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let s=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let l=s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(rI)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?EA.RTL:EA.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),a=t.getBoundingClientRect(),s=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let l=0,u=0;if(a.width&&a.height){let{scaleX:e,scaleY:n}=DN(t,a);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,l|=16,o=s=!0)}let c=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==c&&this.paddingBottom==d||(this.paddingTop=c,this.paddingBottom=d,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=VN(e.scrollDOM);let h=(this.printing?GM:VM)(t,this.paddingTop),p=h.top-this.pixelViewport.top,m=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(s=!0)),!this.inView&&!this.scrollTarget&&!function(e){let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView||window;return t.left<n.innerWidth&&t.right>0&&t.top<n.innerHeight&&t.bottom>0}(e.dom))return 0;let v=a.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),s){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(v-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:a,textHeight:s}=e.docView.measureTextSize();o=n>0&&r.refresh(i,n,a,s,Math.max(5,v/a),t),o&&(e.docView.minWidth=0,l|=16)}p>0&&m>0?u=Math.max(p,m):p<0&&m<0&&(u=Math.min(p,m)),TM();for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(o?MM.empty().applyChanges(this.stateDeco,bC.empty,this.heightOracle,[new kI(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new jM(n.from,i))}$M&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),l|=this.updateForViewport()),(2&l||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,s=new WM(r.lineAt(o-1e3*n,AM.ByHeight,i,0,0).from,r.lineAt(a+1e3*(1-n),AM.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<s.from||e>s.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),a=r.lineAt(e,AM.ByPos,i,0,0);n="center"==t.y?(a.top+a.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<s.from?a.top:a.bottom-o,s=new WM(r.lineAt(n-500,AM.ByHeight,i,0,0).from,r.lineAt(n+o+500,AM.ByHeight,i,0,0).to)}}return s}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new WM(this.heightMap.lineAt(n,AM.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,AM.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,AM.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(t,AM.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=a+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<a+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new BM(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=EA.LTR&&!n)return[];let a=[],s=(r,o,l,u)=>{if(o-r<i)return;let c=this.state.selection.main,d=[c.from];c.empty||d.push(c.to);for(let e of d)if(e>r&&e<o)return s(r,e-10,l,u),void s(e+10,o,l,u);let f=function(e,t){for(let n of e)if(t(n))return n;return}(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<i&&Math.abs(e.to-o)<i&&!d.some(t=>e.from<t&&e.to>t));if(!f){if(o<l.to&&t&&n&&t.visibleRanges.some(e=>e.from<=o&&e.to>=o)){let e=t.moveToLineBoundary(VC.cursor(o),!1,!0).head;e>r&&(o=e)}let e=this.gapSize(l,r,o,u);f=new BM(r,o,e,n||e<2e6?e:2e6)}a.push(f)},l=t=>{if(t.length<o||t.type!=pA.Text)return;let i=function(e,t,n){let r=[],i=e,o=0;Zj.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i);return{total:o,ranges:r}}(t.from,t.to,this.stateDeco);if(i.total<o)return;let a,l,u=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let e,n,o=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=u){let r=HM(i,u),a=((this.visibleBottom-this.visibleTop)/2+o)/t.height;e=r-a,n=r+a}else e=(this.visibleTop-t.top-o)/t.height,n=(this.visibleBottom-t.top+o)/t.height;a=qM(i,e),l=qM(i,n)}else{let n=i.total*this.heightOracle.charWidth,o=r*this.heightOracle.charWidth,s=0;if(n>2e6)for(let n of e)n.from>=t.from&&n.from<t.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+s<this.pixelViewport.left&&(s=n.size-n.displaySize);let c,d,f=this.pixelViewport.left+s,h=this.pixelViewport.right+s;if(null!=u){let e=HM(i,u),t=((h-f)/2+o)/n;c=e-t,d=e+t}else c=(f-o)/n,d=(h+o)/n;a=qM(i,c),l=qM(i,d)}a>t.from&&s(t.from,a,t,i),l<t.to&&s(l,t.to,t,i)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return a}gapSize(e,t,n,r){let i=HM(r,n)-HM(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){BM.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=mA.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Zj.spans(t,this.viewport.from,this.viewport.to,{span(e,t){n.push({from:e,to:t})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let t=0;t<n.length&&!(8&r);t++){let i=this.visibleRanges[t],o=n[t];i.from==o.from&&i.to==o.to||(r|=4,e&&e.mapPos(i.from,-1)==o.from&&e.mapPos(i.to,1)==o.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||eD(this.heightMap.lineAt(e,AM.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||eD(this.heightMap.lineAt(this.scaler.fromDOM(e),AM.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return eD(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class WM{constructor(e,t){this.from=e,this.to=t}}function qM({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],o=i-n;if(r<=o)return n+r;r-=o}}function HM(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}const KM={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class JM{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map(({from:n,to:i})=>{let o=t.lineAt(n,AM.ByPos,e,0,0).top,a=t.lineAt(i,AM.ByPos,e,0,0).bottom;return r+=a-o,{from:n,to:i,top:o,bottom:a,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=o+(e.top-i)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),i=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}eq(e){return e instanceof JM&&(this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to))}}function eD(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new NM(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map(e=>eD(e,t)):e._content)}const tD=XC.define({combine:e=>e.join(" ")}),nD=XC.define({combine:e=>e.indexOf(!0)>-1}),rD=iN.newName(),iD=iN.newName(),oD=iN.newName(),aD={"&light":"."+iD,"&dark":"."+oD};function sD(e,t,n){return new iN(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]}):e+" "+t})}const lD=sD("."+rD,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},aD),uD={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},cD=kN.ie&&kN.ie_version<=11;class dD{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new RN,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(kN.ie&&kN.ie_version<=11||kN.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),!window.EditContext||!kN.android||!1===e.constructor.EDIT_CONTEXT||kN.chrome&&kN.chrome_version<126||(this.editContext=new pD(e),e.state.facet(uI)&&(e.contentDOM.editContext=this.editContext.editContext)),cD&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(uI)?n.root.activeElement!=this.dom:!EN(this.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)?t||(this.selectionChanged=!1):(kN.ie&&kN.ie_version<=11||kN.android&&kN.chrome)&&!n.state.selection.main.empty&&r.focusNode&&TN(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=_N(e.root);if(!t)return!1;let n=kN.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return hD(e,n)}let n=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),n?hD(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=EN(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,AN(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=AN(n))}else{if(n==e)return!0;r=CN(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,uD),cD&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),cD&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&FN(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&EN(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new WI(this.view,e,t,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=qI(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=fD(t,e.previousSibling||e.target.previousSibling,-1),r=fD(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(uI)!=e.state.facet(uI)&&(e.view.contentDOM.editContext=e.state.facet(uI)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function fD(e,t,n){for(;t;){let r=WN.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function hD(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return TN(a.node,a.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}class pD{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let r=e.state.selection.main,{anchor:i,head:o}=r,a=this.toEditorPos(n.updateRangeStart),s=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let l=s-a>n.text.length;a==this.from&&i<this.from?a=i:s==this.to&&i>this.to&&(s=i);let u=KI(e.state.sliceDoc(a,s),n.text,(l?r.from:r.to)-a,l?"end":null);if(!u){let t=VC.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));return void(t.main.eq(r)||e.dispatch({selection:t,userEvent:"select"}))}let c={from:u.from+a,to:u.toA+a,insert:bC.of(n.text.slice(u.from,u.toB).split("\n"))};if((kN.mac||kN.android)&&c.from==o-1&&/^\. ?$/.test(n.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(c={from:a,to:s,insert:bC.of([n.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let t=this.to-this.from+(c.to-c.from+c.insert.length);HI(e,c,VC.single(this.toEditorPos(n.selectionStart,t),this.toEditorPos(n.selectionEnd,t)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),c.from<c.to&&!c.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(t.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let r=[],i=null;for(let t=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);t<o;t++){let n=e.coordsForChar(t);i=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||i||new DOMRect,r.push(i)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,r=e.underlineThickness;if(!/none/i.test(t)&&!/none/i.test(r)){let i=this.toEditorPos(e.rangeStart),o=this.toEditorPos(e.rangeEnd);if(i<o){let e=`text-decoration: underline ${/^[a-z]/.test(t)?t+" ":"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${/thin/i.test(r)?1:2}px`;n.push(mA.mark({attributes:{style:e}}).range(i,o))}}}e.dispatch({effects:sI.of(mA.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let e in this.handlers)t.addEventListener(e,this.handlers[e]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=_N(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges((i,o,a,s,l)=>{if(n)return;let u=l.length-(o-i);if(r&&o>=r.to){if(r.from==i&&r.to==o&&r.insert.eq(l))return r=this.pendingContextChange=null,t+=u,void(this.to+=u);r=null,this.revertPending(e.state)}if(i+=t,(o+=t)<=this.from)this.from+=u,this.to+=u;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),l.toString()),this.to+=u}t+=u}),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==r||this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class mD{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(e=>e.forEach(e=>n(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new YM(e.state||Mj.create(e)),e.scrollTo&&e.scrollTo.is(aI)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(dI).map(e=>new hI(e));for(let e of this.plugins)e.update(this);this.observer=new dD(this),this.inputState=new JI(this),this.inputState.ensureHandlers(this.plugins),this.docView=new PI(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof kj?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let t of e){if(t.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=t.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.hasFocus,a=0,s=null;e.some(e=>e.annotation(SM))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,s=kM(i,o),s||(a=1));let l=this.observer.delayedAndroidKey,u=null;if(l?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(u=null)):this.observer.clear(),i.facet(Mj.phrases)!=this.state.facet(Mj.phrases))return this.setState(i);t=_I.create(this,i,e),t.flags|=a;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(c&&(c=c.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;c=new oI(e.empty?e:VC.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(aI)&&(c=e.value.clip(this.state))}this.viewState.update(t,c),this.bidiCache=yD.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(SI)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(t.startState.facet(tD)!=t.state.facet(tD)&&(this.viewState.mustMeasureContent=!0),(n||r||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!t.empty)for(let e of this.state.facet(HA))try{e(t)}catch(e){lI(this.state,e,"update listener")}(s||u)&&Promise.resolve().then(()=>{s&&this.state==s.startState&&this.dispatch(s),u&&!qI(this,u)&&l.force&&FN(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new YM(e),this.plugins=e.facet(dI).map(e=>new hI(e)),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new PI(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(dI),n=e.state.facet(dI);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new hI(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){lI(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0)if(VN(n))i=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);i=e.from,o=e.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];4&a||([this.measureRequests,s]=[s,this.measureRequests]);let l=s.map(e=>{try{return e.read(this)}catch(e){return lI(this.state,e),vD}}),u=_I.create(this,this.state,[]),c=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),c=this.docView.update(u),c&&this.docViewUpdate());for(let e=0;e<s.length;e++)if(l[e]!=vD)try{let t=s[e];t.write&&t.write(l[e],this)}catch(e){lI(this.state,e)}if(c&&this.docView.updateSelection(!0),!u.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let e=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(e>1||e<-1){r+=e,n.scrollTop=r/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(HA))e(t)}get themeClasses(){return rD+" "+(this.state.facet(nD)?oD:iD)+" "+this.state.facet(tD)}updateAttrs(){let e=bD(this,pI,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(uI)?"true":"false",class:"cm-content",style:`${kN.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),bD(this,mI,t);let n=this.observer.ignore(()=>{let n=dA(this.contentDOM,this.contentAttrs,t),r=dA(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(mD.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(SI);let e=this.state.facet(mD.cspNonce);iN.mount(this.root,this.styleModules.concat(lD).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return UI(this,e,LI(this,e,t,n))}moveByGroup(e,t){return UI(this,e,LI(this,e,t,t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==jj.Space&&(i=t),i==t}}(this,e.head,t)))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),i=n[t?n.length-1:0];return VC.cursor(i.side(t,r)+e.from,i.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=zI(e,t.head,t.assoc||-1),o=r&&i.type==pA.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),a=e.posAtCoords({x:n==(r==EA.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=a)return VC.cursor(a,n?-1:1)}return VC.cursor(n?i.to:i.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return UI(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return VC.cursor(i,t.assoc);let a,s=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),u=e.coordsAtPos(i,t.assoc||-1),c=e.documentTop;if(u)null==s&&(s=u.left-l.left),a=o<0?u.top:u.bottom;else{let t=e.viewState.lineBlockAt(i);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),a=(o<0?t.top:t.bottom)+c}let d=l.left+s,f=null!=r?r:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let n=a+(f+t)*o,r=DI(e,{x:d,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?r<i:r>i)){let t=e.docView.coordsForChar(r),i=!t||n<t.top?-1:1;return VC.cursor(r,i,void 0,s)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),DI(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return IN(n,i[RA.find(i,e-r.from,-1,t)].dir==EA.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(nI)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>gD)return UA(e.length);let t,n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n&&(r.fresh||QA(r.isolates,t=OI(this,e))))return r.order;t||(t=OI(this,e));let r=FA(e.text,n,t);return this.bidiCache.push(new yD(e.from,e.to,n,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||kN.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{LN(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return aI.of(new oI("number"==typeof e?VC.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return aI.of(new oI(VC.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return fI.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return fI.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=iN.newName(),r=[tD.of(n),SI.of(sD(`.${n}`,e))];return t&&t.dark&&r.push(nD.of(!0)),r}static baseTheme(e){return aj.lowest(SI.of(sD("."+rD,e,aD)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&WN.get(n)||WN.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}mD.styleModule=SI,mD.inputHandler=KA,mD.clipboardInputFilter=eI,mD.clipboardOutputFilter=tI,mD.scrollHandler=iI,mD.focusChangeEffect=JA,mD.perLineTextDirection=nI,mD.exceptionSink=qA,mD.updateListener=HA,mD.editable=uI,mD.mouseSelectionStyle=WA,mD.dragMovesSelection=YA,mD.clickAddsSelectionRange=XA,mD.decorations=gI,mD.outerDecorations=vI,mD.atomicRanges=yI,mD.bidiIsolatedRanges=bI,mD.scrollMargins=wI,mD.darkTheme=nD,mD.cspNonce=XC.define({combine:e=>e.length?e[0]:""}),mD.contentAttributes=mI,mD.editorAttributes=pI,mD.lineWrapping=mD.contentAttributes.of({class:"cm-lineWrapping"}),mD.announce=Sj.define();const gD=4096,vD={};class yD{constructor(e,t,n,r,i,o){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=i,this.order=o}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:EA.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new yD(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function bD(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&lA(o,n)}return n}const OD=kN.mac?"mac":kN.windows?"win":kN.linux?"linux":"key";function wD(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const xD=aj.default(mD.domEventHandlers({keydown:(e,t)=>TD(_D(t.state),e,t,"editor")})),SD=XC.define({enables:xD}),kD=new WeakMap;function _D(e){let t=e.facet(SD),n=kD.get(t);return n||kD.set(t,n=function(e,t=OD){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,a,s)=>{var l,u;let c=n[e]||(n[e]=Object.create(null)),d=r.split(/ (?!$)/).map(e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,o,a,s=n[n.length-1];"Space"==s&&(s=" ");for(let e=0;e<n.length-1;++e){const s=n[e];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))r=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else if(/^s(hift)?$/i.test(s))o=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);"mac"==t?a=!0:i=!0}}return r&&(s="Alt-"+s),i&&(s="Ctrl-"+s),a&&(s="Meta-"+s),o&&(s="Shift-"+s),s}(e,t));for(let t=1;t<d.length;t++){let n=d.slice(0,t).join(" ");i(n,!0),c[n]||(c[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=PD={view:t,prefix:n,scope:e};return setTimeout(()=>{PD==r&&(PD=null)},ED),!0}]})}let f=d.join(" ");i(f,!1);let h=c[f]||(c[f]={preventDefault:!1,stopPropagation:!1,run:(null===(u=null===(l=c._any)||void 0===l?void 0:l.run)||void 0===u?void 0:u.slice())||[]});o&&h.run.push(o),a&&(h.preventDefault=!0),s&&(h.stopPropagation=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:i}=r;for(let t in e)e[t].run.push(e=>i(e,$D))}let i=r[t]||r.key;if(i)for(let t of e)o(t,i,r.run,r.preventDefault,r.stopPropagation),r.shift&&o(t,"Shift-"+i,r.shift,r.preventDefault,r.stopPropagation)}return n}(t.reduce((e,t)=>e.concat(t),[]))),n}let PD=null;const ED=4e3;let $D=null;function TD(e,t,n,r){$D=t;let i=function(e){var t=!(uN&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||cN&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?lN:sN)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=NC(CC(i,0))==i.length&&" "!=i,a="",s=!1,l=!1,u=!1;PD&&PD.view==n&&PD.scope==r&&(a=PD.prefix+" ",iM.indexOf(t.keyCode)<0&&(l=!0,PD=null));let c,d,f=new Set,h=e=>{if(e){for(let t of e.run)if(!f.has(t)&&(f.add(t),t(n)))return e.stopPropagation&&(u=!0),!0;e.preventDefault&&(e.stopPropagation&&(u=!0),l=!0)}return!1},p=e[r];return p&&(h(p[a+wD(i,t,!o)])?s=!0:!o||!(t.altKey||t.metaKey||t.ctrlKey)||kN.windows&&t.ctrlKey&&t.altKey||kN.mac&&t.altKey&&!t.ctrlKey&&!t.metaKey||!(c=sN[t.keyCode])||c==i?o&&t.shiftKey&&h(p[a+wD(i,t,!0)])&&(s=!0):(h(p[a+wD(c,t,!0)])||t.shiftKey&&(d=lN[t.keyCode])!=i&&d!=c&&h(p[a+wD(d,t,!1)]))&&(s=!0),!s&&h(p._any)&&(s=!0)),l&&(s=!0),s&&u&&t.stopPropagation(),$D=null,s}class CD{constructor(e,t,n,r,i){this.className=e,this.left=t,this.top=n,this.width=r,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let i=jD(e);return[new CD(t,r.left-i.left,r.top-i.top,null,r.bottom-r.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),i=Math.min(n.to,e.viewport.to),o=e.textDirection==EA.LTR,a=e.contentDOM,s=a.getBoundingClientRect(),l=jD(e),u=a.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=s.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=s.right-(c?parseInt(c.paddingRight):0),h=zI(e,r,1),p=zI(e,i,-1),m=h.type==pA.Text?h:null,g=p.type==pA.Text?p:null;m&&(e.lineWrapping||h.widgetLineBreaks)&&(m=ND(e,r,1,m));g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=ND(e,i,-1,g));if(m&&g&&m.from==g.from&&m.to==g.to)return y(b(n.from,n.to,m));{let t=m?b(n.from,null,m):O(h,!1),r=g?b(null,n.to,g):O(p,!0),i=[];return(m||h).to<(g||p).from-(m&&g?1:0)||h.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?i.push(v(d,t.bottom,f,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==pA.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),y(t).concat(i).concat(y(r))}function v(e,n,r,i){return new CD(t,e-l.left,n-l.top,r-e,i-n)}function y({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(v(n[i],e,n[i+1],t));return r}function b(t,n,r){let i=1e9,a=-1e9,s=[];function l(t,n,l,u,c){let h=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);h&&p&&(i=Math.min(h.top,p.top,i),a=Math.max(h.bottom,p.bottom,a),c==EA.LTR?s.push(o&&n?d:h.left,o&&u?f:p.right):s.push(!o&&u?d:p.left,!o&&n?f:h.right))}let u=null!=t?t:r.from,c=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>u&&r.from<c)for(let i=Math.max(r.from,u),o=Math.min(r.to,c);;){let r=e.state.doc.lineAt(i);for(let a of e.bidiSpans(r)){let e=a.from+r.from,s=a.to+r.from;if(e>=o)break;s>i&&l(Math.max(e,i),null==t&&e<=u,Math.min(s,o),null==n&&s>=c,a.dir)}if(i=r.to+1,i>=o)break}return 0==s.length&&l(u,null==t,c,null==n,e.textDirection),{top:i,bottom:a,horizontal:s}}function O(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function jD(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==EA.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function ND(e,t,n,r){let i=e.coordsAtPos(t,2*n);if(!i)return r;let o=e.dom.getBoundingClientRect(),a=(i.top+i.bottom)/2,s=e.posAtCoords({x:o.left+1,y:a}),l=e.posAtCoords({x:o.right-1,y:a});return null==s||null==l?r:{from:Math.max(r.from,Math.min(s,l)),to:Math.min(r.to,Math.max(s,l))}}class AD{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ID)!=e.state.facet(ID)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(ID);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>{return n=e,r=this.drawn[t],!(n.constructor==r.constructor&&n.eq(r));var n,r})){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e,kN.ios&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ID=XC.define();function MD(e){return[fI.define(t=>new AD(t,e)),ID.of(e)]}const DD=XC.define({combine:e=>Dj(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function RD(e){return e.startState.facet(DD)!=e.state.facet(DD)}const QD=MD({above:!0,markers(e){let{state:t}=e,n=t.facet(DD),r=[];for(let i of t.selection.ranges){let o=i==t.selection.main;if(i.empty||n.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:VC.cursor(i.head,i.head>i.anchor?-1:1);for(let i of CD.forRange(e,t,n))r.push(i)}}return r},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=RD(e);return n&&zD(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){zD(t.state,e)},class:"cm-cursorLayer"});function zD(e,t){t.style.animationDuration=e.facet(DD).cursorBlinkRate+"ms"}const LD=MD({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:CD.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||RD(e),class:"cm-selectionLayer"}),ZD=aj.highest(mD.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),FD=Sj.define({map:(e,t)=>null==e?null:t.mapPos(e)}),UD=ej.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(FD)?t.value:e,e))}),VD=fI.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(UD);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(UD)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(UD),n=null!=t&&e.coordsAtPos(t);if(!n)return null;let r=e.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-r.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:n}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/n+"px",this.cursor.style.height=e.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(UD)!=e&&this.view.dispatch({effects:FD.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function GD(e,t,n,r,i){t.lastIndex=0;for(let o,a=e.iterRange(n,r),s=n;!a.next().done;s+=a.value.length)if(!a.lineBreak)for(;o=t.exec(a.value);)i(s+o.index,o)}class BD{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:i,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,i)=>r(i,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,i)=>{let o=n(e,t,r);o&&i(r,r+e[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,i)=>i(r,r+e[0].length,n)}this.boundary=i,this.maxLength=o}createDeco(e){let t=new Fj,n=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))GD(e.state.doc,this.regexp,t,r,(t,r)=>this.addMatch(r,e,t,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((t,i,o,a)=>{a>=e.view.viewport.from&&o<=e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(a,r))}),e.viewportMoved||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),a=Math.min(i.to,r);if(a>=o){let n=e.state.doc.lineAt(o),r=n.to<a?e.state.doc.lineAt(a):n,s=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){s=o;break}for(;a<r.to;a++)if(this.boundary.test(r.text[a-r.from])){l=a;break}}let u,c=[],d=(e,t,n)=>c.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=s-n.from;(u=this.regexp.exec(n.text))&&u.index<l-n.from;)this.addMatch(u,e,u.index+n.from,d);else GD(e.state.doc,this.regexp,s,l,(t,n)=>this.addMatch(n,e,t,d));t=t.update({filterFrom:s,filterTo:l,filter:(e,t)=>e<s||t>l,add:c})}}return t}}const XD=null!=/x/.unicode?"gu":"g",YD=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",XD),WD={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let qD=null;const HD=XC.define({combine(e){let t=Dj(e,{render:null,specialChars:YD,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==qD&&"undefined"!=typeof document&&document.body){let t=document.body.style;qD=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return qD||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,XD)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,XD)),t}});let KD=null;class JD extends hA{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(WD[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class eR extends hA{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const tR=mA.line({class:"cm-activeLine"}),nR=fI.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){let i=e.lineBlockAt(r.head);i.from>t&&(n.push(tR.range(i.from)),t=i.from)}return mA.set(n)}},{decorations:e=>e.decorations});class rR extends hA{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?$N(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=IN(t[0],"rtl"!=n.direction),i=parseInt(n.lineHeight);return r.bottom-r.top>1.5*i?{left:r.left,right:r.right,top:r.top,bottom:r.top+i}:r}ignoreEvent(){return!1}}const iR=2e3;function oR(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>iR?-1:i==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Jj(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function aR(e,t){let n=oR(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let a=oR(e,t);if(!a)return r;let s=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>iR||n.off>iR||t.col<0||n.col<0){let a=Math.min(t.off,n.off),s=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=s&&o.push(VC.range(n.from+a,n.to+s))}}else{let a=Math.min(t.col,n.col),s=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=eN(n.text,a,e.tabSize,!0);if(r<0)o.push(VC.cursor(n.to));else{let t=eN(n.text,s,e.tabSize);o.push(VC.range(n.from+r,n.from+t))}}}return o}(e.state,n,a);return s.length?o?VC.create(s.concat(r.ranges)):VC.create(s):r}}:null}const sR={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},lR={style:"cursor: crosshair"};const uR="-10000px";class cR{constructor(e,t,n,r){this.facet=t,this.createTooltipView=n,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let i=null;this.tooltipViews=this.tooltips.map(e=>i=n(e,i))}update(e,t){var n;let r=e.state.facet(this.facet),i=r.filter(e=>e);if(r===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],a=t?[]:null;for(let n=0;n<i.length;n++){let r=i[n],s=-1;if(r){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==r.create&&(s=e)}if(s<0)o[n]=this.createTooltipView(r,n?o[n-1]:null),a&&(a[n]=!!r.above);else{let r=o[n]=this.tooltipViews[s];a&&(a[n]=t[s]),r.update&&r.update(e)}}}for(let e of this.tooltipViews)o.indexOf(e)<0&&(this.removeTooltipView(e),null===(n=e.destroy)||void 0===n||n.call(e));return t&&(a.forEach((e,n)=>t[n]=e),t.length=a.length),this.input=r,this.tooltips=i,this.tooltipViews=o,!0}}function dR(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const fR=XC.define({combine:e=>{var t,n,r;return{position:kN.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find(e=>e.parent))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find(e=>e.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||dR}}}),hR=new WeakMap,pR=fI.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(fR);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new cR(e,yR,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(fR);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),r=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=uR,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(kN.gecko)n=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==uR&&"0px"==e.style.left){let t=e.getBoundingClientRect();n=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(n||"absolute"==this.position)if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=xI(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(fR).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:o}=e,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:c}=u,d=e.pos[s],f=e.size[s];if(!d||!1!==l.clip&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){c.style.top=uR;continue}let h=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,m=f.right-f.left,g=null!==(t=hR.get(u))&&void 0!==t?t:f.bottom-f.top,v=u.offset||vR,y=this.view.textDirection==EA.LTR,b=f.width>r.right-r.left?y?r.left:r.right-f.width:y?Math.max(r.left,Math.min(d.left-(h?14:0)+v.x,r.right-m)):Math.min(Math.max(r.left,d.left-m+(h?14:0)-v.x),r.right-m),O=this.above[s];!l.strictSide&&(O?d.top-g-p-v.y<r.top:d.bottom+g+p+v.y>r.bottom)&&O==r.bottom-d.bottom>d.top-r.top&&(O=this.above[s]=!O);let w=(O?d.top-r.top:r.bottom-d.bottom)-p;if(w<g&&!1!==u.resize){if(w<this.view.defaultLineHeight){c.style.top=uR;continue}hR.set(u,g),c.style.height=(g=w)/o+"px"}else c.style.height&&(c.style.height="");let x=O?d.top-g-p-v.y:d.bottom+p+v.y,S=b+m;if(!0!==u.overlap)for(let e of a)e.left<S&&e.right>b&&e.top<x+g&&e.bottom>x&&(x=O?e.top-g-2-p:e.bottom+p+2);if("absolute"==this.position?(c.style.top=(x-e.parent.top)/o+"px",mR(c,(b-e.parent.left)/i)):(c.style.top=x/o+"px",mR(c,b/i)),h){let e=d.left+(y?v.x:-v.x)-(b+14-7);h.style.left=e/i+"px"}!0!==u.overlap&&a.push({left:b,top:x,right:S,bottom:x+g}),c.classList.toggle("cm-tooltip-above",O),c.classList.toggle("cm-tooltip-below",!O),u.positioned&&u.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=uR}},{eventObservers:{scroll(){this.maybeMeasure()}}});function mR(e,t){let n=parseInt(e.style.left,10);(isNaN(n)||Math.abs(t-n)>1)&&(e.style.left=t+"px")}const gR=mD.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),vR={x:0,y:0},yR=XC.define({enables:[pR,gR]}),bR=XC.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class OR{static create(e){return new OR(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new cR(e,bR,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(void 0!==r)if(void 0===t)t=r;else if(t!==r)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const wR=yR.compute([bR],e=>{let t=e.facet(bR);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos})),create:OR.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class xR{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,i=1;if(n instanceof nA)r=n.posAtStart;else{if(r=e.posAtCoords(t),null==r)return;let n=e.coordsAtPos(r);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(r)).find(e=>e.from<=r&&e.to>=r),a=o&&o.dir==EA.RTL?-1:1;i=t.x<n.left?-a:a}let o=this.source(e,r,i);if(null==o?void 0:o.then){let t=this.pending={pos:r};o.then(n=>{this.pending==t&&(this.pending=null,!n||Array.isArray(n)&&!n.length||e.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))},t=>lI(e.state,t,"hover tooltip"))}else!o||Array.isArray(o)&&!o.length||e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(pR),t=e?e.manager.tooltips.findIndex(e=>e.create==OR.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:i}=this;if(r.length&&i&&!function(e,t){let n,{left:r,right:i,top:o,bottom:a}=e.getBoundingClientRect();if(n=e.querySelector(".cm-tooltip-arrow")){let e=n.getBoundingClientRect();o=Math.min(e.top,o),a=Math.max(e.bottom,a)}return t.clientX>=r-SR&&t.clientX<=i+SR&&t.clientY>=o-SR&&t.clientY<=a+SR}(i.dom,e)||this.pending){let{pos:i}=r[0]||this.pending,o=null!==(n=null===(t=r[0])||void 0===t?void 0:t.end)&&void 0!==n?n:i;(i==o?this.view.posAtCoords(this.lastMove)==i:function(e,t,n,r,i){let o=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let s=e.posAtCoords({x:r,y:i},!1);return s>=t&&s<=n}(this.view,i,o,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const SR=4;function kR(e,t={}){let n=Sj.define(),r=ej.define({create:()=>[],update(e,r){if(e.length&&(t.hideOnChange&&(r.docChanged||r.selection)?e=[]:t.hideOn&&(e=e.filter(e=>!t.hideOn(r,e))),r.docChanged)){let t=[];for(let n of e){let e=r.changes.mapPos(n.pos,-1,IC.TrackDel);if(null!=e){let i=Object.assign(Object.create(null),n);i.pos=e,null!=i.end&&(i.end=r.changes.mapPos(i.end)),t.push(i)}}e=t}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(PR)&&(e=[]);return e},provide:e=>bR.from(e)});return{active:r,extension:[r,fI.define(i=>new xR(i,e,r,n,t.hoverTime||300)),wR]}}function _R(e,t){let n=e.plugin(pR);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const PR=Sj.define();const ER=XC.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function $R(e,t){let n=e.plugin(TR),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const TR=fI.fromClass(class{constructor(e){this.input=e.state.facet(NR),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(ER);this.top=new CR(e,!0,t.topContainer),this.bottom=new CR(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(ER);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new CR(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new CR(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(NR);if(n!=this.input){let t=n.filter(e=>e),r=[],i=[],o=[],a=[];for(let n of t){let t,s=this.specs.indexOf(n);s<0?(t=n(e.view),a.push(t)):(t=this.panels[s],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of a)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>mD.scrollMargins.of(t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class CR{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=jR(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=jR(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function jR(e){let t=e.nextSibling;return e.remove(),t}const NR=XC.define({enables:TR});class AR extends Rj{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}AR.prototype.elementClass="",AR.prototype.toDOM=void 0,AR.prototype.mapMode=IC.TrackBefore,AR.prototype.startSide=AR.prototype.endSide=-1,AR.prototype.point=!0;const IR=XC.define(),MR=XC.define(),DR={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Zj.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},RR=XC.define();function QR(e){return[LR(),RR.of({...DR,...e})]}const zR=XC.define({combine:e=>e.some(e=>e)});function LR(e){let t=[ZR];return e&&!1===e.fixed&&t.push(zR.of(!0)),t}const ZR=fI.fromClass(class{constructor(e){this.view=e,this.domAfter=null,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(RR).map(t=>new GR(e,t)),this.fixed=!e.state.facet(zR);for(let e of this.gutters)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}if(e.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(zR)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Zj.iter(this.view.state.facet(IR),this.view.viewport.from),r=[],i=this.gutters.map(e=>new VR(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(e.type)){let t=!0;for(let o of e.type)if(o.type==pA.Text&&t){UR(n,r,o.from);for(let e of i)e.line(this.view,o,r);t=!1}else if(o.widget)for(let e of i)e.widget(this.view,o)}else if(e.type==pA.Text){UR(n,r,e.from);for(let t of i)t.line(this.view,e,r)}else if(e.widget)for(let t of i)t.widget(this.view,e);for(let e of i)e.finish();e&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(e){let t=e.startState.facet(RR),n=e.state.facet(RR),r=e.docChanged||e.heightChanged||e.viewportChanged||!Zj.eq(e.startState.facet(IR),e.state.facet(IR),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new GR(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:e=>mD.scrollMargins.of(t=>{let n=t.plugin(e);if(!n||0==n.gutters.length||!n.fixed)return null;let r=n.dom.offsetWidth*t.scaleX,i=n.domAfter?n.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==EA.LTR?{left:r,right:i}:{right:r,left:i}})});function FR(e){return Array.isArray(e)?e:[e]}function UR(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class VR{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Zj.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,i=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let t=new BR(e,o,i,n);r.elements.push(t),r.dom.appendChild(t.dom)}else r.elements[this.i].update(e,o,i,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];UR(this.cursor,r,t.from),n.length&&(r=r.concat(n));let i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;(0!=r.length||o.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),r=n?[n]:null;for(let n of e.state.facet(MR)){let i=n(e,t.widget,t);i&&(r||(r=[])).push(i)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class GR{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let i,o=r.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let e=o.getBoundingClientRect();i=(e.top+e.bottom)/2}else i=r.clientY;let a=e.lineBlockAtHeight(i-e.documentTop);t.domEventHandlers[n](e,a,r)&&r.preventDefault()});this.markers=FR(t.markers(e)),t.initialSpacer&&(this.spacer=new BR(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=FR(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!Zj.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class BR{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let a=o,s=i<t.length?t[i++]:null,l=!1;if(s){let e=s.elementClass;e&&(n+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(s)){a=e,l=!0;break}}else a=this.markers.length;for(;o<a;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!s)break;s.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(s.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const XR=XC.define(),YR=XC.define(),WR=XC.define({combine:e=>Dj(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],i=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||i(e,t,n):i}return n}})});class qR extends AR{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function HR(e,t){return e.state.facet(WR).formatNumber(t,e.state)}const KR=RR.compute([WR],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(XR),lineMarker:(e,t,n)=>n.some(e=>e.toDOM)?null:new qR(HR(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,n)=>{for(let r of e.state.facet(YR)){let i=r(e,t,n);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(WR)!=e.state.facet(WR),initialSpacer:e=>new qR(HR(e,JR(e.state.doc.lines))),updateSpacer(e,t){let n=HR(t.view,JR(t.view.state.doc.lines));return n==e.number?e:new qR(n)},domEventHandlers:e.facet(WR).domEventHandlers,side:"before"}));function JR(e){let t=9;for(;t<e;)t=10*t+9;return t}const eQ=new class extends AR{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},tQ=IR.compute(["selection"],e=>{let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(eQ.range(i)))}return Zj.of(t)});const nQ=1024;let rQ=0;class iQ{constructor(e,t){this.from=e,this.to=t}}class oQ{constructor(e={}){this.id=rQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=lQ.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}oQ.closedBy=new oQ({deserialize:e=>e.split(" ")}),oQ.openedBy=new oQ({deserialize:e=>e.split(" ")}),oQ.group=new oQ({deserialize:e=>e.split(" ")}),oQ.isolate=new oQ({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),oQ.contextHash=new oQ({perNode:!0}),oQ.lookAhead=new oQ({perNode:!0}),oQ.mounted=new oQ({perNode:!0});class aQ{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[oQ.mounted.id]}}const sQ=Object.create(null);class lQ{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):sQ,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new lQ(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(oQ.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(oQ.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}lQ.none=new lQ("",Object.create(null),0,8);class uQ{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new lQ(n.name,r,n.id,n.flags):n)}return new uQ(t)}}const cQ=new WeakMap,dQ=new WeakMap;var fQ;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(fQ||(fQ={}));class hQ{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=aQ.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new PQ(this.topNode,e)}cursorAt(e,t=0,n=0){let r=cQ.get(this)||this.topNode,i=new PQ(r);return i.moveTo(e,t),cQ.set(this,i._tree),i}get topNode(){return new bQ(this,0,0,null)}resolve(e,t=0){let n=vQ(cQ.get(this)||this.topNode,e,t,!1);return cQ.set(this,n),n}resolveInner(e,t=0){let n=vQ(dQ.get(this)||this.topNode,e,t,!0);return dQ.set(this,n),n}resolveStack(e,t=0){return function(e,t,n){let r=e.resolveInner(t,n),i=null;for(let e=r instanceof bQ?r:r.context.parent;e;e=e.parent)if(e.index<0){let o=e.parent;(i||(i=[r])).push(o.resolve(t,n)),e=o}else{let o=aQ.get(e.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let a=new bQ(o.tree,o.overlay[0].from+e.from,-1,e);(i||(i=[r])).push(vQ(a,t,n,!1))}}return i?kQ(i):r}(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e,o=e.mode||0,a=(o&fQ.IncludeAnonymous)>0;for(let e=this.cursor(o|fQ.IncludeAnonymous);;){let o=!1;if(e.from<=i&&e.to>=r&&(!a&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;o=!0}for(;o&&n&&(a||!e.type.isAnonymous)&&n(e),!e.nextSibling();){if(!e.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:CQ(lQ.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,n)=>new hQ(this.type,e,t,n,this.propValues),e.makeTree||((e,t,n)=>new hQ(lQ.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=nQ,reused:o=[],minRepeatType:a=r.types.length}=e,s=Array.isArray(n)?new pQ(n,n.length):n,l=r.types,u=0,c=0;function d(e,t,n,y,b,O){let{id:w,start:x,end:S,size:k}=s,_=c,P=u;for(;k<0;){if(s.next(),-1==k){let t=o[w];return n.push(t),void y.push(x-e)}if(-3==k)return void(u=w);if(-4==k)return void(c=w);throw new RangeError(`Unrecognized record size: ${k}`)}let E,$,T=l[w],C=x-e;if(S-x<=i&&($=g(s.pos-t,b))){let t=new Uint16Array($.size-$.skip),n=s.pos-$.size,i=t.length;for(;s.pos>n;)i=v($.start,t,i);E=new mQ(t,S-$.start,r),C=$.start-e}else{let e=s.pos-k;s.next();let t=[],n=[],r=w>=a?w:-1,o=0,l=S;for(;s.pos>e;)r>=0&&s.id==r&&s.size>=0?(s.end<=l-i&&(p(t,n,x,o,s.end,l,r,_,P),o=t.length,l=s.end),s.next()):O>2500?f(x,e,t,n):d(x,e,t,n,r,O+1);if(r>=0&&o>0&&o<t.length&&p(t,n,x,o,x,l,r,_,P),t.reverse(),n.reverse(),r>-1&&o>0){let e=h(T,P);E=CQ(T,t,n,0,t.length,0,S-x,e,e)}else E=m(T,t,n,S-x,_-S,P)}n.push(E),y.push(C)}function f(e,t,n,o){let a=[],l=0,u=-1;for(;s.pos>t;){let{id:e,start:t,end:n,size:r}=s;if(r>4)s.next();else{if(u>-1&&t<u)break;u<0&&(u=n-i),a.push(e,t,n),l++,s.next()}}if(l){let t=new Uint16Array(4*l),i=a[a.length-2];for(let e=a.length-3,n=0;e>=0;e-=3)t[n++]=a[e],t[n++]=a[e+1]-i,t[n++]=a[e+2]-i,t[n++]=n;n.push(new mQ(t,a[2]-i,r)),o.push(i-e)}}function h(e,t){return(n,r,i)=>{let o,a,s=0,l=n.length-1;if(l>=0&&(o=n[l])instanceof hQ){if(!l&&o.type==e&&o.length==i)return o;(a=o.prop(oQ.lookAhead))&&(s=r[l]+o.length+a)}return m(e,n,r,i,s,t)}}function p(e,t,n,i,o,a,s,l,u){let c=[],d=[];for(;e.length>i;)c.push(e.pop()),d.push(t.pop()+n-o);e.push(m(r.types[s],c,d,a-o,l-a,u)),t.push(o-n)}function m(e,t,n,r,i,o,a){if(o){let e=[oQ.contextHash,o];a=a?[e].concat(a):[e]}if(i>25){let e=[oQ.lookAhead,i];a=a?[e].concat(a):[e]}return new hQ(e,t,n,r,a)}function g(e,t){let n=s.fork(),r=0,o=0,l=0,u=n.end-i,c={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){c.size=r,c.start=o,c.skip=l,l+=4,r+=4,n.next();continue}let s=n.pos-e;if(e<0||s<i||n.start<u)break;let d=n.id>=a?4:0,f=n.start;for(n.next();n.pos>s;){if(n.size<0){if(-3!=n.size)break e;d+=4}else n.id>=a&&(d+=4);n.next()}o=f,r+=e,l+=d}return(t<0||r==e)&&(c.size=r,c.start=o,c.skip=l),c.size>4?c:void 0}function v(e,t,n){let{id:r,start:i,end:o,size:l}=s;if(s.next(),l>=0&&r<a){let a=n;if(l>4){let r=s.pos-(l-4);for(;s.pos>r;)n=v(e,t,n)}t[--n]=a,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?u=r:-4==l&&(c=r);return n}let y=[],b=[];for(;s.pos>0;)d(e.start||0,e.bufferStart||0,y,b,-1,0);let O=null!==(t=e.length)&&void 0!==t?t:y.length?b[0]+y[0].length:0;return new hQ(l[e.topID],y.reverse(),b.reverse(),O)}(e)}}hQ.empty=new hQ(lQ.none,[],[],0);class pQ{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new pQ(this.buffer,this.index)}}class mQ{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return lQ.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,a=-1;for(let s=e;s!=t&&!(gQ(i,r,o[s+1],o[s+2])&&(a=s,n>0));s=o[s+3]);return a}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let a=e,s=0;a<t;){i[s++]=r[a++],i[s++]=r[a++]-n;let t=i[s++]=r[a++]-n;i[s++]=r[a++]-e,o=Math.max(o,t)}return new mQ(i,o,this.set)}}function gQ(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function vQ(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof bQ&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:fQ.IgnoreOverlays;if(r)for(let r=e,a=r.parent;a;r=a,a=r.parent)r instanceof bQ&&r.index<0&&(null===(i=a.enter(t,n,o))||void 0===i?void 0:i.from)!=r.from&&(e=a);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class yQ{cursor(e=0){return new PQ(this,e)}getChild(e,t=null,n=null){let r=OQ(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return OQ(this,e,t,n)}resolve(e,t=0){return vQ(this,e,t,!1)}resolveInner(e,t=0){return vQ(this,e,t,!0)}matchContext(e){return wQ(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class bQ extends yQ{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:a,positions:s}=o._tree,l=t>0?a.length:-1;e!=l;e+=t){let l=a[e],u=s[e]+o.from;if(gQ(r,n,u,u+l.length))if(l instanceof mQ){if(i&fQ.ExcludeBuffers)continue;let a=l.findChild(0,l.buffer.length,t,n-u,r);if(a>-1)return new SQ(new xQ(o,l,e,u),null,a)}else if(i&fQ.IncludeAnonymous||!l.type.isAnonymous||EQ(l)){let a;if(!(i&fQ.IgnoreMounts)&&(a=aQ.get(l))&&!a.overlay)return new bQ(a.tree,u,e,o);let s=new bQ(l,u,e,o);return i&fQ.IncludeAnonymous||!s.type.isAnonymous?s:s.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&fQ.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&fQ.IgnoreOverlays)&&(r=aQ.get(this._tree))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new bQ(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function OQ(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(let e=!1;!e;)if(e=i.type.is(n),!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function wQ(e,t,n=t.length-1){for(let r=e;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class xQ{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class SQ extends yQ{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new SQ(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&fQ.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new SQ(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new SQ(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new SQ(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new hQ(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function kQ(e){if(!e.length)return null;let t=0,n=e[0];for(let r=1;r<e.length;r++){let i=e[r];(i.from>n.from||i.to<n.to)&&(n=i,t=r)}let r=n instanceof bQ&&n.index<0?null:n.parent,i=e.slice();return r?i[t]=r:i.splice(t,1),new _Q(i,n)}class _Q{constructor(e,t){this.heads=e,this.node=t}get next(){return kQ(this.heads)}}class PQ{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof bQ)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof bQ?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&fQ.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&fQ.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&fQ.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&fQ.IncludeAnonymous||e instanceof mQ||!e.type.isAnonymous||EQ(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new SQ(this.buffer,t,this.stack[e]);return this.bufferNode=new SQ(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return wQ(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return wQ(this._tree,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function EQ(e){return e.children.some(e=>e instanceof mQ||!e.type.isAnonymous||EQ(e))}const $Q=new WeakMap;function TQ(e,t){if(!e.isAnonymous||t instanceof mQ||t.type!=e)return 1;let n=$Q.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof hQ)){n=1;break}n+=TQ(e,r)}$Q.set(t,n)}return n}function CQ(e,t,n,r,i,o,a,s,l){let u=0;for(let n=r;n<i;n++)u+=TQ(e,t[n]);let c=Math.ceil(1.5*u/8),d=[],f=[];return function t(n,r,i,a,s){for(let u=i;u<a;){let i=u,h=r[u],p=TQ(e,n[u]);for(u++;u<a;u++){let t=TQ(e,n[u]);if(p+t>=c)break;p+=t}if(u==i+1){if(p>c){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+s);continue}d.push(n[i])}else{let t=r[u-1]+n[u-1].length-h;d.push(CQ(e,n,r,i,u,h,t,null,l))}f.push(h+s-o)}}(t,n,r,i,0),(s||l)(d,f,a)}class jQ{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof SQ?this.setBuffer(e.context.buffer,e.index,t):e instanceof bQ&&this.map.set(e.tree,t)}get(e){return e instanceof SQ?this.getBuffer(e.context.buffer,e.index):e instanceof bQ?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class NQ{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new NQ(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let a=0,s=0,l=0;;a++){let u=a<t.length?t[a]:null,c=u?u.fromA:1e9;if(c-s>=n)for(;o&&o.from<c;){let t=o;if(s>=t.from||c<=t.to||l){let e=Math.max(t.from,s)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new NQ(e,n,t.tree,t.offset+l,a>0,!!u)}if(t&&r.push(t),o.to>c)break;o=i<e.length?e[i++]:null}if(!u)break;s=u.toA,l=u.toA-u.toB}return r}}class AQ{startParse(e,t,n){return"string"==typeof e&&(e=new IQ(e)),n=n?n.length?n.map(e=>new iQ(e.from,e.to)):[new iQ(0,0)]:[new iQ(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class IQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new oQ({perNode:!0});let MQ=0;class DQ{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=MQ++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n="string"==typeof e?e:"?";if(e instanceof DQ&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let r=new DQ(n,[],null,[]);if(r.set.push(r),t)for(let e of t.set)r.set.push(e);return r}static defineModifier(e){let t=new QQ(e);return e=>e.modified.indexOf(t)>-1?e:QQ.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let RQ=0;class QQ{constructor(e){this.name=e,this.instances=[],this.id=RQ++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(n=>{return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every((e,t)=>e==i[t]));var r,i});if(n)return n;let r=[],i=new DQ(e.name,r,e,t);for(let e of t)e.instances.push(i);let o=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of o)r.push(QQ.get(t,e));return i}}function zQ(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let a=e[t++];if(t==e.length&&"!"==a){i=0;break}if("/"!=a)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let a=n.length-1,s=n[a];if(!s)throw new RangeError("Invalid path: "+e);let l=new ZQ(r,i,a>0?n.slice(0,a):null);t[s]=l.sort(t[s])}}return LQ.add(t)}const LQ=new oQ;class ZQ{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function FQ(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function UQ(e,t,n,r=0,i=e.length){let o=new VQ(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}ZQ.empty=new ZQ([],2,null);class VQ{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:a,to:s}=e;if(a>=n||s<=t)return;o.isTop&&(i=this.highlighters.filter(e=>!e.scope||e.scope(o)));let l=r,u=function(e){let t=e.type.prop(LQ);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||ZQ.empty,c=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(i,u.tags);if(c&&(l&&(l+=" "),l+=c,1==u.mode&&(r+=(r?" ":"")+c)),this.startSpan(Math.max(t,a),l),u.opaque)return;let d=e.tree&&e.tree.prop(oQ.mounted);if(d&&d.overlay){let o=e.node.enter(d.overlay[0].from+a,1),u=this.highlighters.filter(e=>!e.scope||e.scope(d.tree.type)),c=e.firstChild();for(let f=0,h=a;;f++){let p=f<d.overlay.length?d.overlay[f]:null,m=p?p.from+a:s,g=Math.max(t,h),v=Math.min(n,m);if(g<v&&c)for(;e.from<v&&(this.highlightRange(e,g,v,r,i),this.startSpan(Math.min(v,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;h=p.to+a,h>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+a),Math.min(n,h),"",u),this.startSpan(Math.min(n,h),l))}c&&e.parent()}else if(e.firstChild()){d&&(r="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const GQ=DQ.define,BQ=GQ(),XQ=GQ(),YQ=GQ(XQ),WQ=GQ(XQ),qQ=GQ(),HQ=GQ(qQ),KQ=GQ(qQ),JQ=GQ(),ez=GQ(JQ),tz=GQ(),nz=GQ(),rz=GQ(),iz=GQ(rz),oz=GQ(),az={comment:BQ,lineComment:GQ(BQ),blockComment:GQ(BQ),docComment:GQ(BQ),name:XQ,variableName:GQ(XQ),typeName:YQ,tagName:GQ(YQ),propertyName:WQ,attributeName:GQ(WQ),className:GQ(XQ),labelName:GQ(XQ),namespace:GQ(XQ),macroName:GQ(XQ),literal:qQ,string:HQ,docString:GQ(HQ),character:GQ(HQ),attributeValue:GQ(HQ),number:KQ,integer:GQ(KQ),float:GQ(KQ),bool:GQ(qQ),regexp:GQ(qQ),escape:GQ(qQ),color:GQ(qQ),url:GQ(qQ),keyword:tz,self:GQ(tz),null:GQ(tz),atom:GQ(tz),unit:GQ(tz),modifier:GQ(tz),operatorKeyword:GQ(tz),controlKeyword:GQ(tz),definitionKeyword:GQ(tz),moduleKeyword:GQ(tz),operator:nz,derefOperator:GQ(nz),arithmeticOperator:GQ(nz),logicOperator:GQ(nz),bitwiseOperator:GQ(nz),compareOperator:GQ(nz),updateOperator:GQ(nz),definitionOperator:GQ(nz),typeOperator:GQ(nz),controlOperator:GQ(nz),punctuation:rz,separator:GQ(rz),bracket:iz,angleBracket:GQ(iz),squareBracket:GQ(iz),paren:GQ(iz),brace:GQ(iz),content:JQ,heading:ez,heading1:GQ(ez),heading2:GQ(ez),heading3:GQ(ez),heading4:GQ(ez),heading5:GQ(ez),heading6:GQ(ez),contentSeparator:GQ(JQ),list:GQ(JQ),quote:GQ(JQ),emphasis:GQ(JQ),strong:GQ(JQ),link:GQ(JQ),monospace:GQ(JQ),strikethrough:GQ(JQ),inserted:GQ(),deleted:GQ(),changed:GQ(),invalid:GQ(),meta:oz,documentMeta:GQ(oz),annotation:GQ(oz),processingInstruction:GQ(oz),definition:DQ.defineModifier("definition"),constant:DQ.defineModifier("constant"),function:DQ.defineModifier("function"),standard:DQ.defineModifier("standard"),local:DQ.defineModifier("local"),special:DQ.defineModifier("special")};for(let e in az){let t=az[e];t instanceof DQ&&(t.name=e)}FQ([{tag:az.link,class:"tok-link"},{tag:az.heading,class:"tok-heading"},{tag:az.emphasis,class:"tok-emphasis"},{tag:az.strong,class:"tok-strong"},{tag:az.keyword,class:"tok-keyword"},{tag:az.atom,class:"tok-atom"},{tag:az.bool,class:"tok-bool"},{tag:az.url,class:"tok-url"},{tag:az.labelName,class:"tok-labelName"},{tag:az.inserted,class:"tok-inserted"},{tag:az.deleted,class:"tok-deleted"},{tag:az.literal,class:"tok-literal"},{tag:az.string,class:"tok-string"},{tag:az.number,class:"tok-number"},{tag:[az.regexp,az.escape,az.special(az.string)],class:"tok-string2"},{tag:az.variableName,class:"tok-variableName"},{tag:az.local(az.variableName),class:"tok-variableName tok-local"},{tag:az.definition(az.variableName),class:"tok-variableName tok-definition"},{tag:az.special(az.variableName),class:"tok-variableName2"},{tag:az.definition(az.propertyName),class:"tok-propertyName tok-definition"},{tag:az.typeName,class:"tok-typeName"},{tag:az.namespace,class:"tok-namespace"},{tag:az.className,class:"tok-className"},{tag:az.macroName,class:"tok-macroName"},{tag:az.propertyName,class:"tok-propertyName"},{tag:az.operator,class:"tok-operator"},{tag:az.comment,class:"tok-comment"},{tag:az.meta,class:"tok-meta"},{tag:az.invalid,class:"tok-invalid"},{tag:az.punctuation,class:"tok-punctuation"}]);var sz;const lz=new oQ;function uz(e){return XC.define({combine:e?t=>t.concat(e):void 0})}const cz=new oQ;class dz{constructor(e,t,n=[],r=""){this.data=e,this.name=r,Mj.prototype.hasOwnProperty("tree")||Object.defineProperty(Mj.prototype,"tree",{get(){return pz(this)}}),this.parser=t,this.extension=[Sz.of(this),Mj.languageData.of((e,t,n)=>{let r=fz(e,t,n),i=r.type.prop(lz);if(!i)return[];let o=e.facet(i),a=r.type.prop(cz);if(a){let i=r.resolve(t-r.from,n);for(let t of a)if(t.test(i,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(o)}}return o})].concat(n)}isActiveAt(e,t,n=-1){return fz(e,t,n).type.prop(lz)==this.data}findRegions(e){let t=e.facet(Sz);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(lz)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(oQ.mounted);if(i){if(i.tree.prop(lz)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof hQ&&r(i,e.positions[n]+t)}};return r(pz(e),0),n}get allowsNesting(){return!0}}function fz(e,t,n){let r=e.facet(Sz),i=pz(e).topNode;if(!r||r.allowsNesting)for(let e=i;e;e=e.enter(t,n,fQ.ExcludeBuffers))e.type.isTop&&(i=e);return i}dz.setState=Sj.define();class hz extends dz{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=uz(e.languageData);return new hz(t,e.parser.configure({props:[lz.add(e=>e.isTop?t:void 0)]}),e.name)}configure(e,t){return new hz(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function pz(e){let t=e.field(dz.state,!1);return t?t.tree:hQ.empty}class mz{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let gz=null;class vz{constructor(e,t,n=[],r,i,o,a,s){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=a,this.scheduleOn=s,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new vz(e,t,[],hQ.empty,0,n,[],null)}startParse(){return this.parser.startParse(new mz(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=hQ.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(NQ.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(NQ.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=gz;gz=this;try{return e()}finally{gz=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=yz(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i})),n=NQ.applyChanges(n,t),r=hQ.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&a.push({from:n,to:r})}}}return new vz(this.parser,t,n,r,i,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=yz(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends AQ{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=gz;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new hQ(lQ.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return gz}}function yz(e,t,n){return NQ.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class bz{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new bz(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=vz.create(e.facet(Sz).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new bz(n)}}dz.state=ej.define({create:bz.init,update(e,t){for(let e of t.effects)if(e.is(dz.setState))return e.value;return t.startState.facet(Sz)!=t.state.facet(Sz)?bz.init(t.state):e.apply(t)}});let Oz=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(Oz=e=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const wz="undefined"!=typeof navigator&&(null===(sz=navigator.scheduling)||void 0===sz?void 0:sz.isInputPending)?()=>navigator.scheduling.isInputPending():null,xz=fI.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(dz.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(dz.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Oz(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(dz.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!wz?Math.max(25,e.timeRemaining()-5):1e9),a=i.context.treeLen<r&&n.doc.length>r+1e3,s=i.context.work(()=>wz&&wz()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(s||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:dz.setState.of(new bz(i.context))})),this.chunkBudget>0&&(!s||a)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>lI(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Sz=XC.define({combine:e=>e.length?e[0]:null,enables:e=>[dz.state,xz,mD.contentAttributes.compute([e],t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}})]});class kz{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const _z=XC.define(),Pz=XC.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function Ez(e){let t=e.facet(Pz);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function $z(e,t){let n="",r=e.tabSize,i=e.facet(Pz)[0];if("\t"==i){for(;t>=r;)n+="\t",t-=r;i=" "}for(let e=0;e<t;e++)n+=i;return n}function Tz(e,t){e instanceof Mj&&(e=new Cz(e));for(let n of e.state.facet(_z)){let r=n(e,t);if(void 0!==r)return r}let n=pz(e.state);return n.length>=t?function(e,t,n){let r=t.resolveStack(n),i=t.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let e=[];for(let t=i;t&&!(t.from<r.node.from||t.to>r.node.to||t.from==r.node.from&&t.type==r.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return Nz(r,e,n)}(e,n,t):null}class Cz{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ez(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return Jj(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const jz=new oQ;function Nz(e,t,n){for(let r=e;r;r=r.next){let e=Az(r.node);if(e)return e(Mz.create(t,n,r))}return 0}function Az(e){let t=e.type.prop(jz);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(oQ.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>Qz(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?Iz:null}function Iz(){return 0}class Mz extends Cz{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new Mz(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(Dz(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return Nz(this.context.next,this.base,this.pos)}}function Dz(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function Rz({closing:e,align:t=!0,units:n=1}){return r=>Qz(r,t,n,e)}function Qz(e,t,n,r,i){let o=e.textAfter,a=o.match(/^\s*/)[0].length,s=r&&o.slice(a,a+r.length)==r||i==e.pos+a,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),a=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped){if(i.from>=a)return null;let e=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+e}}e=i.to}}(e):null;return l?s?e.column(l.from):e.column(l.to):e.baseIndent+(s?0:e.unit*n)}function zz({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}const Lz=XC.define(),Zz=new oQ;function Fz(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function Uz(e,t,n){for(let r of e.facet(Lz)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=pz(e);if(r.length<n)return null;let i=null;for(let o=r.resolveStack(n,1);o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(i&&a.from<t)break;let s=a.type.prop(Zz);if(s&&(a.to<r.length-50||r.length==e.doc.length||!Fz(a))){let r=s(a,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(i=r)}}return i}(e,t,n)}function Vz(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const Gz=Sj.define({map:Vz}),Bz=Sj.define({map:Vz});function Xz(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some(e=>e.from<=n&&e.to>=n)||t.push(e.lineBlockAt(n));return t}const Yz=ej.define({create:()=>mA.none,update(e,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((t,n)=>e=Wz(e,t,n)),e=e.map(t.changes);for(let n of t.effects)if(n.is(Gz)&&!Hz(e,n.value.from,n.value.to)){let{preparePlaceholder:r}=t.state.facet(nL),i=r?mA.replace({widget:new aL(r(t.state,n.value))}):oL;e=e.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Bz)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));return t.selection&&(e=Wz(e,t.selection.main.head)),e},provide:e=>mD.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,(e,t)=>{n.push(e,t)}),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],i=e[n++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");t.push(oL.range(r,i))}return mA.set(t,!0)}});function Wz(e,t,n=t){let r=!1;return e.between(t,n,(e,i)=>{e<n&&i>t&&(r=!0)}),r?e.update({filterFrom:t,filterTo:n,filter:(e,r)=>e>=n||r<=t}):e}function qz(e,t,n){var r;let i=null;return null===(r=e.field(Yz,!1))||void 0===r||r.between(t,n,(e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})}),i}function Hz(e,t,n){let r=!1;return e.between(t,t,(e,i)=>{e==t&&i==n&&(r=!0)}),r}function Kz(e,t){return e.field(Yz,!1)?t:t.concat(Sj.appendConfig.of(rL()))}function Jz(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return mD.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}const eL=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of Xz(e)){let n=Uz(e.state,t.from,t.to);if(n)return e.dispatch({effects:Kz(e.state,[Gz.of(n),Jz(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(Yz,!1))return!1;let t=[];for(let n of Xz(e)){let r=qz(e.state,n.from,n.to);r&&t.push(Bz.of(r),Jz(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=Uz(t,i.from,i.to);o&&n.push(Gz.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:Kz(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(Yz,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,(e,t)=>{n.push(Bz.of({from:e,to:t}))}),e.dispatch({effects:n}),!0}}],tL={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},nL=XC.define({combine:e=>Dj(e,tL)});function rL(e){let t=[Yz,uL];return e&&t.push(nL.of(e)),t}function iL(e,t){let{state:n}=e,r=n.facet(nL),i=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=qz(e.state,n.from,n.to);r&&e.dispatch({effects:Bz.of(r)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,i,t);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}const oL=mA.replace({widget:new class extends hA{toDOM(e){return iL(e,null)}}});class aL extends hA{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return iL(e,this.value)}}const sL={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class lL extends AR{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const uL=mD.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class cL{constructor(e,t){let n;function r(e){let t=iN.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof dz?e=>e.prop(lz)==o.data:o?e=>e==o:void 0,this.style=FQ(e.map(e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))})),{all:i}).style,this.module=n?new iN(n):null,this.themeType=t.themeType}static define(e,t){return new cL(e,t||{})}}const dL=XC.define(),fL=XC.define({combine:e=>e.length?[e[0]]:null});function hL(e){let t=e.facet(dL);return t.length?t:e.facet(fL)}function pL(e,t){let n,r=[gL];return e instanceof cL&&(e.module&&r.push(mD.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(fL.of(e)):n?r.push(dL.computeN([mD.darkTheme],t=>t.facet(mD.darkTheme)==("dark"==n)?[e]:[])):r.push(dL.of(e)),r}class mL{constructor(e){this.markCache=Object.create(null),this.tree=pz(e.state),this.decorations=this.buildDeco(e,hL(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=pz(e.state),n=hL(e.state),r=n!=hL(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!r&&t.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return mA.none;let n=new Fj;for(let{from:r,to:i}of e.visibleRanges)UQ(this.tree,t,(e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=mA.mark({class:r})))},r,i);return n.finish()}}const gL=aj.high(fI.fromClass(mL,{decorations:e=>e.decorations})),vL=cL.define([{tag:az.meta,color:"#404740"},{tag:az.link,textDecoration:"underline"},{tag:az.heading,textDecoration:"underline",fontWeight:"bold"},{tag:az.emphasis,fontStyle:"italic"},{tag:az.strong,fontWeight:"bold"},{tag:az.strikethrough,textDecoration:"line-through"},{tag:az.keyword,color:"#708"},{tag:[az.atom,az.bool,az.url,az.contentSeparator,az.labelName],color:"#219"},{tag:[az.literal,az.inserted],color:"#164"},{tag:[az.string,az.deleted],color:"#a11"},{tag:[az.regexp,az.escape,az.special(az.string)],color:"#e40"},{tag:az.definition(az.variableName),color:"#00f"},{tag:az.local(az.variableName),color:"#30a"},{tag:[az.typeName,az.namespace],color:"#085"},{tag:az.className,color:"#167"},{tag:[az.special(az.variableName),az.macroName],color:"#256"},{tag:az.definition(az.propertyName),color:"#00c"},{tag:az.comment,color:"#940"},{tag:az.invalid,color:"#f00"}]),yL=mD.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),bL="()[]{}",OL=XC.define({combine:e=>Dj(e,{afterCursor:!0,brackets:bL,maxScanDistance:1e4,renderMatch:SL})}),wL=mA.mark({class:"cm-matchingBracket"}),xL=mA.mark({class:"cm-nonmatchingBracket"});function SL(e){let t=[],n=e.matched?wL:xL;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const kL=ej.define({create:()=>mA.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(OL);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=TL(t.state,e.head,-1,r)||e.head>0&&TL(t.state,e.head-1,1,r)||r.afterCursor&&(TL(t.state,e.head,1,r)||e.head<t.state.doc.length&&TL(t.state,e.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,t.state)))}return mA.set(n,!0)},provide:e=>mD.decorations.from(e)}),_L=[kL,yL];const PL=new oQ;function EL(e,t,n){let r=e.prop(t<0?oQ.openedBy:oQ.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function $L(e){let t=e.type.prop(PL);return t?t(e.node):e}function TL(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||bL,a=pz(e),s=a.resolveInner(t,n);for(let r=s;r;r=r.parent){let i=EL(r.type,n,o);if(i&&r.from<r.to){let a=$L(r);if(a&&(n>0?t>=a.from&&t<a.to:t>a.from&&t<=a.to))return CL(e,t,n,r,a,i,o)}}return function(e,t,n,r,i,o,a){let s=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),d=0;for(let e=0;!c.next().done&&e<=o;){let o=c.value;n<0&&(e+=o.length);let s=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=a.indexOf(o[e]);if(!(t<0||r.resolveInner(s+e,1).type!=i))if(t%2==0==n>0)d++;else{if(1==d)return{start:u,end:{from:s+e,to:s+e+1},matched:t>>1==l>>1};d--}}n>0&&(e+=o.length)}return c.done?{start:u,matched:!1}:null}(e,t,n,a,s.type,i,o)}function CL(e,t,n,r,i,o,a){let s=r.parent,l={from:i.from,to:i.to},u=0,c=null==s?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==u&&o.indexOf(c.type.name)>-1&&c.from<c.to){let e=$L(c);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(EL(c.type,n,a))u++;else if(EL(c.type,-n,a)){if(0==u){let e=$L(c);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}u--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}const jL=Object.create(null),NL=[lQ.none],AL=[],IL=Object.create(null),ML=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ML[e]=RL(jL,t);function DL(e,t){AL.indexOf(e)>-1||(AL.push(e),console.warn(t))}function RL(e,t){let n=[];for(let r of t.split(" ")){let t=[];for(let n of r.split(".")){let r=e[n]||az[n];r?"function"==typeof r?t.length?t=t.map(r):DL(n,`Modifier ${n} used at start of tag`):t.length?DL(n,`Tag ${n} used as modifier`):t=Array.isArray(r)?r:[r]:DL(n,`Unknown highlighting tag ${n}`)}for(let e of t)n.push(e)}if(!n.length)return 0;let r=t.replace(/ /g,"_"),i=r+" "+n.map(e=>e.id),o=IL[i];if(o)return o.id;let a=IL[i]=lQ.define({id:NL.length,name:r,props:[zQ({[r]:n})]});return NL.push(a),a.id}EA.RTL,EA.LTR;function QL(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}const zL=QL(GL,0),LL=QL(VL,0),ZL=QL((e,t)=>VL(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return t}(t)),0);function FL(e,t){let n=e.languageDataAt("commentTokens",t,1);return n.length?n[0]:{}}const UL=50;function VL(e,t,n=t.selection.ranges){let r=n.map(e=>FL(t,e.from).block);if(!r.every(e=>e))return null;let i=n.map((e,n)=>function(e,{open:t,close:n},r,i){let o,a,s=e.sliceDoc(r-UL,r),l=e.sliceDoc(i,i+UL),u=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(l)[0].length,d=s.length-u;if(s.slice(d-t.length,d)==t&&l.slice(c,c+n.length)==n)return{open:{pos:r-u,margin:u&&1},close:{pos:i+c,margin:c&&1}};i-r<=2*UL?o=a=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+UL),a=e.sliceDoc(i-UL,i));let f=/^\s*/.exec(o)[0].length,h=/\s*$/.exec(a)[0].length,p=a.length-h-n.length;return o.slice(f,f+t.length)==t&&a.slice(p,p+n.length)==n?{open:{pos:r+f+t.length,margin:/\s/.test(o.charAt(f+t.length))?1:0},close:{pos:i-h-n.length,margin:/\s/.test(a.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to));if(2!=e&&!i.every(e=>e))return{changes:t.changes(n.map((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&i.some(e=>e)){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:a}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:a.pos-a.margin,to:a.pos+i.close.length})}return{changes:e}}return null}function GL(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:o}of n){let n=r.length,a=1e9,s=FL(t,e).line;if(s){for(let n=e;n<=o;){let l=t.doc.lineAt(n);if(l.from>i&&(e==o||o>l.from)){i=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,n=l.text.slice(e,e+s.length)==s?e:-1;e<l.text.length&&e<a&&(a=e),r.push({line:l,comment:n,token:s,indent:e,empty:t,single:!1})}n=l.to+1}if(a<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=a);r.length==n+1&&(r[n].single=!0)}}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:n,indent:i,empty:o,single:a}of r)!a&&o||e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const BL=Oj.define(),XL=Oj.define(),YL=XC.define(),WL=XC.define({combine:e=>Dj(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}),qL=ej.define({create:()=>fZ.empty,update(e,t){let n=t.state.facet(WL),r=t.annotation(BL);if(r){let i=nZ.fromTransaction(t,r.selection),o=r.side,a=0==o?e.undone:e.done;return a=i?rZ(a,a.length,n.minDepth,i):sZ(a,t.startState.selection),new fZ(0==o?r.rest:a,0==o?a:r.rest)}let i=t.annotation(XL);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(kj.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=nZ.fromTransaction(t),a=t.annotation(kj.time),s=t.annotation(kj.userEvent);return o?e=e.addChanges(o,a,s,n,t):t.selection&&(e=e.addSelection(t.startState.selection,a,s,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new fZ(e.done.map(nZ.fromJSON),e.undone.map(nZ.fromJSON))});function HL(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(qL,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}const KL=HL(0,!1),JL=HL(1,!1),eZ=HL(0,!0),tZ=HL(1,!0);class nZ{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new nZ(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new nZ(e.changes&&DC.fromJSON(e.changes),[],e.mapped&&MC.fromJSON(e.mapped),e.startSelection&&VC.fromJSON(e.startSelection),e.selectionsAfter.map(VC.fromJSON))}static fromTransaction(e,t){let n=oZ;for(let t of e.startState.facet(YL)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new nZ(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,oZ)}static selection(e){return new nZ(void 0,oZ,void 0,void 0,e)}}function rZ(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function iZ(e,t){return e.length?t.length?e.concat(t):e:t}const oZ=[],aZ=200;function sZ(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-aZ));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),rZ(e,e.length-1,1e9,n.setSelAfter(r)))}return[nZ.selection([t])]}function lZ(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function uZ(e,t){if(!e.length)return e;let n=e.length,r=oZ;for(;n;){let i=cZ(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[nZ.selection(r)]:oZ}function cZ(e,t,n){let r=iZ(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):oZ,n);if(!e.changes)return nZ.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),a=e.mapped?e.mapped.composeDesc(o):o;return new nZ(i,Sj.mapEffects(e.effects,t),a,e.startSelection.map(o),r)}const dZ=/^(input\.type|delete)($|\.)/;class fZ{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new fZ(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,a=o[o.length-1];return o=a&&a.changes&&!a.changes.empty&&e.changes&&(!n||dZ.test(n))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(i,function(e,t){let n=[],r=!1;return e.iterChangedRanges((e,t)=>n.push(e,t)),t.iterChangedRanges((e,t,i,o)=>{for(let e=0;e<n.length;){let t=n[e++],a=n[e++];o>=t&&i<=a&&(r=!0)}}),r}(a.changes,e.changes))||"input.type.compose"==n)?rZ(o,o.length-1,r.minDepth,new nZ(e.changes.compose(a.changes),iZ(Sj.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,oZ)):rZ(o,o.length,r.minDepth,e),new fZ(o,oZ,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:oZ;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=i[i.length-1],a=e,o.ranges.length==a.ranges.length&&0===o.ranges.filter((e,t)=>e.empty!=a.ranges[t].empty).length)?this:new fZ(sZ(this.done,e),this.undone,t,n);var o,a}addMapping(e){return new fZ(uZ(this.done,e),uZ(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1],o=i.selectionsAfter[0]||t.selection;if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:BL.of({side:e,rest:lZ(r),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?oZ:r.slice(0,r.length-1);return i.mapped&&(n=uZ(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:BL.of({side:e,rest:n,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}fZ.empty=new fZ(oZ,oZ);const hZ=[{key:"Mod-z",run:KL,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:JL,preventDefault:!0},{linux:"Ctrl-Shift-z",run:JL,preventDefault:!0},{key:"Mod-u",run:eZ,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:tZ,preventDefault:!0}];function pZ(e,t){return VC.create(e.ranges.map(t),e.mainIndex)}function mZ(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function gZ({state:e,dispatch:t},n){let r=pZ(e.selection,n);return!r.eq(e.selection,!0)&&(t(mZ(e,r)),!0)}function vZ(e,t){return VC.cursor(t?e.to:e.from)}function yZ(e,t){return gZ(e,n=>n.empty?e.moveByChar(n,t):vZ(n,t))}function bZ(e){return e.textDirectionAt(e.state.selection.main.head)==EA.LTR}const OZ=e=>yZ(e,!bZ(e)),wZ=e=>yZ(e,bZ(e));function xZ(e,t){return gZ(e,n=>n.empty?e.moveByGroup(n,t):vZ(n,t))}"undefined"!=typeof Intl&&Intl.Segmenter;function SZ(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function kZ(e,t,n){let r,i,o=pz(e).resolveInner(t.head),a=n?oQ.closedBy:oQ.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;SZ(e,t,a)?o=t:r=n?t.to:t.from}return i=o.type.prop(a)&&(r=n?TL(e,o.from,1):TL(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,VC.cursor(i,n?-1:1)}function _Z(e,t){return gZ(e,n=>{if(!n.empty)return vZ(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}const PZ=e=>_Z(e,!1),EZ=e=>_Z(e,!0);function $Z(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,i=0;if(n){for(let t of e.state.facet(mD.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(r=Math.max(null==n?void 0:n.top,r)),(null==n?void 0:n.bottom)&&(i=Math.max(null==n?void 0:n.bottom,i))}t=e.scrollDOM.clientHeight-r-i}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:i,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function TZ(e,t){let n,r=$Z(e),{state:i}=e,o=pZ(i.selection,n=>n.empty?e.moveVertically(n,t,r.height):vZ(n,t));if(o.eq(i.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(i.selection.main.head),a=e.scrollDOM.getBoundingClientRect(),s=a.top+r.marginTop,l=a.bottom-r.marginBottom;t&&t.top>s&&t.bottom<l&&(n=mD.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-s}))}return e.dispatch(mZ(i,o),{effects:n}),!0}const CZ=e=>TZ(e,!1),jZ=e=>TZ(e,!0);function NZ(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=VC.cursor(r.from+n))}return i}function AZ(e,t,n){let r=!1,i=pZ(e.selection,t=>{let i=TL(e,t.head,-1)||TL(e,t.head,1)||t.head>0&&TL(e,t.head-1,1)||t.head<e.doc.length&&TL(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?VC.range(t.anchor,o):VC.cursor(o)});return!!r&&(t(mZ(e,i)),!0)}function IZ(e,t){let n=pZ(e.state.selection,e=>{let n=t(e);return VC.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return!n.eq(e.state.selection)&&(e.dispatch(mZ(e.state,n)),!0)}function MZ(e,t){return IZ(e,n=>e.moveByChar(n,t))}const DZ=e=>MZ(e,!bZ(e)),RZ=e=>MZ(e,bZ(e));function QZ(e,t){return IZ(e,n=>e.moveByGroup(n,t))}function zZ(e,t){return IZ(e,n=>e.moveVertically(n,t))}const LZ=e=>zZ(e,!1),ZZ=e=>zZ(e,!0);function FZ(e,t){return IZ(e,n=>e.moveVertically(n,t,$Z(e).height))}const UZ=e=>FZ(e,!1),VZ=e=>FZ(e,!0),GZ=({state:e,dispatch:t})=>(t(mZ(e,{anchor:0})),!0),BZ=({state:e,dispatch:t})=>(t(mZ(e,{anchor:e.doc.length})),!0),XZ=({state:e,dispatch:t})=>(t(mZ(e,{anchor:e.selection.main.anchor,head:0})),!0),YZ=({state:e,dispatch:t})=>(t(mZ(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function WZ(e,t){let{state:n}=e,r=n.selection,i=n.selection.ranges.slice();for(let r of n.selection.ranges){let o=n.doc.lineAt(r.head);if(t?o.to<e.state.doc.length:o.from>0)for(let n=r;;){let r=e.moveVertically(n,t);if(r.head<o.from||r.head>o.to){i.some(e=>e.head==r.head)||i.push(r);break}if(r.head==n.head)break;n=r}}return i.length!=r.ranges.length&&(e.dispatch(mZ(n,VC.create(i,i.length-1))),!0)}function qZ(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,i=r.changeByRange(r=>{let{from:i,to:o}=r;if(i==o){let a=t(r);a<i?(n="delete.backward",a=HZ(e,a,!1)):a>i&&(n="delete.forward",a=HZ(e,a,!0)),i=Math.min(i,a),o=Math.max(o,a)}else i=HZ(e,i,!1),o=HZ(e,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:VC.cursor(i,i<r.head?-1:1)}});return!i.changes.empty&&(e.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?mD.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function HZ(e,t,n){if(e instanceof mD)for(let r of e.state.facet(mD.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=n?r:e)});return t}const KZ=(e,t,n)=>qZ(e,r=>{let i,o,a=r.from,{state:s}=e,l=s.doc.lineAt(a);if(n&&!t&&a>l.from&&a<l.from+200&&!/[^ \t]/.test(i=l.text.slice(0,a-l.from))){if("\t"==i[i.length-1])return a-1;let e=Jj(i,s.tabSize)%Ez(s)||Ez(s);for(let t=0;t<e&&" "==i[i.length-1-t];t++)a--;o=a}else o=TC(l.text,a-l.from,t,t)+l.from,o==a&&l.number!=(t?s.doc.lines:1)?o+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(o-l.from,a-l.from))&&(o=TC(l.text,o-l.from,!1,!1)+l.from);return o}),JZ=e=>KZ(e,!1,!0),eF=e=>KZ(e,!0,!1),tF=(e,t)=>qZ(e,n=>{let r=n.head,{state:i}=e,o=i.doc.lineAt(r),a=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n.head&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let s=TC(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,s)-o.from,Math.max(r,s)-o.from),u=a(l);if(null!=e&&u!=e)break;" "==l&&r==n.head||(e=u),r=s}return r}),nF=e=>tF(e,!1);function rF(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function iF(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of rF(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),a=o.length+1;if(n){r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let n of t.ranges)i.push(VC.range(Math.min(e.doc.length,n.anchor+a),Math.min(e.doc.length,n.head+a)))}else{r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)i.push(VC.range(e.anchor-a,e.head-a))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:VC.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function oF(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of rF(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const aF=lF(!1),sF=lF(!0);function lF(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),a=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=pz(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(oQ.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(i.to,o.from))?{from:i.to,to:o.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let s=new Cz(t,{simulateBreak:r,simulateDoubleBreak:!!a}),l=Tz(s,r);for(null==l&&(l=Jj(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));i<o.to&&/\s/.test(o.text[i-o.from]);)i++;a?({from:r,to:i}=a):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let u=["",$z(t,l)];return a&&u.push($z(t,s.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:bC.of(u)},range:VC.cursor(r+1+u[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function uF(e,t){let n=-1;return e.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=e.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(t(a,i,r),n=a.number),o=a.to+1}let o=e.changes(i);return{changes:i,range:VC.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const cF=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(uF(e,(t,n)=>{n.push({from:t.from,insert:e.facet(Pz)})}),{userEvent:"input.indent"})),!0),dF=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(uF(e,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=Jj(r,e.tabSize),o=0,a=$z(e,Math.max(0,i-Ez(e)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),fF=[{key:"Ctrl-b",run:OZ,shift:DZ,preventDefault:!0},{key:"Ctrl-f",run:wZ,shift:RZ},{key:"Ctrl-p",run:PZ,shift:LZ},{key:"Ctrl-n",run:EZ,shift:ZZ},{key:"Ctrl-a",run:e=>gZ(e,t=>VC.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>IZ(e,t=>VC.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>gZ(e,t=>VC.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>IZ(e,t=>VC.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:eF},{key:"Ctrl-h",run:JZ},{key:"Ctrl-k",run:e=>qZ(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:nF},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:bC.of(["",""])},range:VC.cursor(e.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:TC(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:TC(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:VC.cursor(o)}});return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:jZ}],hF=[{key:"ArrowLeft",run:OZ,shift:DZ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>xZ(e,!bZ(e)),shift:e=>QZ(e,!bZ(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>gZ(e,t=>NZ(e,t,!bZ(e))),shift:e=>IZ(e,t=>NZ(e,t,!bZ(e))),preventDefault:!0},{key:"ArrowRight",run:wZ,shift:RZ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>xZ(e,bZ(e)),shift:e=>QZ(e,bZ(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>gZ(e,t=>NZ(e,t,bZ(e))),shift:e=>IZ(e,t=>NZ(e,t,bZ(e))),preventDefault:!0},{key:"ArrowUp",run:PZ,shift:LZ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:GZ,shift:XZ},{mac:"Ctrl-ArrowUp",run:CZ,shift:UZ},{key:"ArrowDown",run:EZ,shift:ZZ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:BZ,shift:YZ},{mac:"Ctrl-ArrowDown",run:jZ,shift:VZ},{key:"PageUp",run:CZ,shift:UZ},{key:"PageDown",run:jZ,shift:VZ},{key:"Home",run:e=>gZ(e,t=>NZ(e,t,!1)),shift:e=>IZ(e,t=>NZ(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:GZ,shift:XZ},{key:"End",run:e=>gZ(e,t=>NZ(e,t,!0)),shift:e=>IZ(e,t=>NZ(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:BZ,shift:YZ},{key:"Enter",run:aF,shift:aF},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:JZ,shift:JZ,preventDefault:!0},{key:"Delete",run:eF,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:nF,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>tF(e,!0),preventDefault:!0},{mac:"Mod-Backspace",run:e=>qZ(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),preventDefault:!0},{mac:"Mod-Delete",run:e=>qZ(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),preventDefault:!0}].concat(fF.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),pF=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>gZ(e,t=>kZ(e.state,t,!bZ(e))),shift:e=>IZ(e,t=>kZ(e.state,t,!bZ(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>gZ(e,t=>kZ(e.state,t,bZ(e))),shift:e=>IZ(e,t=>kZ(e.state,t,bZ(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>iF(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>oF(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>iF(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>oF(e,t,!0)},{key:"Mod-Alt-ArrowUp",run:e=>WZ(e,!1)},{key:"Mod-Alt-ArrowDown",run:e=>WZ(e,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=VC.create([n.main]):n.main.empty||(r=VC.create([VC.cursor(n.main.head)])),!!r&&(t(mZ(e,r)),!0)}},{key:"Mod-Enter",run:sF},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=rF(e).map(({from:t,to:n})=>VC.range(t,Math.min(n+1,e.doc.length)));return t(e.update({selection:VC.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=pZ(e.selection,t=>{let n=pz(e),r=n.resolveStack(t.from,1);if(t.empty){let e=n.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:n}=e;if((n.from<t.from&&n.to>=t.to||n.to>t.to&&n.from<=t.from)&&e.next)return VC.range(n.to,n.from)}return t});return!n.eq(e.selection)&&(t(mZ(e,n)),!0)},preventDefault:!0},{key:"Mod-[",run:dF},{key:"Mod-]",run:cF},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Cz(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=uF(e,(t,i,o)=>{let a=Tz(r,t.from);if(null==a)return;/\S/.test(t.text)||(a=0);let s=/^\s*/.exec(t.text)[0],l=$z(e,a);(s!=l||o.from<t.from+s.length)&&(n[t.from]=a,i.push({from:t.from,to:t.from+s.length,insert:l}))});return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(rF(t).map(({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n}))),r=pZ(t.selection,t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),i=e.coordsAtPos(t.head,t.assoc||1);i&&(n=r.bottom+e.documentTop-i.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>AZ(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=FL(e.state,n.from);return r.line?zL(e):!!r.block&&ZL(e)}},{key:"Alt-A",run:LL},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat(hF),mF={key:"Tab",run:cF,shift:dF};function gF(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)vF(e,arguments[t]);return e}function vF(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)vF(e,t[n])}}const yF="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class bF{constructor(e,t,n=0,r=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(yF(e)):yF,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return CC(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=jC(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=NC(e);let r=this.normalize(t);if(r.length)for(let e=0,i=n;;e++){let o=r.charCodeAt(e),a=this.match(o,i,this.bufferPos+this.bufferStart);if(e==r.length-1){if(a)return this.value=a,this;break}i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t,n){let r=null;for(let t=0;t<this.matches.length;t+=2){let i=this.matches[t],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?r={from:this.matches[t+1],to:n}:(this.matches[t]++,o=!0)),o||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:n}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}"undefined"!=typeof Symbol&&(bF.prototype[Symbol.iterator]=function(){return this});const OF={from:-1,to:-1,match:/.*/.exec("")},wF="gm"+(null==/x/.unicode?"":"u");class xF{constructor(e,t,n,r=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=OF,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new _F(e,t,n,r,i);this.re=new RegExp(t,wF+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=PF(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=PF(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const SF=new WeakMap;class kF{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=SF.get(e);if(!r||r.from>=n||r.to<=t){let r=new kF(t,e.sliceString(t,n));return SF.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),SF.set(e,new kF(o,i)),new kF(t,i.slice(t-o,n-o))}}class _F{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=OF,this.matchPos=PF(e,r),this.re=new RegExp(t,wF+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=kF.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=PF(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=kF.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function PF(e,t){if(t>=e.length)return t;let n,r=e.lineAt(t);for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function EF(e){let t=gF("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,a,s,l]=n,u=s?+s.slice(1):0,c=a?+a:i.number;if(a&&l){let e=c/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),c=Math.round(r.doc.lines*e)}else a&&o&&(c=c*("-"==o?-1:1)+i.number);let d=r.doc.line(Math.max(1,Math.min(r.doc.lines,c))),f=VC.cursor(d.from+Math.max(0,Math.min(u,d.length)));e.dispatch({effects:[$F.of(!1),mD.scrollIntoView(f.from,{y:"center"})],selection:f}),e.focus()}return{dom:gF("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:$F.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},gF("label",e.state.phrase("Go to line"),": ",t)," ",gF("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),gF("button",{name:"close",onclick:()=>{e.dispatch({effects:$F.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},["×"]))}}"undefined"!=typeof Symbol&&(xF.prototype[Symbol.iterator]=_F.prototype[Symbol.iterator]=function(){return this});const $F=Sj.define(),TF=ej.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is($F)&&(e=n.value);return e},provide:e=>NR.from(e,e=>e?EF:null)}),CF=mD.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),jF={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},NF=XC.define({combine:e=>Dj(e,jF,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const AF=mA.mark({class:"cm-selectionMatch"}),IF=mA.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function MF(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==jj.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==jj.Word)}const DF=fI.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(NF),{state:n}=e,r=n.selection;if(r.ranges.length>1)return mA.none;let i,o=r.main,a=null;if(o.empty){if(!t.highlightWordAroundCursor)return mA.none;let e=n.wordAt(o.head);if(!e)return mA.none;a=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return mA.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),a=n.charCategorizer(o.head),!MF(a,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==jj.Word&&e(t.sliceDoc(r-1,r))==jj.Word}(a,n,o.from,o.to))return mA.none}else if(i=n.sliceDoc(o.from,o.to),!i)return mA.none}let s=[];for(let r of e.visibleRanges){let e=new bF(n.doc,i,r.from,r.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!a||MF(a,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?s.push(IF.range(r,i)):(r>=o.to||i<=o.from)&&s.push(AF.range(r,i)),s.length>t.maxMatches))return mA.none}}return mA.set(s)}},{decorations:e=>e.decorations}),RF=mD.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const QF=XC.define({combine:e=>Dj(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new hU(e),scrollToMatch:e=>mD.scrollIntoView(e)})});class zF{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,wF),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new BF(this):new FF(this)}getCursor(e,t=0,n){let r=e.doc?e:Mj.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?UF(this,r,t,n):ZF(this,r,t,n)}}class LF{constructor(e){this.spec=e}}function ZF(e,t,n,r){return new bF(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=e.sliceString(o,Math.min(e.length,r+2))),!(t(VF(i,n-o))==jj.Word&&t(GF(i,n-o))==jj.Word||t(GF(i,r-o))==jj.Word&&t(VF(i,r-o))==jj.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class FF extends LF{constructor(e){super(e)}nextMatch(e,t,n){let r=ZF(this.spec,e,n,e.doc.length).nextOverlapping();if(r.done){let n=Math.min(e.doc.length,t+this.spec.unquoted.length);r=ZF(this.spec,e,0,n).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==n?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=ZF(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),!r||r.from==t&&r.to==n?null:r}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=ZF(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=ZF(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function UF(e,t,n,r){return new xF(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(i=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(i(VF(n.input,n.index))!=jj.Word||i(GF(n.input,n.index))!=jj.Word)&&(i(GF(n.input,n.index+n[0].length))!=jj.Word||i(VF(n.input,n.index+n[0].length))!=jj.Word)):void 0},n,r);var i}function VF(e,t){return e.slice(TC(e,t,!1),t)}function GF(e,t){return e.slice(t,TC(e,t))}class BF extends LF{nextMatch(e,t,n){let r=UF(this.spec,e,n,e.doc.length).next();return r.done&&(r=UF(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=UF(this.spec,e,i,n),a=null;for(;!o.next().done;)a=o.value;if(a&&(i==t||a.from>i+10))return a;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if("&"==n)return e.match[0];if("$"==n)return"$";for(let t=n.length;t>0;t--){let r=+n.slice(0,t);if(r>0&&r<e.match.length)return e.match[r]+n.slice(t)}return t})}matchAll(e,t){let n=UF(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=UF(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const XF=Sj.define(),YF=Sj.define(),WF=ej.define({create:e=>new qF(sU(e).create(),null),update(e,t){for(let n of t.effects)n.is(XF)?e=new qF(n.value.create(),e.panel):n.is(YF)&&(e=new qF(e.query,n.value?aU:null));return e},provide:e=>NR.from(e,e=>e.panel)});class qF{constructor(e,t){this.query=e,this.panel=t}}const HF=mA.mark({class:"cm-searchMatch"}),KF=mA.mark({class:"cm-searchMatch cm-searchMatch-selected"}),JF=fI.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(WF))}update(e){let t=e.state.field(WF);(t!=e.startState.field(WF)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return mA.none;let{view:n}=this,r=new Fj;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:a,to:s}=i[t];for(;t<o-1&&s>i[t+1].from-500;)s=i[++t].to;e.highlight(n.state,a,s,(e,t)=>{let i=n.state.selection.ranges.some(n=>n.from==e&&n.to==t);r.add(e,t,i?KF:HF)})}return r.finish()}},{decorations:e=>e.decorations});function eU(e){return t=>{let n=t.state.field(WF,!1);return n&&n.query.spec.valid?e(t,n):cU(t)}}const tU=eU((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);if(!r)return!1;let i=VC.single(r.from,r.to),o=e.state.facet(QF);return e.dispatch({selection:i,effects:[vU(e,r),o.scrollToMatch(i.main,e)],userEvent:"select.search"}),uU(e),!0}),nU=eU((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,i=t.prevMatch(n,r,r);if(!i)return!1;let o=VC.single(i.from,i.to),a=e.state.facet(QF);return e.dispatch({selection:o,effects:[vU(e,i),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),uU(e),!0}),rU=eU((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:VC.create(n.map(e=>VC.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),iU=eU((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n,r,r);if(!o)return!1;let a,s,l=o,u=[],c=[];l.from==r&&l.to==i&&(s=n.toText(t.getReplacement(l)),u.push({from:l.from,to:l.to,insert:s}),l=t.nextMatch(n,l.from,l.to),c.push(mD.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let d=e.state.changes(u);return l&&(a=VC.single(l.from,l.to).map(d),c.push(vU(e,l)),c.push(n.facet(QF).scrollToMatch(a.main,e))),e.dispatch({changes:d,selection:a,effects:c,userEvent:"input.replace"}),!0}),oU=eU((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}});if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:mD.announce.of(r),userEvent:"input.replace.all"}),!0});function aU(e){return e.state.facet(QF).createPanel(e)}function sU(e,t){var n,r,i,o,a;let s=e.selection.main,l=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!l)return t;let u=e.facet(QF);return new zF({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==t?void 0:t.caseSensitive)&&void 0!==r?r:u.caseSensitive,literal:null!==(i=null==t?void 0:t.literal)&&void 0!==i?i:u.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:u.regexp,wholeWord:null!==(a=null==t?void 0:t.wholeWord)&&void 0!==a?a:u.wholeWord})}function lU(e){let t=$R(e,aU);return t&&t.dom.querySelector("[main-field]")}function uU(e){let t=lU(e);t&&t==e.root.activeElement&&t.select()}const cU=e=>{let t=e.state.field(WF,!1);if(t&&t.panel){let n=lU(e);if(n&&n!=e.root.activeElement){let r=sU(e.state,t.query.spec);r.valid&&e.dispatch({effects:XF.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[YF.of(!0),t?XF.of(sU(e.state,t.query.spec)):Sj.appendConfig.of(bU)]});return!0},dU=e=>{let t=e.state.field(WF,!1);if(!t||!t.panel)return!1;let n=$R(e,aU);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:YF.of(!1)}),!0},fU=[{key:"Mod-f",run:cU,scope:"editor search-panel"},{key:"F3",run:tU,shift:nU,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:tU,shift:nU,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:dU,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],a=0;for(let t=new bF(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(a=o.length),o.push(VC.range(t.value.from,t.value.to))}return t(e.update({selection:VC.create(o,a),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=$R(e,EF);if(!t){let n=[$F.of(!0)];null==e.state.field(TF,!1)&&n.push(Sj.appendConfig.of([TF,CF])),e.dispatch({effects:n}),t=$R(e,EF)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(e=>e.from===e.to))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=VC.create(n.ranges.map(t=>e.wordAt(t.head)||VC.cursor(t.head)),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=r))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new bF(e.doc,t,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some(e=>e.from==i.value.from))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}if(n)return null;i=new bF(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(VC.range(i.from,i.to),!1),effects:mD.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class hU{constructor(e){this.view=e;let t=this.query=e.state.field(WF).query.spec;function n(e,t,n){return gF("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=gF("input",{value:t.search,placeholder:pU(e,"Find"),"aria-label":pU(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=gF("input",{value:t.replace,placeholder:pU(e,"Replace"),"aria-label":pU(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=gF("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=gF("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=gF("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=gF("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",()=>tU(e),[pU(e,"next")]),n("prev",()=>nU(e),[pU(e,"previous")]),n("select",()=>rU(e),[pU(e,"all")]),gF("label",null,[this.caseField,pU(e,"match case")]),gF("label",null,[this.reField,pU(e,"regexp")]),gF("label",null,[this.wordField,pU(e,"by word")]),...e.state.readOnly?[]:[gF("br"),this.replaceField,n("replace",()=>iU(e),[pU(e,"replace")]),n("replaceAll",()=>oU(e),[pU(e,"replace all")])],gF("button",{name:"close",onclick:()=>dU(e),"aria-label":pU(e,"close"),type:"button"},["×"])])}commit(){let e=new zF({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:XF.of(e)}))}keydown(e){var t,n,r;t=this.view,n=e,r="search-panel",TD(_D(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?nU:tU)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),iU(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(XF)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(QF).top}}function pU(e,t){return e.state.phrase(t)}const mU=30,gU=/[\s\.,:;?!]/;function vU(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),i=e.state.doc.lineAt(n).to,o=Math.max(r.from,t-mU),a=Math.min(i,n+mU),s=e.state.sliceDoc(o,a);if(o!=r.from)for(let e=0;e<mU;e++)if(!gU.test(s[e+1])&&gU.test(s[e])){s=s.slice(e);break}if(a!=i)for(let e=s.length-1;e>s.length-mU;e--)if(!gU.test(s[e-1])&&gU.test(s[e])){s=s.slice(0,e);break}return mD.announce.of(`${e.state.phrase("current match")}. ${s} ${e.state.phrase("on line")} ${r.number}.`)}const yU=mD.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),bU=[WF,aj.low(JF),yU];class OU{constructor(e,t,n,r){this.state=e,this.pos=t,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=pz(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(PU(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function wU(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function xU(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[n,r]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=wU(t)+wU(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}function SU(e,t){return n=>{for(let t=pz(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class kU{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function _U(e){return e.selection.main.from}function PU(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const EU=Oj.define();function $U(e,t,n,r){let{main:i}=e.selection,o=n-i.from,a=r-i.from;return{...e.changeByRange(s=>{if(s!=i&&n!=r&&e.sliceDoc(s.from+o,s.from+a)!=e.sliceDoc(n,r))return{range:s};let l=e.toText(t);return{changes:{from:s.from+o,to:r==i.from?s.to:s.from+a,insert:l},range:VC.cursor(s.from+o+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const TU=new WeakMap;function CU(e){if(!Array.isArray(e))return e;let t=TU.get(e);return t||TU.set(e,t=xU(e)),t}const jU=Sj.define(),NU=Sj.define();class AU{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=CC(e,t),r=NC(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(CC(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=CC(e,0),i=NC(r),o=i==e.length?0:-100;if(r==t[0]);else{if(r!=n[0])return null;o+=-200}return this.ret(o,[0,i])}let a=e.indexOf(this.pattern);if(0==a)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let s=t.length,l=0;if(a<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<s;){let o=CC(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=NC(o)}if(l<s)return null}let u=0,c=0,d=!1,f=0,h=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),v=0;r<l&&c<s;){let l=CC(e,r);a<0&&(u<s&&l==t[u]&&(i[u++]=r),f<s&&(l==t[f]||l==n[f]?(0==f&&(h=r),p=r+1,f++):f=0));let y,b=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(y=jC(l))!=y.toLowerCase()?1:y!=y.toUpperCase()?2:0;(!r||1==b&&m||0==v&&0!=b)&&(t[c]==l||n[c]==l&&(d=!0)?o[c++]=r:o.length&&(g=!1)),v=b,r+=NC(l)}return c==s&&0==o[0]&&g?this.result((d?-200:0)-100,o,e):f==s&&0==h?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==s?this.ret(-900-e.length,[h,p]):c==s?this.result((d?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[],i=0;for(let e of t){let t=e+(this.astral?NC(CC(n,e)):1);i&&r[i-1]==e?r[i-1]=t:(r[i++]=e,r[i++]=t)}return this.ret(e-n.length,r)}}class IU{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const MU=XC.define({combine:e=>Dj(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:RU,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>DU(e(n),t(n)),optionClass:(e,t)=>n=>DU(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function DU(e,t){return e?t?e+" "+t:e:t}function RU(e,t,n,r,i,o){let a,s,l=e.textDirection==EA.RTL,u=l,c=!1,d="top",f=t.left-i.left,h=i.right-t.right,p=r.right-r.left,m=r.bottom-r.top;if(u&&f<Math.min(p,h)?u=!1:!u&&h<Math.min(p,f)&&(u=!0),p<=(u?f:h))a=Math.max(i.top,Math.min(n.top,i.bottom-m))-t.top,s=Math.min(400,u?f:h);else{c=!0,s=Math.min(400,(l?t.right:i.right-t.left)-30);let e=i.bottom-t.bottom;e>=m||e>t.top?a=n.bottom-t.top:(d="bottom",a=t.bottom-n.top)}return{style:`${d}: ${a/((t.bottom-t.top)/o.offsetHeight)}px; max-width: ${s/((t.right-t.left)/o.offsetWidth)}px`,class:"cm-completionInfo-"+(c?l?"left-narrow":"right-narrow":u?"left":"right")}}function QU(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class zU{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:o}=r.open,a=e.state.facet(MU);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,r){let i=document.createElement("span");i.className="cm-completionLabel";let o=e.displayLabel||e.label,a=0;for(let e=0;e<r.length;){let t=r[e++],n=r[e++];t>a&&i.appendChild(document.createTextNode(o.slice(a,t)));let s=i.appendChild(document.createElement("span"));s.appendChild(document.createTextNode(o.slice(t,n))),s.className="cm-completionMatchedText",a=n}return a<o.length&&i.appendChild(document.createTextNode(o.slice(a))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=QU(i.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",n=>{let{options:r}=e.state.field(t).open;for(let t,i=n.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(t=/-(\d+)$/.exec(i.id))&&+t[1]<r.length)return this.applyCompletion(e,r[+t[1]]),void n.preventDefault()}),this.dom.addEventListener("focusout",t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(MU).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:NU.of(null)})}),this.showOptions(i,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:i,selected:o,disabled:a}=n.open;r.open&&r.open.options==i||(this.range=QU(i.length,o,e.state.facet(MU).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),a!=(null===(t=r.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=QU(t.options.length,t.selected,this.view.state.facet(MU).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)}).catch(e=>lI(this.view.state,e,"completion info")):this.addInfoPane(i,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;n.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)"LI"==n.nodeName&&n.id?r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):r--;return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.height/e.offsetHeight;r.top<n.top?e.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(e.scrollTop+=(r.bottom-n.bottom)/i)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.documentElement;i={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return r.top>Math.min(i.bottom,t.bottom)-10||r.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(MU).positionInfo(this.view,t,r,n,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",e=>{e.target==r&&e.preventDefault()});let i=null;for(let o=n.from;o<n.to;o++){let{completion:a,match:s}=e[o],{section:l}=a;if(l){let e="string"==typeof l?l:l.name;if(e!=i&&(o>n.from||0==n.from))if(i=e,"string"!=typeof l&&l.header)r.appendChild(l.header(l));else{r.appendChild(document.createElement("completion-section")).textContent=e}}const u=r.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let c=this.optionClass(a);c&&(u.className=c);for(let e of this.optionContent){let t=e(a,this.view.state,this.view,s);t&&u.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function LU(e,t){return n=>new zU(n,e,t)}function ZU(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class FU{constructor(e,t,n,r,i,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new FU(this.options,BU(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,i,o){if(r&&!o&&e.some(e=>e.isPending))return r.setDisabled();let a=function(e,t){let n=[],r=null,i=null,o=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some(t=>t.name==e)||r.push("string"==typeof t?{name:e}:t)}},a=t.facet(MU);for(let r of e)if(r.hasResult()){let e=r.result.getMatch;if(!1===r.result.filter)for(let t of r.result.options)o(new kU(t,r.source,e?e(t):[],1e9-n.length));else{let n,s=t.sliceDoc(r.from,r.to),l=a.filterStrict?new IU(s):new AU(s);for(let t of r.result.options)if(n=l.match(t.label)){let a=t.displayLabel?e?e(t,n.matched):[]:n.matched,s=n.score+(t.boost||0);if(o(new kU(t,r.source,a,s)),"object"==typeof t.section&&"dynamic"===t.section.rank){let{name:e}=t.section;i||(i=Object.create(null)),i[e]=Math.max(s,i[e]||-1e9)}}}}if(r){let e=Object.create(null),t=0,o=(e,t)=>("dynamic"===e.rank&&"dynamic"===t.rank?i[t.name]-i[e.name]:0)||("number"==typeof e.rank?e.rank:1e9)-("number"==typeof t.rank?t.rank:1e9)||(e.name<t.name?-1:1);for(let n of r.sort(o))t-=1e5,e[n.name]=t;for(let t of n){let{section:n}=t.completion;n&&(t.score+=e["string"==typeof n?n:n.name])}}let s=[],l=null,u=a.compareCompletions;for(let e of n.sort((e,t)=>t.score-e.score||u(e.completion,t.completion))){let t=e.completion;!l||l.label!=t.label||l.detail!=t.detail||null!=l.type&&null!=t.type&&l.type!=t.type||l.apply!=t.apply||l.boost!=t.boost?s.push(e):ZU(e.completion)>ZU(l)&&(s[s.length-1]=e),l=e.completion}return s}(e,t);if(!a.length)return r&&e.some(e=>e.isPending)?r.setDisabled():null;let s=t.facet(MU).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<a.length;t++)if(a[t].completion==e){s=t;break}}return new FU(a,BU(n,s),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:tV,above:i.aboveCursor},r?r.timestamp:Date.now(),s,!1)}map(e){return new FU(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new FU(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class UU{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new UU(XU,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(MU),r=(n.override||t.languageDataAt("autocomplete",_U(t)).map(CU)).map(t=>(this.active.find(e=>e.source==t)||new WU(t,this.active.some(e=>0!=e.state)?1:0)).update(e,n));r.length==this.active.length&&r.every((e,t)=>e==this.active[t])&&(r=this.active);let i=this.open,o=e.effects.some(e=>e.is(HU));i&&e.docChanged&&(i=i.map(e.changes)),e.selection||r.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult();)n++;for(;r<t.length&&!t[r].hasResult();)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)||o?i=FU.build(r,t,this.id,i,n,o):i&&i.disabled&&!r.some(e=>e.isPending)&&(i=null),!i&&r.every(e=>!e.isPending)&&r.some(e=>e.hasResult())&&(r=r.map(e=>e.hasResult()?new WU(e.source,0):e));for(let t of e.effects)t.is(KU)&&(i=i&&i.setSelected(t.value,this.id));return r==this.active&&i==this.open?this:new UU(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?VU:GU}}const VU={"aria-autocomplete":"list"},GU={};function BU(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const XU=[];function YU(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(EU);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class WU{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let n=YU(e,t),r=this;(8&n||16&n&&this.touches(e))&&(r=new WU(r.source,0)),4&n&&0==r.state&&(r=new WU(this.source,1)),r=r.updateFor(e,n);for(let t of e.effects)if(t.is(jU))r=new WU(r.source,1,t.value);else if(t.is(NU))r=new WU(r.source,0);else if(t.is(HU))for(let e of t.value)e.source==r.source&&(r=e);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(_U(e.state))}}class qU extends WU{constructor(e,t,n,r,i,o){super(e,3,t),this.limit=n,this.result=r,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=_U(e.state);if(a>o||!r||2&t&&(_U(e.startState)==this.from||a<this.limit))return new WU(this.source,4&t?1:0);let s=e.changes.mapPos(this.limit);return function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):PU(e,!0).test(i)}(r.validFor,e.state,i,o)?new qU(this.source,this.explicit,s,r,i,o):r.update&&(r=r.update(r,i,o,new OU(e.state,a,!1)))?new qU(this.source,this.explicit,s,r,r.from,null!==(n=r.to)&&void 0!==n?n:_U(e.state)):new WU(this.source,1,this.explicit)}map(e){if(e.empty)return this;return(this.result.map?this.result.map(this.result,e):this.result)?new qU(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new WU(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}const HU=Sj.define({map:(e,t)=>e.map(e=>e.map(t))}),KU=Sj.define(),JU=ej.define({create:()=>UU.start(),update:(e,t)=>e.update(t),provide:e=>[yR.from(e,e=>e.tooltip),mD.contentAttributes.from(e,e=>e.attrs)]});function eV(e,t){const n=t.completion.apply||t.completion.label;let r=e.state.field(JU).active.find(e=>e.source==t.source);return r instanceof qU&&("string"==typeof n?e.dispatch({...$U(e.state,n,r.from,r.to),annotations:EU.of(t.completion)}):n(e,t.completion,r.from,r.to),!0)}const tV=LU(JU,eV);function nV(e,t="option"){return n=>{let r=n.state.field(JU,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(MU).interactionDelay)return!1;let i,o=1;"page"==t&&(i=_R(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,s=r.open.selected>-1?r.open.selected+o*(e?1:-1):e?0:a-1;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:KU.of(s)}),!0}}const rV=e=>!!e.state.field(JU,!1)&&(e.dispatch({effects:jU.of(!0)}),!0);class iV{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const oV=fI.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(JU).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(JU),n=e.state.facet(MU);if(!e.selectionSet&&!e.docChanged&&e.startState.field(JU)==t)return;let r=e.transactions.some(e=>{let t=YU(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let n=this.running[t];if(r||n.context.abortOnDocChange&&e.docChanged||n.updates.length+e.transactions.length>50&&Date.now()-n.time>1e3){for(let e of n.context.abortListeners)try{e()}catch(e){lI(this.view.state,e)}n.context.abortListeners=null,this.running.splice(t--,1)}else n.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(jU)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),i):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(JU);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(MU).updateSyncTime))}startQuery(e){let{state:t}=this.view,n=_U(t),r=new OU(t,n,e.explicit,this.view),i=new iV(e,r);this.running.push(i),Promise.resolve(e.source(r)).then(e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:NU.of(null)}),lI(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(MU).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(MU),r=this.view.state.field(JU);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(void 0===o.done)continue;if(this.running.splice(i--,1),o.done){let r=_U(o.updates.length?o.updates[0].startState:this.view.state),i=Math.min(r,o.done.from+(o.active.explicit?0:1)),a=new qU(o.active.source,o.active.explicit,i,o.done,o.done.from,null!==(e=o.done.to)&&void 0!==e?e:r);for(let e of o.updates)a=a.update(e,n);if(a.hasResult()){t.push(a);continue}}let a=r.active.find(e=>e.source==o.active.source);if(a&&a.isPending)if(null==o.done){let e=new WU(o.active.source,0);for(let t of o.updates)e=e.update(t,n);e.isPending||t.push(e)}else this.startQuery(a)}(t.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:HU.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(JU,!1);if(t&&t.tooltip&&this.view.state.facet(MU).closeOnBlur){let n=t.open&&_R(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:NU.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:jU.of(!1)}),20),this.composing=0}}}),aV="object"==typeof navigator&&/Win/.test(navigator.platform),sV=aj.highest(mD.domEventHandlers({keydown(e,t){let n=t.state.field(JU,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&(!aV||!e.altKey)||e.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(e=>e.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&eV(t,r),!1}})),lV=mD.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class uV{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class cV{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,IC.TrackDel),n=e.mapPos(this.to,1,IC.TrackDel);return null==t||null==n?null:new cV(this.field,t,n)}}class dV{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],i=e.doc.lineAt(t),o=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=o,a=/^\t*/.exec(i)[0].length;for(let t=0;t<a;t++)n+=e.facet(Pz);r.push(t+n.length-a),i=n+i.slice(a)}n.push(i),t+=i.length+1}let a=this.fieldPositions.map(e=>new cV(e.field,r[e.line]+e.from,r[e.line]+e.to));return{text:n,ranges:a}}static parse(e){let t,n=[],r=[],i=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let e=t[1]?+t[1]:null,a=t[2]||t[3]||"",s=-1,l=a.replace(/\\[{}]/g,e=>e[1]);for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:l&&n[t].name==l)&&(s=t);if(s<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:l}),s=t;for(let e of i)e.field>=s&&e.field++}for(let e of i)if(e.line==r.length&&e.from>t.index){let n=t[2]?3+(t[1]||"").length:2;e.from-=n,e.to-=n}i.push(new uV(s,r.length,t.index,t.index+l.length)),o=o.slice(0,t.index)+a+o.slice(t.index+t[0].length)}o=o.replace(/\\([{}])/g,(e,t,n)=>{for(let e of i)e.line==r.length&&e.from>n&&(e.from--,e.to--);return t}),r.push(o)}return new dV(r,i)}}let fV=mA.widget({widget:new class extends hA{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),hV=mA.mark({class:"cm-snippetField"});class pV{constructor(e,t){this.ranges=e,this.active=t,this.deco=mA.set(e.map(e=>(e.from==e.to?fV:hV).range(e.from,e.to)),!0)}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new pV(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}const mV=Sj.define({map:(e,t)=>e&&e.map(t)}),gV=Sj.define(),vV=ej.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(mV))return n.value;if(n.is(gV)&&e)return new pV(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>mD.decorations.from(e,e=>e?e.deco:mA.none)});function yV(e,t){return VC.create(e.filter(e=>e.field==t).map(e=>VC.range(e.from,e.to)))}function bV(e){let t=dV.parse(e);return(e,n,r,i)=>{let{text:o,ranges:a}=t.instantiate(e.state,r),{main:s}=e.state.selection,l={changes:{from:r,to:i==s.from?s.to:i,insert:bC.of(o)},scrollIntoView:!0,annotations:n?[EU.of(n),kj.userEvent.of("input.complete")]:void 0};if(a.length&&(l.selection=yV(a,0)),a.some(e=>e.field>0)){let t=new pV(a,0),n=l.effects=[mV.of(t)];void 0===e.state.field(vV,!1)&&n.push(Sj.appendConfig.of([vV,SV,_V,lV]))}e.dispatch(e.state.update(l))}}function OV(e){return({state:t,dispatch:n})=>{let r=t.field(vV,!1);if(!r||e<0&&0==r.active)return!1;let i=r.active+e,o=e>0&&!r.ranges.some(t=>t.field==i+e);return n(t.update({selection:yV(r.ranges,i),effects:mV.of(o?null:new pV(r.ranges,i)),scrollIntoView:!0})),!0}}const wV=[{key:"Tab",run:OV(1),shift:OV(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(vV,!1)&&(t(e.update({effects:mV.of(null)})),!0)}],xV=XC.define({combine:e=>e.length?e[0]:wV}),SV=aj.highest(SD.compute([xV],e=>e.facet(xV)));function kV(e,t){return{...t,apply:bV(e)}}const _V=mD.domEventHandlers({mousedown(e,t){let n,r=t.state.field(vV,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=r.ranges.find(e=>e.from<=n&&e.to>=n);return!(!i||i.field==r.active)&&(t.dispatch({selection:yV(r.ranges,i.field),effects:mV.of(r.ranges.some(e=>e.field>i.field)?new pV(r.ranges,i.field):null),scrollIntoView:!0}),!0)}});const PV={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},EV=Sj.define({map(e,t){let n=t.mapPos(e,-1,IC.TrackAfter);return null==n?void 0:n}}),$V=new class extends Rj{};$V.startSide=1,$V.endSide=-1;const TV=ej.define({create:()=>Zj.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(EV)&&(e=e.update({add:[$V.range(n.value,n.value+1)]}));return e}});const CV="()[]{}<>«»»«［］｛｝";function jV(e){for(let t=0;t<16;t+=2)if(CV.charCodeAt(t)==e)return CV.charAt(t+1);return jC(e<128?e:e+1)}function NV(e,t){return e.languageDataAt("closeBrackets",t)[0]||PV}const AV="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),IV=mD.inputHandler.of((e,t,n,r)=>{if((AV?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==NC(CC(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=NV(e,e.selection.main.head),r=n.brackets||PV.brackets;for(let i of r){let o=jV(CC(i,0));if(t==i)return o==i?LV(e,i,r.indexOf(i+i+i)>-1,n):QV(e,i,o,n.before||PV.before);if(t==o&&DV(e,e.selection.main.from))return zV(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)}),MV=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=NV(e,e.selection.main.head).brackets||PV.brackets,r=null,i=e.changeByRange(t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return NC(CC(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==r&&RV(e.doc,t.head)==jV(CC(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:VC.cursor(t.head-i.length)}}return{range:r=t}});return r||t(e.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function DV(e,t){let n=!1;return e.field(TV).between(0,e.doc.length,e=>{e==t&&(n=!0)}),n}function RV(e,t){let n=e.sliceString(t,t+2);return n.slice(0,NC(CC(n,0)))}function QV(e,t,n,r){let i=null,o=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:EV.of(o.to+t.length),range:VC.range(o.anchor+t.length,o.head+t.length)};let a=RV(e.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},effects:EV.of(o.head+t.length),range:VC.cursor(o.head+t.length)}:{range:i=o}});return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function zV(e,t,n){let r=null,i=e.changeByRange(t=>t.empty&&RV(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:VC.cursor(t.head+n.length)}:r={range:t});return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function LV(e,t,n,r){let i=r.stringPrefixes||PV.stringPrefixes,o=null,a=e.changeByRange(r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:EV.of(r.to+t.length),range:VC.range(r.anchor+t.length,r.head+t.length)};let a,s=r.head,l=RV(e.doc,s);if(l==t){if(ZV(e,s))return{changes:{insert:t+t,from:s},effects:EV.of(s+t.length),range:VC.cursor(s+t.length)};if(DV(e,s)){let r=n&&e.sliceDoc(s,s+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:s,to:s+r.length,insert:r},range:VC.cursor(s+r.length)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&(a=FV(e,s-2*t.length,i))>-1&&ZV(e,a))return{changes:{insert:t+t+t+t,from:s},effects:EV.of(s+t.length),range:VC.cursor(s+t.length)};if(e.charCategorizer(s)(l)!=jj.Word&&FV(e,s,i)>-1&&!function(e,t,n,r){let i=pz(e).resolveInner(t,-1),o=r.reduce((e,t)=>Math.max(e,t.length),0);for(let a=0;a<5;a++){let a=e.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),s=a.indexOf(n);if(!s||s>-1&&r.indexOf(a.slice(0,s))>-1){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>n.length+s;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=i.to==t&&i.parent;if(!l)break;i=l}return!1}(e,s,t,i))return{changes:{insert:t+t,from:s},effects:EV.of(s+t.length),range:VC.cursor(s+t.length)}}return{range:o=r}});return o?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function ZV(e,t){let n=pz(e).resolveInner(t+1);return n.parent&&n.from==t}function FV(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=jj.Word)return t;for(let i of n){let n=t-i.length;if(e.sliceDoc(n,t)==i&&r(e.sliceDoc(n-1,n))!=jj.Word)return n}return-1}const UV=[{key:"Ctrl-Space",run:rV},{mac:"Alt-`",run:rV},{mac:"Alt-i",run:rV},{key:"Escape",run:e=>{let t=e.state.field(JU,!1);return!(!t||!t.active.some(e=>0!=e.state))&&(e.dispatch({effects:NU.of(null)}),!0)}},{key:"ArrowDown",run:nV(!0)},{key:"ArrowUp",run:nV(!1)},{key:"PageDown",run:nV(!0,"page")},{key:"PageUp",run:nV(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(JU,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(MU).interactionDelay)&&eV(e,t.open.options[t.open.selected])}}],VV=aj.highest(SD.computeN([MU],e=>e.facet(MU).defaultKeymap?[UV]:[]));class GV{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class BV{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=n.facet(oG).markerFilter;r&&(e=r(e,n));let i=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),o=new Fj,a=[],s=0;for(let e=0;;){let t,r,l=e==i.length?null:i[e];if(!l&&!a.length)break;for(a.length?(t=s,r=a.reduce((e,t)=>Math.min(e,t.to),l&&l.from>t?l.from:1e8)):(t=l.from,r=l.to,a.push(l),e++);e<i.length;){let n=i[e];if(n.from!=t||!(n.to>n.from||n.to==t)){r=Math.min(n.from,r);break}a.push(n),e++,r=Math.min(n.to,r)}let u=gG(a);if(a.some(e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from))o.add(t,t,mA.widget({widget:new uG(u),diagnostics:a.slice()}));else{let e=a.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");o.add(t,r,mA.mark({class:"cm-lintRange cm-lintRange-"+u+e,diagnostics:a.slice(),inclusiveEnd:a.some(e=>e.to>r)}))}s=r;for(let e=0;e<a.length;e++)a[e].to<=s&&a.splice(e--,1)}let l=o.finish();return new BV(l,t,XV(l))}}function XV(e,t=null,n=0){let r=null;return e.between(n,1e9,(e,n,{spec:i})=>{if(!(t&&i.diagnostics.indexOf(t)<0))if(r){if(i.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new GV(r.from,n,r.diagnostic)}else r=new GV(e,n,t||i.diagnostics[0])}),r}function YV(e,t){let n=t.pos,r=t.end||n,i=e.state.facet(oG).hideOn(e,n,r);if(null!=i)return i;let o=e.startState.doc.lineAt(t.pos);return!(!e.effects.some(e=>e.is(qV))&&!e.changes.touchesRange(o.from,Math.max(o.to,r)))}function WV(e,t){return e.field(JV,!1)?t:t.concat(Sj.appendConfig.of(vG))}const qV=Sj.define(),HV=Sj.define(),KV=Sj.define(),JV=ej.define({create:()=>new BV(mA.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),r=null,i=e.panel;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=XV(n,e.selected.diagnostic,i)||XV(n,null,i)}!n.size&&i&&t.state.facet(oG).autoPanel&&(i=null),e=new BV(n,i,r)}for(let n of t.effects)if(n.is(qV)){let r=t.state.facet(oG).autoPanel?n.value.length?dG.open:null:e.panel;e=BV.init(n.value,r,t.state)}else n.is(HV)?e=new BV(e.diagnostics,n.value?dG.open:null,e.selected):n.is(KV)&&(e=new BV(e.diagnostics,e.panel,n.value));return e},provide:e=>[NR.from(e,e=>e.panel),mD.decorations.from(e,e=>e.diagnostics)]});const eG=mA.mark({class:"cm-lintRange cm-lintRange-active"});function tG(e,t,n){let r,{diagnostics:i}=e.state.field(JV),o=-1,a=-1;i.between(t-(n<0?1:0),t+(n>0?1:0),(e,i,{spec:s})=>{if(t>=e&&t<=i&&(e==i||(t>e||n>0)&&(t<i||n<0)))return r=s.diagnostics,o=e,a=i,!1});let s=e.state.facet(oG).tooltipFilter;return r&&s&&(r=s(r,e.state)),r?{pos:o,end:a,above:e.state.doc.lineAt(o).to<a,create:()=>({dom:nG(e,r)})}:null}function nG(e,t){return gF("ul",{class:"cm-tooltip-lint"},t.map(t=>lG(e,t,!1)))}const rG=e=>{let t=e.state.field(JV,!1);return!(!t||!t.panel)&&(e.dispatch({effects:HV.of(!1)}),!0)},iG=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(JV,!1);t&&t.panel||e.dispatch({effects:WV(e.state,[HV.of(!0)])});let n=$R(e,dG.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(JV,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}];const oG=XC.define({combine:e=>({sources:e.map(e=>e.source).filter(e=>null!=e),...Dj(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:aG,tooltipFilter:aG,needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t,hideOn:(e,t)=>e?t?(n,r,i)=>e(n,r,i)||t(n,r,i):e:t,autoPanel:(e,t)=>e||t})})});function aG(e,t){return e?t?(n,r)=>t(e(n,r),r):e:t}function sG(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some(e=>e.toLowerCase()==r.toLowerCase())){t.push(r);continue e}}t.push("")}return t}function lG(e,t,n){var r;let i=n?sG(t.actions):[];return gF("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},gF("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(r=t.actions)||void 0===r?void 0:r.map((n,r)=>{let o=!1,a=r=>{if(r.preventDefault(),o)return;o=!0;let i=XV(e.state.field(JV).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:s}=n,l=i[r]?s.indexOf(i[r]):-1,u=l<0?s:[s.slice(0,l),gF("u",s.slice(l,l+1)),s.slice(l+1)];return gF("button",{type:"button",class:"cm-diagnosticAction"+(n.markClass?" "+n.markClass:""),onclick:a,onmousedown:a,"aria-label":` Action: ${s}${l<0?"":` (access key "${i[r]})"`}.`},u)}),t.source&&gF("div",{class:"cm-diagnosticSource"},t.source))}class uG extends hA{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return gF("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class cG{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=lG(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class dG{constructor(e){this.view=e,this.items=[];this.list=gF("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)rG(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=sG(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=XV(this.view.state.field(JV).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=gF("div",{class:"cm-panel-lint"},this.list,gF("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>rG(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(JV).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(JV),n=0,r=!1,i=null,o=new Set;for(e.between(0,this.view.state.doc.length,(e,a,{spec:s})=>{for(let e of s.diagnostics){if(o.has(e))continue;o.add(e);let a,s=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==e){s=t;break}s<0?(a=new cG(this.view,e),this.items.splice(n,0,a),r=!0):(a=this.items[s],s>n&&(this.items.splice(n,s-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new cG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let n=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/n:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=XV(this.view.state.field(JV).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:KV.of(t)})}static open(e){return new dG(e)}}function fG(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function hG(e){return fG(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pG=mD.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:hG("#d11")},".cm-lintRange-warning":{backgroundImage:hG("orange")},".cm-lintRange-info":{backgroundImage:hG("#999")},".cm-lintRange-hint":{backgroundImage:hG("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function mG(e){return"error"==e?4:"warning"==e?3:"info"==e?2:1}function gG(e){let t="hint",n=1;for(let r of e){let e=mG(r.severity);e>n&&(n=e,t=r.severity)}return t}const vG=[JV,mD.decorations.compute([JV],e=>{let{selected:t,panel:n}=e.field(JV);return t&&n&&t.from!=t.to?mA.set([eG.range(t.from,t.to)]):mA.none}),kR(tG,{hideOn:YV}),pG];var yG=function(e){void 0===e&&(e={});var{crosshairCursor:t=!1}=e,n=[];!1!==e.closeBracketsKeymap&&(n=n.concat(MV)),!1!==e.defaultKeymap&&(n=n.concat(pF)),!1!==e.searchKeymap&&(n=n.concat(fU)),!1!==e.historyKeymap&&(n=n.concat(hZ)),!1!==e.foldKeymap&&(n=n.concat(eL)),!1!==e.completionKeymap&&(n=n.concat(UV)),!1!==e.lintKeymap&&(n=n.concat(iG));var r=[];return!1!==e.lineNumbers&&r.push(function(e={}){return[WR.of(e),LR(),KR]}()),!1!==e.highlightActiveLineGutter&&r.push(tQ),!1!==e.highlightSpecialChars&&r.push(function(e={}){return[HD.of(e),KD||(KD=fI.fromClass(class{constructor(e){this.view=e,this.decorations=mA.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(HD)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new BD({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=CC(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=Jj(e.text,t,r-e.from);return mA.replace({widget:new eR((t-o%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=mA.replace({widget:new JD(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(HD);e.startState.facet(HD)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&r.push(function(e={}){return[qL,WL.of(e),mD.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?KL:"historyRedo"==e.inputType?JL:null;return!!n&&(e.preventDefault(),n(t))}})]}()),!1!==e.foldGutter&&r.push(function(e={}){let t={...sL,...e},n=new lL(t,!0),r=new lL(t,!1),i=fI.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(Sz)!=e.state.facet(Sz)||e.startState.field(Yz,!1)!=e.state.field(Yz,!1)||pz(e.startState)!=pz(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new Fj;for(let i of e.viewportLineBlocks){let o=qz(e.state,i.from,i.to)?r:Uz(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,QR({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||Zj.empty},initialSpacer:()=>new lL(t,!1),domEventHandlers:{...o,click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=qz(e.state,t.from,t.to);if(r)return e.dispatch({effects:Bz.of(r)}),!0;let i=Uz(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:Gz.of(i)}),!0)}}}),rL()]}()),!1!==e.drawSelection&&r.push(function(e={}){return[DD.of(e),QD,LD,ZD,rI.of(!0)]}()),!1!==e.dropCursor&&r.push([UD,VD]),!1!==e.allowMultipleSelections&&r.push(Mj.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&r.push(Mj.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some(e=>e.test(o)))return e;let{state:a}=e,s=-1,l=[];for(let{head:e}of a.selection.ranges){let t=a.doc.lineAt(e);if(t.from==s)continue;s=t.from;let n=Tz(a,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=$z(a,n);r!=i&&l.push({from:t.from,to:t.from+r.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e})),!1!==e.syntaxHighlighting&&r.push(pL(vL,{fallback:!0})),!1!==e.bracketMatching&&r.push(function(e={}){return[OL.of(e),_L]}()),!1!==e.closeBrackets&&r.push([IV,TV]),!1!==e.autocompletion&&r.push(function(e={}){return[sV,JU,MU.of(e),oV,VV,lV]}()),!1!==e.rectangularSelection&&r.push(function(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return mD.mouseSelectionStyle.of((e,n)=>t(n)?aR(e,n):null)}()),!1!==t&&r.push(function(e={}){let[t,n]=sR[e.key||"Alt"],r=fI.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,mD.contentAttributes.of(e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?lR:null})]}()),!1!==e.highlightActiveLine&&r.push(nR),!1!==e.highlightSelectionMatches&&r.push(function(e){let t=[RF,DF];return e&&t.push(NF.of(e)),t}()),e.tabSize&&"number"==typeof e.tabSize&&r.push(Pz.of(" ".repeat(e.tabSize))),r.concat([SD.of(n.flat())]).filter(Boolean)};const bG="#e5c07b",OG="#e06c75",wG="#56b6c2",xG="#ffffff",SG="#abb2bf",kG="#7d8799",_G="#61afef",PG="#98c379",EG="#d19a66",$G="#c678dd",TG="#21252b",CG="#2c313a",jG="#282c34",NG="#353a42",AG="#3E4451",IG="#528bff",MG=[mD.theme({"&":{color:SG,backgroundColor:jG},".cm-content":{caretColor:IG},".cm-cursor, .cm-dropCursor":{borderLeftColor:IG},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:AG},".cm-panels":{backgroundColor:TG,color:SG},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:jG,color:kG,border:"none"},".cm-activeLineGutter":{backgroundColor:CG},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:NG},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:NG,borderBottomColor:NG},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:CG,color:SG}}},{dark:!0}),pL(cL.define([{tag:az.keyword,color:$G},{tag:[az.name,az.deleted,az.character,az.propertyName,az.macroName],color:OG},{tag:[az.function(az.variableName),az.labelName],color:_G},{tag:[az.color,az.constant(az.name),az.standard(az.name)],color:EG},{tag:[az.definition(az.name),az.separator],color:SG},{tag:[az.typeName,az.className,az.number,az.changed,az.annotation,az.modifier,az.self,az.namespace],color:bG},{tag:[az.operator,az.operatorKeyword,az.url,az.escape,az.regexp,az.link,az.special(az.string)],color:wG},{tag:[az.meta,az.comment],color:kG},{tag:az.strong,fontWeight:"bold"},{tag:az.emphasis,fontStyle:"italic"},{tag:az.strikethrough,textDecoration:"line-through"},{tag:az.link,color:kG,textDecoration:"underline"},{tag:az.heading,fontWeight:"bold",color:OG},{tag:[az.atom,az.bool,az.special(az.variableName)],color:EG},{tag:[az.processingInstruction,az.string,az.inserted],color:PG},{tag:az.invalid,color:xG}]))];var DG=mD.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),RG=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:r=!1,theme:i="light",placeholder:o="",basicSetup:a=!0}=e,s=[];switch(t&&s.unshift(SD.of([mF])),a&&("boolean"==typeof a?s.unshift(yG()):s.unshift(yG(a))),o&&s.unshift(function(e){let t=fI.fromClass(class{constructor(t){this.view=t,this.placeholder=e?mA.set([mA.widget({widget:new rR(e),side:1}).range(0)]):mA.none}get decorations(){return this.view.state.doc.length?mA.none:this.placeholder}},{decorations:e=>e.decorations});return"string"==typeof e?[t,mD.contentAttributes.of({"aria-placeholder":e})]:t}(o)),i){case"light":s.push(DG);break;case"dark":s.push(MG);break;case"none":break;default:s.push(i)}return!1===n&&s.push(mD.editable.of(!1)),r&&s.push(Mj.readOnly.of(!0)),[...s]};class QG{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(e=>{try{e()}catch(e){console.error("TimeoutLatch callback error:",e)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class zG{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),0===this.latches.size&&this.stop()}start(){null===this.interval&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)}}var LG=null,ZG=Oj.define(),FG=[];function UG(e){var{value:t,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:a,extensions:s=FG,autoFocus:l,theme:u="light",height:c=null,minHeight:d=null,maxHeight:f=null,width:h=null,minWidth:p=null,maxWidth:m=null,placeholder:g="",editable:v=!0,readOnly:y=!1,indentWithTab:b=!0,basicSetup:O=!0,root:w,initialState:x}=e,[S,k]=(0,T.useState)(),[_,P]=(0,T.useState)(),[E,$]=(0,T.useState)(),C=(0,T.useState)(()=>({current:null}))[0],j=(0,T.useState)(()=>({current:null}))[0],N=mD.theme({"&":{height:c,minHeight:d,maxHeight:f,width:h,minWidth:p,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),A=mD.updateListener.of(e=>{if(e.docChanged&&"function"==typeof r&&!e.transactions.some(e=>e.annotation(ZG))){C.current?C.current.reset():(C.current=new QG(()=>{if(j.current){var e=j.current;j.current=null,e()}C.current=null},200),("undefined"==typeof window?new zG:(LG||(LG=new zG),LG)).add(C.current));var t=e.state.doc.toString();r(t,e)}i&&i((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map(t=>e.state.sliceDoc(t.from,t.to)),selectedText:e.state.selection.ranges.some(e=>!e.empty)}))(e))}),I=[A,N,...RG({theme:u,editable:v,readOnly:y,placeholder:g,indentWithTab:b,basicSetup:O})];return a&&"function"==typeof a&&I.push(mD.updateListener.of(a)),I=I.concat(s),(0,T.useLayoutEffect)(()=>{if(S&&!E){var e={doc:t,selection:n,extensions:I},r=x?Mj.fromJSON(x.json,e,x.fields):Mj.create(e);if($(r),!_){var i=new mD({state:r,parent:S,root:w});P(i),o&&o(i,r)}}return()=>{_&&($(void 0),P(void 0))}},[S,E]),(0,T.useEffect)(()=>{e.container&&k(e.container)},[e.container]),(0,T.useEffect)(()=>()=>{_&&(_.destroy(),P(void 0)),C.current&&(C.current.cancel(),C.current=null)},[_]),(0,T.useEffect)(()=>{l&&_&&_.focus()},[l,_]),(0,T.useEffect)(()=>{_&&_.dispatch({effects:Sj.reconfigure.of(I)})},[u,s,c,d,f,h,p,m,g,v,y,b,O,r,a]),(0,T.useEffect)(()=>{if(void 0!==t){var e=_?_.state.doc.toString():"";if(_&&t!==e){var n=()=>{_&&t!==_.state.doc.toString()&&_.dispatch({changes:{from:0,to:_.state.doc.toString().length,insert:t||""},annotations:[ZG.of(!0)]})};C.current&&!C.current.isDone?j.current=n:n()}}},[t,_]),{state:E,setState:$,view:_,setView:P,container:S,setContainer:k}}var VG=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],GG=(0,T.forwardRef)((e,t)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:a,onStatistics:s,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:d="light",height:f,minHeight:h,maxHeight:p,width:m,minWidth:g,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:O,editable:w,readOnly:x,root:S,initialState:k}=e,_=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,VG),P=(0,T.useRef)(null),{state:E,view:C,container:j,setContainer:N}=UG({root:S,value:r,autoFocus:c,theme:d,height:f,minHeight:h,maxHeight:p,width:m,minWidth:g,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:O,editable:w,readOnly:x,selection:i,onChange:a,onStatistics:s,onCreateEditor:l,onUpdate:u,extensions:o,initialState:k});(0,T.useImperativeHandle)(t,()=>({editor:P.current,state:E,view:C}),[P,j,E,C]);var A=(0,T.useCallback)(e=>{P.current=e,N(e)},[N]);if("string"!=typeof r)throw new Error("value must be typeof string but got "+typeof r);var I="string"==typeof d?"cm-theme-"+d:"cm-theme";return(0,$.jsx)("div",sC({ref:A,className:I+(n?" "+n:"")},_))});GG.displayName="CodeMirror";const BG=GG;class XG{constructor(e,t,n,r,i,o,a,s,l,u=0,c){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=a,this.bufferBase=s,this.curContext=l,this.lookAhead=u,this.parent=c}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new XG(e,[],t,n,n,0,[],0,r?new YG(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,r=65535&e,{parser:i}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=i.dynamicPrecedence(r);if(a&&(this.score+=a),0==n)return this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),void this.reduceContext(r,this.reducePos);let s=this.stack.length-3*(n-1)-(262144&e?6:0),l=s?this.stack[s-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(null===(t=this.p.parser.nodeSet.types[r])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let c=s?this.stack[s-1]:0,d=this.bufferBase+this.buffer.length-c;if(r<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,e,d+4,!0)}if(262144&e)this.state=this.stack[s];else{let e=this.stack[s-3];this.state=i.getGoto(e,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,l)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4]){let e=!1;for(let t=i;t>0&&this.buffer[t-2]>n;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4)}this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n,r){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=r,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,r,4);else{let i=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(i,1)||(this.reducePos=r)),this.pushState(i,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,r,4)}}apply(e,t,n,r){65536&e?this.reduce(e):this.shift(e,t,n,r)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new XG(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new WG(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(!(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some((e,t)=>1&t&&e==r)||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.reducePos=this.pos,i.score-=200,n.push(i)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,r=65535&t,i=this.stack.length-3*n;if(i<0||e.getGoto(this.stack[i],r,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(r,i)=>{if(!t.includes(r))return t.push(r),e.allActions(r,t=>{if(393216&t);else if(65536&t){let n=(t>>19)-i;if(n>1){let r=65535&t,i=this.stack.length-3*n;if(i>=0&&e.getGoto(this.stack[i],r,!1)>=0)return n<<19|65536|r}}else{let e=n(t,i+1);if(null!=e)return e}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new YG(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class YG{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class WG{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class qG{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new qG(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new qG(this.stack,this.pos,this.index)}}function HG(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}class KG{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const JG=new KG;class eB{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=JG,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=JG,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class tB{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;iB(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}tB.prototype.contextual=tB.prototype.fallback=tB.prototype.extend=!1;class nB{constructor(e,t,n){this.precTable=t,this.elseToken=n,this.data="string"==typeof e?HG(e):e}token(e,t){let n=e.pos,r=0;for(;;){let n=e.next<0,i=e.resolveOffset(1,1);if(iB(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(n||r++,null==i)break;e.reset(i,e.token)}r&&(e.reset(n,e.token),e.acceptToken(this.elseToken,r))}}nB.prototype.contextual=tB.prototype.fallback=tB.prototype.extend=!1;class rB{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function iB(e,t,n,r,i,o){let a=0,s=1<<r,{dialect:l}=n.p.parser;e:for(;0!=(s&e[a]);){let n=e[a+1];for(let r=a+3;r<n;r+=2)if((e[r+1]&s)>0){let n=e[r];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||aB(n,t.token.value,i,o))){t.acceptToken(n);break}}let r=t.next,u=0,c=e[a+2];if(!(t.next<0&&c>u&&65535==e[n+3*c-3])){for(;u<c;){let i=u+c>>1,o=n+i+(i<<1),s=e[o],l=e[o+1]||65536;if(r<s)c=i;else{if(!(r>=l)){a=e[o+2],t.advance();continue e}u=i+1}}break}a=e[n+3*c-1]}}function oB(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}function aB(e,t,n,r){let i=oB(n,r,t);return i<0||oB(n,r,e)<i}const sB="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let lB=null;function uB(e,t,n){let r=e.cursor(fQ.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}class cB{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?uB(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?uB(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof hQ){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(oQ.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class dB{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new KG)}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,s=0;for(let r=0;r<i.length;r++){if(!(1<<r&o))continue;let l=i[r],u=this.tokens[r];if((!n||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=o||u.context!=a)&&(this.updateCachedToken(u,l,e),u.mask=o,u.context=a),u.lookAhead>u.end+25&&(s=Math.max(u.lookAhead,s)),0!=u.value)){let r=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(n=u,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return s&&e.setLookAhead(s),n||e.pos!=this.stream.end||(n=new KG,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new KG,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){let r=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(r,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){1&i?e.extended=i>>1:e.value=i>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:a}=o;for(let e=0;e<2;e++)for(let s=o.stateSlot(i,e?2:1);;s+=3){if(65535==a[s]){if(1!=a[s+1]){0==r&&2==a[s+1]&&(r=this.putAction(vB(a,s+2),t,n,r));break}s=vB(a,s+2)}a[s]==t&&(r=this.putAction(vB(a,s+1),t,n,r))}return r}}class fB{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new eB(t,r),this.tokens=new dB(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[XG.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new cB(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<n.length;o++){let a=n[o];for(;;){if(this.tokens.mainToken=null,a.pos>r)i.push(a);else{if(this.advanceStack(a,i,n))continue;{e||(e=[],t=[]),e.push(a);let n=this.tokens.getMainToken(a);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return sB&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw sB&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return sB&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort((e,t)=>t.score-e.score);i.length>e;)i.pop();i.some(e=>e.reducePos>r)&&this.recovering--}else if(i.length>1){e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let e=1;e<i.length;e++)i[e].pos<this.minStackPos&&(this.minStackPos=i[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,o=sB?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let a=this.fragments.nodeAt(r);a;){let r=this.parser.nodeSet.types[a.type.id]==a.type?i.getGoto(e.state,a.type.id):-1;if(r>-1&&a.length&&(!t||(a.prop(oQ.contextHash)||0)==n))return e.useNode(a,r),sB&&console.log(o+this.stackID(e)+` (via reuse of ${i.getName(a.type.id)})`),!0;if(!(a instanceof hQ)||0==a.children.length||a.positions[0]>0)break;let s=a.children[0];if(!(s instanceof hQ&&0==a.positions[0]))break;a=s}}let a=i.stateSlot(e.state,4);if(a>0)return e.reduce(a),sB&&console.log(o+this.stackID(e)+` (via always-reduce ${i.getName(65535&a)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let s=this.tokens.getActions(e);for(let a=0;a<s.length;){let l=s[a++],u=s[a++],c=s[a++],d=a==s.length||!n,f=d?e:e.split(),h=this.tokens.mainToken;if(f.apply(l,u,h?h.start:f.pos,c),sB&&console.log(o+this.stackID(f)+` (via ${65536&l?`reduce of ${i.getName(65535&l)}`:"shift"} for ${i.getName(u)} @ ${r}${f==e?"":", split"})`),d)return!0;f.pos>r?t.push(f):n.push(f)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return hB(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let a=e[o],s=t[o<<1],l=t[1+(o<<1)],u=sB?this.stackID(a)+" -> ":"";if(a.deadEnd){if(i)continue;if(i=!0,a.restart(),sB&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,n))continue}let c=a.split(),d=u;for(let e=0;c.forceReduce()&&e<10;e++){if(sB&&console.log(d+this.stackID(c)+" (via force-reduce)"),this.advanceFully(c,n))break;sB&&(d=this.stackID(c)+" -> ")}for(let e of a.recoverByInsert(s))sB&&console.log(u+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>a.pos?(l==a.pos&&(l++,s=0),a.recoverByDelete(s,l),sB&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(s)})`),hB(a,n)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),hQ.build({buffer:qG.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(lB||(lB=new WeakMap)).get(e);return t||lB.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function hB(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class pB{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const mB=e=>e;class gB extends AQ{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map(t=>e.topRules[t][1]),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=oQ[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let o=t[n+-r];for(let a=-r;a>0;a--)i(t[n++],e,o);n++}}}this.nodeSet=new uQ(t.map((t,i)=>lQ.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=nQ;let o=HG(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(yB),this.states=HG(e.states,Uint32Array),this.data=HG(e.stateData),this.goto=HG(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new tB(o,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new fB(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,a=r[i++];if(o&&n)return a;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return a;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return vB(n,o+2);break}i=n[o=vB(n,o+2)]}if(i==t||0==i)return vB(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,e=>e==t||null)}allActions(e,t){let n=this.stateSlot(e,4),r=n?t(n):void 0;for(let n=this.stateSlot(e,1);null==r;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=vB(this.data,n+2)}r=t(vB(this.data,n+1))}return r}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=vB(this.data,n+2)}if(!(1&this.data[n+2])){let e=this.data[n+1];t.some((t,n)=>1&n&&t==e)||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(gB.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(t=>{let n=e.tokenizers.find(e=>e.from==t);return n?n.to:t})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,r)=>{let i=e.specializers.find(e=>e.from==n.external);if(!i)return n;let o=Object.assign(Object.assign({},n),{external:i.to});return t.specializers[r]=yB(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,i=this.dialects[t[e]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new pB(e,n,r)}static deserialize(e){return new gB(e)}}function vB(e,t){return e[t]|e[t+1]<<16}function yB(e){if(e.external){let t=e.extend?1:0;return(n,r)=>e.external(n,r)<<1|t}return e.get}const bB=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],OB=new class{constructor(e){this.start=e.start,this.shift=e.shift||mB,this.reduce=e.reduce||mB,this.reuse=e.reuse||mB,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:!1,shift:(e,t)=>5==t||6==t||320==t?e:321==t,strict:!1}),wB=new rB((e,t)=>{let{next:n}=e;(125==n||-1==n||t.context)&&e.acceptToken(318)},{contextual:!0,fallback:!0}),xB=new rB((e,t)=>{let n,{next:r}=e;bB.indexOf(r)>-1||(47!=r||47!=(n=e.peek(1))&&42!=n)&&(125==r||59==r||-1==r||t.context||e.acceptToken(316))},{contextual:!0}),SB=new rB((e,t)=>{91!=e.next||t.context||e.acceptToken(317)},{contextual:!0}),kB=new rB((e,t)=>{let{next:n}=e;if(43==n||45==n){if(e.advance(),n==e.next){e.advance();let n=!t.context&&t.canShift(1);e.acceptToken(n?1:2)}}else 63==n&&46==e.peek(1)&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(3))},{contextual:!0});function _B(e,t){return e>=65&&e<=90||e>=97&&e<=122||95==e||e>=192||!t&&e>=48&&e<=57}const PB=new rB((e,t)=>{if(60!=e.next||!t.dialectEnabled(0))return;if(e.advance(),47==e.next)return;let n=0;for(;bB.indexOf(e.next)>-1;)e.advance(),n++;if(_B(e.next,!0)){for(e.advance(),n++;_B(e.next,!1);)e.advance(),n++;for(;bB.indexOf(e.next)>-1;)e.advance(),n++;if(44==e.next)return;for(let t=0;;t++){if(7==t){if(!_B(e.next,!0))return;break}if(e.next!="extends".charCodeAt(t))break;e.advance(),n++}}e.acceptToken(4,-n)}),EB=zQ({"get set async static":az.modifier,"for while do if else switch try catch finally return throw break continue default case defer":az.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":az.operatorKeyword,"let var const using function class extends":az.definitionKeyword,"import export from":az.moduleKeyword,"with debugger new":az.keyword,TemplateString:az.special(az.string),super:az.atom,BooleanLiteral:az.bool,this:az.self,null:az.null,Star:az.modifier,VariableName:az.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":az.function(az.variableName),VariableDefinition:az.definition(az.variableName),Label:az.labelName,PropertyName:az.propertyName,PrivatePropertyName:az.special(az.propertyName),"CallExpression/MemberExpression/PropertyName":az.function(az.propertyName),"FunctionDeclaration/VariableDefinition":az.function(az.definition(az.variableName)),"ClassDeclaration/VariableDefinition":az.definition(az.className),"NewExpression/VariableName":az.className,PropertyDefinition:az.definition(az.propertyName),PrivatePropertyDefinition:az.definition(az.special(az.propertyName)),UpdateOp:az.updateOperator,"LineComment Hashbang":az.lineComment,BlockComment:az.blockComment,Number:az.number,String:az.string,Escape:az.escape,ArithOp:az.arithmeticOperator,LogicOp:az.logicOperator,BitOp:az.bitwiseOperator,CompareOp:az.compareOperator,RegExp:az.regexp,Equals:az.definitionOperator,Arrow:az.function(az.punctuation),": Spread":az.punctuation,"( )":az.paren,"[ ]":az.squareBracket,"{ }":az.brace,"InterpolationStart InterpolationEnd":az.special(az.brace),".":az.derefOperator,", ;":az.separator,"@":az.meta,TypeName:az.typeName,TypeDefinition:az.definition(az.typeName),"type enum interface implements namespace module declare":az.definitionKeyword,"abstract global Privacy readonly override":az.modifier,"is keyof unique infer asserts":az.operatorKeyword,JSXAttributeValue:az.attributeValue,JSXText:az.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":az.angleBracket,"JSXIdentifier JSXNameSpacedName":az.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":az.attributeName,"JSXBuiltin/JSXIdentifier":az.standard(az.tagName)}),$B={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},TB={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},CB={__proto__:null,"<":193},jB=gB.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:OB,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[EB],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[xB,SB,kB,PB,2,3,4,5,6,7,8,9,10,11,12,13,14,wB,new nB("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new nB("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:e=>$B[e]||-1},{term:343,get:e=>TB[e]||-1},{term:95,get:e=>CB[e]||-1}],tokenPrec:15201}),NB=[kV("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),kV("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),kV("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),kV("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),kV("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),kV("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),kV("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),kV("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),kV("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),kV('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),kV('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],AB=NB.concat([kV("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),kV("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),kV("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),IB=new jQ,MB=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function DB(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");return r&&n(r,e),!0}}const RB=["FunctionDeclaration"],QB={FunctionDeclaration:DB("function"),ClassDeclaration:DB("class"),ClassExpression:()=>!0,EnumDeclaration:DB("constant"),TypeAliasDeclaration:DB("type"),NamespaceDeclaration:DB("namespace"),VariableDefinition(e,t){e.matchContext(RB)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function zB(e,t){let n=IB.get(t);if(n)return n;let r=[],i=!0;function o(t,n){let i=e.sliceString(t.from,t.to);r.push({label:i,type:n})}return t.cursor(fQ.IncludeAnonymous).iterate(t=>{if(i)i=!1;else if(t.name){let e=QB[t.name];if(e&&e(t,o)||MB.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of zB(e,t.node))r.push(n);return!1}}),IB.set(t,r),r}const LB=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,ZB=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function FB(e){let t=pz(e.state).resolveInner(e.pos,-1);if(ZB.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&LB.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let n=t;n;n=n.parent)MB.has(n.name)&&(r=r.concat(zB(e.state.doc,n)));return{options:r,from:n?t.from:e.pos,validFor:LB}}const UB=hz.define({name:"javascript",parser:jB.configure({props:[jz.add({IfStatement:zz({except:/^\s*({|else\b)/}),TryStatement:zz({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:Rz({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":zz({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),Zz.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null},BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),VB={test:e=>/^JSX/.test(e.name),facet:uz({commentTokens:{block:{open:"{/*",close:"*/}"}}})},GB=UB.configure({dialect:"ts"},"typescript"),BB=UB.configure({dialect:"jsx",props:[cz.add(e=>e.isTop?[VB]:void 0)]}),XB=UB.configure({dialect:"jsx ts",props:[cz.add(e=>e.isTop?[VB]:void 0)]},"typescript");let YB=e=>({label:e,type:"keyword"});const WB="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(YB),qB=WB.concat(["declare","implements","private","protected","public"].map(YB));function HB(e={}){let t=e.jsx?e.typescript?XB:BB:e.typescript?GB:UB,n=e.typescript?AB.concat(qB):NB.concat(WB);return new kz(t,[UB.data.of({autocomplete:SU(ZB,xU(n))}),UB.data.of({autocomplete:FB}),e.jsx?eX:[]])}function KB(e,t,n=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,n));return""}const JB="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),eX=mD.inputHandler.of((e,t,n,r,i)=>{if((JB?e.composing:e.compositionStarted)||e.state.readOnly||t!=n||">"!=r&&"/"!=r||!UB.isActiveAt(e.state,t,-1))return!1;let o=i(),{state:a}=o,s=a.changeByRange(e=>{var t;let n,{head:i}=e,o=pz(a).resolveInner(i-1,-1);if("JSXStartTag"==o.name&&(o=o.parent),a.doc.sliceString(i-1,i)!=r||"JSXAttributeValue"==o.name&&o.to>i);else{if(">"==r&&"JSXFragmentTag"==o.name)return{range:e,changes:{from:i,insert:"</>"}};if("/"==r&&"JSXStartCloseTag"==o.name){let e=o.parent,r=e.parent;if(r&&e.from==i-2&&((n=KB(a.doc,r.firstChild,i))||"JSXFragmentTag"==(null===(t=r.firstChild)||void 0===t?void 0:t.name))){let e=`${n}>`;return{range:VC.cursor(i+e.length,-1),changes:{from:i,insert:e}}}}else if(">"==r){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(o);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(a.doc.sliceString(i,i+2))&&(n=KB(a.doc,t,i)))return{range:e,changes:{from:i,insert:`</${n}>`}}}}return{range:e}});return!s.changes.empty&&(e.dispatch([o,a.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function tX(e,t,n,r,i){if(e.type){var o=SE.nodeDefinitionMap.get(e.type);if(o){if(o.getDynamicHandles){var a=o.getDynamicHandles(e,r,i),s=("input"===n?a.inputs:a.outputs).find(function(e){return e.id===t});if(s)return s}return("input"===n?o.handles.inputs:o.handles.outputs).find(function(e){return e.id===t})}}}var nX=function(e,t){var n=_c(Yf,wc),r=qf();return(0,T.useMemo)(function(){var i=new Set,o=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(a>20||i.has("".concat(e,"-").concat(t)))){i.add("".concat(e,"-").concat(t));var s=r.find(function(n){return n.target===e&&n.targetHandle==t});if(s){var l=n.find(function(e){return e.id===s.source});if(null!=l&&l.type){var u=tX(l,s.sourceHandle||null,"output",n,r);if(u){if(u.schema)return u.schema;var c=SE.nodeDefinitionMap.get(l.type),d=(null==c?void 0:c.handles.inputs.some(function(e){return"main"===e.id}))&&(null==c?void 0:c.handles.outputs.some(function(e){return"main"===e.id}));return u.type===cE.ANY&&d?o(l.id,"main",a+1):void 0}}}}};return o(e,t)},[e,t,n,r])};function rX(e){return rX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rX(e)}function iX(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oX(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oX(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function oX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function aX(e){var t;switch(e.type){case"string":t=qS();break;case"number":t=Bk();break;case"boolean":t=e_();break;case"enum":t=e.values&&0!==e.values.length?G_(e.values):qS();break;case"object":t=sX(e.fields||[]);break;case"array":t=e.items?S_(aX(e.items)):S_(h_());break;default:t=h_()}return e.description?t.describe(e.description):t}function sX(e){var t,n={},r=iX(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.name]=aX(i)}}catch(e){r.e(e)}finally{r.f()}return P_(n)}function lX(e){var t;switch(e.type){case"string":return qS();case"number":return Bk();case"boolean":return e_();case"array":var n=null===(t=e.value)||void 0===t?void 0:t[0];return S_(n?lX(n):h_());case"object":var r={};return e.value.forEach(function(e){r[e.key]=lX(e)}),P_(r);default:return h_()}}function uX(e){if(null==e)return h_();switch(rX(e)){case"string":return qS();case"number":return Bk();case"boolean":return e_();case"object":if(Array.isArray(e))return S_(e.length>0?uX(e[0]):h_());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=uX(e[n]));return P_(t);default:return h_()}}function cX(e,t,n,r){var i=n.find(function(t){return t.target===e.id&&t.targetHandle===r});if(i){var o=t.find(function(e){return e.id===i.source});if(o){if("schemaNode"===o.type){var a,s=null===(a=o.data)||void 0===a?void 0:a.fields;if(!Array.isArray(s))return;return sX(s)}if("variableSchemaNode"===o.type){var l,u=null===(l=o.data)||void 0===l?void 0:l.definition;return u?aX(u):void 0}}}}function dX(e){return dX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dX(e)}function fX(e){return e instanceof Gk?cE.NUMBER:e instanceof WS?cE.STRING:e instanceof Jk?cE.BOOLEAN:e instanceof __||e instanceof x_||e instanceof V_?cE.OBJECT:cE.ANY}function hX(e){if(null==e)return cE.ANY;switch(dX(e)){case"string":return cE.STRING;case"number":return cE.NUMBER;case"boolean":return cE.BOOLEAN;case"object":return cE.OBJECT;default:return cE.ANY}}function pX(e){return pX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pX(e)}function mX(e){return function(e){if(Array.isArray(e))return gX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gX(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gX(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vX(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return yX(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(yX(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,yX(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,yX(d,"constructor",u),yX(u,"constructor",l),l.displayName="GeneratorFunction",yX(u,i,"GeneratorFunction"),yX(d),yX(d,i,"Generator"),yX(d,r,function(){return this}),yX(d,"toString",function(){return"[object Generator]"}),(vX=function(){return{w:o,m:f}})()}function yX(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}yX=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){yX(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},yX(e,t,n,r)}function bX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function OX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bX(Object(n),!0).forEach(function(t){wX(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wX(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pX(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xX(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var SX=P_({code:qS().default("return input;"),_version:Bk().optional()}),kX=function(){var e,t=(e=vX().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h;return vX().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=r.dependencies,o=r.executionVariables,a=SX.parse(t.data),s=OX({},Object.fromEntries(o)),l=n.schema,u=n.scriptInput,e.p=1,d=new Function("input","variables","stContext",a.code),e.n=2,d(u,s,i.getSillyTavernContext());case 2:c=e.v,e.n=4;break;case 3:throw e.p=3,h=e.v,new Error("Error executing JS code: ".concat(h.message));case 4:if(!(l instanceof XS)){e.n=6;break}if((f=l.safeParse(c)).success){e.n=5;break}throw console.error("JS Node Output Validation Error:",f.error),new Error("JavaScript execution result failed schema validation: ".concat(f.error.message));case 5:return e.a(2,OX(OX({},f.data),{},{result:f.data}));case 6:return e.a(2,c)}},e,null,[[1,3]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){xX(o,r,i,a,s,"next",e)}function s(e){xX(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),_X={type:"executeJsNode",label:"Execute JS Code",category:"System",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);qf();var s=nX(t,"scriptInput"),l=s instanceof __;if(!i||!a)return null;var u;return(0,$.jsx)(QE,{id:t,title:"Execute JS Code",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input"}),(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{children:"Code (`input`, `variables`, and `stContext` are available)"}),s&&(0,$.jsx)("div",{style:{fontSize:"10px",color:"#aaa",margin:"5px 0"},children:l?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("b",{children:"Available properties in `input`:"}),(0,$.jsx)("pre",{style:{margin:"2px 0 0 0",background:"#2a2a2a",padding:"4px",borderRadius:"3px",whiteSpace:"pre-wrap"},children:UE(s)})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("b",{children:"`input` variable will be a:"}),(0,$.jsx)("pre",{style:{margin:"2px 0 0 0",background:"#2a2a2a",padding:"4px",borderRadius:"3px"},children:(u=s,u.def.type)})]})}),(0,$.jsx)(BG,{className:"nodrag",value:i.code||"",height:"150px",extensions:[HB({})],width:"100%",onChange:function(e){o(t,{code:e})},theme:"dark",style:{cursor:"text"}})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})})},dataSchema:SX,currentVersion:1,initialData:{code:'return {\n  "message": "Hello " + input.name\n};'},handles:{inputs:[{id:"main",type:cE.ANY},{id:"scriptInput",type:cE.ANY},{id:"schema",type:cE.SCHEMA}],outputs:[{id:"main",type:cE.ANY}]},execute:kX,isDangerous:!0,getDynamicHandles:function(e,t,n){var r=n.find(function(t){return t.target===e.id&&"schema"===t.targetHandle});if(!r)return{inputs:[],outputs:[{id:"result",type:cE.ANY}]};var i=t.find(function(e){return e.id===r.source});if("schemaNode"!==(null==i?void 0:i.type)||!Array.isArray(i.data.fields))return{inputs:[],outputs:[{id:"result",type:cE.ANY}]};var o=i.data.fields,a=sX(o),s={id:"result",type:cE.OBJECT,schema:a},l=o.map(function(e){return{id:e.name,type:fX(aX(e)),schema:aX(e)}});return{inputs:[],outputs:[s].concat(mX(l))}}};SE.register(_X);function PX(e){return PX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PX(e)}function EX(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return $X(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):($X(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,$X(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,$X(d,"constructor",u),$X(u,"constructor",l),l.displayName="GeneratorFunction",$X(u,i,"GeneratorFunction"),$X(d),$X(d,i,"Generator"),$X(d,r,function(){return this}),$X(d,"toString",function(){return"[object Generator]"}),(EX=function(){return{w:o,m:f}})()}function $X(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}$X=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){$X(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},$X(e,t,n,r)}function TX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function CX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TX(Object(n),!0).forEach(function(t){jX(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jX(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=PX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PX(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NX(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var AX=P_({characterAvatar:qS().default(""),_version:Bk().optional()}),IX=function(){var e,t=(e=EX().m(function e(t,n,r){var i,o,a,s,l,u,c;return EX().w(function(e){for(;;)switch(e.n){case 0:if(a=r.dependencies,s=AX.parse(t.data),l=PE(n,s,"characterAvatar")){e.n=1;break}throw new Error("No character avatar provided.");case 1:if(u=a.getSillyTavernContext(),c=u.characters.find(function(e){return e.avatar===l})){e.n=2;break}throw new Error("Character with avatar ".concat(l," not found."));case 2:return c=structuredClone(c),null===(i=c)||void 0===i||null===(i=i.data)||void 0===i||delete i.json_data,null===(o=c)||void 0===o||delete o.json_data,e.a(2,CX(CX({},c),{},{result:c}))}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){NX(o,r,i,a,s,"next",e)}function s(e){NX(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),MX=P_({name:qS().describe("The character's name."),avatar:qS().describe("The character's avatar filename."),description:qS().describe("The character's description."),first_mes:qS().describe("The character's first message."),scenario:qS().describe("The scenario."),personality:qS().describe("The character's personality."),mes_example:qS().describe("Example messages."),tags:S_(qS()).describe("A list of tags.")}),DX={type:"getCharacterNode",label:"Get Character",category:"Character",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SillyTavern.getContext().characters,s=SE.nodeDefinitionMap.get(r),l=(0,T.useMemo)(function(){return a.map(function(e){return{value:e.avatar,label:e.name}})},[a]),u=(0,T.useMemo)(function(){return[{id:"characterAvatar",label:"Character",component:ur,props:{items:l,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}]},[l]);return i&&s?(0,$.jsxs)(QE,{id:t,title:"Get Character",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:s,type:"input",fields:u,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:s,type:"output"})})]}):null},dataSchema:AX,currentVersion:1,initialData:{characterAvatar:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"characterAvatar",type:cE.CHARACTER_AVATAR}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.OBJECT,schema:MX},{id:"name",type:cE.STRING},{id:"description",type:cE.STRING},{id:"first_mes",type:cE.STRING},{id:"scenario",type:cE.STRING},{id:"personality",type:cE.STRING},{id:"mes_example",type:cE.STRING},{id:"tags",type:cE.OBJECT,schema:S_(qS())}]},validate:c$(l$("characterAvatar","Character is required.")),execute:IX};SE.register(DX);function RX(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return QX(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(QX(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,QX(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,QX(d,"constructor",u),QX(u,"constructor",l),l.displayName="GeneratorFunction",QX(u,i,"GeneratorFunction"),QX(d),QX(d,i,"Generator"),QX(d,r,function(){return this}),QX(d,"toString",function(){return"[object Generator]"}),(RX=function(){return{w:o,m:f}})()}function QX(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}QX=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){QX(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},QX(e,t,n,r)}function zX(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var LX=P_({_version:Bk().optional()}),ZX=function(){var e,t=(e=RX().m(function e(t,n,r){var i,o;return RX().w(function(e){for(;;)if(0===e.n)return i=r.dependencies,o=i.getChatInputValue(),e.a(2,{value:o})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){zX(o,r,i,a,s,"next",e)}function s(e){zX(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),FX={type:"getChatInputNode",label:"Get Chat Input",category:"Chat",component:function(e){var t=e.id,n=e.selected,r=e.type,i=SE.nodeDefinitionMap.get(r);return i?(0,$.jsxs)(QE,{id:t,title:"Get Chat Input",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:i,type:"input"}),(0,$.jsx)("div",{style:{padding:"10px 0",textAlign:"center",color:"#aaa"},children:"Outputs current input text."}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:i,type:"output"})})]}):null},dataSchema:LX,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.STRING}]},execute:ZX};SE.register(FX);var UX=[{id:"messageId",label:"Message ID (e.g., last, first, 123)",component:N,props:{placeholder:"last",type:"text"}}];function VX(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return GX(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(GX(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,GX(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,GX(d,"constructor",u),GX(u,"constructor",l),l.displayName="GeneratorFunction",GX(u,i,"GeneratorFunction"),GX(d),GX(d,i,"Generator"),GX(d,r,function(){return this}),GX(d,"toString",function(){return"[object Generator]"}),(VX=function(){return{w:o,m:f}})()}function GX(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}GX=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){GX(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},GX(e,t,n,r)}function BX(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var XX=P_({messageId:qS().default("last"),_version:Bk().optional()}),YX=function(){var e,t=(e=VX().m(function e(t,n,r){var i,o,a,s,l,u,c,d;return VX().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=XX.parse(t.data),void 0!==(a=PE(n,o,"messageId"))){e.n=1;break}throw new Error("Message ID is required.");case 1:if(s=i.getSillyTavernContext(),l=s.chat,"number"==typeof a?u=l.findIndex(function(e,t){return t===a}):(c=String(a).toLowerCase().trim(),u="last"===c?l.length-1:"first"===c?0:parseInt(c,10)),!(isNaN(u)||u<0||u>=l.length)){e.n=2;break}throw new Error('Message with ID/Index "'.concat(a,'" not found or invalid.'));case 2:return d=structuredClone(l[u]),e.a(2,{id:u,result:d,name:d.name,mes:d.mes,is_user:!!d.is_user,is_system:!!d.is_system})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){BX(o,r,i,a,s,"next",e)}function s(e){BX(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),WX={type:"getChatMessageNode",label:"Get Chat Message",category:"Chat",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Get Chat Message",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:UX,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:XX,currentVersion:1,initialData:{messageId:"last"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"messageId",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"id",type:cE.NUMBER},{id:"result",type:cE.OBJECT,schema:N$},{id:"name",type:cE.STRING},{id:"mes",type:cE.STRING},{id:"is_user",type:cE.BOOLEAN},{id:"is_system",type:cE.BOOLEAN}]},execute:YX};SE.register(WX);var qX=[{id:"variableName",label:"Variable Name",component:N,props:{type:"text"}}];function HX(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return KX(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(KX(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,KX(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,KX(d,"constructor",u),KX(u,"constructor",l),l.displayName="GeneratorFunction",KX(u,i,"GeneratorFunction"),KX(d),KX(d,i,"Generator"),KX(d,r,function(){return this}),KX(d,"toString",function(){return"[object Generator]"}),(HX=function(){return{w:o,m:f}})()}function KX(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}KX=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){KX(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},KX(e,t,n,r)}function JX(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var eY=P_({variableName:qS().optional(),_version:Bk().optional()}),tY=function(){var e,t=(e=HX().m(function e(t,n,r){var i,o,a,s,l,u;return HX().w(function(e){for(;;)switch(e.n){case 0:if(i=r.executionVariables,o=eY.parse(t.data),a=PE(n,o,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:if(i.has(a)){e.n=2;break}throw new Error('Execution variable "'.concat(a,'" not found.'));case 2:if(s=n.schema,l=i.get(a),void 0===s){e.n=5;break}if(s&&"function"==typeof s.safeParse){e.n=3;break}throw new Error("Schema input for Get Flow Variable is invalid.");case 3:if((u=s.safeParse(l)).success){e.n=4;break}throw new Error('Value for variable "'.concat(a,'" failed schema validation: ').concat(u.error.message));case 4:l=u.data;case 5:return e.a(2,{value:l})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){JX(o,r,i,a,s,"next",e)}function s(e){JX(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),nY={type:"getFlowVariableNode",label:"Get Flow Variable",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Get Flow Variable",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:qX,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:eY,currentVersion:1,initialData:{variableName:"myVar"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"variableName",type:cE.STRING},{id:"schema",type:cE.SCHEMA}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}]},validate:c$(l$("variableName","Variable Name is required.")),execute:tY,getDynamicHandles:function(e,t,n){var r=cX(e,t,n,"schema");return r?{inputs:[],outputs:[{id:"value",type:fX(r),schema:r}]}:{inputs:[],outputs:[]}}};SE.register(nY);var rY=[{id:"variableName",label:"Variable Name",component:N,props:{type:"text"}}];function iY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return oY(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(oY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,oY(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,oY(d,"constructor",u),oY(u,"constructor",l),l.displayName="GeneratorFunction",oY(u,i,"GeneratorFunction"),oY(d),oY(d,i,"Generator"),oY(d,r,function(){return this}),oY(d,"toString",function(){return"[object Generator]"}),(iY=function(){return{w:o,m:f}})()}function oY(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}oY=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){oY(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},oY(e,t,n,r)}function aY(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var sY=P_({variableName:qS().optional(),_version:Bk().optional()}),lY=function(){var e,t=(e=iY().m(function e(t,n,r){var i,o,a,s,l;return iY().w(function(e){for(;;)switch(e.n){case 0:if(i=sY.parse(t.data),o=PE(n,i,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:return a=n.schema,e.n=2,r.dependencies.st_getGlobalVariable(o);case 2:if(s=e.v,void 0===a){e.n=5;break}if(a&&"function"==typeof a.safeParse){e.n=3;break}throw new Error("Schema input for Get Global Variable is invalid.");case 3:if((l=a.safeParse(s)).success){e.n=4;break}throw new Error('Global variable "'.concat(o,'" failed schema validation: ').concat(l.error.message));case 4:return e.a(2,{value:l.data});case 5:return e.a(2,{value:s})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){aY(o,r,i,a,s,"next",e)}function s(e){aY(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),uY={type:"getGlobalVariableNode",label:"Get Global Variable",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Get Global Variable",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:rY,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:sY,currentVersion:1,initialData:{variableName:"globalVar"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"variableName",type:cE.STRING},{id:"schema",type:cE.SCHEMA}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}]},validate:c$(l$("variableName","Variable Name is required.")),execute:lY,getDynamicHandles:function(e,t,n){var r=cX(e,t,n,"schema");return r?{inputs:[],outputs:[{id:"value",type:fX(r),schema:r}]}:{inputs:[],outputs:[]}}};SE.register(uY);var cY=[{id:"variableName",label:"Variable Name",component:N,props:{type:"text"}}];function dY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return fY(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(fY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,fY(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,fY(d,"constructor",u),fY(u,"constructor",l),l.displayName="GeneratorFunction",fY(u,i,"GeneratorFunction"),fY(d),fY(d,i,"Generator"),fY(d,r,function(){return this}),fY(d,"toString",function(){return"[object Generator]"}),(dY=function(){return{w:o,m:f}})()}function fY(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}fY=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){fY(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},fY(e,t,n,r)}function hY(e){return hY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hY(e)}function pY(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var mY=P_({variableName:qS().optional(),_version:Bk().optional()}),gY=function(){var e,t=(e=dY().m(function e(t,n,r){var i,o,a,s,l,u;return dY().w(function(e){for(;;)switch(e.n){case 0:if(i=mY.parse(t.data),o=PE(n,i,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:if(void 0===(a=n.args)||"object"===hY(a)&&null!==a){e.n=2;break}throw new Error("Args input for Get Local Variable must be an object if provided.");case 2:return s=n.schema,e.n=3,r.dependencies.st_getLocalVariable(o,a);case 3:if(l=e.v,void 0===s){e.n=6;break}if(s&&"function"==typeof s.safeParse){e.n=4;break}throw new Error("Schema input for Get Local Variable is invalid.");case 4:if((u=s.safeParse(l)).success){e.n=5;break}throw new Error('Local variable "'.concat(o,'" failed schema validation: ').concat(u.error.message));case 5:return e.a(2,{value:u.data});case 6:return e.a(2,{value:l})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){pY(o,r,i,a,s,"next",e)}function s(e){pY(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),vY={type:"getLocalVariableNode",label:"Get Local Variable",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Get Local Variable",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:cY,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:mY,currentVersion:1,initialData:{variableName:"chatVar"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"variableName",type:cE.STRING},{id:"schema",type:cE.SCHEMA},{id:"args",type:cE.OBJECT}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}]},validate:c$(l$("variableName","Variable Name is required.")),execute:gY,getDynamicHandles:function(e,t,n){var r=cX(e,t,n,"schema");return r?{inputs:[],outputs:[{id:"value",type:fX(r),schema:r}]}:{inputs:[],outputs:[]}}};function yY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bY(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(vY);function OY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return wY(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(wY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,wY(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,wY(d,"constructor",u),wY(u,"constructor",l),l.displayName="GeneratorFunction",wY(u,i,"GeneratorFunction"),wY(d),wY(d,i,"Generator"),wY(d,r,function(){return this}),wY(d,"toString",function(){return"[object Generator]"}),(OY=function(){return{w:o,m:f}})()}function wY(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}wY=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){wY(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},wY(e,t,n,r)}function xY(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var SY=P_({worldName:qS().optional(),entryUid:Bk().optional(),_version:Bk().optional()}),kY=function(){var e,t=(e=OY().m(function e(t,n,r){var i,o,a,s,l,u,c;return OY().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=SY.parse(t.data),a=PE(n,o,"worldName"),s=PE(n,o,"entryUid"),a){e.n=1;break}throw new Error("World name is required.");case 1:if(void 0!==s){e.n=2;break}throw new Error("Entry UID is required.");case 2:return e.n=3,i.getWorldInfos(["all"]);case 3:if(l=e.v,u=l[a]){e.n=4;break}throw new Error('Lorebook "'.concat(a,'" not found.'));case 4:if(c=u.find(function(e){return e.uid===s})){e.n=5;break}throw new Error('Entry with UID "'.concat(s,'" not found in "').concat(a,'".'));case 5:return e.a(2,{entry:c,key:c.key.join(", "),content:c.content,comment:c.comment})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){xY(o,r,i,a,s,"next",e)}function s(e){xY(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),_Y={type:"getLorebookEntryNode",label:"Get Lorebook Entry",category:"Lorebook",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=yY((0,T.useState)({}),2),s=a[0],l=a[1],u=SE.nodeDefinitionMap.get(r);(0,T.useEffect)(function(){br(["all"]).then(function(e){l(e)})},[]);var c=(0,T.useMemo)(function(){return Object.keys(s).map(function(e){return{value:e,label:e}})},[s]),d=(0,T.useMemo)(function(){return null!=i&&i.worldName&&s[i.worldName]?s[i.worldName].map(function(e){return{value:String(e.uid),label:e.comment||"Entry UID: ".concat(e.uid)}}):[]},[null==i?void 0:i.worldName,s]),f=(0,T.useMemo)(function(){return[{id:"worldName",label:"Lorebook Name",component:ur,props:{items:c,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{worldName:e[0],entryUid:void 0})},formatValue:function(e){return[null!=e?e:""]}},{id:"entryUid",label:"Entry",component:ur,props:{items:d,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0,disabled:!(null!=i&&i.worldName)},getValueFromEvent:function(e){return Number(e[0])},formatValue:function(e){return[String(null!=e?e:"")]}}]},[c,d,null==i?void 0:i.worldName]);return i&&u?(0,$.jsxs)(QE,{id:t,title:"Get Lorebook Entry",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:u,type:"input",fields:f,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:u,type:"output"})})]}):null},dataSchema:SY,currentVersion:1,initialData:{worldName:"",entryUid:void 0},handles:{inputs:[{id:"main",type:cE.ANY},{id:"worldName",type:cE.LOREBOOK_NAME},{id:"entryUid",type:cE.NUMBER}],outputs:[{id:"main",type:cE.ANY},{id:"entry",type:cE.OBJECT,schema:C$},{id:"key",type:cE.STRING},{id:"content",type:cE.STRING},{id:"comment",type:cE.STRING}]},validate:c$(l$("worldName","Lorebook Name is required."),l$("entryUid","Entry is required.")),execute:kY};function PY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return EY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EY(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(_Y);function $Y(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return TY(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(TY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,TY(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,TY(d,"constructor",u),TY(u,"constructor",l),l.displayName="GeneratorFunction",TY(u,i,"GeneratorFunction"),TY(d),TY(d,i,"Generator"),TY(d,r,function(){return this}),TY(d,"toString",function(){return"[object Generator]"}),($Y=function(){return{w:o,m:f}})()}function TY(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}TY=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){TY(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},TY(e,t,n,r)}function CY(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var jY=P_({worldName:qS().optional(),_version:Bk().optional()}),NY=function(){var e,t=(e=$Y().m(function e(t,n,r){var i,o,a,s,l;return $Y().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=jY.parse(t.data),a=PE(n,o,"worldName")){e.n=1;break}throw new Error("World name is required.");case 1:return e.n=2,i.getWorldInfos(["all"]);case 2:if(s=e.v,l=s[a]){e.n=3;break}throw new Error('Lorebook "'.concat(a,'" not found.'));case 3:return e.a(2,{entries:l})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){CY(o,r,i,a,s,"next",e)}function s(e){CY(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),AY={type:"getLorebookNode",label:"Get Lorebook",category:"Lorebook",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=PY((0,T.useState)([]),2),s=a[0],l=a[1],u=SE.nodeDefinitionMap.get(r);(0,T.useEffect)(function(){br(["all"]).then(function(e){l(Object.keys(e))})},[]);var c=(0,T.useMemo)(function(){return s.map(function(e){return{value:e,label:e}})},[s]),d=(0,T.useMemo)(function(){return[{id:"worldName",label:"Lorebook Name",component:ur,props:{items:c,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}]},[c]);return i&&u?(0,$.jsx)(QE,{id:t,title:"Get Lorebook",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:u,type:"input",fields:d,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:u,type:"output"})})]})}):null},dataSchema:jY,currentVersion:1,initialData:{worldName:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"worldName",type:cE.LOREBOOK_NAME}],outputs:[{id:"main",type:cE.ANY},{id:"entries",type:cE.OBJECT,schema:j$}]},validate:c$(l$("worldName","Lorebook Name is required.")),execute:NY};SE.register(AY);function IY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return MY(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(MY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,MY(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,MY(d,"constructor",u),MY(u,"constructor",l),l.displayName="GeneratorFunction",MY(u,i,"GeneratorFunction"),MY(d),MY(d,i,"Generator"),MY(d,r,function(){return this}),MY(d,"toString",function(){return"[object Generator]"}),(IY=function(){return{w:o,m:f}})()}function MY(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}MY=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){MY(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},MY(e,t,n,r)}function DY(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var RY=P_({promptName:qS().optional(),_version:Bk().optional()}),QY=function(){var e,t=(e=IY().m(function e(t,n){var r,i,o,a;return IY().w(function(e){for(;;)switch(e.n){case 0:if(r=RY.parse(t.data),i=PE(n,r,"promptName")){e.n=1;break}throw new Error("Prompt name not provided.");case 1:if(o=Lr.getSettings(),void 0!==(a=o.prompts[i])){e.n=2;break}throw new Error('Prompt "'.concat(i,'" not found.'));case 2:return e.a(2,{result:a})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){DY(o,r,i,a,s,"next",e)}function s(e){DY(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),zY={type:"getPromptNode",label:"Get Prompt",category:"User Interaction",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=(0,T.useMemo)(function(){var e=Lr.getSettings().prompts;return Object.keys(e).map(function(e){return{value:e,label:e}})},[]),l=(0,T.useMemo)(function(){return[{id:"promptName",label:"Prompt Name",component:ur,props:{items:s,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}]},[s]);return i&&a?(0,$.jsx)(QE,{id:t,title:"Get Prompt",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:l,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:RY,currentVersion:1,initialData:{promptName:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"promptName",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.STRING}]},validate:c$(l$("promptName","Prompt Name is required.")),execute:QY};function LY(e){return LY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LY(e)}SE.register(zY);var ZY=["value","onChange","options","listId","overrideDefaults","className"];function FY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FY(Object(n),!0).forEach(function(t){VY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VY(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=LY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=LY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LY(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GY=function(e){var t=e.value,n=e.onChange,r=e.options,i=e.listId,o=e.overrideDefaults,a=e.className,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ZY),l=(0,T.useMemo)(function(){var e=[];return o||e.push("text_pole"),e.push(a),e.filter(Boolean).join(" ")},[o,a]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("input",UY({type:"text",className:l,value:t,onChange:n,list:i},s)),(0,$.jsx)("datalist",{id:i,children:r.map(function(e,t){return(0,$.jsx)("option",{value:e},t)})})]})};function BY(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return XY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XY(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function XY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function YY(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return WY(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(WY(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,WY(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,WY(d,"constructor",u),WY(u,"constructor",l),l.displayName="GeneratorFunction",WY(u,i,"GeneratorFunction"),WY(d),WY(d,i,"Generator"),WY(d,r,function(){return this}),WY(d,"toString",function(){return"[object Generator]"}),(YY=function(){return{w:o,m:f}})()}function WY(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}WY=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){WY(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},WY(e,t,n,r)}function qY(e){return qY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qY(e)}function HY(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var KY=P_({path:qS().optional(),_version:Bk().optional()}),JY=function(){var e,t=(e=YY().m(function e(t,n){var r,i,o,a;return YY().w(function(e){for(;;)switch(e.n){case 0:if(r=KY.parse(t.data),i=PE(n,r,"path"),o=n.object,i){e.n=1;break}throw new Error("Property path is required in node ".concat(t.type,"."));case 1:if("object"===qY(o)&&null!==o){e.n=2;break}throw new Error("Input is not a valid object in ".concat(t.type,"."));case 2:return a=EE(o,i,void 0),e.a(2,{value:a})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){HY(o,r,i,a,s,"next",e)}function s(e){HY(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}();var eW={type:"getPropertyNode",label:"Get Property",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=nX(t,"object"),l=(0,T.useMemo)(function(){return s?VE(s):[]},[s]),u=(0,T.useMemo)(function(){return[{id:"path",label:"Property Path",component:GY,props:{type:"text",listId:"".concat(t,"-properties"),options:l}}]},[t,l]);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Get Property",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:u,data:i,updateNodeData:o}),s&&(0,$.jsxs)("details",{style:{marginTop:"5px",background:"#2a2a2a",padding:"5px",borderRadius:"3px"},children:[(0,$.jsx)("summary",{style:{color:"#888",fontSize:"11px",cursor:"pointer"},children:"Available Input Properties"}),(0,$.jsx)("pre",{style:{fontSize:"10px",color:"#ccc",margin:0,whiteSpace:"pre-wrap"},children:UE(s)})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:KY,currentVersion:1,initialData:{path:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"object",type:cE.OBJECT},{id:"path",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}]},validate:c$(l$("path","Property Path is required."),function(e,t){if(!t.some(function(t){return t.target===e.id&&"object"===t.targetHandle}))return{message:'An object must be connected to the "object" input.',severity:"error"}}),execute:JY,getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node,i=e.nodes,o=e.edges;if("output"===n&&"value"===t){var a,s=o.find(function(e){return e.target===r.id&&"object"===e.targetHandle});if(!s)return cE.ANY;var l=i.find(function(e){return e.id===s.source});if(!l)return cE.ANY;var u=tX(l,s.sourceHandle||null,"output",i,o);if(null==u||!u.schema)return cE.ANY;var c=function(e,t){if(""===t)return e;var n,r=e,i=BY(t.replace(/\[(\d+)\]/g,".$1").split("."));try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!r)return;for(var a=r;"unwrap"in a&&"function"==typeof a.unwrap;)a=a.unwrap();if(a instanceof __)r=a.shape[o];else{if(!(a instanceof x_))return;if(isNaN(parseInt(o,10)))return;r=a.element}}}catch(e){i.e(e)}finally{i.f()}return r}(u.schema,null!==(a=r.data.path)&&void 0!==a?a:"");if(c instanceof WS)return cE.STRING;if(c instanceof Gk)return cE.NUMBER;if(c instanceof Jk)return cE.BOOLEAN;if(c instanceof __||c instanceof x_)return cE.OBJECT}}};SE.register(eW);var tW=b(639),nW=b.n(tW),rW=[{id:"template",label:"Template",component:I,props:{rows:4}}];function iW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return oW(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(oW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,oW(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,oW(d,"constructor",u),oW(u,"constructor",l),l.displayName="GeneratorFunction",oW(u,i,"GeneratorFunction"),oW(d),oW(d,i,"Generator"),oW(d,r,function(){return this}),oW(d,"toString",function(){return"[object Generator]"}),(iW=function(){return{w:o,m:f}})()}function oW(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}oW=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){oW(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},oW(e,t,n,r)}function aW(e){return aW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aW(e)}function sW(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var lW=P_({template:qS().default("Hello, {{name}}!"),_version:Bk().optional()}),uW=function(){var e,t=(e=iW().m(function e(t,n){var r,i,o,a,s,l;return iW().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=lW.parse(t.data),o=PE(n,i,"template"),"object"!==aW(a=(null!==(r=n.context)&&void 0!==r?r:n)||{})&&(a={context:a}),e.p=1,s=nW().compile(o,{noEscape:!0,strict:!0}),e.a(2,{result:s(a)});case 2:throw e.p=2,l=e.v,new Error("Error executing handlebar template: ".concat(l.message));case 3:return e.a(2)}},e,null,[[1,2]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){sW(o,r,i,a,s,"next",e)}function s(e){sW(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),cW={type:"handlebarNode",label:"Handlebar",category:"Utility",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=nX(t,"context"),l=(0,T.useMemo)(function(){return s instanceof __},[s]);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Handlebar Template",selected:n,children:[(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:rW,data:i,updateNodeData:o}),l&&s&&(0,$.jsxs)("div",{style:{fontSize:"10px",color:"#aaa",marginTop:"5px"},children:[(0,$.jsx)("b",{children:"Available properties in `context`:"}),(0,$.jsx)("pre",{style:{margin:"2px 0 0 0",background:"#2a2a2a",padding:"4px",borderRadius:"3px",whiteSpace:"pre-wrap"},children:UE(s)})]})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:lW,currentVersion:1,initialData:{template:"Hello, {{name}}!"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"template",type:cE.STRING},{id:"context",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.STRING}]},execute:uW};SE.register(cW);function dW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return fW(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(fW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,fW(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,fW(d,"constructor",u),fW(u,"constructor",l),l.displayName="GeneratorFunction",fW(u,i,"GeneratorFunction"),fW(d),fW(d,i,"Generator"),fW(d,r,function(){return this}),fW(d,"toString",function(){return"[object Generator]"}),(dW=function(){return{w:o,m:f}})()}function fW(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}fW=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){fW(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},fW(e,t,n,r)}function hW(e){return hW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hW(e)}function pW(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var mW=P_({url:qS().optional(),method:G_(["GET","POST","PUT","PATCH","DELETE"]).default("GET"),headers:qS().default("{}"),body:qS().default("{}"),_version:Bk().optional()}),gW=function(){var e,t=(e=dW().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b;return dW().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=mW.parse(t.data),o=PE(n,i,"url")){e.n=1;break}throw new Error("URL is required.");case 1:if(a=PE(n,i,"method"),s=PE(n,i,"headers"),l=PE(n,i,"body"),u={},e.p=2,"object"!==hW(c=JSON.parse(s||"{}"))||null===c){e.n=3;break}u=c,e.n=4;break;case 3:throw new Error("Headers must be a JSON object.");case 4:e.n=6;break;case 5:throw e.p=5,y=e.v,new Error("Invalid JSON in headers: ".concat(y.message));case 6:if(d=null,"GET"!==a)if(f=n.body)d="object"===hW(f)?JSON.stringify(f):String(f),u["Content-Type"]||(u["Content-Type"]="application/json");else try{JSON.parse(l),d=l,u["Content-Type"]||(u["Content-Type"]="application/json")}catch(e){d=l}return e.p=7,e.n=8,fetch(o,{method:a,headers:u,body:d,signal:r.signal});case 8:if(h=e.v,p={},h.headers.forEach(function(e,t){p[t]=e}),!(g=h.headers.get("content-type"))||!g.includes("application/json")){e.n=10;break}return e.n=9,h.json();case 9:m=e.v,e.n=12;break;case 10:return e.n=11,h.text();case 11:m=e.v;case 12:if(h.ok){e.n=13;break}throw new Error("Request failed with status ".concat(h.status,": ").concat(JSON.stringify(m)));case 13:return e.a(2,{responseBody:m,statusCode:h.status,headers:p});case 14:if(e.p=14,b=e.v,"AbortError"!==(v=b).name){e.n=15;break}throw new Error("HTTP request was cancelled: ".concat(v.message));case 15:throw new Error("HTTP request failed: ".concat(v.message));case 16:return e.a(2)}},e,null,[[7,14],[2,5]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){pW(o,r,i,a,s,"next",e)}function s(e){pW(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),vW={type:"httpRequestNode",label:"HTTP Request",category:"System",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=(0,T.useMemo)(function(){return[{id:"url",label:"URL",component:N,props:{type:"text"}},{id:"method",label:"Method",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"GET",children:"GET"}),(0,$.jsx)("option",{value:"POST",children:"POST"}),(0,$.jsx)("option",{value:"PUT",children:"PUT"}),(0,$.jsx)("option",{value:"PATCH",children:"PATCH"}),(0,$.jsx)("option",{value:"DELETE",children:"DELETE"})]})}},{id:"headers",label:"Headers (JSON)",component:BG,props:{height:"100px",extensions:[HB({})],theme:"dark",style:{cursor:"text",marginTop:"5px"}},customChangeHandler:function(e){return o(t,{headers:e})}},{id:"body",label:"Body (JSON)",component:BG,props:{height:"100px",extensions:[HB({})],theme:"dark",style:{cursor:"text",marginTop:"5px"}},customChangeHandler:function(e){return o(t,{body:e})}}]},[o,t]);return i&&a?(0,$.jsx)(QE,{id:t,title:"HTTP Request",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:s,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:mW,currentVersion:1,initialData:{method:"GET",url:"https://api.example.com/data",headers:"{}",body:"{}"},isDangerous:!0,handles:{inputs:[{id:"main",type:cE.ANY},{id:"url",type:cE.STRING},{id:"method",type:cE.STRING},{id:"headers",type:cE.OBJECT},{id:"body",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"responseBody",type:cE.ANY},{id:"statusCode",type:cE.NUMBER},{id:"headers",type:cE.OBJECT}]},validate:c$(l$("url","URL is required.")),execute:gW};SE.register(vW);var yW=function(e,t){return XE(e).has(t)};function bW(e){return bW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bW(e)}function OW(e){return function(e){if(Array.isArray(e))return wW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wW(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wW(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function SW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xW(Object(n),!0).forEach(function(t){kW(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kW(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=bW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bW(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _W=["is_empty","is_not_empty"],PW=function(e){var t,n=e.nodeId,r=e.condition,i=e.onUpdate,o=e.onRemove,a=e.isOnlyCondition,s=e.isInputAnObject,l=e.availableProperties,u=yW(n,"value_".concat(r.id)),c=!_W.includes(r.operator);return(0,$.jsxs)("div",{style:{border:"1px solid #555",padding:"8px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$.jsxs)("span",{style:{fontSize:"10px",color:"#888",textTransform:"capitalize"},children:[r.mode," Mode"]}),(0,$.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,$.jsx)(j,{className:"fa-solid ".concat("simple"===r.mode?"fa-code":"fa-list-alt"),onClick:function(){"advanced"===r.mode?i({mode:"simple"}):i({mode:"advanced"})},title:"simple"===r.mode?"Switch to Advanced Code Editor":"Switch to Simple UI Editor"}),!a&&(0,$.jsx)(j,{className:"fa-solid fa-times",onClick:o,title:"Remove Condition"})]})]}),"simple"===r.mode?(0,$.jsxs)($.Fragment,{children:[s&&(0,$.jsx)(GY,{className:"nodrag",value:r.inputProperty,onChange:function(e){return i({inputProperty:e.target.value})},options:l,listId:"".concat(r.id,"-properties"),placeholder:"Property path (e.g., name)"}),(0,$.jsx)(A,{className:"nodrag",value:r.operator,onChange:function(e){return i({operator:e.target.value})},children:QW.map(function(e){return(0,$.jsx)("option",{value:e,children:e.replace(/_/g," ")},e)})}),c&&(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,$.jsx)(Ad,{type:"target",position:vl.Left,id:"value_".concat(r.id),style:{position:"relative",transform:"none",right:0,top:0}}),u?(0,$.jsx)("label",{style:{marginLeft:"10px",color:"#888",fontStyle:"italic"},children:"Value from connection"}):(0,$.jsx)(N,{className:"nodrag",value:null!==(t=r.value)&&void 0!==t?t:"",onChange:function(e){return i({value:e.target.value})},placeholder:"Value to compare"})]})]}):(0,$.jsx)(BG,{className:"nodrag",value:r.code||"",height:"100px",extensions:[HB({})],onChange:function(e){return i({code:e})},theme:"dark",style:{cursor:"text"}}),(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[(0,$.jsx)("span",{children:"True"}),(0,$.jsx)(Ad,{type:"source",position:vl.Right,id:r.id,style:{position:"relative",transform:"none",right:0,top:0,marginLeft:"5px"}})]})]})};function EW(e){return EW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EW(e)}function $W(e){return function(e){if(Array.isArray(e))return DW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||MW(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return CW(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(CW(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,CW(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,CW(d,"constructor",u),CW(u,"constructor",l),l.displayName="GeneratorFunction",CW(u,i,"GeneratorFunction"),CW(d),CW(d,i,"Generator"),CW(d,r,function(){return this}),CW(d,"toString",function(){return"[object Generator]"}),(TW=function(){return{w:o,m:f}})()}function CW(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}CW=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){CW(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},CW(e,t,n,r)}function jW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function NW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jW(Object(n),!0).forEach(function(t){AW(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function AW(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=EW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=EW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EW(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IW(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=MW(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function MW(e,t){if(e){if("string"==typeof e)return DW(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DW(e,t):void 0}}function DW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function RW(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var QW=["equals","not_equals","greater_than","less_than","contains","not_contains","is_empty","is_not_empty"],zW=P_({id:qS(),mode:G_(["simple","advanced"]).default("simple"),inputProperty:qS().default(""),operator:G_(QW).default("equals"),value:h_().optional(),code:qS().default("return true;")}),LW=P_({conditions:S_(zW).min(1),_version:Bk().optional()}),ZW=function(e){return"value_".concat(e)},FW=function(){var e,t=(e=TW().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O;return TW().w(function(e){for(;;)switch(e.p=e.n){case 0:i=r.dependencies,o=r.executionVariables,a=LW.parse(t.data),s=n.value,l=IW(a.conditions),e.p=1,l.s();case 2:if((u=l.n()).done){e.n=17;break}if(c=u.value,d=!1,"simple"!==c.mode){e.n=12;break}h=c.inputProperty?EE(s,c.inputProperty,void 0):s,p=null!==(f=n[ZW(c.id)])&&void 0!==f?f:c.value,y=c.operator,e.n="equals"===y?3:"not_equals"===y?4:"greater_than"===y?5:"less_than"===y?6:"contains"===y?7:"not_contains"===y?8:"is_empty"===y?9:"is_not_empty"===y?10:11;break;case 3:return d=h===p,e.a(3,11);case 4:return d=h!==p,e.a(3,11);case 5:return d=h>p,e.a(3,11);case 6:return d=h<p,e.a(3,11);case 7:return d=String(h).includes(String(p)),e.a(3,11);case 8:return d=!String(h).includes(String(p)),e.a(3,11);case 9:return d=""===h||null==h,e.a(3,11);case 10:return d=""!==h&&null!=h,e.a(3,11);case 11:e.n=15;break;case 12:m=null!=s?s:n,g=NW({},Object.fromEntries(o)),e.p=13,v=new Function("input","variables","stContext",c.code),d=!!v(m,g,i.getSillyTavernContext()),e.n=15;break;case 14:throw e.p=14,b=e.v,new Error("Error executing condition code: ".concat(b.message));case 15:if(!d){e.n=16;break}return e.a(2,{activatedHandle:c.id});case 16:e.n=2;break;case 17:e.n=19;break;case 18:e.p=18,O=e.v,l.e(O);case 19:return e.p=19,l.f(),e.f(19);case 20:return e.a(2,{activatedHandle:"false"})}},e,null,[[13,14],[1,18,19,20]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){RW(o,r,i,a,s,"next",e)}function s(e){RW(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),UW={type:"ifNode",label:"If",category:"Logic",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=nX(t,"value"),l=(0,T.useMemo)(function(){return s instanceof __},[s]),u=(0,T.useMemo)(function(){return l&&s?VE(s):[]},[s,l]),c=(0,T.useMemo)(function(){return[{id:"main",label:"Main",component:function(){return null}},{id:"value",label:"Input Value",component:function(){return null}}]},[]);if(!i||!a)return null;return(0,$.jsxs)(QE,{id:t,title:"If Conditions",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:c,data:{},exclude:i.conditions.map(function(e){return"value_".concat(e.id)})}),(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},children:[i.conditions.map(function(e,n){return(0,$.jsxs)("div",{children:[(0,$.jsxs)("label",{style:{fontSize:"10px",color:"#888"},children:["Condition ",n+1]}),(0,$.jsx)(PW,{nodeId:t,condition:e,onUpdate:function(n){return r=e.id,a=n,s=i.conditions.map(function(e){return e.id===r?SW(SW({},e),a):e}),void o(t,{conditions:s});var r,a,s},onRemove:function(){return n=e.id,r=i.conditions.filter(function(e){return e.id!==n}),void o(t,{conditions:r});var n,r},isOnlyCondition:1===i.conditions.length,isInputAnObject:l,availableProperties:u})]},e.id)}),(0,$.jsx)(j,{onClick:function(){var e={id:oT(),mode:"simple",inputProperty:"",operator:"equals",value:"",code:"return true;"};o(t,{conditions:[].concat(OW(i.conditions),[e])})},children:"Add Else If"}),l&&s&&(0,$.jsxs)("details",{style:{marginTop:"5px",background:"#2a2a2a",padding:"5px",borderRadius:"3px"},children:[(0,$.jsx)("summary",{style:{color:"#888",fontSize:"11px",cursor:"pointer"},children:"Available Input Properties"}),(0,$.jsx)("pre",{style:{fontSize:"10px",color:"#ccc",margin:0,whiteSpace:"pre-wrap"},children:UE(s)})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output",exclude:i.conditions.map(function(e){return e.id})})})]})]})},dataSchema:LW,currentVersion:1,initialData:{conditions:[{id:oT(),mode:"simple",inputProperty:"",operator:"equals",value:"",code:"return true;"}]},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}],outputs:[]},validate:function(e,t){var n=[];return 0===t.filter(function(t){return t.source===e.id}).length&&n.push({message:"Node is a dead end. Connect at least one output.",severity:"warning"}),n},execute:FW,isDangerous:!0,getDynamicHandles:function(e,t,n){var r,i=e.data.conditions||[],o=n.find(function(t){return t.target===e.id&&"main"===t.targetHandle}),a=o?t.find(function(e){return e.id===o.source}):void 0,s=cE.ANY;if(a&&o){var l=tX(a,o.sourceHandle||null,"output",t,n);l&&(s=l.type,r=l.schema)}var u=i.map(function(e,t){return{id:e.id,type:s,schema:r,label:"Condition ".concat(t+1," True")}}),c=[{id:"main",type:s,schema:r,label:"Main"}].concat($W(u),[{id:"false",type:s,schema:r,label:"Else"}]);return{inputs:i.map(function(e,t){return{id:ZW(e.id),type:cE.ANY,label:"Value for Condition ".concat(t+1)}}),outputs:c}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node,i=e.nodes,o=e.edges;if("input"===n){if("main"===t)return cE.ANY;if("value"===t)return cE.ANY;if((r.data.conditions||[]).some(function(e){return ZW(e.id)===t}))return cE.ANY}if("output"===n){var a=(r.data.conditions||[]).some(function(e){return e.id===t});if("main"===t||"false"===t||a){var s=o.find(function(e){return e.target===r.id&&"main"===e.targetHandle});if(s){var l=i.find(function(e){return e.id===s.source});if(l){var u,c=tX(l,s.sourceHandle||null,"output",i,o);return null!==(u=null==c?void 0:c.type)&&void 0!==u?u:cE.ANY}}return cE.ANY}}},determineEdgesToFollow:function(e,t){return null!=e&&e.activatedHandle?t.filter(function(t){return t.sourceHandle===e.activatedHandle}):[]}};function VW(e){return VW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VW(e)}function GW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function BW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GW(Object(n),!0).forEach(function(t){XW(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function XW(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=VW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VW(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YW(e){return function(e){if(Array.isArray(e))return WW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return WW(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WW(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(UW);var qW=function(e){var t=e.nodeId,n=e.item,r=e.path,i=e.parentType,o=e.onUpdate,a=e.onRemove,s=e.onAddChild,l=qf(),u=(0,T.useMemo)(function(){return l.some(function(e){return e.target===t&&e.targetHandle===n.id})},[l,t,n.id]);return(0,$.jsxs)("div",{style:{marginLeft:r.length>1?"15px":0,marginTop:"5px"},children:[(0,$.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:["object"===i&&(0,$.jsx)(N,{className:"nodrag",value:n.key,onChange:function(e){return o(r,{key:e.target.value})},placeholder:"Key"}),(0,$.jsxs)(A,{className:"nodrag",value:n.type,onChange:function(e){var t,n=e.target.value;switch(n){case"string":t="";break;case"number":t=0;break;case"boolean":t=!1;break;case"object":case"array":t=[]}o(r,{type:n,value:t})},children:[(0,$.jsx)("option",{value:"string",children:"string"}),(0,$.jsx)("option",{value:"number",children:"number"}),(0,$.jsx)("option",{value:"boolean",children:"boolean"}),(0,$.jsx)("option",{value:"object",children:"object"}),(0,$.jsx)("option",{value:"array",children:"array"})]}),(0,$.jsx)(j,{onClick:function(){return a(r)},children:"✕"})]}),(0,$.jsx)("div",{style:{marginTop:"5px"},children:function(){var e;switch(n.type){case"string":e=(0,$.jsx)(N,{className:"nodrag",value:n.value,onChange:function(e){return o(r,{value:e.target.value})}});break;case"number":e=(0,$.jsx)(N,{className:"nodrag",type:"number",value:n.value,onChange:function(e){return o(r,{value:Number(e.target.value)})}});break;case"boolean":e=(0,$.jsxs)(A,{className:"nodrag",value:String(n.value),onChange:function(e){return o(r,{value:"true"===e.target.value})},children:[(0,$.jsx)("option",{value:"true",children:"true"}),(0,$.jsx)("option",{value:"false",children:"false"})]});break;default:return null}return(0,$.jsxs)("div",{style:{position:"relative"},children:[(0,$.jsx)(Ad,{type:"target",position:vl.Left,id:n.id,style:{top:"50%",transform:"translateY(-50%)"}}),u?(0,$.jsx)("span",{style:{marginLeft:"15px",color:"#888",fontStyle:"italic"},children:"Value from connection"}):e]})}()}),("object"===n.type||"array"===n.type)&&(0,$.jsxs)("div",{style:{marginLeft:"10px",borderLeft:"1px solid #444",paddingLeft:"5px"},children:[n.value.map(function(e,i){return(0,$.jsx)(qW,{nodeId:t,item:e,path:[].concat(YW(r),[i]),parentType:n.type,onUpdate:o,onRemove:a,onAddChild:s},e.id)}),(0,$.jsxs)(j,{onClick:function(){return s(r)},style:{marginTop:"5px"},children:["+ Add ","object"===n.type?"Property":"Item"]})]})]})};function HW(e){return HW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HW(e)}function KW(e){return function(e){if(Array.isArray(e))return sq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aq(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JW(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return eq(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(eq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,eq(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,eq(d,"constructor",u),eq(u,"constructor",l),l.displayName="GeneratorFunction",eq(u,i,"GeneratorFunction"),eq(d),eq(d,i,"Generator"),eq(d,r,function(){return this}),eq(d,"toString",function(){return"[object Generator]"}),(JW=function(){return{w:o,m:f}})()}function eq(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}eq=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){eq(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},eq(e,t,n,r)}function tq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tq(Object(n),!0).forEach(function(t){rq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=HW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HW(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iq(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function oq(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=aq(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function aq(e,t){if(e){if("string"==typeof e)return sq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sq(e,t):void 0}}function sq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lq=P_({id:qS(),key:qS(),type:G_(["string","number","boolean","object","array"])}).extend({value:_P(function(){return C_([qS(),Bk(),e_(),S_(lq)])})}),uq=P_({rootType:G_(["object","array"]).default("object"),items:S_(lq).default([]),_version:Bk().optional()}),cq=function(e,t){if(Object.prototype.hasOwnProperty.call(t,e.id))return t[e.id];switch(e.type){case"string":case"number":case"boolean":return e.value;case"object":var n,r={},i=oq(e.value);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[o.key]=cq(o,t)}}catch(e){i.e(e)}finally{i.f()}return r;case"array":return e.value.map(function(e){return cq(e,t)})}},dq=function(){var e,t=(e=JW().m(function e(t,n){var r,i,o,a,s;return JW().w(function(e){for(;;)switch(e.n){case 0:if("array"!==(r=uq.parse(t.data)).rootType){e.n=1;break}return e.a(2,{result:r.items.map(function(e){return cq(e,n)})});case 1:i={},o=oq(r.items);try{for(o.s();!(a=o.n()).done;)s=a.value,i[s.key]=cq(s,n)}catch(e){o.e(e)}finally{o.f()}return e.a(2,nq({result:i},i))}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){iq(o,r,i,a,s,"next",e)}function s(e){iq(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),fq=function(e){var t,n=[],r=new Set,i=oq(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.key&&""!==o.key.trim()||n.push({message:"Object keys cannot be empty.",severity:"error"}),r.has(o.key)&&n.push({message:'Duplicate key found: "'.concat(o.key,'".'),severity:"error"}),r.add(o.key),"object"!==o.type&&"array"!==o.type||n.push.apply(n,KW(fq(o.value)))}}catch(e){i.e(e)}finally{i.f()}return n};function hq(e){var t,n=[],r=oq(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;switch(i.type){case"string":n.push({id:i.id,type:cE.STRING});break;case"number":n.push({id:i.id,type:cE.NUMBER});break;case"boolean":n.push({id:i.id,type:cE.BOOLEAN});break;case"object":case"array":n.push.apply(n,KW(hq(i.value)))}}}catch(e){r.e(e)}finally{r.f()}return n}function pq(e,t){var n,r=oq(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.id===t)return i;if("object"===i.type||"array"===i.type){var o=pq(i.value,t);if(o)return o}}}catch(e){r.e(e)}finally{r.f()}return null}var mq={type:"jsonNode",label:"JSON",category:"JSON",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);if(!i||!a)return null;var s=function(e,t,n){for(var r=structuredClone(e),i=r,o=0;o<t.length-1;o++)i=i[t[o]].value;var a=t[t.length-1];return i[a]=n(i[a]),r},l=function(e,n){var r=s(i.items,e,function(e){return BW(BW({},e),n)});o(t,{items:r})},u=function(e){var n=structuredClone(i.items),r=n;if(e.length>1){for(var a=n,s=0;s<e.length-2;s++)a=a[e[s]].value;r=a[e[e.length-2]].value}r.splice(e[e.length-1],1),o(t,{items:n})},c=function(e){var n={id:oT(),key:"newKey",value:"",type:"string"},r=s(i.items,e,function(e){return BW(BW({},e),{},{value:[].concat(YW(e.value),[n])})});o(t,{items:r})};return(0,$.jsxs)(QE,{id:t,title:"JSON",selected:n,children:[(0,$.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,$.jsx)("label",{children:"Root Type: "}),(0,$.jsxs)(A,{className:"nodrag",value:i.rootType,onChange:function(e){o(t,{rootType:e.target.value,items:[]})},children:[(0,$.jsx)("option",{value:"object",children:"Object"}),(0,$.jsx)("option",{value:"array",children:"Array"})]})]}),(i.items||[]).map(function(e,n){var r;return(0,$.jsx)(qW,{nodeId:t,item:e,path:[n],parentType:null!==(r=i.rootType)&&void 0!==r?r:"object",onUpdate:l,onRemove:u,onAddChild:c},e.id)}),(0,$.jsxs)(j,{className:"nodrag",onClick:function(){var e={id:oT(),key:"newKey",value:"",type:"string"};o(t,{items:[].concat(YW(i.items),[e])})},style:{marginTop:"10px"},children:["Add ","object"===i.rootType?"Property":"Item"]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:uq,currentVersion:1,initialData:{items:[],rootType:"object"},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.OBJECT}]},validate:function(e){return"object"!==e.data.rootType?[]:fq(e.data.items)},execute:dq,getDynamicHandles:function(e){var t=e.data,n=hq(t.items),r=function(e){if("array"===e.rootType){var t,n=null===(t=e.items)||void 0===t?void 0:t[0];return S_(n?lX(n):h_())}var r={};return e.items.forEach(function(e){r[e.key]=lX(e)}),P_(r)}(t),i=[{id:"result",type:cE.OBJECT,schema:r}];if("object"===t.rootType){var o,a=oq(t.items);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.key){var l=lX(s);i.push({id:s.key,type:fX(l),schema:l})}}}catch(e){a.e(e)}finally{a.f()}}return{inputs:n,outputs:i}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("input"===n&&t){var i=pq(r.data.items,t);if(i)switch(i.type){case"string":return cE.STRING;case"number":return cE.NUMBER;case"boolean":return cE.BOOLEAN}}if("output"===n){if("result"===t)return cE.OBJECT;var o=r.data;if("object"===o.rootType){var a=o.items.find(function(e){return e.key===t});if(a)return fX(lX(a))}}}};SE.register(mq);function gq(e){return gq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gq(e)}function vq(e){return function(e){if(Array.isArray(e))return yq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yq(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Oq(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Oq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Oq(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Oq(d,"constructor",u),Oq(u,"constructor",l),l.displayName="GeneratorFunction",Oq(u,i,"GeneratorFunction"),Oq(d),Oq(d,i,"Generator"),Oq(d,r,function(){return this}),Oq(d,"toString",function(){return"[object Generator]"}),(bq=function(){return{w:o,m:f}})()}function Oq(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Oq=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Oq(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Oq(e,t,n,r)}function wq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wq(Object(n),!0).forEach(function(t){Sq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Sq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=gq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kq(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function _q(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){kq(o,r,i,a,s,"next",e)}function s(e){kq(o,r,i,a,s,"throw",e)}a(void 0)})}}var Pq=P_({profileId:qS().default(""),schemaName:qS().default("responseSchema"),promptEngineeringMode:G_(Er).default(Er.NATIVE),maxResponseToken:Bk().default(1e3),stream:e_().default(!1),onStreamFlowId:qS().optional(),_version:Bk().optional()}),Eq=function(){var e=_q(bq().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b;return bq().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=r.signal,a=r.depth,s=r.executionPath,l=Pq.parse(t.data),u=PE(n,l,"profileId"),c=PE(n,l,"maxResponseToken"),d=PE(n,l,"stream"),f=PE(n,l,"onStreamFlowId"),h=PE(n,l,"messages"),p=PE(n,l,"schema"),u&&h&&void 0!==c){e.n=1;break}throw new Error("Missing required inputs: profileId, messages, and maxResponseToken.");case 1:if(!p){e.n=3;break}return m=PE(n,l,"schemaName"),g=PE(n,l,"promptEngineeringMode"),e.n=2,i.makeStructuredRequest(u,h,p,m||"response",g,c,o);case 2:return v=e.v,e.a(2,xq(xq({},v),{},{result:v}));case 3:return d&&f&&(y=function(){var e=_q(bq().m(function e(t){var n,r,o,l,u;return bq().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,i.executeSubFlow(f,t,a+1,s);case 1:e.n=3;break;case 2:throw e.p=2,u=e.v,console.error('[Flowchart] Error in streaming sub-flow "'.concat(f,'":'),u),o=null!==(n=null===(r=Lr.getSettings().flows.find(function(e){return e.id===f}))||void 0===r?void 0:r.name)&&void 0!==n?n:f,l=u instanceof Error?u.message:"string"==typeof u?u:"Unknown error",Br("error",'Streaming sub-flow "'.concat(o,'" failed: ').concat(l),"execution"),u;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e.n=4,i.makeSimpleRequest(u,h,c,y,o);case 4:return b=e.v,e.a(2,{result:b});case 5:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),$q={type:"llmRequestNode",label:"LLM Request",category:"API Request",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=yW(t,"schema"),l=(0,T.useMemo)(function(){var e=[{id:"profileId",label:"Connection Profile",component:ce,props:{initialSelectedProfileId:null==i?void 0:i.profileId},customChangeHandler:function(e){o(t,{profileId:(null==e?void 0:e.id)||""})}},{id:"maxResponseToken",label:"Max Response Tokens",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}];return s||e.push({id:"stream",label:"Stream Response",component:N,props:{type:"checkbox"},getValueFromEvent:function(e){return e.target.checked}}),s&&e.push({id:"schemaName",label:"Schema Name",component:N,props:{type:"text"}},{id:"promptEngineeringMode",label:"Prompt Engineering Mode",component:A,props:{children:Object.values(Er).map(function(e){return(0,$.jsx)("option",{value:e,children:e},e)})}}),e},[s,null==i?void 0:i.profileId,t,o]);return i&&a?(0,$.jsxs)(QE,{id:t,title:"LLM Request",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:l,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:Pq,currentVersion:1,initialData:{profileId:"",schemaName:"mySchema",promptEngineeringMode:Er.NATIVE,maxResponseToken:1e3,stream:!1},handles:{inputs:[{id:"main",type:cE.ANY},{id:"profileId",type:cE.PROFILE_ID},{id:"messages",type:cE.MESSAGES},{id:"schema",type:cE.SCHEMA},{id:"maxResponseToken",type:cE.NUMBER}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.ANY}]},validate:function(e,t){var n=c$(l$("profileId","Connection Profile is required."),u$("messages",'A "Messages" input is required.'))(e,t);return e.data.stream&&t.some(function(t){return t.target===e.id&&"schema"===t.targetHandle})&&n.push({message:"Streaming is not supported for structured (schema-based) requests.",severity:"error"}),!e.data.stream||e.data.onStreamFlowId||t.some(function(t){return t.target===e.id&&"onStreamFlowId"===t.targetHandle})||n.push({fieldId:"onStreamFlowId",message:'An "On Stream" flow must be selected when streaming is enabled.',severity:"error"}),n},execute:Eq,getDynamicHandles:function(e,t,n){var r=n.find(function(t){return t.target===e.id&&"schema"===t.targetHandle}),i=!!r,o=e.data.stream,a=[];if(i&&(a.push({id:"schemaName",type:cE.STRING}),a.push({id:"promptEngineeringMode",type:cE.STRING})),i||(a.push({id:"stream",type:cE.BOOLEAN}),o&&a.push({id:"onStreamFlowId",type:cE.FLOW_ID})),!i)return{inputs:a,outputs:[{id:"result",type:cE.STRING}]};var s=t.find(function(e){return e.id===r.source});if("schemaNode"!==(null==s?void 0:s.type)||!Array.isArray(s.data.fields))return{inputs:a,outputs:[{id:"result",type:cE.STRING}]};var l=s.data.fields,u=sX(l),c={id:"result",type:cE.STRUCTURED_RESULT,schema:u},d=l.map(function(e){return{id:e.name,type:fX(aX(e)),schema:aX(e)}});return{inputs:a,outputs:[c].concat(vq(d))}},getSuggestionBlueprints:function(e){return"inputs"===e.direction?[{id:"streaming",labelSuffix:"(Streaming)",dataOverrides:{stream:!0}}]:[]},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node,i=e.nodes,o=e.edges;if("output"===n){var a=o.find(function(e){return e.target===r.id&&"schema"===e.targetHandle});if(!a)return"result"===t?cE.STRING:void 0;if("result"===t)return cE.STRUCTURED_RESULT;var s=i.find(function(e){return e.id===a.source});if("schemaNode"===(null==s?void 0:s.type)&&Array.isArray(s.data.fields)){var l=s.data.fields.find(function(e){return e.name===t});if(l)return fX(aX(l))}}}};SE.register($q);var Tq=[{id:"prefix",label:"Log Prefix",component:N,props:{placeholder:"Prefix for the log message",type:"text"}}];function Cq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return jq(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(jq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,jq(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,jq(d,"constructor",u),jq(u,"constructor",l),l.displayName="GeneratorFunction",jq(u,i,"GeneratorFunction"),jq(d),jq(d,i,"Generator"),jq(d,r,function(){return this}),jq(d,"toString",function(){return"[object Generator]"}),(Cq=function(){return{w:o,m:f}})()}function jq(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}jq=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){jq(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},jq(e,t,n,r)}function Nq(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var Aq=P_({prefix:qS().default(""),_version:Bk().optional()}),Iq=function(){var e,t=(e=Cq().m(function e(t,n){var r;return Cq().w(function(e){for(;;)switch(e.n){case 0:r=Aq.parse(t.data),console.log(r.prefix,n.value);case 1:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Nq(o,r,i,a,s,"next",e)}function s(e){Nq(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),Mq={type:"logNode",label:"Log",category:"Utility",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Log Message",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:Tq,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:Aq,currentVersion:1,initialData:{prefix:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY}]},execute:Iq};SE.register(Mq);function Dq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Rq(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Rq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Rq(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Rq(d,"constructor",u),Rq(u,"constructor",l),l.displayName="GeneratorFunction",Rq(u,i,"GeneratorFunction"),Rq(d),Rq(d,i,"Generator"),Rq(d,r,function(){return this}),Rq(d,"toString",function(){return"[object Generator]"}),(Dq=function(){return{w:o,m:f}})()}function Rq(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Rq=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Rq(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Rq(e,t,n,r)}function Qq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qq(Object(n),!0).forEach(function(t){Lq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Zq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zq(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zq(e){return Zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zq(e)}function Fq(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var Uq=P_({payload:qS().default("{}"),_version:Bk().optional()}),Vq=function(){var e,t=(e=Dq().m(function e(t){var n,r,i;return Dq().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=Uq.parse(t.data),e.p=1,"object"!==Zq(r=JSON.parse(n.payload))||null===r||Array.isArray(r)){e.n=2;break}return e.a(2,zq({result:r},r));case 2:return e.a(2,{result:r});case 3:throw e.p=3,i=e.v,new Error("Invalid JSON payload: ".concat(i.message));case 4:return e.a(2)}},e,null,[[1,3]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Fq(o,r,i,a,s,"next",e)}function s(e){Fq(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}(),Gq={type:"manualTriggerNode",label:"Manual Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);if(!i||!a)return null;return(0,$.jsxs)(QE,{id:t,title:"Manual Trigger",selected:n,children:[(0,$.jsx)("label",{children:"Initial JSON Payload"}),(0,$.jsx)(BG,{className:"nodrag",value:i.payload||"{}",height:"150px",extensions:[HB({})],width:"100%",onChange:function(e){o(t,{payload:e})},theme:"dark",style:{cursor:"text"}}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:Uq,currentVersion:1,initialData:{payload:'{\n  "key": "value"\n}'},handles:{inputs:[],outputs:[]},execute:Vq,getDynamicHandles:function(e){try{var t=JSON.parse(e.data.payload),n=hX(t),r=[{id:"result",type:n,schema:uX(t)}];if(n===cE.OBJECT&&!Array.isArray(t))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.push({id:i,type:hX(t[i]),schema:uX(t[i])});return{inputs:[],outputs:r}}catch(e){return{inputs:[],outputs:[{id:"result",type:cE.ANY}]}}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("output"===n)try{var i=JSON.parse(r.data.payload);if("result"===t)return hX(i);if("object"===Zq(i)&&null!==i&&!Array.isArray(i)&&t)return hX(i[t])}catch(e){return cE.ANY}}};SE.register(Gq);var Bq=[{id:"operation",label:"Operation",component:A,props:{children:["add","subtract","multiply","divide","modulo"].map(function(e){return(0,$.jsx)("option",{value:e,style:{textTransform:"capitalize"},children:e},e)})}},{id:"a",label:"Value A",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"b",label:"Value B",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}];function Xq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Yq(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Yq(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Yq(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Yq(d,"constructor",u),Yq(u,"constructor",l),l.displayName="GeneratorFunction",Yq(u,i,"GeneratorFunction"),Yq(d),Yq(d,i,"Generator"),Yq(d,r,function(){return this}),Yq(d,"toString",function(){return"[object Generator]"}),(Xq=function(){return{w:o,m:f}})()}function Yq(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Yq=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Yq(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Yq(e,t,n,r)}function Wq(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var qq=P_({operation:G_(["add","subtract","multiply","divide","modulo"]).optional(),a:Bk().optional(),b:Bk().optional(),_version:Bk().optional()}),Hq=function(){var e,t=(e=Xq().m(function e(t,n){var r,i,o,a,s,l,u,c;return Xq().w(function(e){for(;;)switch(e.n){case 0:if(a=qq.parse(t.data),s=null!==(r=PE(n,a,"operation"))&&void 0!==r?r:"add",l=null!==(i=PE(n,a,"a"))&&void 0!==i?i:0,u=null!==(o=PE(n,a,"b"))&&void 0!==o?o:0,"number"==typeof l&&"number"==typeof u){e.n=1;break}throw new Error("Both inputs must be numbers.");case 1:c=s,e.n="add"===c?2:"subtract"===c?3:"multiply"===c?4:"divide"===c?5:"modulo"===c?7:9;break;case 2:return e.a(2,{result:l+u});case 3:return e.a(2,{result:l-u});case 4:return e.a(2,{result:l*u});case 5:if(0!==u){e.n=6;break}throw new Error("Division by zero.");case 6:return e.a(2,{result:l/u});case 7:if(0!==u){e.n=8;break}throw new Error("Division by zero for modulo.");case 8:return e.a(2,{result:l%u});case 9:throw new Error("Unknown math operation: ".concat(s));case 10:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Wq(o,r,i,a,s,"next",e)}function s(e){Wq(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),Kq={type:"mathNode",label:"Math",category:"Math & Logic",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Math Operation",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:Bq,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:qq,currentVersion:1,initialData:{operation:"add",a:0,b:0},handles:{inputs:[{id:"main",type:cE.ANY},{id:"operation",type:cE.STRING},{id:"a",type:cE.NUMBER},{id:"b",type:cE.NUMBER}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.NUMBER}]},execute:Hq};SE.register(Kq);function Jq(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return eH(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(eH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,eH(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,eH(d,"constructor",u),eH(u,"constructor",l),l.displayName="GeneratorFunction",eH(u,i,"GeneratorFunction"),eH(d),eH(d,i,"Generator"),eH(d,r,function(){return this}),eH(d,"toString",function(){return"[object Generator]"}),(Jq=function(){return{w:o,m:f}})()}function eH(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}eH=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){eH(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},eH(e,t,n,r)}function tH(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var nH=P_({inputCount:Bk().min(1).default(2),_version:Bk().optional()}),rH="messages_",iH=function(){var e,t=(e=Jq().m(function e(t,n){var r,i;return Jq().w(function(e){for(;;)if(0===e.n)return r=SE.nodeDefinitionMap.get("mergeMessagesNode"),i=Object.keys(n).filter(function(e){return r.isDynamicHandle(e)&&Array.isArray(n[e])}).sort(function(e,t){return parseInt(e.split("_")[1],10)-parseInt(t.split("_")[1],10)}).flatMap(function(e){return n[e]}),e.a(2,{result:i})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){tH(o,r,i,a,s,"next",e)}function s(e){tH(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),oH={type:"mergeMessagesNode",label:"Merge Messages",category:"API Request",component:function(e){var t,n=e.id,r=e.selected,i=e.type,o=W1(function(e){var t;return{data:null===(t=e.nodes.find(function(e){return e.id===n}))||void 0===t?void 0:t.data,updateNodeData:e.updateNodeData}},wc),a=o.data,s=o.updateNodeData,l=SE.nodeDefinitionMap.get(i),u=null!==(t=null==a?void 0:a.inputCount)&&void 0!==t?t:2;if(!a)return null;var c=function(e){s(n,{inputCount:Math.max(1,e)})};return(0,$.jsxs)(QE,{id:n,title:"Merge Messages",selected:r,children:[(0,$.jsx)(JE,{nodeId:n,definition:l,type:"input"}),(0,$.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"10px"},children:[(0,$.jsx)(j,{onClick:function(){return c(u+1)},children:"+"}),(0,$.jsx)(j,{onClick:function(){return c(u-1)},disabled:u<=1,children:"-"})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:n,definition:l,type:"output"})})]})},dataSchema:nH,currentVersion:1,initialData:{inputCount:2},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.MESSAGES}]},execute:iH,getDynamicHandleId:function(e){return"".concat(rH).concat(e)},isDynamicHandle:function(e){var t;return null!==(t=null==e?void 0:e.startsWith(rH))&&void 0!==t&&t},getDynamicHandles:function(e){for(var t=[],n=0;n<e.data.inputCount;n++)t.push({id:"".concat(rH).concat(n),type:cE.MESSAGES});return{inputs:t,outputs:[]}},getHandleType:function(e){var t=e.handleId;if("input"===e.handleDirection&&null!=t&&t.startsWith(rH))return cE.MESSAGES}};SE.register(oH);function aH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return sH(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(sH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,sH(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,sH(d,"constructor",u),sH(u,"constructor",l),l.displayName="GeneratorFunction",sH(u,i,"GeneratorFunction"),sH(d),sH(d,i,"Generator"),sH(d,r,function(){return this}),sH(d,"toString",function(){return"[object Generator]"}),(aH=function(){return{w:o,m:f}})()}function sH(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}sH=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){sH(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},sH(e,t,n,r)}function lH(e){return function(e){if(Array.isArray(e))return uH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return uH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uH(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cH(e){return cH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cH(e)}function dH(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var fH=P_({inputCount:Bk().min(1).default(2),_version:Bk().optional()}),hH="object_",pH=function(){var e,t=(e=aH().m(function e(t,n){var r,i,o;return aH().w(function(e){for(;;)if(0===e.n)return r=SE.nodeDefinitionMap.get("mergeObjectsNode"),i=Object.keys(n).filter(function(e){return r.isDynamicHandle(e)&&"object"===cH(n[e])&&null!==n[e]}).sort(function(e,t){return parseInt(e.split("_")[1],10)-parseInt(t.split("_")[1],10)}).map(function(e){return n[e]}),o=Object.assign.apply(Object,[{}].concat(lH(i))),e.a(2,{result:o})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){dH(o,r,i,a,s,"next",e)}function s(e){dH(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),mH={type:"mergeObjectsNode",label:"Merge Objects",category:"Data Processing",component:function(e){var t,n=e.id,r=e.selected,i=e.type,o=W1(function(e){var t;return{data:null===(t=e.nodes.find(function(e){return e.id===n}))||void 0===t?void 0:t.data,updateNodeData:e.updateNodeData}},wc),a=o.data,s=o.updateNodeData,l=SE.nodeDefinitionMap.get(i),u=null!==(t=null==a?void 0:a.inputCount)&&void 0!==t?t:2;if(!a)return null;var c=function(e){s(n,{inputCount:Math.max(1,e)})};return(0,$.jsxs)(QE,{id:n,title:"Merge Objects",selected:r,children:[(0,$.jsx)(JE,{nodeId:n,definition:l,type:"input"}),(0,$.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"10px"},children:[(0,$.jsx)(j,{onClick:function(){return c(u+1)},children:"+"}),(0,$.jsx)(j,{onClick:function(){return c(u-1)},disabled:u<=1,children:"-"})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:n,definition:l,type:"output"})})]})},dataSchema:fH,currentVersion:1,initialData:{inputCount:2},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.OBJECT}]},execute:pH,getDynamicHandleId:function(e){return"".concat(hH).concat(e)},isDynamicHandle:function(e){var t;return null!==(t=null==e?void 0:e.startsWith(hH))&&void 0!==t&&t},getDynamicHandles:function(e,t,n){for(var r=[],i=0;i<e.data.inputCount;i++)r.push({id:"".concat(hH).concat(i),type:cE.OBJECT});for(var o=P_({}),a=function(){var r="".concat(hH).concat(s),i=n.find(function(t){return t.target===e.id&&t.targetHandle===r});if(!i)return 0;var a=t.find(function(e){return e.id===i.source});if(!a)return 0;var l=tX(a,i.sourceHandle||null,"output",t,n);(null==l?void 0:l.schema)instanceof __&&(o=o.merge(l.schema))},s=0;s<e.data.inputCount;s++)a();return{inputs:r,outputs:[{id:"result",type:cE.OBJECT,schema:o}]}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection;return"input"===n&&null!=t&&t.startsWith(hH)||"output"===n&&"result"===t?cE.OBJECT:void 0}};SE.register(mH);function gH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return vH(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(vH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,vH(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,vH(d,"constructor",u),vH(u,"constructor",l),l.displayName="GeneratorFunction",vH(u,i,"GeneratorFunction"),vH(d),vH(d,i,"Generator"),vH(d,r,function(){return this}),vH(d,"toString",function(){return"[object Generator]"}),(gH=function(){return{w:o,m:f}})()}function vH(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}vH=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){vH(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},vH(e,t,n,r)}function yH(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var bH=P_({text:qS().default(""),_version:Bk().optional()}),OH=function(){var e,t=(e=gH().m(function e(){return gH().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){yH(o,r,i,a,s,"next",e)}function s(e){yH(o,r,i,a,s,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}(),wH={type:"noteNode",label:"Note",category:"Utility",component:function(e){var t=e.id,n=e.selected,r=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),i=W1(function(e){return e.updateNodeData});if(!r)return null;return(0,$.jsx)(QE,{id:t,title:"Note",selected:n,contentGrows:!0,minWidth:60,children:(0,$.jsx)(I,{className:"nodrag",value:r.text,onChange:function(e){i(t,{text:e.target.value})},style:{width:"100%",height:"100%",border:"none",background:"transparent",resize:"none",position:"absolute",top:0,left:0}})})},dataSchema:bH,currentVersion:1,initialData:{text:""},handles:{inputs:[],outputs:[]},execute:OH,isVisual:!0};SE.register(wH);var xH=[{id:"message",label:"Message",component:I,props:{rows:3}},{id:"notificationType",label:"Type",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"info",children:"Info"}),(0,$.jsx)("option",{value:"success",children:"Success"}),(0,$.jsx)("option",{value:"warning",children:"Warning"}),(0,$.jsx)("option",{value:"error",children:"Error"})]})}}];function SH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return kH(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(kH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,kH(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,kH(d,"constructor",u),kH(u,"constructor",l),l.displayName="GeneratorFunction",kH(u,i,"GeneratorFunction"),kH(d),kH(d,i,"Generator"),kH(d,r,function(){return this}),kH(d,"toString",function(){return"[object Generator]"}),(SH=function(){return{w:o,m:f}})()}function kH(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}kH=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){kH(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},kH(e,t,n,r)}function _H(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var PH=G_(["info","success","error","warning"]),EH=P_({message:qS().optional(),notificationType:PH.default("info"),_version:Bk().optional()}),$H=function(){var e,t=(e=SH().m(function e(t,n){var r,i,o,a;return SH().w(function(e){for(;;)switch(e.n){case 0:r=EH.parse(t.data),i=PE(n,r,"message"),o=PE(n,r,"notificationType"),i&&((a=PH.safeParse(o)).success||Br("error","Invalid notification type: ".concat(o,". Defaulting to 'info'."),"ui_action"),J(a.data||"info",String(i)));case 1:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){_H(o,r,i,a,s,"next",e)}function s(e){_H(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),TH={type:"notificationNode",label:"Notification",category:"User Interaction",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Notification",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:xH,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px",marginTop:"5px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:EH,currentVersion:1,initialData:{message:"Hello!",notificationType:"info"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"message",type:cE.STRING},{id:"notificationType",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY}]},validate:c$(l$("message","Message is required.")),execute:$H};SE.register(TH);var CH=[{id:"value",label:"Value",component:N,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?0:Number(e.target.value)}}];function jH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return NH(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(NH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,NH(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,NH(d,"constructor",u),NH(u,"constructor",l),l.displayName="GeneratorFunction",NH(u,i,"GeneratorFunction"),NH(d),NH(d,i,"Generator"),NH(d,r,function(){return this}),NH(d,"toString",function(){return"[object Generator]"}),(jH=function(){return{w:o,m:f}})()}function NH(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}NH=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){NH(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},NH(e,t,n,r)}function AH(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var IH=P_({value:Bk(),_version:Bk().optional()}),MH=function(){var e,t=(e=jH().m(function e(t,n){var r,i;return jH().w(function(e){for(;;)if(0===e.n)return r=IH.parse(t.data),i=PE(n,r,"value"),e.a(2,{value:Number(i)})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){AH(o,r,i,a,s,"next",e)}function s(e){AH(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),DH={type:"numberNode",label:"Number",category:"Input",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Number",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:CH,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:IH,currentVersion:1,initialData:{value:123},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.NUMBER}]},execute:MH};SE.register(DH);function RH(e){return RH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RH(e)}function QH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return zH(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(zH(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,zH(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,zH(d,"constructor",u),zH(u,"constructor",l),l.displayName="GeneratorFunction",zH(u,i,"GeneratorFunction"),zH(d),zH(d,i,"Generator"),zH(d,r,function(){return this}),zH(d,"toString",function(){return"[object Generator]"}),(QH=function(){return{w:o,m:f}})()}function zH(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}zH=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){zH(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},zH(e,t,n,r)}function LH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ZH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LH(Object(n),!0).forEach(function(t){FH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function FH(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=RH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RH(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UH(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var VH=P_({_version:Bk().optional()}),GH=function(){var e,t=(e=QH().m(function e(t,n){return QH().w(function(e){for(;;)if(0===e.n)return e.a(2,ZH({},n))},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){UH(o,r,i,a,s,"next",e)}function s(e){UH(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),BH={type:"onStreamTriggerNode",label:"On Stream Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,i=SE.nodeDefinitionMap.get(r);return i?(0,$.jsxs)(QE,{id:t,title:"On Stream Trigger",selected:n,children:[(0,$.jsx)("div",{style:{padding:"10px 0",textAlign:"center",color:"#aaa"},children:"Starts a flow for each token from an LLM stream."}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:i,type:"output"})})]}):null},dataSchema:VH,currentVersion:1,initialData:{},handles:{inputs:[],outputs:[{id:"chunk",type:cE.STRING,label:"Chunk"},{id:"fullText",type:cE.STRING,label:"Full Text"}]},execute:GH};function XH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return YH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YH(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(BH);var WH=[{value:"character",label:"Character"},{value:"lorebook",label:"Lorebook"},{value:"flow",label:"Flow"},{value:"prompt",label:"Prompt Template"},{value:"regexScript",label:"Regex Script"},{value:"mathOperation",label:"Math Operation"},{value:"stringOperation",label:"String Operation"},{value:"promptMode",label:"Prompt Mode"},{value:"randomMode",label:"Random Mode"},{value:"regexMode",label:"Regex Mode"},{value:"converterTarget",label:"Conversion Type"}],qH={mathOperation:[{value:"add",label:"Add"},{value:"subtract",label:"Subtract"},{value:"multiply",label:"Multiply"},{value:"divide",label:"Divide"},{value:"modulo",label:"Modulo"}],stringOperation:["merge","split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"].map(function(e){return{value:e,label:e}}),promptMode:Object.values(Er).map(function(e){return{value:e,label:e}}),randomMode:[{value:"number",label:"Number"},{value:"array",label:"From Array"}],regexMode:[{value:"sillytavern",label:"SillyTavern"},{value:"custom",label:"Custom"}],converterTarget:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object (from JSON)"},{value:"array",label:"Array (from JSON)"}]};function HH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return KH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KH(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function JH(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return eK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(eK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,eK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,eK(d,"constructor",u),eK(u,"constructor",l),l.displayName="GeneratorFunction",eK(u,i,"GeneratorFunction"),eK(d),eK(d,i,"Generator"),eK(d,r,function(){return this}),eK(d,"toString",function(){return"[object Generator]"}),(JH=function(){return{w:o,m:f}})()}function eK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}eK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){eK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},eK(e,t,n,r)}function tK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var nK=P_({pickerType:G_(["character","lorebook","prompt","regexScript","mathOperation","stringOperation","promptMode","randomMode","regexMode","converterTarget","flow"]).default("character"),value:qS().default(""),_version:Bk().optional()}),rK=function(){var e,t=(e=JH().m(function e(t,n,r){var i,o,a,s,l,u,c,d;return JH().w(function(e){for(;;)switch(e.n){case 0:i=r.dependencies,o=nK.parse(t.data),a=o.pickerType,s=o.value,d=a,e.n="character"===d?1:"mathOperation"===d||"stringOperation"===d||"promptMode"===d||"randomMode"===d||"regexMode"===d||"converterTarget"===d||"lorebook"===d||"prompt"===d||"regexScript"===d||"flow"===d?2:3;break;case 1:return l=i.getSillyTavernContext(),u=l.characters,c=void 0!==z.this_chid&&u[z.this_chid]?u[z.this_chid].avatar:void 0,e.a(2,{value:s,activeAvatar:c});case 2:case 3:return e.a(2,{value:s});case 4:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){tK(o,r,i,a,s,"next",e)}function s(e){tK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),iK={character:{label:"Pick Character",outputHandle:{id:"value",label:"Avatar",type:cE.CHARACTER_AVATAR}},lorebook:{label:"Pick Lorebook",outputHandle:{id:"value",label:"Name",type:cE.LOREBOOK_NAME}},prompt:{label:"Pick Prompt",outputHandle:{id:"value",label:"Name"}},regexScript:{label:"Pick Regex Script",outputHandle:{id:"value",label:"ID",type:cE.REGEX_SCRIPT_ID}},mathOperation:{label:"Pick Math Operation",outputHandle:{id:"value",label:"Operation"}},stringOperation:{label:"Pick String Operation",outputHandle:{id:"value",label:"Operation"}},promptMode:{label:"Pick Prompt Mode",outputHandle:{id:"value",label:"Mode"}},randomMode:{label:"Pick Random Mode",outputHandle:{id:"value",label:"Mode"}},regexMode:{label:"Pick Regex Mode",outputHandle:{id:"value",label:"Mode"}},converterTarget:{label:"Pick Conversion Type",outputHandle:{id:"value",label:"Type"}},flow:{label:"Pick Flow",outputHandle:{id:"value",label:"Flow ID",type:cE.FLOW_ID}}},oK=l$("value","A selection is required."),aK="character",sK={type:"pickerNode",label:"Picker",category:"Picker",component:function(e){var t=e.id,n=e.selected,r=(e.type,W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data})),i=W1(function(e){return e.updateNodeData}),o=SillyTavern.getContext().characters,a=XH((0,T.useState)([]),2),s=a[0],l=a[1];(0,T.useEffect)(function(){var e;l(null!==(e=SillyTavern.getContext().extensionSettings.regex)&&void 0!==e?e:[])},[]);var u=(0,T.useMemo)(function(){var e=Lr.getSettings();return{character:o.map(function(e){return{value:e.avatar,label:e.name}}),lorebook:L.world_names.map(function(e){return{value:e,label:e}}),prompt:Object.keys(e.prompts).map(function(e){return{value:e,label:e}}),flow:Object.values(e.flows).map(function(e){return{value:e.id,label:e.name}}),regexScript:s.map(function(e){return{value:e.id,label:e.scriptName}})}},[o,s]);if(!r)return null;var c=r.pickerType,d=r.value,f=function(e){i(t,{value:e})};return(0,$.jsxs)(QE,{id:t,title:"Picker",selected:n,children:[(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,$.jsx)(A,{className:"nodrag",value:c,onChange:function(e){return n=e.target.value,void i(t,{pickerType:n,value:""});var n},children:WH.map(function(e){return(0,$.jsx)("option",{value:e.value,children:e.label},e.value)})}),function(){var e;if(qH[c])return(0,$.jsxs)(A,{className:"nodrag",value:d,onChange:function(e){return f(e.target.value)},children:[(0,$.jsx)("option",{value:"",disabled:!0,children:"-- Select an option --"}),qH[c].map(function(e){return(0,$.jsx)("option",{value:e.value,children:e.label},e.value)})]});var t=null!==(e=u[c])&&void 0!==e?e:[];return(0,$.jsx)(ur,{value:[null!=d?d:""],onChange:function(e){return f(e[0])},multiple:!1,items:t,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0})}()]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:sK,type:"output"})})]})},dataSchema:nK,currentVersion:1,initialData:{pickerType:aK,value:""},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY}]},validate:function(e,t){return c$(oK)(e,t)},execute:rK,getDynamicHandles:function(e){var t,n=e.data.pickerType,r=iK[n],i=[];return i.push({id:r.outputHandle.id,label:r.outputHandle.label,type:null!==(t=r.outputHandle.type)&&void 0!==t?t:cE.STRING,schema:r.outputHandle.schema}),"character"===n&&i.push({id:"activeAvatar",type:cE.CHARACTER_AVATAR,label:"Active Avatar"}),{inputs:[],outputs:i}},getSuggestionBlueprints:function(e){return"outputs"!==e.direction?[]:Object.entries(iK).filter(function(e){return HH(e,1)[0]!==aK}).map(function(e){var t=HH(e,2),n=t[0],r=n,i=t[1].label.replace(/^Pick\s+/i,"");return{id:"picker-".concat(n),labelSuffix:"(".concat(i,")"),dataOverrides:{pickerType:r,value:""}}})}};SE.register(sK);function lK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return uK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(uK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,uK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,uK(d,"constructor",u),uK(u,"constructor",l),l.displayName="GeneratorFunction",uK(u,i,"GeneratorFunction"),uK(d),uK(d,i,"Generator"),uK(d,r,function(){return this}),uK(d,"toString",function(){return"[object Generator]"}),(lK=function(){return{w:o,m:f}})()}function uK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}uK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){uK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},uK(e,t,n,r)}function cK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var dK=P_({profileId:qS().default(""),_version:Bk().optional()}),fK=function(){var e,t=(e=lK().m(function e(t,n){var r,i;return lK().w(function(e){for(;;)switch(e.n){case 0:if(r=dK.parse(t.data),null==(i=PE(n,r,"profileId"))||""===String(i).trim()){e.n=1;break}return e.a(2,{profileId:String(i)});case 1:return e.a(2,{profileId:r.profileId})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){cK(o,r,i,a,s,"next",e)}function s(e){cK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),hK={type:"profileIdNode",label:"Profile ID",category:"Input",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=(0,T.useMemo)(function(){return[{id:"profileId",label:"Connection Profile",component:ce,props:{initialSelectedProfileId:null==i?void 0:i.profileId},customChangeHandler:function(e){o(t,{profileId:(null==e?void 0:e.id)||""})}}]},[null==i?void 0:i.profileId,t,o]);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Profile ID",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:s,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:dK,currentVersion:1,initialData:{profileId:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"profileId",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"profileId",type:cE.PROFILE_ID}]},execute:fK};SE.register(hK);var pK=[{id:"message",label:"Prompt Message",component:I,props:{rows:3}},{id:"defaultValue",label:"Default Value (Optional)",component:N,props:{type:"text"}}];function mK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return gK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(gK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,gK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,gK(d,"constructor",u),gK(u,"constructor",l),l.displayName="GeneratorFunction",gK(u,i,"GeneratorFunction"),gK(d),gK(d,i,"Generator"),gK(d,r,function(){return this}),gK(d,"toString",function(){return"[object Generator]"}),(mK=function(){return{w:o,m:f}})()}function gK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}gK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){gK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},gK(e,t,n,r)}function vK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var yK=P_({message:qS().optional(),defaultValue:qS().optional(),_version:Bk().optional()}),bK=function(){var e,t=(e=mK().m(function e(t,n,r){var i,o,a,s,l;return mK().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=yK.parse(t.data),a=PE(n,o,"message"),s=PE(n,o,"defaultValue"),a){e.n=1;break}throw new Error("Prompt message is required.");case 1:return e.n=2,i.promptUser(a,s);case 2:return l=e.v,e.a(2,{result:l})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){vK(o,r,i,a,s,"next",e)}function s(e){vK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),OK={type:"promptUserNode",label:"Prompt User",category:"User Interaction",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Prompt User",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:pK,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px",marginTop:"5px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:yK,currentVersion:1,initialData:{message:"Please enter a value:"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"message",type:cE.STRING},{id:"defaultValue",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.STRING}]},validate:c$(l$("message","Message is required.")),execute:bK};SE.register(OK);function wK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return xK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(xK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,xK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,xK(d,"constructor",u),xK(u,"constructor",l),l.displayName="GeneratorFunction",xK(u,i,"GeneratorFunction"),xK(d),xK(d,i,"Generator"),xK(d,r,function(){return this}),xK(d,"toString",function(){return"[object Generator]"}),(wK=function(){return{w:o,m:f}})()}function xK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}xK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){xK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},xK(e,t,n,r)}function SK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var kK=P_({mode:G_(["number","array"]).optional(),min:Bk().optional(),max:Bk().optional(),_version:Bk().optional()}),_K=function(){var e,t=(e=wK().m(function e(t,n){var r,i,o,a,s,l,u,c,d;return wK().w(function(e){for(;;)switch(e.n){case 0:if(i=kK.parse(t.data),"number"!==(o=null!==(r=PE(n,i,"mode"))&&void 0!==r?r:"number")){e.n=1;break}return l=null!==(a=PE(n,i,"min"))&&void 0!==a?a:0,u=null!==(s=PE(n,i,"max"))&&void 0!==s?s:100,e.a(2,{result:Math.floor(Math.random()*(u-l+1))+l});case 1:if("array"!==o){e.n=3;break}if(c=n.array,Array.isArray(c)&&0!==c.length){e.n=2;break}throw new Error("Input is not a non-empty array.");case 2:return d=Math.floor(Math.random()*c.length),e.a(2,{result:c[d]});case 3:throw new Error("Unknown random mode: ".concat(o));case 4:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){SK(o,r,i,a,s,"next",e)}function s(e){SK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),PK={type:"randomNode",label:"Random",category:"Math & Logic",component:function(e){var t,n=e.id,r=e.selected,i=e.type,o=W1(function(e){var t;return null===(t=e.nodesMap.get(n))||void 0===t?void 0:t.data}),a=W1(function(e){return e.updateNodeData}),s=SE.nodeDefinitionMap.get(i),l=null!==(t=null==o?void 0:o.mode)&&void 0!==t?t:"number",u=(0,T.useMemo)(function(){var e=[{id:"mode",label:"Mode",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"number",children:"Number"}),(0,$.jsx)("option",{value:"array",children:"From Array"})]})}}];return"number"===l&&e.push({id:"min",label:"Min",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"max",label:"Max",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}),e},[l]);return o&&s?(0,$.jsxs)(QE,{id:n,title:"Random",selected:r,children:[(0,$.jsx)(JE,{nodeId:n,definition:s,type:"input",fields:u,data:o,updateNodeData:a}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:n,definition:s,type:"output"})})]}):null},dataSchema:kK,currentVersion:1,initialData:{mode:"number",min:0,max:100},handles:{inputs:[{id:"main",type:cE.ANY},{id:"mode",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY}]},validate:function(e,t){var n=[];"array"===e.data.mode&&(t.some(function(t){return t.target===e.id&&"array"===t.targetHandle})||n.push({message:'The "array" input must be connected in "From Array" mode.',severity:"error"}));return n},execute:_K,getDynamicHandles:function(e){var t=e.data,n=[],r=[];return"number"===t.mode?(n.push({id:"min",type:cE.NUMBER}),n.push({id:"max",type:cE.NUMBER}),r.push({id:"result",type:cE.NUMBER})):"array"===t.mode?(n.push({id:"array",type:cE.OBJECT}),r.push({id:"result",type:cE.ANY})):r.push({id:"result",type:cE.ANY}),{inputs:n,outputs:r}},getSuggestionBlueprints:function(e){var t=e.direction;return"inputs"!==t&&"outputs"!==t?[]:[{id:"mode-array",labelSuffix:"(Array Mode)",dataOverrides:{mode:"array"}}]}};function EK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(PK);function TK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return CK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(CK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,CK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,CK(d,"constructor",u),CK(u,"constructor",l),l.displayName="GeneratorFunction",CK(u,i,"GeneratorFunction"),CK(d),CK(d,i,"Generator"),CK(d,r,function(){return this}),CK(d,"toString",function(){return"[object Generator]"}),(TK=function(){return{w:o,m:f}})()}function CK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}CK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){CK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},CK(e,t,n,r)}function jK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var NK=P_({mode:G_(["sillytavern","custom"]).default("sillytavern"),scriptId:qS().default(""),findRegex:qS().default(""),replaceString:qS().default(""),_version:Bk().optional()}),AK=function(){var e,t=(e=TK().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O,w;return TK().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=r.dependencies,s=NK.parse(t.data),l=null!==(i=PE(n,s,"mode"))&&void 0!==i?i:"sillytavern",u=PE(n,s,"scriptId"),c=s.findRegex,d=s.replaceString,"string"==typeof(f=null!==(o=n.string)&&void 0!==o?o:"")){e.n=1;break}throw new Error("Input must be a string.");case 1:if(h=f,p=null,"sillytavern"!==l){e.n=4;break}if(u){e.n=2;break}throw new Error("SillyTavern Regex ID is not provided.");case 2:if(v=a.getSillyTavernContext(),y=v.extensionSettings,b=(null!==(g=y.regex)&&void 0!==g?g:[]).find(function(e){return e.id===u})){e.n=3;break}throw new Error('Regex with ID "'.concat(u,'" not found.'));case 3:h=a.st_runRegexScript(b,f),m=b.findRegex,e.n=7;break;case 4:if(void 0!==c){e.n=5;break}throw new Error("Find Regex is required for custom mode.");case 5:e.p=5,O=new RegExp(c,"g"),h=f.replace(O,null!=d?d:""),m=c,e.n=7;break;case 6:throw e.p=6,w=e.v,new Error("Invalid custom regex: ".concat(w.message));case 7:if(m)try{p=f.match(new RegExp(m,"g"))}catch(e){}return e.a(2,{result:h,matches:null!=p?p:[]})}},e,null,[[5,6]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){jK(o,r,i,a,s,"next",e)}function s(e){jK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),IK={type:"regexNode",label:"Regex",category:"Data Processing",component:function(e){var t,n=e.id,r=e.selected,i=e.type,o=W1(function(e){var t;return null===(t=e.nodesMap.get(n))||void 0===t?void 0:t.data}),a=W1(function(e){return e.updateNodeData}),s=EK((0,T.useState)([]),2),l=s[0],u=s[1],c=SE.nodeDefinitionMap.get(i);(0,T.useEffect)(function(){var e,t=null!==(e=SillyTavern.getContext().extensionSettings.regex)&&void 0!==e?e:[];u(t)},[]);var d=(0,T.useMemo)(function(){return l.map(function(e){return{value:e.id,label:e.scriptName}})},[l]),f=null!==(t=null==o?void 0:o.mode)&&void 0!==t?t:"sillytavern",h=(0,T.useMemo)(function(){var e=[{id:"string",label:"Input String",component:I,props:{rows:3}},{id:"mode",label:"Mode",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"sillytavern",children:"SillyTavern"}),(0,$.jsx)("option",{value:"custom",children:"Custom"})]})}}],t="sillytavern"===f?[{id:"scriptId",label:"Regex Script",component:ur,props:{items:d,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}}]:[{id:"findRegex",label:"Find (Regex)",component:I,props:{rows:2}},{id:"replaceString",label:"Replace",component:I,props:{rows:2}}];return[].concat(e,t)},[f,d]);return o&&c?(0,$.jsxs)(QE,{id:n,title:"Regex",selected:r,children:[(0,$.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:(0,$.jsx)(JE,{nodeId:n,definition:c,type:"input",fields:h,data:o,updateNodeData:a})}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:n,definition:c,type:"output"})})]}):null},dataSchema:NK,currentVersion:1,initialData:{mode:"sillytavern",findRegex:"",replaceString:"",scriptId:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"string",type:cE.STRING},{id:"mode",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.STRING},{id:"matches",type:cE.OBJECT,schema:S_(qS())}]},getDynamicHandles:function(e){var t,n=e.data,r=[];return"sillytavern"===(null!==(t=null==n?void 0:n.mode)&&void 0!==t?t:"sillytavern")?r.push({id:"scriptId",type:cE.REGEX_SCRIPT_ID}):(r.push({id:"findRegex",type:cE.STRING}),r.push({id:"replaceString",type:cE.STRING})),{inputs:r,outputs:[]}},validate:function(e,t){var n=[],r=e.data,i=r.mode;if("sillytavern"===i){var o=t.some(function(t){return t.target===e.id&&"scriptId"===t.targetHandle});r.scriptId||o||n.push({fieldId:"scriptId",message:"Regex Script is required in SillyTavern mode.",severity:"error"})}else if("custom"===i){var a=t.some(function(t){return t.target===e.id&&"findRegex"===t.targetHandle});if(r.findRegex||a||n.push({fieldId:"findRegex",message:"Find Regex is required in custom mode.",severity:"error"}),r.findRegex&&!a)try{new RegExp(r.findRegex)}catch(e){var s=e;n.push({fieldId:"findRegex",message:"Invalid Regex: ".concat(s.message),severity:"error"})}}return n},execute:AK,getSuggestionBlueprints:function(e){return"inputs"!==e.direction?[]:[{id:"mode-custom",labelSuffix:"(Custom Mode)",dataOverrides:{mode:"custom"}}]}};SE.register(IK);var MK=[{id:"messageId",label:"Message ID",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}}];function DK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return RK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(RK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,RK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,RK(d,"constructor",u),RK(u,"constructor",l),l.displayName="GeneratorFunction",RK(u,i,"GeneratorFunction"),RK(d),RK(d,i,"Generator"),RK(d,r,function(){return this}),RK(d,"toString",function(){return"[object Generator]"}),(DK=function(){return{w:o,m:f}})()}function RK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}RK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){RK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},RK(e,t,n,r)}function QK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var zK=P_({messageId:Bk().optional(),_version:Bk().optional()}),LK=function(){var e,t=(e=DK().m(function e(t,n,r){var i,o,a;return DK().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=zK.parse(t.data),void 0!==(a=PE(n,o,"messageId"))){e.n=1;break}throw new Error("Message ID is required.");case 1:return e.n=2,i.deleteMessage(a);case 2:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){QK(o,r,i,a,s,"next",e)}function s(e){QK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),ZK={type:"removeChatMessageNode",label:"Remove Chat Message",category:"Chat",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Remove Chat Message",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:MK,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:zK,currentVersion:1,initialData:{},handles:{inputs:[{id:"main",type:cE.ANY},{id:"messageId",type:cE.NUMBER}],outputs:[{id:"main",type:cE.ANY}]},validate:c$(l$("messageId","Message ID is required.")),execute:LK};SE.register(ZK);function FK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return UK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(UK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,UK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,UK(d,"constructor",u),UK(u,"constructor",l),l.displayName="GeneratorFunction",UK(u,i,"GeneratorFunction"),UK(d),UK(d,i,"Generator"),UK(d,r,function(){return this}),UK(d,"toString",function(){return"[object Generator]"}),(FK=function(){return{w:o,m:f}})()}function UK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}UK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){UK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},UK(e,t,n,r)}function VK(e){return VK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VK(e)}function GK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var BK=P_({flowId:qS().optional(),parameters:qS().default("{}"),_version:Bk().optional()}),XK=function(){var e,t=(e=FK().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f;return FK().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=r.dependencies,o=r.depth,a=r.executionPath,s=BK.parse(t.data),l=PE(n,s,"flowId")){e.n=1;break}throw new Error("Flow ID/Name is required.");case 1:u={},c=PE(n,s,"parameters"),e.p=2,u="object"===VK(c)?c:JSON.parse(c||"{}"),e.n=4;break;case 3:throw e.p=3,f=e.v,new Error("Invalid JSON in parameters: ".concat(f.message));case 4:return e.n=5,i.executeSubFlow(l,u,o+1,a);case 5:if(!(d=e.v).error){e.n=6;break}throw new Error('Sub-flow "'.concat(l,'" failed: ').concat(d.error.message));case 6:return e.a(2,{result:d.lastOutput})}},e,null,[[2,3]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){GK(o,r,i,a,s,"next",e)}function s(e){GK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),YK={type:"runFlowNode",label:"Run Flow",category:"System",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=Lr.getSettings(),l=(0,T.useMemo)(function(){return Object.values(s.flows).map(function(e){return{value:e.id,label:e.name}})},[s.flows]),u=(0,T.useMemo)(function(){return[{id:"flowId",label:"Flow to Run",component:ur,props:{items:l,multiple:!1,inputClasses:"nodrag",containerClasses:"nodrag",closeOnSelect:!0,enableSearch:!0},getValueFromEvent:function(e){return e[0]},formatValue:function(e){return[null!=e?e:""]}},{id:"parameters",label:"Parameters (JSON)",component:BG,props:{height:"100px",extensions:[HB({})],width:"100%",theme:"dark",style:{cursor:"text",marginTop:"5px"}},customChangeHandler:function(e,t){var n=t.nodeId;(0,t.updateNodeData)(n,{parameters:e})}}]},[l]);return i&&a?(0,$.jsx)(QE,{id:t,title:"Run Flow",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:u,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:BK,currentVersion:1,initialData:{flowId:"",parameters:"{}"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"flowId",type:cE.FLOW_ID},{id:"parameters",type:cE.OBJECT}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.ANY}]},validate:c$(l$("flowId","Flow to Run is required.")),execute:XK};SE.register(YK);var WK=[{id:"command",label:"Command",component:I,props:{rows:3,placeholder:'/echo "Hello World"'}}];function qK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return HK(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(HK(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,HK(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,HK(d,"constructor",u),HK(u,"constructor",l),l.displayName="GeneratorFunction",HK(u,i,"GeneratorFunction"),HK(d),HK(d,i,"Generator"),HK(d,r,function(){return this}),HK(d,"toString",function(){return"[object Generator]"}),(qK=function(){return{w:o,m:f}})()}function HK(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}HK=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){HK(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},HK(e,t,n,r)}function KK(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var JK=P_({command:qS().default(""),_version:Bk().optional()}),eJ=function(){var e,t=(e=qK().m(function e(t,n,r){var i,o,a,s,l;return qK().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,a=JK.parse(t.data),(s=PE(n,a,"command"))&&"string"==typeof s){e.n=1;break}throw new Error("Command input must be a valid string.");case 1:return e.n=2,o.executeSlashCommandsWithOptions(s);case 2:if(!(l=e.v).isError){e.n=3;break}throw new Error("Slash command failed: ".concat(l.errorMessage));case 3:if(!l.isAborted){e.n=4;break}throw new Error("Slash command aborted: ".concat(l.abortReason));case 4:return e.a(2,{result:null!==(i=l.pipe)&&void 0!==i?i:""})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){KK(o,r,i,a,s,"next",e)}function s(e){KK(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),tJ={type:"runSlashCommandNode",label:"Run Slash Command",category:"System",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Run Slash Command",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:WK,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:JK,currentVersion:1,initialData:{command:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"command",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.STRING}]},validate:c$(l$("command","Command is required.")),execute:eJ};function nJ(e){return nJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nJ(e)}function rJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rJ(Object(n),!0).forEach(function(t){oJ(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oJ(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=nJ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nJ(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aJ(e){return function(e){if(Array.isArray(e))return sJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sJ(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(tJ);var lJ=function(e){var t=e.definition,n=e.path,r=e.onUpdate,i=e.onRemove,o=e.onAddChild,a=t.name,s=t.type,l=t.description,u=t.values,c=t.fields,d=t.items;return(0,$.jsxs)("div",{style:{marginLeft:n.length>2?"15px":"0",marginTop:"5px",paddingTop:"5px",borderLeft:n.length>2?"1px solid #444":"none",paddingLeft:n.length>2?"5px":"0"},children:[(0,$.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[void 0!==a&&(0,$.jsx)(N,{className:"nodrag",value:a,onChange:function(e){return r(n,{name:e.target.value})},placeholder:"Field Name"}),(0,$.jsxs)(A,{className:"nodrag",value:s,onChange:function(e){var t=e.target.value,i={type:t};"object"!==t||c||(i.fields=[]),"array"!==t||d||(i.items={type:"string"}),"enum"!==t||u||(i.values=["option1","option2"]),r(n,i)},children:[(0,$.jsx)("option",{value:"string",children:"string"}),(0,$.jsx)("option",{value:"number",children:"number"}),(0,$.jsx)("option",{value:"boolean",children:"boolean"}),(0,$.jsx)("option",{value:"object",children:"object"}),(0,$.jsx)("option",{value:"array",children:"array"}),(0,$.jsx)("option",{value:"enum",children:"enum"})]}),i&&(0,$.jsx)(j,{onClick:function(){return i(n)},children:"✕"})]}),(0,$.jsx)(I,{className:"nodrag",value:l||"",onChange:function(e){return r(n,{description:e.target.value})},placeholder:"Description...",rows:2,style:{marginTop:"5px"}}),"enum"===s&&(0,$.jsxs)("div",{style:{marginLeft:"10px",marginTop:"5px"},children:[(u||[]).map(function(e,t){return(0,$.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"2px"},children:[(0,$.jsx)(N,{className:"nodrag",value:e,onChange:function(e){return function(e,t){var i=aJ(u||[]);i[e]=t,r(n,{values:i})}(t,e.target.value)}}),(0,$.jsx)(j,{onClick:function(){return function(e){return r(n,{values:null==u?void 0:u.filter(function(t,n){return n!==e})})}(t)},children:"✕"})]},t)}),(0,$.jsx)(j,{onClick:function(){return r(n,{values:[].concat(aJ(u||[]),["newValue"])})},style:{marginTop:"5px"},children:"+ Value"})]}),"object"===s&&(0,$.jsxs)("div",{style:{marginLeft:"10px",marginTop:"5px"},children:[(c||[]).map(function(e,t){return(0,$.jsx)(lJ,{definition:e,path:[].concat(aJ(n),["fields",t]),onUpdate:r,onRemove:i,onAddChild:o},e.id)}),o&&(0,$.jsx)(j,{onClick:function(){return o(n)},style:{marginTop:"5px"},children:"+ Field"})]}),"array"===s&&d&&(0,$.jsxs)("div",{style:{marginLeft:"10px",marginTop:"5px"},children:[(0,$.jsx)("span",{children:"Items:"}),(0,$.jsx)(lJ,{definition:d,path:[].concat(aJ(n),["items"]),onUpdate:r,onAddChild:o,onRemove:i})]})]})};function uJ(e){return function(e){if(Array.isArray(e))return dJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cJ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cJ(e,t){if(e){if("string"==typeof e)return dJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dJ(e,t):void 0}}function dJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return hJ(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(hJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,hJ(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,hJ(d,"constructor",u),hJ(u,"constructor",l),l.displayName="GeneratorFunction",hJ(u,i,"GeneratorFunction"),hJ(d),hJ(d,i,"Generator"),hJ(d,r,function(){return this}),hJ(d,"toString",function(){return"[object Generator]"}),(fJ=function(){return{w:o,m:f}})()}function hJ(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}hJ=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){hJ(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},hJ(e,t,n,r)}function pJ(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var mJ=_P(function(){return P_({type:G_(["string","number","boolean","object","array","enum"]),description:qS().optional(),fields:S_(gJ).optional(),items:mJ.optional(),values:S_(qS()).optional()})}),gJ=_P(function(){return P_({id:qS(),name:qS(),type:G_(["string","number","boolean","object","array","enum"]),description:qS().optional(),fields:S_(_P(function(){return gJ})).optional(),items:_P(function(){return mJ}).optional(),values:S_(qS()).optional()})}),vJ=P_({fields:S_(gJ).default([]),_version:Bk().optional()}),yJ=function(){var e,t=(e=fJ().m(function e(t){var n,r,i;return fJ().w(function(e){for(;;)if(0===e.n)return n=vJ.parse(t.data),r={type:"object",fields:n.fields},i=aX(r),e.a(2,{result:i})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){pJ(o,r,i,a,s,"next",e)}function s(e){pJ(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}(),bJ=function(e){var t,n=[],r=new Set,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=cJ(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.name&&""!==o.name.trim()||n.push({message:"Field names cannot be empty.",severity:"error"}),r.has(o.name)&&n.push({message:'Duplicate field name found: "'.concat(o.name,'".'),severity:"error"}),r.add(o.name),"object"===o.type&&o.fields&&n.push.apply(n,uJ(bJ(o.fields))),"enum"!==o.type||o.values&&0!==o.values.length||n.push({message:'Enum "'.concat(o.name,'" must have at least one value.'),severity:"error"})}}catch(e){i.e(e)}finally{i.f()}return n},OJ={type:"schemaNode",label:"Schema",category:"JSON",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);if(!i||!a)return null;var s=function(e,t,n){for(var r=structuredClone(e),i=r,o=0;o<t.length-1;o++)i=i[t[o]];var a=t[t.length-1];return i[a]=n(i[a]),r},l=function(e,n){var r=s(i.fields,e,function(e){return iJ(iJ({},e),n)});o(t,{fields:r})},u=function(e){var n,r=e.slice(0,-2),a=e[e.length-2],l=e[e.length-1];n=0===r.length?i.fields.filter(function(e,t){return t!==l}):s(i.fields,[].concat(aJ(r),[a]),function(e){return e.filter(function(e,t){return t!==l})}),o(t,{fields:n})},c=function(e){var n={id:oT(),name:"newField",type:"string"},r=s(i.fields,[].concat(aJ(e),["fields"]),function(e){return[].concat(aJ(e||[]),[n])});o(t,{fields:r})};return(0,$.jsxs)(QE,{id:t,title:"Schema",selected:n,children:[(i.fields||[]).map(function(e,t){return(0,$.jsx)(lJ,{definition:e,path:[t],onUpdate:l,onRemove:u,onAddChild:c},e.id)}),(0,$.jsx)(j,{className:"nodrag",onClick:function(){var e={id:oT(),name:"newField",type:"string"};o(t,{fields:[].concat(aJ(i.fields||[]),[e])})},style:{marginTop:"10px"},children:"Add Field"}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:vJ,currentVersion:1,initialData:{fields:[]},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"result",type:cE.SCHEMA}]},validate:function(e){return bJ(e.data.fields)},execute:yJ};SE.register(OJ);var wJ=[{id:"message",label:"Message Content",component:I,props:{rows:3}},{id:"role",label:"Role",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"assistant",children:"Assistant"}),(0,$.jsx)("option",{value:"user",children:"User"}),(0,$.jsx)("option",{value:"system",children:"System"})]})}},{id:"name",label:"Name (Optional)",component:N,props:{type:"text"}}];function xJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return SJ(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(SJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,SJ(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,SJ(d,"constructor",u),SJ(u,"constructor",l),l.displayName="GeneratorFunction",SJ(u,i,"GeneratorFunction"),SJ(d),SJ(d,i,"Generator"),SJ(d,r,function(){return this}),SJ(d,"toString",function(){return"[object Generator]"}),(xJ=function(){return{w:o,m:f}})()}function SJ(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}SJ=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){SJ(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},SJ(e,t,n,r)}function kJ(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var _J=P_({message:qS().optional(),role:G_(["user","assistant","system"]).default("assistant"),name:qS().optional(),_version:Bk().optional()}),PJ=function(){var e,t=(e=xJ().m(function e(t,n,r){var i,o,a,s,l,u;return xJ().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=_J.parse(t.data),a=PE(n,o,"message")){e.n=1;break}throw new Error("Message content is required.");case 1:return s=PE(n,o,"role"),l=PE(n,o,"name"),e.n=2,i.sendChatMessage(a,s,l);case 2:return u=i.getSillyTavernContext().chat.length,e.a(2,{messageId:u-1})}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){kJ(o,r,i,a,s,"next",e)}function s(e){kJ(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),EJ={type:"sendChatMessageNode",label:"Send Chat Message",category:"Chat",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Send Chat Message",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:wJ,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:_J,currentVersion:1,initialData:{message:"",role:"assistant"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"message",type:cE.STRING},{id:"role",type:cE.STRING},{id:"name",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY},{id:"messageId",type:cE.NUMBER}]},validate:c$(l$("message","Message Content is required.")),execute:PJ};SE.register(EJ);var $J=[{id:"variableName",label:"Variable Name",component:N,props:{type:"text"}}];function TJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return CJ(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(CJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,CJ(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,CJ(d,"constructor",u),CJ(u,"constructor",l),l.displayName="GeneratorFunction",CJ(u,i,"GeneratorFunction"),CJ(d),CJ(d,i,"Generator"),CJ(d,r,function(){return this}),CJ(d,"toString",function(){return"[object Generator]"}),(TJ=function(){return{w:o,m:f}})()}function CJ(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}CJ=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){CJ(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},CJ(e,t,n,r)}function jJ(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var NJ=P_({variableName:qS().optional(),_version:Bk().optional()}),AJ=function(){var e,t=(e=TJ().m(function e(t,n,r){var i,o,a,s;return TJ().w(function(e){for(;;)switch(e.n){case 0:if(i=r.executionVariables,o=NJ.parse(t.data),a=PE(n,o,"variableName"),s=n.value,a){e.n=1;break}throw new Error("Variable name is required.");case 1:i.set(a,s);case 2:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){jJ(o,r,i,a,s,"next",e)}function s(e){jJ(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),IJ={type:"setFlowVariableNode",label:"Set Flow Variable",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Set Flow Variable",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:$J,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:NJ,currentVersion:1,initialData:{variableName:"myVar"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY},{id:"variableName",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY}]},validate:c$(l$("variableName","Variable Name is required."),u$("value","A value must be connected to set.")),execute:AJ};SE.register(IJ);var MJ=[{id:"variableName",label:"Variable Name",component:N,props:{type:"text"}}];function DJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return RJ(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(RJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,RJ(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,RJ(d,"constructor",u),RJ(u,"constructor",l),l.displayName="GeneratorFunction",RJ(u,i,"GeneratorFunction"),RJ(d),RJ(d,i,"Generator"),RJ(d,r,function(){return this}),RJ(d,"toString",function(){return"[object Generator]"}),(DJ=function(){return{w:o,m:f}})()}function RJ(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}RJ=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){RJ(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},RJ(e,t,n,r)}function QJ(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var zJ=P_({variableName:qS().optional(),_version:Bk().optional()}),LJ=function(){var e,t=(e=DJ().m(function e(t,n,r){var i,o;return DJ().w(function(e){for(;;)switch(e.n){case 0:if(i=zJ.parse(t.data),o=PE(n,i,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:if("value"in n){e.n=2;break}throw new Error("A value must be provided to set a global variable.");case 2:return e.n=3,r.dependencies.st_setGlobalVariable(o,n.value);case 3:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){QJ(o,r,i,a,s,"next",e)}function s(e){QJ(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),ZJ={type:"setGlobalVariableNode",label:"Set Global Variable",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Set Global Variable",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:MJ,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:zJ,currentVersion:1,initialData:{variableName:"globalVar"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY},{id:"variableName",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY}]},validate:c$(l$("variableName","Variable Name is required."),u$("value","A value must be connected to set.")),execute:LJ};SE.register(ZJ);var FJ=[{id:"variableName",label:"Variable Name",component:N,props:{type:"text"}}];function UJ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return VJ(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(VJ(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,VJ(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,VJ(d,"constructor",u),VJ(u,"constructor",l),l.displayName="GeneratorFunction",VJ(u,i,"GeneratorFunction"),VJ(d),VJ(d,i,"Generator"),VJ(d,r,function(){return this}),VJ(d,"toString",function(){return"[object Generator]"}),(UJ=function(){return{w:o,m:f}})()}function VJ(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}VJ=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){VJ(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},VJ(e,t,n,r)}function GJ(e){return GJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GJ(e)}function BJ(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var XJ=P_({variableName:qS().optional(),_version:Bk().optional()}),YJ=function(){var e,t=(e=UJ().m(function e(t,n,r){var i,o,a,s;return UJ().w(function(e){for(;;)switch(e.n){case 0:if(i=XJ.parse(t.data),o=PE(n,i,"variableName")){e.n=1;break}throw new Error("Variable name is required.");case 1:if("value"in n){e.n=2;break}throw new Error("A value must be provided to set a local variable.");case 2:if(a=n.value,void 0===(s=n.args)||"object"===GJ(s)&&null!==s){e.n=3;break}throw new Error("Args input for Set Local Variable must be an object if provided.");case 3:return e.n=4,r.dependencies.st_setLocalVariable(o,a,s);case 4:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){BJ(o,r,i,a,s,"next",e)}function s(e){BJ(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),WJ={type:"setLocalVariableNode",label:"Set Local Variable",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Set Local Variable",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:FJ,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:XJ,currentVersion:1,initialData:{variableName:"chatVar"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY},{id:"variableName",type:cE.STRING},{id:"args",type:cE.OBJECT}],outputs:[{id:"main",type:cE.ANY}]},validate:c$(l$("variableName","Variable Name is required."),u$("value","A value must be connected to set.")),execute:YJ};function qJ(e){return qJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qJ(e)}function HJ(e){return function(e){if(Array.isArray(e))return KJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return KJ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KJ(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function JJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JJ(Object(n),!0).forEach(function(t){t0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t0(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qJ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qJ(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}SE.register(WJ);var n0=function(e){var t=e.arg,n=e.onUpdate,r=e.onRemove;return(0,$.jsxs)("div",{style:{border:"1px solid #555",padding:"8px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$.jsx)(N,{className:"nodrag",value:t.name,onChange:function(e){return n({name:e.target.value})},placeholder:"Argument Name",style:{flex:1}}),(0,$.jsx)(j,{onClick:r,children:"✕"})]}),(0,$.jsx)(N,{className:"nodrag",value:t.description||"",onChange:function(e){return n({description:e.target.value})},placeholder:"Description"}),(0,$.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,$.jsxs)(A,{className:"nodrag",value:t.type,onChange:function(e){return n({type:e.target.value})},children:[(0,$.jsx)("option",{value:"string",children:"String"}),(0,$.jsx)("option",{value:"number",children:"Number"}),(0,$.jsx)("option",{value:"boolean",children:"Boolean"}),(0,$.jsx)("option",{value:"list",children:"List"})]}),(0,$.jsx)(N,{label:"Is Required",type:"checkbox",checked:t.isRequired,onChange:function(e){return n({isRequired:e.target.checked})}})]})]})};function r0(e){return r0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r0(e)}function i0(e){return function(e){if(Array.isArray(e))return a0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o0(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o0(e,t){if(e){if("string"==typeof e)return a0(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a0(e,t):void 0}}function a0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return l0(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(l0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,l0(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,l0(d,"constructor",u),l0(u,"constructor",l),l.displayName="GeneratorFunction",l0(u,i,"GeneratorFunction"),l0(d),l0(d,i,"Generator"),l0(d,r,function(){return this}),l0(d,"toString",function(){return"[object Generator]"}),(s0=function(){return{w:o,m:f}})()}function l0(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}l0=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){l0(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},l0(e,t,n,r)}function u0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u0(Object(n),!0).forEach(function(t){d0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d0(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=r0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r0(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f0(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var h0=G_(["string","number","boolean","list"]),p0=P_({id:qS(),name:qS().min(1,"Argument name cannot be empty."),description:qS().optional(),type:h0.default("string"),isRequired:e_().default(!1),defaultValue:h_().optional()}),m0=P_({commandName:qS().min(1,"Command name cannot be empty.").default("my-command"),helpText:qS().default("Executes a Flowchart flow."),arguments:S_(p0).default([]),_version:Bk().optional()}),g0=function(){var e,t=(e=s0().m(function e(t,n){return s0().w(function(e){for(;;)if(0===e.n)return e.a(2,c0(c0({},n),{},{allArgs:c0({},n)}))},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){f0(o,r,i,a,s,"next",e)}function s(e){f0(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}();function v0(e){switch(e){case"number":return cE.NUMBER;case"boolean":return cE.BOOLEAN;case"list":return cE.OBJECT;default:return cE.STRING}}var y0={type:"slashCommandNode",label:"Slash Command",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);if(!i||!a)return null;return(0,$.jsxs)(QE,{id:t,title:"Slash Command",selected:n,children:[(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{children:"Command Name (prefix `flow-` is added automatically)"}),(0,$.jsx)(N,{className:"nodrag",value:i.commandName,onChange:function(e){return o(t,{commandName:e.target.value})}})]}),(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{children:"Help Text"}),(0,$.jsx)(I,{className:"nodrag",value:i.helpText,onChange:function(e){return o(t,{helpText:e.target.value})},rows:3})]}),(0,$.jsx)("hr",{}),(0,$.jsxs)("div",{children:[(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,$.jsx)("label",{children:"Arguments"}),(0,$.jsx)(j,{onClick:function(){var e={id:oT(),name:"arg".concat(i.arguments.length+1),type:"string",isRequired:!1};o(t,{arguments:[].concat(HJ(i.arguments),[e])})},children:"+ Add Argument"})]}),(0,$.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:i.arguments.map(function(e){return(0,$.jsx)(n0,{arg:e,onUpdate:function(n){return r=e.id,a=n,s=i.arguments.map(function(e){return e.id===r?e0(e0({},e),a):e}),void o(t,{arguments:s});var r,a,s},onRemove:function(){return n=e.id,r=i.arguments.filter(function(e){return e.id!==n}),void o(t,{arguments:r});var n,r}},e.id)})})]})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:m0,currentVersion:1,initialData:{commandName:"my-command",helpText:"Executes a Flowchart flow.",arguments:[]},handles:{inputs:[],outputs:[]},validate:function(e){var t=[],n=e.data;if(n.commandName&&""!==n.commandName.trim()){["run"].includes(n.commandName.toLowerCase())&&t.push({message:'Command name "'.concat(n.commandName,'" is reserved and cannot be used.'),severity:"error"}),/^[a-zA-Z0-9\-_]+$/.test(n.commandName)||t.push({message:"Command name can only contain letters, numbers, hyphens, and underscores.",severity:"error"})}else t.push({message:"Command Name cannot be empty.",severity:"error"});var r,i=new Set,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o0(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n.arguments);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.has(a.name)&&t.push({message:'Duplicate argument name: "'.concat(a.name,'".'),severity:"error"}),""===a.name.trim()&&t.push({message:"Argument names cannot be empty.",severity:"error"}),i.add(a.name)}}catch(e){o.e(e)}finally{o.f()}return t},execute:g0,getDynamicHandles:function(e){var t=e.data,n={},r=t.arguments.map(function(e){var t;switch(e.type){case"number":t=Bk();break;case"boolean":t=e_();break;case"list":t=S_(h_());break;default:t=qS()}return e.isRequired||(t=t.optional()),t=t.describe(e.description||"The '".concat(e.name,"' argument.")),n[e.name]=t,{id:e.name,type:v0(e.type),schema:t}}),i=qS().describe("A single string containing all text after the named arguments.");n.unnamed=i;var o=P_(n);return{inputs:[],outputs:[{id:"main",type:cE.ANY}].concat(i0(r),[{id:"allArgs",type:cE.OBJECT,schema:o},{id:"unnamed",type:cE.STRING,schema:i}])}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("output"===n&&t){if("main"===t)return cE.ANY;if("allArgs"===t)return cE.OBJECT;if("unnamed"===t)return cE.STRING;var i=r.data.arguments.find(function(e){return e.name===t});return i?v0(i.type):void 0}}};SE.register(y0);var b0=[{id:"value",label:"Value",component:N,props:{type:"text"}}];function O0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return w0(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(w0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,w0(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,w0(d,"constructor",u),w0(u,"constructor",l),l.displayName="GeneratorFunction",w0(u,i,"GeneratorFunction"),w0(d),w0(d,i,"Generator"),w0(d,r,function(){return this}),w0(d,"toString",function(){return"[object Generator]"}),(O0=function(){return{w:o,m:f}})()}function w0(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}w0=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){w0(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},w0(e,t,n,r)}function x0(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var S0=P_({value:qS(),_version:Bk().optional()}),k0=function(){var e,t=(e=O0().m(function e(t,n){var r,i;return O0().w(function(e){for(;;)if(0===e.n)return r=S0.parse(t.data),i=PE(n,r,"value"),e.a(2,{value:String(i)})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){x0(o,r,i,a,s,"next",e)}function s(e){x0(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),_0={type:"stringNode",label:"String",category:"Input",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"String",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:b0,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:S0,currentVersion:1,initialData:{value:"hello"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.STRING}]},execute:k0};SE.register(_0);var P0=["merge","split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"];function E0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return $0(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):($0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,$0(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,$0(d,"constructor",u),$0(u,"constructor",l),l.displayName="GeneratorFunction",$0(u,i,"GeneratorFunction"),$0(d),$0(d,i,"Generator"),$0(d,r,function(){return this}),$0(d,"toString",function(){return"[object Generator]"}),(E0=function(){return{w:o,m:f}})()}function $0(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}$0=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){$0(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},$0(e,t,n,r)}function T0(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var C0=P_({operation:G_(["merge","split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"]).optional(),delimiter:qS().optional(),inputCount:Bk().min(1).optional(),searchValue:qS().optional(),replaceValue:qS().optional(),index:Bk().optional(),count:Bk().optional(),_version:Bk().optional()}),j0="string_",N0=["split","join","toUpperCase","toLowerCase","trim","replace","replaceAll","slice","length","startsWith","endsWith"],A0=function(e){return e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()}).trim()},I0=function(){var e,t=(e=E0().m(function e(t,n){var r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O,w,x,S,k,_,P,E,$,T,C,j,N;return E0().w(function(e){for(;;)switch(e.n){case 0:o=C0.parse(t.data),a=null!==(r=PE(n,o,"operation"))&&void 0!==r?r:"merge",s=SE.nodeDefinitionMap.get("stringToolsNode"),l=null!==(i=n.string)&&void 0!==i?i:"",N=a,e.n="merge"===N?1:"split"===N?2:"join"===N?4:"toUpperCase"===N?6:"toLowerCase"===N?7:"trim"===N?8:"replace"===N?9:"replaceAll"===N?10:"slice"===N?11:"length"===N?12:"startsWith"===N?13:"endsWith"===N?14:15;break;case 1:return c=null!==(u=PE(n,o,"delimiter"))&&void 0!==u?u:"",d=Object.keys(n).filter(function(e){return s.isDynamicHandle(e)}).sort(function(e,t){return parseInt(e.split("_")[1],10)-parseInt(t.split("_")[1],10)}).map(function(e){return String(n[e])}),e.a(2,{result:d.join(c)});case 2:if(h=null!==(f=PE(n,o,"delimiter"))&&void 0!==f?f:"","string"==typeof l){e.n=3;break}throw new Error("Input for split must be a string.");case 3:return e.a(2,{result:l.split(h)});case 4:if(m=null!==(p=PE(n,o,"delimiter"))&&void 0!==p?p:"",g=n.array,Array.isArray(g)){e.n=5;break}throw new Error("Input for join must be an array.");case 5:return e.a(2,{result:g.join(m)});case 6:return e.a(2,{result:String(l).toUpperCase()});case 7:return e.a(2,{result:String(l).toLowerCase()});case 8:return e.a(2,{result:String(l).trim()});case 9:return b=null!==(v=PE(n,o,"searchValue"))&&void 0!==v?v:"",O=null!==(y=PE(n,o,"replaceValue"))&&void 0!==y?y:"",e.a(2,{result:String(l).replace(b,O)});case 10:return S=null!==(w=PE(n,o,"searchValue"))&&void 0!==w?w:"",k=null!==(x=PE(n,o,"replaceValue"))&&void 0!==x?x:"",e.a(2,{result:String(l).replaceAll(S,k)});case 11:return P=null!==(_=PE(n,o,"index"))&&void 0!==_?_:0,E=PE(n,o,"count"),e.a(2,{result:String(l).slice(P,E)});case 12:return e.a(2,{result:String(l).length});case 13:return T=null!==($=PE(n,o,"searchValue"))&&void 0!==$?$:"",e.a(2,{result:String(l).startsWith(T)});case 14:return j=null!==(C=PE(n,o,"searchValue"))&&void 0!==C?C:"",e.a(2,{result:String(l).endsWith(j)});case 15:throw new Error("Unknown string operation: ".concat(a));case 16:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){T0(o,r,i,a,s,"next",e)}function s(e){T0(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),M0={type:"stringToolsNode",label:"String Tools",category:"Data Processing",component:function(e){var t,n,r=e.id,i=e.selected,o=e.type,a=W1(function(e){var t;return null===(t=e.nodesMap.get(r))||void 0===t?void 0:t.data}),s=W1(function(e){return e.updateNodeData}),l=SE.nodeDefinitionMap.get(o),u=null!==(t=null==a?void 0:a.inputCount)&&void 0!==t?t:2,c=null!==(n=null==a?void 0:a.operation)&&void 0!==n?n:"merge",d=(0,T.useMemo)(function(){var e=[{id:"operation",label:"Operation",component:A,props:{children:P0.map(function(e){return(0,$.jsx)("option",{value:e,children:e},e)})}}];return["merge","split","join"].includes(c)&&e.push({id:"delimiter",label:"Delimiter",component:N,props:{type:"text"}}),["replace","replaceAll","startsWith","endsWith"].includes(c)&&e.push({id:"searchValue",label:"Search Value",component:N,props:{type:"text"}}),["replace","replaceAll"].includes(c)&&e.push({id:"replaceValue",label:"Replace Value",component:N,props:{type:"text"}}),"slice"===c&&e.push({id:"index",label:"Start Index",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"count",label:"End Index (optional)",component:N,props:{type:"number"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}}),e},[c]);if(!a)return null;var f=function(e){s(r,{inputCount:Math.max(1,e)})};return(0,$.jsxs)(QE,{id:r,title:"String Tools",selected:i,children:[(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:r,definition:l,type:"input",fields:d,data:a,updateNodeData:s}),"merge"===c&&(0,$.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:"10px"},children:[(0,$.jsx)(j,{onClick:function(){return f(u+1)},children:"+"}),(0,$.jsx)(j,{onClick:function(){return f(u-1)},disabled:u<=1,children:"-"})]})]}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:r,definition:l,type:"output"})})]})},dataSchema:C0,currentVersion:1,initialData:{operation:"merge",inputCount:2,delimiter:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"operation",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY}]},validate:function(e,t){var n,r=[],i=e.data,o=function(n){return t.some(function(t){return t.target===e.id&&t.targetHandle===n})};switch(null!==(n=i.operation)&&void 0!==n?n:"merge"){case"merge":t.filter(function(t){var n;return t.target===e.id&&(null===(n=t.targetHandle)||void 0===n?void 0:n.startsWith(j0))}).length<2&&r.push({message:"At least two string inputs should be connected for a merge operation.",severity:"warning"});break;case"split":case"toUpperCase":case"toLowerCase":case"trim":case"length":o("string")||r.push({message:'A string must be connected to the "string" input.',severity:"error"});break;case"join":o("array")||r.push({message:'An array must be connected to the "array" input.',severity:"error"});break;case"replace":case"replaceAll":case"startsWith":case"endsWith":o("string")||r.push({message:'A string must be connected to the "string" input.',severity:"error"}),i.searchValue||o("searchValue")||r.push({fieldId:"searchValue",message:"Search Value is required.",severity:"error"});break;case"slice":o("string")||r.push({message:'A string must be connected to the "string" input.',severity:"error"}),void 0!==i.index||o("index")||r.push({fieldId:"index",message:"Start Index is required.",severity:"error"})}return r},execute:I0,getDynamicHandleId:function(e){return"".concat(j0).concat(e)},isDynamicHandle:function(e){var t;return null!==(t=null==e?void 0:e.startsWith(j0))&&void 0!==t&&t},getDynamicHandles:function(e){var t=e.data,n=[],r=cE.ANY;switch(t.operation){case"merge":for(var i=0;i<(null!==(o=t.inputCount)&&void 0!==o?o:2);i++){var o;n.push({id:"".concat(j0).concat(i),type:cE.ANY})}n.push({id:"delimiter",type:cE.STRING}),r=cE.STRING;break;case"split":n.push({id:"string",type:cE.STRING}),n.push({id:"delimiter",type:cE.STRING}),r=cE.OBJECT;break;case"join":n.push({id:"array",type:cE.OBJECT}),n.push({id:"delimiter",type:cE.STRING}),r=cE.STRING;break;case"replace":case"replaceAll":n.push({id:"string",type:cE.STRING}),n.push({id:"searchValue",type:cE.STRING}),n.push({id:"replaceValue",type:cE.STRING}),r=cE.STRING;break;case"slice":n.push({id:"string",type:cE.STRING}),n.push({id:"index",type:cE.NUMBER}),n.push({id:"count",type:cE.NUMBER}),r=cE.STRING;break;case"startsWith":case"endsWith":n.push({id:"string",type:cE.STRING}),n.push({id:"searchValue",type:cE.STRING}),r=cE.BOOLEAN;break;case"length":n.push({id:"string",type:cE.STRING}),r=cE.NUMBER;break;case"toUpperCase":case"toLowerCase":case"trim":n.push({id:"string",type:cE.STRING}),r=cE.STRING}return{inputs:n,outputs:[{id:"result",type:r}]}},getSuggestionBlueprints:function(e){var t=e.direction;return"inputs"!==t&&"outputs"!==t?[]:N0.map(function(e){return{id:"operation-".concat(e),labelSuffix:"(".concat(A0(e),")"),dataOverrides:{operation:e}}})}};SE.register(M0);var D0=[{id:"startId",label:"Start Message ID",component:N,props:{type:"number"},getValueFromEvent:function(e){return Number(e.target.value)}},{id:"endId",label:"End Message ID (Optional)",component:N,props:{type:"number",placeholder:"Defaults to Start ID"},getValueFromEvent:function(e){return""===e.target.value?void 0:Number(e.target.value)}},{id:"visible",label:"Action",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"false",children:"Hide"}),(0,$.jsx)("option",{value:"true",children:"Show"})]})},getValueFromEvent:function(e){return"true"===e.target.value},formatValue:function(e){return String(e)}}];function R0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return Q0(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Q0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Q0(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,Q0(d,"constructor",u),Q0(u,"constructor",l),l.displayName="GeneratorFunction",Q0(u,i,"GeneratorFunction"),Q0(d),Q0(d,i,"Generator"),Q0(d,r,function(){return this}),Q0(d,"toString",function(){return"[object Generator]"}),(R0=function(){return{w:o,m:f}})()}function Q0(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Q0=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Q0(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Q0(e,t,n,r)}function z0(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var L0=P_({startId:Bk().optional(),endId:Bk().optional(),visible:e_().default(!0),_version:Bk().optional()}),Z0=function(){var e,t=(e=R0().m(function e(t,n,r){var i,o,a,s,l,u;return R0().w(function(e){for(;;)switch(e.n){case 0:if(o=r.dependencies,a=L0.parse(t.data),s=PE(n,a,"startId"),l=null!==(i=PE(n,a,"endId"))&&void 0!==i?i:s,u=PE(n,a,"visible"),void 0!==s){e.n=1;break}throw new Error("Start Message ID is required.");case 1:if(void 0!==l){e.n=2;break}throw new Error("End Message ID is required.");case 2:return e.n=3,o.hideChatMessageRange(s,l,u);case 3:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){z0(o,r,i,a,s,"next",e)}function s(e){z0(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),F0={type:"toggleChatMessageVisibilityNode",label:"Hide/Show Message (Context)",category:"Chat",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Hide/Show Message (Context)",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:D0,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:L0,currentVersion:1,initialData:{visible:!1},handles:{inputs:[{id:"main",type:cE.ANY},{id:"startId",type:cE.NUMBER},{id:"endId",type:cE.NUMBER},{id:"visible",type:cE.BOOLEAN}],outputs:[{id:"main",type:cE.ANY}]},validate:c$(l$("startId","Start Message ID is required.")),execute:Z0};function U0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V0(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V0(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(F0);function G0(e){return G0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G0(e)}function B0(e){return function(e){if(Array.isArray(e))return X0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X0(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X0(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Y0(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return W0(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(W0(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,W0(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,W0(d,"constructor",u),W0(u,"constructor",l),l.displayName="GeneratorFunction",W0(u,i,"GeneratorFunction"),W0(d),W0(d,i,"Generator"),W0(d,r,function(){return this}),W0(d,"toString",function(){return"[object Generator]"}),(Y0=function(){return{w:o,m:f}})()}function W0(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}W0=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){W0(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},W0(e,t,n,r)}function q0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q0(Object(n),!0).forEach(function(t){K0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function K0(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=G0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=G0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G0(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J0(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var e1=P_({selectedEventType:qS(),_version:Bk().optional()}),t1=function(){var e,t=(e=Y0().m(function e(t,n){return Y0().w(function(e){for(;;)if(0===e.n)return e.a(2,H0({},n))},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){J0(o,r,i,a,s,"next",e)}function s(e){J0(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),n1={type:"triggerNode",label:"Event Trigger",category:"Trigger",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r),s=!(0,T.useMemo)(function(){return new Set(Object.values(dE))},[]).has(null==i?void 0:i.selectedEventType);if(!i||!a)return null;var l=rE[i.selectedEventType];return(0,$.jsxs)(QE,{id:t,title:"Trigger via:",selected:n,children:[(0,$.jsx)("hr",{}),(0,$.jsx)("label",{children:"Event"}),(0,$.jsxs)(A,{className:"nodrag",value:s?"custom":i.selectedEventType,onChange:function(e){var n=e.target.value;o(t,"custom"===n?{selectedEventType:""}:{selectedEventType:n})},children:[Object.entries(tE).map(function(e){var t=U0(e,2),n=t[0],r=t[1];return(0,$.jsx)("optgroup",{label:n,children:r.map(function(e){var t,n=null!==(t=Object.keys(dE).find(function(t){return dE[t]===e}))&&void 0!==t?t:e;return(0,$.jsx)("option",{value:e,children:n},e)})},n)}),(0,$.jsx)("option",{value:"custom",children:"-- Custom Event --"})]}),s&&(0,$.jsxs)("div",{style:{marginTop:"5px"},children:[(0,$.jsx)("label",{children:"Custom Event Name"}),(0,$.jsx)(N,{className:"nodrag",value:i.selectedEventType,onChange:function(e){o(t,{selectedEventType:e.target.value})},placeholder:"Type your custom event name"})]}),(0,$.jsx)("div",{style:{marginTop:"5px",fontSize:"11px",color:"#ccc",fontStyle:"italic"},children:l&&(0,$.jsx)("p",{style:{margin:"2px 0 0 0"},children:l})}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:e1,currentVersion:1,initialData:{selectedEventType:"user_message_rendered"},handles:{inputs:[],outputs:[]},execute:t1,getDynamicHandles:function(e){var t,n=e.data,r=iE[n.selectedEventType];return t=r?Object.keys(r).map(function(e){return{id:e,type:fX(r[e]),schema:r[e]}}):[{id:"allArgs",type:cE.OBJECT,schema:S_(h_())},{id:"arg0",type:cE.ANY},{id:"arg1",type:cE.ANY},{id:"arg2",type:cE.ANY},{id:"arg3",type:cE.ANY}],{inputs:[],outputs:[{id:"main",type:cE.ANY}].concat(B0(t))}},getHandleType:function(e){var t=e.handleId,n=e.handleDirection,r=e.node;if("output"===n&&t){if("main"===t)return cE.ANY;var i=r.data.selectedEventType,o=iE[i];if(o){if(o[t])return fX(o[t])}else{if("allArgs"===t)return cE.OBJECT;if(t.startsWith("arg"))return cE.ANY}}}};SE.register(n1);var r1=[{id:"targetType",label:"Convert To",component:A,props:{children:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("option",{value:"string",children:"String"}),(0,$.jsx)("option",{value:"number",children:"Number"}),(0,$.jsx)("option",{value:"object",children:"Object (from JSON string)"}),(0,$.jsx)("option",{value:"array",children:"Array (from JSON string)"})]})}}];function i1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return o1(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(o1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,o1(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,o1(d,"constructor",u),o1(u,"constructor",l),l.displayName="GeneratorFunction",o1(u,i,"GeneratorFunction"),o1(d),o1(d,i,"Generator"),o1(d,r,function(){return this}),o1(d,"toString",function(){return"[object Generator]"}),(i1=function(){return{w:o,m:f}})()}function o1(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o1=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){o1(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},o1(e,t,n,r)}function a1(e){return a1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a1(e)}function s1(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var l1=P_({targetType:G_(["string","number","object","array"]).default("string"),_version:Bk().optional()}),u1=function(){var e,t=(e=i1().m(function e(t,n){var r,i,o,a,s,l,u,c,d;return i1().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=l1.parse(t.data),o=null!==(r=PE(n,i,"targetType"))&&void 0!==r?r:"string",void 0!==(a=n.value)){e.n=5;break}u=o,e.n="string"===u?1:"number"===u?2:"object"===u?3:"array"===u?4:5;break;case 1:return e.a(2,{result:""});case 2:return e.a(2,{result:0});case 3:return e.a(2,{result:{}});case 4:return e.a(2,{result:[]});case 5:e.p=5,c=o,e.n="string"===c?6:"number"===c?7:"object"===c||"array"===c?9:14;break;case 6:return e.a(2,{result:"object"===a1(a)?JSON.stringify(a,null,2):String(a)});case 7:if(s=parseFloat(a),!isNaN(s)){e.n=8;break}throw new Error("'".concat(a,"' cannot be converted to a number."));case 8:return e.a(2,{result:s});case 9:if("object"!==a1(a)){e.n=10;break}return e.a(2,{result:a});case 10:if("string"==typeof a){e.n=11;break}throw new Error("Input must be a JSON string to convert.");case 11:if(l=JSON.parse(a),"array"!==o||Array.isArray(l)){e.n=12;break}throw new Error("Parsed JSON is not an array.");case 12:if("object"!==o||!Array.isArray(l)&&"object"===a1(l)){e.n=13;break}throw new Error("Parsed JSON is not an object.");case 13:return e.a(2,{result:l});case 14:throw new Error("Unsupported target type: ".concat(o));case 15:e.n=17;break;case 16:throw e.p=16,d=e.v,new Error("Type conversion failed: ".concat(d.message));case 17:return e.a(2)}},e,null,[[5,16]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){s1(o,r,i,a,s,"next",e)}function s(e){s1(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),c1={type:"typeConverterNode",label:"Type Converter",category:"Data Processing",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsx)(QE,{id:t,title:"Type Converter",selected:n,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:r1,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{borderTop:"1px solid #555",paddingTop:"10px",marginTop:"5px"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})}):null},dataSchema:l1,currentVersion:1,initialData:{targetType:"string"},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.ANY},{id:"targetType",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY}]},execute:u1,getDynamicHandles:function(e){var t;switch(e.data.targetType){case"string":t=cE.STRING;break;case"number":t=cE.NUMBER;break;case"object":case"array":t=cE.OBJECT;break;default:t=cE.ANY}return{inputs:[],outputs:[{id:"result",type:t}]}},getSuggestionBlueprints:function(e){return"outputs"!==e.direction?[]:[{id:"target-number",labelSuffix:"(Number)",dataOverrides:{targetType:"number"}},{id:"target-object",labelSuffix:"(Object)",dataOverrides:{targetType:"object"}},{id:"target-array",labelSuffix:"(Array)",dataOverrides:{targetType:"array"}}]}};SE.register(c1);var d1=[{id:"value",label:"Value",component:I,props:{rows:3}}];function f1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return h1(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(h1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,h1(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,h1(d,"constructor",u),h1(u,"constructor",l),l.displayName="GeneratorFunction",h1(u,i,"GeneratorFunction"),h1(d),h1(d,i,"Generator"),h1(d,r,function(){return this}),h1(d,"toString",function(){return"[object Generator]"}),(f1=function(){return{w:o,m:f}})()}function h1(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}h1=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){h1(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},h1(e,t,n,r)}function p1(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var m1=P_({value:qS().optional(),_version:Bk().optional()}),g1=function(){var e,t=(e=f1().m(function e(t,n,r){var i,o,a;return f1().w(function(e){for(;;)switch(e.n){case 0:if(i=r.dependencies,o=m1.parse(t.data),null!=(a=PE(n,o,"value"))){e.n=1;break}throw new Error("Value to update chat input is required.");case 1:i.updateChatInputValue(String(a));case 2:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){p1(o,r,i,a,s,"next",e)}function s(e){p1(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}(),v1={type:"updateChatInputNode",label:"Update Chat Input",category:"Chat",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);return i&&a?(0,$.jsxs)(QE,{id:t,title:"Update Chat Input",selected:n,children:[(0,$.jsx)(JE,{nodeId:t,definition:a,type:"input",fields:d1,data:i,updateNodeData:o}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]}):null},dataSchema:m1,currentVersion:1,initialData:{value:""},handles:{inputs:[{id:"main",type:cE.ANY},{id:"value",type:cE.STRING}],outputs:[{id:"main",type:cE.ANY}]},validate:c$(l$("value","Value is required.")),execute:g1};function y1(e){return y1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y1(e)}function b1(e){return function(e){if(Array.isArray(e))return O1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O1(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O1(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w1(Object(n),!0).forEach(function(t){S1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S1(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=y1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y1(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}SE.register(v1);function k1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return _1(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(_1(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,_1(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,_1(d,"constructor",u),_1(u,"constructor",l),l.displayName="GeneratorFunction",_1(u,i,"GeneratorFunction"),_1(d),_1(d,i,"Generator"),_1(d,r,function(){return this}),_1(d,"toString",function(){return"[object Generator]"}),(k1=function(){return{w:o,m:f}})()}function _1(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_1=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){_1(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},_1(e,t,n,r)}function P1(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var E1=P_({definition:mJ.default({type:"string"}),_version:Bk().optional()}),$1=function(){var e,t=(e=k1().m(function e(t){var n,r;return k1().w(function(e){for(;;)if(0===e.n)return n=E1.parse(t.data),r=aX(n.definition),e.a(2,{schema:r})},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){P1(o,r,i,a,s,"next",e)}function s(e){P1(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}(),T1={type:"variableSchemaNode",label:"Variable Schema",category:"Variables",component:function(e){var t=e.id,n=e.selected,r=e.type,i=W1(function(e){var n;return null===(n=e.nodesMap.get(t))||void 0===n?void 0:n.data}),o=W1(function(e){return e.updateNodeData}),a=SE.nodeDefinitionMap.get(r);if(!i||!a)return null;var s=i.definition,l=function(e,t,n){var r=structuredClone(e);if(0===t.length)return n(r);for(var i=r,o=0;o<t.length-1;o++){var a=t[o];void 0===i[a]&&(i[a]="number"==typeof t[o+1]?[]:{}),i=i[a]}var s=t[t.length-1];return i[s]=n(i[s]),r};return(0,$.jsxs)(QE,{id:t,title:"Variable Schema",selected:n,children:[(0,$.jsx)(lJ,{definition:s,path:[],onUpdate:function(e,n){var r;r=0===e.length?x1(x1({},s),n):l(s,e,function(e){return x1(x1({},e),n)}),o(t,{definition:r})},onRemove:function(e){0!==e.length&&function(e){var n=e.slice(0,-2),r=e[e.length-2],i=e[e.length-1];if(0!==n.length||"fields"!==r){var a=l(s,[].concat(b1(n),[r]),function(e){return(e||[]).filter(function(e,t){return t!==i})});o(t,{definition:a})}else{var u=(s.fields||[]).filter(function(e,t){return t!==i});o(t,{definition:x1(x1({},s),{},{fields:u})})}}(e)},onAddChild:function(e){var n={id:oT(),name:"field",type:"string"},r=l(s,[].concat(b1(e),["fields"]),function(e){return[].concat(b1(e||[]),[n])});o(t,{definition:r})}}),(0,$.jsx)(j,{className:"nodrag",onClick:function(){"object"!==s.type&&o(t,{definition:{type:"object",fields:[]}})},style:{marginTop:"10px"},children:"Set To Object Root"}),(0,$.jsx)("div",{style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px solid #555"},children:(0,$.jsx)(JE,{nodeId:t,definition:a,type:"output"})})]})},dataSchema:E1,currentVersion:1,initialData:{definition:{type:"string"}},handles:{inputs:[{id:"main",type:cE.ANY}],outputs:[{id:"main",type:cE.ANY},{id:"schema",type:cE.SCHEMA}]},execute:$1};function C1(e){return C1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C1(e)}function j1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j1(Object(n),!0).forEach(function(t){A1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A1(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C1(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I1(e){return function(e){if(Array.isArray(e))return M1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M1(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M1(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SE.register(T1);var D1={};function R1(e){return R1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R1(e)}function Q1(e){return function(e){if(Array.isArray(e))return z1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z1(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z1(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function L1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L1(Object(n),!0).forEach(function(t){F1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F1(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=R1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=R1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R1(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U1=function(e){return{id:e.id,type:e.type,position:e.position,data:e.data,width:e.width,height:e.height}},V1=function(e){var t;return{id:e.id,type:e.type,position:null!==(t=e.position)&&void 0!==t?t:{x:0,y:0},data:e.data,width:e.width||void 0,height:e.height||void 0}},G1=function(e){var t,n;return{id:e.id,source:e.source,sourceHandle:null!==(t=e.sourceHandle)&&void 0!==t?t:null,target:e.target,targetHandle:null!==(n=e.targetHandle)&&void 0!==n?n:null}},B1=function(e){return{id:e.id,source:e.source,sourceHandle:e.sourceHandle,target:e.target,targetHandle:e.targetHandle}},X1=function(e,t,n,r){var i=new Set;if(!e.type)return i;var o=SE.nodeDefinitionMap.get(e.type);if(!o)return i;if(("input"===t?o.handles.inputs:o.handles.outputs).forEach(function(e){return i.add(e.id)}),o.getDynamicHandles){var a=o.getDynamicHandles(e,n,r);("input"===t?a.inputs:a.outputs).forEach(function(e){return i.add(e.id)})}return i},Y1=function(e,t){var n=new Map(e.map(function(e){return[e.id,e]}));return t.filter(function(r){var i,o,a=n.get(r.source),s=n.get(r.target);return!(!a||!s)&&(!!X1(a,"output",e,t).has(null!==(i=r.sourceHandle)&&void 0!==i?i:null)&&!!X1(s,"input",e,t).has(null!==(o=r.targetHandle)&&void 0!==o?o:null))})},W1=gp(((e,t)=>(n,r,i)=>{i.temporal=mc(t?.wrapTemporal?.(vp(n,r,t))||vp(n,r,t));const o=t?.handleSet?.(i.temporal.getState()._handleSet)||i.temporal.getState()._handleSet,a=e=>{if(!i.temporal.getState().isTracking)return;const n=t?.partialize?.(r())||r(),a=t?.diff?.(e,n);null===a||t?.equality?.(e,n)||o(e,void 0,n,a)},s=i.setState;return i.setState=(...e)=>{const n=t?.partialize?.(r())||r();s(...e),a(n)},e((...e)=>{const i=t?.partialize?.(r())||r();n(...e),a(i)},r,i)})(function(e,t){return{nodes:[],edges:[],nodesMap:new Map,clipboard:null,setNodes:function(t){e({nodes:t,nodesMap:new Map(t.map(function(e){return[e.id,e]}))})},setEdges:function(t){return e({edges:t})},onNodesChange:function(t){e(function(e){var n=nd(t,e.nodes);return{nodes:n,edges:Y1(n,e.edges),nodesMap:new Map(n.map(function(e){return[e.id,e]}))}})},onEdgesChange:function(t){e(function(e){var n=rd(t,e.edges);return{edges:Y1(e.nodes,n)}})},onConnect:function(t){e(function(e){return{edges:vu(t,e.edges)}})},updateNodeData:function(t,n){e(function(e){var r=e.nodes.map(function(e){return e.id===t?Z1(Z1({},e),{},{data:Z1(Z1({},e.data),n)}):e});return{nodes:r,edges:Y1(r,e.edges),nodesMap:new Map(r.map(function(e){return[e.id,e]}))}})},toggleNodeDisabled:function(t){e(function(e){var n=new Set(t),r=e.nodes.map(function(e){return n.has(e.id)?Z1(Z1({},e),{},{data:Z1(Z1({},e.data),{},{disabled:!e.data.disabled})}):e});return{nodes:r,nodesMap:new Map(r.map(function(e){return[e.id,e]}))}})},loadFlow:function(t,n){var r,i,o,a=(i=I1((r=t).edges),o=r.nodes.map(function(e){var t,n=SE.nodeDefinitionMap.get(e.type);if(!n)return e;for(var r=null!==(t=e.data._version)&&void 0!==t?t:0,o=N1({},e.data);r<n.currentVersion;){var a,s=r,l=null===(a=D1[e.type])||void 0===a?void 0:a[r];if(!l){console.warn('[Migration] No migration found for node type "'.concat(e.type,'" from version ').concat(r," to ").concat(r+1,". Halting migration for this node.")),o._version=n.currentVersion;break}if(l.node&&(o=l.node(o)),l.edge){var u=N1(N1({},e),{},{data:o});i=l.edge(u,i)}if((r=o._version)===s){console.error('[Migration] Migration for node "'.concat(e.type,'" from version ').concat(s," did not update the version number. Halting migration for this node to prevent an infinite loop.")),o._version=n.currentVersion;break}}return N1(N1({},e),{},{data:o})}),{nodes:o,edges:i}),s=jr(a,n,Tr),l=(s.nodes||[]).map(V1);e({nodes:l,edges:(s.edges||[]).map(B1),nodesMap:new Map(l.map(function(e){return[e.id,e]}))})},getSpecFlow:function(){return{nodes:t().nodes.map(U1),edges:t().edges.map(G1)}},addNode:function(t){var n=Z1(Z1({},t),{},{id:oT()});return"ifNode"===n.type&&n.data.conditions&&(n.data.conditions=n.data.conditions.map(function(e){return Z1(Z1({},e),{},{id:oT()})})),e(function(e){var t=[].concat(Q1(e.nodes),[n]);return{nodes:t,nodesMap:new Map(t.map(function(e){return[e.id,e]}))}}),n},duplicateNode:function(n){var r=t().nodesMap.get(n);if(r){var i=Z1(Z1({},structuredClone(r)),{},{id:oT(),position:{x:r.position.x+50,y:r.position.y+50},selected:!1});"ifNode"===i.type&&i.data.conditions&&(i.data.conditions=i.data.conditions.map(function(e){return Z1(Z1({},e),{},{id:oT()})})),e(function(e){var t=[].concat(Q1(e.nodes),[i]);return{nodes:t,nodesMap:new Map(t.map(function(e){return[e.id,e]}))}})}},copySelection:function(){var n=t(),r=n.nodes,i=n.edges,o=r.filter(function(e){return e.selected});if(0!==o.length){var a=new Set(o.map(function(e){return e.id})),s=i.filter(function(e){return a.has(e.source)&&a.has(e.target)});e({clipboard:{nodes:structuredClone(o),edges:structuredClone(s)}})}},paste:function(n){var r=t().clipboard;if(r&&0!==r.nodes.length){var i=new Map,o=[],a=[],s=Math.min.apply(Math,Q1(r.nodes.map(function(e){return e.position.x}))),l=Math.min.apply(Math,Q1(r.nodes.map(function(e){return e.position.y})));r.nodes.forEach(function(e){var t=oT();i.set(e.id,t),"ifNode"===e.type&&e.data.conditions&&(e.data.conditions=e.data.conditions.map(function(e){return Z1(Z1({},e),{},{id:oT()})})),o.push(Z1(Z1({},e),{},{id:t,selected:!0,position:{x:n.x+(e.position.x-s),y:n.y+(e.position.y-l)}}))}),r.edges.forEach(function(e){var t=i.get(e.source),n=i.get(e.target);t&&n&&a.push(Z1(Z1({},e),{},{id:oT(),source:t,target:n}))}),e(function(e){var t=e.nodes.map(function(e){return Z1(Z1({},e),{},{selected:!1})}),n=[].concat(Q1(t),o);return{nodes:n,edges:[].concat(Q1(e.edges),a),nodesMap:new Map(n.map(function(e){return[e.id,e]}))}})}}}},{partialize:function(e){return{nodes:e.nodes,edges:e.edges}},limit:50}));function q1(e,t,n){var r,i;if(n.some(function(t){return t.target===e.target&&t.targetHandle===e.targetHandle}))return!1;var o=t.find(function(t){return t.id===e.source}),a=t.find(function(t){return t.id===e.target});if(!(o&&a&&o.type&&a.type))return!1;var s=tX(o,null!==(r=e.sourceHandle)&&void 0!==r?r:null,"output",t,n),l=tX(a,null!==(i=e.targetHandle)&&void 0!==i?i:null,"input",t,n),u=null==s?void 0:s.type,c=null==l?void 0:l.type;return!(!u||!c)&&mE(u,c)}function H1(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=J1(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function K1(e){return function(e){if(Array.isArray(e))return e2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J1(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J1(e,t){if(e){if("string"==typeof e)return e2(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e2(e,t):void 0}}function e2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t2(e,t,n,r){if("runFlowNode"!==t.type)return null;var i=t.data.flowId;if(!i)return null;var o=[].concat(K1(n),[e]);if(o.includes(i)){var a=[].concat(K1(o),[i]).map(function(e){var t;return(null===(t=r.find(function(t){return t.id===e}))||void 0===t?void 0:t.name)||e}).join(" -> ");return"Circular sub-flow reference detected: ".concat(a)}var s=r.find(function(e){return e.id===i});if(!s)return null;var l,u=H1(s.flow.nodes);try{for(u.s();!(l=u.n()).done;){var c=l.value,d=t2(i,c,o,r);if(d)return d}}catch(e){u.e(e)}finally{u.f()}return null}W1.subscribe(function(e,t){e.nodes!==t.nodes&&W1.setState({nodesMap:new Map(e.nodes.map(function(e){return[e.id,e]}))})});var n2=function(e,t,n){var r=[],i=new Set,o=new Set,a=new Map,s=function(e,t,n){a.has(e)||a.set(e,[]),a.get(e).push(n),"error"===n.severity&&(i.add(e),r.push("Node [".concat(t,"]: ").concat(n.message)))};if(!e.nodes||0===e.nodes.length)return{isValid:!0,errors:[],invalidNodeIds:i,invalidEdgeIds:o,errorsByNodeId:a};var l,u=new Set(e.nodes.map(function(e){return e.id})),c=Lr.getSettings().flows,d=H1(e.nodes);try{var f=function(){var r,i=l.value;if(null!==(r=i.data)&&void 0!==r&&r.disabled)return 1;var o=SE.nodeDefinitionMap.get(i.type);if(o){var a=o.dataSchema.safeParse(i.data);if(a.success||a.error.issues.forEach(function(e){s(i.id,i.type,{fieldId:e.path.join("."),message:e.message,severity:"error"})}),o.validate)o.validate(i,e.edges).forEach(function(e){return s(i.id,i.type,e)});var u=o.isDangerous;if("ifNode"===i.type&&(u=i.data.conditions.some(function(e){return"advanced"===e.mode})),u&&!t&&s(i.id,i.type,{message:"This dangerous node requires permission. Enable 'Allow Dangerous' in the flow settings.",severity:"error"}),"runFlowNode"===i.type){var d=i.data.flowId;if(d){var f=c.find(function(e){return e.id===d});if(f)if(f.enabled){if(n){var h=t2(n,i,[],c);h&&s(i.id,i.type,{fieldId:"flowId",message:h,severity:"error"})}}else s(i.id,i.type,{fieldId:"flowId",message:'Targets disabled flow: "'.concat(f.name,'".'),severity:"error"});else s(i.id,i.type,{fieldId:"flowId",message:"Targets a non-existent flow.",severity:"error"})}}}else i.type&&!SE.nodeDefinitionMap.has(i.type)&&s(i.id,i.type,{message:'Unknown node type "'.concat(i.type,'".'),severity:"error"})};for(d.s();!(l=d.n()).done;)f()}catch(e){d.e(e)}finally{d.f()}var h,p=H1(e.edges);try{for(p.s();!(h=p.n()).done;){var m=h.value;u.has(m.source)||(r.push("Edge [".concat(m.id,']: Source node "').concat(m.source,'" not found.')),o.add(m.id)),u.has(m.target)||(r.push("Edge [".concat(m.id,']: Target node "').concat(m.target,'" not found.')),o.add(m.id))}}catch(e){p.e(e)}finally{p.f()}var g={};e.nodes.forEach(function(e){return g[e.id]=[]}),e.edges.forEach(function(e){g[e.source]&&g[e.source].push(e.target)});var v,y=new Set,b=new Set,O=function(e){y.add(e),b.add(e);var t,n=H1(g[e]||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(y.has(r)){if(b.has(r))return!0}else if(O(r))return!0}}catch(e){n.e(e)}finally{n.f()}return b.delete(e),!1},w=H1(e.nodes);try{for(w.s();!(v=w.n()).done;){var x=v.value;if(!y.has(x.id)&&O(x.id)){r.push("Flow has a cycle (circular dependency).");break}}}catch(e){w.e(e)}finally{w.f()}var S,k=H1(e.nodes.filter(function(e){return"triggerNode"===e.type||"manualTriggerNode"===e.type||"slashCommandNode"===e.type}));try{var _=function(){var t=S.value;e.edges.some(function(e){return e.target===t.id})&&s(t.id,t.type,{message:"Trigger nodes cannot have incoming connections.",severity:"error"})};for(k.s();!(S=k.n()).done;)_()}catch(e){k.e(e)}finally{k.f()}return{isValid:0===r.length,errors:r,invalidNodeIds:i,invalidEdgeIds:o,errorsByNodeId:a}};const r2=E,i2={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},o2=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",a2=new RegExp("^"+("["+o2+"]["+(o2+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*")+"$");function s2(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[];i.startIndex=t.lastIndex-r[0].length;const o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n}const l2=function(e){const t=a2.exec(e);return!(null==t)};let u2;u2="function"!=typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class c2{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),void 0!==t&&(this.child[this.child.length-1][u2]={startIndex:t})}static getMetaDataSymbol(){return u2}}function d2(e,t){const n={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let r=1,i=!1,o=!1,a="";for(;t<e.length;t++)if("<"!==e[t]||o)if(">"===e[t]){if(o?"-"===e[t-1]&&"-"===e[t-2]&&(o=!1,r--):r--,0===r)break}else"["===e[t]?i=!0:a+=e[t];else{if(i&&v2(e,"!ENTITY",t)){let r,i;t+=7,[r,i,t]=h2(e,t+1),-1===i.indexOf("&")&&(n[r]={regx:RegExp(`&${r};`,"g"),val:i})}else if(i&&v2(e,"!ELEMENT",t)){t+=8;const{index:n}=g2(e,t+1);t=n}else if(i&&v2(e,"!ATTLIST",t))t+=8;else if(i&&v2(e,"!NOTATION",t)){t+=9;const{index:n}=p2(e,t+1);t=n}else{if(!v2(e,"!--",t))throw new Error("Invalid DOCTYPE");o=!0}r++,a=""}if(0!==r)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}}const f2=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function h2(e,t){t=f2(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t])&&'"'!==e[t]&&"'"!==e[t];)n+=e[t],t++;if(y2(n),t=f2(e,t),"SYSTEM"===e.substring(t,t+6).toUpperCase())throw new Error("External entities are not supported");if("%"===e[t])throw new Error("Parameter entities are not supported");let r="";return[t,r]=m2(e,t,"entity"),[n,r,--t]}function p2(e,t){t=f2(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;y2(n),t=f2(e,t);const r=e.substring(t,t+6).toUpperCase();if("SYSTEM"!==r&&"PUBLIC"!==r)throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=f2(e,t);let i=null,o=null;if("PUBLIC"===r)[t,i]=m2(e,t,"publicIdentifier"),'"'!==e[t=f2(e,t)]&&"'"!==e[t]||([t,o]=m2(e,t,"systemIdentifier"));else if("SYSTEM"===r&&([t,o]=m2(e,t,"systemIdentifier"),!o))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:i,systemIdentifier:o,index:--t}}function m2(e,t,n){let r="";const i=e[t];if('"'!==i&&"'"!==i)throw new Error(`Expected quoted string, found "${i}"`);for(t++;t<e.length&&e[t]!==i;)r+=e[t],t++;if(e[t]!==i)throw new Error(`Unterminated ${n} value`);return[++t,r]}function g2(e,t){t=f2(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!y2(n))throw new Error(`Invalid element name: "${n}"`);let r="";if("E"===e[t=f2(e,t)]&&v2(e,"MPTY",t))t+=4;else if("A"===e[t]&&v2(e,"NY",t))t+=2;else{if("("!==e[t])throw new Error(`Invalid Element Expression, found "${e[t]}"`);for(t++;t<e.length&&")"!==e[t];)r+=e[t],t++;if(")"!==e[t])throw new Error("Unterminated content model")}return{elementName:n,contentModel:r.trim(),index:t}}function v2(e,t,n){for(let r=0;r<t.length;r++)if(t[r]!==e[n+r+1])return!1;return!0}function y2(e){if(l2(e))return e;throw new Error(`Invalid entity name ${e}`)}const b2=/^[-+]?0x[a-fA-F0-9]+$/,O2=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,w2={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function x2(e,t={}){if(t=Object.assign({},w2,t),!e||"string"!=typeof e)return e;let n=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(n))return e;if("0"===e)return 0;if(t.hex&&b2.test(n))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(n,16);if(-1!==n.search(/.+[eE].+/))return function(e,t,n){if(!n.eNotation)return e;const r=t.match(S2);if(r){let i=r[1]||"";const o=-1===r[3].indexOf("e")?"E":"e",a=r[2],s=i?e[a.length+1]===o:e[a.length]===o;return a.length>1&&s?e:1!==a.length||!r[3].startsWith(`.${o}`)&&r[3][0]!==o?n.leadingZeros&&!s?(t=(r[1]||"")+r[3],Number(t)):e:Number(t)}return e}(e,n,t);{const r=O2.exec(n);if(r){const i=r[1]||"",o=r[2];let a=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),e;return e}(r[3]);const s=i?"."===e[o.length+1]:"."===e[o.length];if(!t.leadingZeros&&(o.length>1||1===o.length&&!s))return e;{const r=Number(n),s=String(r);if(0===r)return r;if(-1!==s.search(/[eE]/))return t.eNotation?r:e;if(-1!==n.indexOf("."))return"0"===s||s===a||s===`${i}${a}`?r:e;let l=o?a:n;return o?l===s||i+l===s?r:e:l===s||l===i+s?r:e}}return e}}const S2=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;class k2{constructor(e){var t;this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=_2,this.parseXml=C2,this.parseTextData=P2,this.resolveNameSpace=E2,this.buildAttributesMap=T2,this.isItStopNode=I2,this.replaceEntitiesValue=N2,this.readStopNodeData=R2,this.saveTextToParentTag=A2,this.addChild=j2,this.ignoreAttributesFn="function"==typeof(t=this.options.ignoreAttributes)?t:Array.isArray(t)?e=>{for(const n of t){if("string"==typeof n&&e===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}}:()=>!1}}function _2(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function P2(e,t,n,r,i,o,a){if(void 0!==e&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));const r=this.options.tagValueProcessor(t,e,n,i,o);if(null==r)return e;if(typeof r!=typeof e||r!==e)return r;if(this.options.trimValues)return Q2(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?Q2(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function E2(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}const $2=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function T2(e,t,n){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){const n=s2(e,$2),r=n.length,i={};for(let e=0;e<r;e++){const r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let o=n[e][4],a=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(a=this.options.transformAttributeName(a)),"__proto__"===a&&(a="#__proto__"),void 0!==o){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const e=this.options.attributeValueProcessor(r,o,t);i[a]=null==e?o:typeof e!=typeof o||e!==o?e:Q2(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[a]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=i,e}return i}}const C2=function(e){e=e.replace(/\r\n?/g,"\n");const t=new c2("!xml");let n=t,r="",i="";for(let o=0;o<e.length;o++){if("<"===e[o])if("/"===e[o+1]){const t=M2(e,">",o,"Closing Tag is not closed.");let a=e.substring(o+2,t).trim();if(this.options.removeNSPrefix){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&(r=this.saveTextToParentTag(r,n,i));const s=i.substring(i.lastIndexOf(".")+1);if(a&&-1!==this.options.unpairedTags.indexOf(a))throw new Error(`Unpaired tag can not be used as closing tag: </${a}>`);let l=0;s&&-1!==this.options.unpairedTags.indexOf(s)?(l=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=i.lastIndexOf("."),i=i.substring(0,l),n=this.tagsNodeStack.pop(),r="",o=t}else if("?"===e[o+1]){let t=D2(e,o,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,i),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new c2(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,i,t.tagName)),this.addChild(n,e,i,o)}o=t.closeIndex+1}else if("!--"===e.substr(o+1,3)){const t=M2(e,"--\x3e",o+4,"Comment is not closed.");if(this.options.commentPropName){const a=e.substring(o+4,t-2);r=this.saveTextToParentTag(r,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}o=t}else if("!D"===e.substr(o+1,2)){const t=d2(e,o);this.docTypeEntities=t.entities,o=t.i}else if("!["===e.substr(o+1,2)){const t=M2(e,"]]>",o,"CDATA is not closed.")-2,a=e.substring(o+9,t);r=this.saveTextToParentTag(r,n,i);let s=this.parseTextData(a,n.tagname,i,!0,!1,!0,!0);null==s&&(s=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]):n.add(this.options.textNodeName,s),o=t+2}else{let a=D2(e,o,this.options.removeNSPrefix),s=a.tagName;const l=a.rawTagName;let u=a.tagExp,c=a.attrExpPresent,d=a.closeIndex;this.options.transformTagName&&(s=this.options.transformTagName(s)),n&&r&&"!xml"!==n.tagname&&(r=this.saveTextToParentTag(r,n,i,!1));const f=n;f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),s!==t.tagname&&(i+=i?"."+s:s);const h=o;if(this.isItStopNode(this.options.stopNodes,i,s)){let t="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)"/"===s[s.length-1]?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),u=s):u=u.substr(0,u.length-1),o=a.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(s))o=a.closeIndex;else{const n=this.readStopNodeData(e,l,d+1);if(!n)throw new Error(`Unexpected end of ${l}`);o=n.i,t=n.tagContent}const r=new c2(s);s!==u&&c&&(r[":@"]=this.buildAttributesMap(u,i,s)),t&&(t=this.parseTextData(t,s,i,!0,c,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),r.add(this.options.textNodeName,t),this.addChild(n,r,i,h)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===s[s.length-1]?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),u=s):u=u.substr(0,u.length-1),this.options.transformTagName&&(s=this.options.transformTagName(s));const e=new c2(s);s!==u&&c&&(e[":@"]=this.buildAttributesMap(u,i,s)),this.addChild(n,e,i,h),i=i.substr(0,i.lastIndexOf("."))}else{const e=new c2(s);this.tagsNodeStack.push(n),s!==u&&c&&(e[":@"]=this.buildAttributesMap(u,i,s)),this.addChild(n,e,i,h),n=e}r="",o=d}}else r+=e[o]}return t.child};function j2(e,t,n,r){this.options.captureMetaData||(r=void 0);const i=this.options.updateTag(t.tagname,n,t[":@"]);!1===i||("string"==typeof i?(t.tagname=i,e.addChild(t,r)):e.addChild(t,r))}const N2=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function A2(e,t,n,r){return e&&(void 0===r&&(r=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,r))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function I2(e,t,n){const r="*."+n;for(const n in e){const i=e[n];if(r===i||t===i)return!0}return!1}function M2(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}function D2(e,t,n,r=">"){const i=function(e,t,n=">"){let r,i="";for(let o=t;o<e.length;o++){let t=e[o];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else if(t===n[0]){if(!n[1])return{data:i,index:o};if(e[o+1]===n[1])return{data:i,index:o}}else"\t"===t&&(t=" ");i+=t}}(e,t+1,r);if(!i)return;let o=i.data;const a=i.index,s=o.search(/\s/);let l=o,u=!0;-1!==s&&(l=o.substring(0,s),o=o.substring(s+1).trimStart());const c=l;if(n){const e=l.indexOf(":");-1!==e&&(l=l.substr(e+1),u=l!==i.data.substr(e+1))}return{tagName:l,tagExp:o,closeIndex:a,attrExpPresent:u,rawTagName:c}}function R2(e,t,n){const r=n;let i=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const o=M2(e,">",n,`${t} is not closed`);if(e.substring(n+2,o).trim()===t&&(i--,0===i))return{tagContent:e.substring(r,n),i:o};n=o}else if("?"===e[n+1]){n=M2(e,"?>",n+1,"StopNode is not closed.")}else if("!--"===e.substr(n+1,3)){n=M2(e,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===e.substr(n+1,2)){n=M2(e,"]]>",n,"StopNode is not closed.")-2}else{const r=D2(e,n,">");if(r){(r&&r.tagName)===t&&"/"!==r.tagExp[r.tagExp.length-1]&&i++,n=r.closeIndex}}}function Q2(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&x2(e,n)}return void 0!==e?e:""}const z2=c2.getMetaDataSymbol();function L2(e,t){return Z2(e,t)}function Z2(e,t,n){let r;const i={};for(let o=0;o<e.length;o++){const a=e[o],s=F2(a);let l="";if(l=void 0===n?s:n+"."+s,s===t.textNodeName)void 0===r?r=a[s]:r+=""+a[s];else{if(void 0===s)continue;if(a[s]){let e=Z2(a[s],t,l);const n=V2(e,t);void 0!==a[z2]&&(e[z2]=a[z2]),a[":@"]?U2(e,a[":@"],l,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==i[s]&&i.hasOwnProperty(s)?(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(e)):t.isArray(s,l,n)?i[s]=[e]:i[s]=e}}}return"string"==typeof r?r.length>0&&(i[t.textNodeName]=r):void 0!==r&&(i[t.textNodeName]=r),i}function F2(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function U2(e,t,n,r){if(t){const i=Object.keys(t),o=i.length;for(let a=0;a<o;a++){const o=i[a];r.isArray(o,n+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function V2(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return 0===r||!(1!==r||!e[n]&&"boolean"!=typeof e[n]&&0!==e[n])}const G2={allowBooleanAttributes:!1,unpairedTags:[]};function B2(e,t){t=Object.assign({},G2,t);const n=[];let r=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let o=0;o<e.length;o++)if("<"===e[o]&&"?"===e[o+1]){if(o+=2,o=Y2(e,o),o.err)return o}else{if("<"!==e[o]){if(X2(e[o]))continue;return n4("InvalidChar","char '"+e[o]+"' is not expected.",o4(e,o))}{let a=o;if(o++,"!"===e[o]){o=W2(e,o);continue}{let s=!1;"/"===e[o]&&(s=!0,o++);let l="";for(;o<e.length&&">"!==e[o]&&" "!==e[o]&&"\t"!==e[o]&&"\n"!==e[o]&&"\r"!==e[o];o++)l+=e[o];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),o--),!i4(l)){let t;return t=0===l.trim().length?"Invalid space after '<'.":"Tag '"+l+"' is an invalid name.",n4("InvalidTag",t,o4(e,o))}const u=K2(e,o);if(!1===u)return n4("InvalidAttr","Attributes for '"+l+"' have open quote.",o4(e,o));let c=u.value;if(o=u.index,"/"===c[c.length-1]){const n=o-c.length;c=c.substring(0,c.length-1);const i=e4(c,t);if(!0!==i)return n4(i.err.code,i.err.msg,o4(e,n+i.err.line));r=!0}else if(s){if(!u.tagClosed)return n4("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",o4(e,o));if(c.trim().length>0)return n4("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",o4(e,a));if(0===n.length)return n4("InvalidTag","Closing tag '"+l+"' has not been opened.",o4(e,a));{const t=n.pop();if(l!==t.tagName){let n=o4(e,t.tagStartPos);return n4("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+l+"'.",o4(e,a))}0==n.length&&(i=!0)}}else{const s=e4(c,t);if(!0!==s)return n4(s.err.code,s.err.msg,o4(e,o-c.length+s.err.line));if(!0===i)return n4("InvalidXml","Multiple possible root nodes found.",o4(e,o));-1!==t.unpairedTags.indexOf(l)||n.push({tagName:l,tagStartPos:a}),r=!0}for(o++;o<e.length;o++)if("<"===e[o]){if("!"===e[o+1]){o++,o=W2(e,o);continue}if("?"!==e[o+1])break;if(o=Y2(e,++o),o.err)return o}else if("&"===e[o]){const t=t4(e,o);if(-1==t)return n4("InvalidChar","char '&' is not expected.",o4(e,o));o=t}else if(!0===i&&!X2(e[o]))return n4("InvalidXml","Extra text at the end",o4(e,o));"<"===e[o]&&o--}}}return r?1==n.length?n4("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",o4(e,n[0].tagStartPos)):!(n.length>0)||n4("InvalidXml","Invalid '"+JSON.stringify(n.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):n4("InvalidXml","Start tag expected.",1)}function X2(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function Y2(e,t){const n=t;for(;t<e.length;t++)if("?"==e[t]||" "==e[t]){const r=e.substr(n,t-n);if(t>5&&"xml"===r)return n4("InvalidXml","XML declaration allowed only at the start of the document.",o4(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}continue}return t}function W2(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}const q2='"',H2="'";function K2(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if(e[t]===q2||e[t]===H2)""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const J2=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function e4(e,t){const n=s2(e,J2),r={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return n4("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",a4(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return n4("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",a4(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return n4("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",a4(n[e]));const i=n[e][2];if(!r4(i))return n4("InvalidAttr","Attribute '"+i+"' is an invalid name.",a4(n[e]));if(r.hasOwnProperty(i))return n4("InvalidAttr","Attribute '"+i+"' is repeated.",a4(n[e]));r[i]=1}return!0}function t4(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function n4(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function r4(e){return l2(e)}function i4(e){return l2(e)}function o4(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function a4(e){return e.startIndex+e[1].length}const s4={validate:B2};var l4=new class{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},i2,e)}(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=B2(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new k2(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(e);return this.options.preserveOrder||void 0===r?r:L2(r,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return c2.getMetaDataSymbol()}}({ignoreAttributes:!0,textNodeName:"#text",trimValues:!0,allowBooleanAttributes:!0});function u4(e,t){if(t&&e){var n=function(n){"array"===t.properties[n].type&&e[n]&&!Array.isArray(e[n])&&(e[n]=[e[n]]),"object"===t.properties[n].type&&u4(e[n],t.properties[n]),"array"===t.properties[n].type&&"object"===t.properties[n].items.type&&(Array.isArray(e[n])?e[n].forEach(function(e){return u4(e,t.properties[n].items)}):u4(e[n],t.properties[n].items))};for(var r in t.properties)n(r)}}function c4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.match(/```(?:\w+\n|\n)([\s\S]*?)```/),i=r?r[1].trim():e.trim();try{switch(t){case"xml":var o=s4.validate(i);if(!0!==o)throw new Error("Model response is not valid XML: ".concat(o.err.msg));var a=l4.parse(i);return a.root&&(a=a.root),n.schema&&u4(a,n.schema),a;case"json":return JSON.parse(i);default:throw new Error("Unsupported format specified: ".concat(t))}}catch(e){if("xml"===t){if(e.message.startsWith("Model response is not valid XML:"))throw e;throw new Error("Model response is not valid XML.")}if("json"===t)throw new Error("Model response is not valid JSON.");throw new Error("Failed to parse response as ".concat(t,": ").concat(e.message))}}function d4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d4(Object(n),!0).forEach(function(t){h4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h4(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p4(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p4(e){return p4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p4(e)}function m4(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function g4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="  ".repeat(t);if(Array.isArray(e))return e.map(function(e){return null!==e&&"object"===p4(e)?"".concat(n,"<item>\n").concat(g4(e,t+1)).concat(n,"</item>\n"):"".concat(n,"<item>").concat(m4(e),"</item>\n")}).join("");if(null!==e&&"object"===p4(e)){for(var r="",i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];null!==s&&"object"===p4(s)?r+="".concat(n,"<").concat(a,">\n").concat(g4(s,t+1)).concat(n,"</").concat(a,">\n"):r+="".concat(n,"<").concat(a,">").concat(m4(s),"</").concat(a,">\n")}return r}return"".concat(n,"<value>").concat(m4(e),"</value>\n")}function v4(e,t){var n=y4(e);return"xml"===t?g4(n).trim():JSON.stringify(n,null,2)}function y4(e){if(!e||"object"!==p4(e))return null;var t=Array.isArray(e.examples)?e.examples[0]:void 0,n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(void 0!==o)return o}}(e.example,t,e.default);if(void 0!==n)return n;if(void 0!==e.const)return e.const;if(Array.isArray(e.enum)&&e.enum.length)return e.enum[0];var r=Array.isArray(e.anyOf)?e.anyOf[0]:Array.isArray(e.oneOf)?e.oneOf[0]:void 0;if(r)return y4(r);var i=function(e){var t;return Array.isArray(e)?null!==(t=e.find(function(e){return"null"!==e}))&&void 0!==t?t:e[0]:e}(e.type);switch(i){case"object":for(var o={},a=e.properties||{},s=0,l=Object.keys(a);s<l.length;s++){var u=l[s];o[u]=y4(a[u])}return e.additionalProperties&&"object"===p4(e.additionalProperties)&&(o.additionalProperty=y4(e.additionalProperties)),o;case"array":var c;return[y4(null!==(c=e.items)&&void 0!==c?c:{})];case"string":switch(e.format){case"date-time":return new Date(0).toISOString();case"date":return"1970-01-01";case"time":return"00:00:00";case"email":return"user@example.com";case"uri":case"url":return"https://example.com";case"uuid":return"00000000-0000-0000-0000-000000000000";default:return e.title||e.description||"string"}case"integer":case"number":return 0;case"boolean":return!1;case"null":return null;default:return e.properties||e.additionalProperties?y4(f4(f4({},e),{},{type:"object"})):e.items?y4(f4(f4({},e),{},{type:"array"})):null}}function b4(e){return b4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b4(e)}var O4=["startMessageId","endMessageId"];function w4(e){return function(e){if(Array.isArray(e))return x4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x4(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S4(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return k4(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(k4(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,k4(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,k4(d,"constructor",u),k4(u,"constructor",l),l.displayName="GeneratorFunction",k4(u,i,"GeneratorFunction"),k4(d),k4(d,i,"Generator"),k4(d,r,function(){return this}),k4(d,"toString",function(){return"[object Generator]"}),(S4=function(){return{w:o,m:f}})()}function k4(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}k4=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){k4(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},k4(e,t,n,r)}function _4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_4(Object(n),!0).forEach(function(t){E4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E4(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b4(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $4(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T4(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function C4(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){T4(o,r,i,a,s,"next",e)}function s(e){T4(o,r,i,a,s,"throw",e)}a(void 0)})}}function j4(e){return N4.apply(this,arguments)}function N4(){return N4=C4(S4().m(function e(t){var n,r,i,o,a,s,l,u,c,d,f,h=arguments;return S4().w(function(e){for(;;)switch(e.n){case 0:if(i=(r=h.length>1&&void 0!==h[1]?h[1]:{}).startMessageId,o=r.endMessageId,a=$4(r,O4),s=SillyTavern.getContext(),l=s.extensionSettings,u=s.CONNECT_API_MAP,c=null===(n=l.connectionManager)||void 0===n||null===(n=n.profiles)||void 0===n?void 0:n.find(function(e){return e.id===t})){e.n=1;break}throw new Error("Connection profile with ID ".concat(t," not found. Please configure it in Flowchart settings."));case 1:return d=null!=c&&c.api?u[c.api]:null,e.n=2,yr(null==d?void 0:d.selected,P4({targetCharacterId:z.this_chid,messageIndexesBetween:{start:i,end:o},presetName:null==c?void 0:c.preset,contextName:null==c?void 0:c.context,instructName:null==c?void 0:c.instruct,syspromptName:null==c?void 0:c.sysprompt,includeNames:!!X.selected_group},a));case 2:return f=e.v,e.a(2,f.result)}},e)})),N4.apply(this,arguments)}var A4=new class{requestMap;constructor(){this.requestMap=new Map}async abortRequest(e){const t=this.requestMap.get(e);if(t){if(t.abortController)try{t.abortController.abort()}catch(e){}t.options?.onFinish&&await t.options.onFinish(e),this.requestMap.delete(e)}}async generateRequest(e,t){const n=SillyTavern.getContext(),r=n.uuidv4(),i=e?.custom?.stream??!1;if(this.requestMap.set(r,{abortController:t?.abortController,isStream:i,options:t}),i)try{const i=await n.ConnectionManagerRequestService.sendRequest(e.profileId,e.prompt,e.maxTokens,e.custom,e.overridePayload);let o;t?.onStart&&await t.onStart(r);for await(const e of i())o=e,t?.onEntry&&await t.onEntry(r,e);t?.onFinish&&await t.onFinish(r,o)}catch(e){t?.onFinish&&await t.onFinish(r,void 0,e)}finally{this.requestMap.delete(r)}else try{t?.onStart&&await t.onStart(r);const i=await n.ConnectionManagerRequestService.sendRequest(e.profileId,e.prompt,e.maxTokens,e.custom,e.overridePayload);this.requestMap.get(r)&&(t?.onEntry&&await t.onEntry(r,i),t?.onFinish&&await t.onFinish(r,i))}catch(e){t?.onFinish&&await t.onFinish(r,void 0,e)}finally{this.requestMap.delete(r)}return r}getActiveRequest(e){return this.requestMap.get(e)?.abortController}getAllActiveRequests(){const e=new Map;for(const[t,n]of this.requestMap)e.set(t,n.abortController);return e}};function I4(e,t,n,r,i,o){return M4.apply(this,arguments)}function M4(){return M4=C4(S4().m(function e(t,n,r,i,o,a){var s,l;return S4().w(function(e){for(;;)if(0===e.n)return s=!i.json_schema&&!!o,l="",e.a(2,new Promise(function(e,u){var c=new AbortController;A4.generateRequest({profileId:t,prompt:n,maxTokens:r,custom:{stream:s,signal:null!=a?a:c.signal},overridePayload:i},{abortController:c,onEntry:s?function(){var e=C4(S4().m(function e(t,n){var r;return S4().w(function(e){for(;;)switch(e.n){case 0:if(!(r=n.text)||!o){e.n=2;break}return e.n=1,o.onStream({chunk:r.slice(l.length),fullText:r});case 1:l=r;case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}():void 0,onFinish:function(t,n,r){return r?u(r):void 0===n&&void 0===r?s?e({content:l}):u(new DOMException("Request aborted by user","AbortError")):(n||u(new Error("No data received from LLM")),r?u(r):e(o?{content:l}:n))}})}))},e)})),M4.apply(this,arguments)}function D4(e,t,n,r,i){return R4.apply(this,arguments)}function R4(){return(R4=C4(S4().m(function e(t,n,r,i,o){var a;return S4().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,I4(t,n,r,{},i?{onStream:i}:void 0,o);case 1:if(null!=(a=e.v)&&a.content){e.n=2;break}throw new Error("LLM request failed to return content.");case 2:return e.a(2,a.content)}},e)}))).apply(this,arguments)}function Q4(e,t,n,r,i,o,a){return z4.apply(this,arguments)}function z4(){return z4=C4(S4().m(function e(t,n,r,i,o,a,s){var l,u,c,d,f,h,p,m,g,v,y,b,O;return S4().w(function(e){for(;;)switch(e.n){case 0:if(l=Lr.getSettings(),o!==Er.NATIVE){e.n=3;break}return e.n=1,I4(t,n,a,{json_schema:{name:i,strict:!0,value:r2.toJSONSchema(r)}},void 0,s);case 1:if(u=e.v,null!==(d=u)&&void 0!==d&&d.content){e.n=2;break}throw new Error("Structured request for ".concat(i," failed to return content."));case 2:c=u.content,e.n=7;break;case 3:if(h=o,p=r2.toJSONSchema(r),m=v4(p,h),g=JSON.stringify(p,null,2),v=l.prompts[o]){e.n=4;break}throw new Error('Prompt template for mode "'.concat(o,'" not found.'));case 4:return y={example_response:m},"json"===h&&(y.schema=g),b=nW().compile(v,{noEscape:!0,strict:!0})(y),e.n=5,I4(t,[].concat(w4(n),[{role:"user",content:b}]),a,{},void 0,s);case 5:if(u=e.v,null!==(f=u)&&void 0!==f&&f.content){e.n=6;break}throw new Error("Structured request for ".concat(i," failed to return content."));case 6:c=c4(u.content,h,{schema:p});case 7:if((O=r.safeParse(c)).success){e.n=8;break}throw console.error("Zod validation failed:",O.error.issues),console.error("Raw content parsed:",c),new Error("Model response failed schema validation for ".concat(i,"."));case 8:return e.a(2,O.data)}},e)})),z4.apply(this,arguments)}function L4(e){return L4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L4(e)}function Z4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F4(r.key),r)}}function F4(e){var t=function(e,t){if("object"!=L4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L4(t)?t:t+""}var U4=function(){return function(e,t,n){return t&&Z4(e.prototype,t),n&&Z4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=F4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"events",{})},[{key:"on",value:function(e,t){(this.events[e]=this.events[e]||[]).push(t)}},{key:"off",value:function(e,t){var n=this.events[e];n&&(this.events[e]=n.filter(function(e){return e!==t}))}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.events[e];i&&i.forEach(function(e){return e.apply(void 0,n)})}}])}(),V4=new U4;function G4(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(H4(e)+" is not iterable")}function B4(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return X4(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(X4(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,X4(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,X4(d,"constructor",u),X4(u,"constructor",l),l.displayName="GeneratorFunction",X4(u,i,"GeneratorFunction"),X4(d),X4(d,i,"Generator"),X4(d,r,function(){return this}),X4(d,"toString",function(){return"[object Generator]"}),(B4=function(){return{w:o,m:f}})()}function X4(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}X4=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){X4(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},X4(e,t,n,r)}function Y4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y4(Object(n),!0).forEach(function(t){q4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function q4(e,t,n){return(t=o3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H4(e){return H4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H4(e)}function K4(e){return function(e){if(Array.isArray(e))return t3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||e3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J4(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=e3(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function e3(e,t){if(e){if("string"==typeof e)return t3(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t3(e,t):void 0}}function t3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n3(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function r3(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){n3(o,r,i,a,s,"next",e)}function s(e){n3(o,r,i,a,s,"throw",e)}a(void 0)})}}function i3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o3(r.key),r)}}function o3(e){var t=function(e,t){if("object"!=H4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H4(t)?t:t+""}var a3=function(){return function(e,t,n){return t&&i3(e.prototype,t),n&&i3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeExecutors=t},[{key:"executeFlow",value:(t=r3(B4().m(function e(t,n,r,i,o,a){var s,l,u,c,d,f,h,p,m,g,v,y,b,O,w,x,S,k,_,P,E,$,T,C,j,N,A,I,M,D=this,R=arguments;return B4().w(function(e){for(;;)switch(e.p=e.n){case 0:if(s=R.length>6&&void 0!==R[6]?R[6]:{},l=R.length>7&&void 0!==R[7]?R[7]:[],console.log("[Flowchart] Executing flow (runId: ".concat(t,", depth: ").concat(o,") with args"),r),u={},c=new Map,d={executedNodes:[]},f=void 0,h=n.nodes,p=n.edges,s.endNodeId){for(m=new Set,g=[s.endNodeId],m.add(s.endNodeId),v=new Map,n.nodes.forEach(function(e){return v.set(e.id,[])}),n.edges.forEach(function(e){var t;null===(t=v.get(e.target))||void 0===t||t.push(e.source)});g.length>0;){y=g.shift(),b=v.get(y)||[],O=J4(b);try{for(O.s();!(w=O.n()).done;)x=w.value,m.has(x)||(m.add(x),g.push(x))}catch(e){O.e(e)}finally{O.f()}}h=n.nodes.filter(function(e){return m.has(e.id)}),p=n.edges.filter(function(e){return m.has(e.source)&&m.has(e.target)})}S={},k=new Map(h.map(function(e){return[e.id,[]]})),_=new Map(h.map(function(e){return[e.id,e]})),P=J4(h);try{for(P.s();!(E=P.n()).done;)$=E.value,S[$.id]=0}catch(e){P.e(e)}finally{P.f()}T=J4(p);try{for(T.s();!(C=T.n()).done;)j=C.value,_.has(j.source)&&_.has(j.target)&&(S[j.target]++,k.get(j.source).push(j))}catch(e){T.e(e)}finally{T.f()}if(N=[],!s.startNodeId){e.n=2;break}if(_.get(s.startNodeId)){e.n=1;break}throw new Error('Start node with ID "'.concat(s.startNodeId,'" not found.'));case 1:N.push(s.startNodeId),e.n=3;break;case 2:N.push.apply(N,K4(h.filter(function(e){return 0===S[e.id]}).map(function(e){return e.id})));case 3:e.p=3,A=B4().m(function e(){var h,m,g,v,y,b,O,w,x,P,E,$,T,C,j,A,I,M,R,Q,z;return B4().w(function(e){for(;;)switch(e.p=e.n){case 0:if(null==a||!a.aborted){e.n=1;break}throw new DOMException("Flow execution was aborted.","AbortError");case 1:if(m=N.shift(),g=_.get(m),null==(v=SE.nodeDefinitionMap.get(g.type))||!v.isVisual){e.n=2;break}return e.a(2,0);case 2:if(null===(h=g.data)||void 0===h||!h.disabled){e.n=3;break}return e.a(2,0);case 3:return y=!p.some(function(e){return e.target===m}),b=m===s.startNodeId,O=y||b?r:{},w=D.getNodeInputs(g,p,u,O,_,s.startNodeId),V4.emit("node:run:start",{runId:t,nodeId:m}),x={status:"completed",input:w,output:{},error:void 0},e.p=4,e.n=5,D.executeNode(g,w,{flow:n,dependencies:i,executionVariables:c,depth:o,signal:a,executionPath:l});case 5:if((P=e.v)!==rC){e.n=6;break}return console.log("[Flowchart] Flow terminated gracefully by EndNode ".concat(g.id,".")),x.output={},f={},d.executedNodes.push({nodeId:g.id,type:g.type,input:w,output:"[TERMINATED]"}),d.lastOutput=f,e.a(2,{v:d});case 6:E=(null==v?void 0:v.handles.inputs.some(function(e){return"main"===e.id}))&&(null==v?void 0:v.handles.outputs.some(function(e){return"main"===e.id})),$=P,E&&(T=w.main,$="object"===H4(P)&&null!==P?W4(W4({},P),{},{main:T}):W4(W4({},void 0!==P?{result:P}:{}),{},{main:T})),x.output=$,e.n=8;break;case 7:e.p=7,z=e.v,x.status="error",x.error=z.message,x.output=null;case 8:if(u[m]=x.output,f=x.output,d.executedNodes.push({nodeId:g.id,type:g.type,input:w,output:x.output}),V4.emit("node:run:end",{runId:t,nodeId:g.id,report:x}),"error"!==x.status){e.n=9;break}throw(C=new Error(x.error)).nodeId=g.id,C;case 9:if(m!==s.endNodeId){e.n=10;break}return console.log("[Flowchart] Flow execution stopped at designated node ".concat(m,".")),e.a(2,1);case 10:j=k.get(m)||[],A=j,null!=v&&v.determineEdgesToFollow&&(A=v.determineEdgesToFollow(x.output,j)),I=J4(A);try{for(I.s();!(M=I.n()).done;)R=M.value,Q=R.target,void 0!==S[Q]&&(S[Q]--,0===S[Q]&&N.push(Q))}catch(e){I.e(e)}finally{I.f()}case 11:return e.a(2)}},e,null,[[4,7]])});case 4:if(!(N.length>0)){e.n=9;break}return e.d(G4(A()),5);case 5:if(0!==(I=e.v)){e.n=6;break}return e.a(3,4);case 6:if(1!==I){e.n=7;break}return e.a(3,9);case 7:if(!I){e.n=8;break}return e.a(2,I.v);case 8:e.n=4;break;case 9:e.n=11;break;case 10:e.p=10,(M=e.v)instanceof DOMException&&"AbortError"===M.name||console.error("[Flowchart] Flow execution aborted due to an error.",M),d.error={nodeId:M.nodeId||"unknown",message:M.message||String(M)};case 11:return d.lastOutput=f,console.log("[Flowchart] Flow execution finished."),e.a(2,d)}},e,null,[[3,10]])})),function(e,n,r,i,o,a){return t.apply(this,arguments)})},{key:"getNodeInputs",value:function(e,t,n,r,i,o){var a=W4({},r);if(e.id===o)return a;var s,l=t.filter(function(t){return t.target===e.id}),u=J4(l);try{for(u.s();!(s=u.n()).done;){var c,d=s.value;if(!Object.prototype.hasOwnProperty.call(n,d.source)){var f,h,p=i.get(d.source),m=null!==(f=null==p?void 0:p.type)&&void 0!==f?f:"unknown";throw new Error('Required input for handle "'.concat(null!==(h=d.targetHandle)&&void 0!==h?h:"default",'" is missing. Its source node "').concat(m," (").concat(d.source,')" was not executed.'))}var g=n[d.source],v=i.get(d.source);if(void 0!==g){var y,b=null!==(c=d.targetHandle)&&void 0!==c?c:"main",O=void 0;if("ifNode"===(null==v?void 0:v.type))O=g.main;else O=g[null!==(y=d.sourceHandle)&&void 0!==y?y:"result"];a[b]=O}}}catch(e){u.e(e)}finally{u.f()}return a}},{key:"executeNode",value:(e=r3(B4().m(function e(t,n,r){var i,o,a,s;return B4().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=this.nodeExecutors.get(t.type)){e.n=1;break}throw new Error('No executor found for node type "'.concat(t.type,"\". Make sure it's registered correctly."));case 1:return e.p=1,e.n=2,i(t,n,r);case 2:return e.a(2,e.v);case 3:throw e.p=3,s=e.v,o=s instanceof Error?s.message:String(s),(a=new Error("Execution failed at node ".concat(t.id," (").concat(t.type,"): ").concat(o))).nodeId=t.id,a;case 4:return e.a(2)}},e,this,[[1,3]])})),function(t,n,r){return e.apply(this,arguments)})}]);var e,t}();function s3(e){return function(e){if(Array.isArray(e))return m3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l3(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return u3(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(u3(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,u3(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,u3(d,"constructor",u),u3(u,"constructor",l),l.displayName="GeneratorFunction",u3(u,i,"GeneratorFunction"),u3(d),u3(d,i,"Generator"),u3(d,r,function(){return this}),u3(d,"toString",function(){return"[object Generator]"}),(l3=function(){return{w:o,m:f}})()}function u3(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}u3=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){u3(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},u3(e,t,n,r)}function c3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||p3(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d3(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function f3(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){d3(o,r,i,a,s,"next",e)}function s(e){d3(o,r,i,a,s,"throw",e)}a(void 0)})}}function h3(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p3(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p3(e,t){if(e){if("string"==typeof e)return m3(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m3(e,t):void 0}}function m3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w3(r.key),r)}}function v3(e){return v3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v3(e)}function y3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y3(Object(n),!0).forEach(function(t){O3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O3(e,t,n){return(t=w3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w3(e){var t=function(e,t){if("object"!=v3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v3(t)?t:t+""}var x3="flowchart_execution_history",S3=["name","description","first_mes","personality","scenario","tags","avatar"];function k3(e){if("string"==typeof e&&e.length>2048)return e.substring(0,2048)+"... [truncated]";if(Array.isArray(e))return e.map(k3);if("object"===v3(e)&&null!==e){if("name"in e&&"spec"in e&&"spec_version"in e){for(var t={},n=0,r=S3;n<r.length;n++){var i=r[n];i in e&&(t[i]=e[i])}return t["..."]="[character object sanitized]",t}var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=k3(e[a]));return o}return e}function _3(e){return b3(b3({},e),{},{executedNodes:e.executedNodes.map(function(e){return b3(b3({},e),{},{input:k3(e.input),output:k3(e.output)})})})}function P3(e){try{var t=e.map(function(e){return b3(b3({},e),{},{timestamp:e.timestamp.toISOString()})});localStorage.setItem(x3,IE(t,0))}catch(e){console.error("[Flowchart] Failed to save execution history:",e),e instanceof DOMException&&"QuotaExceededError"===e.name&&Br("error","Flowchart: Could not save execution history. Storage quota exceeded.","execution")}}var E3=function(){try{var e=localStorage.getItem(x3);return e?JSON.parse(e).map(function(e){return b3(b3({},e),{},{timestamp:new Date(e.timestamp)})}):[]}catch(e){return console.error("[Flowchart] Failed to load execution history:",e),[]}}();var $3=function(){return function(e,t,n){return t&&g3(e.prototype,t),n&&g3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O3(this,"registeredListeners",new Map),O3(this,"registeredCommands",[]),O3(this,"isListeningToEvents",!1),O3(this,"abortController",null),O3(this,"isExecuting",!1),O3(this,"flowQueue",[]),this.lowLevelRunner=new a3(SE.nodeExecutors),this.dependencies=this.getDependencies(),this.setupEventListeners()},[{key:"getDependencies",value:function(){var e=this,t=SillyTavern.getContext().Popup;return{getBaseMessagesForProfile:j4,makeSimpleRequest:D4,makeStructuredRequest:Q4,getSillyTavernContext:function(){return SillyTavern.getContext()},createCharacter:mr,saveCharacter:function(e){return async function(e,t){const n=SillyTavern.getContext();if(!e.avatar)throw new Error("`data.avatar` (character filename) is required to save character attributes.");delete e?.json_data,delete e?.data?.json_data;const r=n.getRequestHeaders(),i=await fetch("/api/characters/merge-attributes",{method:"POST",headers:r,body:JSON.stringify(e),cache:"no-cache"});if(!i.ok){const e=await i.json().catch(()=>({message:i.statusText}));throw new pr(e.message||`Request failed with status ${i.status}`,i)}t&&await n.getCharacters()}(e,!0)},st_createNewWorldInfo:function(e){return async function(e,{interactive:t=!1}={}){return await(0,L.createNewWorldInfo)(e,{interactive:t})}(e,{interactive:!0})},applyWorldInfoEntry:Or,getWorldInfos:br,sendChatMessage:function(e,t,n){return async function(e,t,n,r,i){if("user"===t){await(0,z.sendMessageAsUser)(e,null,i,!1,n??z.name1,F.user_avatar??r);const t=SillyTavern.getContext();t.eventSource.emit(K.USER_MESSAGE_RENDERED,t.chat.length-1)}else if("assistant"===t){const t=n??z.name2,o=r??SillyTavern.getContext().characters[z.this_chid].avatar;await(0,Z.sendMessageAs)({name:t,at:i,avatar:o},e)}else await(0,Z.sendNarratorMessage)({name:n,at:i},e)}(e,t,n)},deleteMessage:function(e){return SillyTavern.getContext().deleteMessage(e)},hideChatMessageRange:Zr,saveChat:function(){return SillyTavern.getContext().saveChat()},st_updateMessageBlock:function(e,t,n){return function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).rerenderMessage,r=void 0===n||n;(0,z.updateMessageBlock)(e,t,{rerenderMessage:r})}(e,t,n)},st_runRegexScript:function(e,t){return function(e,t,{characterOverride:n=null}={}){return(0,Y.runRegexScript)(e,t,{characterOverride:n})}(e,t)},st_setLocalVariable:function(e,t,n){return function(e,t,n){(0,dr.setLocalVariable)(e,t,n)}(e,t,n)},st_getLocalVariable:function(e,t){return function(e,t){return(0,dr.getLocalVariable)(e,t)}(e,t)},st_setGlobalVariable:function(e,t){return function(e,t){(0,dr.setGlobalVariable)(e,t)}(e,t)},st_getGlobalVariable:function(e){return function(e){return(0,dr.getGlobalVariable)(e)}(e)},executeSlashCommandsWithOptions:function(e){return SillyTavern.getContext().executeSlashCommandsWithOptions(e)},executeSubFlow:function(t,n,r,i){return e.executeFlow(t,n,r,{},i)},getChatInputValue:function(){var e=document.getElementById("send_textarea");return e?e.value:""},updateChatInputValue:function(e){var t=document.getElementById("send_textarea");t&&(t.value=e,t.dispatchEvent(new Event("input",{bubbles:!0})))},promptUser:function(e,n){return t.show.input("Question",e,n)},confirmUser:function(e){return t.show.confirm("Confirm",e)}}}},{key:"setupEventListeners",value:function(){this.isListeningToEvents||(V4.on("flow:run:start",function(e){var t=e.runId;return NE.getState().startRun(t)}),V4.on("node:run:start",function(e){var t=e.runId,n=e.nodeId;return NE.getState().setActiveNode(t,n)}),V4.on("node:run:end",function(e){var t=e.runId,n=e.nodeId,r=e.report;return NE.getState().addNodeReport(t,n,r)}),V4.on("flow:run:end",function(e){var t=e.runId,n=e.status,r=e.executedNodes;return NE.getState().endRun(t,n,r)}),this.isListeningToEvents=!0)}},{key:"reinitialize",value:function(){var e,t=this,n=SillyTavern.getContext(),r=n.eventSource,i=n.SlashCommandParser,o=n.SlashCommand,a=n.SlashCommandArgument,s=n.SlashCommandNamedArgument,l=n.ARGUMENT_TYPE,u=h3(this.registeredListeners.entries());try{for(u.s();!(e=u.n()).done;){var c=c3(e.value,2),d=c[0],f=c[1];r.removeListener(d,f)}}catch(e){u.e(e)}finally{u.f()}this.registeredListeners.clear(),this.registeredCommands.forEach(function(e){return delete i.commands[e]}),this.registeredCommands=[];var h=Lr.getSettings();if(h.enabled){var p,m={},g=h3(Object.values(h.flows).filter(function(e){return e.enabled}));try{var v=function(){var e=p.value,n=e.id,r=e.name,a=e.flow,u=e.allowDangerousExecution,c=n2(a,u,n),d=c.isValid,f=c.errors;if(!d)return console.warn('Flow "'.concat(r,'" (').concat(n,") is invalid and will not be run. Errors:"),f),1;var h,g=h3(a.nodes);try{var v=function(){var e,a=h.value;if(null!==(e=a.data)&&void 0!==e&&e.disabled)return 0;if("triggerNode"===a.type&&a.data.selectedEventType){var u=a.data.selectedEventType;m[u]||(m[u]=[]),m[u].push({flowId:n,nodeId:a.id})}else if("slashCommandNode"===a.type){var c=a.data,d="flow-".concat(c.commandName);if(["run"].includes(c.commandName.toLowerCase()))return console.warn('[Flowchart] Slash command "'.concat(d,'" uses a reserved name and will not be registered.')),0;if(i.commands[d])return console.warn('[Flowchart] Slash command "'.concat(d,'" already exists in SillyTavern and will not be registered.')),0;if(t.registeredCommands.includes(d))return console.warn('[Flowchart] Slash command "'.concat(d,'" is already registered. Skipping from ').concat(r,".")),0;var f=c.arguments.map(function(e){return s.fromProps({name:e.name,description:e.description,typeList:[l[e.type.toUpperCase()]],isRequired:e.isRequired,defaultValue:e.defaultValue})}),p=o.fromProps({name:d,helpString:c.helpText,unnamedArgumentList:[],namedArgumentList:f,callback:function(e,r){return t.executeFlowFromSlashCommand(n,a.id,e,r)}});i.addCommandObject(p),t.registeredCommands.push(d)}};for(g.s();!(h=g.n()).done;)v()}catch(e){g.e(e)}finally{g.f()}};for(g.s();!(p=g.n()).done;)v()}catch(e){g.e(e)}finally{g.f()}var y,b=o.fromProps({name:fr,helpString:"Manually runs a Flowchart flow by its name.",unnamedArgumentList:[a.fromProps({description:"The name of the flow to run.",isRequired:!0}),a.fromProps({description:"An optional JSON string for initial parameters."})],callback:(y=f3(l3().m(function e(n,r){var i,o,a,s,l,u,c,d,f,h;return l3().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=Array.isArray(r)?r:[r],o=c3(i,2),a=o[0],s=o[1],l=Lr.getSettings(),u=Object.values(l.flows).find(function(e){return e.name===a})){e.n=1;break}return e.a(2,'Error: Flow with name "'.concat(a,'" not found.'));case 1:if(c=u.id,d={},!s){e.n=4;break}e.p=2,d=JSON.parse(s),e.n=4;break;case 3:return e.p=3,e.v,e.a(2,'Error: Invalid JSON parameters provided for flow "'.concat(a,'".'));case 4:return e.n=5,t.runFlowManually(c,d);case 5:if(null==(f=e.v)||!f.error){e.n=6;break}return e.a(2,"Flow Error: ".concat(f.error.message));case 6:if(null!=(h=null==f?void 0:f.lastOutput)){e.n=7;break}return e.a(2,'Flow "'.concat(a,'" executed successfully.'));case 7:return e.a(2,"object"===v3(h)?IE(h):String(h))}},e,null,[[2,3]])})),function(e,t){return y.apply(this,arguments)})});i.addCommandObject(b),this.registeredCommands.push(fr);var O=o.fromProps({name:hr,helpString:"Stops the currently running Flowchart flow and clears the queue.",unnamedArgumentList:[],callback:function(){return t.abortAllRuns()}});i.addCommandObject(O),this.registeredCommands.push(hr);var w=function(e){var n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o,a=h3(m[e]);try{for(a.s();!(o=a.n()).done;){var s=o.value;t.executeFlowFromEvent(s.flowId,s.nodeId,r)}}catch(e){a.e(e)}finally{a.f()}};r.on(e,n),t.registeredListeners.set(e,n)};for(var x in m)w(x)}}},{key:"_processQueue",value:(s=f3(l3().m(function e(){var t,n,r,i,o;return l3().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isExecuting&&0!==this.flowQueue.length){e.n=1;break}return e.a(2);case 1:return this.isExecuting=!0,t=this.flowQueue.shift(),n=t.flowId,r=t.initialInput,i=t.options,e.p=2,e.n=3,this._executeFlowInternal(n,r,0,i);case 3:e.n=5;break;case 4:e.p=4,o=e.v,console.error("[Flowchart] Critical error during queued flow execution:",o);case 5:return e.p=5,this.isExecuting=!1,this._processQueue(),e.f(5);case 6:return e.a(2)}},e,this,[[2,4,5,6]])})),function(){return s.apply(this,arguments)})},{key:"executeFlow",value:(a=f3(l3().m(function e(t,n){var r,i,o,a,s=arguments;return l3().w(function(e){for(;;)switch(e.n){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:0,i=s.length>3&&void 0!==s[3]?s[3]:{},o=s.length>4&&void 0!==s[4]?s[4]:[],a=Lr.getSettings().flows.find(function(e){return e.id===t})){e.n=1;break}throw new Error("Flow with id ".concat(t," not found."));case 1:if(!(r>10)){e.n=2;break}throw new Error("Flow execution depth limit exceeded (10). Possible infinite recursion.");case 2:if(0!==r){e.n=3;break}return this.flowQueue.push({flowId:t,initialInput:n,options:i}),this.isExecuting?Br("info",'Flowchart: Another flow is running. "'.concat(a.name,'" has been queued.'),"execution"):this._processQueue(),e.a(2,{executedNodes:[],lastOutput:void 0});case 3:return e.a(2,this._executeFlowInternal(t,n,r,i,o))}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"_executeFlowInternal",value:(o=f3(l3().m(function e(t,n,r){var i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,O,w,x=arguments;return l3().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=x.length>3&&void 0!==x[3]?x[3]:{},o=x.length>4&&void 0!==x[4]?x[4]:[],a=Lr.getSettings().flows.find(function(e){return e.id===t})){e.n=1;break}return s="Flow with id ".concat(t," not found."),console.error("[Flowchart] ".concat(s)),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:s}});case 1:if(!o.includes(t)){e.n=2;break}return l=[].concat(s3(o),[t]).map(function(e){var t;return(null===(t=Lr.getSettings().flows.find(function(t){return t.id===e}))||void 0===t?void 0:t.name)||e}),Br("error",u="Circular sub-flow execution detected: ".concat(l.join(" -> ")),"execution"),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:u}});case 2:if(a.enabled||!(r>0)){e.n=3;break}return Br("error",c='Flow "'.concat(a.name,'" is disabled and cannot be run as a sub-flow.'),"execution"),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:c}});case 3:if(d=n2(a.flow,a.allowDangerousExecution,t),f=d.isValid,h=d.errors,f){e.n=4;break}return Br("error",p='Flow "'.concat(a.name,'" is invalid and cannot be run. Errors: ').concat(h.join(", ")),"execution"),console.error("[Flowchart] ".concat(p)),e.a(2,{executedNodes:[],error:{nodeId:"N/A",message:"Validation failed: ".concat(h[0])}});case 4:return m=a.flow,g=[].concat(s3(o),[t]),0===r&&(this.abortController=new AbortController),e.p=5,b=oT(),0===r&&V4.emit("flow:run:start",{runId:b}),e.n=6,this.lowLevelRunner.executeFlow(b,m,n,this.dependencies,r,null===(y=this.abortController)||void 0===y?void 0:y.signal,i,g);case 6:v=e.v,0===r&&(v.error?(v.error.message.includes("aborted")?Br("info",'Flow "'.concat(a.name,'" was stopped.'),"execution"):Br("error",'Flow "'.concat(a.name,'" failed: ').concat(v.error.message),"execution"),V4.emit("flow:run:end",{runId:b,status:"error",executedNodes:v.executedNodes})):V4.emit("flow:run:end",{runId:b,status:"completed",executedNodes:v.executedNodes}),O=_3(v),E3.unshift(b3(b3({},O),{},{flowId:a.name,timestamp:new Date})),E3.length>50&&E3.pop(),P3(E3)),e.n=8;break;case 7:e.p=7,w=e.v,console.error("[Flowchart] Critical error during flow execution: ".concat(w.message)),v={executedNodes:[],error:{nodeId:"CRITICAL",message:w.message}};case 8:return e.p=8,0===r&&(this.abortController=null),e.f(8);case 9:return e.a(2,v)}},e,this,[[5,7,8,9]])})),function(e,t,n){return o.apply(this,arguments)})},{key:"executeFlowFromEvent",value:(i=f3(l3().m(function e(t,n,r){var i,o,a,s,l,u,c,d;return l3().w(function(e){for(;;)switch(e.n){case 0:if((i=Lr.getSettings().flows.find(function(e){return e.id===t}))&&i.flow){e.n=1;break}return console.error("[Flowchart] Flow with id ".concat(t," not found for event trigger.")),e.a(2);case 1:if(o=i.flow.nodes.find(function(e){return e.id===n})){e.n=2;break}return e.a(2);case 2:if(a=o.data.selectedEventType,!((s=iE[a])&&Object.keys(s).length>0)){e.n=4;break}if(u=Object.fromEntries(Object.keys(s).map(function(e,t){return[e,r[t]]})),c=P_(s),(d=c.safeParse(u)).success){e.n=3;break}return console.error('[Flowchart] Event arguments for "'.concat(a,'" failed validation/coercion:'),d.error),Br("error",'Flow "'.concat(i.name,'" could not start due to invalid event data.'),"execution"),e.a(2);case 3:l=d.data,e.n=5;break;case 4:l={allArgs:r},r.forEach(function(e,t){l["arg".concat(t)]=e});case 5:return e.a(2,this.executeFlow(t,l,0))}},e,this)})),function(e,t,n){return i.apply(this,arguments)})},{key:"executeFlowFromSlashCommand",value:(r=f3(l3().m(function e(t,n,r,i){var o,a,s,l,u,c,d,f,h,p,m,g,v,y,b;return l3().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=Lr.getSettings().flows.find(function(e){return e.id===t})){e.n=1;break}return e.a(2,'Error: Flow with ID "'.concat(t,'" not found.'));case 1:if(a=o.flow.nodes.find(function(e){return e.id===n}),a&&"slashCommandNode"===a.type){e.n=2;break}return e.a(2,'Error: Could not find the corresponding Slash Command trigger in flow "'.concat(o.name,'".'));case 2:s=a.data,l={},u=h3(s.arguments),e.p=3,u.s();case 4:if((c=u.n()).done){e.n=19;break}if(d=c.value,null!=(f=r[d.name])){e.n=6;break}if(!d.isRequired){e.n=5;break}return e.a(2,'Error: Missing required argument "'.concat(d.name,'".'));case 5:return e.a(3,18);case 6:e.p=6,v=d.type,e.n="number"===v?7:"boolean"===v?9:"list"===v?14:15;break;case 7:if(h=parseFloat(f),!isNaN(h)){e.n=8;break}throw new Error("'".concat(f,"' is not a valid number."));case 8:return l[d.name]=h,e.a(3,16);case 9:if("boolean"!=typeof f){e.n=10;break}l[d.name]=f,e.n=13;break;case 10:if("true"!==(p=String(f).toLowerCase())){e.n=11;break}l[d.name]=!0,e.n=13;break;case 11:if("false"!==p){e.n=12;break}l[d.name]=!1,e.n=13;break;case 12:throw new Error("'".concat(f,"' is not a valid boolean (true/false)."));case 13:return e.a(3,16);case 14:return l[d.name]=String(f).split(",").map(function(e){return e.trim()}),e.a(3,16);case 15:return l[d.name]=String(f),e.a(3,16);case 16:e.n=18;break;case 17:return e.p=17,y=e.v,e.a(2,'Error processing argument "'.concat(d.name,'": ').concat(y.message));case 18:e.n=4;break;case 19:e.n=21;break;case 20:e.p=20,b=e.v,u.e(b);case 21:return e.p=21,u.f(),e.f(21);case 22:return m=b3(b3({},l),{},{unnamed:i||""}),e.n=23,this._executeFlowInternal(t,m,0);case 23:if(null==(g=e.v)||!g.error){e.n=24;break}return e.a(2,"Flow Error: ".concat(g.error.message));case 24:if(void 0!==(null==g?void 0:g.lastOutput)&&null!==(null==g?void 0:g.lastOutput)){e.n=25;break}return e.a(2,"");case 25:if("object"!==v3(g.lastOutput)){e.n=26;break}return e.a(2,IE(g.lastOutput));case 26:return e.a(2,String(g.lastOutput))}},e,this,[[6,17],[3,20,21,22]])})),function(e,t,n,i){return r.apply(this,arguments)})},{key:"runFlowManually",value:(n=f3(l3().m(function e(t,n){var r,i,o;return l3().w(function(e){for(;;)switch(e.n){case 0:if(r=Lr.getSettings(),i=r.flows.find(function(e){return e.id===t})){e.n=1;break}return Br("error",'Flow with ID "'.concat(t,'" not found for manual run.'),"execution"),e.a(2);case 1:if(null!=(o=r.flows.find(function(e){return e.id===t}))&&o.enabled){e.n=2;break}return Br("error",'Flow "'.concat(i.name,'" is disabled and cannot be run.'),"execution"),e.a(2);case 2:return e.a(2,this.executeFlow(t,null!=n?n:{},0))}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"runFlowFromNode",value:(t=f3(l3().m(function e(t,n){var r,i,o;return l3().w(function(e){for(;;)switch(e.n){case 0:if(r=Lr.getSettings(),i=r.flows.find(function(e){return e.id===t})){e.n=1;break}return Br("error",'Flow with ID "'.concat(t,'" not found for manual run.'),"execution"),e.a(2);case 1:if(null!=(o=r.flows.find(function(e){return e.id===t}))&&o.enabled){e.n=2;break}return Br("error",'Flow "'.concat(i.name,'" is disabled and cannot be run.'),"execution"),e.a(2);case 2:return e.a(2,this.executeFlow(t,{},0,{startNodeId:n}))}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"runFlowToNode",value:(e=f3(l3().m(function e(t,n){var r,i,o;return l3().w(function(e){for(;;)switch(e.n){case 0:if(r=Lr.getSettings(),i=r.flows.find(function(e){return e.id===t})){e.n=1;break}return Br("error",'Flow with ID "'.concat(t,'" not found for manual run.'),"execution"),e.a(2);case 1:if(null!=(o=r.flows.find(function(e){return e.id===t}))&&o.enabled){e.n=2;break}return Br("error",'Flow "'.concat(i.name,'" is disabled and cannot be run.'),"execution"),e.a(2);case 2:return e.a(2,this.executeFlow(t,{},0,{endNodeId:n}))}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"abortCurrentRun",value:function(){var e;null===(e=this.abortController)||void 0===e||e.abort()}},{key:"abortAllRuns",value:function(){var e=this.flowQueue.length,t=this.isExecuting&&!!this.abortController&&!this.abortController.signal.aborted;e>0&&(this.flowQueue=[]),t&&this.abortCurrentRun();var n=[];t&&n.push("the current flow"),e>0&&n.push("".concat(e," queued flow").concat(e>1?"s":""));var r=n.length>0?"Flowchart: Stopped ".concat(n.join(" and "),"."):"Flowchart: No flows are currently running or queued.";return Br("info",r,"execution"),r}}]);var e,t,n,r,i,o,a,s}(),T3=new $3;function C3(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=N3(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function j3(e){return function(e){if(Array.isArray(e))return A3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N3(e,t){if(e){if("string"==typeof e)return A3(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A3(e,t):void 0}}function A3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I3=function(e,t){var n=structuredClone(e||{});if(!t)return n;var r=structuredClone(t);return Object.assign(n,r)},M3=function(e,t){var n,r,i=null!==(n=null===(r=e.getSuggestionBlueprints)||void 0===r?void 0:r.call(e,{direction:t}))&&void 0!==n?n:[];return 0===i.length?[void 0]:[void 0].concat(j3(i.map(function(e){return e||void 0})))},D3=function(e,t,n,r,i){var o,a=e.handles[n],s=[],l=function(e,t){if(e.id){var n=s.findIndex(function(t){return t.spec.id===e.id});-1!==n?t&&(s[n]={spec:e,isDynamic:t}):s.push({spec:e,isDynamic:t})}else s.push({spec:e,isDynamic:t})},u=C3(a);try{for(u.s();!(o=u.n()).done;){l(o.value,!1)}}catch(e){u.e(e)}finally{u.f()}if(e.getDynamicHandles){var c,d=C3(e.getDynamicHandles(t,r,i)[n]);try{for(d.s();!(c=d.n()).done;){l(c.value,!0)}}catch(e){d.e(e)}finally{d.f()}}return s},R3=function(e,t){return e&&t?e===t?"exact":mE(e,t)?"convertible":"fallback":"fallback"},Q3=function(e,t){return t.id?"".concat(e," (").concat(t.id,")"):e},z3=function(e){var t=e.matchQuality,n=e.familyMatch,r=e.connectingDataType,i=e.handleDataType;return"exact"===t||r&&i&&r===i?0:n&&"convertible"===t?1:"convertible"===t?2:3},L3=function(e,t){var n=I3(e.initialData,t);return n._version=e.currentVersion,n};function Z3(e){return Z3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z3(e)}function F3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F3(Object(n),!0).forEach(function(t){V3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Z3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z3(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B3(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B3(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var X3=function(e){var t,n=e.edges,r=e.getNodes,i=e.addNode,o=e.duplicateNode,a=e.toggleNodeDisabled,s=e.copySelection,l=e.setNodes,u=e.deleteElements,c=e.screenToFlowPosition,d=e.resume,f=e.baseOnConnect,h=(0,T.useRef)(null),p=(0,T.useRef)(!1),m=(0,T.useRef)(!1),g=G3((0,T.useState)(null),2),v=g[0],y=g[1],b=Wr(null!==(t=null==v?void 0:v.filter.searchTerm)&&void 0!==t?t:"",200),O=(0,T.useCallback)(function(){y(null),h.current=null,m.current=!1},[]),w=(0,T.useCallback)(function(e){p.current=!0,f(e)},[f]),x=(0,T.useCallback)(function(e,t){var i,o="source"===t.handleType||"target"===t.handleType?t.handleType:null;if(!o||!t.nodeId)return h.current=null,void(p.current=!1);var a,s=r(),l=s.find(function(e){return e.id===t.nodeId});if(l&&l.type){var u=SE.nodeDefinitionMap.get(l.type);if(u){var c,d=function(e,t,n,r,i,o){var a;return null===(a=D3(e,t,n,i,o).find(function(e){return e.spec.id===r}))||void 0===a?void 0:a.spec}(u,l,"source"===o?"outputs":"inputs",null!==(c=t.handleId)&&void 0!==c?c:null,s,n);a=null==d?void 0:d.type}}h.current={nodeId:t.nodeId,handleId:null!==(i=t.handleId)&&void 0!==i?i:null,handleKind:o,dataType:a},p.current=!1},[r,n]),S=(0,T.useCallback)(function(){m.current?m.current=!1:O()},[O]),k=(0,T.useCallback)(function(e,t){e.preventDefault(),d();var n=e.target.closest(".flowchart-editor-area");if(n){var i=n.getBoundingClientRect(),c=Lr.getSettings().activeFlow;m.current=!0,h.current=null,y({x:e.clientX-i.left,y:e.clientY-i.top,items:[{kind:"action",label:"Copy",action:function(){l(r().map(function(e){return U3(U3({},e),{},{selected:e.id===t.id})})),setTimeout(function(){s(),Br("info","Node '".concat(t.data.label||t.type,"' copied."),"ui_action")},50),O()}},{kind:"action",label:"Duplicate",action:function(){o(t.id),O()}},{kind:"action",label:"Run From Here",action:function(){T3.runFlowFromNode(c,t.id),O()}},{kind:"action",label:"Run To Here",action:function(){T3.runFlowToNode(c,t.id),O()}},{kind:"action",label:"Delete",action:function(){u({nodes:[t]}),O()}},{kind:"action",label:t.data.disabled?"Enable":"Disable",action:function(){a([t.id]),O()}}],filter:{showSearch:!1,searchTerm:""}})}},[o,u,a,s,l,r,d,O]),_=(0,T.useCallback)(function(e){e.preventDefault(),d();var t=e.target.closest(".flowchart-editor-area");if(t){var n=t.getBoundingClientRect(),r=c({x:e.clientX,y:e.clientY});m.current=!0,h.current=null,y({x:e.clientX-n.left,y:e.clientY-n.top,items:SE.allNodeDefinitions.map(function(e){return{kind:"action",label:e.label,action:function(){!function(e,t){i({type:e,position:{x:r.x-75,y:r.y-25},data:t})}(e.type,L3(e)),O()}}}),filter:{showSearch:!0,searchTerm:""}})}},[c,i,d,O]),P=(0,T.useCallback)(function(e){var t=h.current;if(!t||p.current)return h.current=null,void(p.current&&(p.current=!1));e.stopPropagation();var o=t.nodeId,a=t.handleId,s=t.handleKind,l=t.dataType,u=r(),f=u.find(function(e){return e.id===o});if(f&&f.type){d();var g=function(e){return j3(e).sort(function(e,t){var n=z3(e)-z3(t);return 0!==n?n:e.handleDataType&&t.handleDataType&&e.handleDataType!==t.handleDataType?e.handleDataType.localeCompare(t.handleDataType):e.label.localeCompare(t.label)})}(function(e){var t=e.startNode,n=e.startHandleId,r=e.handleKind,i=e.nodes,o=e.edges,a=e.connectingDataType,s=[];if("source"===r){var l,u=C3(SE.allNodeDefinitions);try{for(u.s();!(l=u.n()).done;){var c,d=l.value,f=C3(M3(d,"inputs"));try{for(f.s();!(c=f.n()).done;){var h,p,m=c.value,g={id:"temp-target",type:d.type,data:I3(d.initialData,null!==(h=null==m?void 0:m.dataOverrides)&&void 0!==h?h:void 0),position:{x:0,y:0}},v=[].concat(j3(i),[g]),y=C3(D3(d,g,"inputs",v,o));try{for(y.s();!(p=y.n()).done;){var b,O=p.value.spec;if(q1({source:t.id,sourceHandle:n,target:g.id,targetHandle:null!==(b=O.id)&&void 0!==b?b:null},v,o)){var w,x=null!=m&&m.labelSuffix?"".concat(d.label," ").concat(m.labelSuffix):d.label;s.push({nodeType:d.type,label:Q3(x,O),sourceHandle:n,targetHandle:null!==(w=O.id)&&void 0!==w?w:null,handleDataType:O.type,matchQuality:R3(a,O.type),familyMatch:!!a&&!!O.type&&gE(a,O.type),connectingDataType:a,dataOverrides:null!=m&&m.dataOverrides?structuredClone(m.dataOverrides):void 0,blueprintId:null==m?void 0:m.id})}}}catch(e){y.e(e)}finally{y.f()}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){u.e(e)}finally{u.f()}}else{var S,k=C3(SE.allNodeDefinitions);try{for(k.s();!(S=k.n()).done;){var _,P=S.value,E=C3(M3(P,"outputs"));try{for(E.s();!(_=E.n()).done;){var $,T,C=_.value,j={id:"temp-source",type:P.type,data:I3(P.initialData,null!==($=null==C?void 0:C.dataOverrides)&&void 0!==$?$:void 0),position:{x:0,y:0}},N=[].concat(j3(i),[j]),A=C3(D3(P,j,"outputs",N,o));try{for(A.s();!(T=A.n()).done;){var I,M=T.value.spec;if(q1({source:j.id,sourceHandle:null!==(I=M.id)&&void 0!==I?I:null,target:t.id,targetHandle:n},N,o)){var D,R=null!=C&&C.labelSuffix?"".concat(P.label," ").concat(C.labelSuffix):P.label;s.push({nodeType:P.type,label:Q3(R,M),sourceHandle:null!==(D=M.id)&&void 0!==D?D:null,targetHandle:n,handleDataType:M.type,matchQuality:R3(a,M.type),familyMatch:!!a&&!!M.type&&gE(a,M.type),connectingDataType:a,dataOverrides:null!=C&&C.dataOverrides?structuredClone(C.dataOverrides):void 0,blueprintId:null==C?void 0:C.id})}}}catch(e){A.e(e)}finally{A.f()}}}catch(e){E.e(e)}finally{E.f()}}}catch(e){k.e(e)}finally{k.f()}}return s}({startNode:f,startHandleId:a,handleKind:s,nodes:u,edges:n,connectingDataType:l}));if(0!==g.length){var v="touches"in e?e.touches[0].clientX:e.clientX,b="touches"in e?e.touches[0].clientY:e.clientY,x=e.target.closest(".flowchart-editor-area");if(x){var S=x.getBoundingClientRect(),k=c({x:v,y:b}),_=v-S.left,P=b-S.top,E=function(e){var t=SE.nodeDefinitionMap.get(e.nodeType);if(t){O();var n="source"===s?50:-250,r=L3(t,e.dataOverrides),a=i({type:e.nodeType,position:{x:k.x+n,y:k.y},data:r}),l="source"===s?{source:o,sourceHandle:e.sourceHandle,target:a.id,targetHandle:e.targetHandle}:{source:a.id,sourceHandle:e.sourceHandle,target:o,targetHandle:e.targetHandle};h.current=null,setTimeout(function(){return w(l)},10)}};if(1!==g.length){var $=_,T=P;$+220>S.width&&($-=220),T+300>S.height&&(T=S.height-310),m.current=!0,y({x:$,y:T,items:g.map(function(e){return{kind:"connectionSuggestion",label:e.label,action:function(){return E(e)},meta:{nodeType:e.nodeType,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,handleKind:s,targetDataType:e.handleDataType,matchQuality:e.matchQuality,familyMatch:e.familyMatch,connectingDataType:e.connectingDataType,blueprintId:e.blueprintId}}}),filter:{showSearch:!0,searchTerm:""}}),h.current=null}else E(g[0])}else h.current=null}else h.current=null}else h.current=null},[r,n,d,c,i,O,w]),E=(0,T.useMemo)(function(){if(!v)return[];if(!v.filter.showSearch||!b)return v.items;var e=b.toLowerCase();return v.items.filter(function(t){return t.label.toLowerCase().includes(e)})},[v,b]),$=(0,T.useCallback)(function(e){y(function(t){return t?U3(U3({},t),{},{filter:U3(U3({},t.filter),{},{searchTerm:e})}):null})},[]);return{contextMenu:v,filteredMenuOptions:E,onConnect:w,onConnectStart:x,onConnectEnd:P,onNodeContextMenu:k,onPaneContextMenu:_,onPaneClick:S,closeContextMenu:O,updateSearchTerm:$}};function Y3(e){return Y3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y3(e)}function W3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W3(Object(n),!0).forEach(function(t){H3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function H3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Y3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Y3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y3(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K3=function(e){var t=e.invalidNodeIds,n=e.errorsByNodeId,r=W1(),i=r.nodes,o=r.edges,a=r.onNodesChange,s=r.onEdgesChange,l=r.onConnect,u=r.addNode,c=r.duplicateNode,d=r.toggleNodeDisabled,f=r.copySelection,h=r.setNodes,p=r.setEdges,m=md(),g=m.screenToFlowPosition,v=m.getNodes,y=m.deleteElements,b=NE(function(e){return{isVisualizationVisible:e.isVisualizationVisible,nodeReports:e.nodeReports,activeNodeId:e.activeNodeId}}),O=b.isVisualizationVisible,w=b.nodeReports,x=b.activeNodeId,S=W1.temporal.getState(),k=S.pause,_=S.resume;(0,T.useEffect)(function(){var e=function(e){var t,n=!!document.querySelector(".flowchart-data-popup"),r=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||!(null===(t=document.activeElement)||void 0===t||!t.closest(".cm-content"));if(n&&!r&&"Space"===e.code){e.preventDefault();var i=v().filter(function(e){return e.selected});i.length>0&&d(i.map(function(e){return e.id}))}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[v,d]);var P,E=X3({edges:o,getNodes:v,addNode:u,duplicateNode:c,toggleNodeDisabled:d,copySelection:f,setNodes:h,deleteElements:y,screenToFlowPosition:g,resume:_,baseOnConnect:l}),C=E.contextMenu,j=E.filteredMenuOptions,A=E.onConnect,I=E.onConnectStart,M=E.onConnectEnd,D=E.onNodeContextMenu,R=E.onPaneContextMenu,Q=E.onPaneClick,z=E.closeContextMenu,L=E.updateSearchTerm,Z=(0,T.useCallback)(function(e){return q1(e,v(),o)},[v,o]),F=(0,T.useMemo)(function(){return i.map(function(e){var r=[];if(t.has(e.id)&&r.push("flow-node-invalid"),e.id===x)r.push("flow-node-executing");else if(O&&w.has(e.id)){var i=w.get(e.id);r.push("error"===(null==i?void 0:i.status)?"flow-node-error":"flow-node-success")}var o=n.get(e.id);return q3(q3({},e),{},{data:q3(q3({},e.data),{},{_validationErrors:o}),className:r.join(" ")})})},[i,t,O,w,x,n]),U=(0,T.useMemo)(function(){var e=v();return o.map(function(t){var n,r=e.find(function(e){return e.id===t.source});if(!r)return t;var i=tX(r,t.sourceHandle||null,"output",e,o),a=fE[null!==(n=null==i?void 0:i.type)&&void 0!==n?n:cE.ANY];return q3(q3({},t),{},{style:{stroke:a,strokeWidth:2}})})},[o,v]),V=(0,T.useCallback)(function(){k(),z()},[k,z]),G=(0,T.useCallback)(function(){_()},[_]),B=(0,T.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),X=(0,T.useCallback)(function(e){e.preventDefault();var t=e.dataTransfer.getData("application/reactflow/node-type");if(t){var n=g({x:e.clientX,y:e.clientY}),r=SE.nodeDefinitionMap.get(t);r&&u({type:t,position:n,data:L3(r)})}},[g,u]);return(0,$.jsxs)("div",{className:"flowchart-editor-canvas",onContextMenu:function(e){return e.preventDefault()},children:[(0,$.jsxs)(Xf,{nodes:F,edges:U,onNodesChange:a,onEdgesChange:s,onConnect:A,onConnectStart:I,onConnectEnd:M,onNodeContextMenu:D,onEdgeClick:function(e,t){p(o.map(function(e){return q3(q3({},e),{},{selected:e.id===t.id})}))},onPaneClick:Q,onPaneContextMenu:R,onNodeDragStart:V,onNodeDragStop:G,onDragOver:B,onDrop:X,nodeTypes:SE.nodeTypesWithFallback,colorMode:"dark",fitView:!0,isValidConnection:Z,minZoom:.1,deleteKeyCode:["Delete","Backspace"],proOptions:{hideAttribution:!0},children:[(0,$.jsx)(rh,{color:"#444",gap:15,variant:Jf.Dots}),(0,$.jsx)(fh,{}),(0,$.jsx)(wh,{})]}),(P=C,P?(0,$.jsxs)("div",{className:"flowchart-context-menu",style:{top:P.y,left:P.x},onMouseDown:function(e){return e.stopPropagation()},children:[P.filter.showSearch&&(0,$.jsx)("div",{className:"context-menu-search-wrapper",children:(0,$.jsx)(N,{type:"text",placeholder:"Search to add...",value:P.filter.searchTerm,onChange:function(e){return L(e.target.value)},autoFocus:!0})}),(0,$.jsx)("ul",{children:j.length>0?j.map(function(e,t){return(0,$.jsx)("li",{onClick:e.action,title:e.label,children:e.label},t)}):P.filter.showSearch?(0,$.jsx)("li",{className:"no-results",children:"No matching nodes"}):(0,$.jsx)("li",{className:"no-actions",children:"No actions"})})]}):null)]})},J3=function(e){var t=e.flowItems,n=e.activeFlowId,r=e.presetButtons,i=e.onSelectFlow,o=e.onItemsChange,a=e.onCreateFlow,s=e.onRenameFlow,l=e.onDeleteFlow,u=e.isFlowEnabled,c=e.onToggleFlowEnabled,d=e.isDangerousAllowed,f=e.onToggleDangerous,h=e.runId,p=e.isVisualizationVisible,m=e.onToggleVisualization,g=e.onClearRun,v=e.isValid,y=e.errors,b=e.runStatus,O=e.onRunFlow,w=e.onStopFlow;return(0,$.jsxs)("div",{className:"flowchart-preset-selector",style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,$.jsx)(fe,{label:"Flow",items:t,value:n,onChange:i,onItemsChange:o,onCreate:a,onRename:s,onDelete:l,enableCreate:!0,enableRename:!0,enableDelete:!0,buttons:r}),(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,$.jsx)(N,{type:"checkbox",id:"flow-enabled-toggle",checked:u,onChange:c,title:"Enable or disable this flow from running automatically."}),(0,$.jsx)("label",{htmlFor:"flow-enabled-toggle",children:"Enabled"})]}),(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,$.jsx)(N,{type:"checkbox",id:"flow-dangerous-permission-toggle",checked:d,onChange:f,title:"Allow this flow to execute dangerous nodes like Execute JS or HTTP Request. This can be a security risk."}),(0,$.jsx)("label",{htmlFor:"flow-dangerous-permission-toggle",children:"Allow Dangerous"})]}),(0,$.jsx)("div",{style:{flex:1}}),h&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(j,{onClick:m,children:p?"Hide Last Run":"Show Last Run"}),(0,$.jsx)(j,{color:"secondary",onClick:g,children:"Clear Run"})]}),!v&&(0,$.jsxs)(j,{color:"warning",title:y.join("\n"),children:["Invalid (",y.length,")"]}),"running"===b?(0,$.jsxs)(j,{color:"danger",onClick:w,children:[(0,$.jsx)("i",{className:"fa-solid fa-stop"})," Stop"]}):(0,$.jsxs)(j,{color:"primary",onClick:O,title:"Run the flow starting from Manual Triggers, or from the beginning if none exist.",children:[(0,$.jsx)("i",{className:"fa-solid fa-play"})," Run"]})]})},e5=["Trigger","Logic","Input","Picker","Chat","API Request","Character","Lorebook","JSON","Data Processing","Math & Logic","System","Variables","User Interaction","Utility"];function t5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||n5(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n5(e,t){if(e){if("string"==typeof e)return r5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r5(e,t):void 0}}function r5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i5=function(){var e=W1(function(e){return e.addNode}),t=md().screenToFlowPosition,n=t5((0,T.useState)(""),2),r=n[0],i=n[1],o=t5((0,T.useState)(new Set(["Trigger"])),2),a=o[0],s=o[1],l=Wr(r,200),u=(0,T.useMemo)(function(){var e=SE.allNodeDefinitions;if(!l)return e;var t=l.toLowerCase();return e.filter(function(e){return e.label.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)})},[l]),c=(0,T.useMemo)(function(){var e,t={},n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=n5(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(u);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.category]||(t[r.category]=[]),t[r.category].push(r)}}catch(e){n.e(e)}finally{n.f()}var i=e5;return Object.entries(t).sort(function(e,t){var n=t5(e,1)[0],r=t5(t,1)[0],o=i.indexOf(n),a=i.indexOf(r);return-1!==o&&-1!==a?o-a:-1!==o?-1:-1!==a?1:n.localeCompare(r)})},[u]);return(0,$.jsxs)("div",{className:"flowchart-node-palette",children:[(0,$.jsxs)("div",{className:"palette-header",children:[(0,$.jsx)("h3",{children:"Nodes"}),(0,$.jsx)(N,{value:r,onChange:function(e){return i(e.target.value)},placeholder:"Search...",className:"palette-search"})]}),(0,$.jsx)("div",{className:"palette-categories",children:c.map(function(n){var r=t5(n,2),i=r[0],o=r[1];return(0,$.jsxs)("div",{className:"palette-category ".concat(a.has(i)?"open":""),children:[(0,$.jsxs)("div",{className:"category-label",onClick:function(){s(function(e){var t=new Set(e);return t.has(i)?t.delete(i):t.add(i),t})},children:[i,(0,$.jsx)("span",{className:"fa-solid fa-chevron-right"})]}),a.has(i)&&(0,$.jsx)("div",{className:"category-nodes",children:(0,$.jsx)("div",{className:"category-nodes-list",children:o.map(function(n){return(0,$.jsx)("div",{className:"node-item",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("application/reactflow/node-type",n.type),e.dataTransfer.effectAllowed="move"},onClick:function(r){var i=structuredClone(n.initialData||{});i._version=n.currentVersion,function(n,r,i){var o=document.querySelector(".react-flow"),a=o.clientWidth/2,s=o.clientHeight/2,l=t({x:o.getBoundingClientRect().left+a,y:o.getBoundingClientRect().top+s});e({type:r,position:{x:l.x-75,y:l.y-25},data:i})}(0,n.type,i)},title:n.label,children:n.label},n.type)})})})]},i)})})]})};function o5(e){return function(e){if(Array.isArray(e))return m5(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p5(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a5(e){return a5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a5(e)}function s5(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return l5(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(l5(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,l5(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,l5(d,"constructor",u),l5(u,"constructor",l),l.displayName="GeneratorFunction",l5(u,i,"GeneratorFunction"),l5(d),l5(d,i,"Generator"),l5(d,r,function(){return this}),l5(d,"toString",function(){return"[object Generator]"}),(s5=function(){return{w:o,m:f}})()}function l5(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}l5=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){l5(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},l5(e,t,n,r)}function u5(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function c5(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){u5(o,r,i,a,s,"next",e)}function s(e){u5(o,r,i,a,s,"throw",e)}a(void 0)})}}function d5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d5(Object(n),!0).forEach(function(t){h5(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h5(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a5(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p5(e,t){if(e){if("string"==typeof e)return m5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m5(e,t):void 0}}function m5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g5=function(e){return e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")},v5=function(){var e,t,n,r=W1(),i=r.nodes,o=r.edges,a=r.loadFlow,s=r.getSpecFlow,l=r.copySelection,u=r.paste,c=W1.temporal.getState(),d=c.undo,f=c.redo,h=md(),p=h.getNodes,m=h.setViewport,g=h.screenToFlowPosition,v=h.fitView,y=h.getViewport,b=Lr.getSettings(),O=Gr(),w=(0,T.useRef)(null),x=(0,T.useRef)(null),S=NE(),k=S.isVisualizationVisible,_=S.runId,P=S.runStatus,E=S.toggleVisualization,C=S.clearRun,j=b.flows.find(function(e){return e.id===b.activeFlow});(0,T.useEffect)(function(){var e;b.flows.find(function(e){return e.id===b.activeFlow})||(b.activeFlow=(null===(e=b.flows[0])||void 0===e?void 0:e.id)||"",Lr.saveSettings(),O());var t=b.flows.find(function(e){return e.id===b.activeFlow}),n=(null==t?void 0:t.flow)||{nodes:[],edges:[]},r=null==t?void 0:t.flowVersion;a(structuredClone(n),r),W1.temporal.getState().clear()},[]),(0,T.useEffect)(function(){return w.current&&clearTimeout(w.current),w.current=setTimeout(function(){var e=b.flows.find(function(e){return e.id===b.activeFlow});e&&(e.flow=s(),e.flowVersion=Tr,Lr.saveSettings(),T3.reinitialize())},500),function(){w.current&&clearTimeout(w.current)}},[i,o,b.activeFlow,s]),(0,T.useEffect)(function(){var e=function(e){var t,n=!!document.querySelector(".flowchart-data-popup"),r=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||!(null===(t=document.activeElement)||void 0===t||!t.closest(".cm-content"));if(n&&!r){var i=(e.ctrlKey||e.metaKey)&&"z"===e.key,o=(e.ctrlKey||e.metaKey)&&"y"===e.key;if(i)e.preventDefault(),d();else if(o)e.preventDefault(),f();else if(e.ctrlKey||e.metaKey)if("c"===e.key){e.preventDefault(),l();var a=p().filter(function(e){return e.selected}).length;a>0&&Br("info","".concat(a," node(s) copied."),"ui_action")}else if("v"===e.key){e.preventDefault();var s=document.querySelector(".react-flow__pane");if(s){var c=s.getBoundingClientRect(),h=g({x:c.x+c.width/2,y:c.y+c.height/2});u(h)}}}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[l,u,p,g,d,f,v]);var N=(0,T.useMemo)(function(){var e;return n2(s(),null!==(e=null==j?void 0:j.allowDangerousExecution)&&void 0!==e&&e,null==j?void 0:j.id)},[i,o,s,null==j?void 0:j.allowDangerousExecution]),A=N.isValid,I=N.errors,M=N.invalidNodeIds,D=N.errorsByNodeId,R=(0,T.useMemo)(function(){return b.flows.map(function(e){return{value:e.id,label:e.name}})},[b.flows]),Q=(0,T.useCallback)(function(e){if(e&&b.flows.some(function(t){return t.id===e})){b.activeFlow=e;var t=b.flows.find(function(t){return t.id===e}).flow;a(structuredClone(t)),W1.temporal.getState().clear(),O()}},[b,a,O]),z=(0,T.useCallback)(function(e){var t=g5(e);return t?b.flows.some(function(e){return e.name===t})?(Br("error",'A flow with the name "'.concat(t,'" already exists.'),"ui_action"),{confirmed:!1}):{confirmed:!0,value:{value:oT(),label:t}}:(Br("error","Flow name cannot be empty.","ui_action"),{confirmed:!1})},[b.flows]),L=(0,T.useCallback)(function(e,t){var n=g5(t);return n?b.flows.some(function(t){return t.name===n&&t.id!==e})?(Br("error",'A flow with the name "'.concat(n,'" already exists.'),"ui_action"),{confirmed:!1}):{confirmed:!0,value:{value:e,label:n}}:(Br("error","Flow name cannot be empty.","ui_action"),{confirmed:!1})},[b.flows]),Z=(0,T.useCallback)(function(e){return!(b.flows.length<=1)||(Br("error","Cannot delete the last flow.","ui_action"),!1)},[b.flows]),F=(0,T.useCallback)(function(e){var t,n=b.flows,r=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p5(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{var o=function(){var e=t.value,i=e.value,o=g5(e.label),a=n.find(function(e){return e.id===i});a?r.push(f5(f5({},a),{},{name:o})):r.push({id:i,name:o,flow:{nodes:[],edges:[]},flowVersion:Tr,allowDangerousExecution:!1,enabled:!0})};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}b.flows=r,b.flows.some(function(e){return e.id===b.activeFlow})||(b.activeFlow=e.length>0?e[0].value:""),Lr.saveSettings(),T3.reinitialize(),O()},[b,O]),U=(0,T.useCallback)(function(){A?(C(),T3.runFlowManually(b.activeFlow)):Br("error","Cannot run an invalid flow. Please fix the errors first.","ui_action")},[A,b.activeFlow,C]),V=(0,T.useCallback)(c5(s5().m(function e(){var t,n,r,i;return s5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=b.flows.find(function(e){return e.id===b.activeFlow})){e.n=1;break}return e.a(2);case 1:return e.p=1,n=s(),r=JSON.stringify(n,null,2),e.n=2,navigator.clipboard.writeText(r);case 2:Br("info",'Flow "'.concat(t.name,'" copied to clipboard as JSON.'),"ui_action"),e.n=4;break;case 3:e.p=3,i=e.v,console.error("Failed to copy flow:",i),Br("error","Failed to copy flow to clipboard.","ui_action");case 4:return e.a(2)}},e,null,[[1,3]])})),[s,b.activeFlow,b.flows]),G=(0,T.useCallback)(c5(s5().m(function e(){var t,n,r,i,o;return s5().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.clipboard.readText();case 1:if(t=e.v){e.n=2;break}return Br("error","Clipboard is empty.","ui_action"),e.a(2);case 2:if((n=JSON.parse(t))&&Array.isArray(n.nodes)&&Array.isArray(n.edges)){e.n=3;break}throw new Error("Parsed JSON is not a valid flow structure.");case 3:r=void 0,n&&"object"===a5(n)&&"flowVersion"in n&&(n=(i=n).flow||n,r=i.flowVersion),a(n,r),W1.temporal.getState().clear(),Br("success","Flow imported from clipboard.","ui_action"),e.n=5;break;case 4:e.p=4,o=e.v,console.error("Failed to paste flow:",o),Br("error","Failed to paste flow: ".concat(o.message),"ui_action");case 5:return e.a(2)}},e,null,[[0,4]])})),[a]),B=(0,T.useCallback)(function(){var e=b.flows.find(function(e){return e.id===b.activeFlow});if(e){var t=f5(f5({},e),{},{flow:s(),flowVersion:Tr}),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="".concat(e.name||"flowchart","-flow.json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),Br("info",'Flow "'.concat(e.name,'" exported to file.'),"ui_action")}},[s,b.activeFlow,b.flows]),X=(0,T.useCallback)(function(){var e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=function(){var e=c5(s5().m(function e(t){var n,r,i;return s5().w(function(e){for(;;)switch(e.n){case 0:if(r=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.n=1;break}return e.a(2);case 1:(i=new FileReader).onload=function(){var e=c5(s5().m(function e(t){var n,i,o,s,l,u,c,d,f,h,p,m,g,v;return s5().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,(i=JSON.parse(null===(n=t.target)||void 0===n?void 0:n.result))&&Array.isArray(i.nodes)&&Array.isArray(i.edges)){e.n=1;break}throw new Error("Invalid flow file structure.");case 1:if(o=Lr.getSettings(),(s=g5(r.name.replace(/\.json$/,"")))||(s="imported-flow"),(l=new Set(o.flows.map(function(e){return e.name}))).has(s)){for(u=1;l.has("".concat(s,"-").concat(u));)u++;s="".concat(s,"-").concat(u)}if(c=void 0,i&&"object"===a5(i)&&"flowVersion"in i&&(i=(d=i).flow||i,c=d.flowVersion),!(f=!c)){e.n=3;break}return h=SillyTavern.getContext(),p=h.Popup,e.n=2,p.show.confirm("Flow Import","The imported flow may need to be migrated to work correctly with your current version. Do you want to proceed with import and migration?");case 2:if(e.v){e.n=3;break}return e.a(2);case 3:m={id:oT(),name:s,flow:i,flowVersion:c||Tr,allowDangerousExecution:!1,enabled:!0},o.flows=[].concat(o5(o.flows),[m]),o.activeFlow=m.id,Lr.saveSettings(),a(i,c),W1.temporal.getState().clear(),O(),g=f?" (may require migration)":"",Br("info",'Flow "'.concat(s,'" imported').concat(g," successfully."),"ui_action"),e.n=5;break;case 4:e.p=4,v=e.v,console.error("Failed to import flow:",v),Br("error","Failed to import flow: ".concat(v.message),"ui_action");case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),i.readAsText(r);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),e.click()},[a,O]),Y=(0,T.useCallback)(c5(s5().m(function e(){var t,n,r,i,o,a,s,l,u,c,d;return s5().w(function(e){for(;;)switch(e.n){case 0:if(t=b.flows.find(function(e){return e.id===b.activeFlow})){e.n=1;break}return e.a(2);case 1:if(n=document.querySelector(".react-flow")){e.n=2;break}return Br("error","Could not find the flow element to screenshot.","ui_action"),e.a(2);case 2:if(0!==(r=p()).length){e.n=3;break}return Br("warning","Cannot take screenshot of an empty flow.","ui_action"),e.a(2);case 3:i=2048,o=Sl(r),a={width:o.width+80,height:o.height+80,x:o.x-40,y:o.y-40},l=Yl(a,i,s=a.height/a.width*i,.1,2,{}),u=y(),m(l,{duration:0}),c=document.querySelector(".react-flow__pane"),d=c.style.backgroundColor,c.style.backgroundColor="#202124",setTimeout(c5(s5().m(function e(){var r,o,a;return s5().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,cp(n,{backgroundColor:"#202124",width:i,height:s,filter:function(e){var t,n;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("react-flow__controls")||null!==(n=e.classList)&&void 0!==n&&n.contains("react-flow__minimap"))},skipFonts:!0,pixelRatio:2});case 1:r=e.v,(o=document.createElement("a")).href=r,o.download="flowchart-".concat(t.name,".png"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),Br("info","Screenshot saved.","ui_action"),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Failed to take screenshot:",a),Br("error","Failed to take screenshot.","ui_action");case 3:return e.p=3,m(u,{duration:0}),c.style.backgroundColor=d,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])})),100);case 4:return e.a(2)}},e)})),[p,m,y,b.activeFlow,b.flows]),W=(0,T.useMemo)(function(){return[{key:"copy-clipboard",icon:"fa-solid fa-copy",title:"Copy Flow JSON to Clipboard (Ctrl+C)",onClick:V},{key:"paste-clipboard",icon:"fa-solid fa-paste",title:"Paste Flow from Clipboard (Ctrl+V)",onClick:G},{key:"export-file",icon:"fa-solid fa-file-export",title:"Export Flow to File",onClick:B},{key:"import-file",icon:"fa-solid fa-file-import",title:"Import Flow from File",onClick:X},{key:"screenshot",icon:"fa-solid fa-camera",title:"Take Screenshot",onClick:Y}]},[V,G,B,X,Y]),q=(0,T.useCallback)(function(e){var t=b.flows.find(function(e){return e.id===b.activeFlow});t&&(t.enabled=e.target.checked,Lr.saveSettings(),T3.reinitialize(),O())},[b,O]),H=(0,T.useCallback)(function(){var e=c5(s5().m(function e(t){var n,r,i,o;return s5().w(function(e){for(;;)switch(e.n){case 0:if(n=t.target.checked,r=b.flows.find(function(e){return e.id===b.activeFlow})){e.n=1;break}return e.a(2);case 1:if(!n){e.n=3;break}return i=SillyTavern.getContext(),o=i.Popup,e.n=2,o.show.confirm("Allow Dangerous Operations?","Enabling this allows the flow to run nodes that can execute arbitrary code or make external network requests. This can be a security risk if you import a flow from an untrusted source. Do you want to proceed?");case 2:e.v?r.allowDangerousExecution=!0:t.target.checked=!1,e.n=4;break;case 3:r.allowDangerousExecution=!1;case 4:Lr.saveSettings(),O();case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),[b,O]),K=(0,T.useCallback)(function(){b.isPaletteCollapsed=!b.isPaletteCollapsed,Lr.saveSettings(),O()},[b,O]),J=null!==(e=null===(t=b.flows.find(function(e){return e.id===b.activeFlow}))||void 0===t?void 0:t.enabled)&&void 0!==e&&e,ee=null!==(n=null==j?void 0:j.allowDangerousExecution)&&void 0!==n&&n;return(0,$.jsxs)("div",{className:"flowchart-editor-manager",children:[(0,$.jsx)(J3,{flowItems:R,activeFlowId:b.activeFlow,presetButtons:W,onSelectFlow:Q,onItemsChange:F,onCreateFlow:z,onRenameFlow:L,onDeleteFlow:Z,isFlowEnabled:J,onToggleFlowEnabled:q,isDangerousAllowed:ee,onToggleDangerous:H,runId:_,isVisualizationVisible:k,onToggleVisualization:E,onClearRun:C,isValid:A,errors:I,runStatus:P,onRunFlow:U,onStopFlow:function(){return T3.abortCurrentRun()}}),(0,$.jsxs)("div",{className:"flowchart-editor-area ".concat(b.isPaletteCollapsed?"palette-collapsed":""),ref:x,children:[(0,$.jsx)("div",{className:"palette-toggle",onClick:K,title:"Toggle Node Palette",children:(0,$.jsx)("i",{className:"fa-solid fa-chevron-".concat(b.isPaletteCollapsed?"right":"left")})}),(0,$.jsx)(i5,{}),(0,$.jsx)(K3,{invalidNodeIds:M,errorsByNodeId:D})]})]})},y5=function(){return(0,$.jsx)(Vf,{children:(0,$.jsx)(v5,{})})};function b5(e){return function(e){if(Array.isArray(e))return x5(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w5(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||w5(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w5(e,t){if(e){if("string"==typeof e)return x5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x5(e,t):void 0}}function x5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S5=function(){var e=O5((0,T.useState)(b5(E3)),2),t=e[0],n=e[1];return(0,$.jsxs)("div",{className:"flowchart-popup-section",children:[(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,$.jsx)("h3",{children:"Run History"}),(0,$.jsx)(j,{onClick:function(){E3=[],localStorage.removeItem(x3),n([])},color:"danger",children:"Clear History"})]}),0===t.length?(0,$.jsx)("p",{children:"No flow executions recorded yet."}):(0,$.jsx)("ul",{className:"flowchart-history-list",children:t.map(function(e,t){var n,r,i=!!e.error;return(0,$.jsx)("li",{children:(0,$.jsxs)("details",{children:[(0,$.jsxs)("summary",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px",color:i?"var(--danger)":"inherit"},children:[(0,$.jsxs)("span",{style:{flexGrow:1},children:["Flow: ",(0,$.jsx)("strong",{children:e.flowId})," at ",new Date(e.timestamp).toLocaleString()," (",e.executedNodes.length," nodes executed)",i&&" - FAILED"]}),(0,$.jsx)(j,{className:"fa-solid fa-copy",onClick:function(t){t.preventDefault(),function(e){var t=IE(e,2);navigator.clipboard.writeText(t).then(function(){Br("info","History JSON copied to clipboard.","ui_action")}).catch(function(e){Br("error","Failed to copy history JSON.","ui_action"),console.error("Failed to copy text: ",e)})}(e)},title:"Copy JSON",style:{flexShrink:0}})]}),i&&(0,$.jsxs)("div",{className:"flow-history-error",children:[(0,$.jsxs)("strong",{children:["Error at Node ",null===(n=e.error)||void 0===n?void 0:n.nodeId,":"]}),(0,$.jsx)("pre",{children:null===(r=e.error)||void 0===r?void 0:r.message})]}),(0,$.jsx)("pre",{children:IE(e.executedNodes,2)})]})},t)})})]})};function k5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_5(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var P5=function(e){var t=e.onSave,n=e.isFullscreen,r=e.toggleFullscreen,i=k5((0,T.useState)("editor"),2),o=i[0],a=i[1],s=k5((0,T.useState)(0),2),l=s[0],u=s[1];(0,T.useEffect)(function(){var e=function(){return u(function(e){return e+1})};return V4.on("flow:reset-all-settings",e),function(){V4.off("flow:reset-all-settings",e)}},[]);return(0,$.jsxs)("div",{className:"flowchart-data-popup ".concat(n?"fullscreen":""),children:[(0,$.jsxs)("div",{className:"flowchart-popup-header",children:[(0,$.jsxs)("div",{className:"flowchart-popup-tabs",children:[(0,$.jsx)(j,{onClick:function(){return a("editor")},children:"Editor"}),(0,$.jsx)(j,{onClick:function(){return a("prompts")},children:"Prompts"}),(0,$.jsx)(j,{onClick:function(){return a("history")},children:"History"})]}),(0,$.jsx)("div",{className:"flowchart-popup-controls",children:(0,$.jsx)(j,{onClick:r,title:n?"Exit fullscreen":"Enter fullscreen",children:(0,$.jsx)("i",{className:"fa-solid fa-".concat(n?"compress":"expand")})})})]}),(0,$.jsxs)("div",{className:"flowchart-popup-content",children:["editor"===o&&(0,$.jsx)(y5,{},"editor-".concat(l)),"prompts"===o&&(0,$.jsx)(Jr,{},"prompts-".concat(l)),"history"===o&&(0,$.jsx)(S5,{})]}),(0,$.jsxs)("div",{className:"flowchart-popup-footer",children:[(0,$.jsx)("div",{style:{flex:1}}),(0,$.jsx)(j,{onClick:function(){t()},color:"primary",children:"Close"})]})]})};function E5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$5(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T5=function(){var e=E5((0,T.useState)(!1),2),t=e[0],n=e[1],r=E5((0,T.useState)(!1),2),i=r[0],o=r[1],a=function(){return n(!0)},s=function(){n(!1),o(!1)};return(0,T.useEffect)(function(){return V4.on("openFlowchartDataPopup",a),function(){V4.off("openFlowchartDataPopup",a)}},[]),t?(0,$.jsx)(se,{content:(0,$.jsx)(P5,{onSave:s,isFullscreen:i,toggleFullscreen:function(){return o(!i)}}),type:M.DISPLAY,onComplete:s,preventEscape:!0,options:{large:!0,wide:!0}}):null};function C5(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return j5(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=f.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,p),s=c,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(j5(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,j5(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,j5(d,"constructor",u),j5(u,"constructor",l),l.displayName="GeneratorFunction",j5(u,i,"GeneratorFunction"),j5(d),j5(d,i,"Generator"),j5(d,r,function(){return this}),j5(d,"toString",function(){return"[object Generator]"}),(C5=function(){return{w:o,m:f}})()}function j5(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}j5=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){j5(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},j5(e,t,n,r)}function N5(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var A5=function(){var e=Gr(),t=Lr.getSettings(),n=(0,T.useCallback)(function(t){t(Lr.getSettings()),Lr.saveSettings(),e()},[e]),r=function(){var t,n=(t=C5().m(function t(){var n,r,i,o;return C5().w(function(t){for(;;)switch(t.n){case 0:return n=SillyTavern.getContext(),r=n.Popup,t.n=1,r.show.confirm("Reset All Flowchart Settings","Are you sure you want to reset EVERYTHING, including all flows, prompts, and settings, to their original defaults? This action cannot be undone.");case 1:t.v&&(i=Lr.getSettings(),o=structuredClone(zr),Object.keys(i).forEach(function(e){return delete i[e]}),Object.assign(i,o),Lr.saveSettings(),T3.reinitialize(),J("info","Flowchart has been reset to default settings."),e(),V4.emit("flow:reset-all-settings"));case 2:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){N5(o,r,i,a,s,"next",e)}function s(e){N5(o,r,i,a,s,"throw",e)}a(void 0)})});return function(){return n.apply(this,arguments)}}();return(0,$.jsxs)("div",{className:"flowchart-settings",children:[(0,$.jsxs)("div",{className:"inline-drawer",children:[(0,$.jsxs)("div",{className:"inline-drawer-toggle inline-drawer-header",children:[(0,$.jsx)("b",{children:"Flowchart"}),(0,$.jsx)("div",{className:"inline-drawer-icon fa-solid fa-circle-chevron-down down"})]}),(0,$.jsx)("div",{className:"inline-drawer-content",children:(0,$.jsxs)("div",{className:"flowchart-container",children:[(0,$.jsxs)("div",{className:"setting-row",children:[(0,$.jsx)("label",{children:"Enabled"}),(0,$.jsx)(N,{type:"checkbox",checked:t.enabled,onChange:function(e){var t=e.target.checked;n(function(e){return e.enabled=t}),T3.reinitialize()}})]}),(0,$.jsxs)("div",{className:"setting-row",children:[(0,$.jsx)("label",{title:"Show toast notifications for automatic flow events like 'flow started'. Does not affect errors or UI feedback.",children:"Show flow execution notifications"}),(0,$.jsx)(N,{type:"checkbox",checked:t.showExecutionNotifications,onChange:function(e){var t=e.target.checked;n(function(e){return e.showExecutionNotifications=t})}})]}),(0,$.jsx)("div",{className:"setting-row",children:(0,$.jsx)(j,{onClick:function(){return V4.emit("openFlowchartDataPopup")},children:"Customize Prompts & Data"})}),(0,$.jsx)("div",{className:"setting-row",children:(0,$.jsx)(j,{onClick:r,color:"danger",children:"Reset Everything to Default"})})]})})]}),(0,$.jsx)(T5,{})]})};Lr.initializeSettings().then(function(){!function(){var e=document.getElementById("extensions_settings");if(e){var t=document.getElementById("flowchart-react-settings-root");t||((t=document.createElement("div")).id="flowchart-react-settings-root",e.appendChild(t)),(0,C.createRoot)(t).render((0,$.jsx)(T.StrictMode,{children:(0,$.jsx)(A5,{})}))}else console.error("Flowchart: Extension settings container not found.")}(),T3.reinitialize()}).catch(function(e){console.error(e),J("error","Flowchart data migration failed. Check console for details.")});